******************************************************************  M6502.I/O**  Input and output macros.**  By Mike Westerfield*  Copyright (C) December 1984, All rights reserved*  By the Byte Works, Inc.*****************************************************************         MACRO&LAB     ALTCH&LAB     LDA   #$0F         JSR   SYSCOUT         MEND         MACRO&LAB     BELL&LAB     LDA   #$07         JSR   SYSCOUT         MEND         MACRO&LAB     CLEOL&LAB     LDA   #$1D         JSR   SYSCOUT         MEND         MACRO&LAB     CLEOS&LAB     LDA   #$0B         JSR   SYSCOUT         MEND         MACRO&LAB     COUT  &CHAR&LAB     LDA   &CHAR         JSR   SYSCOUT         MEND         MACRO&LAB     GET2  &N1,&CR         AIF   C:&CR>0,.A         LCLC  &CR.A&LAB     GETX  &N1,&CR,2,0000         MEND         MACRO&LAB     GET4  &N1,&CR         AIF   C:&CR>0,.A         LCLC  &CR.A&LAB     GETX  &N1,&CR,4,0001         MEND         MACRO&LAB     GET8  &N1,&CR         AIF   C:&CR>0,.A         LCLC  &CR.A&LAB     GETX  &N1,&CR,8,0010         MEND         MACRO&LAB     GETC  &N1,&CR         AIF   C:&CR>0,.A         LCLC  &CR.A&LAB     GETX  &N1,&CR,C,1001         MEND         MACRO&LAB     GETS  &N1,&CR         AIF   C:&CR>0,.A         LCLC  &CR.A&LAB     GETX  &N1,&CR,S,1010         MEND         MACRO&LAB     GETX  &N1,&CR,&T,&BT         LCLC  &C         LCLC  &C1         LCLC  &B1         AIF   "&N1"<>"*",.A&B1      SETC  11&C1      SETC  ANOP         AGO   .D.A&C       AMID  &N1,1,1         AIF   "&C"<>"{",.B&C       AMID  &N1,L:&N1,1         AIF   "&C"<>"}",.F&N1      AMID  &N1,2,L:&N1-2&B1      SETC  10         AGO   .C.B&B1      SETC  01.C&C1      SETC  "DC I'&N1'".D&LAB     JSR   SYSREAD         DC    A"SYSGET&T"&C       SETC  00         AIF   C:&CR=0,.E&C       SETC  01.E         DC    B"&BT &C &B1"         &C1         MEXIT.F         MNOTE "Missing closing '}'",16         MEND         MACRO&LAB     GOTOXY &X,&Y&LAB     LDA   #$1E         JSR   SYSCOUT         CLC         LDA   &X         ADC   #32         JSR   SYSCOUT         CLC         LDA   &Y         ADC   #32         JSR   SYSCOUT         MEND         MACRO&LAB     HOME&LAB     LDA   #$0C         JSR   SYSCOUT         MEND         MACRO&LAB     NORMCH&LAB     LDA   #$0E         JSR   SYSCOUT         MEND         MACRO&LAB     PRBL  &AD1&LAB     LDX   &AD1         JSR   SYSPRBL         MEND         MACRO&LAB     PUT2  &N1,&F1,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTX  &N1,&F1,&CR,2,0000,I         MEND         MACRO&LAB     PUT4  &N1,&F1,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTX  &N1,&F1,&CR,4,0001,I4         MEND         MACRO&LAB     PUT8  &N1,&F1,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTX  &N1,&F1,&CR,8,0010,I8         MEND         MACRO&LAB     PUTB  &N1,&F1,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTX  &N1,&F1,&CR,B,1000,I1         MEND         MACRO&LAB     PUTS  &N1,&F1,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTX  "&N1",&F1,&CR,S,1010,C         MEND         MACRO&LAB     PUTC  &N1,&F1,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTX  "&N1",&F1,&CR,C,1001,C         MEND         MACRO&LAB     PUTX  &N1,&F1,&CR,&T,&BP,&DC         LCLC  &C         LCLC  &C1         LCLC  &C2         LCLC  &B1         LCLC  &B2         AIF   L:&N1>1,.A         AIF   "&N1"<>"*",.A&B1      SETC  11&C1      SETC  ANOP         AGO   .E.A&C       AMID  "&N1",1,1         AIF   "&C"<>"#",.B&B1      SETC  00&N1      AMID  "&N1",2,L:&N1-1         AIF   ("&DC"="C"),.A1&C1      SETC  "DC &DC'&N1'"         AGO   .E.A1&C1      SETC  "DC &DC.&N1"         AGO   .E.B         AIF   "&C"<>"{",.C&C       AMID  &N1,L:&N1,1         AIF   "&C"<>"}",.X&N1      AMID  &N1,2,L:&N1-2&B1      SETC  10         AGO   .D.C&B1      SETC  01.D&C1      SETC  "DC I'&N1'".E         AIF   C:&F1>0,.F&B2      SETC  00&C2      SETC  "DC I'0'"         AGO   .J.F         AIF   "&F1"<>"*",.G&B2      SETC  11&C2      SETC  ANOP         AGO   .J.G&C       AMID  &F1,1,1         AIF   "&C"<>"#",.G1&B2      SETC  00&F1      AMID  &F1,2,L:&F1-1&C2      SETC  "DC I'&F1'"         AGO   .J.G1         AIF   "&C"<>"{",.H&C       AMID  &F1,L:&F1,1         AIF   "&C"<>"}",.X&F1      AMID  &F1,2,L:&F1-2&B2      SETC  10         AGO   .I.H&B2      SETC  01.I&C2      SETC  "DC I'&F1'".J&LAB     JSR   SYSRITE         DC    A"SYSPUT&T"&C       SETC  00         AIF   C:&CR=0,.K&C       SETC  01.K         DC    B"&BP &C &B1"         DC    B"&B2 000000"         AIF   .NOT.(("&B1"="00").AND.("&T"="S")),.L         DC    I1"L:SYSA&SYSCNT"         DC    I1"L:SYSA&SYSCNT".LSYSA&SYSCNT &C1         &C2         MEXIT.X         MNOTE "Missing closing '}'",16         MEND         MACRO&LAB     PUTCR &DCB&LAB     LDA   #$0D         JSR   SYSCOUT         MEND         MACRO&LAB     GET_LANG &LANG&LAB     JSR   $FD         DC    H"E1"         DS    2         STX   &LANG         MEND         MACRO&LAB     GET_LINFO &DCB&LAB     JSR   $FD         DC    H"E3"         DC    A"&DCB"         MEND         MACRO&LAB     KEYPRESS&LAB     JSR   $FD         DC    H"9A"         DS    2         MEND         MACRO&LAB     NAMEADR &ADR&LAB     JSR   $FD         DC    H"E0"         DC    A"&ADR"         MEND         MACRO&LAB     RDKEY &NOCURSOR&LAB     JSR   $FD         AIF   C:&NOCURSOR=0,.A         DC    H"98"         AGO   .B.A         DC    H"99".B         DS    2         MEND         MACRO&LAB     READXY&LAB     JSR   $FD         DC    H"90"         DS    2         MEND         MACRO&LAB     SET_LANG &LANG&LAB     LDX   &LANG         JSR   $FD         DC    H"E2"         DS    2         MEND         MACRO&LAB     SET_LINFO &DCB&LAB     JSR   $FD         DC    H"E4"         DC    A"&DCB"         MEND         MACRO&LAB     SIZE&LAB     JSR   $FD         DC    H"91"         DS    2         MEND