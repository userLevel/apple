******************************************************************  M6502.MSCNUM**  Miscelaneous utility macros for use in all mathematics.**  By Mike Westerfield*  Copyright (C) August 1984, All rights reserved*  By the Byte Works, Inc.*****************************************************************         MACRO&LAB     CNV2F &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,2,F,000,100,I         DC    R'SYSPAKF'         MEND         MACRO&LAB     CNV2D &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,2,D,000,101,I         DC    R'SYSCV2F,SYSPAKD'         MEND         MACRO&LAB     CNV4F &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,4,F,001,100,I4         DC    R'SYSPAKF'         MEND         MACRO&LAB     CNV4D &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,4,D,001,101,I4         DC    R'SYSCV4F,SYSPAKD'         MEND         MACRO&LAB     CNV8F &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,8,F,010,100,I8         DC    R'SYSPAKF'         MEND         MACRO&LAB     CNV8D &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,8,D,010,101,I8         DC    R'SYSCV8F,SYSPAKD'         MEND         MACRO&LAB     CNVF2 &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,F,2,100,000,F         MEND         MACRO&LAB     CNVF4 &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,F,4,100,001,F         MEND         MACRO&LAB     CNVF8 &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,F,8,100,010,F         MEND         MACRO&LAB     CNVFD &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,F,D,100,101,F         DC    R'SYSPAKD'         MEND         MACRO&LAB     CNVFS &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVSX &N1,&N2,100,111,F,SYSCTST,SYSPUTF         DC    R'SYSDIV2,SYSPRBL,SYSCOUT'         MEND         MACRO&LAB     CNVD2 &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,D,2,101,000,D         DC    R'SYSCVF2'         MEND         MACRO&LAB     CNVD4 &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,D,4,101,001,D         DC    R'SYSCVF4'         MEND         MACRO&LAB     CNVD8 &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,D,8,101,010,D         DC    R'SYSCVF8'         MEND         MACRO&LAB     CNVDF &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVXY &N1,&N2,D,F,101,100,D         DC    R'SYSPAKF'         MEND         MACRO&LAB     CNVDS &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVSX &N1,&N2,101,111,D,SYSCTST,SYSPUTD         DC    R'SYSDIV2,SYSPRBL,SYSCOUT'         MEND         MACRO&LAB     CNVSF &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVSX &N1,&N2,111,100,C,SYSCFST,SYSGETF         DC    R'SYSKBIN,SYSGET2,SYSCRPB,SYSCOUT,SYSPAKF'         MEND         MACRO&LAB     CNVSD &N1,&N2         AIF   C:&N2>0,.A         LCLC  &N2.A&LAB     CNVSX &N1,&N2,111,101,C,SYSCFST,SYSGETD         DC    R'SYSKBIN,SYSGET2,SYSCRPB,SYSCOUT,SYSCV2F,SYSPAKD'         MEND         MACRO&LAB     FERR  &NUM&LAB     LDA   &NUM         JSR   SYSTRAP         MEND         MACRO&LAB     GETF  &N1,&CR         AIF   C:&CR>0,.A         LCLC  &CR.A&LAB     GETX  &N1,&CR,F,0100         DC    R'SYSCOUT,SYSGET2'         MEND         MACRO&LAB     GETD  &N1,&CR         AIF   C:&CR>0,.A         LCLC  &CR.A&LAB     GETX  &N1,&CR,D,0101         DC    R'SYSCOUT,SYSGET2,SYSCV2F'         MEND         MACRO&LAB     PUTF  &N1,&F1,&F2,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&F2>0,.A1         LCLC  &F2.A1         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTR  &N1,&F1,&F2,&CR,F,0100,F         DC    R'SYSDIV2,SYSPRBL'         MEND         MACRO&LAB     PUTD  &N1,&F1,&F2,&CR         AIF   C:&F1>0,.A         LCLC  &F1.A         AIF   C:&F2>0,.A1         LCLC  &F2.A1         AIF   C:&CR>0,.C         LCLC  &CR.C&LAB     PUTR  &N1,&F1,&F2,&CR,D,0101,D         DC    R'SYSDIV2,SYSPRBL'         MEND         MACRO&LAB     PUTR  &N1,&F1,&F2,&CR,&T,&BP,&DC         LCLC  &C         LCLC  &C1         LCLC  &C2         LCLC  &C3         LCLC  &B1         LCLC  &B2         LCLC  &B3         AIF   "&N1"<>"*",.A&B1      SETC  11&C1      SETC  ANOP         AGO   .E.A&C       AMID  &N1,1,1         AIF   "&C"<>"#",.B&B1      SETC  00&N1      AMID  &N1,2,L:&N1-1&C1      SETC  "DC &DC'&N1'"         AGO   .E.B         AIF   "&C"<>"{",.C&C       AMID  &N1,L:&N1,1         AIF   "&C"<>"}",.X&N1      AMID  &N1,2,L:&N1-2&B1      SETC  10         AGO   .D.C&B1      SETC  01.D&C1      SETC  "DC I'&N1'".E         AIF   C:&F1>0,.F&B2      SETC  00&C2      SETC  "DC I'0'"         AGO   .J.F         AIF   "&F1"<>"*",.G&B2      SETC  11&C2      SETC  ANOP         AGO   .J.G&C       AMID  &F1,1,1         AIF   "&C"<>"#",.G1&B2      SETC  00&F1      AMID  &F1,2,L:&F1-1&C2      SETC  "DC I'&F1'"         AGO   .J.G1         AIF   "&C"<>"{",.H&C       AMID  &F1,L:&F1,1         AIF   "&C"<>"}",.X&F1      AMID  &F1,2,L:&F1-2&B2      SETC  10         AGO   .I.H&B2      SETC  01.I&C2      SETC  "DC I'&F1'".J         AIF   C:&F2>0,.K&B3      SETC  00&C3      SETC  "DC I'0'"         AGO   .P.K         AIF   "&F2"<>"*",.L&B3      SETC  11&C3      SETC  ANOP         AGO   .P.L&C       AMID  &F2,1,1         AIF   "&C"<>"#",.M&B3      SETC  00&F2      AMID  &F2,2,L:&F2-1&C3      SETC  "DC I'&F2'"         AGO   .P.M         AIF   "&C"<>"{",.N&C       AMID  &F2,L:&F2,1         AIF   "&C"<>"}",.X&F2      AMID  &F2,2,L:&F2-2&B3      SETC  10         AGO   .O.N&B3      SETC  01.O&C3      SETC  "DC I'&F2'".P&LAB     JSR   SYSRITE         DC    A"SYSPUT&T"&C       SETC  00         AIF   C:&CR=0,.Q&C       SETC  01.Q         DC    B"&BP &C &B1"         DC    B"&B2 &B3 0000"         &C1         &C2         &C3         MEXIT.X         MNOTE "Missing closing '}'",16         MEND