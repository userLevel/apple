******************************************************************  M6502.PRODOS**  ProDOS specific macros.**  By Mike Westerfield*  Copyright (C) December 1984, All rights reserved*  By the Byte Works, Inc.*****************************************************************         MACRO&LAB     ALL_INT &DCB&LAB     JSR   $BF00         DC    H"40"         DC    I"&DCB"         MEND         MACRO&LAB     CLOSE &DCB&LAB     JSR   $BF00         DC    H"CC"         DC    I"&DCB"         MEND         MACRO&LAB     CREATE &DCB&LAB     JSR   $BF00         DC    H"C0"         DC    I"&DCB"         MEND         MACRO&LAB     DEAL_INT &DCB&LAB     JSR   $BF00         DC    H"41"         DC    I"&DCB"         MEND         MACRO&LAB     DESTROY &DCB&LAB     JSR   $BF00         DC    H"C1"         DC    I"&DCB"         MEND         MACRO&LAB     FINDBUFF &ADR,&LEN         AIF   C:WR0>0,.XXWR0      EQU   $C0WR1      EQU   $C1WR2      EQU   $C2WR3      EQU   $C3.XX         LCLC  &IM&LAB     LDA   #&ADR         STA   WR0         LDA   #>&ADR         STA   WR1&IM      AMID  &LEN,1,1         AIF   "&IM"="#",.A         LDA   &LEN         STA   WR2         LDA   &LEN+1         STA   WR3         AGO   .B.A&LEN     AMID  &LEN,2,L:&LEN         LDA   #&LEN         STA   WR2         LDA   #>&LEN         STA   WR3.B         JSR   SYSFBUF         MEND         MACRO&LAB     FLUSH &DCB&LAB     JSR   $BF00         DC    H"CD"         DC    I"&DCB"         MEND         MACRO&LAB     GET_BUF &DCB&LAB     JSR   $BF00         DC    H"D3"         DC    I"&DCB"         MEND         MACRO&LAB     GET_EOF &DCB&LAB     JSR   $BF00         DC    H"D1"         DC    I"&DCB"         MEND         MACRO&LAB     GET_INFO &DCB&LAB     JSR   $BF00         DC    H"C4"         DC    I"&DCB"         MEND         MACRO&LAB     GET_MARK &DCB&LAB     JSR   $BF00         DC    H"CF"         DC    I"&DCB"         MEND         MACRO&LAB     GET_PREFIX &DCB&LAB     JSR   $BF00         DC    H"C7"         DC    I"&DCB"         MEND         MACRO&LAB     GET_TIME&LAB     JSR   $BF00         DC    H"82"         DS    2         MEND         MACRO&LAB     NEW_LINE &DCB&LAB     JSR   $BF00         DC    H"C9"         DC    I"&DCB"         MEND         MACRO&LAB     ON_LINE &DCB&LAB     JSR   $BF00         DC    H"C5"         DC    I"&DCB"         MEND         MACRO&LAB     OPEN  &DCB&LAB     JSR   $BF00         DC    H"C8"         DC    I"&DCB"         MEND         MACRO&LAB     READ  &DCB&LAB     JSR   $BF00         DC    H"CA"         DC    I"&DCB"         MEND         MACRO&LAB     READ_BLK &DCB&LAB     JSR   $BF00         DC    H"80"         DC    I"&DCB"         MEND         MACRO&LAB     RELEASE &START,&LEN         AIF   C:WR0>0,.XXWR0      EQU   $C0WR1      EQU   $C1WR2      EQU   $C2WR3      EQU   $C3.XX         LCLC  &IM&IM      AMID  &START,1,1         AIF   "&IM"="#",.A&LAB     LDA   &START         STA   WR0         LDA   &START+1         STA   WR1         AGO   .B.A&START   AMID  &START,2,L:&START-1&LAB     LDA   #&START         STA   WR0         LDA   #>&START         STA   WR1.B&IM      AMID  &LEN,1,1         AIF   "&IM"="#",.C         LDA   &LEN         STA   WR2         LDA   &LEN+1         STA   WR3         AGO   .D.C&LEN     AMID  &LEN,2,L:&LEN-1         LDA   #&LEN         STA   WR2         LDA   #>&LEN         STA   WR3.D         JSR   SYSRELS         MEND         MACRO&LAB     RENAM &DCB&LAB     JSR   $BF00         DC    H"C2"         DC    I"&DCB"         MEND         MACRO&LAB     RESERVE &START,&LEN         AIF   C:WR0>0,.XXWR0      EQU   $C0WR1      EQU   $C1WR2      EQU   $C2WR3      EQU   $C3.XX         LCLC  &IM&IM      AMID  &START,1,1         AIF   "&IM"="#",.A&LAB     LDA   &START         STA   WR0         LDA   &START+1         STA   WR1         AGO   .B.A&START   AMID  &START,2,L:&START-1&LAB     LDA   #&START         STA   WR0         LDA   #>&START         STA   WR1.B&IM      AMID  &LEN,1,1         AIF   "&IM"="#",.C         LDA   &LEN         STA   WR2         LDA   &LEN+1         STA   WR3         AGO   .D.C&LEN     AMID  &LEN,2,L:&LEN-1         LDA   #&LEN         STA   WR2         LDA   #>&LEN         STA   WR3.D         JSR   SYSRESV         MEND         MACRO&LAB     SET_BUF &DCB&LAB     JSR   $BF00         DC    H"D3"         DC    I"&DCB"         MEND         MACRO&LAB     SET_EOF &DCB&LAB     JSR   $BF00         DC    H"D0"         DC    I"&DCB"         MEND         MACRO&LAB     SET_INFO &DCB&LAB     JSR   $BF00         DC    H"C3"         DC    I"&DCB"         MEND         MACRO&LAB     SET_MARK &DCB&LAB     JSR   $BF00         DC    H"CE"         DC    I"&DCB"         MEND         MACRO&LAB     SET_PREFIX &DCB&LAB     JSR   $BF00         DC    H"C6"         DC    I"&DCB"         MEND         MACRO&LAB     WRITE &DCB&LAB     JSR   $BF00         DC    H"CB"         DC    I"&DCB"         MEND         MACRO&LAB     WRITE_BLK &DCB&LAB     JSR   $BF00         DC    H"81"         DC    I"&DCB"         MEND