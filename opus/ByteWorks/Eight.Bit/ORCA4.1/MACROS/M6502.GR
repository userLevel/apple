******************************************************************  M6502.GR**  Graphics macros.**  By Mike Westerfield*  Copyright (C) December 1984, All rights reserved*  By the Byte Works, Inc.*****************************************************************         MACRO&LAB     BB    &PIXELS         LCLC  &BITS         LCLC  &C         LCLA  &N&N       SETA  1.A&C       AMID  "&PIXELS",&N,1         AIF   "&C"=" ",.B&BITS    SETC  "&BITS"+"1"         AGO   .C.B&BITS    SETC  "&BITS"+"0".C&N       SETA  &N+1         AIF   &N<=L:&PIXELS,.A&LAB     DC    B"&BITS"         MEND         MACRO&LAB     COLOR &C         LCLA  &N         LCLA  &D&N       ASEARCH "BLACK   MAGENTA DBLUE   PURPLE  ",&C,1         AIF   &N>0,.A&D       SETA  32&N       ASEARCH "GREEN   GREY    MBLUE   LBLUE   ",&C,1         AIF   &N>0,.A&D       SETA  64&N       ASEARCH "BROWN   ORANGE  GREY2   PINK    ",&C,1         AIF   &N>0,.A&D       SETA  96&N       ASEARCH "LGREEN  YELLOW  AQUA    WHITE   ",&C,1.A         AIF   &N=0,.B&N       SETA  (&N+&D)/8&LAB     LDA   #&N         AGO   .C.B&LAB     LDA   &C.C         JSR   SYSCOLR         MEND         MACRO&LAB     COLORMAP &ONOFF         LCLA  &P&P       ASEARCH "ON  OFF ",&ONOFF,1         AIF   &P=1,.A         AIF   &P=5,.B         MNOTE 'Bad Parameter',16         MEXIT.A&LAB     LDA   #<SYSCMAP         STA   SYSPLOT+1         LDA   #>SYSCMAP         STA   SYSPLOT+2         MEXIT.B&LAB     LDA   SYSPLOT2+1         STA   SYSPLOT+1         LDA   SYSPLOT2+2         STA   SYSPLOT+2         MEND         MACRO&LAB     DRAWBLOCK &BLOCK,&X,&Y         LCLC  &C&LAB     LDA   &X         STA   SYSAX&C       AMID  "&X",1,1         AIF   "&C"<>"#",.A&X       AMID  "&X",2,L:&X         LDA   #>&X         AGO   .B.A         LDA   &X+1.B         STA   SYSAX+1         LDA   &Y         STA   SYSAY&C       AMID  "&Y",1,1         AIF   "&C"<>"#",.C&Y       AMID  "&Y",2,L:&Y         LDA   #>&Y         AGO   .D.C         LDA   &Y+1.D         STA   SYSAY+1         LDA   #&BLOCK         STA   $2A         LDA   #>&BLOCK         STA   $2B         JSR   SYSDBLK         MEND         MACRO&LAB     DRAWTO &X,&Y         LCLC  &C&LAB     LDA   &X         STA   SYSAX&C       AMID  "&X",1,1         AIF   "&C"<>"#",.A&X       AMID  "&X",2,L:&X         LDA   #>&X         AGO   .B.A         LDA   &X+1.B         STA   SYSAX+1         LDA   &Y         STA   SYSAY&C       AMID  "&Y",1,1         AIF   "&C"<>"#",.C&Y       AMID  "&Y",2,L:&Y         LDA   #>&Y         AGO   .D.C         LDA   &Y+1.D         STA   SYSAY+1         JSR   SYSGLIN         MEND         MACRO&LAB     FILLSCREEN&LAB     JSR   SYSFILL         MEND         MACRO&LAB     FILLSHAPE         JSR   SYSRFIL         MEND         MACRO&LAB     FINDXY &X,&Y&LAB     LDA   SYSX         STA   &X         LDA   SYSX+1         STA   &X+1         LDA   SYSY         STA   &Y         LDA   SYSY+1         STA   &Y+1         MEND         MACRO&LAB     GROUT&LAB     LDA   $36         STA   SYSTEXT         LDA   $37         STA   SYSTEXT+1         LDA   #<SYSGOUT         STA   $36         LDA   #>SYSGOUT         STA   $37         MEND         MACRO&LAB     INITGRAPH&LAB     LDA   #0         STA   SYSX         STA   SYSX+1         STA   SYSY         STA   SYSY+1         STA   SYSGL         STA   SYSGL+1         STA   SYSGB         STA   SYSGB+1         LDA   SYSMAXX         STA   SYSGR         LDA   SYSMAXX+1         STA   SYSGR+1         LDA   SYSMAXY         STA   SYSGT         LDA   SYSMAXY+1         STA   SYSGT+1         MEND         MACRO&LAB     MOVETO &X,&Y         LCLC  &C&LAB     LDA   &X         STA   SYSX&C       AMID  "&X",1,1         AIF   "&C"<>"#",.A&X       AMID  "&X",2,L:&X         LDA   #>&X         AGO   .B.A         LDA   &X+1.B         STA   SYSX+1         LDA   &Y         STA   SYSY&C       AMID  "&Y",1,1         AIF   "&C"<>"#",.C&Y       AMID  "&Y",2,L:&Y         LDA   #>&Y         AGO   .D.C         LDA   &Y+1.D         STA   SYSY+1         MEND         MACRO&LAB     PLOT   &X,&Y         LCLC  &C&LAB     LDA   &X         STA   SYSX&C       AMID  "&X",1,1         AIF   "&C"<>"#",.A&X       AMID  "&X",2,L:&X         LDA   #>&X         AGO   .B.A         LDA   &X+1.B         STA   SYSX+1         LDA   &Y         STA   SYSY&C       AMID  "&Y",1,1         AIF   "&C"<>"#",.C&Y       AMID  "&Y",2,L:&Y         LDA   #>&Y         AGO   .D.C         LDA   &Y+1.D         STA   SYSY+1         JSR   SYSPLOT         MEND         MACRO&LAB     READXY &X,&Y         LCLC  &C&LAB     LDA   &X         STA   SYSX&C       AMID  "&X",1,1         AIF   "&C"<>"#",.A&X       AMID  "&X",2,L:&X         LDA   #>&X         AGO   .B.A         LDA   &X+1.B         STA   SYSX+1         LDA   &Y         STA   SYSY&C       AMID  "&Y",1,1         AIF   "&C"<>"#",.C&Y       AMID  "&Y",2,L:&Y         LDA   #>&Y         AGO   .D.C         LDA   &Y+1.D         STA   SYSY+1         JSR   SYSGRED         MEND         MACRO&LAB     SET_COLOR &C1,&C2,&C3         LCLA  &N         LCLA  &D         LCLC  &RET         LCLC  &C&C       SETC  &C1&RET     SETC  .C1         AGO   .SUB.C1&LAB     LDA   &C&C       SETC  &C2&RET     SETC  .C2         AGO   .SUB.C2         LDX   &C&C       SETC  &C3&RET     SETC  .C3         AGO   .SUB.C3         LDY   &C         JSR   SYSSCOL         MEXIT.SUB&N       ASEARCH "BLACK   MAGENTA DBLUE   PURPLE  ",&C,1         AIF   &N>0,.A&D       SETA  32&N       ASEARCH "GREEN   GREY    MBLUE   LBLUE   ",&C,1         AIF   &N>0,.A&D       SETA  64&N       ASEARCH "BROWN   ORANGE  GREY2   PINK    ",&C,1         AIF   &N>0,.A&D       SETA  96&N       ASEARCH "LGREEN  YELLOW  AQUA    WHITE   ",&C,1.A         AIF   &N=0,.B&N       SETA  (&N+&D)/8&C       SETC  #&N.B         AGO   &RET         MEND         MACRO&LAB     TEXTOUT&LAB     LDA   SYSTEXT         STA   $36         LDA   SYSTEXT+1         STA   $37         MEND         MACRO&LAB     VIEW  &NUM&LAB     ANOP         LCLA  &N         LCLC  &C         LCLA  &D&C       AMID  "&NUM",1,1         AIF   "&C"<>"#",.A&NUM     AMID  "&NUM",2,L:&NUM&N       SETA  &NUM         AGO   .B.A&N       ASEARCH "TEXT    TEXT2   TEXT80  LORES   ",&NUM,1         AIF   &N>0,.B&D       SETA  32&N       ASEARCH "LORES2  DLORES  HIRES   HIRES2  ",&NUM,1         AIF   &N>0,.B&D       SETA  64&N       ASEARCH "CHIRES  CHIRES2 DHIRES  CDHIRES ",&NUM,1         AIF   &N>0,.B         MNOTE 'Bad parameter',16         MEXIT.B&N       SETA  (&N+&D)/8         AGO   .L&N.L0         STA   $C052         STA   $C051         STA   $C000         STA   $C054         STA   $C00C         MEXIT.L1         STA   $C052         STA   $C051         STA   $C000         STA   $C055         STA   $C00C         MEXIT.L2         STA   $C056         STA   $C052         STA   $C051         STA   $C001         STA   $C00F         STA   $C054         STA   $C00D         MEXIT.L3         STA   $C000         STA   $C054         STA   $C056         STA   $C052         STA   $C00C         STA   $C050         MEXIT.L4         STA   $C000         STA   $C055         STA   $C056         STA   $C052         STA   $C00C         STA   $C050         MEXIT.L5         STA   $C054         STA   $C056         STA   $C052         STA   $C00D         STA   $C050         STA   $C001         STA   $C008         STA   $C05E         MEXIT.L6.L8         STA   $C000         STA   $C00C         STA   $C057         STA   $C054         STA   $C052         STA   $C050         MEXIT.L7.L9         STA   $C000         STA   $C00C         STA   $C057         STA   $C055         STA   $C052         STA   $C050         MEXIT.L10.L11         STA   $C052         STA   $C001         STA   $C057         STA   $C008         STA   $C05E         STA   $C050         STA   $C00D         MEND         MACRO&LAB     VIEWPORT &X1,&X2,&Y1,&Y2         LCLC  &C&LAB     LDA   &X1         STA   SYSGL&C       AMID  "&X1",1,1         AIF   "&C"<>"#",.A&X1      AMID  "&X1",2,L:&X1         LDA   #>&X1         AGO   .B.A         LDA   &X1+1.B         STA   SYSGL+1         LDA   &X2         STA   SYSGR&C       AMID  "&X2",1,1         AIF   "&C"<>"#",.C&X2      AMID  "&X2",2,L:&X2         LDA   #>&X2         AGO   .D.C         LDA   &X2+1.D         STA   SYSGR+1         LDA   &Y1         STA   SYSGB&C       AMID  "&Y1",1,1         AIF   "&C"<>"#",.E&Y1      AMID  "&Y1",2,L:&Y1         LDA   #>&Y1         AGO   .F.E         LDA   &Y1+1.F         STA   SYSGB+1         LDA   &Y2         STA   SYSGT&C       AMID  "&Y2",1,1         AIF   "&C"<>"#",.G&Y2      AMID  "&Y2",2,L:&Y2         LDA   #>&Y2         AGO   .H.G         LDA   &Y2+1.H         STA   SYSGT+1         MEND         MACRO&LAB     WRITETO &NUM         LCLA  &N         LCLC  &C         LCLA  &D&C       AMID  "&NUM",1,1         AIF   "&C"<>"#",.A&NUM     AMID  "&NUM",2,L:&NUM&N       SETA  &NUM         AGO   .B.A&N       ASEARCH "TEXT    TEXT2   TEXT80  LORES   ",&NUM,1         AIF   &N>0,.B&D       SETA  32&N       ASEARCH "LORES2  DLORES  HIRES   HIRES2  ",&NUM,1         AIF   &N>0,.B&D       SETA  64&N       ASEARCH "DHIRES  CHIRES  CHIRES2 CDHIRES ",&NUM,1         AIF   &N>0,.B         MNOTE 'Bad parameter',16         MEXIT.B&D       SETA  (&N+&D)/4+1&C       AMID  "T1T280L1L2DLHRHRDHCHCHDC",&D,2&LAB     LDX   #6SYSA&SYSCNT LDA SYSGR&C,X         STA   SYSMAXX,X         DEX         BPL   SYSA&SYSCNT         LDA   #<SYSGR&C+7         STA   SYSPLOT+1         STA   SYSPLOT2+1         LDA   #>SYSGR&C+7         STA   SYSPLOT+2         STA   SYSPLOT2+2         LDA   #<SYSRD&C         STA   SYSGRED+1         LDA   #>SYSRD&C         STA   SYSGRED+2&N       SETA  (&D-1)/2         AGO   .L&N.L6.L8.L9.L11         LDA   #$20         STA   SYSGBASE         MEXIT.L7.L10         LDA   #$40         STA   SYSGBASE         MEXIT.L0.L1.L2.L3.L4.L5         MEND