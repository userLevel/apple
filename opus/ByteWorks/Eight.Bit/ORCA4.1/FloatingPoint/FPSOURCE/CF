         LIST  OFF         SYMBOL OFF         KEEP  CALCF         MCOPY /RAM/CF.MACROS******************************************************************  CALCF - Floating Point Calculator**  OPERATIONS SUPPORTED:*        +       -       *       /       ABS     SIGN*        SQRT    RANDOM  ARCTAN  SIN     COS     TAN*        LN      EXP     INT     ^**  VARIABLES: A - Z**  INPUT/OUTPUT FORMATS:*        decimal*        hex******************************************************************CALCF    START         JSR   SINIT         JSR   SCALC         RTSFALSE    GEQU  0                        boolean flagsTRUE     GEQU  1DEBUG    GEQU  TRUE                     enable/disable trace codeTRACE    ENTRY         DC    I1'FALSE'                start/stop trace         DC    R'SYSGET2'         DC    R'SYSDIV2'         END******************************************************************  COMMON - Common Data Area******************************************************************COMMON   DATA;;  Constants;LEN      GEQU  4                        length of variablesRETURN   GEQU  $0D                      RETURN key code;;  Zero Page Definitions.;R0       GEQU  $2                       general use pointerR1       GEQU  $3STKS     GEQU  $4                       work stack startSTK      GEQU  $6                       work stack pointerSTKE     GEQU  $8                       work stack endSYSESTMIN GEQU $94                      evaluation stack pointersSYSESTMAX GEQU $96SYSESTE  GEQU  $98WR0      GEQU  $C0                      system registersWR1      GEQU  $C1WR2      GEQU  $C2WR3      GEQU  $C3;;  Common variables.;NFLAG    DS    1                        number expected flagNOPS     DS    1                        number of operands foundNPARIN   DS    1                        number of unmatched (OSP      DS    1                        out of stack priorityVARS     DS    LEN*15                   variable storage         DC    F'3.1415926'         DS    LEN*10LINE     DSTR  ,250                     input lineCC       DS    1                        pointer in input lineSCODE    DS    1                        token codeSISP     DS    1                        token in stack prioritySVAL     DS    LEN                      token valueTSCODE   DS    2+LEN                    temp token storage         END         APPEND CF.SALID