         LIST  OFF         SYMBOL OFF         MCOPY /RAM/XR.MACROS         KEEP  XREF         ORG   $3000******************************************************************  XREF V4.1**  Global Cross Reference Utility.**  Written by Mike Westerfield**  This source code is a trade secret of the Byte Works, Inc.,*  and cannot be copied or used in any way without the written*  permission of that company.**  Object module copyright 1984,1986*  By the Byte Works, Inc.*  All rights reserved*******************************************************************  Change History:*        25 Aug 85 - SINIT fixed to work with prompted file names**        23 May 86 - V4.1 Phase 1 B2*              1. Changed to allow PRIVATE and PRIVDATA*              2. Handles language numbers correctly******************************************************************XREF     START         USING COMMON         TSX         STX   S         JSR   SINIT         JSR   SXREF         JSR   SFINI         RTS         DC    C'Copyright October 1984,1986_'         DC    C'By the Byte Works, Inc._'         DC    C'All rights reserved'         END******************************************************************  COMMON - Common Data Areas******************************************************************COMMON   DATA;;  Constants;RETURN   EQU   $D                       RETURN key codeESC      EQU   27                       ESC key codeMAXRANGE EQU   5                        max number of sub rangesPTRLEN   EQU   6                        pointer lengthSYMLEN   EQU   16                       length of a symbol table entry;;  Fixed memory locations.;DEVTABL  EQU   $812                     HOST unit/device tableSUSER    EQU   $2000                    load point for user routineKEYBOARD EQU   $C000                    keyboard input;;  Zero Page Equates;R0       GEQU  $2                       general purpose registersR1       GEQU  $3R2       GEQU  $4R3       GEQU  $5R4       GEQU  $6R5       GEQU  $7R6       GEQU  $8R7       GEQU  $9R8       GEQU  $AR9       GEQU  $BR10      GEQU  $CR11      GEQU  $DR12      GEQU  $ER13      GEQU  $FR14      GEQU  $10R15      GEQU  $11STABLE   GEQU  $12                      symbol table startPTE      GEQU  $14                      max location in symbol tableSTE      GEQU  $16                      symbol table endCNT      GEQU  $18                      SYMBOL indexADDR     GEQU  $1A                      pointer for COPYWR0      GEQU  $C0                      macro work registersWR1      GEQU  $C1WR2      GEQU  $C2WR3      GEQU  $C3;;  DCBs;CLOSE_DCB DC   I1'1'CLOSE_REF DS   1MARK_DCB DC    I1'2'MARK_REF DS    1MARK_VAL DS    3RD_DCB   DC    I1'4'                    read DCBRD_REF   DS    1         DC    A'CH'         DC    I'1'RD_TRANS DS    2;;  Global Variables;LIST     DC    I1'1'                    list file flagFREQ     DC    I1'0'                    do frequence count flagCRSREF   DC    I1'1'                    do cross reference flagRANGE    DC    C'AZ'         DS    MAXRANGE*2-2         DC    I1'64'                   max length of FNAMEFNAME    DS    65CH       DS    1                        character readCOPY     DC    A'0'                     address of first copy fileERR      DC    I1'0'                    error flagINDEX    DS    1                        index into device tableLINE     DS    80                       current lineLNUM     DC    I4'0'                    line numberLTYPE    DC    H'FF'                    languages numberPCH      DS    1                        output columns used in this linePRINT    DC    I1'0'                    printer on flagS        DS    1                        stack registerSNAME    DS    10                       symbol nameVOLUME   DS    18                       volume name         END         APPEND XR.SALID