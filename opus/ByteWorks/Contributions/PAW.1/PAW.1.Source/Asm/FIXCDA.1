         mcopy "fixcda.mac"FixCDA   START** Repair the CDA vector, in case it has been damaged (eg. Tass Times)** P. Watson, 27th August 1988.*         longa on         longi onVectAddr equ   $E10048                  Address of JML to CDA managerIdRoutin equ   $FE1F                    Machine Id Routine         phb         phk         plb         php                            Save register width and mode status         rep   #$30                     Guarantee 16 bit registers         lda   #0000         pha                            Result...         pha         pha         pha                            ...bytes         pha                            A-reg         pha                            X-reg         pha                            Y-reg         pea   IdRoutin                 Monitor routine address         _FWEntry         pla                            Y-reg         tay         pla                            X-reg         tax         pla                            A-reg         pla                            P-reg         cpy   #$0001                   ROM 01?         bne   Error                    Can't safely zap with any other ROM* Restore the vector         lda   Vector         sta   VectAddr         lda   Vector+2         sta   VectAddr+2         lda   #$0000                   Good return codeExit     plp                            Restore register width and mode values         plb                            Restore data bank         rtlError    anop         lda   #$FFFF                   Set bad return code         bra   ExitVector   jml   $FEADB9                  Jump to CDA manager (ROM 01)         end