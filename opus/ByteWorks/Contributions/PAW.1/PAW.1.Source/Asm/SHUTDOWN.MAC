 MACRO&lab _DControlGS &params&lab jsl $E100A8 dc i2"$202E" dc i4"&params" MEND MACRO&lab _DInfoGS &params&lab jsl $E100A8 dc i2"$202C" dc i4"&params" MEND MACRO&lab _EndSessionGS &params&lab jsl $E100A8 dc i2"$201E" dc i4"&params" MEND MACRO&lab _FlushGS &params&lab jsl $E100A8 dc i2"$2015" dc i4"&params" MEND MACRO&lab _GetVersionGS &params&lab jsl $E100A8 dc i2"$202A" dc i4"&params" MEND MACRO&lab _SessionStatusGS &params&lab jsl $E100A8 dc i2"$201F" dc i4"&params" MEND MACRO&lab _OSShutdownGS &params&lab jsl $E100A8 dc i2"$2003" dc i4"&params" MEND MACRO&lab dp &pointer&lab dc i4'&pointer' MEND MACRO&lab longm&lab ANOP rep #%00100000 longa on MEND MACRO&lab shortm&lab ANOP sep #%00100000 longa off MEND MACRO&lab writeln &addr&lab ANOP AIF C:&addr=0,.c lclc &char&char amid &addr,1,1 AIF "&char"="#",.a pea &addr|-16 pea &addr ago .b.a lclc &str&str amid &addr,3,L:&addr-3 bra ~b&SYSCNT~a&SYSCNT dc I1'L:&str',C'&str'~b&SYSCNT pea ~a&SYSCNT|-16 pea ~a&SYSCNT.b ldx #$1A0C~c&SYSCNT jsl $E10000 MEXIT.c pea +(~c&SYSCNT+1)|-16 pea ~c&SYSCNT+1 AGO .b MEND MACRO&lab _QUIT &params&lab jsl $E100A8 dc i2"$29" dc i4"&params" MEND MACRO&lab DAccessRecGS &pCount,&devNum,&code,&list,&requestCount,&transferCount AIF C:&pCount,.p1 LCLA &pCount.p1 AIF C:&devNum,.p2 LCLA &devNum.p2 AIF C:&code,.p3 LCLA &code.p3 AIF C:&list,.p4 LCLA &list.p4 AIF C:&requestCount,.p5 LCLA &requestCount.p5 AIF C:&transferCount,.p6 LCLA &transferCount.p6&lab DS 0&lab._pCount DC i2'&pCount'&lab._devNum DC i2'&devNum'&lab._code DC i2'&code'&lab._list DC i4'&list'&lab._requestCount DC i4'&requestCount'&lab._transferCount DC i4'&transferCount' MEND MACRO&lab DInfoRecGS &pCount,&devNum,&devName,&characteristics,&totalBlocks,&slotNum,&unitNum,&version,&deviceID,&headLink,&forwardLink,&extendedDIBptr AIF C:&pCount,.p1 LCLA &pCount.p1 AIF C:&devNum,.p2 LCLA &devNum.p2 AIF C:&devName,.p3 LCLA &devName.p3 AIF C:&characteristics,.p4 LCLA &characteristics.p4 AIF C:&totalBlocks,.p5 LCLA &totalBlocks.p5 AIF C:&slotNum,.p6 LCLA &slotNum.p6 AIF C:&unitNum,.p7 LCLA &unitNum.p7 AIF C:&version,.p8 LCLA &version.p8 AIF C:&deviceID,.p9 LCLA &deviceID.p9 AIF C:&headLink,.p10 LCLA &headLink.p10 AIF C:&forwardLink,.p11 LCLA &forwardLink.p11 AIF C:&extendedDIBptr,.p12 LCLA &extendedDIBptr.p12&lab DS 0&lab._pCount DC i2'&pCount'&lab._devNum DC i2'&devNum'&lab._devName DC i4'&devName'&lab._characteristics DC i2'&characteristics'&lab._totalBlocks DC i4'&totalBlocks'&lab._slotNum DC i2'&slotNum'&lab._unitNum DC i2'&unitNum'&lab._version DC i2'&version'&lab._deviceID DC i2'&deviceID'&lab._headLink DC i2'&headLink'&lab._forwardLink DC i2'&forwardLink'&lab._extendedDIBptr DC i4'&extendedDIBptr' MEND MACRO&lab OSShutdownRecGS &pCount,&shutdownFlag AIF C:&pCount,.p1 LCLA &pCount.p1 AIF C:&shutdownFlag,.p2 LCLA &shutdownFlag.p2&lab DS 0&lab._pCount DC i2'&pCount'&lab._shutdownFlag DC i2'&shutdownFlag' MEND MACRO&lab SessionStatusRecGS &pCount,&status AIF C:&pCount,.p1 LCLA &pCount.p1 AIF C:&status,.p2 LCLA &status.p2&lab DS 0&lab._pCount DC i2'&pCount'&lab._status DC i2'&status' MEND MACRO&lab VersionRecGS &pCount,&version AIF C:&pCount,.p1 LCLA &pCount.p1 AIF C:&version,.p2 LCLA &version.p2&lab DS 0&lab._pCount DC i2'&pCount'&lab._version DC i2'&version' MEND MACRO&lab _DeskShutDown&lab ldx #$0305 jsl $E10000 MEND