{ Count                                                 }{                                                       }{ This program counts the characters, lines, and words  }{ in a file.  It also prints the average word length    }{ and a histogram of word lengths.                      }program Count(input,output);const   maxLen = 30;                 {max length of a word}var   ch: char;                    {character from the file}   f: text;                     {file to count}   name: string[80];            {file name}   i: integer;                  {loop variable}   length: integer;             {length of a word}   chars: longint;              {characters in the file}   inWord: boolean;             {are we in a word?}   lines: longint;              {lines in the file}   wordChars: longint;          {characters that appear in words}   wordLen: array[1..30] of longint; {word length histogram}   words: longint;              {words in the file}   function IsAlpha(ch: char): boolean;   { Is the character alphabetic?                       }   {                                                    }   { Parameters:                                        }   {    ch - character to test                          }   {                                                    }   { Returns: True if the character is alphabetic, else }   {    false.                                          }   begin {IsAlpha}   IsAlpha := ((ch >= 'a') and (ch <= 'z'))      or ((ch >= 'A') and (ch <= 'Z'));   end; {IsAlpha}   function IsAlphaNum(ch: char): boolean;   { Is the character alphabetic or numeric?            }   {                                                    }   { Parameters:                                        }   {    ch - character to test                          }   {                                                    }   { Returns: True if the character is alphabetic or    }   {    numeric, else false.                            }   begin {IsAlphaNum}   IsAlphaNum := ((ch >= '0') and (ch <= '9')) or IsAlpha(ch);   end; {IsAlphaNum}   procedure WordStats;   { Add in the statistics for a new word.              }   {                                                    }   { Variables:                                         }   {    length - length of the word                     }   {    wordChars - number of characters in words       }   {    wordLen - word length histogram                 }   begin {WordStats}   wordChars :=                 {update the word character count}      wordChars+length;   if length > maxLen then      {make sure we don't exceed the max length}      length := maxLen;   wordLen[length] :=           {update the histogram}      wordLen[length]+1;   end; {WordStats}beginwrite('File to count:');        {open the input file}readln(name);reset(f, name);words := 0;                     {no words so far}chars := 0;                     {no characters so far}lines := 0;                     {no lines so far}for i := 1 to maxLen do         {no words in the length array}   wordLen[i] := 0;wordChars := 0;                 {no characters in a word, yet}inWord := false;                {not doing a word}while not eof(f) do begin       {process the file}   if eoln(f) then begin      readln(f);      lines := lines+1;         {count an end of line}      if inWord then begin         WordStats;             {total the word statistics}         inWord := false;       {not in a word}         end; {if}      end {if}   else begin      read(f, ch);              {get the character}      chars := chars+1;         {count the character}      if inWord then begin      {continue stats if in a word}         if IsAlphaNum(ch) then            length := length+1         else begin            inWord := false;            WordStats;            end; {else}         end {if}      else if IsAlpha(ch) then begin         words := words+1;      {count the new word}         inWord := true;        {note that we are in a word}         length := 1;           {scan the characters in the word}         end; {else if}      end; {else}   end; {while}writeln(chars:1, ' characters.'); {write the statistics}writeln(words:1, ' words.');writeln(lines:1, ' lines.');writeln('The average word length is ', wordChars/words:1:1, '.');writeln;writeln('  length     number');writeln('  ------     ------');for i := 1 to maxLen do   writeln(i:8, wordLen[i]:11);end.