 macro&l add4 &m1,&m2,&m3 lclb &yistwo lclc &c&l ~setm aif c:&m3,.a&c amid "&m2",1,1 aif "&c"<>"#",.a&c amid "&m1",1,1 aif "&c"="{",.a aif "&c"="[",.a&c amid "&m2",2,l:&m2-1 aif &c>=65536,.a clc ~lda &m1 ~op adc,&m2 ~sta &m1 bcc ~&SYSCNT ~op.h inc,&m1~&SYSCNT anop ago .c.a aif c:&m3,.b lclc &m3&m3 setc &m1.b clc ~lda &m1 ~op adc,&m2 ~sta &m3 ~lda.h &m1 ~op.h adc,&m2 ~sta.h &m3.c ~restm mend macro&l cmp4 &n1,&n2 lclb &yistwo&l ~setm ~lda.h &n1 ~op.h eor,&n2 bpl ~a&SYSCNT ~lda.h &n2 ~op.h cmp,&n1 bra ~b&SYSCNT~a&SYSCNT ~lda.h &n1 ~op.h cmp,&n2 bne ~b&SYSCNT ~lda &n1 ~op cmp,&n2~b&SYSCNT anop ~restm mend macro&l sub4 &m1,&m2,&m3 lclb &yistwo lclc &c&l ~setm aif c:&m3,.a&c amid "&m2",1,1 aif "&c"<>"#",.a&c amid "&m1",1,1 aif "&c"="{",.a aif "&c"="[",.a&c amid "&m2",2,l:&m2-1 aif &c>=65536,.a sec ~lda &m1 ~op sbc,&m2 ~sta &m1 bcs ~&SYSCNT ~op.h dec,&m1~&SYSCNT anop ago .c.a aif c:&m3,.b lclc &m3&m3 setc &m1.b sec ~lda &m1 ~op sbc,&m2 ~sta &m3 ~lda.h &m1 ~op.h sbc,&m2 ~sta.h &m3.c ~restm mend macro&l bgt &bp&l beq *+4 bge &bp mend macro&l ble &bp&l blt &bp beq &bp mend macro&l dec4 &a&l ~setm lda &a bne ~&SYSCNT dec 2+&a~&SYSCNT dec &a ~restm mend macro&l inc4 &a&l ~setm inc &a bne ~&SYSCNT inc 2+&a~&SYSCNT ~restm mend macro&l jeq &bp&l bne *+5 brl &bp mend macro&l jne &bp&l beq *+5 brl &bp mend macro&l long &a,&b lclb &i lclb &m&a amid &a,1,1&m setb ("&a"="M").or.("&a"="m")&i setb ("&a"="I").or.("&a"="i") aif c:&b=0,.a&b amid &b,1,1&m setb ("&b"="M").or.("&b"="m").or.&m&i setb ("&b"="I").or.("&b"="i").or.&i.a&l rep #&m*32+&i*16 aif .not.&m,.b longa on.b aif .not.&i,.c longi on.c mend macro&l ph2 &n1&l anop aif "&n1"="*",.f lclc &c&c amid &n1,1,1 aif "&c"="#",.d aif s:longa=1,.a rep #%00100000.a aif "&c"<>"{",.b&c amid &n1,l:&n1,1 aif "&c"<>"}",.g&n1 amid &n1,2,l:&n1-2 lda (&n1) pha ago .e.b aif "&c"="<",.c lda &n1 pha ago .e.c&n1 amid &n1,2,l:&n1-1 pei &n1 ago .e.d&n1 amid &n1,2,l:&n1-1 pea &n1 ago .f.e aif s:longa=1,.f sep #%00100000.f mexit.g mnote "Missing closing '}'",16 mend macro&l ph4 &n1&l anop aif "&n1"="*",.f lclc &c&c amid &n1,1,1 aif "&c"="#",.d aif s:longa=1,.a rep #%00100000.a aif "&c"<>"{",.b&c amid &n1,l:&n1,1 aif "&c"<>"}",.g&n1 amid &n1,2,l:&n1-2 ldy #2 lda (&n1),y pha lda (&n1) pha ago .e.b aif "&c"<>"[",.c ldy #2 lda &n1,y pha lda &n1 pha ago .e.c aif "&c"<>"<",.c1&n1 amid &n1,2,l:&n1-1 pei &n1+2 pei &n1 ago .e.c1 lda &n1+2 pha lda &n1 pha ago .e.d&n1 amid &n1,2,l:&n1-1 pea +(&n1)|-16 pea &n1 ago .f.e aif s:longa=1,.f sep #%00100000.f mexit.g mnote "Missing closing '}'",16 mend macro&l pl4 &n1 lclc &c&l anop aif s:longa=1,.a rep #%00100000.a&c amid &n1,1,1 aif "&c"<>"{",.b&c amid &n1,l:&n1,1 aif "&c"<>"}",.f&n1 amid &n1,2,l:&n1-2 pla sta (&n1) ldy #2 pla sta (&n1),y ago .d.b aif "&c"<>"[",.c pla sta &n1 ldy #2 pla sta &n1,y ago .d.c pla sta &n1 pla sta &n1+2.d aif s:longa=1,.e sep #%00100000.e mexit.f mnote "Missing closing '}'",16 mend macro&l short &a,&b lclb &i lclb &m&a amid &a,1,1&m setb ("&a"="M").or.("&a"="m")&i setb ("&a"="I").or.("&a"="i") aif c:&b=0,.a&b amid &b,1,1&m setb ("&b"="M").or.("&b"="m").or.&m&i setb ("&b"="I").or.("&b"="i").or.&i.a&l sep #&m*32+&i*16 aif .not.&m,.b longa off.b aif .not.&i,.c longi off.c mend macro&l ~lda &op lclc &c&c amid "&op",1,1 aif "&c"<>"{",.b&c amid "&op",l:&op,1 aif "&c"="}",.a mnote "Missing closing '}'",2&op setc &op}.a&op amid "&op",2,l:&op-2&op setc (&op).b&l lda &op mend macro&l ~lda.h &op&l anop lclc &c&c amid "&op",1,1 aif "&c"="[",.b aif "&c"<>"{",.d&c amid "&op",l:&op,1 aif "&c"="}",.a mnote "Missing closing '}'",2&op setc &op}.a&op amid "&op",2,l:&op-2&op setc (&op).b aif &yistwo,.c&yistwo setb 1 ldy #2.c&op setc "&op,y" lda &op mexit.d aif "&c"<>"#",.e&op amid "&op",2,l:&op-1&op setc "#^&op" lda &op mexit.e lda 2+&op mend macro&l ~op &opc,&op lclc &c&c amid "&op",1,1 aif "&c"<>"{",.b&c amid "&op",l:&op,1 aif "&c"="}",.a mnote "Missing closing '}'",2&op setc &op}.a&op amid "&op",2,l:&op-2&op setc (&op).b&l &opc &op mend macro&l ~op.h &opc,&op&l anop lclc &c&c amid "&op",1,1 aif "&c"="[",.b aif "&c"<>"{",.d&c amid "&op",l:&op,1 aif "&c"="}",.a mnote "Missing closing '}'",2&op setc &op}.a&op amid "&op",2,l:&op-2&op setc (&op).b aif &yistwo,.c&yistwo setb 1 ldy #2.c&op setc "&op,y" &opc &op mexit.d aif "&c"<>"#",.e&op amid "&op",2,l:&op-1&op setc "#^&op" &opc &op mexit.e &opc 2+&op mend macro&l ~restm&l anop aif (&~la+&~li)=2,.i sep #32*(.not.&~la)+16*(.not.&~li) aif &~la,.h longa off.h aif &~li,.i longi off.i mend macro&l ~setm&l anop aif c:&~la,.b gblb &~la gblb &~li.b&~la setb s:longa&~li setb s:longi aif s:longa.and.s:longi,.a rep #32*(.not.&~la)+16*(.not.&~li) longa on longi on.a mend macro&l ~sta &op lclc &c&c amid "&op",1,1 aif "&c"<>"{",.b&c amid "&op",l:&op,1 aif "&c"="}",.a mnote "Missing closing '}'",2&op setc &op}.a&op amid "&op",2,l:&op-2&op setc (&op).b&l sta &op mend macro&l ~sta.h &op&l anop lclc &c&c amid "&op",1,1 aif "&c"="[",.b aif "&c"<>"{",.d&c amid "&op",l:&op,1 aif "&c"="}",.a mnote "Missing closing '}'",2&op setc &op}.a&op amid "&op",2,l:&op-2&op setc (&op).b aif &yistwo,.c&yistwo setb 1 ldy #2.c&op setc "&op,y" sta &op mexit.d sta 2+&op mend macro&l _closegs &p&l jsl $E100A8 dc i2'$2014' dc i4'&p' mend macro&l _creategs &p&l jsl $E100A8 dc i2'$2001' dc i4'&p' mend macro&l _destroygs &p&l jsl $E100A8 dc i2'$2002' dc i4'&p' mend macro&l _getfileinfogs &p&l jsl $E100A8 dc i2'$2006' dc i4'&p' mend macro&l _opengs &p&l jsl $E100A8 dc i2'$2010' dc i4'&p' mend macro&l _quitgs &p&l jsl $E100A8 dc i2'$2029' dc i4'&p' mend macro&l _readgs &p&l jsl $E100A8 dc i2'$2012' dc i4'&p' mend macro&l _seteofgs &p&l jsl $E100A8 dc i2'$2018' dc i4'&p' mend macro&l _writegs &p&l jsl $E100A8 dc i2'$2013' dc i4'&p' mend MACRO&lab _DisposeControl&lab ldx #$0A10 jsl $E10000 MEND MACRO&lab _DrawControls&lab ldx #$1010 jsl $E10000 MEND MACRO&lab _HideControl&lab ldx #$0E10 jsl $E10000 MEND MACRO&lab _NewControl2&lab ldx #$3110 jsl $E10000 MEND MACRO&lab _ShowControl&lab ldx #$0F10 jsl $E10000 MEND MACRO&lab _FixAppleMenu&lab ldx #$1E05 jsl $E10000 MEND MACRO&lab _CautionAlert&lab ldx #$1A15 jsl $E10000 MEND MACRO&lab _CloseDialog&lab ldx #$0C15 jsl $E10000 MEND MACRO&lab _GetIText&lab ldx #$1F15 jsl $E10000 MEND MACRO&lab _GetNewModalDialog&lab ldx #$3215 jsl $E10000 MEND MACRO&lab _ModalDialog&lab ldx #$0F15 jsl $E10000 MEND MACRO&lab _NoteAlert&lab ldx #$1915 jsl $E10000 MEND MACRO&lab _SelectIText&lab ldx #$2115 jsl $E10000 MEND MACRO&lab _SetDItemValue&lab ldx #$2F15 jsl $E10000 MEND MACRO&lab _TEGetSelection&lab ldx #$1C22 jsl $E10000 MEND MACRO&lab _TEGetText&lab ldx #$0C22 jsl $E10000 MEND MACRO&lab _TEGetTextInfo&lab ldx #$0D22 jsl $E10000 MEND MACRO&lab _TEPaintText&lab ldx #$1322 jsl $E10000 MEND MACRO&lab _TESetText&lab ldx #$0B22 jsl $E10000 MEND MACRO&lab _Int2Hex&lab ldx #$220B jsl $E10000 MEND MACRO&lab _Multiply&lab ldx #$090B jsl $E10000 MEND MACRO&lab _UDivide&lab ldx #$0B0B jsl $E10000 MEND MACRO&lab _LEGetTextHand&lab ldx #$2214 jsl $E10000 MEND MACRO&lab _LEGetTextLen&lab ldx #$2314 jsl $E10000 MEND MACRO&lab _LESetText&lab ldx #$0B14 jsl $E10000 MEND MACRO&lab _LoadTools&lab ldx #$0E01 jsl $E10000 MEND MACRO&lab _ShutDownTools&lab ldx #$1901 jsl $E10000 MEND MACRO&lab _StartUpTools&lab ldx #$1801 jsl $E10000 MEND MACRO&lab _TLMountVolume&lab ldx #$1101 jsl $E10000 MEND MACRO&lab _DisposeAll&lab ldx #$1102 jsl $E10000 MEND MACRO&lab _DisposeHandle&lab ldx #$1002 jsl $E10000 MEND MACRO&lab _HLock&lab ldx #$2002 jsl $E10000 MEND MACRO&lab _HUnlock&lab ldx #$2202 jsl $E10000 MEND MACRO&lab _NewHandle&lab ldx #$0902 jsl $E10000 MEND MACRO&lab _SetHandleSize&lab ldx #$1902 jsl $E10000 MEND MACRO&lab _DisableMItem&lab ldx #$310F jsl $E10000 MEND MACRO&lab _DrawMenuBar&lab ldx #$2A0F jsl $E10000 MEND MACRO&lab _EnableMItem&lab ldx #$300F jsl $E10000 MEND MACRO&lab _FixMenuBar&lab ldx #$130F jsl $E10000 MEND MACRO&lab _HiliteMenu&lab ldx #$2C0F jsl $E10000 MEND MACRO&lab _NewMenuBar2&lab ldx #$430F jsl $E10000 MEND MACRO&lab _SetMenuBar&lab ldx #$390F jsl $E10000 MEND MACRO&lab _SetMItemName&lab ldx #$3A0F jsl $E10000 MEND MACRO&lab _SetSysBar&lab ldx #$120F jsl $E10000 MEND MACRO&lab _SysFailMgr&lab ldx #$1503 jsl $E10000 MEND MACRO&lab _PrCloseDoc&lab ldx #$0F13 jsl $E10000 MEND MACRO&lab _PrClosePage&lab ldx #$1113 jsl $E10000 MEND MACRO&lab _PrDefault&lab ldx #$0913 jsl $E10000 MEND MACRO&lab _PrJobDialog&lab ldx #$0C13 jsl $E10000 MEND MACRO&lab _PrOpenDoc&lab ldx #$0E13 jsl $E10000 MEND MACRO&lab _PrOpenPage&lab ldx #$1013 jsl $E10000 MEND MACRO&lab _PrPicFile&lab ldx #$1213 jsl $E10000 MEND MACRO&lab _PrStlDialog&lab ldx #$0B13 jsl $E10000 MEND MACRO&lab _DrawString&lab ldx #$A504 jsl $E10000 MEND MACRO&lab _EraseRect&lab ldx #$5504 jsl $E10000 MEND MACRO&lab _InitCursor&lab ldx #$CA04 jsl $E10000 MEND MACRO&lab _InvertRect&lab ldx #$5604 jsl $E10000 MEND MACRO&lab _MoveTo&lab ldx #$3A04 jsl $E10000 MEND MACRO&lab _PenNormal&lab ldx #$3604 jsl $E10000 MEND MACRO&lab _SetPort&lab ldx #$1B04 jsl $E10000 MEND MACRO&lab _ShowPen&lab ldx #$2804 jsl $E10000 MEND MACRO&lab _SFGetFile2&lab ldx #$0E17 jsl $E10000 MEND MACRO&lab _SFPutFile2&lab ldx #$0F17 jsl $E10000 MEND MACRO&lab _BeginUpdate&lab ldx #$1E0E jsl $E10000 MEND MACRO&lab _CloseWindow&lab ldx #$0B0E jsl $E10000 MEND MACRO&lab _EndUpdate&lab ldx #$1F0E jsl $E10000 MEND MACRO&lab _FrontWindow&lab ldx #$150E jsl $E10000 MEND MACRO&lab _GetSysWFlag&lab ldx #$4C0E jsl $E10000 MEND MACRO&lab _GetWRefCon&lab ldx #$290E jsl $E10000 MEND MACRO&lab _NewWindow2&lab ldx #$610E jsl $E10000 MEND MACRO&lab _SelectWindow&lab ldx #$110E jsl $E10000 MEND MACRO&lab _SetWTitle&lab ldx #$0D0E jsl $E10000 MEND MACRO&lab _TaskMaster&lab ldx #$1D0E jsl $E10000 MEND MACRO&lab _SpeechStartUp&lab ldx #$0235 jsl $E10000 MEND MACRO&lab _SpeechShutDown&lab ldx #$0335 jsl $E10000 MEND MACRO&lab _ParseStartUp&lab ldx #$0234 jsl $E10000 MEND MACRO&lab _ParseShutDown&lab ldx #$0334 jsl $E10000 MEND MACRO&lab _DictActivate&lab ldx #$1034 jsl $E10000 MEND MACRO&lab _DictDelete&lab ldx #$0B34 jsl $E10000 MEND MACRO&lab _DictDump&lab ldx #$0C34 jsl $E10000 MEND MACRO&lab _DictInit&lab ldx #$0E34 jsl $E10000 MEND MACRO&lab _DictInsert&lab ldx #$0A34 jsl $E10000 MEND MACRO&lab _Parse&lab ldx #$0934 jsl $E10000 MEND MACRO&lab _Say&lab ldx #$0F34 jsl $E10000 MEND MACRO&lab _SetSayGlobals&lab ldx #$0D34 jsl $E10000 MEND MACRO&lab _MaleStartUp&lab ldx #$0232 jsl $E10000 MEND MACRO&lab _MaleShutDown&lab ldx #$0332 jsl $E10000 MEND MACRO&lab _MaleSpeak&lab ldx #$0932 jsl $E10000 MEND MACRO&lab _FemaleStartUp&lab ldx #$0233 jsl $E10000 MEND MACRO&lab _FemaleShutDown&lab ldx #$0333 jsl $E10000 MEND MACRO&lab _FemaleSpeak&lab ldx #$0933 jsl $E10000 MEND