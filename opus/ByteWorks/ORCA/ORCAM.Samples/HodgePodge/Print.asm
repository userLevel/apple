*******************************************************************************							     **	  HodgePodge:  An example Apple IIGS Desktop application 	     **							     **	  Written in 65816 Assembler by the Apple IIGS Tools Team	     **  Modified by Ben Koning for "Programmer's Introduction to the Apple IIGS"  **							     **	      Copyright (c) 1986-87 by Apple Computer, Inc.		     **							     **   ----------------------------------------------------------------------   **							     **   Modified to use the ORCA/M macros and format by Byte Works, Inc.	     **	      Copyright (c) 1989 by Byte Works, Inc.			     **							     **    ASM65816 Code file "PRINT.ASM" -- Print dialogs; Print Manager calls    **							     ************************************************************************************************************************************************* DoChooserItem** This is the routine that handles the Choose Printer* menu item.******************************************************************DoChooserItem  start	 using GlobalData	 ph2   #0	 _PrChoosePrinter	 pla	 rts	 end****************************************************************** DoSetupItem** This is the routine that handles the page setup item.******************************************************************DoSetupItem    start	 using GlobalData	 lda   PrintRecord	 ora   PrintRecord+2	 bne   AlreadyThere	 jsr   SetupDefaultAlreadyThere   anop	 pha	 ph4   PrintRecord	 _PrValidate	 pla	 ph2   #0	 ph4   PrintRecord	 _prStlDialog	 pla	 rts	 end****************************************************************** SetupDefault** This routine creates the default PrintRecord.	 Puts handle* in PrintRecord.******************************************************************SetupDefault   start	 using GlobalDATA	 ph4   #0	 ph4   #140	 ph2   MyID	 ph2   #$8010	 ph4   #0	 _newHandle	 pla	 sta   PrintRecord	 pla	 sta   PrintRecord+2AlreadyThere   anop	 ph4   PrintRecord	 _prdefault	 rts	 end****************************************************************** DoPrintItem** This is the routine that handles the print item in the* file menu.******************************************************************DoPrintItem    start	 using GlobalData	 pha				get the current port	 pha	 _GetPort	 pha				first see if there is a window	 pha				  to print	 _FrontWindow			  and save pointer to it now	 pla				  before any dialogs are displayed!	 sta   WindowToPrint	 pla	 sta   WindowToPrint+2	 ora   WindowToPrint	 bne   SomethingToPrint	 brl   SkipIt SomethingToPrint anop	 lda   PrintRecord	 ora   PrintRecord+2	 bne   AlreadySet	 jsr   SetupDefaultAlreadySet anop	 ph4   PrintRecord	 _PrValidate	 ph2   #0	 ph4   PrintRecord	 _PrJobDialog	 pla	 bne   continue	 brl   skipitcontinue anop	 _WaitCursor	 ph4   #0	 ph4   PrintRecord	 ph4   #0	 _PrOpendoc	 pla	 sta   PrintPort	 pla	 sta   PrintPort+2	 ph4   PrintPort	 ph4   #0	 _PrOpenPage	 jsr   DrawTopWindow	 ph4   PrintPort	  _PrClosePage	 ph4   PrintPort	  _PrCloseDoc	 ph4   PrintRecord	 ph4   #0	 ph4   #0	 _PrPicFile	 _InitCursorSkipIt	 anop	 _SetPort			restore original port	 rts	 end****************************************************************** DrawTopWindow******************************************************************DrawTopWindow  start	 using GlobalDATA	 pha				space for result of GetWRefCon call	 pha	 ph4   WindowToPrint	 _GetWRefCon	 pla	 sta   TheRefCon	 plx	 stx   TheRefCon+2	 jsr   Deref	 sta   0	 stx   2	 ldy   #oFlag	 lda   [0],y	 beq   UsePaint	 ldy   #oFontID+2	 lda   [0],y	 tax	 dey	 dey	 lda   [0],y	 jsl   ShowFont	 bra   AllDoneUsePaint anop	 ldy   #oHandle+2		get handle to pic data	 lda   [0],y	 tax	 dey	 dey	 lda   [0],y	 jsl   PaintItAllDone	 lda   TheRefCon	 ldx   TheRefCon+2	 jsr   Unlock	 rtstheRefCon      ds     4WindowToPrint  entry	       ds 4	       end	       append  IO.Asm