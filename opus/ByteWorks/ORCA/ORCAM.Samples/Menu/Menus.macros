 MACRO&LAB DW &ADR&LAB DC I1"L:SYSA&SYSCNT"SYSA&SYSCNT DC C"&ADR" MEND MACRO&LAB LONG &A,&B LCLB &I LCLB &M&A AMID &A,1,1&M SETB ("&A"="M").OR.("&A"="m")&I SETB ("&A"="I").OR.("&A"="i") AIF C:&B=0,.A&B AMID &B,1,1&M SETB ("&B"="M").OR.("&B"="m").OR.&M&I SETB ("&B"="I").OR.("&B"="i").OR.&I.A&LAB REP #&M*32+&I*16 AIF .NOT.&M,.B LONGA ON.B AIF .NOT.&I,.C LONGI ON.C MEND MACRO&LAB PH2 &N1 LCLC &C&LAB ANOP&C AMID &N1,1,1 AIF "&C"="#",.D AIF S:LONGA=1,.A REP #%00100000.A AIF "&C"<>"{",.B&C AMID &N1,L:&N1,1 AIF "&C"<>"}",.G&N1 AMID &N1,2,L:&N1-2 LDA (&N1) PHA AGO .E.B LDA &N1 PHA AGO .E.D&N1 AMID &N1,2,L:&N1-1 PEA &N1 AGO .F.E AIF S:LONGA=1,.F SEP #%00100000.F MEXIT.G MNOTE "Missing closing '}'",16 MEND MACRO&LAB PH4 &N1 LCLC &C&LAB ANOP&C AMID &N1,1,1 AIF "&C"="#",.D AIF S:LONGA=1,.A REP #%00100000.A AIF "&C"<>"{",.B&C AMID &N1,L:&N1,1 AIF "&C"<>"}",.G&N1 AMID &N1,2,L:&N1-2 LDY #2 LDA (&N1),Y PHA LDA (&N1) PHA AGO .E.B AIF "&C"<>"[",.C LDY #2 LDA &N1,Y PHA LDA &N1 PHA AGO .E.C LDA &N1+2 PHA LDA &N1 PHA AGO .E.D&N1 AMID &N1,2,L:&N1-1 PEA +(&N1)|-16 PEA &N1 AGO .F.E AIF S:LONGA=1,.F SEP #%00100000.F MEXIT.G MNOTE "Missing closing '}'",16 MEND MACRO&LAB PL4 &N1 LCLC &C&LAB ANOP AIF S:LONGA=1,.A REP #%00100000.A&C AMID &N1,1,1 AIF "&C"<>"{",.B&C AMID &N1,L:&N1,1 AIF "&C"<>"}",.F&N1 AMID &N1,2,L:&N1-2 PLA STA (&N1) LDY #2 PLA STA (&N1),Y AGO .D.B AIF "&C"<>"[",.C PLA STA &N1 LDY #2 PLA STA &N1,Y AGO .D.C PLA STA &N1 PLA STA &N1+2.D AIF S:LONGA=1,.E SEP #%00100000.E MEXIT.F MNOTE "Missing closing '}'",16 MEND MACRO&LAB SHORT &A,&B LCLB &I LCLB &M&A AMID &A,1,1&M SETB ("&A"="M").OR.("&A"="m")&I SETB ("&A"="I").OR.("&A"="i") AIF C:&B=0,.A&B AMID &B,1,1&M SETB ("&B"="M").OR.("&B"="m").OR.&M&I SETB ("&B"="I").OR.("&B"="i").OR.&I.A&LAB SEP #&M*32+&I*16 AIF .NOT.&M,.B LONGA OFF.B AIF .NOT.&I,.C LONGI OFF.C MEND MACRO&LAB QUIT &DCB&LAB JSL $E100A8 DC I2'$29' DC I4'&DCB' MEND MACRO&LAB _CTLSTARTUP&LAB LDX #$0210 JSL $E10000 MEND MACRO&LAB _CTLSHUTDOWN&LAB LDX #$0310 JSL $E10000 MEND MACRO&LAB _DESKSTARTUP&LAB LDX #$0205 JSL $E10000 MEND MACRO&LAB _DESKSHUTDOWN&LAB LDX #$0305 JSL $E10000 MEND MACRO&LAB _DIALOGSTARTUP&LAB LDX #$0215 JSL $E10000 MEND MACRO&LAB _DIALOGSHUTDOWN&LAB LDX #$0315 JSL $E10000 MEND MACRO&LAB _NOTEALERT&LAB LDX #$1915 JSL $E10000 MEND MACRO&LAB _EMSTARTUP&LAB LDX #$0206 JSL $E10000 MEND MACRO&LAB _EMSHUTDOWN&LAB LDX #$0306 JSL $E10000 MEND MACRO&LAB _IMSTARTUP&LAB LDX #$020B JSL $E10000 MEND MACRO&LAB _INT2HEX&LAB LDX #$220B JSL $E10000 MEND MACRO&LAB _LESTARTUP&LAB LDX #$0214 JSL $E10000 MEND MACRO&LAB _LESHUTDOWN&LAB LDX #$0314 JSL $E10000 MEND MACRO&LAB _LISTSTARTUP&LAB LDX #$021C JSL $E10000 MEND MACRO&LAB _LISTSHUTDOWN&LAB LDX #$031C JSL $E10000 MEND MACRO&LAB _MMSTARTUP&LAB LDX #$0202 JSL $E10000 MEND MACRO&LAB _MMSHUTDOWN&LAB LDX #$0302 JSL $E10000 MEND MACRO&LAB _DISPOSEHANDLE&LAB LDX #$1002 JSL $E10000 MEND MACRO&LAB _NEWHANDLE&LAB LDX #$0902 JSL $E10000 MEND MACRO&LAB _MENUSTARTUP&LAB LDX #$020F JSL $E10000 MEND MACRO&LAB _MENUSHUTDOWN&LAB LDX #$030F JSL $E10000 MEND MACRO&LAB _CALCMENUSIZE&LAB LDX #$1C0F JSL $E10000 MEND MACRO&LAB _DELETEMENU&LAB LDX #$0E0F JSL $E10000 MEND MACRO&LAB _DELETEMITEM&LAB LDX #$100F JSL $E10000 MEND MACRO&LAB _DISABLEMITEM&LAB LDX #$310F JSL $E10000 MEND MACRO&LAB _DRAWMENUBAR&LAB LDX #$2A0F JSL $E10000 MEND MACRO&LAB _ENABLEMITEM&LAB LDX #$300F JSL $E10000 MEND MACRO&LAB _FIXMENUBAR&LAB LDX #$130F JSL $E10000 MEND MACRO&LAB _GETMITEMMARK&LAB LDX #$340F JSL $E10000 MEND MACRO&LAB _HILITEMENU&LAB LDX #$2C0F JSL $E10000 MEND MACRO&LAB _INSERTMENU&LAB LDX #$0D0F JSL $E10000 MEND MACRO&LAB _INSERTMITEM&LAB LDX #$0F0F JSL $E10000 MEND MACRO&LAB _NEWMENU&LAB LDX #$2D0F JSL $E10000 MEND MACRO&LAB _SETBARCOLORS&LAB LDX #$170F JSL $E10000 MEND MACRO&LAB _SETMITEMBLINK&LAB LDX #$280F JSL $E10000 MEND MACRO&LAB _SETMITEMMARK&LAB LDX #$330F JSL $E10000 MEND MACRO&LAB _SETMITEMNAME&LAB LDX #$3A0F JSL $E10000 MEND MACRO&LAB _MTSTARTUP&LAB LDX #$0203 JSL $E10000 MEND MACRO&LAB _MTSHUTDOWN&LAB LDX #$0303 JSL $E10000 MEND MACRO&LAB _QDSTARTUP&LAB LDX #$0204 JSL $E10000 MEND MACRO&LAB _QDSHUTDOWN&LAB LDX #$0304 JSL $E10000 MEND MACRO&LAB _FILLRECT&LAB LDX #$5704 JSL $E10000 MEND MACRO&LAB _GRAFOFF&LAB LDX #$0B04 JSL $E10000 MEND MACRO&LAB _INVERTRECT&LAB LDX #$5604 JSL $E10000 MEND MACRO&LAB _PTINRECT&LAB LDX #$4F04 JSL $E10000 MEND MACRO&LAB _SHOWCURSOR&LAB LDX #$9104 JSL $E10000 MEND MACRO&LAB _QDAUXSTARTUP&LAB LDX #$0212 JSL $E10000 MEND MACRO&LAB _QDAUXSHUTDOWN&LAB LDX #$0312 JSL $E10000 MEND MACRO&LAB _SCRAPSTARTUP&LAB LDX #$0216 JSL $E10000 MEND MACRO&LAB _SCRAPSHUTDOWN&LAB LDX #$0316 JSL $E10000 MEND MACRO&LAB _READCHAR&LAB LDX #$220C JSL $E10000 MEND MACRO&LAB _WRITECSTRING&LAB LDX #$200C JSL $E10000 MEND MACRO&LAB _TLSTARTUP&LAB LDX #$0201 JSL $E10000 MEND MACRO&LAB _TLSHUTDOWN&LAB LDX #$0301 JSL $E10000 MEND MACRO&LAB _LOADTOOLS&LAB LDX #$0E01 JSL $E10000 MEND MACRO&LAB _WINDSTARTUP&LAB LDX #$020E JSL $E10000 MEND MACRO&LAB _WINDSHUTDOWN&LAB LDX #$030E JSL $E10000 MEND MACRO&LAB _REFRESHDESKTOP&LAB LDX #$390E JSL $E10000 MEND MACRO&LAB _TASKMASTER&LAB LDX #$1D0E JSL $E10000 MEND