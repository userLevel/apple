/***************************************************************** Play an AE sound file****************************************************************/#pragma lint -1#include <stdio.h>#include <math.h>#include <orca.h>#include <Sound.h>#include <Resources.h>#include <Memory.h>#include <Locator.h>#include <MiscTool.h>#define twoPi 6.28318531                /* 2*pi *//***************************************************************** SizeToBuffer** Parameters:*    size - sound size, in bytes** Returns: DOC buffer size value****************************************************************/unsigned SizeToBuffer (unsigned size){if (size <= 256)   return 0;if (size <= 512)   return 1;if (size <= 1024)   return 2;if (size <= 2048)   return 3;if (size <= 4096)   return 4;if (size <= 8192)   return 5;if (size <= 16384)   return 6;return 7;}/***************************************************************** Main program****************************************************************/int main (void){FILE *f;                                /* sound file */Ref startStopParm;                      /* tool start/shutdown parameter */SoundParamBlock soundBlock;             /* sound parameter block */unsigned frequency;                     /* frequency of the file */unsigned long length;                   /* length of the sound */static unsigned char sound[32769];      /* sound block */startStopParm =                         /* start up the tools */   StartUpTools(userid(), 2, 1);if (toolerror() != 0)   SysFailMgr(toolerror(), "\pCould not start tools: ");printf("Reading the sound file...\n");  /* read the sound file */f = fopen("Hello.Sound", "r");fread(&length, sizeof(length), 1, f);fread(&length, sizeof(length), 1, f);fread(&length, sizeof(length), 1, f);if (length > 32768)   length = 32768;fread(&frequency, sizeof(frequency), 1, f);fread(sound, length, 1, f);sound[length] = (unsigned char) 0;fclose(f);soundBlock.waveStart = sound;           /* set up the sound parameter block */soundBlock.waveSize = (length + 255) / 256;soundBlock.freqOffset = 32.0 * frequency / 1645.0;soundBlock.docBuffer = 0;soundBlock.bufferSize = SizeToBuffer(soundBlock.waveSize);soundBlock.nextWavePtr = NULL;soundBlock.volSetting = 250;printf("Playing the sound...\n");       /* start the sound */FFStartSound(0x0201, (Pointer) &soundBlock);while (!FFSoundDoneStatus(2)) ;         /* wait for the sound to finish */ShutDownTools(1, startStopParm);        /* shut down the tools */}