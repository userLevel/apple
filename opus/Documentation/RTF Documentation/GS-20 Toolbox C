{\rtf1\mac\ansicpg10000\uc1 \deff0\deflang1033\deflangfe1033{\upr{\fonttbl{\f0\fnil\fcharset256\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\f1\fnil\fcharset256\fprq2{\*\panose 020b0604020202020204}Arial;}{\f2\fmodern\fcharset77\fprq1{\*\panose 02070309020205020404}Courier New;}{\f3\fnil\fcharset2\fprq2{\*\panose 02000500000000000000}Symbol;}{\f4\fnil\fcharset256\fprq2{\*\panose 02000500000000000000}Times;}{\f5\fnil\fcharset256\fprq2{\*\panose 02000500000000000000}Helvetica;}{\f6\fnil\fcharset256\fprq2{\*\panose 02000500000000000000}Courier;}{\f7\fswiss\fcharset77\fprq2{\*\panose 020b0503030404040204}Geneva;}{\f8\froman\fcharset77\fprq2{\*\panose 00000000000000000000}Tms Rmn;}{\f9\fswiss\fcharset77\fprq2{\*\panose 00000000000000000000}Helv;}{\f10\froman\fcharset77\fprq2{\*\panose 00000000000000000000}MS Serif;}{\f11\fswiss\fcharset77\fprq2{\*\panose 00000000000000000000}MS Sans Serif;}{\f12\fnil\fcharset256\fprq2{\*\panose 02020502060305060204}New York;}{\f13\fswiss\fcharset77\fprq2{\*\panose 00000000000000000000}System;}{\f14\fnil\fcharset2\fprq2{\*\panose 05020102010804080708}Wingdings;}{\f15\froman\fcharset256\fprq1{\*\panose 00000000000000000000}FE Roman font face;}{\f16\fmodern\fcharset256\fprq1{\*\panose 00000000000000000000}FE Modern font face;}{\f17\froman\fcharset256\fprq1{\*\panose 00000000000000000000}FE Truetype Roman font face;}{\f18\fmodern\fcharset256\fprq1{\*\panose 00000000000000000000}FE Truetype Modern font face;}{\f19\froman\fcharset77\fprq2{\*\panose 00000000000000000000}Century;}{\f20\fnil\fcharset256\fprq2{\*\panose 020b0806080604040204}Chicago;}}{\*\ud{\fonttbl{\f0\fnil\fcharset256\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\f1\fnil\fcharset256\fprq2{\*\panose 020b0604020202020204}Arial;}{\f2\fmodern\fcharset77\fprq1{\*\panose 02070309020205020404}Courier New;}{\f3\fnil\fcharset2\fprq2{\*\panose 02000500000000000000}Symbol;}{\f4\fnil\fcharset256\fprq2{\*\panose 02000500000000000000}Times;}{\f5\fnil\fcharset256\fprq2{\*\panose 02000500000000000000}Helvetica;}{\f6\fnil\fcharset256\fprq2{\*\panose 02000500000000000000}Courier;}{\f7\fswiss\fcharset77\fprq2{\*\panose 020b0503030404040204}Geneva;}{\f8\froman\fcharset77\fprq2{\*\panose 00000000000000000000}Tms Rmn;}{\f9\fswiss\fcharset77\fprq2{\*\panose 00000000000000000000}Helv;}{\f10\froman\fcharset77\fprq2{\*\panose 00000000000000000000}MS Serif;}{\f11\fswiss\fcharset77\fprq2{\*\panose 00000000000000000000}MS Sans Serif;}{\f12\fnil\fcharset256\fprq2{\*\panose 02020502060305060204}New York;}{\f13\fswiss\fcharset77\fprq2{\*\panose 00000000000000000000}System;}{\f14\fnil\fcharset2\fprq2{\*\panose 05020102010804080708}Wingdings;}{\f15\froman\fcharset256\fprq1{\*\panose 00000000000000000000}FE Roman font face;}{\f16\fmodern\fcharset256\fprq1{\*\panose 00000000000000000000}FE Modern font face;}{\f17\froman\fcharset256\fprq1{\*\panose 00000000000000000000}FE Truetype Roman font face;}{\f18\fmodern\fcharset256\fprq1{\*\panose 00000000000000000000}FE Truetype Modern font face;}{\f19\froman\fcharset77\fprq2{\*\panose 00000000000000000000}Century;}{\f20\fnil\fcharset256\fprq2{\*\panose 020b0806080604040204}Chicago;}}}}{\colortbl;\red0\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0;\red255\green0\blue255;\red255\green0\blue0;\red255\green255\blue0;\red255\green255\blue255;\red0\green0\blue128;\red0\green128\blue128;\red0\green128\blue0;\red128\green0\blue128;\red128\green0\blue0;\red128\green128\blue0;\red128\green128\blue128;\red192\green192\blue192;}{\stylesheet{\widctlpar\adjustright \f12\cgrid \snext0 Normal;}{\*\cs10 \additive Default Paragraph Font;}{\s15\li1440\ri720\widctlpar\tldot\tx8280\tqr\tx8640\adjustright \f12\cgrid \sbasedon0 \snext0 toc 3;}{\s16\li720\ri720\widctlpar\tldot\tx8280\tqr\tx8640\adjustright \f12\cgrid \sbasedon0 \snext0 toc 2;}{\s17\ri720\widctlpar\tldot\tx8280\tqr\tx8640\adjustright \f12\cgrid \sbasedon0 \snext0 toc 1;}{\s18\li360\widctlpar\adjustright \f12\cgrid \sbasedon0 \snext0 index 2;}{\s19\widctlpar\adjustright \f12\cgrid \sbasedon0 \snext0 index 1;}{\s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid \sbasedon0 \snext20 footer;}{\s21\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid \sbasedon0 \snext21 header;}{\*\cs22 \additive \fs16\up6 \sbasedon10 footnote reference;}{\s23\widctlpar\adjustright \f12\fs20\cgrid \sbasedon0 \snext23 footnote text;}{\s24\widctlpar\adjustright \f6\fs20\cgrid \sbasedon0 \snext24 Code;}}{\*\revtbl {Unknown;}}{\info{\title Toolbox Programming}{\author Mike Westerfield}{\operator Mike Westerfield}{\creatim\yr2000\mo10\dy10\hr15\min21}{\revtim\yr2000\mo10\dy10\hr15\min21}{\version2}{\edmins0}{\nofpages22}{\nofwords166964}{\nofchars951697}{\*\company Byte Works, Inc.}{\nofcharsws1168750}{\vern99}}\margl1440\margr1440 \facingp\widowctrl\ftnbj\aenddoc\hyphhotz0\sprstsp\otblrul\brkfrm\sprstsm\truncex\nolead\msmcap\lytprtmet\hyphcaps0\viewkind1\viewscale100 \fet0\sectd \sbkodd\pgnrestart\pgnlcrm\linex0\endnhere\titlepg\sectdefaultcl {\headerl \pard\plain \s21\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Programming the Toolbox in C\par }}{\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Programming the Toolbox in C}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \par }}{\*\pnseclvl1\pnucrm\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl2\pnucltr\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl3\pndec\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl4\pnlcltr\pnstart1\pnindent720\pnhang{\pntxta )}}{\*\pnseclvl5\pndec\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl6\pnlcltr\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl7\pnlcrm\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl8\pnlcltr\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl9\pnlcrm\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}\pard\plain \qc\widctlpar\adjustright \f12\cgrid {\b\f4\fs72 \par \par \par Toolbox Programming\par in\par C\par \par \par \par }\pard \widctlpar\adjustright {\b\f4\fs36 \par \par \par \par }\pard \qc\widctlpar\adjustright {\b\f4\fs28 by Mike Westerfield\par \par Copyright 1992\par Byte Works, Inc.\par \par }{\f4\fs20 September 1992\tab 1.0.0\par }\pard \widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\pgnlcrm\linex0\endnhere\titlepg\sectdefaultcl {\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qc\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Table of Contents\par }\pard \widctlpar\adjustright {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Lesson 0 \endash  Before We Start\tab 1\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 About This Course\tab 1\par What You Should Already Know\tab 2\par What You Must Have\tab 2\par Other Useful Things\tab 3\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 1 \endash  Current Events\tab 5\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 5\par Starting the Tools\tab 5\par The Event Loop\tab 6\par The Event Record\tab 7\par Our First Executable Program\tab 10\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Tool Header Files\tab 12\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Keyboard Events\tab 13\par Mouse Events\tab 15\par Using Appendix A\tab 17\par Using the Toolbox Reference Manuals\tab 18\par Summary\tab 19\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 2 \endash  What\rquote s on the Menu?\tab 21\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 21\par Setting Up A Menu Bar\tab 21\par Menu Events\tab 25\par Sample Program \endash  Quit\tab 26\par Keyboard Equivalents\tab 29\par Standard Keyboard Equivalents\tab 32\par TaskMaster\tab 33\par The Apple Menu\tab 36\par Supporting NDAs\tab 37\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Call FixAppleMenu\tab 38\par Use TaskMaster\tab 38\par The Standard Menu Items\tab 38\par The Minimal Tools\tab 39\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Customizing Your Menu Items\tab 39\par Changing Menu Items on the Fly\tab 41\par Changing the Text for a Menu Item\tab 43\par Other Things You Should Know About Menus\tab 45\par Summary\tab 46\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 3 \endash  Be Resourceful\tab 47\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 47\par What Are Resources?\tab 47\par Using Rez to Create a Menu Bar\tab 48\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 A Menu Bar Using Rez\tab 49\par How Rez Files are Typed\tab 51\par Using Constants\tab 54\par Compiling the Rez File\tab 57\par Sharing Defines\tab 57\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Using the Menu Bar Rez Created\tab 58\par Making Changes\tab 61\par Using a Script to Compile\tab 61\par Understanding Resource Description Files\tab 64\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Toolbox Resource Descriptions\tab 64\par Rez Types\tab 65\par Finding Out More About Rez\tab 66\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Resource Tools\tab 67\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Changing Resources\tab 67\par Programmer\rquote s CAD Tools\tab 67\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Summary\tab 68\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Lesson 4 \endash  Keep Alert!\tab 71\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 71\par Alerts Present Messages\tab 71\par Using an Alert for an About Box\tab 72\par The Frame Program\tab 73\par Alert Strings\tab 79\par Substitution Strings\tab 82\par Summary\tab 85\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 5 \endash  Why, Yes.  We Do Windows!\tab 87\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 87\par Defining Our Terms\tab 87\par Opening a Window\tab 88\par Closing a Window\tab 90\par Multiple Windows\tab 91\par Window Names\tab 95\par Drawing in a Window\tab 97\par Updating a Window\tab 98\par The Window Port and Coordinate Systems\tab 100\par Tricks With Update Events\tab 102\par Scrolling\tab 103\par Customizing Your Windows\tab 105\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Windows with Colors and Patterns\tab 110\par Creating Custom Windows With Resources\tab 111\par Using NewWindow and Window Records\tab 113\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Summary\tab 116\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 6 \endash  File I/O\tab 119\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 119\par SFO\tab 119\par The Open Dialog\tab 119\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 File Type Lists\tab 121\par The Reply Record\tab 122\par Using the nameRef and pathRef Handles\tab 122\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The Role of Save and Save As...\tab 125\par The Save As... Dialog\tab 125\par A Comment About Ellipsis\tab 128\par Other Standard File Calls\tab 129\par Reading a File\tab 130\par Writing a File\tab 134\par Screen Dumps\tab 137\par Summary\tab 140\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\keepn\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 7 \endash  Move Over Guttenberg\tab 141\par }\pard\plain \s16\li720\keepn\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 141\par }\pard \s16\li720\widctlpar\tqr\tx9360\adjustright {\f4 How the Print Manager Works\tab 141\par Starting the Tools (Again)\tab 142\par Getting a Print Record\tab 144\par The Page Setup Dialog\tab 145\par The Print Dialog\tab 145\par Dimming the Menus\tab 146\par The Print Loop\tab 147\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Opening the Printer\rquote s GrafPort\tab 147\par Page Sizes and Multiple Pages\tab 148\par The Main Print Loop\tab 149\par Finishing the Print Process\tab 151\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 A Few Tips and Tricks\tab 151\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Printing a Subrange\tab 151\par Aborting with Open-Apple Period\tab 152\par The 10K Check\tab 152\par Page Gaps and Ribbon Printing\tab 152\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Summary\tab 153\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 8 \endash  Thanks for the Memory\tab 155\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 155\par Memory on the Apple IIGS\tab 155\par Handles\tab 156\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Why Handles?\tab 156\par Locking Memory\tab 158\par Purgeable Memory\tab 159\par How Memory is Allocated\tab 159\par Writing Efficient Programs\tab 160\par So What\rquote s a Handle?\tab 160\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Allocating Memory\tab 160\par Purgeable Memory\tab 162\par Finding Free Memory\tab 163\par Summary\tab 163\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 9 \endash  Drawing on the Front Side of the Screen\tab 165\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 165\par Super High Resolution Graphics\tab 165\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The Super High Resolution Graphics Screen\tab 165\par Colors in 320 Mode\tab 166\par The Scan Line Control Byte\tab 167\par Colors in 640 Mode\tab 169\par Screen Dump Files\tab 171\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Setting the Pen Size\tab 171\par Pen Patterns\tab 172\par Pen Modes\tab 172\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Rubber-Banding\tab 173\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Pen Masks\tab 175\par Drawing Shapes\tab 176\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Rectangle\tab 176\par Oval\tab 177\par Arc\tab 178\par Round Rectangle\tab 179\par Polygon\tab 179\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Regions\tab 181\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Using the Update Region\tab 182\par Using the Clip Region\tab 184\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 GrafPorts\tab 185\par Summary\tab 185\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 10 \endash  Fonts\tab 187\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 187\par Defining Some Terms\tab 187\par Drawing Text\tab 189\par Colorful Text\tab 190\par Formatting Text\tab 192\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Using printf and sprintf\tab 192\par Using the Size of Text\tab 192\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The Standard Character Set\tab 193\par Font Families\tab 193\par Font Sizes\tab 194\par Font Styles\tab 195\par Installing a Font\tab 195\par Choosing Fonts with ChooseFont\tab 197\par Choosing Fonts with Full Menus\tab 197\par Summary\tab 199\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Lesson 11 \endash  TextEdit\tab 201\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 201\par An Overview\tab 201\par Using TextEdit\tab 201\par Editing with TextEdit\tab 209\par Changing the Ruler\tab 210\par Changing Fonts\tab 212\par Loading and Saving\tab 214\par Printing\tab 216\par Did the Document Change?\tab 216\par Summary\tab 218\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Lesson 12 \endash  Scraps\tab 219\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 219\par The Scrap Manager\tab 219\par Scraps\tab 219\par Scrap Types\tab 220\par Multiple Scraps\tab 221\par The Scrap File\tab 221\par A Scrapbook Program\tab 221\par Summary\tab 224\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 13 \endash  Controls, Part 1\tab 225\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 225\par A Quick History Lesson\tab 225\par Control Records and Control Lists\tab 225\par Simple Buttons\tab 229\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Defining the Control\tab 229\par Using the Control\tab 231\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Colored Controls\tab 232\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Button Outline\tab 233\par Unhighlighted Button Interior\tab 233\par Highlighted Button Interior\tab 233\par Unhighlighted Button Text\tab 234\par Highlighted Button Text\tab 234\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Static Text\tab 234\par Radio Buttons\tab 236\par Check Boxes\tab 238\par Scroll Bars\tab 240\par The Grow Box\tab 245\par Summary\tab 246\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 14 \endash  Controls, Part 2\tab 247\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 247\par Rectangles\tab 247\par Thermometers\tab 248\par Icon Buttons\tab 250\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 A Typical Icon Button\tab 252\par Controlling the Outline\tab 253\par The Title\tab 253\par Icons and Icon Masks\tab 253\par Display Mode Bits\tab 254\par Inactive Icon Buttons\tab 255\par Creating Icons in the Real World\tab 255\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Pictures\tab 256\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Creating Pictures\tab 258\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 LineEdit Items\tab 258\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Accessing Text\tab 259\par Cut, Copy, Paste and Clear\tab 260\par Passwords\tab 262\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 List Controls\tab 263\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Creating the List Control\tab 264\par Building a List\tab 265\par Sorting Lists\tab 266\par Custom Draw Procedures\tab 267\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Pop-up Menus\tab 268\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The Size of the Control and Text Justification\tab 271\par Display Options\tab 272\par Detecting the Control State\tab 272\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Summary\tab 273\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Lesson 15 \endash  Meaningful Dialogs\tab 275\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 275\par Death of a Tool\tab 275\par Dialogs are Simple Windows with Controls\tab 275\par Creating a Dialog\tab 276\par Handling Events in a Modal Dialog\tab 276\par Modeless Dialogs\tab 280\par Summary\tab 281\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 16 \endash  Sound Off!\tab 283\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 283\par The Physics of Sound\tab 283\par Digitally Recorded Sound\tab 286\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The Sound Tool Set\tab 286\par The Basic Sound Calls\tab 286\par Creating and Playing a Sound\tab 288\par Loading Sounds from Disk\tab 290\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Note Synthesizer\tab 291\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Instruments\tab 291\par The Instrument Record\tab 291\par ASIF Instrument Files\tab 293\par The \ldblquote WAVE\rdblquote  Chunk\tab 296\par The \ldblquote INST\rdblquote  Chunk\tab 298\par Some Practical Comments About Instrument Files\tab 298\par Changing the Sound Quality for an Instrument\tab 299\par Canned Parameters\tab 300\par Using the Note Synthesizer\tab 300\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Getting the Most from Instruments\tab 302\par The Sound Tools\tab 302\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The Audio Compression and Expansion Tool Set\tab 302\par The Note Sequencer\tab 303\par The MIDI Tool Set\tab 303\par synthLAB\tab 303\par The Media Control Tool Set\tab 304\par Talking Tools\tab 304\par Sound Input\tab 304\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Summary\tab 305\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Lesson 17 \endash  Professional Polish\tab 307\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 307\par Finder Resources\tab 307\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The rComment(1) Resource\tab 307\par The rComment(2) Resource\tab 308\par The rVersion Resource\tab 309\par The rBundle Resource\tab 311\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 The Desktop File\tab 315\par GS/OS Aware Bits\tab 318\par Formatting Disks\tab 318\par Opening and Printing Files on Entry\tab 318\par Summary\tab 320\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Lesson 18 \endash  New Desk Accessories\tab 321\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Goals for This Lesson\tab 321\par The Anatomy of an NDA\tab 321\par The Init Routine\tab 322\par The Open Routine\tab 323\par Using Resources in an NDA\tab 325\par The Close Routine\tab 326\par The Action Routine\tab 327\par Starting and Shutting Down Tools\tab 329\par Installing an NDA\tab 330\par Summary\tab 331\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Appendix A \endash  Abridged Toolbox Reference Manual\tab 333\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Control Manager\tab 333\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 DrawControls\tab 333\par FindTargetCtl\tab 333\par GetCtlHandleFromID\tab 333\par GetCtlID\tab 334\par GetCtlParams\tab 334\par GetCtlValue\tab 334\par GetLETextByID\tab 334\par SetCtlAction\tab 335\par SetCtlParams\tab 335\par SetLETextByID\tab 335\par SetCtlValue\tab 335\par Control Manager Definitions\tab 336\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Desk Manager\tab 336\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 FixAppleMenu\tab 336\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Event Manager\tab 336\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 GetMouse\tab 336\par GetNextEvent\tab 337\par StillDown\tab 339\par Event Manager Definitions\tab 339\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Font Manager\tab 340\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 ChooseFont\tab 340\par CountFonts\tab 341\par FamNum2ItemID\tab 341\par FixFontMenu\tab 341\par FMGetCurFID\tab 341\par InstallFont\tab 342\par ItemID2FamNum\tab 342\par Font Manager Definitions\tab 342\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 GS/OS\tab 343\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Path Names\tab 343\par File Types\tab 343\par CloseGS\tab 344\par CreateGS\tab 345\par DestroyGS\tab 347\par OpenGS\tab 348\par ReadGS\tab 350\par WriteGS\tab 351\par GS/OS Definitions\tab 351\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 LineEdit Tool Set\tab 351\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 LECopy\tab 352\par LECut\tab 352\par LEDelete\tab 352\par LEFromScrap\tab 352\par LEPaste\tab 353\par LEToScrap\tab 353\par LineEdit Tool Set Definitions\tab 353\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 List Manager\tab 353\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 DrawMember2\tab 354\par NewList2\tab 354\par SortList2\tab 355\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Loader\tab 355\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 LGetPathname2\tab 355\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Memory Manager\tab 355\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 DisposeHandle\tab 355\par FindHandle\tab 356\par FreeMem\tab 356\par HLock\tab 356\par HUnlock\tab 356\par MaxBlock\tab 356\par NewHandle\tab 357\par RealFreeMem\tab 358\par SetHandleID\tab 358\par SetPurge\tab 358\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Menu Manager\tab 359\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 CheckMItem\tab 359\par DisableMItem\tab 359\par DrawMenuBar\tab 359\par EnableMItem\tab 359\par FixMenuBar\tab 360\par HiliteMenu\tab 360\par InsertMenu\tab 360\par MenuKey\tab 360\par MenuSelect\tab 361\par NewMenu\tab 361\par NewMenuBar2\tab 362\par SetMenuBar\tab 363\par SetMenuFlag\tab 363\par SetMItem\tab 364\par SetMItemStyle\tab 364\par SetSysBar\tab 364\par Menu Manager Definitions\tab 365\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Miscellaneous Tool Set\tab 365\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 ReadAsciiTime\tab 365\par SysBeep\tab 366\par SysFailMgr\tab 366\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Note Synthesizer\tab 366\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 AllNotesOff\tab 366\par AllocGen\tab 366\par NoteOff\tab 367\par NoteOn\tab 367\par Note Synthesizer Definitions\tab 368\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Print Manager\tab 369\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 PrCloseDoc\tab 369\par PrClosePage\tab 369\par PrDefault\tab 369\par PrError\tab 369\par PrJobDialog\tab 370\par PrOpenDoc\tab 370\par PrOpenPage\tab 370\par PrPicFile\tab 371\par PrStlDialog\tab 371\par PrValidate\tab 371\par Print Manager Definitions\tab 372\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 QuickDraw II\tab 373\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 LocInfo Records\tab 373\par Scan Line Control Byte\tab 373\par CharBounds\tab 374\par CharWidth\tab 374\par ClipRect\tab 374\par ClosePoly\tab 374\par CStringBounds\tab 374\par CStringWidth\tab 375\par DrawChar\tab 375\par DrawCString\tab 375\par DrawString\tab 375\par DrawText\tab 376\par EraseArc\tab 376\par EraseOval\tab 376\par ErasePoly\tab 376\par EraseRect\tab 376\par EraseRRect\tab 377\par FillArc\tab 377\par FillOval\tab 377\par FillPoly\tab 377\par FillRect\tab 377\par FillRRect\tab 377\par FrameArc\tab 378\par FrameOval\tab 378\par FramePoly\tab 378\par FrameRect\tab 378\par FrameRRect\tab 378\par GetColorEntry\tab 379\par GetColorTable\tab 379\par GetFontInfo\tab 379\par GetPort\tab 379\par GetPortRect\tab 379\par GetVisHandle\tab 380\par GlobalToLocal\tab 380\par InitCursor\tab 380\par InvertArc\tab 380\par InvertOval\tab 380\par InvertPoly\tab 381\par InvertRect\tab 381\par InvertRRect\tab 381\par KillPoly\tab 381\par LineTo\tab 381\par LocalToGlobal\tab 381\par MoveTo\tab 382\par OffsetPoly\tab 382\par OpenPoly\tab 382\par PaintArc\tab 382\par PaintOval\tab 382\par PaintPoly\tab 383\par PaintRect\tab 383\par PaintRRect\tab 383\par PenNormal\tab 383\par PPToPort\tab 383\par PtInRect\tab 384\par RectInRgn\tab 384\par SetAllSCBs\tab 384\par SetBackColor\tab 384\par SetColorEntry\tab 385\par SetColorTable\tab 385\par SetForeColor\tab 385\par SetPenMask\tab 385\par SetPenMode\tab 385\par SetPenPat\tab 386\par SetPenSize\tab 386\par SetPort\tab 387\par SetSCB\tab 387\par SetSolidPenPat\tab 387\par SetTextMode\tab 387\par StringBounds\tab 388\par StringWidth\tab 388\par TextBounds\tab 388\par TextWidth\tab 388\par QuickDraw II Definitions\tab 389\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 QuickDraw II Auxiliary\tab 390\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 DrawPicture\tab 390\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Resource Manager\tab 391\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 AddResource\tab 391\par CloseResourceFile\tab 391\par LoadResource\tab 392\par OpenResourceFile\tab 392\par ReleaseResource\tab 393\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Scrap Manager\tab 393\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 GetIndScrap\tab 393\par GetScrapHandle\tab 394\par GetScrapSize\tab 394\par LoadScrap\tab 394\par PutScrap\tab 394\par UnloadScrap\tab 395\par ZeroScrap\tab 395\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Sound Tool Set\tab 395\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 FFSoundDoneStatus\tab 395\par FFStartSound\tab 395\par FFStopSound\tab 396\par WriteRamBlock\tab 396\par Sound Tool Set Definitions\tab 397\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Standard File Operations Tool Set\tab 397\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Reply Records\tab 397\par SFGetFile2\tab 398\par SFPutFile2\tab 399\par Standard File Operations Tool Set Definitions\tab 400\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 TextEdit Tool Set\tab 401\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 TEGetRuler\tab 401\par TEGetSelection\tab 401\par TEGetSelectionStyle\tab 401\par TEGetText\tab 402\par TEPaintText\tab 403\par TESetRuler\tab 403\par TESetSelection\tab 403\par TESetText\tab 404\par TEStyleChange\tab 404\par TextEdit Tool Set Definitions\tab 405\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 ToolLocator\tab 406\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 MessageCenter\tab 406\par ShutDownTools\tab 406\par StartUpTools\tab 407\par TextEdit Tool Set Definitions\tab 407\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Window Manager\tab 408\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Window Parameters\tab 408\par Window Color Tables\tab 411\par AlertWindow\tab 412\par BeginUpdate\tab 415\par BringToFront\tab 415\par CloseWindow\tab 415\par DoModalWindow\tab 416\par EndUpdate\tab 417\par FindWindow\tab 417\par FrontWindow\tab 418\par GetContentOrigin\tab 418\par GetNextWindow\tab 418\par HandleDiskInsert\tab 419\par HideWindow\tab 419\par InvalRect\tab 419\par NewWindow\tab 419\par NewWindow2\tab 420\par SetContentOrigin\tab 421\par SetDataSize\tab 421\par SetPage\tab 421\par SetScroll\tab 421\par SetSysWindow\tab 421\par SetWTitle\tab 422\par ShowWindow\tab 422\par TaskMaster\tab 422\par TaskMasterDA\tab 423\par Window Manager Definitions\tab 423\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Tool and GS/OS Errors\tab 425\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Appendix B \endash  Resources Used in This Course\tab 435\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Resource Attributes\tab 435\par rAlertString\tab 435\par rBundle\tab 436\par rComment\tab 438\par rControlList\tab 439\par rControlTemplate\tab 439\par rCString\tab 439\par rIcon\tab 440\par rMenu\tab 440\par rMenuBar\tab 442\par rMenuItem\tab 442\par rPicture\tab 444\par rPString\tab 444\par rTextForLETextBox2\tab 445\par rToolStartup\tab 445\par rVersion\tab 446\par rWindColor\tab 447\par rWindParam1\tab 448\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f  }}{\fldrslt {\f4 Appendix C \endash  Where to Go for More Information\tab 449\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Apple IIGS Toolbox Reference Manuals\tab 449\par Programmer\rquote s Reference for System 6.0\tab 450\par GS/OS Technical Reference Manual\tab 450\par Programmer\rquote s Introduction to the Apple IIGS\tab 450\par Firmware Reference Manual\tab 451\par Hardware Reference Manual\tab 451\par Apple Human Interface Guidelines\tab 451\par Technical Notes\tab 452\par Resource Central\tab 452\par Apple Sponsored Developer Programs and Licensing\tab 453\par Online Services\tab 453\par }\pard\plain \s15\li1440\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 AppleLink\tab 453\par America Online\tab 454\par CompuServe\tab 454\par GEnie\tab 454\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 User\rquote s Groups\tab 454\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\f4 \par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\field{\*\fldinst {\f4  TOC \\f \\l "1-2"  }}{\fldrslt {\f4 Appendix D \endash  Tips for ORCA/C\tab 455\par }\pard\plain \s16\li720\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 MoreRecent\tab 455\par Installing Rez\tab 455\par Using Small Systems\tab 456\par }\pard\plain \s17\widctlpar\tqr\tx9360\adjustright \f12\cgrid {\f4 Index\tab 459\par }\pard\plain \widctlpar\adjustright \f12\cgrid }}\pard\plain \widctlpar\adjustright \f12\cgrid {\b\f4\fs36 \sect }\sectd \sbkodd\pgnrestart\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 0 - Before We Start}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 0 \endash  Before We Start}{\pard\plain \qj\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 0 \endash  Before We Start\tcl1}}}{\b\f4\fs36 \par \par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 About This Course}{\pard\plain \keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 About This Course\tcl2}}}{\b\f4\fs28 \par }\pard \fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This is a self-study course designed to help you learn to program the Apple II}{\f4\fs20 GS}{\f4  toolbox in C.  Before we get started, I want to give you the standard spiel about how you should use this course if you want to get anything out of it other than spending some time at the computer instead of the local bar.  Of course, a lot of books you have read in the past started out with just this sort of advice, and by now you are probably practiced at skipping ahead.  Before you do though, could you stop to consider one minor point?  If I don\rquote t know how to help you learn to program the toolbox, why did you buy this book?  And if you aren\rquote t going to take the best advice I can give you, why bother spending time here when you could be watching baseball at the local pub?  In some ways, this is the most important part of the whole book!\par Programming is a skill.  Programming is not an abstract thought process, nor is it an inborn talent, nor is it something only kids born with video games in their crib can master.  Early experience doesn\rquote t hurt, you understand, but it also isn\rquote t essential.  Programming is a skill, like riding a bike, driving a car, talking, playing tennis and reading.  Like all skilled activities, to be good at programming, you have to learn a few fundamentals and practice a lot.  You have to practice while you learn the fundamentals, practice some more after learning the basics to firm up what you learned, practice still more to get good at programming, and keep on practicing to stay sharp.  If you stop programming, even for a month, you will notice the difference when your fingers are again permitted to caress the keyboard.\par This course is designed with this fundamental truth in mind.  I\rquote ve put all sorts of sample programs in this course.  All of them are also on the disks that comes with the course, so you don\rquote t have to type them in.  You should run each and every one of these sample programs.  I\rquote ve also peppered the course with problems.  Each and every lesson after this one has some real programming problems at the end of some of the sections.  I\rquote m not going to waste your time with the easy to grade make-work questions you find in a lot of fluff courses, like listing the seven kinds of controls.  Are there seven?  Who cares!  Instead, the problems are real programming problems, problems you should be able to solve in the form of a working program after reading the lesson.  If you can\rquote t, read the lesson again!\par A few years ago (OK, maybe more than a few) I was at the University of Denver slugging away at a master\rquote s degree in physics.  I took two courses there that are forever burned in my neural network.  The first was a course that reviewed undergraduate classical mechanics and electricity and magnetism, two very tough one-year courses.  The second was a year long graduate quantum mechanics course.  In both courses, I had the good fortune to be taught by Dr. Tuttle, the hardest, toughest, most slave driving professor I\rquote ve ever had \endash  and also the best.  Dr. Tuttle assigned weekly homework problems which took us an average of 15 hours to finish.  If we got stuck, which happened frequently, we were invited to stop by her office anytime we wanted and borrow a chunk of her chalk board.  There we would struggle for minutes or even hours until we could work the problem.  When we left, there was only one condition.  The only thing we took with us was chalk dust and a better trained neural network.  Once we left, we scurried back to the lab to rework the problem before we forgot what to do.  But do you know what?  It worked.  We }{\i\f4 remembered}{\f4  those lessons!\par Sometimes you are just going to get stuck on a problem in this course.  That\rquote s OK, it happens to everyone.  As long as you\rquote re getting stuck once or twice a lesson, don\rquote t sweat it.  You can find solutions to all of the problems on the disk.  I hope your goal is to learn toolbox programming, though, not to learn how to read my solutions.  Once you finish looking at the solution, close the file and start over.  Write your own version of the solution.  Sure, it\rquote s hard.  Sure, you think you will remember what you read about.  But remember what I said a moment ago?  Programming is a skill.  You really won\rquote t learn much by just reading my solutions.  You will, however, learn quite a bit by writing a program yourself.\par If you are good enough to work a problem without looking at my solution, good for you.  Look at the solution anyway.  This may seem like a waste of time, but it really isn\rquote t.  Any programmer, no matter how much he knows or how experienced he gets, will learn something new by reading a program written by someone else.  You should take advantage of all of that source code, reading it carefully to see what tricks you can pick up.\par To summarize, here\rquote s what you should do:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Read each lesson, running the sample programs as you go.\par 2.\tab Try working each problem on your own.  If you don\rquote t know where to start, or can\rquote t quite get it to work, go back and reread the lesson.  Try very hard to solve the problem on your own.\par 3.\tab If you get stuck, look at my solution.  Study it carefully.  Then close the file, and without looking at it again, write your own solution to the problem.\par 4.\tab If you solve a problem without looking at the solution, that\rquote s great.  Look at the solution anyway to see what you can learn from it.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 What You Should Already Know}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 What You Should Already Know\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This is a great first course in programming the toolbox, but programming the toolbox is not the first thing you should try to do on your computer.  You probably know that, but I thought I should take a moment to tell you what I\rquote m assuming you already know.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 bad blocks}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 backup copies}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 First, you should be pretty comfortable with your computer.  You should already know how to do basic things like format disks, check for bad blocks, make backup copies, and so forth.  If you don\rquote t you can find the information you need in the book that came with your computer.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 files}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printing}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You also need to know how to use desktop programs.  I\rquote m assuming you already know how to use a menu bar, how to load and save files, how to print, and how to manipulate windows and dialogs.  Again, if you\rquote re new to the Apple II}{\f4\fs20 GS}{\f4 , and you are trying to come up to speed in a hurry, the book Apple sent with your computer is a good place to start.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 C}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Finally, and most important, you need to know the C language.  Learning the toolbox is a big job.  It\rquote s not insurmountable, but it is a big job.  Learning C is also a big job.  Put these two big jobs together and try to learn C and the toolbox at the same time, and you more than double the chance you will fail.  If you don\rquote t know C, stop.  Put this book down.  Get a good beginner book that teaches you C, and learn the language first.  When you finish, come back to this book.  You can skimp on prior knowledge about the Apple II}{\f4\fs20 GS}{\f4  and its desktop interface, but you just can\rquote t use this course effectively unless you are already comfortable with C.\par Of course, you may wonder just how comfortable you really need to be.  Basically, you should have a good working knowledge of the language, through structures and pointers.  The toolbox relies very heavily on structures and pointers, so you\rquote ll see a lot of them.  You should also be familiar with linked lists and recursion.  You\rquote ll see both of these in this course, although you don\rquote t have to be an expert at either one.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 What You Must Have}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 What You Must Have\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Other than patience, time and some prior knowledge, you need three things to work all of the problems in this course.  These three things are the computer, this book, and a C compiler.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 hardware requirements}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 requirements\:hardware}}}{\v\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 memory requirements}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 requirements\:memory}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Your Apple II}{\f4\fs20 GS}{\f4  computer needs to have enough memory and disk space to handle the course.  The exact amount of memory you need will depend a lot on what version of the operating system you are using; how many and what kind of drivers, desk accessories, and Inits you have installed; and how large a RAM disk you have allocated.  As I write this, the latest operating system is 6.0.  With system disk 6.0, 1.25 megabytes (M) of memory is just barely enough on a ROM 01 Apple II}{\f4\fs20 GS}{\f4 , while 1.125M works if you have a ROM 03 machine.  If you aren\rquote t sure which ROM version you have, boot your computer and look at the very first thing that appears on the screen \endash  right at the bottom you will find the ROM version.  If you have ROM 03, the computer comes with 1.125M of memory, so you\rquote re in great shape.  If you have ROM 01, you need to check to make sure you have at least 1M on a memory expansion card.\par If you have the minimum amount of memory, though, you\rquote re going to have to use the text shell to compile and execute most of the programs.  You will be a lot better off if you can get 1.75M of memory.  With 1.75M of memory, you can use the desktop development environment to compile and test your programs, and even the text shell will work faster.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 requirements\:disk drives}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You need to have at least two disk drives, one 3.5 inch floppy drive for the compiler and one other disk drive to save programs.  That second disk drive can be anything, but if it isn\rquote t a hard disk, you might want to ask Santa for one real soon.  A hard disk will make programming a whole lot easier.  You should have enough blank 3.5 inch floppy disks to make a backup of your C compiler, and several blank floppies that fit your second drive to hold your own programs.\par This book is completely self contained in the sense that it has all of the information you need to know about the Apple II}{\f4\fs20 GS}{\f4  Toolbox to work all of the problems and understand all of the solutions.  You will also need a C reference manual.  Your compiler came with one, and that one will do fine.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 C\:compiler}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you already know C, you can use pretty much any C compiler for this course.  The course was written with ORCA/C, and all of the sample programs and solutions have been tested with that compiler.  The only other C compiler for the Apple II}{\f4\fs20 GS}{\f4  that exists at the moment is APW C (although it is no longer in print).  APW C will work, but it is a dialect of C known as K&R C, while ORCA/C is ANSI C.  In short, there are some differences, mostly in the way function parameters are declared.  If you know enough about C to deal with these differences, you can use APW C for all of the problems in this course.  Of course, you won\rquote t have to deal with differences if you use ORCA/C, but I wouldn\rquote t want to seem like I\rquote m plugging my own compiler too much!\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Other Useful Things}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Other Useful Things\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 hard disk}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Getting by with the basics from the last section is possible, but frankly it isn\rquote t easy.  A hard disk is a very important addition to your computer.  If you don\rquote t have one, please take a look at the prices for hard disks in the latest issue of some Apple II magazine.  A hard disk only costs a few hundred dollars, and it truly changes the character of your computer.\par If you started with a keyboard in your crib or have spent the last ten years glued to a CRT screen you probably won\rquote t need a printer.  Frankly, I don\rquote t use mine much at all.  If you are more comfortable with a pen and paper than with keys and dots of colored phosphor, though, a printer is almost as nice as the hard disk.\par }\pard \qj\keepn\widctlpar\tx1080\adjustright {\pard\plain \qj\keepn\widctlpar\tx1080\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CAD}}}{\pard\plain \qj\keepn\widctlpar\tx1080\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Design Master}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 On the software side, you might want to consider a programmer\rquote s CAD tool, like Design Master.  You may not even know what that is yet.  We\rquote ll get to it in time, and once we do get around to telling you what a programmer\rquote s CAD tool is, you may want to run right out and buy one.  They cost about $60 to $100 from mail order houses, so start saving your pennies now.  On the other hand, you don\rquote t actually have to have one to do desktop programming.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolbox}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolbox reference manuals}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 I\rquote ve saved the most important thing for last.  At last count, the Apple II}{\f4\fs20 GS}{\f4  toolbox is a collection of 32 tools \endash  well over 3000 different subroutine calls.  This course teaches you how to use the tools, and gives you a good grasp on the most important tools and tool calls.  There is no way I can teach you everything there is to know about each and every tool call, though.  I can\rquote t even list all of them.  The Apple II}{\f4\fs20 GS}{\f4  toolbox reference manuals, which do list all of the tool calls, are a four volume set.  For an Apple II}{\f4\fs20 GS}{\f4  programmer, the toolbox reference manuals serve the same purpose that a good dictionary does for a writer.  You can do a lot of writing without a dictionary, and you can do a lot of toolbox programming from the information you will find in this course.  On the other hand, there\rquote s a lot more out there.  Before you start writing your own toolbox programs from scratch, you really must get all four volumes of the toolbox reference manual.  Please don\rquote t kid yourself into thinking you can get by without them.  Appendix A of this course is a mini-reference manual that covers all of the tool calls we use in the course, and it does fine for the course itself \endash  but there\rquote s a world of other calls out there waiting to be tapped.  I would recommend that you try to get the toolbox reference manuals by about the middle of this course, when you will probably start to write your own programs that aren\rquote t given as samples.\par The toolbox reference manuals I\rquote ve talked about here, plus several more handy reference books, are described more completely in Appendix C.  If you\rquote re not quite sure what the books are or where to get them, you can look there for details.\par }\pard \widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 1 - Current Events}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 1 \endash  Current Events}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 1 \endash  Current Events\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tools\:starting}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tools\:shutting down}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:keyboard}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:mouse}}}{\v\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event loop}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolbox reference manuals}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson shows you how to organize a desktop program.  It covers starting the essential tools, setting up an event loop, and the basics of using an event loop to read the mouse and keyboard.  Along the way, we\rquote ll start learning how to use the toolbox reference manuals.  If you don\rquote t have the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference}{\f4 , you can use Appendix A, which contains all of the tool calls from this course in pretty much the same format.\par By the end of this lesson, you should understand how to start and shut down the tools, how to set up and use an event loop, and the basics of how to handle keyboard events and read the position of the mouse.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Starting the Tools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Starting the Tools\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par {\*\bkmkstart bk2}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolbox}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Apple II}{\f4\fs20 GS}{\f4  toolbox is really just a collection of subroutines designed to make it easy (or at least easier!) to write programs with windows, menu bars, and all the other jazzy accouterments of the standard Apple interface.  It contains things like }{\f6\fs20 SetSolidPenPat}{\f4 , a subroutine that tells the graphics program what color to use when it draws things; and }{\f6\fs20 NewWindow}{\f4 , which opens a new window.  These subroutines are collected in tools.  QuickDraw II, for example, contains most of the low level graphics subroutines for drawing lines and rectangles, selecting pen patterns, and drawing text on the screen.  }{\f6\fs20 SetSolidPenPat}{\f4  is a part of QuickDraw II.  }{\f6\fs20 NewWindow}{\f4  is a part of the Window Manager, which has the subroutines you use to create windows, change things like the window title, resize windows, or bring a window from the back of the screen to the front.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolbox reference manuals}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The complete toolbox reference is made up of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference}{\f4 , volumes 1 to 3, and }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .  All together, these books weigh over 16 pounds.  There are 3052 pages, covering 1226 different tool calls grouped into 32 different tools.  Obviously, that\rquote s a lot of stuff.  In fact, there\rquote s so much stuff that the Apple II}{\f4\fs20 GS}{\f4  tools aren\rquote t actually all inside of your Apple II}{\f4\fs20 GS}{\f4 .  Apple crammed quite a few tools into the 128K ROM of the original Apple II}{\f4\fs20 GS}{\f4 , and even more into the 256K ROM of the new Apple II}{\f4\fs20 GS}{\f4 , but there are still quite a few tools on the system disk, tucked away in a folder called Tools.  Apple makes mistakes, too, and they even fix them.  Rather than sending out a new ROM each time they fix a minor bug, Apple creates tool patches, which are also in the system disk.  These tool patches are in the Inits folder.  To use the tools, you have to have these inits and RAM based tools available.  The easiest, quickest, and most reliable way to make sure you have everything you need is to boot from Apple\rquote s system disk (or the one that comes with your language).  If you are running from a hard disk, be sure and use Apple\rquote s installer to put the operating system on your disk.  It\rquote s free, it works, and it makes real sure you have all of the files you need.\par Each of the tools in the Apple II}{\f4\fs20 GS}{\f4  toolbox needs a little work space for variables.  The RAM based tools need to be loaded from disk.  Some of the tools need to know just exactly how you want to start them; QuickDraw II, for example, wants to know right away if you want to use 320 mode graphics or 640 mode graphics.  When you hear someone talk about \ldblquote starting the tools,\rdblquote  they are talking about loading the RAM based tools, finding direct page work space for the tools that need it, and making a call to each tool to tell it to wake up and start doing something useful.\par {\*\bkmkstart bk0}There are a lot of ways to start the tools, but it truly is a bit of a pain.  Later, we\rquote ll get into a lot of detail about just what you need to do to start the tools, but for now we\rquote re going to use a shortcut.  ORCA/C comes with a library subroutine called }{\f6\fs20 startdesk}{\f4  that will start up most of the tools we will need in this course.  You pass a single parameter, telling it whether you want to start in 640 mode or 320 mode, and it does all of the dirty little chores needed to get things going.\par \par }{\f6\fs20 startdesk(640);\par {\*\bkmkend bk0}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 startdesk}{\rxe bk0}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk1}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tools\:shutting down}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 I can still hear my mother\rquote s cheerful, chirping voice floating out the door from my idyllic youth.  \ldblquote You think this is a barn, kid?\rdblquote  she would holler.  \ldblquote Close that door behind you!\rdblquote   Dear old mom.  Well, the same is true for the tools.  If you open them, close them behind you when you\rquote re done.  In ORCA/C, all of the tools started with }{\f6\fs20 startdesk}{\f4  can be closed by }{\f6\fs20 enddesk}{\f4 :\par \par }{\f6\fs20 enddesk();\par }{\f4 \par {\*\bkmkend bk1}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 enddesk}{\rxe bk1}}}{\v\f4 \par }{\f4 Just as dear old mom had a reason for gently reminding me to close the door, there\rquote s a good reason for closing the tools, too.  Closing the tools tells each tool in turn to let loose of any memory it has allocated, so there\rquote s plenty left for the next program you run.  Closing the tools also stops certain things called interrupts.  If you don\rquote t know what they are, don\rquote t fret \endash  but if you forget to shut down the tools, these things can cause your computer to crash.  Crashing doesn\rquote t do any real harm, but you do have to reboot, which takes up valuable time that you could have used for mowing the lawn.  There are also a lot of soft switches in the Apple II}{\f4\fs20 GS}{\f4  that tell the computer to behave in certain ways, like to display a particular graphics screen.  Shutting down the tools reverses the critical soft switches.  In short, it\rquote s pretty important to remember to shut down the tools.\par {\*\bkmkend bk2}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tools\:starting}{\rxe bk2}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Event Loop}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Event Loop\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk3}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 When Apple released the Lisa back in 1983, they did something pretty radical.  Apple said that programmers should work hard to give the end user a piece of software that was easy to use, and could work the way the user wanted it to, instead of the traditional approach of making the user learn exactly how and in what order the program wanted him to do things.  With the Apple interface, unless the program is doing something that takes a lot of time, you should always be able to press a key, move the mouse, click on a button, or pull down a menu.  Always.\par Well, programmers just weren\rquote t used to dealing with a program that gave the user so many options.  How could all of this be done?  The answer, once you know it, is pretty simple.  It\rquote s called an event loop.  The event loop is just an infinite loop that you drop into right after you initialize your tools and do any other chores you need to get done before you let the user start doing something with the program.  In this infinite loop, the program checks to see if a key has been pressed, then checks to see if a menu has been pulled down, then to see if a desk accessory has been started, and so forth.  The program is waiting for an event to happen.  When something happens, the program goes off for a bit, taking whatever action is necessary, and then comes back to the even loop.  Ignoring the particular computer we\rquote re on and just thinking about the idea, an event loop looks something like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 done = FALSE;\par while (!done) \{\par    if (KeyPress())\par       HandleKeyPress()\par    else if (MouseDown())\par       HandleMouseClick()\par    else if (DAClosed())\par       HandleDAClose()\par    else if (MenuSelected())\par       HandleMenu();\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20    \}; \par }{\f4 \par Rumors start in strange ways.  Back when Apple first started asking programmers to write for the Lisa, a lot of folks rushed right over, trying to move their spaghetti coded programs to the jazzy new machine.  The problem was that a lot of these programs were turned inside out compared to the way they needed to work.  The program would check for a key press whenever and however it felt like it.  Rather than do the job right, these adventurous souls would try to move their program over with as few changes as possible.  It just didn\rquote t work very well.  Asking for help, they would be told over and over that the program had to be written around an event loop, and they would struggle more and more trying to reshape the old program to the new ideas.  Of course, programmers never make mistakes \endash  just ask one \endash  so the obvious conclusion resounded through the programming community: \ldblquote Event loops are hard!\rdblquote \par Wrong.  Thanks for playing at the game of programming.  Better luck next time.\par Event loops are easy.  Like structured programming, event loops are something that makes so much sense that once you get used to them, you wouldn\rquote t write a program any other way, even on an IBM PC.  What\rquote s hard is taking an old program that wasn\rquote t written with an event loop and trying to shoehorn it into a program that has to have an event loop.  Starting from scratch on a new program, though, an event loop gives you a great start on organizing your program around a single, top-level controller.\par {\*\bkmkend bk3}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event loop}{\rxe bk3}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Event Record}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Event Record\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tools\:see also individual tool names}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Event Manager}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextEvent}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Events and the event loop are so important on the Apple II}{\f4\fs20 GS}{\f4  that an entire tool has been created that does nothing but handle events.  Cleverly enough, this tool is called the Event Manager.  To write an event loop, you create a loop that calls }{\f6\fs20 GetNextEvent}{\f4 .  You pass }{\f6\fs20 GetNextEvent}{\f4  a structure, called an event record.  }{\f6\fs20 GetNextEvent}{\f4  fills in the information in the event record, like what event occurred (if any) and where the mouse is.  The current mouse position is always returned, even if the user is just jerking the mouse back and forth to pass time and watch the pretty arrow move.  Since your program may have other things to do if the user isn\rquote t busy, }{\f6\fs20 GetNextEvent}{\f4  returns right away, even if nothing is happening.  It returns a zero if there is nothing pressing for your program to do, and one if there is something you need to handle.\par Putting this knowledge to work, we can write the outline of our first desktop program.  The main part of the program looks like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 startdesk}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 enddesk}}}{\v\f4 GetNextEvent;\par }{\f6\fs20 startdesk(640);\par done = FALSE;\par while (!done) \{\par    if (GetNextEvent(0xnnnn, &myEvent))\par       HandleEvent();\par    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 enddesk();\par }{\f4 \par }{\f6\fs20 HandleEvent}{\f4  is some hypothetical subroutine that does all of the hard stuff; in a moment, we\rquote ll replace this hypothetical subroutine with something a bit more down to earth.  }{\f6\fs20 GetNextEvent}{\f4  itself has to tell you if something happened, so Apple implemented it as a function.  In addition to returning }{\f6\fs20 TRUE}{\f4  if something important happened, and }{\f6\fs20 FALSE}{\f4  if there\rquote s nothing for you to worry about, the Event Manager fills in the event record.  The event record is packed with all sorts of information.  In C, an event record looks like this:\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 struct EventRecord \{\par    Word what;        /* event code */\par    LongWord message; /* event message */\par    LongWord when;    /* ticks since startup */\par    Point where;      /* mouse location */\par    Word modifiers;   /* modifier flags */\par \};\par }\pard \li360\widctlpar\adjustright {\f6\fs20 typedef struct EventRecord EventRecord, *EventRecordPtr, **EventRecordHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab If you actually look at the definition of an event record in the header files, you will find some other fields after }{\f6\fs20 modifiers}{\f4 .  Technically, those are part of a }{\f6\fs20 TaskMaster}{\f4  record.  We\rquote ll talk about those fields, and why they are in the event record, when we start using }{\f6\fs20 TaskMaster}{\f4 .\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record\:what}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Let\rquote s stop and take a close look at just what the Event Manager is telling us.  The first item in the event record is }{\f6\fs20 what}{\f4 .  The }{\f6\fs20 what}{\f4  field tells us what kind of event has occurred.  Here\rquote s a list of the various events the Event Manager can return.\par \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx2160\tx3060\adjustright {\f4 Name\tab Value\tab Description\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:null}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 nullEvt}{\f4 \tab 0\tab Nothing happened.  The mouse may have moved, but the mouse button hasn\rquote t been pressed, no key on the keyboard has been pressed, and the Event Manager didn\rquote t find any other sign that the person using the program is doing anything.\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:mouse}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 mouseDownEvt}{\f4 \tab 1\tab The button on the mouse was pressed.  This event occurs once, when the mouse button is originally pressed down.  As long as the button is held down, you won\rquote t get another mouse down event.\par }{\f6\fs20 mouseUpEvt}{\f4 \tab 2\tab The button on the mouse was down, and has been released.\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:keyboard}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 keyDownEvt}{\f4 \tab 3\tab A key on the keyboard has been pressed.\par }{\f6\fs20 autoKeyEvt}{\f4 \tab 5\tab A key was pressed, and a }{\f6\fs20 keyDownEvt}{\f4  reported, but the key was held down.  This event is reported periodically for as long as the key is held down.\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:update}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 updateEvt}{\f4 \tab 6\tab A portion of a window needs to be redrawn (updated).\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:activate}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 activateEvt}{\f4 \tab 8\tab A window has been activated.\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:switch}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 switchEvt}{\f4 \tab 9\tab Switch events aren\rquote t used by the current system.  Apple put them in just in case they ever wanted to generate a switch event, presumably for something like an application switcher or MultiFinder.\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:desk accessory}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 deskAccEvt}{\f4 \tab 10\tab This event happens right before the CDA menu is brought up.\par }{\f6\fs20 driverEvt}{\f4 \tab 11\tab Device drivers can post these events.  They really don\rquote t concern us.\par }\pard \qj\fi360\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:application}}}{\v\f4 \par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2160\tx3060\adjustright {\f6\fs20 app1Evt}{\f4 \tab 12\tab You can define your own events.  If you need one, this event code and the three that follow are for your use.\par }{\f6\fs20 app2Evt}{\f4 \tab 13\tab Application-defined event.\par }{\f6\fs20 app3Evt}{\f4 \tab 14\tab Application-defined event.\par }{\f6\fs20 app4Evt}{\f4 \tab 15\tab Application-defined event.\par }\pard \qj\fi-2700\li3060\keepn\widctlpar\tx2160\tx3060\adjustright {\f4 \par }\pard \qc\fi-2700\li3060\widctlpar\tx2160\tx3060\adjustright {\f4 Table 1-1:  Event Manager Events\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Some of these probably don\rquote t make much sense, yet.  We\rquote ll look at several of these events in more detail as we learn more about the toolbox.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record\:message}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 message}{\f4  field tells more about the event that occurred.  For example, the }{\f6\fs20 message}{\f4  field for a }{\f6\fs20 keyDownEvt}{\f4  contains the ASCII character code for the key that was pressed.  The }{\f6\fs20 message}{\f4  field is different for each event, so we\rquote ll wait to look at this field in detail until we start looking at the individual events.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tick count}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 heartbeat\:see tick count}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record\:when}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you start the Event Manager, your Apple II}{\f4\fs20 GS}{\f4  starts a clock that counts off each 1/60th of a second.  Each time the clock increments, it adds one to the tick count.  The tick count is recorded in the }{\f6\fs20 when}{\f4  field.  You can use this value to tell when a particular event occurred, or more commonly, how much time elapsed between two events.  For example, when a program looks for a double-click, the tick count is used to see if the two clicks on the mouse button were close enough together to be considered a double click.  The }{\f6\fs20 when}{\f4  field is set even if no event occurred, so you can use it as a timer inside your event loop.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record\:where}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 mouse\:position}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Like the }{\f6\fs20 when}{\f4  field, the }{\f6\fs20 where}{\f4  field is always set, even if the event is a null event.  The }{\f6\fs20 where}{\f4  field is a point; it gives the position of the mouse in global coordinates.  A point is a structure with two integer values, h and v.  The value h is the horizontal position, starting from 0 and counting from the left of the screen.  The vertical coordinate, v, counts from the top of the screen to the bottom.  Global coordinates are the ones you would expect, with the 0,0 point at the top left of the screen.  When we start to use windows, you\rquote ll learn about local coordinates.  We\rquote ll take a closer look at global coordinates a little later in this lesson when we look at mouse events.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record\:modifiers}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 mouse\:button}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 keyboard}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 shift key}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 control key}}}{\v\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 apple key}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 modifiers}{\f4  field is a series of bit flags that give more information about the state of the computer.  The }{\f6\fs20 modifiers}{\f4  field tells us if the mouse button is down, if the shift key is being pressed, and so forth.  Figure 1-1 shows the modifier flags and what each bit is used for.  It\rquote s worth taking a close look at figures like 1-1 \endash  you find out some peculiar and interesting things about the toolbox when you do.  For example, take a look at bits 6 and 7.  Here we have two innocent bits that tell you when mouse button 0 and mouse button 1 are down, so you can tell which mouse button is being pressed.  Well, that seems useful, but }{\i\f4 my}{\f4  mouse only has one button.  Of course, Apple\rquote s desktop bus system that you use to connect your keyboard and mouse to the computer isn\rquote t limited to just the keyboard and mouse Apple sends with the computer.  Apple\rquote s programmers put a lot of work into making the toolbox flexible enough to handle lots of options, many of which they don\rquote t intend to use themselves.  That\rquote s a good design philosophy, but you need to keep alert for things like the two mouse buttons so you know what is available.\par \par }\pard \qc\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1025{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw488\pich586\picwgoal9760\pichgoal11720\macpict\bliptag1692840474\blipupi72{\*\blipuid 64e6b21a7b24c54bc7a3ba0557d19322}0b14ffffffff024901e71101a00082a0008c01000affffffff024901e70900000000000000000b001b001b41001300010026002609ffffffffffffffff480900000000000000003100120000001c0025a0008da0008c41001300b5002600fe09ffffffffffffffff4809000000000000000031001200b4001c00fda0008da0008ca0008c31000100010014001409ffffffffffffffff38a10096000c02000000020000000000000001000a00020003001100122c000c00150948656c7665746963610300150d000c2e0004000001002b040c023135a00097a0008da0008c01000affffffff024901e709000000000000000031000100250014003809ffffffffffffffff38a10096000c02000000020000000000000001000a00020027001100362924023133a00097a0008da0008c01000affffffff024901e709000000000000000031000100490014005c09ffffffffffffffff38a10096000c02000000020000000000000001000a0002004b0011005a2924023131a00097a0008da0008c01000affffffff024901e7090000000000000000310001006d0014008009ffffffffffffffff38a10096000c02000000020000000000000001000a000200720011007b29270139a00097a0008da0008c01000affffffff024901e70900000000000000003100010091001400a409ffffffffffffffff38a10096000c02000000020000000000000001000a000200960011009f29240137a00097a0008da0008c01000affffffff024901e709000000000000000031000100b5001400c809ffffffffffffffff38a10096000c02000000020000000000000001000a000200ba001100c329240135a00097a0008da0008c01000affffffff024901e709000000000000000031000100d9001400ec09ffffffffffffffff38a10096000c02000000020000000000000001000a000200de001100e729240133a00097a0008da0008c01000affffffff024901e709000000000000000031000100fd0014011009ffffffffffffffff38a10096000c02000000020000000000000001000a000201020011010b29240131a00097a0008da0008c01000affffffff024901e709000000000000000031000100130014002609ffffffffffffffff38a10096000c02000000020000000000000001000a000200150011002428000c0016023134a00097a0008da0008c01000affffffff024901e709000000000000000031000100370014004a09ffffffffffffffff38a10096000c02000000020000000000000001000a00020039001100482924023132a00097a0008da0008c01000affffffff024901e7090000000000000000310001005b0014006e09ffffffffffffffff38a10096000c02000000020000000000000001000a0002005d0011006c2924023130a00097a0008da0008c01000affffffff024901e7090000000000000000310001007f0014009209ffffffffffffffff38a10096000c02000000020000000000000001000a000200840011008d29270138a00097a0008da0008c01000affffffff024901e709000000000000000031000100a3001400b609ffffffffffffffff38a10096000c02000000020000000000000001000a000200a8001100b129240136a00097a0008da0008c01000affffffff024901e709000000000000000031000100c7001400da09ffffffffffffffff38a10096000c02000000020000000000000001000a000200cc001100d529240134a00097a0008da0008c01000affffffff024901e709000000000000000031000100eb001400fe09ffffffffffffffff38a10096000c02000000020000000000000001000a000200f0001100f929240132a00097a0008da0008c01000affffffff024901e7090000000000000000310001010f0014012209ffffffffffffffff38a10096000c02000000020000000000000001000a000201140011011d29240130a00097a0008da0008d01000affffffff024901e722001301180009231200a10096000c01000000020000000000000001000a00140133003f01d22b1f120b616374697665466c61670d2a0e1b31202d2077696e646f77206265696e67206163746976617465640d2a0e1c30202d2077696e646f77206265696e67206465616374697661746564a0009701000affffffff024901e7220049012adc0022001301060036a10096000c01000000020000000000000001000a00410133007a01ce2a110b6368616e6765466c61670d2a0e1c31202d206368616e67696e672066726f6d2073797374656d20746f0d2a0e202020202020206170706c69636174696f6e206f7220766963652076657273610d2a0e0d30202d206e6f206368616e6765a00097a10096000c01000000020000000000000001000a00800133008f01682a15087265736572766564a0009701000affffffff024901e722002500d90063220088012aaf00a10096000c01000000020000000000000001000a0092013300bc01be2a120a62746e3153746174650d2a0e1831202d206d6f75736520627574746f6e203120646f776e0d2a0e1530202d206d6f75736520627574746f6e2031207570a00097a10096000c01000000020000000000000001000a00c8013300f201be2a1a0a62746e3053746174650d2a0e1831202d206d6f75736520627574746f6e203020646f776e0d2a0e1530202d206d6f75736520627574746f6e2030207570a0009701000affffffff024901e722001c00ac007e237e0020001c009a00d0009a2100d0012a20001c00880106008820001c0076013c007620001c00640172006420001c005201a8005220001c004001de004020001c002e020b002e200025001302410013a10096000c01000000020000000000000001000a00fe0133012901b82a1a096170706c654b65790d2a0e1731202d206170706c65206b65792077617320646f776e0d2a0e1430202d206170706c65206b657920776173207570a0009701000affffffff024901e720010600880106012aa10096000c01000000020000000000000001000a01340133015f01b22a1a0973686966744b65790d2a0e1731202d207368696674206b65792077617320646f776e0d2a0e1430202d207368696674206b657920776173207570a0009701000affffffff024901e720013c012a013c0076a10096000c01000000020000000000000001000a016a0133019501cc2a1a09636170734c6f636b0d2a0e1b31202d2063617073206c6f636b206b65792077617320646f776e0d2a0e1830202d2063617073206c6f636b206b657920776173207570a0009701000affffffff024901e7200172012a01720064a10096000c01000000020000000000000001000a01a0013301cb01ba2a1a0a6f7074696f6e4b65790d2a0e1831202d206f7074696f6e206b65792077617320646f776e0d2a0e1530202d206f7074696f6e206b657920776173207570a0009701000affffffff024901e72001a8012a01a80052a10096000c01000000020000000000000001000a01d60133020101be2a1a0b636f6e74726f6c4b65790d2a0e1931202d20636f6e74726f6c206b65792077617320646f776e0d2a0e1630202d20636f6e74726f6c206b657920776173207570a0009701000affffffff024901e72001de012a01de0040a10096000c01000000020000000000000001000a02030133022e01e62a11076b65795061640d2a0e1e31202d206b65792070726573736564206f6e20746865206b65797061640d2a0e1f30202d206b65792070726573736564206f6e20746865206b6579626f617264a0009701000affffffff024901e720020b012a020b002ea10096000c01000000020000000000000001000a02390133024801682a1a087265736572766564a0009701000affffffff024901e7200241012a02410013a00083ff}}{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 1-1:  Modifier Flags\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 everyEvent}}}{\v\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextEvent}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 We\rquote ve seen that }{\f6\fs20 GetNextEvent}{\f4  returns a value, which we have seen is }{\f6\fs20 TRUE}{\f4  if some event occurred, and }{\f6\fs20 FALSE}{\f4  if there was no event.  We\rquote ve seen how the event record is used to return lots of information about what event occurred \endash  and some information, like the mouse position and modifiers, even when an event didn\rquote t occur.  Looking back at }{\f6\fs20 GetNextEvent}{\f4 , though, there is one other parameter we haven\rquote t talked about.  In some programs, you just may not need a particular event.  The event mask parameter tells the Event Manager which events you want to see, and which events you want it to dump in the bit bucket.  While this can be useful in some situations, it\rquote s really just as easy to ignore the events you don\rquote t want to handle in your event loop.  For now, we\rquote ll use the value }{\f6\fs20 everyEvent}{\f4 , which tells the Event Manager to report each and every event it finds.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Our First Executable Program}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Our First Executable Program\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:keyboard}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Well, we can finally create a complete desktop program.  This one doesn\rquote t to much \endash  it just brings up the desktop and waits for us to press a key, but hey, it\rquote s a start.  Even though the program doesn\rquote t do much, we\rquote ve covered a lot of ground, and it\rquote s important to see some of this new knowledge put to use.\par There are a couple of things in this program you may not have expected; we\rquote ll talk about those in a moment.  The event loop itself, though, is exactly what we\rquote ve been leading up to in the last few pages.\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Keypress\par *\par * Start the desktop environment and wait for a keypress.\par *\par ***************************************************************/\par \par #pragma lint -1\par \par #include <orca.h>\par #include <Event.h>\par \par BOOLEAN done;                           /* are we done, yet? */\par EventRecord myEvent;                    /* event record */\par \par /***************************************************************\par *\par * Main program\par *\par ***************************************************************/\par \par int main (void)\par \par \{\par startdesk(640);\par done = FALSE;\par while (!done) \{\par    if (GetNextEvent(everyEvent, &myEvent))\par       if (myEvent.what == keyDownEvt)\par          done = TRUE;\par    \}\par enddesk();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 1-1: Wait for a Key Press\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You can either type the program in or load it from the disks that come with the course.  (On the disk, the file is in a folder called Lesson.1.  The source code is in the file Prog.1.1.cc.)  Either way, take the time to compile and run the program.  You can either run it form the desktop development environment or create an S16 program that you can launch from the Finder.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 debugger}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab If you are using ORCA/C\rquote s desktop development environment, you will see the menus on the menu bar disappear when you run this program, and two icons will appear on the menu bar near the right-hand edge.  The blank menu bar belongs to your program.  Since you haven\rquote t created a menu bar yet, there is nothing on it.  The double-arrow icon is used to switch back and forth between your menu bar and the debugger\rquote s menu bar, although it doesn\rquote t work very well in the middle of an event loop, since your program and the debugger are fighting over who gets the events!  The footprint lets you use the debugger\rquote s step feature without switching back to the debugger\rquote s menu bar.  All of this is explained in detail in your reference manual, which gives lots of tips about debugging desktop programs.\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\tx2340\adjustright {\tab \tab \tab }{{\pict{\*\picprop\shplid1026{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley49\piccropl0\piccropr0\piccropt0\piccropb0\picw645\pich406\picwgoal12900\pichgoal8120\macpict\bliptag168240321\blipupi72{\*\blipuid 0a0724c1f36528a00af64e7251e39a83}2bef00000000019602851101a00082a0008e01000a0000000002d002d098005200000000007f028800000000007f028500000000007f0285000102af0007007fb2ff01f80007007fb2ff01f80007007fb2ff01f80007007fb2ff01f800070078b200017800070078b2000178000d0078b80007fc000006018038000d0078b80007fc000006018038000e0078b9000801fe00001e01e038000e0078b9000801fe00001e01e038000e0078b9000803ff00007e01f838000e0078b9000803ff00007e01f838000d0078b80007ff0001ffcffe38000d0078b80007ff0001ffcffe38000d0078b800077f0007ffcfffb8000d0078b800077f0007ffcfffb8000b0078b6000501ffcffe38000b0078b6000501ffcffe38000d0078b80007ff00007e01f838000d0078b80007ff00007e01f838000d0078b80007ff00001e01e038000d0078b80007ff00001e01e038000d0078b800077e000006018038000d0078b800077e00000601803800070078b200017800070078b20001780007007fb2ff01f80007007fb2ff01f8000b0060da000060da000118000b0070da100060da000118000d0060dcff02fe0060da000118000c0061dbff010160da00011800160160e0dd0002060060f0000478c0007070f000011800160170e0dd0002061060f0000478c0007070f000011800160160e0dd0002060060f00004ccc0003030f000011800160161e0dd0002070160f00004ccc0003030f0000118002a0460e7e7fff3f8ff01fc1ffd0001c00cfe00007ff8ff05cfffe7e60060f00004c0f8783030f0000118002a0470e7e7fff3f8ff01fc1ffd0001c00cfe00007ff8ff05cfffe7e61060f00004c0f8783030f000011800260460e0060030f700061980000003c03cf400050c1860060060f0000478cccc3030f000011800260461e0060030f700061980000003c03cf400050c1860070160f0000478cccc3030f0000118002b0460e7e60033f8ff0bfc199b1e1f00c00c01e1e07ff8ff05cc1867e60060f000040cccfc3030f0000118002b0470e7e60033f8ff0bfc199b1e1f00c00c01e1e07ff8ff05cc1867e61060f000040cccfc3030f000011800290460e0060030f700091f1c333300c00c033330f700050ff860060060f00004ccccc03030f000011800290461e0060030f700091f1c333300c00c033330f700050ff860070160f00004ccccc03030f0000118002a0460e7e60033f8ff0bfc1818333300c00c0303007ff8ff05cc0067e60060f0000178ccfe78f0000118002a0470e7e60033f8ff0bfc1818333300c00c0303007ff8ff05cc0067e61060f0000178ccfe78f000011800210460e0060030f700091818331f00c00c033330f700050c0060060060da00011800210461e0060030f700091818331f00c00c033330f700050c0060070160da00011800230460e7e7fff3f8ff0bfc18181e2333f33f31e1e07ff8ff05cfffe7e60060da00011800230470e7e7fff3f8ff0bfc18181e2333f33f31e1e07ff8ff05cfffe7e61060da00011800120160e0f100001eee000206007fdaff01f800120161e0f100001eee000207017fdaff01f800110160e0dd0002060060dd00041ffffff800110170e0dd0002061060dd00041ffffff800220060dcff0bfe006018060018001fc0c606fe000506000f801fc0ef00041800001800210061dbff0a016018060018001fc0c606fe000506000f801fc0ef00041800001800260160e0e0000e07fffffe006018000018001800c006fe00050e0018c000c0ef00041800001800260170e0e0000e07fffffe106018000018001800c006fe00050e0018c000c0ef00041800001800260160e0e0001707fffffe0060180e1f9980180fce1f8f9780060000c00180ef00041800001800260161e0e0000007feff130160180e1f9980180fce1f8f9780060000c00180ef00041800001800250160e0e0001607fffffe0060180618db001f98c60618d8c00600018003ee00041800001800250170e0e0001607fffffe1060180618db001f98c60618d8c00600018003ee00041800001800260160e0e0001707fffffe0060180618de001818c60618d800060006000180ef00041800001800260161e0e0000007feff130160180618de001818c60618d800060006000180ef00041800001800260160e0e0001707fffffe0060180618db001818c606d8d8000600180018c0ef00041800001800260170e0e0001707fffffe1060180618db001818c606d8d8000600180018c0ef00041800001800260160e0e000170600000600601fcf18d9801fcfcf038f98000f031fc30f80ef00041800001800260161e0e000170600000701601fcf18d9801fcfcf038f98000f031fc30f80ef00041800001800140160e0e00005060060060060dd00041800001800140170e0e00005060060061060dd00041800001800140160e0e00005060198060060dd00041800001800140161e0e00005060198070160dd00041800001800120160e0e000fd06010060dd00041800001800120170e0e000fd06011060dd000418000018001e0b60e01f8f8f981fcf90c000c0ea0005061801860060dd000418000018001e0b61e01f8f8f981fcf90c000c0ea0005061801870160dd000418000018001e0260e018fed8051818d8c000c0ea0005067e07e60060dd000418000018001e0270e018fed8051818d8c000c0ea0005067e07e61060dd000418000018001f0260e018fed8081818dcc00fcf9f8f80ed00fd06010060dd00041800001800200261e018fed8081818dcc00fcf9f8f80ed00fe0602070160dd000418000018001f0a60e01f18d8d81f98dfc018fed800c6ed00fd06010060dd000418000018001f0a70e01f18d8d81f98dfc018fed800c6ed00fd06011060dd000418000018001f0260e018fed808181fd9c018d8d8dfc0ed00fd06010060dd00041800001800200261e018fed808181fd9c018d8d8dfc0ed00fe0602070160dd00041800001800210260e018fed8041818d8c018fed80006ed00050607fe060060dd00041800001800210270e018fed8041818d8c018fed80006ed00050607fe061060dd00041800001800270e60e01f8f8f9fdfd8d8400fcf98cfc6ed00070600000600601f80fe000006e300041800001800270e61e01f8f8f9fdfd8d8400fcf98cfc6ed00070600000701601f80fe000006e3000418000018001e0160e0f500000ced000707fffffe006018c0fe00000ee3000418000018001e0170e0f500000ced000707fffffe106018c0fe00000ee3000418000018002d0860e01fc00000061f80fd0007c000001fc0000006f3000c06aaaaae006018cf8fcfc00606e4000418000018002d0861e01fc00000061f80fd0007c000001fc0000006f3000c06aaaaaf016018cf8fcfc00606e4000418000018002c0260e018fe00020618c0fd0003c0000018fe000006f3000b06aaaaae00601f80d8180006e3000418000018002c0270e018fe00020618c0fd0003c0000018fe000006f3000b06aaaaae10601f80d8180006e3000418000018002f1560e01818cf9f9f98cf8fcf978fc018d8d818cf9f9f80f4000c06aaaaae0060180fcf8f800606e4000418000018002f1561e01818cf9f9f98cf8fcf978fc018d8d818cf9f9f80f4000c06aaaaaf0160180fcf8f800606e4000418000018002e1560e01f98d8d8c61f98d818d8d8c01dd8df98d8d8c606f4000706aaaaae00601818fec00006e3000418000018002e1570e01f98d8d8c61f98d818d8d8c01dd8df98d8d8c606f4000706aaaaae10601818fec00006e3000418000018002f1460e01818dfd8c61b1fd818d818c01ad8d818dfd8c6f3000d06aaaaae0060180fdf9f800f0000e5030418000018002f1461e01818dfd8c61b1fd818d818c01ad8d818dfd8c6f3000d06aaaaaf0160180fdf9f800f0000e503041800001800281560e0180d9818c6d9981818d818c018cfd80d9818c6c6f4000506aaaaae0060dd00041800001800281570e0180d9818c6d9981818d818c018cfd80d9818c6c6f4000506aaaaae1060dd000418000018002f0760e01fc70fd8c398fecf0a980fc018c0dfc70fd8c386f4000706aaaaae00601f80fe00010f80e4000418000018002f0761e01fc70fd8c398fecf0a980fc018c0dfc70fd8c386f4000706aaaaaf01601f80fe00010f80e400041800001800240160e0f400010f80fd00000cf4000706aaaaae006018c0fe000118c0e400041800001800240170e0f400010f80fd00000cf4000706aaaaae106018c0fe000118c0e4000418000018001b0160e0e0000c06aaaaae006018cf8fcfc000c6e4000418000018001b0161e0e0000c06aaaaaf016018cf8fcfc000c6e4000418000018001b0160e0e0000c06aaaaae00601f80d818000180e4000418000018001b0170e0e0000c06aaaaae10601f80d818000180e4000418000018001b0160e0e0000c06aaaaae0060180fcf8f800606e4000418000018001b0161e0e0000c06aaaaaf0160180fcf8f800606e4000418000018001a0160e0e0000706aaaaae00601818fec00018e3000418000018001a0170e0e0000706aaaaae10601818fec00018e3000418000018001c0160e0e0000d06aaaaae0060180fdf9f801fc000e5030418000018001c0161e0e0000d06aaaaaf0160180fdf9f801fc000e503041800001800140160e0e0000506aaaaae0060dd00041800001800140170e0e0000506aaaaae1060dd00041800001800140160e0e0000506aaaaae0060dd00041800001800140161e0e0000506aaaaaf0160dd00041800001800140160e0e0000506aaaaae0060dd00041800001800140170e0e0000506aaaaae1060dd00041800001800150260e000e1020506aaaaae0060dd00041800001800150261e000e1020506aaaaaf0160dd00041800001800150260e000e1da05c6aaaaae0060dd00041800001800150270e000e1da05c6aaaaae1060dd00041800001800980052007f000000fe0288007f000000fe0285007f000000fe02850001150260e001e18f0586aaaaae0060dd00041800001800150261e001e18f0586aaaaaf0160dd00041800001800150260e003e1070506aaaaae0060dd00041800001800150270e003e1070506aaaaae1060dd00041800001800160360e0060fe28f0586aaaaae0060dd00041800001800160361e0060fe28f0586aaaaaf0160dd00041800001800160360e00c1ae2da05c6aaaaae0060dd00041800001800160370e00c1ae2da05c6aaaaae1060dd00041800001800300260e000e1020706aaaaae00601fd8fd000306000006fa00040600000780fd00000efe000a0618000007801800001800300261e000e1020706aaaaaf01601fd8fd000306000006fa00040600000780fd00000efe000a06180000078018000018002c0160e0e0000706aaaaae00600618fa00000efa00040600000cc0fd000006fe000a061800000cc018000018002c0170e0e0000706aaaaae10600618fa00000efa00040600000cc0fd000006fe000a061800000cc01800001800360260e002e1002e06aaaaae0060061f8f978f800e0fc006000fcf8f98cf9f9f80000c0f97800f80060f9f8f9f9f800f8c001800001800360261e002e1002e06aaaaaf0160061f8f978f800e0fc006000fcf8f98cf9f9f80000c0f97800f80060f9f8f9f9f800f8c001800001800370360e01ac0e2000706aaaaae00600618fed823c006180006001818d8ddd8d8c600001f18d8c000c00618d8d8c618c018df001800001800370370e01ac0e2000706aaaaae10600618fed823c006180006001818d8ddd8d8c600001f18d8c000c00618d8d8c618c018df001800001800370360e00f80e2002e06aaaaae00600618dfd81fc0060f8006000f9fd8dadfd8c600000c18d8000fc0061fd8d8c618c018cc001800001800370361e00f80e2002e06aaaaaf01600618dfd81fc0060f8006000f9fd8dadfd8c600000c18d8000fc0061fd8d8c618c018cc001800001800360260e007e1002e06aaaaae00600618d81818000600c0060000d80fd8d818c6c6000c18d80018c0061818cfc6d8c018cc001800001800360270e007e1002e06aaaaae10600618d81818000600c0060000d80fd8d818c6c6000c18d80018c0061818cfc6d8c018cc001800001800370360e00f80e2002e06aaaaae00600618cfd80fc00f1f800f001f8fc0d8cfd8c386000c0f98000fc00f0fd8c0c398c00f8c001800001800370361e00f80e2002e06aaaaaf01600618cfd80fc00f1f800f001f8fc0d8cfd8c386000c0f98000fc00f0fd8c0c398c00f8c001800001800240360e01ac0e2000507fffffe0060f400010f80fe00000cf700010f80fc00041800001800240370e01ac0e2000507fffffe1060f400010f80fe00000cf700010f80fc00041800001800150260e002e100050780001e0060dd00041800001800150261e002e100050780001f0160dd00041800001800140160e0e000050780001e0060dd00041800001800140170e0e000050780001e1060dd00041800001800190660e00200104006e500050780001e0060dd00041800001800190661e00200104006e500050780001f0160dd00041800001800180560e01ac018c0e400050780001e0060dd00041800001800180570e01ac018c0e400050780001e1060dd00041800001800231060e00f801fcf8e1f801f978f8f978f98c0ef00050780001e0060dd00041800001800231061e00f801fcf8e1f801f978f8f978f98c0ef00050780001f0160dd00041800001800220960e007001ac0c618c018fdd802c0ddc0ef00050780001e0060dd00041800001800220970e007001ac0c618c018fdd802c0ddc0ef00050780001e1060dd00041800001800231060e00f8018cfc618c018d818d8d80fdac0ef00050780001e0060dd00041800001800231061e00f8018cfc618c018d818d8d80fdac0ef00050780001f0160dd00041800001800231060e01ac018d8c618c01f9818cfd818d8c0ef00050780001e0060dd00041800001800231070e01ac018d8c618c01f9818cfd818d8c0ef00050780001e1060dd00041800001800231060e0020018cfcf18c018180f80d80fd8c0ef00050780001e0060dd00041800001800231061e0020018cfcf18c018180f80d80fd8c0ef00050780001f0160dd000418000018001c0160e0fa00041800000f80ec00050780001e0060dd000418000018001c0170e0fa00041800000f80ec00050780001e1060dd00041800001800150260e002e100050780001e0060dd00041800001800150261e002e100050780001f0160dd00041800001800160360e01ac0e200050780001e0060dd00041800001800160370e01ac0e200050780001e1060dd00041800001800160360e00f80e200050780001e0060dd00041800001800160361e00f80e200050780001f0160dd00041800001800120260e007e100050780001e007fdaff01f800120270e007e100050780001e107fdaff01f800160360e00f80e200050780001e0060dd00041800001800160361e00f80e200050780001f0160dd00041800001800160360e01ac0e200050780001e0060dd00041800001800160370e01ac0e200050780001e1060dd00041800001800150260e002e100050780001e0060dd00041800001800150261e002e100050780001f0160dd00041800001800140160e0e000050780001e0060dd00041800001800140170e0e000050780001e1060dd00041800001800140160e0e002050780001e0060dd00041800001800140161e0e002050780001f0160dd00041800001800150260e01ae1da05c780001e0060dd00041800001800150270e01ae1da05c780001e1060dd00041800001800150260e00fe18f058780001e0060dd00041800001800150261e00fe18f058780001f0160dd00041800001800130160e0df070480001e0060dd00041800001800130170e0df070480001e1060dd00041800001800150260e00fe18f058780001e0060dd00041800001800150261e00fe18f058780001f0160dd00041800001800150260e01ae1da05c780001e0060dd00041800001800150270e01ae1da05c780001e1060dd00041800001800140160e0e002050780001e0060dd00041800001800140161e0e002050780001f0160dd00041800001800140160e0e000050780001e0060dd00041800001800140170e0e000050780001e1060dd00041800001800110160e0e000050780001e007fdaff01f800110161e0e000050780001f017fdaff01f8000f0160e0e000030780001ed8000138000f0170e0e000030780001ed8100138000f0160e0e000030780001ed8000138000f0161e0e000030780001fd8010138000f0160e0e000030780001ed8000138000f0170e0e000030780001ed8100138000f0160e0e000030780001ed8000138000f0161e0e000030780001fd8010138000f0160e0e000030780001ed8000138000f0170e0e000030780001ed8100138000f0160e0e000030780001ed8000138000f0161e0e000030780001fd8010138000f0160e0e000030780001ed8000138000f0170e0e000030780001ed8100138001e0460e0060006fe00080600000300000600c6ef00030780001ed8000138001e0461e0060006fe00080600000300000600c6ef00030780001fd8010138001a0460e0000006fb000006fd0000c3ef00030780001ed8000138001a0470e0000006fb000006fd0000c3ef00030780001ed8100138001f1160e00e1f9f8018cf8e1f800c18cf8e0fc180f000030780001ed8000138001f1161e00e1f9f8018cf8e1f800c18cf8e0fc180f000030780001fd8010138001f1160e00618c6001dc0c618c00c18d8c618c180f000030780001ed8000138001f1170e00618c6001dc0c618c00c18d8c618c180f000030780001ed8100138001f1160e00618c6001acfc618c00c18d8c618c180f000030780001ed8000138001f1161e00618c6001acfc618c00c18d8c618c180f000030780001fd8010138001e1060e00618c6c018d8c618c0060d98c618c3ef00030780001ed8000138001e1070e00618c6c018d8c618c0060d98c618c3ef00030780001ed8100138001e1060e00f18c38018cfcf18c003070f8f0fc6ef00030780001ed8000138001e1061e00f18c38018cfcf18c003070f8f0fc6ef00030780001fd8010138000f0160e0e000030780001ed8000138000f0170e0e000030780001ed8100138000f0160e0e000030780001ed8000138000f0161e0e000030780001fd8010138000f0160e0e000030780001ed8000138000f0170e0e000030780001ed8100138000f0160e0e0000307fffffed8000138000e0161e0e0000007feffd8010138000f0160e0e0000306aaaaaed8000138000f0170e0e0000306aaaaaed8100138000f0160e0e0000306aaaaaed8000138000f0161e0e0000306aaaaafd8010138000f0160e0e0000306aaaaaed8000138000f0170e0e0000306aaaaaed8100138000f0160e0e0000306aaaaaed8000138000f0161e0e0000306aaaaafd8010138000f0160e0e0000306aaaaaed8000138000f0170e0e0000306aaaaaed810013800110360e00380e2000306aaaaaed800013800110361e00380e2000306aaaaafd801013800100260e006e1000306aaaaaed80001380098005200fe0000017d028800fe0000017d028500fe0000017d02850001100270e006e1000306aaaaaed810013800100260e006e1000306aaaaaed800013800100261e006e1000306aaaaafd801013800100260e00ce1000306aaaaaed800013800100270e00ce1000306aaaaaed810013800100260e006e1000306aaaaaed800013800100261e006e1000306aaaaafd801013800100260e006e1000306aaaaaed800013800100270e006e1000306aaaaaed810013800110360e00380e2000306aaaaaed800013800110361e00380e2000306aaaaafd8010138000f0160e0e0000306aaaaaed8000138000f0170e0e0000306aaaaaed8100138001d0f60e0000600000600c000180307838fc6ee000306aaaaaed8000138001d0f61e0000600000600c000180307838fc6ee000306aaaaafd8010138001d0f60e0000600000600c00018060c0798c3ee000306aaaaaed8000138001d0f70e0000600000600c00018060c0798c3ee000306aaaaaed8100138001e1060e00fdf8f979f8fcf8fd98c180d99c180ef000306aaaaaed8000138001e1061e00fdf8f979f8fcf8fd98c180d99c180ef000306aaaaafd8010138001e1060e0180600d8c618d8d81b0c1f999ac186ef000306aaaaaed8000138001e1070e0180600d8c618d8d81b0c1f999ac186ef000306aaaaaed8100138001e1060e00f860fd80618dfcf9e0c18dfdcc180ef000306aaaaaed8000138001e1061e00f860fd80618dfcf9e0c18dfdcc180ef000306aaaaafd8010138001e1060e000c6d8d806d8d800db0618c198c306ef000306aaaaaed8000138001e1070e000c6d8d806d8d800db0618c198c306ef000306aaaaaed8100138001e1060e01f838fd8038fcfdf99830f819f8606ef000306aaaaaed8000138001e1061e01f838fd8038fcfdf99830f819f8606ef000306aaaaafd801013800130160e0f300000cef000306aaaaaed800013800130170e0f300000cef000306aaaaaed8100138001a0360e000c0fc00051fcf980f9fc0ed000306aaaaaed8000138001a0361e000c0fc00051fcf980f9fc0ed000306aaaaafd801013800190360e000c0fc00041818d81858ec000306aaaaaed800013800190370e000c0fc00041818d81858ec000306aaaaaed8100138001f0d60e00fcf9f8f800f801818d81818ec000306aaaaaef7000020e3000138001f0d61e00fcf9f8f800f801818d81818ec000306aaaaaff7010021e301013800200260e018fed808c000001f98d80f9f86ed000306aaaaaef7000030e300013800200270e018fed808c000001f98d80f9f86ed000306aaaaaef7100030e3100138001f0d60e018d8d8dfc00f80181fd800d8ec000306aaaaaef7000038e3000138001f0d61e018d8d8dfc00f80181fd800d8ec000306aaaaaff7010039e3010138001f0260e018fed8fe00051818d810d806ed000306aaaaaef700003ce3000138001f0270e018fed8fe00051818d810d806ed000306aaaaaef710003ce310013800200e60e00fcf98cfc000001818dfcf9fc6ed000306aaaaaef700003ee300013800200e61e00fcf98cfc000001818dfcf9fc6ed000306aaaaaff701003fe301013800170160e0f500000ced000306aaaaaef700003fe300013800170170e0f500000ced000306aaaaaef710003fe310013800241160e00018060e0000030600c0000006000380f0000306aaaaaef700013f80e400013800241161e00018060e0000030600c0000006000380f0000306aaaaaff701013f81e401013800221060e0001800060000060600c00000030006ef000306aaaaaef7000036e300013800221070e0001800060000060600c00000030006ef000306aaaaaef7100036e310013800221060e018df8e060f800c060fcf9f8f818006ef000306aaaaaef7000003e300013800221061e018df8e060f800c060fcf9f8f818006ef000306aaaaaff7010003e3010138001e0a60e018d8c60618c00c0618fed802c1800cef000306aaaaaed8000138001e0a70e018d8c60618c00c0618fed802c1800cef000306aaaaaed8100138001e1060e01ad8c6061fc00c0618d8d8dfc18006ef000306aaaaaed8000138001e1061e01ad8c6061fc00c0618d8d8dfc18006ef000306aaaaafd8010138001e0a60e01dd8c6061800060018fed802030006ef000306aaaaaed8000138001e0a70e01dd8c6061800060018fed802030006ef000306aaaaaed8100138001f1160e018d8cf0f0fc003060fcf98cfc6000380f0000306aaaaaed8000138001f1161e018d8cf0f0fc003060fcf98cfc6000380f0000306aaaaafd8010138000f0160e0e0000306aaaaaed8000138000f0170e0e0000306aaaaaed8100138002b0160e0fe0010060780030f800610c000061fc000000603fc000b1fc000000600000706aaaaaed8000138002b0161e0fe0010060780030f800610c000061fc000000603fc000b1fc000000600000706aaaaafd8010138002a0160e0fd000a0cc00618400618c0000618fe00010606fc000018fe00070600000d86aaaaaed8000138002a0170e0fd000a0cc00618400618c0000618fe00010606fc000018fe00070600000d86aaaaaed8100138002d0160e0fe00210e0c000c180f9f9ccf98df9818cf9f9f8c0f98cf9798d818cf9f9f80000d86aaaaaed8000138002d0161e0fe00210e0c000c180f9f9ccf98df9818cf9f9f8c0f98cf9798d818cf9f9f80000d86aaaaafd8010138002c0160e0fe0011061f000c1818c61fd8cd861f98d8d8c60c18fdd80bdf98d8d8c600000706aaaaaed8000138002c0170e0fe0011061f000c1818c61fd8cd861f98d8d8c60c18fdd80bdf98d8d8c600000706aaaaaed8100138002d0160e0fe0021060c000c19dfc619dfc7061818dfd8c60c1fd8dfd818d818dfd8c600000d46aaaaaed8000138002d0161e0fe0021060c000c19dfc619dfc7061818dfd8c60c1fd8dfd818d818dfd8c600000d46aaaaafd8010138002d0160e0fe0021060c000618d806d8d80d86d80d9818c6c6180d98180fd80d9818c6c6001986aaaaaed8000138002d0170e0fe0021060c000618d806d8d80d86d80d9818c6c6180d98180fd80d9818c6c6001986aaaaaed8100138002d0160e0fe00210f0c00030fcfc3984fd8c39fc70fd8c3830fc70fd800dfc70fd8c386000f46aaaaaed8000138002d0161e0fe00210f0c00030fcfc3984fd8c39fc70fd8c3830fc70fd800dfc70fd8c386000f46aaaaafd801013800170160e0e900010f80fd00060c000006aaaaaed800013800170170e0e900010f80fd00060c000006aaaaaed810013800290160e0fb000f0607800300001fc00000060000180006fd000a1800001f80000006aaaaaed800013800290161e0fb000f0607800300001fc00000060000180006fd000a1800001f80000006aaaaafd801013800280160e0fa00050cc006000018fe0005060000180006fd000a18000018c0000006aaaaaed800013800280170e0fa00050cc006000018fe0005060000180006fd000a18000018c0000006aaaaaed8100138002a0160e0fb001e0e0c000c18d8d818cf9f9f8018df8f9f800f8f80198f98d8cf98df86aaaaaed8000138002a0161e0fb001e0e0c000c18d8d818cf9f9f8018df8f9f800f8f80198f98d8cf98df86aaaaafd801013800270160e0fb000f061f000c1dd8df98d8d8c60018d8c0c6fd00011b18fcd803c6aaaaaed800013800270170e0fb000f061f000c1dd8df98d8d8c60018d8c0c6fd00011b18fcd803c6aaaaaed8100138002a0160e0fb0015060c000c1ad8d818dfd8c6001ad8cfc6000f8f801e1ffed805dad8c6aaaaaed8000138002a0161e0fb0015060c000c1ad8d818dfd8c6001ad8cfc6000f8f801e1ffed805dad8c6aaaaafd8010138002a0160e0fb0010060c000618cfd80d9818c6c01dd8d8c6c0fe000a1b180fd8d8ddd8c6aaaaaed8000138002a0170e0fb0010060c000618cfd80d9818c6c01dd8d8c6c0fe000a1b180fd8d8ddd8c6aaaaaed8100138002a0160e0fb00100f0c000318c0dfc70fd8c38318d8cfc380fe000a198fc0df8f98d8c6aaaaaed8000138002a0161e0fb00100f0c000318c0dfc70fd8c38318d8cfc380fe000a198fc0df8f98d8c6aaaaafd801013800190160e0f600010f80f200010f80fe000307fffffed800013800190170e0f600010f80f200010f80fe000307fffffed8100138001b0160e0f70000c0fc00041fdf98dfc0f5000306000006d8000138001b0161e0f70000c0fc00041fdf98dfc0f5000306000007d8010138001a0160e0f70000c0fc00030618d8d8f400030607fe06d8000138001a0170e0f70000c0fc00030618d8d8f400030607fe06d8100138001a0160e0f8000a0fcf9f8f800f800618d8d8f400fd06d8000138001c0161e0f8000a0fcf9f8f800f800618d8d8f400fe060007d8010138001b0160e0f8000018fed807c00000061f98df86f500fd06d8000138001b0170e0f8000018fed807c00000061f98df86f500fd06d8100138001a0160e0f8000a18d8d8dfc00f80061b18d8f400fd06d8000138001c0161e0f8000a18d8d8dfc00f80061b18d8f400fe060007d8010138001d0160e0f8000018fed8fe0004061998d806f50003067e07e6d8000138001d0170e0f8000018fed8fe0004061998d806f50003067e07e6d8100138001e0160e0f8000b0fcf98cfc000000618cf9fc6f5000306180186d8000138001e0161e0f8000b0fcf98cfc000000618cf9fc6f5000306180187d801013800100160e0ed00000cf500fd06d800013800100170e0ed00000cf500fd06d8100138000f0160e0e0000306019806d8000138000f0161e0e0000306019807d8010138000f0160e0e0000306006006d8000138000f0170e0e0000306006006d8100138000f0160e0e0000306000006d8000138000f0161e0e0000306000007d8010138000b0060dcff00fed8000138000b0070dcff00fed810013800190460e000003ffeff00eaeaaa06bc000006000006d800013800190461e000003ffeff00eaeaaa06bc000006000007d801013800190460e007003efe0000eaeaaa06bc01c0067fe006d800013800190470e007003efe0000eaeaaa06bc01c0067fe006d810013800190460e01b003efe0000eaeaaa06bc01b006606006d800013800190461e01b003efe0000eaeaaa06bc01b006606007d801013800190460e063fe3efe0000eaeaaa06bcff8c06607fe6d800013800190470e063fe3efe0000eaeaaa06bcff8c06607fe6d810013800190460e180063efe0000eaeaaa06bcc00306606066d800013800190461e180063efe0000eaeaaa06bcc00306606067d801013800980052017d000001960288017d000001960285017d0000019602850001190460e600063efe0000eaeaaa06bcc000c67fe066d800013800190470e600063efe0000eaeaaa06bcc000c67fe066d810013800190460e180063efe0000eaeaaa06bcc003060c0066d800013800190461e180063efe0000eaeaaa06bcc003060c0067d801013800190460e063fe3efe0000eaeaaa06bcff8c060c0066d800013800190470e063fe3efe0000eaeaaa06bcff8c060c0066d810013800190460e01b003efe0000eaeaaa06bc01b0060c0066d800013800190461e01b003efe0000eaeaaa06bc01b0060c0067d801013800190460e007003efe0000eaeaaa06bc01c0060fffe6d800013800190470e007003efe0000eaeaaa06bc01c0060fffe6d810013800190460e000003efe0000eaeaaa06bc000006000006d800013800190461e000003efe0000eaeaaa06bc000006000007d801013800190460e000003ffeff00eaeaaa06bc000006000006d800013800190470e000003ffeff00eaeaaa06bc000006000006d8100138000b0060dcff00fed800013800090061dbffd801013800070060b200013800070070b210013800070060b200013800070061b201013800070060b200013800070070b21001380007007fb2ff01f80007007fb2ff01f80002af00a0008fa00083ff}}{\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 1-2:  The Debug Menu Bar\par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\par \tab \tab }{\f4 While I\rquote m not going to repeat all of that information here, now would be a great time to browse through the section of the ORCA/C reference manual that talks about debugging desktop programs.\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par Problem 1-1.  Change the program so it stops when the mouse is released (not when it is pressed!).\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab Like every other problem in this book, the solution is on the disks that come with the course.  The source code is divided up into lesson folders that match the lesson you are reading; in this case, you want the folder called Lesson.1.  It\rquote s on the disk labeled Disk 1.  The source itself is in a file called Prob.1.1.cc.  The source code for Problem 1-2 will be in a file called Prob.1.2.cc, and so forth.\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Tool Header Files}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Tool Header Files\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You\rquote re probably pretty used to using the include statement to get access to the header files for the C language.  Including stdio.h, for example, should be a well established habit anytime you need to use }{\f6\fs20 printf}{\f4 .  ORCA/C comes with a header file for each of the tools in the Apple IIGS toolbox, and it\rquote s very important that you include the header for any tool you want to use.  To see why, I\rquote m going to step you through what happens when you forget.\par First, let\rquote s assume you\rquote re using something pretty simple \endash  something like }{\f6\fs20 printf}{\f4  in stdio, which is straight-forward enough that a lot of C programmers won\rquote t even bother to include stdio.h, since the program will work either way.  For example, you\rquote ll run into a tool call later in this lesson called }{\f6\fs20 SysBeep}{\f4 .  It just beeps the speaker.  There are no parameters, and nothing is returned, so you might not think you really have to bother with the proper include file.  Well, maybe \endash  try this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 main ()\par \{\par SysBeep();\par \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If you take the time to try and run this program, you\rquote ll find that the linker reports an error, since it can\rquote t find }{\f6\fs20 SysBeep}{\f4 .  That\rquote s because tools are handled very differently from normal library subroutines, like }{\f6\fs20 printf}{\f4 .  Without the proper header file, the C compiler doesn\rquote t know that }{\f6\fs20 SysBeep}{\f4  is really a tool call, and it treats it like a library subroutine.\par Another problem that crops up with tool calls, and for that matter, one that can crop up with any subroutine, is that passing the wrong number or type of parameters can cause the program to crash.  This is one of the most common bugs in C programs, but fortunately, ANSI C gives you a way to avoid this sort of error.  It\rquote s done with prototyped headers.  Prototyped headers tell the compiler how many parameters are in a function and what type of parameters are expected, so the compiler can check to make sure you\rquote re passing the right sort of parameters.  Unfortunately, Apple\rquote s tool header files were designed for an older compiler that did not support prototyped parameters.  ORCA/C is an ANSI C compiler, though, so you can and should use prototyped parameters for everything.\par The C header files for the tools that come with the latest version of ORCA/C (it\rquote s 1.3 as I write this book) are supplied by Apple, and they were developed for an older compiler that did not support prototyped parameters.  We plan to release prototyped tool header files for ORCA/C with the next major update, but you need them now \endash  so we put them on the disks that come with this course.  To use them, all you have to do is copy all of the files from the ORCACDefs folder on the first course disk into the ORCACDefs folder on your hard disk.  You\rquote ll find the ORCACDefs folder on your hard disk tucked away in the Libraries folder; the Libraries folder is in the same folder as ORCA.Sys16.  Be sure and copy the }{\i\f4 files}{\f4  in the ORCACDefs folder, though, not the folder itself \endash  there are other files besides the tool header files on your hard disk, and copying the entire folder with the Finder will delete the other files.\par Finally, ORCA/C has a handy debugging aid called the lint pragma.  When you put the statement\par \par #pragma lint -1\par \par }\pard \qj\widctlpar\adjustright {\f4 in your program the compiler starts to check your program a little more carefully than a standard C compiler would.  Among other things, it tells you if you forgot to prototype a function, or worse yet, forgot to define it altogether.  You\rquote ll see this pragma in every program in this course.  The reason is simple:  I make mistakes, and prefer to have the compiler tell me about them instead of hunting for them after the computer crashes!\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Keyboard Events}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Keyboard Events\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par {\*\bkmkstart bk4}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record\:message}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Detecting a key press was pretty easy; now let\rquote s see how we find out which key was actually pressed.  The ASCII character code for the key that was pressed is stored in the }{\f6\fs20 message}{\f4  field.  Taking a look at the }{\f6\fs20 message}{\f4  field, you see that it\rquote s a long integer, but an ASCII character only uses 7 bits.  The ASCII character is actually stuffed in the least significant byte of the long integer, and the other three bytes are undefined.  The eighth bit of the byte that contains the character is set to 0.\par Putting all of this together, we can grab the character from the }{\f6\fs20 message}{\f4  field like this:\par \par }{\f6\fs20 key = (char) myEvent.message;\par }{\f4 \par The type cast is very important, since it makes sure you are only using the least significant byte of the value.  This may seem like an unimportant technical detail, especially since they are actually zero.  On the other hand, keep in mind that I said they were undefined, not that they were zero.  The word undefined comes right from the toolbox reference manual.  When you see something that\rquote s undefined in the toolbox, that means it isn\rquote t used now, but }{\i\f4 it might be used for something at some point in the future!}{\f4   To a careful programmer, there\rquote s a significant difference between something that\rquote s undefined but happens to be zero, and something that is defined as being zero.  To a not so careful programmer, this means job security: they get to go back after each new release of the system disk and make changes to allow for things that used to be undefined and aren\rquote t any more.\par Whenever the toolbox documentation says something is undefined, write your program so it doesn\rquote t matter what is in those bytes.  If you do, you\rquote ll go through life wondering why I made such a big deal about this point.  If you don\rquote t, you\rquote ll go through life changing your programs each time a new system disk is released.  Like so many things in life, it\rquote s a choice you get to make for yourself.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record\:modifiers}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Event Manager can tell you a lot more about a }{\f6\fs20 keyDownEvt}{\f4  than just what key was pressed.  The other information is in the }{\f6\fs20 modifiers}{\f4  field, which you saw a couple of pages back.  You can tell whether the shift key or shift lock key is down, whether the apple or option key is being pressed, whether a \ldblquote 1\rdblquote  character came from the keyboard or the keypad, and whether the control key was being held down.  For some applications, these differences are crucial, while for others you won\rquote t bother to look at the }{\f6\fs20 modifiers}{\f4  field.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printf}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 I\rquote m going to toss in one more piece of information that is just one of those things you pick up by constantly flipping through manuals.  Buried in the ORCA/C reference manual is the little-known but useful fact that when you start the tools with }{\f6\fs20 startdesk}{\f4 , ORCA/C does some technical magic behind the scenes to make the standard C }{\f6\fs20 printf}{\f4  function and it\rquote s cousins in the standard I/O package work with the graphics screen.  Here\rquote s a program that uses that fact to show what key is pressed and what the modifiers field is set to.  It uses a few tool calls we haven\rquote t discussed yet; we\rquote ll take a look at them in a moment.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Keypress\par *\par * Show keypresses on the desktop.\par *\par ***************************************************************/\par \par #pragma lint -1\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <stdio.h>\par #include <orca.h>\par #include <Event.h>\par #include <QuickDraw.h>\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 \par BOOLEAN done;                           /* are we done, yet? */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 EventRecord myEvent;                    /* event record */\par \par /***************************************************************\par *\par * HandleKeyPress\par *\par * Handle a key down event.\par *\par ***************************************************************/\par \par void HandleKeyPress (void)\par \par \{\par Rect r;                                /* rectangle for the area to erase */\par \par SetSolidPenPat(black);                  /* erase any old stuff */\par r.h1 = 0;    r.h2 = 100;\par r.v1 = 0;    r.v2 = 40;\par PaintRect(&r);\par SetForeColor(white);                    /* draw white text ... */\par SetBackColor(black);                    /* ...on a black background */\par MoveTo(10,10);                          /* write the key at this location */\par putchar((char) myEvent.message);\par putchar('\\n');\par printf("%d\\n", (int) myEvent.modifiers);\par \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Main program\par *\par ***************************************************************/\par \par int main (void)\par \par \{\par startdesk(640);\par PenNormal();\par done = FALSE;\par while (!done) \{\par    if (GetNextEvent(everyEvent, &myEvent))\par       if (myEvent.what == mouseUpEvt)\par          done = TRUE;\par       else if (myEvent.what == keyDownEvt)\par          HandleKeyPress();\par    \}\par enddesk();\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 1-2: Handling a Key Press Event\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 QuickDraw II}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson is about starting the tools and using the Event Manager, but the tools all have to be used together to create useful programs.  This program uses a few calls from QuickDraw II, the graphics package for the Apple II}{\f4\fs20 GS}{\f4 .  We won\rquote t get a chance to study QuickDraw in detail for quite a while, but you will need to use a few calls here and there.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PaintRect}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen color}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSolidPenPat}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PenNormal}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This program is writing text on the graphics screen.  I mentioned that }{\f6\fs20 printf}{\f4  can write text, but it isn\rquote t quite as simple as writing text to the text screen.  For one thing, the graphics screen doesn\rquote t scroll, so we have to clear some space (in case there were already some characters on the screen).  QuickDraw\rquote s }{\f6\fs20 PaintRect}{\f4  call will paint all of the pixels in a rectangle; we\rquote ll use this to clear part of the screen.  There are two pieces of information }{\f6\fs20 PaintRect}{\f4  needs to fill in the rectangle: the color to use, and the location of the rectangle.  }{\f6\fs20 PaintRect}{\f4  uses something called the pen color to fill in the rectangle; }{\f6\fs20 SetSolidPenPat}{\f4  sets the pen color to one of the solid colors.  You can use a number, like 0 for black or 3 for white, or you can use one of the names from the tool headers files.  We\rquote ll see exactly how you can read the tool header files later, but for now, you can trust me about }{\f6\fs20 black}{\f4  and }{\f6\fs20 white}{\f4  being properly defined in the header files.  Finally, any time you draw on the graphics screen, there are several parameters that effect the way the drawing is done.  The }{\f6\fs20 PenNormal}{\f4  call you see right after the call to }{\f6\fs20 startdesk}{\f4  sets up all of those parameters in a \ldblquote normal\rdblquote  way.  You will learn what the parameters are, and what \ldblquote normal\rdblquote  means, when we go over QuickDraw in detail.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 point}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 QuickDraw uses two main data structures to deal with locations on the screen, the point and the rectangle.  In both cases 0,0 is at the top left corner.  For a rectangle, you need to give a top, bottom, left and right side; the actual names used in a rectangle structure are }{\f6\fs20 h1}{\f4  (left), }{\f6\fs20 h2}{\f4  (right), }{\f6\fs20 v1}{\f4  (top) and }{\f6\fs20 v2}{\f4  (bottom)..  In our program, the finished rectangle is passed to }{\f6\fs20 PaintRect}{\f4  as a parameter.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MoveTo}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetForeColor}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetBackColor}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As with clearing a rectangle, QuickDraw needs to know two things to draw text, other than the text itself.  The position of the text will be the current pen position, which we set using }{\f6\fs20 MoveTo}{\f4 .  As with most QuickDraw calls, instead of passing a point as a structure, we pass the two individual values as parameters.  The color of the text is set with the }{\f6\fs20 SetForeColor}{\f4  call, while the color of the background is set with }{\f6\fs20 SetBackColor}{\f4 .\par Since the point of this program is to draw characters and modifiers on the screen, we don\rquote t want to use a }{\f6\fs20 keyDownEvt}{\f4  to stop the program.  Instead, the program waits for the }{\f6\fs20 mouseUpEvt}{\f4  that occurs at the end of a mouse click.\par \par Problem 1-2.  Change the program so it reports auto-key events as well as the initial key press.  Try the program, changing the repeat key speed from your control panel to see what effect this has.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkend bk4}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:keyboard}{\rxe bk4}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Mouse Events}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Mouse Events\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk5}\par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextEvent}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Mouse events are pretty simple: you get one event when the mouse button is pushed down, and another when it is released.  Each time you call }{\f6\fs20 GetNextEvent}{\f4  you also get back the current position of the mouse in the event record, whether or not a mouse event has occurred.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LineTo}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The program in listing 1-3 puts this information to use to create a simple sketching program.  It also uses one new QuickDraw call, }{\f6\fs20 LineTo}{\f4 .  }{\f6\fs20 LineTo}{\f4  works pretty much like }{\f6\fs20 MoveTo}{\f4 , but instead of just moving the pen, it draws a line from the current location of the pen to the new location you pass as parameters to }{\f6\fs20 LineTo}{\f4 .  The plan is to move around until the mouse is pressed, then draw lines until the mouse button is released, again.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InitCursor}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 cursor}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Of course, there\rquote s the minor matter of where the mouse is at any given time.  Desktop programs generally use the arrow symbol to show where the mouse is pointing; the QuickDraw call }{\f6\fs20 InitCursor}{\f4  sets up the arrow cursor and tells the toolbox to move it around for us.  QuickDraw is also smart enough not to draw on top of the arrow.  All of this work is done behind the scenes for us; all we have to do is remember to put that one, simple call to }{\f6\fs20 InitCursor}{\f4  in the program, right after the tools are initialized.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Sketch\par *\par * A simple sketch program.\par *\par ***************************************************************/\par \par #pragma lint -1\par \par #include <stdio.h>\par #include <orca.h>\par #include <QuickDraw.h>\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <Event.h>\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 BOOLEAN done;                           /* are we done, yet? */\par BOOLEAN mouseIsDown;                    /* is the mouse down? */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 EventRecord myEvent;                    /* event record */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * BlackScreen\par *\par * Paint the entire screen black.\par *\par ***************************************************************/\par \par void BlackScreen (void)\par \par \{\par Rect r;                                 /* screen rectangle */\par \par r.h1 = 0;    r.h2 = 640;\par r.v1 = 0;    r.v2 = 200;\par SetSolidPenPat(black);\par PaintRect(&r);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Main program\par *\par ***************************************************************/\par \par int main (void)\par \par \{\par startdesk(640);                         /* start the tools */\par PenNormal();                            /* set up normal pen parameters */\par InitCursor();                           /* start the arrow cursor */\par BlackScreen();                          /* paint the screen black */\par SetSolidPenPat(white);                  /* draw in white */\par SetPenMode(modeCopy);                   /* draw in copy mode */\par done = FALSE;                           /* we aren't done, yet */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 mouseIsDown = FALSE;                    /* the mouse is not down */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 while (!done) \{\par                                         /* handle the events */\par    if (GetNextEvent(everyEvent, &myEvent))\par       if (myEvent.what == keyDownEvt)\par          done = TRUE;\par       else if (myEvent.what == mouseDownEvt)\par          mouseIsDown = TRUE;\par       else if (myEvent.what == mouseUpEvt)\par          mouseIsDown = FALSE;\par                                         /* draw or move the mouse */\par    if (mouseIsDown)\par       LineTo(myEvent.where.h, myEvent.where.v);\par    else\par       MoveTo(myEvent.where.h, myEvent.where.v);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 enddesk();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 1-3: Sketch program\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 1-3.  Add color to the sketch program.  To do this, when a key is pressed, check to see if it is a '0', '1', '2' or '3', and if so, set the pen color to the same value.  For any other key, quit.\par Color 3 will be pure white, and color 0 will be pure black, but colors 1 and 2 will vary a bit.  This is caused by dithering, something you will learn to use to your benefit later in the course.  For now, just file it away as an interesting phenomenon.\par You can add even more color, handling 16 different colors, by using 320 mode graphics.  The only changes you have to make to the program are to change the parameter of }{\f6\fs20 startdesk}{\f4  from 640 to 320, change the screen width in }{\f6\fs20 BlackScreen}{\f4  to 320 (this isn\rquote t strictly necessary, but is still good form) and allow more keys for the other 12 colors.\par \par Problem 1-4.  Write a program that prints the mouse position on the screen.  Use this to explore the coordinate system used by the toolbox.  (In other words, move the mouse around and make sure you understand what numbers to use to put the mouse in a particular place.)\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkend bk5}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:mouse}{\rxe bk5}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using Appendix A}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using Appendix A\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You\rquote ve learned a lot about the toolbox in this lesson, but it\rquote s fair to ask where some of this information comes from.  How did I know what all of the flags were in the }{\f6\fs20 modifiers}{\f4  variable?  How did I know that I could use }{\f6\fs20 everyEvent}{\f4  as a parameter to }{\f6\fs20 GetNextEvent}{\f4 ?  The rest of this lesson deals with just that issue.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolbox reference manuals}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 A while back I gave a few statistics about the size of the toolbox reference manuals that the folks at Apple Computer wrote to describe the tools in the toolbox.  Listening to the statistics about that four volume tome, you might have wondered how anyone could ever learn all there is to know about the toolbox.  The answer, once you know it, is really pretty obvious: no one does.  Just as a writer doesn\rquote t start by memorizing the Oxford English Dictionary, a toolbox programmer doesn\rquote t start by memorizing }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference}{\f4 .  Instead, just like the writer, a toolbox programmer learns how to find things in the toolbox reference manuals, and learns the basics about how to use the toolbox.  This course covers all of the basics about how the toolbox is organized and used, but you will still need the complete set of toolbox reference manuals to be any good at programming the toolbox.\par On the other hand, you may not be ready to run right out to your local bookstore and pick up the entire set of reference books for the Apple II}{\f4\fs20 GS}{\f4 .  Fair enough.  Just keep in mind that someday you will need them, just as a writer knows he will need a good dictionary.  Until that time, you can get by very nicely with Appendix A, which is our abridged toolbox reference manual.  Appendix A catalogs all of the tool calls used anywhere in this course.  Like a pocket dictionary that covers the most common English words, Appendix A does not try to cover all of the toolbox, just the most commonly used parts.  It also doesn\rquote t cover all aspects of the tools listed, but if the description of a tool call is incomplete, Appendix A says so very clearly.\par I keep comparing the toolbox reference manuals to a dictionary, and I guess that\rquote s because the way the two are used is really quit a lot alike.  Well, here goes again.  One of the little tricks I\rquote ve been taught for increasing my vocabulary is to keep a good dictionary handy when I read a book that is using words I\rquote m not familiar with.  Well, that\rquote s also the best way to use Appendix A.  Each time you see a tool call you aren\rquote t familiar with, flip back to Appendix A and read the description.  Among other things, you\rquote ll find a lot more information about most of the tool calls than we actually talk about in the text.  You\rquote ll also get comfortable with how Appendix A is written and organized, plus the sort of information you can find there.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using the Toolbox Reference Manuals}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using the Toolbox Reference Manuals\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolbox reference manuals}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you already have the toolbox reference manuals, everything I just said about Appendix A applies to them, too.  About the only thing you have to keep in mind is that the toolbox reference manuals list the tool calls using K&R style parameters, while Appendix A and the prototyped tool header files both use prototyped function parameters.  It shouldn\rquote t be any problem at all to figure out what the prototyped parameter would look like from what the reference manuals list, though, since they show the function\rquote s parameters, too.\par Just in case you will be using the toolbox reference manuals, though, let\rquote s take a look at how they are organized.  We\rquote ll do that by looking at the most complicated tool call we\rquote ve made so far:  }{\f6\fs20 GetNextEvent}{\f4 .  There are two ways to see how to call }{\f6\fs20 GetNextEvent}{\f4  from the toolbox reference manuals.  Since you may like one better than the other, while the next guy may like the other, I\rquote ll cover both.\par The simplest and most direct way to see how a call is made is to look at the C declaration.  Here\rquote s the information from page 7-39 of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 1.}{\f4 \par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextEvent}}}{\v\f4 \par }{\f6\fs20 extern pascal Boolean GetNextEvent(eventMask,eventPtr)\par Word eventMask;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 EventRecordPtr eventPtr;\par }{\f4 \par That\rquote s very, very close to the prototyped version in the Event.h header file:\par \par }{\f6\fs20 extern pascal Boolean GetNextEvent(Word, EventRecordPtr);\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 In fact, the only difference is that Event.h uses the types for the parameters.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The second major source of information is the stack diagram that you will find with each tool call.  The stack diagram for }{\f6\fs20 GetNextEvent}{\f4  looks like this:\par \par }\pard \qc\fi360\widctlpar\adjustright {{\pict{\*\picprop\shplid1027{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex67\picscaley67\piccropl0\piccropr0\piccropt0\piccropb0\picw504\pich184\picwgoal10080\pichgoal3680\macpict\bliptag-602582132\blipupi72{\*\blipuid dc15538ca6e831b489704b39ad3f2a92}038affffffff00b701f71101a00082a10096000c02000000020000000000000001000a0000000e000c00602c000c00150948656c7665746963610300150d000a2b0f091150726576696f757320636f6e74656e7473a00097a10096000c02000000020000000000000001000a0017001b002300522b0f1709776f72647370616365a0009701000affffffff00b701f730001400010027006ea10096000c01000000020000000000000001000a00170091002301692c000800140554696d65730300140401297405576f7264200400291b12d020537061636520666f7220726573756c74a00097a0008c01000affffffff00b701f730003800010054006e2200450001090022004500640900a0008da10096000c02000000020000000000000001000a003f001d004b00500300152800480025076576656e507472a00097a10096000c01000000020000000000000001000a003f0091004b01b90300140401296d054c6f6e6720040029183fd020504f494e54455220746f20746865206576656e74207265636f726420696e20776869636820746865206576656e742077696c6c20626520706c61636564a0009701000affffffff00b701f7220002006d005aa10096000c02000000020000000000000001000a0029001b003500520300152800320020086576656e4d61736ba0009701000affffffff00b701f730002600010039006ea10096000c01000000020000000000000001000a00290091003501690300140401297205576f7264200400291b31d020537065636966696573207768696368207479706573206f66206576656e747320617265206f6620696e746572657374a0009701000affffffff00b701f72200020001005aa10096000c02000000020000000000000001000a0087000e00930060030015280090000f1150726576696f757320636f6e74656e7473a00097a10096000c02000000020000000000000001000a009e000e00aa00602b04170e68616e646c654576656e466c6167a0009701000affffffff00b701f730009b000100ae006ea10096000c01000000020000000000000001000a009e009100aa01f60300140401297f05576f7264200400291b47d020424f4f4c45414e3b2054525545206966206576656e742073686f756c642062652068616e646c6564206279206170706c69636174696f6e2c2046414c5345206966206e6f74a0009701000affffffff00b701f7220089006d002d2200890001002da00083ff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 1-3:  Stack Diagram for }{\f6\fs20 GetNextEvent}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextEvent}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s a wealth of information here, but it does take some practice and a knowledge of how C passes parameters to get much out of the stack diagram.  The top diagram shows the stack right before the call to }{\f6\fs20 GetNextEvent}{\f4 .  }{\f6\fs20 GetNextEvent}{\f4  only has two parameters, but there are three things on the stack.  That\rquote s because }{\f6\fs20 GetNextEvent}{\f4  returns a value; it is a function.  The toolbox expects C to put some space on the stack before making the tool call, and ORCA/C does just that.  The }{\f6\fs20 wordspace}{\f4  area is filled in with the function return value, labeled }{\f6\fs20 handleEventFlag}{\f4  in the lower part of the stack diagram.\par The parameters themselves are read from top to bottom.  The first parameter for }{\f6\fs20 GetNextEvent}{\f4  is the event mask, and that\rquote s the one that appears on the stack first.  The stack diagram only shows how big the parameter is, but in most cases, the type of the parameter is pretty obvious.  For example, a character, integer, and boolean value all take up two bytes on the stack when C passes them as a parameter (that tidbit can be found in your ORCA/C reference manual), but it\rquote s pretty obvious that the event mask isn\rquote t a character or boolean.\par One of those subtle little points that can sneak up on you, especially when you\rquote re using the older K&R style parameters, is the way structures are passed.  When you call a function and pass the structure itself, C actually pushes all of the values in the structure on the stack.  In almost every case, what the toolbox really wants is a pointer to the structure, not the structure itself.  That\rquote s true with the second parameter to GetNextEvent, and that\rquote s why you see &myEvent in the sample programs (passing the address of the event record) rather than just myEvent (which would stuff the whole event record onto the stack).  The only place in this course you\rquote ll see an actual structure passed as a value, rather than as a pointer, is in the Font Manager, and I\rquote ll be sure to mention that fact when we get there.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SysBeep}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PtInRect}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Problem 1-5.  The Miscellaneous Toolbox has a call called }{\f6\fs20 SysBeep}{\f4  that makes the familiar error beep.  QuickDraw II has a call called }{\f6\fs20 PtInRect}{\f4  that tests to see if a point is in a given rectangle.  Use these calls to create a program that beeps continually any time the mouse is inside of a rectangle that extends from 50 to 150 vertically, and 160 to 480 horizontally.  Set the program up so it quits when you press any key.\par Use an initializer to set up the rectangle.  To do that, you\rquote ll have to know what order the four edges appear in in the }{\f6\fs20 Rect}{\f4  structure.  You can find that information in Appendix A or in the tool.h header file.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In this lesson, we\rquote ve covered the basics of starting the tools and setting up an event driven program.  You\rquote ve learned how to use the ORCA/C }{\f6\fs20 startdesk}{\f4  and }{\f6\fs20 enddesk}{\f4  functions to start up and shut down the tools.  You\rquote ve learned how to use the Event Manager\rquote s }{\f6\fs20 GetNextEvent}{\f4  call to create an event driven program, and how to use the keyboard and mouse from a desktop program.  Along the way, you\rquote ve also started to learn to use other reference sources, like Appendix A or the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference}{\f4 , the ORCA/C reference manual, and the toolbox header files.\par Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 GetNextEvent\tab InitCursor\tab LineTo\tab MoveTo\par PaintRect\tab PenNormal\tab PtInRect\tab SetBackColor\par SetForeColor\tab SetPenMode\tab SetSolidPenPat\tab SysBeep\par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 2 \endash  What's on the Menu?}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 2 \endash  What\rquote s on the Menu?}{\pard\plain \keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 2 \endash  What\rquote s on the Menu?\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 {\*\bkmkstart bk13}This lesson deals with creating and using menus.  You\rquote ll learn how to create a system menu bar, and how to make use of the system menu bar in your programs.  In the process, you will learn a new way to handle events, using }{\f6\fs20 TaskMaster}{\f4  to take care of a lot of detailed work for you, and you\rquote ll learn how to create a program that can be used with desk accessories.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Setting Up A Menu Bar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Setting Up A Menu Bar\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Menu bars are one of the most distinctive features of an Apple program.  These days, menu bars have been copied by all sorts of systems, but the pull-down menu bar of the Apple interface is still the champ when it comes to completeness, flexibility, ease of use, and perhaps most important of all, consistency.  That last point is one you\rquote ll see over and over in the course.  Consistency is a valuable and often overlooked trait of the Apple desktop interface.  When you can learn how to use a menu bar once, in one program, and instantly understand how to use any menu bar in any program on a Macintosh, Apple II}{\f4\fs20 GS}{\f4 , or even the old Lisa computer... well, that\rquote s a big advantage over learning how to use a new user interface each time you pick up a new program, which is exactly what you had to do before Apple created their standard interface for all programs.\par Getting back to the topic, this lesson is about menu bars \endash  how to create them and how to use them.  Menus are created and manipulated using the Menu Manager, a tool we haven\rquote t used up to this point.  To understand how to create a menu bar, we\rquote ll start by looking at how menus are organized by the Menu Manager.  Take a look at the menu bar in Figure 2.1.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1028{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw340\pich254\picwgoal6800\pichgoal5080\macpict\bliptag-373072443\blipupi72{\*\blipuid e9c35dc518f74fd912dfd8feaa0cc576}0dd40000000000fe01541101a00082a0008e01000a000000000240030898002c0000000000f001580000000000f001540000000000f00154000102d50002d50007003fd8ff01c00007003fd8ff01c00007003fd8ff01c00007003fd8ff01c00007003fd8ff01c00007003fd8ff01c0000c003ff8000001fcff00f0e6000c003ff8000001fcff00f0e60010003ffe0000e0fc000001fcff00f0e60010003ffe0000e0fc000001fcff00f0e60014103f000003c0001f18700001ff07e73ffff0e60014103f000003c0001f18700001ff07e73ffff0e60014103f0000fcf8001800300001ff3fe7fcfff0e60014103f0000fcf8001800300001ff3fe7fcfff0e60014103f0003fff0001838307801ff3f06383ff0e60014103f0003fff0001838307801ff3f06383ff0e60014103f0003ffe0001e1830cc01ff0e673cfff0e60014103f0003ffe0001e1830cc01ff0e673cfff0e60014103f0003fffc00181830fc01ff3e673cfff0e60014103f0003fffc00181830fc01ff3e673cfff0e60014103f0001fff800181830c001ff3e673c9ff0e60014103f0001fff800181830c001ff3e673c9ff0e60014103f0000fbe000183c787801ff07061e3ff0e60014103f0000fbe000183c787801ff07061e3ff0e6000c003ff8000001fcff00f0e6000c003ff8000001fcff00f0e6000c003ff8000001fcff00f0e6000c003ff8000001fcff00f0e60007003fd8ff01c00007003fd8ff01c0000f003ef802010380f8000003ed02ff000d003cf800010180f8000003eb000f003cf820012180f8000003ed20ff000d003cf800010180f8000003eb0015003ef80205038001980018fe00020187e3ed02ff0013003cf80005018001980018fe00020187e3eb0016003cf82005218001980018fe0003010063e0ee20ff0014003cf80005018001980018fe0003010063e0ec0016003ef8020c03800199f0f8f0000006c0c3e2ee02ff0014003cf8000c01800199f0f8f0000006c0c3e0ec0016003cf82002218001fe9906980000086183e0ee20ff0014003cf80002018001fe9906980000086183e0ec0016003ef80202038001fe9906980000084303e2ee02ff0014003cf80002018001fe9906980000084303e0ec0016003cf82002218001fe9906980000096603e0ee20ff0014003cf80002018001fe9906980000096603e0ec0016003ef8020c038000f198f8f0000006c7e3e2ee02ff0014003cf8000c018000f198f8f0000006c7e3e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec0010003ef802010380f8000103e2ee02ff000e003cf800010180f8000103e0ec000e003cf8200021f6ff00e0ee20ff000c003cf8000001f6ff00e0ec0010003ef802010380f8000103e2ee02ff000e003cf800010180f8000103e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec0014003ef80203038000f0fc0003018663e2ee02ff0012003cf80003018000f0fc0003018663e0ec0016003cf820052180019800c0fe0003010663e0ee20ff0014003cf800050180019800c0fe0003010663e0ec0016003ef802050380018199f0fe000306c3c3e2ee02ff0014003cf800050180018199f0fe000306c3c3e0ec0016003cf820052180018198c0fe0003086183e0ee20ff0014003cf800050180018198c0fe0003086183e0ec0016003ef802050380018198c0fe00030843c3e2ee02ff0014003cf800050180018198c0fe00030843c3e0ec0016003cf820052180019998d8fe0003096663e0ee20ff0014003cf800050180019998d8fe0003096663e0ec0016003ef80205038000f0f870fe000306c663e2ee02ff0014003cf80005018000f0f870fe000306c663e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec0010003ef802010380f8000103e2ee02ff000e003cf800010180f8000103e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec000e003ef8020003f6ff00e2ee02ff000c003cf8000001f6ff00e0ec000e003cf8200021f6ff00e0ee20ff000c003cf8000001f6ff00e0ec0014003ef8020303ffff0ffcff03fe7c3fe2ee02ff0012003cf8000301ffff0ffcff03fe7c3fe0ec0014003cf8200321fffe67fcff03fef99fe0ee20ff0012003cf8000301fffe67fcff03fef99fe0ec0016003ef8020c03fffe7f0e0e67fffff939ffe2ee02ff0014003cf8000c01fffe7f0e0e67fffff939ffe0ec0016003cf8200c21fffe7e666667fffff799ffe0ee20ff0014003cf8000c01fffe7e666667fffff799ffe0ec0016003ef8020c03fffe7e666647fffff7b9ffe2ee02ff0014003cf8000c01fffe7e666647fffff7b9ffe0ec0016003cf8200c21fffe66666727fe7ff6999fe0ee20ff0014003cf8000c01fffe66666727fe7ff6999fe0ec0016003ef8020c03ffff0f0e0ee7febff93c3fe2ee02ff0014003cf8000c01ffff0f0e0ee7febff93c3fe0ec0016003cf8200021feff04fe7f0ffedffeff00e0ee20ff0014003cf8000001feff04fe7f0ffedffeff00e0ec0013003ef8020003fbff01feeffeff00e2ee02ff0011003cf8000001fbff01feeffeff00e0ec0013003cf8200021fbff01fef7feff00e0ee20ff0011003cf8000001fbff01fef7feff00e0ec0013003ef802010380fb0004f8000003e2ee02ff0011003cf800010180fb0004f8000003e0ec0013003cf820012180fb0004fc000003e0ee20ff0011003cf800010180fb0004fc000003e0ec0015003ef80203038001f0fd0004fe018633e2ee02ff0013003cf80003018001f0fd0004fe018633e0ec0016003cf8200c218001980000c000d8010633e0ee20ff0014003cf8000c018001980000c000d8010633e0ec0016003ef8020c03800198f8f1f0f00c06c633e2ee02ff0014003cf8000c01800198f8f1f0f00c06c633e0ec0016003cf8200c218001f19980c19800086363e0ee20ff0014003cf8000c018001f19980c19800086363e0ec0016003ef8020c0380018198f0c1f800084363e2ee02ff0014003cf8000c0180018198f0c1f800084363e0ec0016003cf8200c218001819818d980000961c3e0ee20ff0014003cf8000c018001819818d980000961c3e0ec0016003ef8020c03800180f8f070f00006c1c3e2ee02ff0014003cf8000c01800180f8f070f00006c1c3e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec0010003ef802010380f8000103e2ee02ff000e003cf800010180f8000103e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec0010003ef802010380f8000103e2ee02ff000e003cf800010180f8000103e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec0013003ef80204038000f0e0fb000103e2ee02ff0011003cf80004018000f0e0fb000103e0ec0013003cf820042180019860fb000103e0ee20ff0011003cf800040180019860fb000103e0ec0016003ef802070380018060f0f9b0fe000103e2ee02ff0014003cf800070180018060f0f9b0fe000103e0ec0016003cf8200721800180619999c0fe000103e0ee20ff0014003cf8000701800180619999c0fe000103e0ec0016003ef802070380018061f99980fe000103e2ee02ff0014003cf800070180018061f99980fe000103e0ec0016003cf820072180019861819980fe000103e0ee20ff0014003cf800070180019861819980fe000103e0ec0016003ef80202038000fef001f980fe000103e2ee02ff0014003cf80002018000fef001f980fe000103e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec0010003ef802010380f8000103e2ee02ff000e003cf800010180f8000103e0ec0010003cf820012180f8000103e0ee20ff000e003cf800010180f8000103e0ec000e003ef8020003f6ff00e2ee02ff000c003cf8000001f6ff00e0ec000e003cf720003ff7ff00e0ee20ff000c003cf700001ff7ff00e0ec0006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60098002c00f0000000fe015800f0000000fe015400f0000000fe0154000106003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60006003ed802ff0004003cd60006003cd820ff0004003cd60002d50002d500a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 2-1:  Typical Menu Bar\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Looking at this menu bar, it\rquote s easy to understand how menus are organized.  Just as with the physical menu bar you use in a program, the Menu Manager sets up the menu bar in a hierarchy.  At the top level you have the menu bar itself.  A menu bar is made up of several menus; these are the names and symbols you see written across the top of the menu bar.  A menu is more than just the name at the top, though \endash  it is also a list of menu items.  At the bottom level, these menu items make up the menu.  So, to review, a typical menu bar consists of the menu bar itself, which contains several menus, each of which contain several menu items.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 system menu bar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Later on we\rquote ll take a look at some variations on this theme, some of which are pretty easy to add to your programs and some of which take a lot of skill, and probably some assembly language.  There is one point I\rquote d like to bring up here, though:  so far, we\rquote ve said absolutely nothing about }{\i\f4 where}{\f4  the menu bar goes.  When you think of a menu bar, you no doubt think of the white bar at the top of your screen when you run a desktop program.  That\rquote s natural enough, since almost all menu bars you will ever see will be right there, at the top of the screen.  That menu bar is called the system menu bar, and it\rquote s the one all complete desktop programs have.  The Menu Manager isn\rquote t picky, though, and you can create other menu bars if you want to.  You can create several different system menu bars, and switch between them, or you can even put a menu bar in a window.  Most of the time the system menu bar is the only one you will use, though, and it\rquote s the only one we\rquote ll actually use in the programs in this course.\par Now that you know how menu bars are organized, let\rquote s take a look at how they are created.  When you start the Memory Manager, you get a system menu bar for free, whether you end up using it or not.  In fact, you saw this in the last lesson.  Even though the programs we wrote in Lesson 1 did not use menus, there was still a white menu bar at the top of the screen when your programs ran.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewMenu}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InsertMenu}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Desk Manager}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Filling in the menu bar is a multi-step process.  You start with a series of calls to }{\f6\fs20 NewMenu}{\f4 , which takes a menu definition you create, and }{\f6\fs20 InsertMenu}{\f4 , which places the new menu in the system menu bar.  After all of the menus have been created and inserted into the menu bar, you make a few more calls to tell the Menu Manager to do some housekeeping; this is when the Menu Manager figures out how big the menus are, and so forth.  You also make a call to the Desk Manager to fill in any New Desk Accessories (NDAs) that the tools can find, and finally, you make a Menu Manager call to draw the new menu bar.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 By far the most complicated of these steps is creating the initial record that is passed to }{\f6\fs20 NewMenu}{\f4  to create a new menu for the menu bar.  This record is actually a multi-line character string, with one line for the menu name, and one additional line for each of the items that will be in the menu when you pull it down.  Let\rquote s start by looking at the C code to create one of these menus, and then we\rquote ll pull it apart piece by piece to find out how all of this works.\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 menuHand = NewMenu(                     /* create the edit menu */\par    ">> Edit \\\\N3\\r"\par    "--Undo\\\\N250\\r"\par    "--Cut\\\\N251\\r"\par    "--Copy\\\\N252\\r"\par    "--Paste\\\\N253\\r"\par    "--Clear\\\\N254\\r"\par    ".\\r");\par InsertMenu(menuHand, 0);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewMenu}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dynamic memory}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This menu definition comes from the Frame.cc program, from the ORCA/C samples disk.  I\rquote ve modified the menu a bit, taking out some advanced features like keyboard equivalents and separators; we\rquote ll add those back later in the lesson.  Other than those simplifications, though, it\rquote s a pretty typical edit menu \endash  more typical than you probably ever thought, as you\rquote ll find out later in this lesson.  As you can see, the main part of the work involves creating a long string; we\rquote re doing that here with the aid of a handy feature of the C language: successive string constants are automatically combined to form a single, long string.  We could put the whole thing on one line, but it\rquote s a little easier to read this way.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The menu string itself is made up of a series of lines.  In this program, I used return characters to end each line.  In C, you can get a return character with the escape sequence \\r.  The Menu Manager also lets you use the null character to end a line, but because of the way C handles strings internally, it\rquote s a little easier for us to use the return character.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu title}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Each menu has to have at least two lines, one for the menu itself, and one at the end of the line that just has a period.  The Menu Manager looks for that last period to mark the end of the menu list, and if you forget it, the Menu Manager will happily romp and stomp through memory looking for the end of the list.  As I\rquote m sure you realize, that\rquote s a bad thing.\par The line that defines the menu itself is }{\f6\fs20 ">> Edit \\\\N3"}{\f4 .  This line actually has three separate parts.  The first is a two-character sequence, }{\f6\fs20 ">>"}{\f4 .  You have to start the menu line with these two characters; the Menu Manager uses them both to mark the start of the menu, and later makes use of the two bytes of memory that the characters occupy for some internal housekeeping.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu title}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The second part of the menu string is the name of the menu itself, }{\f6\fs20 " Edit "}{\f4 .  You can pick pretty much anything you want for a menu name, as long as it doesn\rquote t include a backslash character.  It may seem a bit strange to include spaces in the name of the menu, but there\rquote s actually a very good reason for including them: when the Menu Manager creates the text for the menu bar itself, it crams all of the characters from all of the menu names together on the menu bar.  If you don\rquote t put spaces around the name of the menu, all of the menu names get shoved together.  The reason for putting the same number of spaces to the left and right of the menu name has to do with the way menu names are highlighted.  When you pull down a menu, the Menu Manager highlights the name of the menu.  The spaces are a part of that name, so it\rquote s a good idea to put the same number of spaces on the left and right sides of the menu name; if you don\rquote t, the highlighted menu names will look lopsided.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu control characters}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last part of the menu name string is a set of control characters, in this case }{\f6\fs20 "\\N3"}{\f4 .  If you look, the string actually has two \\ characters, not one.  That\rquote s because C uses the \\ character as the start of an escape sequence, so to get one \\ character in the actual string, we need to put two \\ characters in the source file.\par The control character field always starts with the backslash character, which is why you can\rquote t use a backslash character as part of a menu name.  The backslash character is followed by a series of control codes.  We\rquote ll spend a lot of time looking at these control characters in detail later, since they let you do all sorts of fun things, like create menu items with dividers, bold text, and so forth.  The one thing that is common to all of the menu items, though, is a menu number for the menu name string, and a menu item number for menu item strings.  In each case, the number is the character N (to tell the Menu Manager that we\rquote re defining a number) followed by the number itself.  That number is typed just like you would type an integer value in a C program.  Incidentally, the Menu Manager shares one trait with C: it\rquote s case sensitive, so you do have to use a capitol N at the start of the number.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Menu items are defined pretty much the same way the menu name itself is defined.  For example, the string for the Clear menu item is }{\f6\fs20 "--Clear\\\\N254"}{\f4 .  Like the menu name string, a menu item string starts off with two characters, but this time we use }{\f6\fs20 "--"}{\f4  instead of }{\f6\fs20 ">>"}{\f4 .  Looking back, you can see that all of the menu items start off with the same two }{\f6\fs20 "--"}{\f4  characters.  The menu item string also has a name part, but this time we don\rquote t need to put spaces around the name.  Finally, there is a section for control characters, and again we need to set up a number, this time a menu item number.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items\:order}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you pull down a menu, you want the menu items to appear in a certain order.  It may seem pretty obvious, but just to be complete it\rquote s worth pointing out that the menu items in the finished menu will be listed from top to bottom in the same order you put the menu item strings in this master string.  While this example shows menu item numbers that step up in a nice order, that isn\rquote t actually required; the menu item number is just a reference number, and has no effect whatsoever on the position of the menu item in the finished menu.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewMenu}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 With the menu string complete, it\rquote s time to see what we do with it.  The }{\f6\fs20 NewMenu}{\f4  tool call takes the menu string as a parameter and returns a menu handle.  It turns out that we really don\rquote t need the handle very often.  The menu handle is handy for tricks like adding and removing menus as the program runs, but for a normal, fixed menu bar, we just don\rquote t need it.  For that reason, in simple programs, I just use the same local variable for the menu handle on each }{\f6\fs20 NewMenu}{\f4  call, and throw the value away when I leave the subroutine that sets up the menu bar.\par The call to }{\f6\fs20 NewMenu}{\f4  itself is pretty simple.  Just to keep you from flipping back a couple of pages, here it is again:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuHand = NewMenu(                     /* create the edit menu */\par    ">> Edit \\\\N3\\r"\par    "--Undo\\\\N250\\r"\par    "--Cut\\\\N251\\r"\par    "--Copy\\\\N252\\r"\par    "--Paste\\\\N253\\r"\par    "--Clear\\\\N254\\r"\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    ".\\r");\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 While the call is fairly simple, we really should stop and look at the }{\f6\fs20 menuHand}{\f4  variable.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 MenuRecHndl menuHand;                   /* for 'handling' menus */\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The value returned by }{\f6\fs20 NewMenu}{\f4  is a menu handle, and the Menu Manager header file has a type declared for the menu handle.  We\rquote ll talk about handles in detail later in the course, but for now just think of the menu handle as a value you use to tell the Menu Manager what menu you are talking about.  Even after you learn what handles are, that\rquote s still a great way of thinking about a menu handle, because that\rquote s just what the menu handle is: a way of telling the Menu Manager which menu you mean when you make calls to remove or modify a menu.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewMenu}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InsertMenu}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Calling }{\f6\fs20 NewMenu}{\f4  creates a menu, but it doesn\rquote t do anything with the menu.  The menu is in limbo, defined but not useable.  The next step is to put the menu into the system menu bar with the call\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 InsertMenu(menuHand, 0);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par One parameter is pretty obvious: }{\f6\fs20 menuHand}{\f4  is the handle of the menu, returned by }{\f6\fs20 NewHandle}{\f4 , and tells the Menu Manager what menu you want to put in the system menu bar.  The other parameter tells the Menu Manager where to put the menu.  This parameter is the number of some menu that is already in the menu bar; the new menu will appear right after the menu with the menu number you pass.  The number of the menu is something you set up; it\rquote s the menu number you declared in the menu string for the menu itself.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Hard coding menu numbers, like hard coding any other number, is something programmers learn to avoid whenever possible, since it means you have to be a lot more careful when you change a program.  For that reason, most of the time you should pass a menu number of 0, which tells the Menu Manager to place the new menu before any other menu in the menu bar.  When the Menu Manager draws the menu, it will draw the front menu at the left of the menu bar, the next menu right after it, and so on.  Thinking about this for a moment, you can see that you will end up building your menus and inserting them in reverse order, putting the rightmost menu in the menu bar first, and the leftmost menu in the menu bar last.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixMenuBar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawMenuBar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 After defining all of your menus, you need to make two more calls to the Menu Manager:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 height = FixMenuBar();                  /* draw the completed menu bar */\par DrawMenuBar();\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first of these calls tells the Menu Manager to scan the list of menus, doing some internal calculations to figure out how high the menu bar should be and how large each menu will be when it is pulled down.  The height of the menu bar is something you might want to keep around if you are doing something on the screen that depends on exact placement, but in most programs you will use moveable, sizeable windows, and don\rquote t need to worry much about the height of the menu bar, or for that matter, how large the screen is.  In most of our programs, we\rquote ll just throw this value away.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Finally, the last step is to draw the menu bar.  This is when the text for the menus appears at the top of the screen.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Menu Events}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Menu Events\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 mouse down event}}}{\f4 {\*\bkmkstart bk6}When you sit down to use a desktop program, the first thing you are likely to do is move the cursor to the menu bar and press the mouse button.  A menu pops up, and as you move the mouse down the menu, the various menu items are highlighted.  If you let up on the mouse button while an item is selected the program does something.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FindWindow}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Menu Manager does an awful lot of the work to make all of this happen for you, but it doesn\rquote t do everything.  The Menu Manager will handle all of the work once it knows that the mouse has been pressed on the menu bar, and give you back the number of the menu item that the user selected, or a zero if the user didn\rquote t end up selecting anything, but you have to figure out that the mouse was pressed in the menu bar and call the Menu Manager.  Strangely enough, the easiest way to see if the mouse has been pressed in the menu bar is with a Window Manager call, }{\f6\fs20 FindWindow}{\f4 .  When your program\rquote s event loop sees a mouse down event, it calls }{\f6\fs20 FindWindow}{\f4  to see if the user clicked on anything in particular, or just has a nervous twitch.  Here\rquote s a typical call to }{\f6\fs20 FindWindow}{\f4 :\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 where = FindWindow(&wPtr, myEvent.where.h, myEvent.where.v);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f6\fs20 FindWindow}{\f4  checks to see if the location is in a window, setting }{\f6\fs20 wPtr}{\f4  to a pointer to the window if it is.  Since our programs don\rquote t have any windows yet, }{\f6\fs20 wPtr}{\f4  will always be set to }{\f6\fs20 NULL}{\f4 .  For our purposes, the value }{\f6\fs20 FindWindow}{\f4  returns is a lot more important; it is one of the following values:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1440\adjustright {\f4 number\tab name\tab description\par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\tx1440\adjustright {\f4 0\tab }{\f6\fs20 wNoHit}{\f4 \tab Not in anything.\par 16\tab }{\f6\fs20 wInDesk}{\f4 \tab Somewhere on the desktop.\par 17\tab }{\f6\fs20 wInMenuBar}{\f4 \tab In the system menu bar; this is the one we want.\par 19\tab }{\f6\fs20 wInContent}{\f4 \tab In the content area of a window.\par 20\tab }{\f6\fs20 wInDrag}{\f4 \tab In the title bar of a window.\par 21\tab }{\f6\fs20 wInGrow}{\f4 \tab In the grow region of a window.\par 22\tab }{\f6\fs20 wInGoAway}{\f4 \tab In the close box of a window.\par 23\tab }{\f6\fs20 wInZoom}{\f4 \tab In the zoom box of a window.\par 24\tab }{\f6\fs20 wInInfo}{\f4 \tab In the information bar of a window.\par 25\tab }{\f6\fs20 wInSpecial}{\f4 \tab In a special menu item bar.  These are the menus with numbers from 250 to 255.\par 26\tab }{\f6\fs20 wInDeskItem}{\f4 \tab In a desk accessory.\par 27\tab }{\f6\fs20 wInFrame}{\f4 \tab In the window, but not in any specific area defined in this table.\par 28\tab }{\f6\fs20 wInactMenu}{\f4 \tab In an inactive menu item.\par <0\tab }{\f6\fs20 wInSysWindow}{\f4 \tab In a system window.\par }\pard \qj\li360\keepn\widctlpar\tx1440\tx3240\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 2-1:  }{\f6\fs20 FindWindow}{\f4  Return Codes\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInSpecial}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInMenuBar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Of all of this list, the only values we care about at this point are }{\f6\fs20 wInMenuBar}{\f4  and }{\f6\fs20 wInSpecial}{\f4 , which tell us that the mouse click was in the system menu bar.  (}{\f6\fs20 wInMenuBar}{\f4  is returned for menu items with a number of 256 or higher, while }{\f6\fs20 wInSpecial}{\f4  is returned for the reserved menu item numbers 250 to 255.)  We\rquote ll learn about these other possibilities gradually, with most of them popping up when we learn to use windows.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MenuSelect}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 system menu bar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Assuming }{\f6\fs20 FindWindow}{\f4  returns }{\f6\fs20 wInMenuBar}{\f4 , or }{\f6\fs20 wInSpecial}{\f4 , the next step is to call }{\f6\fs20 MenuSelect}{\f4 , which handles all of the hard work of actually highlighting the menu, drawing the menu items, tracking the mouse as the user moves over various menu items, and telling us what, if anything, finally got selected.  The call to }{\f6\fs20 MenuSelect}{\f4  looks like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 MenuSelect(&myEvent, NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wmTaskData}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The second parameter tells the Menu Manager what menu bar to use; }{\f6\fs20 NULL}{\f4  tells it to use the system menu bar.  It\rquote s a little odd, but very efficient, for }{\f6\fs20 MenuSelect}{\f4  to take our task record as the first of the parameters.  The reason this works so well is that }{\f6\fs20 MenuSelect}{\f4  needs to know where the mouse was clicked, and needs to tell us what menu item was selected.  }{\f6\fs20 MenuSelect}{\f4  plucks the mouse location out of the event record, and sets a parameter in the event record to tell us what happened.  Rather than changing one of the fields in the event record that is used by }{\f6\fs20 GetNextEvent}{\f4 , }{\f6\fs20 MenuSelect}{\f4  changes a field called }{\f6\fs20 wmTaskData}{\f4  to tell us what happened.  In the abbreviated version of the event record we looked at in Lesson 1, I didn\rquote t even show the }{\f6\fs20 wmTaskData}{\f4  field, but if you check the header files, it\rquote s there.  We\rquote ll go into detail about this and the other fields in the event record a little later in this lesson.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 In any case, }{\f6\fs20 MenuSelect}{\f4  sets the least significant word of }{\f6\fs20 wmTaskData}{\f4  to the menu item number of the selected menu item, while the most significant word is set to the menu number.\par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 highlighting menus}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:highlighting}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HiliteMenu}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s one other detail about handling menu events that you need to know.  When a command is being executed, your program is supposed to highlight the menu where the menu item is located.  To help you out, }{\f6\fs20 MenuSelect}{\f4  leaves the menu highlighted, and it\rquote s up to you to unhighlight the menu after the command is finished.  Here\rquote s how you unhighlight a menu:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 HiliteMenu(FALSE, menuNum);             /* unhighlight the menu */\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 You could highlight a menu this way, too, by passing }{\f6\fs20 TRUE}{\f4  as the first parameter.\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk6}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu events}{\rxe bk6}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Sample Program \endash  Quit}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Sample Program \endash  Quit\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Well, finally, we know enough to write a program that actually creates and uses a menu bar!  We\rquote ll start with a simple sample program that has one menu and one menu item: Quit.  The traditional place for the Quit command is in the File menu, so our one menu will be called File.  To handle the events, we\rquote ll use exactly the method described in the last section.  Here\rquote s the complete sample program:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Quit\par *\par * This program creates a menu bar with one command: quit.\par *\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 ***************************************************************/\par \par #pragma lint -1\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #include <orca.h>\par #include <Event.h>\par #include <Menu.h>\par #include <QuickDraw.h>\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <Window.h>\par \par #define file_Quit       256             /* menu item IDs */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 BOOLEAN done;                           /* are we done, yet? */\par EventRecord myEvent;                    /* event record */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int menuNum, menuItemNum;               /* menu number & menu item number */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * HandleMenu\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void HandleMenu (void)\par \par \{\par switch (menuItemNum) \{                  /* go handle the menu */\par    case file_Quit:\par       done = TRUE;\par       break;\par    \}\par HiliteMenu(FALSE, menuNum);             /* unhighlight the menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * InitMenus\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void InitMenus (void)\par \par \{\par int height;                             /* height of the largest menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 MenuRecHndl menuHand;                   /* for 'handling' menus */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuHand = NewMenu(                     /* create the file menu */\par    ">> File \\\\N1\\r"\par    "--Quit\\\\N256\\r"\par    ".\\r");\par InsertMenu(menuHand, 0);\par height = FixMenuBar();                  /* draw the completed menu bar */\par DrawMenuBar();\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Main program\par *\par ***************************************************************/\par \par int main (void)\par \par \{\par int where;                              /* where the mouse event occurred */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 GrafPortPtr wPtr;                       /* window where event occurred */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 startdesk(640);                         /* start the tools */\par InitMenus();                            /* set up the menu bar */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 InitCursor();                           /* start the arrow cursor */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 done = FALSE;                           /* we aren't done, yet */\par while (!done) \{\par                                         /* handle the events */\par    if (GetNextEvent(everyEvent, &myEvent))\par       if (myEvent.what == mouseDownEvt) \{\par          where = FindWindow(&wPtr, myEvent.where.h, myEvent.where.v);\par          if (where == wInMenuBar) \{\par             MenuSelect(&myEvent, NULL);\par             menuNum = (int) (myEvent.wmTaskData >> 16);\par             menuItemNum = (int) myEvent.wmTaskData;\par             if (menuItemNum != 0)\par                HandleMenu();\par             \}\par          \}\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}  \par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 enddesk();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 2-1:  Quit Program\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par One of the tips I\rquote ve picked up over the years is to type in a program like this.  On the surface, that seems a little strange, since the program is on disk.  Glancing through the program, everything looks pretty familiar, too.  After all, we\rquote ve spent several pages in an exhaustive analysis of how to create a program like this one.  Strangely enough, though, you will get a lot from typing it in.  The reason is that your mind works faster than your fingers, and while you type, you\rquote re really reading the program, and hopefully going over it in your mind.  Besides, all good programmers love the feel of a set of keys gently giving way beneath their fingers, right?  I\rquote d suggest typing it in, but I suppose you can load it from disk.  In any case, try the program out, and take the time to go through the code carefully.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 debugger}}}{\v\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 \u8710\'c6}{\f4 \tab }{\b\f4 Important}{\f4 \tab If you decide to use PRIZM\rquote s debugger on this program be sure and use the Step Through command to execute }{\f6\fs20 InitMenus}{\f4 .  The debugger is a desktop program, too, and it is using the menu bar.  One of the few real problems with this arrangement is that you can\rquote t safely step through code between an }{\f6\fs20 InsertMenu}{\f4  call and a }{\f6\fs20 FixMenuBar}{\f4  call, at least not if you switch between the debugger menu bar and your program\rquote s menu bar in the process.\par \par \tab \tab Frankly, the simplest way to handle this problem is to set a break point right after the call to }{\f6\fs20 InitMenus}{\f4 .  That way your program\rquote s menu bar already exists when you start debugging.  The other alternative is to use ORCA/Debugger, which is a text-based Init debugger.  It doesn\rquote t have its own menu bar, so there isn\rquote t a conflict.\~\~}{\f20\fs20 \u8710\'c6}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 2-1.  Add the Edit menu described at the start of the lesson to this program.  The File menu should be on the left, and the Edit menu on the right.\par \par Problem 2-2.  Create a program with a File menu with the item Quit, just as in the sample program.  Add a second menu called Beep, with three menu items, named One, Two, and Three.  Use menu item numbers of 301, 302 and 303 for these three menu items, and use menu number 2 for the menu itself.\par Set up your program so }{\f6\fs20 SysBeep}{\f4  is called once when menu item One is selected, twice when menu item Two is selected, and three times for Menu item Three.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Keyboard Equivalents}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Keyboard Equivalents\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 events\:keyboard}}}{\f4 {\*\bkmkstart bk7}Pulling down a menu to tell a program what to do is easy to understand, and it\rquote s easy to quickly see what commands are available or to check the name of a command.  It\rquote s also slow, especially in a program like a text editor, where your hands are generally on the keyboard.  That\rquote s the biggest reason for keyboard equivalents, which let you hold down the Command key (A.K.A. the open-apple key) and type a key to execute a menu command.\par When you set up a menu, there are two distinct parts to the process: creating the menu in the first place, and changing the event loop so your program recognized the menu command.  The same is true with keyboard equivalents.  The first step is to learn how to change the menu definition strings to add a keyboard equivalent.  Once the keyboard equivalent is in the menu definition, we\rquote ll have to change the event loop to handle keystrokes that are really keyboard equivalents for menu commands.\par Keyboard equivalents are defined when the menu item itself is defined.  You tell the Menu Manager about the keyboard equivalent using a control code, just as you used to tell the Menu Manager what menu item ID number to assign to the menu item.  The * character is used to start a keyboard equivalent; this is followed by two characters that will be used as the keyboard equivalents.  As one example, it is customary to use Q as the keyboard equivalent for the Quit command.  An uppercase Q is different from a lowercase q, though, so you need to tell the Menu Manager to support both the uppercase Q and lowercase q by listing both keys as keyboard equivalents.  Adding this keyboard equivalent to our Quit menu item from the sample program in the last section, the line that defines the Quit menu looks like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\v\f4 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20    "--Quit\\\\N256*Qq\\r"\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You can put in the control codes in any order you like.  For example, putting the keyboard equivalent first and the menu item ID last, like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20    "--Quit\\\\*QqN256*Qq\\r"\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 works perfectly well.  The Menu Manager does the same thing either way.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 You could actually use any two characters you like for the keyboard equivalents.  Using \ldblquote *Rq\rdblquote  would tell the Menu Manager to allow an uppercase R or a lowercase q as a keyboard equivalent.  On the other hand, just because you can do something doesn\rquote t necessarily mean you should do it, as any parent of a teenager has undoubtedly pointed out on more than one occasion.  The whole point of the Apple interface is to create programs that are easy to use and consistent between applications.  Doing bizarre things like picking out strange keyboard equivalent key combinations doesn\rquote t exactly help the user keep track of what keys can be used.  In general, the rule is to use the uppercase and lowercase versions of the same key.  That way, it doesn\rquote t matter whether the shift key \endash  in particular, the caps lock key \endash  is down or up.\par The Menu Manager draws the first of the key equivalents in the menu.  Since the order of the keys does matter, it\rquote s important to follow the common conventions there, too.  The rule is to put the uppercase letter first for alphabetic keys, and the unshifted letter first for non-alphabetic keys.  The Quit menu item is a great example of an alphabetic keyboard equivalent.  Non-alphabetic keyboard equivalents are more rare, but certainly not unheard of.  The ORCA/C desktop environment (PRIZM) is an example of a program that uses several non-alphabetic keyboard equivalents.  One of these is the [ key, used for the Step command.  The second key PRIZM uses for the Step command is the \{ key, so the keyboard equivalent is written as \ldblquote *[\{\rdblquote  in the menu item definition for the Step command.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modifiers}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 message}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you want to use a keyboard equivalent in a program, you hold down the Command key and press the key.  Inside the desktop program the key down event is reported just like any other keypress.  Holding down the Command key while you press Q to quit a program does not change the key the Event Manager reports in the }{\f6\fs20 message}{\f4  field.  The only way your program can tell that the Command key was held down is to look at the }{\f6\fs20 modifiers}{\f4  field of the event record to see if the appleKey bit is set, like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (myEvent.modifiers & appleKey)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    /* the command key (A.K.A. open-apple key) is down */;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MenuKey}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If the }{\f6\fs20 appleKey}{\f4  bit is set your program should make a }{\f6\fs20 MenuKey}{\f4  call.  The }{\f6\fs20 MenuKey}{\f4  call does the same thing for key down events that the }{\f6\fs20 MenuSelect}{\f4  call did for mouse down events.  In fact, the parameters are event the same.  The }{\f6\fs20 MenuKey}{\f4  call looks like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 MenuKey(&myEvent, NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Putting these ideas together, we can update the sample program from the last section to handle a keyboard equivalent of Q or q for the Quit command.  The complete sample program is shown in Listing 2-2.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Quit\par *\par * This program creates a menu bar with one command: quit.\par *\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 ***************************************************************/\par \par #pragma lint -1\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #include <orca.h>\par #include <Event.h>\par #include <Menu.h>\par #include <QuickDraw.h>\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <Window.h>\par \par #define file_Quit       256             /* menu item IDs */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 BOOLEAN done;                           /* are we done, yet? */\par EventRecord myEvent;                    /* event record */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int menuNum, menuItemNum;               /* menu number & menu item number */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * HandleMenu\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void HandleMenu (void)\par \par \{\par switch (menuItemNum) \{                  /* go handle the menu */\par    case file_Quit:\par       done = TRUE;\par       break;\par    \}\par HiliteMenu(FALSE, menuNum);             /* unhighlight the menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * InitMenus\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void InitMenus (void)\par \par \{\par int height;                             /* height of the largest menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 MenuRecHndl menuHand;                   /* for 'handling' menus */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuHand = NewMenu(                     /* create the file menu */\par    ">> File \\\\N1\\r"\par    "--Quit\\\\N256*Qq\\r"\par    ".\\r");\par InsertMenu(menuHand, 0);\par height = FixMenuBar();                  /* draw the completed menu bar */\par DrawMenuBar();\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Main program\par *\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 ***************************************************************/\par \par int main (void)\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 \{\par int where;                              /* where the mouse event occurred */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 GrafPortPtr wPtr;                       /* window where event occurred */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 startdesk(640);                         /* start the tools */\par InitMenus();                            /* set up the menu bar */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 InitCursor();                           /* start the arrow cursor */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 done = FALSE;                           /* we aren't done, yet */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 while (!done) \{\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20                                         /* handle the events */\par    if (GetNextEvent(everyEvent, &myEvent))\par       switch (myEvent.what) \{\par          case mouseDownEvt:\par             where = FindWindow(&wPtr, myEvent.where.h, myEvent.where.v);\par             if (where == wInMenuBar) \{\par                MenuSelect(&myEvent, NULL);\par                menuNum = (int) (myEvent.wmTaskData >> 16);\par                menuItemNum = (int) myEvent.wmTaskData;\par                if (menuItemNum != 0)\par                   HandleMenu();\par                \}\par }\pard \fi180\widctlpar\adjustright {\f6\fs20             break;\par          case keyDownEvt:\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20          case autoKeyEvt:\par             if (myEvent.modifiers & appleKey) \{\par                MenuKey(&myEvent, NULL);\par                menuNum = (int) (myEvent.wmTaskData >> 16);\par                menuItemNum = (int) myEvent.wmTaskData;\par                if (menuItemNum != 0)\par                   HandleMenu();\par                \};\par             break;        \par }\pard \fi180\widctlpar\adjustright {\f6\fs20          \}\par    \}  \par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 enddesk();\par \}\par }\pard \qj\li180\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 2-2:  Quit Program with Keyboard Equivalents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 2-3.  In Problem 2-2 you created a program with a beep menu, with menu commands to beep one, two or three times.  Add keyboard equivalents of 1, 2 or 3 for these three commands.\par As it turns out, the shifted characters for 1 and 2 (! and @) don\rquote t work as key equivalents.  In addition, a numeric shift is one case where it doesn\rquote t make a lot of sense to allow any key but the number.  In a case like this, one way to set things up is to use the same key for both the shifted and unshifted keys.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Standard Keyboard Equivalents}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Standard Keyboard Equivalents\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You\rquote ve probably used enough desktop programs to be pretty used to Q as the keyboard equivalent of the Quit command.  You may also be used to Z for Undo, X for Cut, C for Copy, and V for Paste.  The reason you are so used to these keys isn\rquote t because they are the only good choices, it\rquote s because Apple laid out a set of standard keyboard equivalents long ago, and people who write programs using the Apple interface follow these guidelines rather closely.  Standard keys for keyboard equivalents, along with other guidelines like what commonly used alert buttons should be called, how color should be used, and so forth are laid out in a book called }{\i\f4 Human Interface Guidelines: The Apple Desktop Interface}{\f4 .  This is a book that every desktop programmer should have around as a reference book, and it is also a book I would recommend that you read at least twice, once right after you finish this course and again in about 6 months to a year.  Creating programs that are consistent with Apple\rquote s guidelines is very important for a lot of reasons, but you can\rquote t create consistent programs if you don\rquote t know what the guidelines are!\par Getting back to keyboard equivalents, Table 2-2 shows the keys Apple has set aside for specific purposes.\par \par }\pard \li1440\ri2880\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx2880\tx4320\adjustright {\f4 Menu\tab Item\tab Keyboard Equivalent\par }\pard \li1440\keepn\widctlpar\tx2880\tx4320\adjustright {\f4 Apple\tab Help\tab ?\par File\tab New\tab N\par File\tab Open\tab O\par File\tab Save\tab S\par File\tab Quit\tab Q\par Edit\tab Undo\tab Z\par Edit\tab Cut\tab X\par Edit\tab Copy\tab C\par Edit\tab Paste\tab V\par Style\tab Plain Text\tab P\par Style\tab Bold\tab B\par Style\tab Italic\tab I\par Style\tab Underline\tab U\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 2-2:  Standard Keyboard Equivalents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Two other keyboard equivalents are so common that they are de facto standards.  }{\outl\f4\fs20 \u-3\'f0}{\f4 W is generally used as the keyboard equivalent of the Close command in the File menu, while }{\outl\f4\fs20 \u-3\'f0}{\f4 A is used for the Select All option in the Edit menu.  It is also very, very common to see }{\outl\f4\fs20 \u-3\'f0}{\f4 P used as the keyboard equivalent for Print.  This is something that\rquote s changed over the years.  }{\outl\f4\fs20 \u-3\'f0}{\f4 P makes so much sense as the key equivalent for Print that a lot of folks started using it, and Apple eventually changed the standard, putting out a technical note telling about the change.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkend bk7}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 keyboard equivalent\bxe }{\rxe bk7}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 TaskMaster}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 TaskMaster\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk9}{\*\bkmkstart bk10}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 system window}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If handling all of these various kinds of events, and figuring out whether they apply to the menu bar or not, is starting to seem a little complicated, just wait:  it gets worse!  As you add the various checks for your own windows, then pile checks for NDA windows (or system windows, in the parlance of the toolbox reference manuals), things get genuinely messy.  And, on the Macintosh, that\rquote s just what you have to do.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextEvent}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fortunately the folks who wrote the Apple II}{\f4\fs20 GS}{\f4  toolbox realized that all of this was sort of a mess, and created an easier way of handling all of the routine tasks that almost any desktop program must handle.  }{\f6\fs20 TaskMaster}{\f4  is a tool call that works a lot like the Event Manager\rquote s }{\f6\fs20 GetNextEvent}{\f4  call, but instead of handing back a raw event, }{\f6\fs20 TaskMaster}{\f4  does all of the standard work for you, and gives you back the results.  For example, when }{\f6\fs20 TaskMaster}{\f4  sees that you have a mouse down event, it calls }{\f6\fs20 FindWindow}{\f4  automatically.  If }{\f6\fs20 FindWindow}{\f4  tells }{\f6\fs20 TaskMaster}{\f4  that the mouse down event occurred in the system menu bar, }{\f6\fs20 TaskMaster}{\f4  calls }{\f6\fs20 MenuSelect}{\f4 , and returns }{\f6\fs20 wInMenuBar}{\f4  as the event.  Since }{\f6\fs20 MenuSelect}{\f4  is already putting the information about the menu that was selected in the }{\f6\fs20 wmTaskData}{\f4  field of the event record, you can still pluck out the menu item and menu number the same way you did when you handled the calls for yourself.\par To see how this works, let\rquote s take a look at the Quit program\rquote s event loop again, this time using }{\f6\fs20 TaskMaster}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 done = FALSE;                           /* main event loop */\par myEvent.wmTaskMask = 0x001F7FFF;        /* let TaskMaster do it all */\par while (!done) \{\par    event = TaskMaster(everyEvent, &myEvent);\par    switch (event) \{\par       case wInSpecial:\par       case wInMenuBar:\par          HandleMenu();\par          break;\par       \}\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Let\rquote s face it \endash  that\rquote s a lot easier than the event loop we wrote to handle the raw events for ourselves!  And this event loop does exactly the same thing as the one we wrote for the Quit program.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 While it is called just like }{\f6\fs20 GetNextEvent}{\f4 , }{\f6\fs20 TaskMaster}{\f4  needs to get a little more information from us, and needs to be able to pass back more information to handle some complicated events we haven\rquote t run across yet.  All of this extra information is passed in an extended version of the event record.  Once the }{\f6\fs20 TaskMaster}{\f4  fields are added, the event record looks like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct EventRecord \{\par    Word what;                           /* event code */\par    LongWord message;                    /* event message */\par    LongWord when;                       /* ticks since startup */\par    Point where;                         /* mouse location */\par    Word modifiers;                      /* modifier flags */\par    LongWord wmTaskData;\par    LongWord wmTaskMask;\par    LongWord wmLastClickTick;\par    Word wmClickCount;\par    LongWord wmTaskData2;\par    LongWord wmTaskData3;\par    LongWord wmTaskData4;\par    Point wmLastClickPt;\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct EventRecord EventRecord, *EventRecordPtr, **EventRecordHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 In fact, if you look in the C header files, this is the event record that is used throughout the toolbox, even for Event Manager calls like }{\f6\fs20 GetNextEvent}{\f4 .\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wmTaskMask}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 For the most part, we\rquote ll ignore these extra fields for now, and talk about them in detail when we get to a point in the course where we actually need to use the field.  Starting to talk about things like the result returned by the }{\f6\fs20 defProc}{\f4  of a control in a window just wouldn\rquote t make much sense until after we talk about windows and controls!  There is one field of the task record that we need to learn about right away, though, and that\rquote s the }{\f6\fs20 wmTaskMask}{\f4  field.\par }{\f6\fs20 TaskMaster}{\f4  can do an awful lot of things for you, but that isn\rquote t always what you want.  There are situations where you want to handle something for yourself so you can do something a little unusual.  For example, the Reversi game on the ORCA/C samples disk has one window that lists the moves made so far in the game; you can see a copy of this window in Figure 2-2.  The moves list is in two columns, with a picture of the appropriate type of piece at the top of each column.  When you scroll the window, the moves move up, but the pieces at the top of the column don\rquote t.  Well, as it happens, }{\f6\fs20 TaskMaster}{\f4  can do a fine job of scrolling a window for us, but in this case, I didn\rquote t want to scroll the entire window, only part of it \endash  so I told }{\f6\fs20 TaskMaster}{\f4  to do a lot of things for me, but not to scroll the windows.  That I handled for myself.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1029{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw105\pich196\picwgoal2100\pichgoal3920\macpict\bliptag705900242\blipupi72{\*\blipuid 2a132ed2a5a7c81725b0e18bfdd42824}0b1d0000000000c400691101a00082a0008e01000a000000000240030898000e0000000000c400700000000000c400690000000000c40069000102f30002f30007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe000c053ffe0003ffbefbff01fe000c053ffe0003ffbefbff01fe000c053ffe7ff3ff9cfbff01fe000c053ffe7ff3ff9cfbff01fe000f0d3ffe7ff3ff88e1ce70f0fffffe000f0d3ffe7ff3ff88e1ce70f0fffffe000f0d3ffe7ff3ff80ccce6667fffffe000f0d3ffe7ff3ff80ccce6667fffffe000f0d3ffe7ff3ff94cce4e070fffffe000f0d3ffe7ff3ff94cce4e070fffffe000f0d3ffe7ff3ff9ccce4e7fe7ffffe000f0d3ffe7ff3ff9ccce4e7fe7ffffe000f0d3ffe0003ff9ce1f1f0f0fffffe000f0d3ffe0003ff9ce1f1f0f0fffffe0007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe0007003ff6ff01fe000a0038f9000403fffffe000a0038f9000403fffffe000a0038f9000403000006000a0038f9000403000006000a0038f9000403006006000a0038f9000403006006000a0038f9000403019806000a0038f9000403019806000a0038f9000003fe0600000a0038f9000003fe0600000f0038fe00093fc001fe0003180186000f0038fe00093fc001fe0003180186000f0038fe0009fff0070380037e07e6000f0038fe0009fff0070380037e07e6000f0938000001fff80c00c003fe0600000f0938000001fff80c00c003fe0600000f0938000001fff808004003fe0600000f0938000001fff808004003fe0600000f0938000001fff808004003fe0600000f0938000001fff808004003fe0600000f0d38000001fff80c00c00307fe06000f0d38000001fff80c00c00307fe06000f0038fe0009fff007038003000006000f0038fe0009fff007038003000006000f0038fe00093fc001fe0003fffffe000f0038fe00093fc001fe0003fffffe000a0038f900040380808e000a0038f900040380000e000a0038f900040388080e000a0038f900040380000e000a0038f900040380808e000a0038f900040380000e000a0038f900040388080e000a0038f900040380000e000a0038f900040380808e000a0038f900040380000e000f0d38007800f8780f8f000388080e000f0d38007800f8780f8f000380000e000f0d3800cc00cccc0c180003fffffe000f0d3800cc00cccc0c180003fffffe000f0d38000cc0cccc0c1f0003c0001e000f0d38000cc0cccc0c1f0003c0001e000f0d38003800cc780f198003c0001e000f0d38003800cc780f198003c0001e000f0d38000c00cccc0c198003c0001e000f0d38000c00cccc0c198003c0001e000f0d3800cc00cccc0c198003c0001e000f0d3800cc00cccc0c198003c0001e000f0d380078c0f8780f8f0003c0001e000f0d380078c0f8780f8f0003c0001e000a0038f9000403c0001e000a0038f9000403c0001e000f0d3800c000f8f01f3f0003c0001e000f0d3800c000f8f01f3f0003c0001e000f0d3800cc00c18018030003c0001e000f0d3800cc00c18018030003c0001e000f0d3800ccc0c1f018060003c0001e000f0d3800ccc0c1f018060003c0001e000f0d3800cc00f1981e0c0003c0001e000f0d3800cc00f1981e0c0003c0001e000f0d3800fc00c198180c0003c0001e000f0d3800fc00c198180c0003c0001e000f0d38000c00c19818180003c0001e000f0d38000c00c19818180003c0001e000f0d38000cc0c0f01f180003c0001e000f0d38000cc0c0f01f180003c0001e000a0038f9000403c0001e000a0038f9000403c0001e000f0d3800f800f9f00f1f0003c0001e000f0d3800f800f9f00f1f0003c0001e000f0d3800c000c18019980003c0001e000f0d3800c000c18019980003c0001e000f0d3800f8c0c1f0181f0003c0001e000f0d3800f8c0c1f0181f0003c0001e000f0d38000c00f0181b818003c0001e000f0d38000c00f0181b818003c0001e000f0d38000c00c01819818003c0001e000f0d38000c00c01819818003c0001e000f0d3800cc00c19819998003c0001e000f0d3800cc00c19819998003c0001e000f0d380078c0c0f00f0f0003c0001e000f0d380078c0c0f00f0f0003c0001e000a0038f9000403fffffe000a0038f9000403fffffe000f0d38007800ccc00f8f000308080e000f0d38007800ccc00f8f000300000e000f0d3800c000cccc0c19800380808e000f0d3800c000cccc0c19800300000e000f0d3800f8c0cccc0c19800308080e000f0d3800f8c0cccc0c19800300000e000f0d3800cc00fccc0f0f000380808e000f0d3800cc00fccc0f0f000300000e000f0d3800cc00ccfc0c19800308080e000f0d3800cc00ccfc0c19800300000e000f0d3800cc00cc0c0c19800380808e000f0d3800cc00cc0c0c19800300000e000f0d380078c0cc0c0f8f000308080e000f0d380078c0cc0c0f8f000300000e000a0038f900040380808e000a0038f900040300000e000f0d3800fc00f8f00f0f000308080e000f0d3800fc00f8f00f0f000300000e000f0d38000c00c1981998000380808e000f0d38000c00c1981998000300000e000f0d380018c0c198199f000308080e000f0d380018c0c198199f000300000e000f0d38003000f0f01999800380808e000f0d38003000f0f01999800300000e000f0d38003000c1981f99800308080e000f0d38003000c1981f99800300000e000f0d38006000c1981999800380808e000f0d38006000c1981999800300000e000f0d380060c0c0f0198f000308080e000f0d380060c0c0f0198f000300000e000a0038f900040380808e000a0038f900040300000e000f0d38007800f8f807878003fffffe000f0d38007800f8f807878003fffffe000f0d3800cc00ccc00cccc003000006000f0d3800cc00ccc00cccc003000006000f0d3800ccc0ccf80c0cc00307fe06000f0d3800ccc0ccf80c0cc00307fe06000f0938007800f80c0c078003fe0600000f0938007800f80c0c078003fe0600000f043800cc00ccfe0c01c003fe0600000f043800cc00ccfe0c01c003fe0600000f093800cc00cccc0cccc003fe0600000f093800cc00cccc0cccc003fe0600000f0d380078c0f878078780037e07e6000f0d380078c0f878078780037e07e6000a0038f9000403180186000a0038f9000403180186000f0938007800f87807878003fe0600000f0938007800f87807878003fe0600000f0d3800cc00cccc0ccc0003019806000f0d3800cc00cccc0ccc0003019806000f0d3800ccc0cccc0c0f8003006006000f0d3800ccc0cccc0c0f8003006006000f0d3800cc00f8780dccc003000006000f0d3800cc00f8780dccc003000006000f0d38007c00cccc0cccc003fffffe000f0d38007c00cccc0cccc003fffffe000f0d38000c00cccc0cccc00300000e000f0d38000c00cccc0cccc00300000e000f0d380078c0f878078780037fe00e000f0d380078c0f878078780037fe00e000a0038f900040360600e000a0038f900040360600e000f0d38303c00cc780f878003607fee000f0d38303c00cc780f878003607fee000f0d38f04c00ccc00cccc00360606e000f0d38f04c00ccc00cccc00360606e000f0d3830ccc0ccf80cc0c0037fe06e000f0d3830ccc0ccf80cc0c0037fe06e000f0d3830cc00fccc0cc380030c006e000f0d3830cc00fccc0cc380030c006e000f0d3830cc00cccc0cc0c0030c006e000f0d3830cc00cccc0cc0c0030c006e000f0d3830c800cccc0cccc0030c006e000f0d3830c800cccc0cccc0030c006e000f0d38fcf0c0cc780f8780030fffee000f0d38fcf0c0cc780f8780030fffee000a0038f900040300000e000a0038f900040300000e0007003ff6ff01fe0007003ff6ff01fe0002f30002f300a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 2-2:  Reversi Moves Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The }{\f6\fs20 wmTaskMask}{\f4  field of the extended event record is a bit mapped field.  Each of the bits corresponds to one of the things you can have }{\f6\fs20 TaskMaster}{\f4  do for you.  In most cases, if you set the bit, }{\f6\fs20 TaskMaster}{\f4  will take care of the details of handling the situation for you, but if you set the bit to zero, }{\f6\fs20 TaskMaster}{\f4  will let you handle the details for yourself.\par I used a qualifier there you should pay attention to:  I said you set the bit to one to ask }{\f6\fs20 TaskMaster}{\f4  to do something }{\i\f4 in most cases}{\f4 .  There are a few cases where you do just the opposite, clearing the bit when you want }{\f6\fs20 TaskMaster}{\f4  to perform the action, and setting the bit when }{\f6\fs20 TaskMaster}{\f4  should let you handle it.  It probably seems odd to be so inconsistent, but this inconsistencies really did come about with the best of intentions.  You have to realize that the Apple II}{\f4\fs20 GS}{\f4  toolbox didn\rquote t just pop into being in its current form; it evolved over time.  In the original version of the }{\f6\fs20 TaskMaster}{\f4  call, and even today, there were some fields that were not used.  Apple specified from the very beginning that you had to set the unused bits to zero.  That gave them a predictable value to count on when they added new features to }{\f6\fs20 TaskMaster}{\f4 , and in those cases, zero was used for the default case, and one when you wanted to ask }{\f6\fs20 TaskMaster}{\f4  to pick the unusual situation.\par {\*\bkmkstart bk8}Table 2-3 lists the various bits in the }{\f6\fs20 wmTaskMask}{\f4  field.  The description tells you what will happen if you }{\i\f4 set}{\f4  the bit.  If you clear the bit (set it to zero) then the action described will }{\i\f4 not}{\f4  take place.  In several cases, you have to set one bit before another can be used.  For example, you have to set the }{\f6\fs20 tmFindW}{\f4  bit or }{\f6\fs20 TaskMaster}{\f4  will not need to even look at the value of }{\f6\fs20 tmMenuSel}{\f4 .\par Only a few of the bits are likely to make sense to you at this point.  Don\rquote t worry, we\rquote ll cover most of them in the course as you learn more about the Window Manager, controls, desk accessories, and so forth.\par \par }\pard \qj\fi-2700\li3060\ri360\widctlpar\tx2520\adjustright {\f6\fs20 tmMenuKey}{\f4 \tab 0\tab Call }{\f6\fs20 MenuKey}{\f4  to see if a keypress is a menu keyboard equivalent.\par }{\f6\fs20 tmUpdate}{\f4 \tab 1\tab For window update events, call the window\rquote s default draw routine.\par }{\f6\fs20 tmFindW}{\f4 \tab 2\tab Call }{\f6\fs20 FindWindow}{\f4  for mouse down events.\par }{\f6\fs20 tmMenuSel}{\f4 \tab 3\tab Call }{\f6\fs20 MenuSelect}{\f4  when }{\f6\fs20 FindWindow}{\f4  determines that a mouse down event occurred in a menu bar.\par }{\f6\fs20 tmOpenDA}{\f4 \tab 4\tab Open a desk accessory when }{\f6\fs20 MenuSelect}{\f4  determines that a menu event was a selection of an NDA.\par }{\f6\fs20 tmSysClick}{\f4 \tab 5\tab When }{\f6\fs20 FindWindow}{\f4  returns an event from a system window (an NDA window is a system window), call }{\f6\fs20 SystemClick}{\f4  to handle the event.\par }{\f6\fs20 tmDragW}{\f4 \tab 6\tab If }{\f6\fs20 FindWindow}{\f4  returns }{\f6\fs20 wInDrag}{\f4 , handle moving the window around on the screen.\par }{\f6\fs20 tmContent}{\f4 \tab 7\tab If }{\f6\fs20 FindWindow}{\f4  detects an event in a window\rquote s content region, and the window is not the active window, select the window.\par }{\f6\fs20 tmClose}{\f4 \tab 8\tab If }{\f6\fs20 FindWindow}{\f4  detects a mouse down in a close box, call }{\f6\fs20 TrackGoAway}{\f4 .  If }{\f6\fs20 TrackGoAway}{\f4  returns }{\f6\fs20 TRUE}{\f4 , return }{\f6\fs20 wInGoAway}{\f4 ; otherwise, return }{\f6\fs20 nullEvt}{\f4 .\par }{\f6\fs20 tmZoom}{\f4 \tab 9\tab If }{\f6\fs20 FindWindow}{\f4  detects a mouse down in a zoom box, call }{\f6\fs20 TrackZoom}{\f4 .  If }{\f6\fs20 TrackZoom}{\f4  returns }{\f6\fs20 TRUE}{\f4 , call }{\f6\fs20 ZoomWindow}{\f4  to change the window\rquote s size.\par }{\f6\fs20 tmGrow}{\f4 \tab 10\tab If }{\f6\fs20 FindWindow}{\f4  detects a mouse down in the grow box of a window, call }{\f6\fs20 GrowWindow}{\f4  to allow the window\rquote s size to be changed, then }{\f6\fs20 SizeWindow}{\f4  to actually update the window\rquote s size.\par }{\f6\fs20 tmScroll}{\f4 \tab 11\tab Handle scroll bars.\par }{\f6\fs20 tmSpecial}{\f4 \tab 12\tab Handle special menu items.\par }{\f6\fs20 tmCRedraw}{\f4 \tab 13\tab When a window is activated or deactivated, redraw the controls in the correct state.\par }{\f6\fs20 tmInactive}{\f4 \tab 14\tab If an inactive menu item is selected, return }{\f6\fs20 wInactMenu}{\f4 .  (This is generally used to put up a help dialog telling the user what the menu is for, or what has to happen before it is active.)\par }{\f6\fs20 tmInfo}{\f4 \tab 15\tab Don\rquote t activate inactive windows when a mouse down event occurs inside of the information bar of the window.\par }{\f6\fs20 tmContentControls}{\f4 \tab 16\tab If }{\f6\fs20 FindWindow}{\f4  returns }{\f6\fs20 wInContent}{\f4 , call }{\f6\fs20 FindControl}{\f4  and }{\f6\fs20 TrackControl}{\f4  to handle normal control actions.\par }{\f6\fs20 tmControlKey}{\f4 \tab 17\tab Pass key events to controls for control key equivalents.\par }{\f6\fs20 tmControlMenu}{\f4 \tab 18\tab Pass menu events to controls in the active window.\par }{\f6\fs20 tmMultiClick}{\f4 \tab 19\tab Check for multiple clicks and return information about them.\par }\pard \qj\fi-2700\li3060\ri360\keepn\widctlpar\tx2520\adjustright {\f6\fs20 tmIdleEvents}{\f4 \tab 20\tab Send idle events to the controls in the window.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 2-3:  }{\f6\fs20 TaskMaster}{\f4  }{\f6\fs20 wmTaskMask}{\f4  Codes\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }{\f6\fs20 wmTaskMask}{\f4  codes are one of the few places in this course where I won\rquote t use the constant labels, shown in the first column, instead of the number.  In most of our programs, we\rquote ll set all of the bits except }{\f6\fs20 tmInfo}{\f4 , and it just takes too long and uses too much space to be clear if you add each and every one of these identifiers together to get your }{\f6\fs20 wmTaskMask}{\f4  code.  If you check back, the example event loop I gave set }{\f6\fs20 wmTaskMask}{\f4  to 0x001F7FFF.  This happens to be the value you would get by adding all of the constants except }{\f6\fs20 tmInfo}{\f4 .  (The value in column two is the bit number, not the constant value of the label.)  It is also the value we will use for most of our programs, so we\rquote ll be letting }{\f6\fs20 TaskMaster}{\f4  do all of the work for us that it can.\par {\*\bkmkend bk8}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wmTaskMask}{\rxe bk8}}}{\v\f4 \par }{\f4 \par Problem 2-4.  Modify the Quit program to use }{\f6\fs20 TaskMaster}{\f4 , rather than }{\f6\fs20 GetNextEvent}{\f4 , in the main event loop.\par {\*\bkmkend bk9}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMaster\bxe }{\rxe bk9}}}{\*\bkmkend bk10}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event loop}{\rxe bk10}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Apple Menu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Apple Menu\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 apple menu\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Looking at a menu bar from a fairly typical program, you see one major difference between the full-fledged program\rquote s menu bar and the one in the programs we have been creating in this lesson.  The difference is the distinctive Apple menu on the left side of the menu bar.  There are two reasons we haven\rquote t created an Apple menu for our programs, yet.  The first is that you need to know a couple of special tricks.  The other reasons is even better, in a way:  we haven\rquote t needed one, yet.\par Traditionally, the Apple menu serves two purposes.  At the top of most Apple menus is a menu item called About.  The about menu generally brings up some sort of alert that tells you the name of the program you are running and its version number.  This is also a great place for shareware authors to put those details about where to send money, as well as the traditional spot for any copyright notice.\par Under the About menu you will generally find a list of NDAs, little desktop programs that run from almost any desktop program.\par There are two pieces of information you need to know to create an Apple menu.  The first is how to create the name of the menu itself.  After all, the rainbow Apple isn\rquote t something you can type as a menu name!  Apple Computer solves this problem by using the @ character for the apple character.  When you use an @ character, with no other characters at all, as the name of a menu, the Menu Manager draws the rainbow Apple instead of an @ character.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 green apple bug}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color replace highlighting}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Menu Manager inverts the area around the name of a menu when you pull it down.  It reverses the area by flipping each pixel in the area to exactly the opposite color.  For some peculiar reasons that are pretty hard to understand until you learn about color pallets in a later lesson, reversing the rainbow apple turns the entire apple character green or purple, depending on whether you are using 320 mode graphics or 640 mode graphics.  Of course, most programs leave the rainbow apple in place when you pull down a menu, and only reverse the area around the apple, turning it black.  To perform this trick, the Menu Manager uses a different mechanism to reverse the area on the menu bar.  This technique, which the toolbox reference manuals call color replace highlighting, is used to reverse the menu name when you put an X character in the menu name\rquote s control character sequence.\par Putting all of this together, we can create an apple menu with a rainbow apple and an about item with this menu string:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuHand = NewMenu(                     /* create the apple menu */\par    ">>@\\\\XN1\\r"\par    "--About...\\\\N257\\r"\par    ".\\r");\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 InsertMenu(menuHand, 0);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 2-5.  Add an apple menu to the menu bar for the Quit program.  (Use the version from your solution to Problem 2-4.)  The apple menu should have a menu number of 1, which it will if you use the menu string shown above.  The current version of the Quit program uses 1 for the menu number of the File menu.  Two menus cannot have the same menu number, so be sure and change the menu number for the File menu to 2.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Supporting NDAs}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Supporting NDAs\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk12}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Supporting New Desk Accessories turns out to be very easy \endash  at least, it\rquote s easy if you use }{\f6\fs20 TaskMaster}{\f4 , like we are now doing.  }{\f6\fs20 TaskMaster}{\f4  handles all sorts of messy details for us.  }{\f6\fs20 TaskMaster}{\f4  keep track of when an NDA is selected from the apple menu, starting the desk accessory when one is selected.  }{\f6\fs20 TaskMaster}{\f4  also checks to see if an event should be handled by a desk accessory that has already been opened, pulling it to front if the desk accessory window isn\rquote t the active window, passing menu commands to the desk accessory, and so forth.  You get all of this almost for free.  There are only four things you have to do to support desk accessories in your program:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Make a call to }{\f6\fs20 FixAppleMenu}{\f4  to add the desk accessories to your apple menu.\par 2.\tab Use }{\f6\fs20 TaskMaster}{\f4 , and set the }{\f6\fs20 wmTaskMask}{\f4  codes }{\f6\fs20 tmMenuKey}{\f4 , }{\f6\fs20 tmUpdate}{\f4 , }{\f6\fs20 tmFindW}{\f4 , }{\f6\fs20 tmMenuSel}{\f4 , }{\f6\fs20 tmOpenDA}{\f4 , }{\f6\fs20 tmSysClick}{\f4 , }{\f6\fs20 tmDragW}{\f4 , }{\f6\fs20 tmContent}{\f4 , }{\f6\fs20 tmClose}{\f4 , }{\f6\fs20 tmZoom}{\f4 , }{\f6\fs20 tmGrow}{\f4 , and }{\f6\fs20 tmScroll}{\f4 .\par 3.\tab Create a few standard menus and menu items that desk accessories expect to find, using reserved menu item numbers.\par 4.\tab Start up all of the standard tools that desk accessories assume are started.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Call FixAppleMenu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Call FixAppleMenu\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk11}\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 FixAppleMenu}{\f4  has  single parameter, the menu number for the apple menu.  You should call }{\f6\fs20 FixAppleMenu}{\f4  after you have created all of the menus in the menu bar, but right before you call }{\f6\fs20 FixMenuBar}{\f4  to calculate the size of each menu.  The Menu Manager takes care of all of the details of looking for desk accessories, figuring out what name to use, and adding them to the apple menu.\par Assuming the menu number of the apple menu is 1, here\rquote s the call to }{\f6\fs20 FixAppleMenu}{\f4 :\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 FixAppleMenu(1);                        /* add desk accessories */\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Actually, you can pass any menu number to }{\f6\fs20 FixAppleMenu}{\f4 , and it will add the desk accessories to the menu you specify.  The convention is to place desk accessories in the apple menu, but if you have some peculiar requirement, you can add them to any menu you prefer.\par {\*\bkmkend bk11}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixAppleMenu}{\rxe bk11}}}{\v\f4 \par }{\f4 \par Problem 2-6.  Start with your solution to Problem 2-5.  Call }{\f6\fs20 FixAppleMenu}{\f4  to add the desk accessories to your apple menu.\par You can run the program, but don\rquote t select any desk accessories, yet.  There\rquote s one more step you need to make before you can use desk accessories from your program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Use }{\b\f6 TaskMaster}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Use }{\b\v\f6 TaskMaster}{\b\v\f4 \tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Hey, you\rquote re already doing this, right?\par I did cheat a little.  When I listed the }{\f6\fs20 wmTaskMask}{\f4  bits that should be set for a desk accessory, I included a few that aren\rquote t strictly necessary, but that help things out in the long run.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Standard Menu Items}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Standard Menu Items\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you write an NDA you are allowed to assume that certain menu items exist.  The Menu Manager identifies menu items by a menu item number, so these menus must have a fixed menu item number.  The Menu Manager actually blocks off a whole series of menu item numbers for its own use \endash  when you create a menu item, you must use a menu item number of 256 or higher (the maximum menu item number is 65534).  The Menu Manager uses menu item numbers 0 and 65535 for its own internal bookkeeping, and blocks off menu item numbers 1 to 249 for numbering the NDA menu items.\par The remaining menu item numbers, 250 to 255, must be defined.  These are the ones NDAs assume exist.  Table 2-4 shows a list of the menu item numbers, along with the traditional menu name and menu item name.\par \par }\pard \qj\li2880\ri1800\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx4320\tx5760\adjustright {\f4 Menu ID\tab Menu Name\tab Menu Item Name\par }\pard \qj\li2880\keepn\widctlpar\tx4320\tx5760\adjustright {\f4 250\tab Edit\tab Undo\par 251\tab Edit\tab Cut\par 252\tab Edit\tab Copy\par 253\tab Edit\tab Paste\par 254\tab Edit\tab Clear\par 255\tab File\tab Close\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 2-4:  Required Menu Items\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par It\rquote s fair to ask what would happen if you didn\rquote t put these menus in your program, or if you switched the menu items around.  If you leave the menu items out altogether you rob some desk accessories of important capabilities, since using these menu commands is probably the only way to get the desk accessory to do things like cutting text or reversing some action with Undo.  Using the wrong menu item numbers is even worse:  the desk accessory could execute the wrong command, or a user might select a command and expect it to work, but the desk accessory might not recognize the command.\par \par Problem 2-7.  Starting with your solution to Problem 2-6, create a program with all of the required menu items.\par The first menu should be an apple menu.  It should include an About item, and the desk accessories should appear under the About item.\par The second menu should be the File menu.  It should have two items, Close and Quit, in that order.  They should have key equivalents of W and Q, respectively.\par The last menu is the Edit menu.  The Edit menu should have four menu items; they are Undo, with a key equivalent of Z; Cut, with a key equivalent of X; Copy, with a key equivalent of C; Paste, with a key equivalent of V; and Clear.  The menu items should appear in the order listed.\par You can use your program to run NDAs as soon as all of these new menu items are installed.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Minimal Tools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Minimal Tools\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 NDAs are allowed to assume that certain tools have already been started.  The tools that must be started to support NDAs are shown in Table 2-5.  All of these tools are started by }{\f6\fs20 startdesk}{\f4 , which is what we have been using so far to start the tools.\par \par }\pard \li3600\keepn\widctlpar\adjustright {\f4 Tool Locator\par Memory Manager\par Miscellaneous Tool Set\par QuickDraw II\par Event Manager\par Window Manager\par Menu Manager\par Control Manager\par LineEdit Tool Set\par Dialog Manager\par Scrap Manager\par Desk Manager\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 2-5:  Minimum Tools for NDA Support\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk12}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA\:supporting}{\rxe bk12}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Customizing Your Menu Items}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Customizing Your Menu Items\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu options}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu control characters}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 By now you\rquote ve used three different control codes in your menus and menu items.  These control codes let you set the menu number or menu item number, define keyboard equivalents, and use color replace to avoid green-apple menu sickness.  There are several other control codes that we haven\rquote t used yet.  It\rquote s time to get organized and list all of the control codes that are available to you.\par \par }\pard \qj\fi-1440\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 Character\tab Description\par }\pard \qj\fi-1440\li2160\ri360\keep\keepn\widctlpar\adjustright {\f4 *\tab The two characters that follow this one are used as keyboard equivalents.  The first of the characters is shown in the menu when you pull the menu down.  Most of the time, the first letter will be an uppercase letter or an unshifted non-alphabetic keyboard key, while the second letter will be the lowercase equivalent of the uppercase letter or the shifted equivalent of the unshifted key.\par }\pard \qj\fi-1440\li2160\ri360\widctlpar\adjustright {\f4 B\tab Use bold text for the menu item.\par C\tab Mark the menu item with the character that follows this one.  This is generally a check mark, which is }{\f6\fs20 '\\x12'}{\f4 .\par D\tab Dim (disable) the menu item.\par H\tab This character is used before a two-byte sequence which defines the menu number or menu item number.  From C, it\rquote s generally best to use N, instead.\par I\tab Use italicized text for the menu item.\par N\tab This character is followed by one or more decimal digits.  The resulting number is used as the menu number or menu item number, depending on whether you are defining a menu or a menu item.\par U\tab Underline the text for the menu item.  (But see the note, below!)\par V\tab Place a dividing line under the item.\par }\pard \qj\fi-1440\li2160\ri360\keepn\widctlpar\adjustright {\f4 X\tab Use color replace mode to avoid green-apple menu sickness.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 2-6:  Menu String Control Characters\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Let\rquote s briefly go over the new menu string control codes to see what they are for.  At the end of this section, you will also get a chance to create a program that demonstrates all of these control codes.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 italics}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 bold}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 underline}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Three of the new control codes are used to control the appearance of the text.  B creates boldface text, I italicizes the text, and U underlines the characters.  You can use these characters in combination, too, so you can create bold italicized text.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 system font}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 underline}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There is one minor problem with underlining: it doesn\rquote t usually work.  The character set that is used by the Menu Manager to draw text is called the system font, and the default system font doesn\rquote t have room to underline the text, so it doesn\rquote t let you try.  Using the default system font, you can tell the Menu Manager to underline the text, but you\rquote ll be ignored.  You could change the system font \endash  but that causes more problems that it cures.  Unless you\rquote re really desperate, it\rquote s best to ignore the underline option for the menus.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:check mark}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 check mark\:see menus}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You\rquote ve probably used some programs that placed a check mark beside a menu item when you selected some option.  For example, many font menus put a check mark beside the current font and font size.  The C option lets you create a menu item that starts off with a character to the left of the menu item name.  While you generally use a check character for this character, you can actually put in any character you like using the C option.\par There\rquote s a problem with the check mark character, of course.  Careful hunting on your trusty keyboard will reveal that there is no such thing as a check mark character.  As it turns out, many Apple II}{\f4\fs20 GS}{\f4  fonts have more than the standard printable characters you see on your keyboard.  Some of these are special foreign characters, like the German \u223\'a7, while some are special characters, like \u8730\'c3.  To get these from C, you must use an escape sequence to specify a numeric value for the character.  As an example, the line\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20    "--Check Me!\\\\N300C\\x12\\r"\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 defines a menu item with a check mark.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:disabled}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are times when a particular menu command just doesn\rquote t make sense.  If there aren\rquote t any open windows, it doesn\rquote t make much sense to use the Close command, for example.  Any time a menu command can\rquote t be used, you can (and should!) disable it.  A disabled menu item is dimmed, with some of the pixels turned off, and you can\rquote t select the menu item.  The D control character lets you define a menu item that starts out dimmed.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items\:separators}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Menus can get pretty long, and it helps to organize them a bit when this happens.  As a general rule of thumb, menus are divided up based on groups of similar commands.  A classic example is the apple menu, which has an about item as the first item in the menu, and has a list of desk accessories under the about item.  These two separate classes of menu items are divided with a separator.\par There are two ways to create a separator on the Apple II}{\f4\fs20 GS}{\f4 .  The V control code is one way; this option draws a line just below the menu item containing the V.  Another way is to define a menu item with a title string of }{\f6\fs20 '-'}{\f4 .  The Menu Manager treats this as a special case, drawing dashes across the entire menu bar instead of just writing one character.  (You should dim this menu item, too, using the D character.)\par Most if these control codes can only be used for menu items.  Menus don\rquote t need keyboard equivalents, so the * control code can only be used for menu items.  Menus also don\rquote t use dividing lines or check marks, so you can\rquote t use C or V, either.  The three questionable calls are B, I and U, which control the appearance of the text.  I guess Apple decided that giving programmers control over the style of text used in the menu bar was a bad idea, so you can\rquote t use those control codes with a menu, either.\par \par Problem 2-8.  This problem creates a menu sampler program that you can use to explore the various menu item options we\rquote ve covered in this section.\par Start with your solution to Problem 2-7.  In the apple menu, put a separator under the About... command using }{\f6\fs20 '-'}{\f4  as the menu item title.  Be sure and use a D character in the control character list to disable the menu item.\par Add a new menu to the right of the Edit menu; this menu will show the various styles you can use for a menu item.  Call this menu Style, and include these menu items:  Bold, Underline, Italic, Bold Underline, Bold Italic, Underline Italic, and Bold Underline Italic.  Put in the proper combination of control characters to show off each of these text styles.  (Underline won\rquote t work, but you can see that for yourself.)\par The last menu should be called Options.  This menu should have three menu items:  Separator, Dimmed, and Checked.  Use the V control code with the first menu item to separate it from the other two.  Dim the menu item Dimmed, and put a check character to the left of the menu item Checked.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1030{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw701\pich203\picwgoal14020\pichgoal4060\macpict\bliptag-622926681\blipupi72{\*\blipuid dadee4a786d3654f1caf5f1020c1aeef}1f5e0000000000cb02bd1101a00082a0008e01000a0000000002d0048098005800000000007402c000000000007402bd00000000007402bd000102a90002a90007033fffffc0ad0027033fffffc0f3000003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc0027033fffffc0f3000003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc0027033fffffc0f3000003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc0027033fff1fc0f3000003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc0027033fff1fc0f3000003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc0027033ffc3fc0f3000003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc002f033ffc3fc0f3000503e0e78fffe0f900050f83f39fff80f900060fc3ffffc7fff0ec000407e1ffffe7feff00e0fc002f033f0307c0f3000503e0e78fffe0f900050f83f39fff80f900060fc3ffffc7fff0ec000407e1ffffe7feff00e0fc002e033f0307c0f3000503e7ffcfffe0f900050f9ff3fe7f80f900060f99cfffe7fff0ec000307ccffe7fdff00e0fc002e033c000fc0f3000503e7ffcfffe0f900050f9ff3fe7f80f900060f99cfffe7fff0ec000307ccffe7fdff00e0fc002f033c000fc0f3000503e7c7cf87e0f900050f9f831c1f80f900060f9f8399e7c3f0ec000807ccc1c1c7870787e0fc002f033c001fc0f3000503e7c7cf87e0f900050f9f831c1f80f900060f9f8399e7c3f0ec000807ccc1c1c7870787e0fc002f033c001fc0f3000503e1e7cf33e0f900050f87339e7f80f900060fc3cf99e799f0ec000807cccce7e733333fe0fc002f033c0003c0f3000503e1e7cf33e0f900050f87339e7f80f900060fc3cf99e799f0ec000807cccce7e733333fe0fc002f033c0003c0f3000503e7e7cf03e0f900050f9f339e7f80f900060ff9cf91e781f0ec000807cccce7e7333387e0fc002f033e0007c0f3000503e7e7cf03e0f900050f9f339e7f80f900060ff9cf91e781f0ec000807cccce7e7333387e0fc002f033e0007c0f3000503e7e7cf3fe0f900050f9f339e4f80f900060f99c9c9e79ff0ec000807cccce4e73333f3e0fc002f033f041fc0f3000503e7e7cf3fe0f900050f9f339e4f80f900060f99c9c9e79ff0ec000807cccce4e73333f3e0fc002f033f041fc0f3000503e7c38787e0f900050f83830f1f80f900060fc3e3b9c3c3f0ec000807e1c1f1c3873387e0fc002f033fffffc0f3000503e7c38787e0f900050f83830f1f80f900060fc3e3b9c3c3f0ec000807e1c1f1c3873387e0fc002b033fffffc0f3000003fdff00e0f900000ffdff0080f900060fffffc3fffff0ec000207ffcffcff00e0fc002b033fffffc0f3000003fdff00e0f900000ffdff0080f900060fffffc3fffff0ec000207ffcffcff00e0fc0027033fffffc0f3000003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc0025003ff1ff010003fdff00e0f900000ffdff0080f900000ffcff00f0ec000007faff00e0fc0021003ff1ff010003f7ff03fe00000ff7ff03f800000fe9ff03fe000007f6ff01fe00220030f20002030003f7ff03fe00000ff7ff03f800000fe9ff03fe000007f6ff01fe00220030f20002030003f700030600000cf700031800000ce9000306000006f600010e00220030f20002030003f700030600000cf700031800000ce9000306000006f600010e00220030f20002030003f700030600000cf700031800000ce9000306000006f600010e00250330001e30f50002030003f700030600000cf700031800000ce9000306000006f600010e003b0330001e30f500060300030001e1c0fd000a03186600000c000cc000c0fe000b0c3f1800000c000fc001e01cef0006060000060003c0f900010e003e0630003330000018f8000603e0030001e1c0fd000a03186600000c000cc000c0fe000b0c3f1800000c000fc001e01cef0006060000060003c0f900010e00420630003330000018f8000603e003000330c0fd000a021867f0000c000cc000c0fe000b08031f80000c000ee000e01cef000607f00006000660fd000006fe00010fe042063000333e1e333ef8000603e003000330c0fd000a021867f0000c000cc000c0fe000b08031f80000c000ee000e01cef000607f00006000660fd000006fe00010fe044063000333e1e333ef8002403e003000300c1e1e1e0000d9b67f0000c000ccf87c780000036061f80000c000ee3e0e0fcef001007f00006000603c7c3e6c7cf878d800fe043013000fd330018f8002403e003000300c1e1e1e0000d9b67f0000c000ccf87c780000036061f80000c000ee3e0e0fcef001007f00006000603c7c3e6c7cf878d800fe043013000fd330018f8001203e003000300c33303300010db67f0000c000cfecc0ec00000430c1f80000c000fc770e1dcef001007f000060003c66666670cc60cce000fe0440230003ffe330018f8001203e003000300c33303300010db67f0000c000cfecc0ec00000430c1f80000c000fc770e1dcef001007f000060003c66666670cc60cce000fe0440230003ffe330018f8001203e003000300c331e3f000109b67f0000c000cfecc0ec0000042181f80000c000ee770e1dcef001007f00006000067e666660cc60ccc000fe043013000fd33001bf8001203e003000300c331e3f000109b67f0000c000cfecc0ec0000042181f80000c000ee770e1dcef001007f00006000067e666660cc60ccc000fe043013000fd33001bf8001203e003000330c33033000012ccc7f0000c000cfecc0ec000004b301f80000c000ee770e1dcef001007f000060006660666660cc6cccc000fe046083000333e1e1f0e3330fa001203e003000330c33033000012ccc7f0000c000cfecc0ec000004b301f80000c000ee770e1dcef001007f000060006660666660cc6cccc000fe045083000333e1e1f0e3330fa000403e0030001fde11be0000d8cc7f0000c00078cc7c7800000363f1f80000c000fc3e1f0fcef001007f000060003c3c7c3e607c3878c000fe03d0030f2000403e0030001fde11be0000d8cc7f0000c00078cc7c7800000363f1f80000c000fc3e1f0fcef001007f000060003c3c7c3e607c3878c000fe0260030f2000203e003f7000307f0000cf700031f80000ce9000307f00006fe000006fa00010fe0260030f2000203e003f7000307f0000cf700031f80000ce9000307f00006fe000006fa00010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0210030f2000203e003f7000307f0000cf700031f80000ce9000307f00007f5ff00e0210030f2000203e003f7000307f0000cf700031f80000ce9000307f00007f5ff00e0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe03d0030f2000703e0030001e00180fe0008030787f0000c000780fc000d0c331f80000c000cc000c0000e0cf1000607f00006000282fd000020fe00010fe03d0030f2000703e0030001e00180fe0008030787f0000c000780fc000d0c331f80000c000cc000c0000e0cf1000607f00006000282fd000020fe00010fe03d0030f2000703e0030003300006fe0009020cc7f0000c000cc006fd000c08331f80000c000cc000c00006f0000607f00006000440fd000040fe00010fe03d0030f2000703e0030003300006fe0009020cc7f0000c000cc006fd000c08331f80000c000cc000c00006f0000607f00006000440fd000040fe00010fe0420030f2001503e003000333338f8000000d8cc7f0000c000c0ccf80fe000f361e1f80000c000ccf87c78d861c7c3cf3000b07f000060002222a8a8282a0fe00010fe0420030f2001503e003000333338f8000000d8cc7f0000c000c0ccf80fe000f361e1f80000c000ccf87c78d861c7c3cf3000b07f000060002222a8a8282a0fe00010fe0410030f2000703e0030003333186fe000910ccc7f0000c000c0cc6fd0007430c1f80000c000cfecc04ce060c6666f3000b07f000060004411451444440fe00010fe0410035f2550757e0030003333186fe000910ccc7f0000c000c0cc6fd0007430c1f80000c000cfecc04ce060c6666f3000b07f000060004411451444440fe00010fe0410035f2550757e0030003333186fe0009108cc7f0000c000c0cc6fd000f421e1f80000c000ccccccfcc060c667ef3000b07f00006000222228a22a220fe00010fe0410030f2000703e0030003333186fe0009108cc7f0000c000c0cc6fd000f421e1f80000c000ccccccfcc060c667ef3000b07f00006000222228a22a220fe00010fe0420030f2001503e0030003333186c0000012ccc7f0000c000cccc6c0fe00074b331f80000c000cfecc040c060c6660f3000b07f000060004411451440440fe00010fe0420030f2001503e0030003333186c0000012ccc7f0000c000cccc6c0fe00074b331f80000c000cfecc040c060c6660f3000b07f000060004411451440440fe00010fe0420030f2001503e0030001e1f3c38000000d8787f0000c000787c380fe000f36331f80000c00078cc7c78c0f1e663cf3000b07f00006000282a28a2282a0fe00010fe0420030f2001503e0030001e1f3c38000000d8787f0000c000787c380fe000f36331f80000c00078cc7c78c0f1e663cf3000b07f00006000282a28a2282a0fe00010fe0250030f2000503e003000030fa0003c7f0000cf700031f80000ce9000307f00006f600010fe0250030f2000503e003000030fa0003c7f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0220030f2000203e003f7000307f0000cf700031f80000ce9000307f00006f600010fe0210030f2000203e003f6ff02f0000cf700031f80000ce9000307f00006f600010fe0210030f2000203e003f6ff02f0000cf700031f80000ce9000307f00006f600010fe0220030f2000303e0001ff7ff02f0000cf700031f80000ce9000307f00006f600010fe0290730001e001c00001cf9000303e0001ff7ff02f0000cf700031f80000ce9000307f00006f600010fe0380730001e001c00001cf9000103e0f300030c000780fc000b0c1e1f80000c0003c0000383ef001007f000060003c600000600006000000fe03a09300033000c00000c0018fb000103e0f300030c000780fc000b0c1e1f80000c0003c0000383ef001007f000060003c600000600006000000fe03a09300033000c00000c0018fb000103e0f300030c000cc0fc000b08331f80000c000183000180ef001007f0000600066600000600006000000fe03c0b3000301f0c1e330c1f3e1e36fd000103e0f300030c000cc0fc000b08331f80000c000183000180ef001007f0000600066600000600006000000fe03f0b3000301f0c1e330c1f3e1e36fd000103e0f300150c000c078f8cc0000036301f80000c000187c3e1870ff0001007f00006030607c3c3c663c3e000000fe03f0b300030330c33330c33183338fd000103e0f300150c000c078f8cc0000036301f80000c000187c3e1870ff0001007f00006030607c3c3c663c3e000000fe03e0b300030330c33330c33183338fd000103e0f300160c000c0cccccc0000043301f80000c0001830661831980f1000207f000fd06fe6606c6666000000fe03e0b300030330c30330c33183330fd000103e0f300160c000c0cccccc0000043301f80000c0001830661831980f1000207f000fd06fe6606c6666000000fe03f0b300030330c30330c33183330fd000103e0f300150c000c0ccccdc0000042301f80000c0003060cc30630f0001007f000064c060667e60787e66000000fe03f0b300033330c33330c331b3330fd000103e0f300150c000c0ccccdc0000042301f80000c0003060cc30630f0001007f000064c060667e60787e66000000fe03f0b300033330c33330c331b3330fd000103e0f300150c000cccccc6c000004b331f80000c000306ccc30633f0001007f00006380666660666c6066000000fe03f0b30001e1f1e1e1f1e1f0e1e30fd000103e0f300150c000cccccc6c000004b331f80000c000306ccc30633f0001007f00006380666660666c6066000000fe03f0b30001e1f1e1e1f1e1f0e1e30fd000103e0f300150c0007878f88c00000361e1f80000c00078387c78f1ef0001007f000061003c663c3c663c3e000000fe0340030f2000103e0f300150c0007878f88c00000361e1f80000c00078387c78f1ef0001007f000061003c663c3c663c3e000000fe0240030f2000103e0f300000cfe00020c0780fd00031f80000ce9000307f00006f600010fe0240030f2000103e0f300000cfe00020c0780fd00031f80000ce9000307f00006f600010fe01e0030f2000103e0f300000cf700031f80000ce9000307f00006f600010fe01e0030f2000103e0f300000cf700031f80000ce9000307f00006f600010fe01e0030f2000103e0f300000cf700031f80000ce9000307f00006f600010fe01e0030f2000103e0f300000cf700031f80000ce9000307f00006f600010fe01d0030f2000103e0f300000cf700031f80000ce9000307f00007f5ff00e01d0030f2000103e0f300000cf700031f80000ce9000307f00007f5ff00e01e0030f2000103e0f300000cf700031f80000ce9000407f000003ff6ff00e0280230001efc00093807c0000003800003e0f300000cf700031f80000ce9000407f000003ff6ff00e0360230001efc00093807c0000003800003e0f300030c000f80fc00130c319f80000c000fc001e01c0770001c00003c1cf7000107f0f20038113000330000180000180660000001800003e0f300030c000f80fc00130c319f80000c000fc001e01c0770001c00003c1cf7000107f0f20039113000330000180000180660000001800003e0f300050c000cc00006fe001208319f80000c000ee000e01c0770001c00001cf6000107f0f20039113000301e3e3e363c180663e7c3c183c003e0f300050c000cc00006fe001208319f80000c000ee000e01c0770001c00001cf6000107f0f2003c113000301e3e3e363c180663e7c3c183c003e0f3001e0c000cc7c78f87800036319f80000c000ee3e0e0fc0773f0fc7c7e1c3c7e1ff9000107f0f2003c1130003033331838661807c6666661860003e0f3001e0c000cc7c78f87800036319f80000c000ee3e0e0fc0773f0fc7c7e1c3c7e1ff9000107f0f2003d1130003033331838661807c6666661860003e0f3001f0c000f8ccc060cc000431b1f80000c000fc770e1dc0773b9dcee781c1c773b80fa000107f0f2003d1130003033331830661806066667e183c003e0f3001f0c000f8ccc060cc000431b1f80000c000fc770e1dc0773b9dcee781c1c773b80fa000107f0f2003d1130003033331830661806066667e183c003e0f3001f0c000c0cc7860fc000421b1f80000c000ee770e1dc0773b9dcfe701c1c773f80fa000107f0f2003d013000fe330c1b3066180606666601806003e0f3001f0c000c0cc7860fc000421b1f80000c000ee770e1dc0773b9dcfe701c1c773f80fa000107f0f2003c013000fe330c1b3066180606666601806003e0f3001e0c000c0cc0c6cc00004b0e1f80000c000ee770e1dc0773b9dce0701c1c7738f9000107f0f2009800580074000000cb02c00074000000cb02bd0074000000cb02bd00013c1130001e1e330e303c3c0603e663c3c3c003e0f3001e0c000c0cc0c6cc00004b0e1f80000c000ee770e1dc0773b9dce0701c1c7738f9000107f0f2003c1130001e1e330e303c3c0603e663c3c3c003e0f3001e0c000c07c783878000360e1f80000c000fc3e1f0fc03e3b8fc7c703e3e771ff9000107f0f200300030f2000103e0f3001e0c000c07c783878000360e1f80000c000fc3e1f0fc03e3b8fc7c703e3e771ff9000107f0f200190030f2000103e0f300000cf700031f80000ce9000107f0f200190030f2000103e0f300000cf700031f80000ce9000107f0f200190030f2000103e0f300000cf700031f80000ce9000107f0f200190030f2000103e0f300000cf700031f80000ce9000107f0f200190030f2000103e0f300000cf700031f80000ce9000107f0f20018003ff1ff00e0f300000cf700031f80000ce9000107f0f200180001f1ff00e0f300000cf700031f80000ce9000107f0f200180001f1ff00e0f300000cf700031f80000ce9000107f0f200180001f1ff00e0f300000cf700031f80000ce9000107f0f20012e100000cf700031f80000ce9000107f0f20021e100030c000787fa000f1f80000c0007e000f00e01f000003c1cf5000107f0f20021e100030c000787fa000f1f80000c0007e000f00e01f000003c1cf5000107f0f20020e100030c000cc3fa000e1f80000c00077000700e00e0e0001cf4000107f0f20020e100030c000cc3fa000e1f80000c00077000700e00e0e0001cf4000107f0f20026e100070c000c030787cd80fe00101f80000c000771f0707e00e1f87e1c3c3ef6000107f0f20026e100070c000c030787cd80fe00101f80000c000771f0707e00e1f87e1c3c3ef6000107f0f20025e100060c000c030ccccefd00101f80000c0007e3b870ee00e0e0ee1c1c77f6000107f0f20025e100060c000c030ccccefd00101f80000c0007e3b870ee00e0e0ee1c1c77f6000107f0f20025e100060c000c030fccccfd00101f80000c000ee770e1dc01c1c1dc3838e0f6000107f0f20025e100060c000c030fccccfd00101f80000c000ee770e1dc01c1c1dc3838e0f6000107f0f20025e100060c000cc30c0cccfd00101f80000c000ee770e1dc01c1f9dc3838eef6000107f0f20025e100060c000cc30c0cccfd00101f80000c000ee770e1dc01c1f9dc3838eef6000107f0f20024e100020c0007fe8700ccfd000d1f80000c000fc3e1f0fc03e0f0fcfe7cf6000107f0f20024e100020c0007fe8700ccfd000d1f80000c000fc3e1f0fc03e0f0fcfe7cf6000107f0f20012e100000cf700031f80000ce9000107f0f20012e100000cf700031f80000ce9000107f0f20012e100000cf700031f80000ce9000107f0f20012e100000cf700031f80000ce9000107f0f20012e100000cf700031f80000ce9000107f0f20012e100000cf700031f80000ce9000107f0f20011e100000ff6ff0280000ce9000107f0f20011e100000ff6ff0280000ce9000107f0f2000fe000f6ff0280000ce9000107f0f2000fe000f6ff0280000ce9000107f0f2001bd300100c0006600060000706000001e00001c180f9000107f0f2001bd300100c0006600060000706000001e00001c180f9000107f0f20019d300070c00066000600003fd0003c18000c0f8000107f0f20019d300070c00066000600003fd0003c18000c0f8000107f0f2001cd300110c000667c3e3c6c30e3e1e00c3e1f0c38780fa000107f0f2001cd300110c000667c3e3c6c30e3e1e00c3e1f0c38780fa000107f0f2001cd300020c0006fe660b670306333300c18330c18cc0fa000107f0f2001cd300020c0006fe660b670306333300c18330c18cc0fa000107f0f2001bd300100c000ccccccfcc060c667e018306618318f9000107f0f2001bd300100c000ccccccfcc060c667e018306618318f9000107f0f2001cd300020c000cfecc0b0c060c666001836661831980fa000107f0f2001cd300020c000cfecc0b0c060c666001836661831980fa000107f0f2001bd300100c00078cc7c78c0f1e663c03c1c3e3c78ff9000107f0f2001bd300100c00078cc7c78c0f1e663c03c1c3e3c78ff9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f20020d3000e0c0007e000f00e03b8000e00001e0efe00083e00000783800007f0f20020d3000e0c0007e000f00e03b8000e00001e0efe00083e00000783800007f0f2001fd3000d0c00077000700e03b8000e00000efd00081c1c000380000007f0f2001fd3000d0c00077000700e03b8000e00000efd00081c1c000380000007f0f20020d3001a0c000771f0707e03b9f87e3e3f0e1e3f0f801c3f0fc38787c007f0f20020d3001a0c000771f0707e03b9f87e3e3f0e1e3f0f801c3f0fc38787c007f0f20020d3001a0c0007e3b870ee03b9dcee773c0e0e3b9dc01c1c1dc3838ee007f0f20020d3001a0c0007e3b870ee03b9dcee773c0e0e3b9dc01c1c1dc3838ee007f0f20020d3001a0c000ee770e1dc0773b9dcfe701c1c773f8038383b87071c0007f0f20020d3001a0c000ee770e1dc0773b9dcfe701c1c773f8038383b87071c0007f0f20020d3001a0c000ee770e1dc0773b9dce0701c1c773800383f3b87071dc007f0f20020d3001a0c000ee770e1dc0773b9dce0701c1c773800383f3b87071dc007f0f20020d300140c000fc3e1f0fc03e3b8fc7c703e3e771f007c1e1ffe8f028007f0f20020d300140c000fc3e1f0fc03e3b8fc7c703e3e771f007c1e1ffe8f028007f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000bd300000ce9000107f0f2000ad300000fe8ff00f0f2000ad300000fe8ff00f0f2000ad200003fe9ff00f0f2000ad200003fe9ff00f0f20002a90002a900a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 2-3:  Menus Created in Problem 2-8\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Changing Menu Items on the Fly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Changing Menu Items on the Fly\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 So far, we\rquote ve looked at a lot of ways you can create menus.  Once your program is running, though, you may need to make some changes in the menus to keep up with the changing needs in your program.  We\rquote ll look at a variety of changes you can make, from something as simple as dimming a menu item (or an entire menu) through more complex changes, like adding or removing a menu.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:disabled}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:dimmed}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The simplest and most common change to make in your menus is to dim or undim a menu item.  When you dim a menu item, the Menu Manager erases half of the bits, causing a gray looking appearance like you see in Figure 2-4.  The dimmed menu item also can\rquote t be selected, so there\rquote s no chance the menu item\rquote s item number will be returned as a menu command in your event loop.  The reason this is such a common change is that it\rquote s a change the Apple Human Interface Guidelines actually suggest that you make as your program runs.  When it doesn\rquote t make sense to use a command, you are supposed to dim the menu item so the command can\rquote t be selected.  For example, if there are no open windows, it doesn\rquote t make sense to allow the user to print the contents of a window, so the Print command should be dimmed.  Once the command is available again, the menu item should be changed back to normal.\par All you need to know to dim a menu item is the menu item number; that\rquote s the number you assigned when you created the menu item.  You dim the menu by calling }{\f6\fs20 DisableMItem}{\f4 , passing the menu item number as a parameter, like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 DisableMItem}}}{\v\f6\fs20 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 DisableMItem(256);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The menu item will be dimmed when the menu bar is pulled down again, and the user won\rquote t be able to select the menu item from the menu.  When you want to return the menu command to normal, so it is drawn normally and can be selected, use }{\f6\fs20 EnableMItem}{\f4 :\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 EnableMItem}}}{\v\f6\fs20 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 EnableMItem(256);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1031{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley48\piccropl0\piccropr0\piccropt0\piccropb0\picw389\pich178\picwgoal7780\pichgoal3560\macpict\bliptag-1853436528\blipupi72{\*\blipuid 9186cd90106eab57a0b9dfea0cf22efc}12970000000000b201851101a00082a0008e01000a0000000002d002409800320000000000b201880000000000b201850000000000b20185000102cf0002cf0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee0011043eaeffffbeed000507c1cfffe7c0ee0011043eaeffffbeed000507c1cfffe7c0ee0011043f7fffff7eed000507cfffffe7c0ee0011043f7fffff7eed000507cfffffe7c0ee0011043efefafabeed000507cf8e0f07c0ee0011043efefafabeed000507cf8e0f07c0ee0011043f5f77777eed000507c3ce6667c0ee0011043f5f77777eed000507c3ce6667c0ee0011043efefbbbbeed000507cfce6667c0ee0011043efefbbbbeed000507cfce6667c0ee0011043f7f77777eed000507cfce6667c0ee0011043f7f77777eed000507cfce6667c0ee0011043efebbbabeed000507cf866707c0ee0011043efebbbabeed000507cf866707c0ee0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee0010003ffeff00feed000007fdff00c0ee000f003fecff03f0000007ecff00feff000f003fecff03f0000007ecff00feff000f0030ec000370000006ec00000eff000f0030ec000370000006ec00000eff000f0030ec000370000006ec00000eff000f0030ec000370000006ec00000eff001d05300014100010f3000a1050700000060007c60003f30002061f0eff001d05300014100010f3000a1050700000060007c60003f30002061f0eff001d05300020000008f3000a20807e0000060006000003f3000404180fe0001d05300020000008f3000a20807e0000060006000003f3000404180fe0001d05300010515050f3000a50407e00000600060e3e1ff300041b180fe0001d05300010515050f3000a50407e00000600060e3e1ff300041b180fe0001d05300028208888f3000a08a07e0000060007863333f30004219e0fe0001d05300028208888f3000a08a07e0000060007863333f30004219e0fe0001e05300010111110f4000b0100407e0000060006063333f3000421180fe0001e05300010111110f4000b0100407e0000060006063333f3000421180fe0001d05300020208888f3000a28807e0000060006063333f3000425980fe0001d05300020208888f3000a28807e0000060006063333f3000425980fe000200630001051105111f4000c50407e00000600060f331f3330f500041b180fe000200630001051105111f4000c50407e00000600060f331f3330f500041b180fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe000200630001410001005f4000c10507e000006000282000200a0f50004020a0fe000200630001410001005f4000c10507e000006000282000200a0f50004020a0fe00021073000200000080880f5000c20887e00000600040000010110f5000404110fe00021073000200000080880f5000c20887e00000600040000010110f5000404110fe000260930001051505010051505f7000f50407e00000600020a2a0a0200a2a0a0f800040a080fe000260930001051505010051505f7000f50407e00000600020a2a0a0200a2a0a0f800040a080fe000270a3000282088880a08a28880f8000f08887e00000600050411110141145110f8000401110fe000270a3000282088880a08a28880f8000f08887e00000600050411110141145110f8000401110fe000280a3000101111100111144540f900100100447e000006000202222200222288a8f8000420088fe000280a3000101111100111144540f900100100447e000006000202222200222288a8f8000420088fe00025093000202088880888a288f7000e28887e000006000404111101111451f7000405110fe00025093000202088880888a288f7000e28887e000006000404111101111451f7000405110fe000260930001051105005051445f7000f50507e00000600020a220a00a0a288a0f800040a0a0fe000260930001051105005051445f7000f50507e00000600020a220a00a0a288a0f800040a0a0fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe000320b300014100000500000050005fe000004fd000b10507e0000060007c300000efe0002f000e0fe0000c0fe0004061f0fe000320b300014100000500000050005fe000004fd000b10507e0000060007c300000efe0002f000e0fe0000c0fe0004061f0fe0003002300022fe0008200000088002000002fc001420887e0000060006600000060000019800600000c0fd000404198fe0003002300022fe0008200000088002000002fc001420887e0000060006600000060000019800600000c0fd000404198fe000330b300011105050105444040501fe0522041414000050447e0000060006670f1f060f998180f060f0f1f1c3c7c0001b198fe000330b300011105050105444040501fe0522041414000050447e0000060006670f1f060f998180f060f0f1f1c3c7c0001b198fe0003331300022088088208888028882088882022222000008887e000006000663181986199980f198619998c0c666600021998fe0003331300022088088208888028882088882022222000008887e000006000663181986199980f198619998c0c666600021998fe0003331300011105044104454004541054404041111000100447e0000060006630f1986199b8019f861f980c0c666600021198fe0003331300011105044104454004541054404041111000100447e0000060006630f1986199b8019f861f980c0c666600021198fe0003331300022080888208828088802080882822222000028887e000006000663019986198d819980618198d8c666600025998fe0003331300022080888208828088802080882822222000028887e000006000663019986198d819980618198d8c666600025998fe0002f0330001414fe50015404fc051401051411000050507e0000060007c78f1f0f0f9180fcf00971e3c660001b1f0fe0002f0330001414fe50015404fc051401051411000050507e0000060007c78f1f0f0f9180fcf00971e3c660001b1f0fe0001d0030fd000380000028f400037e000006fd00031800000ff400020fe0001d0030fd000380000028f400037e000006fd00031800000ff400020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000e003fecff03fe000007ebff01e0000e003fecff03fe000007ebff01e0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0001e05300014000014f3000b10507e0000060007c0000380f40004061f0fe0001e05300014000014f3000b10507e0000060007c0000380f40004061f0fe0001e05300022000008f3000b20887e000006000660000180f4000404198fe0001e05300022000008f3000b20887e000006000660000180f4000404198fe0002408300011141404151414f6000e50447e000006000663c7c183e3c3c0f700041b198fe0002408300011141404151414f6000e50447e000006000663c7c183e3c3c0f700041b198fe000230530002a222208fe22f6000e08a87e0000060007c6666186666660f70004219f0fe000230530002a222208fe22f6000e08a87e0000060007c6666186666660f70004219f0fe0002508300014151104111015f7000f0100507e0000060006c7e661866607e0f70004211b0fe0002508300014151104111015f7000f0100507e0000060006c7e661866607e0f70004211b0fe0002308300022202208222220f6000d28887e0000060006660661866666f6000425998fe0002308300022202208222220f6000d28887e0000060006660661866666f6000425998fe0002702300011fe14041514141110f8000f50447e000006000663c7c3c3e3c3c666f800041b198fe0002702300011fe14041514141110f8000f50447e000006000663c7c3c3e3c3c666f800041b198fe000170030fe000020f000037e000006fe000006f000020fe000170030fe000020f000037e000006fe000006f000020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0002705300014000014fe00010140f8000b10547e000006000280000280fe000028f80004020a8fe0002705300014000014fe00010140f8000b10547e000006000280000280fe000028f80004020a8fe0002605300022000008fe00010220f8000a20207e0000060004400001fd000044f8000404040fe0002605300022000008fe00010220f8000a20207e0000060004400001fd000044f8000404040fe0002d0d3000111414041514140101555050fb001250107e000006000222828082a28280202aaa0afb00040a020fe0002d0d3000111414041514140101555050fb001250107e000006000222828082a28280202aaa0afb00040a020fe0002d0530002a222208fe220400a2228888fb001208207e00000600054444410444444014445111fb000401040fe0002d0530002a222208fe220400a2228888fb001208207e00000600054444410444444014445111fb000401040fe0002e0d3000141511041110150011145150fc00130100107e000006000282a220822202a002228a2afb000420020fe0002e0d3000141511041110150011145150fc00130100107e000006000282a220822202a002228a2afb000420020fe0002d0d3000222022082222200222228880fb001228207e00000600044404410444440044445110fb000405040fe0002d0d3000222022082222200222228880fb001228207e00000600044404410444440044445110fb000405040fe0002d02300011fe14071514140141545050fb000850107e000006000222fe8206a28280282a8a0afb00040a020fe0002d02300011fe14071514140141545050fb000850107e000006000222fe8206a28280282a8a0afb00040a020fe000170030fe000020f000037e000006fe000004f000020fe000170030fe000020f000037e000006fe000004f000020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000e003fecff03fe000007ebff01e0000e003fecff03fe000007ebff01e0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0001402300014ee00067e0000060003c0ef00020fe0001402300014ee00067e0000060003c0ef00020fe00017043000220008f000077e00000600066003f000020fe00017043000220008f000077e00000600066003f000020fe0001902300010fe14f100097e000006000603c7c3c0f200020fe0001902300010fe14f100097e000006000603c7c3c0f200020fe0001a05300022220822f100097e0000060006e6630660f200020fe0001a05300022220822f100097e0000060006e6630660f200020fe0001a05300011111011f100097e000006000666630660f200020fe0001a05300011111011f100097e000006000666630660f200020fe0001a05300022220a22f100097e000006000666636660f200020fe0001a05300022220a22f100097e000006000666636660f200020fe0001d073000141404141110f3000a7e0000060003c3c1c3c666f300020fe0001d073000141404141110f3000a7e0000060003c3c1c3c666f300020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000f0030ec00037e000006ec00020fe0000e003fecff03fe000007ebff01e0000e003fecff03fe000007ebff01e0000f0001ecff00fefe00003fecff01e0000f0001ecff00fefe00003fecff01e00002cf0002cf00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 2-4:  Dimmed Menu Compared to Normal Menu with Some Dimmed Items\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Dimming a menu is almost as easy as dimming a menu item.  Each of the menus has a set of flags that the menu manager uses to keep track of the menu.  To dim an entire menu, you need to call }{\f6\fs20 SetMenuFlag}{\f4  to dim the menu; there\rquote s a predefined constant in Menu.h that makes this pretty easy:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SetMenuFlag}}}{\v\f6\fs20 \par }{\f6\fs20 SetMenuFlag(disableMenu, 2);                    \{disable menu 2\}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The same call with a different flag word enables the menu:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }{\f6\fs20 SetMenuFlag(enableMenu, 2);                     \{enable menu 2\}\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f6\fs20 SetMenuFlag}{\f4  changes the internal flags for the menu, but it does not draw the menu in the new state.  To update the appearance of the menu bar, be sure to follow the call to }{\f6\fs20 SetMenuFlag}{\f4  with a call to }{\f6\fs20 DrawMenuBar}{\f4 .\par }\pard \qj\fi360\widctlpar\adjustright {\f4 A useful side effect of disabling a menu is that all of the menu items in the menu are automatically disabled, too.  When you enable the menu, the menu items that were automatically disabled are enabled, although any that you specifically disabled stay disabled.  That makes disabling an entire menu a great way to go when all of the options in the menu need to be turned off at once.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:checked}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The second most common change you will make in your menus as your program runs is to check or uncheck various menu items.  I\rquote m sure you\rquote ve used menus where options could be turned on or off, or you could select one of several options from a list of choices.  In both of these cases it\rquote s common to check the menu item when it is the active choice.  For one example of many, pull down the Languages menu in the PRIZM desktop programming environment.  There is a check mark beside the language for the front window.  When you select a new language, the new one is checked, and the check mark is erased from the original choice.\par Well, even though your programs need to be consistent, the folks who wrote the Menu Manager weren\rquote t.  There\rquote s yet another way to handle checking and unchecking a menu item.  Instead of two separate calls, like }{\f6\fs20 DisableMItem}{\f4  and }{\f6\fs20 EnableMItem}{\f4 , or even calls to get and set flags, this time everything is handled with a single call.  }{\f6\fs20 CheckMItem}{\f4  takes two parameters, a boolean flag that tells the Menu Manager to put a check mark by the menu item if the flag is }{\f6\fs20 TRUE}{\f4 , and to erase any check mark that might be there if the flag is }{\f6\fs20 FALSE}{\f4 .  The second parameter is the menu item number.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 CheckMItem}}}{\v\f6\fs20 \par }{\f6\fs20 CheckMItem(TRUE, 256);                          /* check menu item 256 */\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 CheckMItem(FALSE, 256);                         /* uncheck menu item 256 */\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 2-9.  This problem looks a little long, but that\rquote s mostly because I wanted to describe exactly what you are supposed to do.  As you read along, check out Figure 2-5, which is a screen capture of the menu you are creating in this problem.\par Start with our standard program that has a Quit menu and supports NDAs (the solution to Problem 2-7).  Add a menu called Beeps.  This menu will have three groups of commands.  The first is called \ldblquote Beep\rdblquote .  This menu item tells the program to beep the speaker by calling }{\f6\fs20 SysBeep}{\f4 .\par Right after \ldblquote Beep\rdblquote  is a series of three menu items, named \ldblquote 1\rdblquote , \ldblquote 2\rdblquote  and \ldblquote 3\rdblquote .  Start with \ldblquote 1\rdblquote  checked, and set up your program so selecting one of the other two numbers will remove the check mark from \ldblquote 1\rdblquote  and check the selected number.  Of course, when the user selects a different number, the newly selected one will be checked.  The beep command should beep one, two or three times, depending on which of these items is selected.\par The last item is called \ldblquote Silence\rdblquote .  When you select silence, the beep command should be dimmed and disabled, but you should still be able to select the number of beeps.  The \ldblquote Silence\rdblquote  menu item should also be checked.  Selecting it again returns the beep command to normal, and should turn off the check mark.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1032{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex48\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw90\pich154\picwgoal1800\pichgoal3080\macpict\bliptag-1590856864\blipupi72{\*\blipuid a12d7360a697c6e72da50b6499d4236c}060700000000009a005a1101a00082a0008e01000a0000000002d0024098000c00000000009a006000000000009a005a00000000009a005a000102f50002f50008003ffcff00c0fc0008003ffcff00c0fc0008003ffcff00c0fc0008003ffcff00c0fc0008003ffcff00c0fc0008003ffcff00c0fc0009013e0ffdff00c0fc0009013e0ffdff00c0fc0009013e67fdff00c0fc0009013e67fdff00c0fc000a063e670f0e0f0fc0fc000a063e670f0e0f0fc0fc000a013e0efe66017fc0fc000a013e0efe66017fc0fc000a063e660606670fc0fc000a063e660606670fc0fc000a063e667e7e67e7c0fc000a063e667e7e67e7c0fc000a063e0f0f0e0f0fc0fc000a063e0f0f0e0f0fc0fc000a063ffffffe7fffc0fc000a063ffffffe7fffc0fc0008003ffcff00c0fc0008003ffcff00c0fc0007003ff8ff01f00007003ff8ff01f000070030f800017000070030f800017000070030f800017000070030f800017000090230003efa00017000090230003efa000170000902300033fa00017f000902300033fa00017f000c053000331e1e3efd00017f000c053000331e1e3efd00017f000b0230003efe33fd00017f000b0230003efe33fd00017f000c053000333f3f33fd00017f000c053000333f3f33fd00017f000c05300033303033fd00017f000c05300033303033fd00017f000c0530003e1e1e3efd00017f000c0530003e1e1e3efd00017f000b0030fd000030fd00017f000b0030fd000030fd00017f00070030f800017f00070030f800017f0006003ff7ff000006003ff7ff0000070030f800017f00070030f800017f00070030f800017f00070030f800017f00090230000cfa00017f00090230000cfa00017f00090230003cfa00017f00090230003cfa00017f00090230180cfa00017f00090230180cfa00017f00090230300cfa00017f00090230300cfa00017f00090232600cfa00017f00090232600cfa00017f00090231c00cfa00017f00090231c00cfa00017f00090230803ffa00017f00090230803ffa00017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00090230001efa00017f00090230001efa00017f000902300033fa00017f000902300033fa00017f000902300003fa00017f000902300003fa00017f000902300006fa00017f000902300006fa00017f00090230000cfa00017f00090230000cfa00017f000902300018fa00017f000902300018fa00017f00090230003ffa00017f00090230003ffa00017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00090230001efa00017f00090230001efa00017f000902300033fa00017f000902300033fa00017f000902300003fa00017f000902300003fa00017f00090230000efa00017f00090230000efa00017f000902300003fa00017f000902300003fa00017f000902300033fa00017f000902300033fa00017f00090230001efa00017f00090230001efa00017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f0006003ff7ff000006003ff7ff0000070030f800017f00070030f800017f00070030f800017f00070030f800017f000b0430001e1870fc00017f000b0430001e1870fc00017f000b043000330030fc00017f000b043000330030fc00017f000d0b300030383078f87878007f000d0b300030383078f87878007f000c0430001e1830fdcc02007f000c0430001e1830fdcc02007f000d0b3000031830fcccc0fc007f000d0b3000031830fcccc0fc007f000d0b3000331830c0ccccc0007f000d0b3000331830c0ccccc0007f000d0b30001e3c7878cc7878007f000d0b30001e3c7878cc7878007f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f00070030f800017f0006003ff7ff000006003ff7ff0000060001f7ff0000060001f7ff000002f50002f500a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 2-5:  The Beeps Menu\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Changing the Text for a Menu Item}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Changing the Text for a Menu Item\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items\:changing text}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetMItem}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Another important change you might want to make to a menu while your program is running is to change the name of a menu item, or even add a new one or completely get rid of a menu item that already exists.  One of the most common reasons for changing a menu item is a variation on using a check mark next to a menu item.  The idea is to show an option the user might pick, like \ldblquote Hide Palette\rdblquote  in a paint program.  When the user picks this option, the paint pallet would disappear.  Somehow, just checking or unchecking this option doesn\rquote t get across the full meaning of what\rquote s happened, so you might want to change the entire menu item from \ldblquote Hide Palette\rdblquote  to \ldblquote Show Palette.\rdblquote   The }{\f6\fs20 SetMItem}{\f4  call is used to change the name of the menu, like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 SetMItem("--Show Palette", 263);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 In this particular case, we\rquote re changing the text for menu item 263, which reads \ldblquote Hide Palette\rdblquote  before we make the call to the Menu Manager.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s a few technical details I\rquote ve swept under the rug by making the change the way it\rquote s shown.  Let\rquote s go over those now.\par The string you pass as a parameter to }{\f6\fs20 SetMItem}{\f4  looks a lot like the original menu item string that you\rquote ve been using to create new menus at the start of your program.  You still need a two character sequence at the start of the menu name.  As with the original menu item string, the new name has to end with either a null character or a return character.  The string has to be in a permanent, fixed location in memory.  As it turns out, string constants in ORCA/C happen to be in a fixed location in memory, and they also happen to be followed by a null character.\par Thinking back for a moment, the original menu item string had some other stuff tacked onto the end of the string.  The other characters were the control characters, starting with a backslash and continuing with things like the menu item ID number.  When you use }{\f6\fs20 SetMItem}{\f4  to change a menu item, you don\rquote t use any of these control characters.  The new name for the menu item inherits all of the control code information from the original menu item.\par Putting all of this together, here\rquote s a subroutine you could call to change a menu item back and forth between \ldblquote Hide Palette\rdblquote  and \ldblquote Show Palette.\rdblquote   This subroutine assumes you have defined a global variable called }{\f6\fs20 paletteString}{\f4 ; this is the string number for the currently visible palette string, which will be 0 for the original string, \ldblquote Hide Palette,\rdblquote  and 1 for the alternate string, \ldblquote Show Palette.\rdblquote   Somewhere in your program\rquote s initialization section, this variable should be set to 0.  Of course, the reason the variable is a global variable is that the value of the variable has to survive between calls to }{\f6\fs20 ChangePalette}{\f4 , and local variables go away between subroutine calls.  }{\f6\fs20 ChangePalette}{\f4  also assumes you\rquote ve defined a global constant called }{\f6\fs20 options_Palette}{\f4 , which is the menu item number for this menu item.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * ChangePalette\par *\par * Change the menu item string for the palette choice\par *\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 ***************************************************************/\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 void ChangePalette (void)\par \par \{\par if (paletteString) \{\par    paletteString = FALSE;\par    SetMItem("--Show Palette", options_Palette);\par    \}\par else \{\par    paletteString = TRUE;\par    SetMItem("--Hide Palette", options_Palette);\par    \}\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 2-10.  Start with the solution to Problem 2-7 and add a new menu called Options.  Use the subroutine we just developed to switch a menu item from \ldblquote Hide Palette\rdblquote  to \ldblquote Show Palette\rdblquote  and back again as the menu item is selected.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Other Things You Should Know About Menus}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Other Things You Should Know About Menus\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 At this point, you know enough about the Menu Manager to create most of the menus you are likely to see in working desktop programs.  You also know enough about manipulating those menus once they are created to do most of the common things you see done with menus, like dimming them or using check marks.  There\rquote s a lot more to the Menu Manager than we\rquote ve covered so far, though.  Occasionally, as we write more advanced desktop programs, we\rquote ll come back to the Menu Manager and talk about some of these capabilities that weren\rquote t covered in this section.  By now, though, you\rquote re probably starting to see that the toolbox is truly a huge collection of subroutines with vast capabilities.  There are some genuinely neat features of the Menu Manager that we just won\rquote t get to in this course due to lack of time and respect for America\rquote s forests.\par While the Menu Manager is still fresh in your mind, I\rquote d like to spend a moment and look at some of the capabilities that we\rquote ve skipped.  Like I said, some of these will pop up again later, and others won\rquote t.  For the ones that aren\rquote t covered later in the course... well, that\rquote s why I\rquote ve been encouraging you to look up toolbox calls in the toolbox reference manuals as you work through this course.  If you do that, you\rquote ll get used to finding information in the toolbox manuals and using that information in your own programs.  I\rquote ve talked to a lot of people who have been scared off by the toolbox manuals, and I really can\rquote t blame those of you who have found them to be, shall we say, obtuse.  Remember, though:  the toolbox reference manuals were never written to teach you to use the toolbox.  They were written for people who already know basically what the toolbox could do, and who wanted to find information quickly.  This course will get you to the point that you know the concepts behind the toolbox, and hopefully you\rquote ll get used to the reference manuals as you go.  In other words, even if you\rquote ve found the toolbox reference manuals tough to use, once you finish this course, they should make a lot of sense, and should become a regularly used part of your programming reference library.\par Getting back to the topic, you\rquote ve seen how to create and modify menu items.  You can also add menu items to a menu, or remove menu items that are already in a menu.  There are a lot of reasons to do this; one common one is to create a menu that lists all of the open windows on the desktop.  That way, you can use the menu to check to see what windows are available and bring them to front, even if the window you want is buried under a lot of other windows.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1033{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw125\pich154\picwgoal2500\pichgoal3080\macpict\bliptag976023626\blipupi72{\*\blipuid 3a2cf04ac204d9c2665d8f07e161752a}075d00000000009a007d1101a00082a0008e01000a0000000002d0024098001000000000009a008000000000009a007d00000000009a007d000102f10002f10008003ffaff00c0fa0008003ffaff00c0fa0008003ffaff00c0fa0008003ffaff00c0fa0008003ffaff00c0fa0008003ffaff00c0fa000c043cf39fffcffeff00c0fa000c043cf39fffcffeff00c0fa000c043cf3ffffcffeff00c0fa000c043cf3ffffcffeff00c0fa000c083c931c1e0e19e70fc0fa000c083c931c1e0e19e70fc0fa000c083c939cccccc9267fc0fa000c083c939cccccc9267fc0fa000c083c939cccccc9270fc0fa000c083c939cccccc9270fc0fa000c023e679cfecc02cfe7c0fa000c023e679cfecc02cfe7c0fa000c083e670cce0e1ccf0fc0fa000c083e670cce0e1ccf0fc0fa0008003ffaff00c0fa0008003ffaff00c0fa0008003ffaff00c0fa0008003ffaff00c0fa0006003ff3ff000006003ff3ff0000070030f400010300070030f400010300070030f400010300070030f4000103000b0430003f1870f8000103000b0430003f1870f8000103000b0430000c0030f8000103e00b0430000c0030f8000103e00c0530000c383078f9000103e00c0530000c383078f9000103e00c0530000c1830ccf9000103e00c0530000c1830ccf9000103e00c0530000c1830fcf9000103e00c0530000c1830fcf9000103e00c0530000c1830c0f9000103e00c0530000c1830c0f9000103e00c0530000c3c7878f9000103e00c0530000c3c7878f9000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e00d0230001efe000030fa000103e00d0230001efe000030fa000103e00d0630003318000030fa000103e00d0630003318000030fa000103e00d063000303e1f1e33fa000103e00d063000303e1f1e33fa000103e00d0630001e18333336fa000103e00d0630001e18333336fa000103e00d063000031833303cfa000103e00d063000031833303cfa000103e00d063000331b333336fa000103e00d063000331b333336fa000103e00d0630001e0e1f1e33fa000103e00d0630001e0e1f1e33fa000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e006003ff3ff00e006003ff3ff00e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e00e07300001e30001c1c0fb000103e00e07300001e30001c1c0fb000103e00e07300003330000c0c0fb000103e00e07300003330000c0c0fb000103e00e0730180303e1e0c0c0fb000103e00e0730180303e1e0c0c0fb000103e00e07303001e33330c0c0fb000103e00e07303001e33330c0c0fb000103e00e073260003333f0c0c0fb000103e00e073260003333f0c0c0fb000103e00e0731c003333300c0c0fb000103e00e0731c003333300c0c0fb000103e00e07308001e331e1e1e0fb000103e00e07308001e331e1e1e0fb000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e00f0030fd000406003c03c0fd000103e00f0030fd000406003c03c0fd000103e00f0030fd00040600660660fd000103e00f0030fd00040600660660fd000103e0110f300003e363c7c00606607c3e3c0003e0110f300003e363c7c00606607c3e3c0003e0110f300003338666600c06606666600003e0110f300003338666600c06606666600003e0110f300003330666601803e066663c0003e0110f300003330666601803e066663c0003e0110f300003330666603000606666060003e0110f300003330666603000606666060003e0110f300003e303c7c67e63c67c3e3c0003e0110f300003e303c7c67e63c67c3e3c0003e00d02300003fa000060fe000103e00d02300003fa000060fe000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e00f0030fd000406003c03c0fd000103e00f0030fd000406003c03c0fd000103e00f0030fd00040600660660fd000103e00f0030fd00040600660660fd000103e0110f300003e363c7c00606607c3e3c0003e0110f300003e363c7c00606607c3e3c0003e0110f300003338666600c03c06666600003e0110f300003338666600c03c06666600003e0110f3000033306666018066066663c0003e0110f3000033306666018066066663c0003e0110f300003330666603006606666060003e0110f300003330666603006606666060003e0110f300003e303c7c67e63c67c3e3c0003e0110f300003e303c7c67e63c67c3e3c0003e00d02300003fa000060fe000103e00d02300003fa000060fe000103e0070030f4000103e0070030f4000103e0070030f4000103e0070030f4000103e006003ff3ff00e006003ff3ff00e0060001f3ff00e0060001f3ff00e002f10002f100a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 2-6:  PRIZM\rquote s Windows Menu\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You can also add and remove entire menus.  That\rquote s not used nearly as often, but there are some really good reasons to do it on occasion.  The most common reason to add and remove menus is when a program has context sensitive features, and it also has so many features that you can\rquote t show all of the menus at once.  Just as one example, AppleWorks GS has several different applications that are all combined into a single program.  The menus for the paint program and for the word processor won\rquote t fit on the menu bar at the same time, and you don\rquote t need all of them at once anyway, so AppleWorks GS deletes all of the word processor specific menus when you select a paint window, and draws all of the paint menus in their place.\par We\rquote ve used standard text menus in this lesson, but you\rquote ve probably used programs that seem to do something very different with a menu.  For example, Apple\rquote s Finder has a color picker menu that lets you pick colors for icons.  Menus like the Finder\rquote s color picker menu are called custom menus.  The Menu Manager doesn\rquote t even handle these.  Instead of using Menu Manager calls to set up a menu and then letting the Menu Manager handle all of the details, you have to write the subroutines to handle all of the details yourself.  The Menu Manager defines the subroutines you need, along with all of the parameters, and then the Menu Manager calls your program to draw the menu, select various items in the menu, and depends on you to tell it which item (if any) was selected.  That\rquote s a lot of work, but the end result is that you can do almost anything you want with a menu by rolling your own with custom menus.\par There are also a host of minor calls you can use to do various things, ranging from actions that are almost silly to those that are useful, but just not used often enough to cover here.  For example, you can change a menu item\rquote s style, like whether or not it is bold; you can flash the menu bar; you can change the color of the menu bar; and you can change the name of a menu, just like we changed the name of a menu item.  Browsing through the toolbox reference manual is a great way to find out what capabilities are there, then you can go back and study the details if you ever need to use one of the features.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson dealt mostly with the menu bar, but we also started using }{\f6\fs20 TaskMaster}{\f4  to control our event loops.  By now, you should be able to create a program that will mimic the menu bar on almost any program you use that doesn\rquote t have a custom menu.  Your programs should be supporting desk accessories, and you should be getting comfortable with the event loop and how you plan programs around an even loop.\par Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 CheckMItem\tab DisableMItem\tab DrawMenuBar\tab EnableMItem\par FindWindow\tab FixAppleMenu\tab FixMenuBar\tab HiliteMenu\par InsertMenu\tab MenuKey\tab MenuSelect\tab NewMenu\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 SetMenuFlag\tab SetMItem\tab TaskMaster\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk13}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Menu Manager\bxe }{\rxe bk13}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 3 \endash  Be Resourceful}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 3 \endash  Be Resourceful}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 3 \endash  Be Resourceful\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk15}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson introduces the concept of resources.  We start by looking at what resources really are, and why they exist.  Then we\rquote ll learn how to use Rez, the resource compiler, to create a resource fork.  As a practical example of resources, we\rquote ll change a program from the last lesson to use resources for the menu bar.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 What Are Resources?}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 What Are Resources?\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Apple has always aimed high, and the folks who created resources for the Macintosh were no exception.  Apple wanted to go after a global market, but there was a serious problem with that idea:  it costs a lot to develop software, and very few companies could really afford to develop software in, say, Danish to support a relatively small market in Denmark.  What Apple needed was a way for software developers to create a program so the Danish folks could convert the software to their own language on their own.  One way to do that, of course, was to convince all of the world\rquote s software developers that they should give away source code with the programs.  That, to say the least, would be an uphill fight.  Instead, Apple\rquote s team of programmers invented resources.\par Keep in mind that the whole goal, at least so far, is just to create some mechanism so that strings can be changed from one language to another by the end user.  One way to do that would be to have the program read the strings from a file, using some sort of numbered index to find a string in case the length of some of the strings changed.  Let\rquote s take a look at a simple example.  Suppose you are trying to stuff the strings for our File menu into a file that can be changed by the end user of the program.  The two strings are \ldblquote   File  \ldblquote  and \ldblquote Quit\rdblquote .  Our goal is to put these strings into a file in such a way that we can find either of them, even if the lengths of the strings change or something else entirely is added to the file.  One way to do that is to write a series of records to the file.  Each record will consist of four parts:\par \par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 length\tab A length word, which tells our program how far to skip ahead to find the start of the next record.\par type\tab A number telling us what kind of information this record contains.  If all we put in the file are strings we don\rquote t need this field, but we\rquote ll keep things general just in case we want to add more stuff later on.\par ID\tab A number that uniquely identifies this particular string.\par value\tab The values that make up the resource itself.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Now lets assume that we need to look for a string, and we\rquote ve decided that we will use the number 0x8006 for the type of a string.  Why pick such an odd number?  More on that in a moment.  Furthermore, we\rquote ll assume that the ID number for the string \ldblquote Quit\rdblquote  is 1.  Then to find this string, we would open the file containing the records and scan through the list, using the length word to skip from one resource to the next.  Any time the type of a resource is 0x8006, we stop and check the ID.  When we find the ID 1, we stop and read the string from the file, building our menu from the string.\par Let\rquote s build a short file like this to see how it might look.  We\rquote ll put a word of 0 on the end to mark the end of the file.  Decoded, we might type in the file as a series of numbers and strings, and use a program to build the actual file.  Using a special language to create the resource file doesn\rquote t change what we are really doing, it just makes it a lot more convenient for us to read and change the resources.  In our imagined resource file, the strings for our menus might look like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 resource1.type = 0x8006;\par resource1.ID = 1;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 resource1.value = "Quit";\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 resource2.type = 0x8006;\par resource2.ID = 2;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 resource2.value = "  File  ";\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Details like putting the zero at the end of the file and figuring out the length of each resource are the sorts of things we should expect a resource compiler to do for us.  Once this file is processed, the binary file would look like this:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 0x0000: 0B000680 01000551 7569740F 00068002  '       Quit     '\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 0x0010: 00082020 46696C65 20200000           '    File    '\par }{\f4 \par It would take some work, but you can probably see how you could write a program that could read this file and create the File menu using the strings from the file, rather than hard coded strings in your program, like we\rquote ve used in the first few lessons.  Since your program would only need to know that the resource type was 0x8006 and the resource numbers for the strings were 1 and 2, you also would be creating a very flexible program.  After all, you really don\rquote t care whether or not \ldblquote Quit\rdblquote  and \ldblquote   Edit  \rdblquote  are really the strings in the file, as long as the numbers used to identify the strings stay the same.  Well, in a nutshell, that\rquote s exactly what Apple Computer did with resources.  In fact, 0x8006 happens to be the resource type Apple Computer has assigned for p-strings, and resource IDs of 1 and 2 would work perfectly well.\par There are some differences, of course.  The biggest is where the resources are actually stored.  If the resources were really put in a separate file, like we did in this thought experiment, you would run the risk of separating the file from the program, making things more complicated for the user of the program that we\rquote d like to.  On the other hand, if you stick the resources right into the program file, you run into some other problems.  The biggest is wrapped up in the fact that resources turned out to be a very powerful idea, and folks started using them for a lot of things besides just creating string files so a program could be adapted for other languages.  There are lots of times when it\rquote s nice to keep some of the information about a program in a separate spot that can be changed without changing the source code for a program.  In fact, there are even cases when a resource is used with a data file, and not with an executable program at all.  And that\rquote s the rub: if you stuff the resources into the executable file, which is certainly possible, you\rquote d also have to stuff them into a data file, and that would cause all sorts of problems for people trying to read the data from, say, a picture, and tripping over resources in the process.  Apple solved this problem by creating a file format with two separate parts, called the resource fork and the data fork.  The data fork is basically what you normally think of as the file, while the resource fork is a special part of the file that you don\rquote t normally see, and can\rquote t access with standard file access calls from a language like C.  The resource fork is hidden and out of the way, but still a part of the file.  To read, change, or add resources, you make special calls to a tool called the Resource Manager.  It\rquote s also the Resource Manager that handles little details like figuring out where a resource is in a file, and when it has hit the end of the list of resources.  Does it use a length word and a zero terminator, like we did?  Who cares?  It gets the job done, and in fact the details might even change as Apple\rquote s engineers discover new ways to deal with resources.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using Rez to Create a Menu Bar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using Rez to Create a Menu Bar\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you set out to create a program, you have a choice of a lot of different tools.  You could pick a C compiler, like the one we\rquote re using in this course, or a Pascal compiler, or an assembler.  In the end, though, you always end up with an executable program.  There are also a lot of different ways to create a resource fork.  The first one we\rquote ll look at is Rez, Apple\rquote s resource compiler.  Like Pascal or C, Rez tries to make programming a little easier by giving you a language that lets you express your ideas without getting down to the byte level.  Using Rez, you don\rquote t know or care about the exact structure of the resource fork, just as you don\rquote t know or care about 65816 assembly language or object module formats when you write a program in C.\par Rez is a whole new language, though, so there\rquote s a lot to learn.  Fortunately, it\rquote s also patterned after the C language, so it\rquote s pretty easy to pick up.\par We\rquote ll learn about Rez and resources gradually, introducing new ideas as we go along.  If you would like to know more about Rez, you can refer to any of the places where the Rez compiler is documented.  As I write this, the two best places are the ORCA/M reference manual and the APW Tools and Interfaces package, but we also plan to include Rez with the next release of ORCA/C.\par That also brings up one other point.  If you have ORCA/C, but don\rquote t have any of these other packages, you need to get a copy of Rez to use with the rest of this course.  There\rquote s a copy on the program disk that comes with the course.  It will fit on your hard disk just fine, but if you are using floppy disk drives, you will need to use the text development system from here out \endash  there just isn\rquote t room for PRIZM and Rez on the same program disk.\par Appendix D tells you how to install Rez, and talks about some of the issues you will face if you don\rquote t have a hard disk.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 A Menu Bar Using Rez}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 A Menu Bar Using Rez\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When we looked at what resources really are at the start of this lesson, we really only talked about strings, but the Resource manager can actually stuff anything into a resource.  The Menu Manager has quite a few calls that can get information directly from the resource fork.  One of the most useful is }{\f6\fs20 NewMenuBar2}{\f4 , which creates a whole menu bar in one step from resources.  We\rquote ll start with the Rez source file to create the menu bar, then step through the source file to see how it\rquote s built.  Later, we\rquote ll use Rez to compile the source file, creating a resource fork with our menu bar resources.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 #include "types.rez"\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenuBar resource}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuBar (1) \{                 /* the menu bar */\par    \{\par       1,                                /* resource numbers for the menus */\par       2,\par       3\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenu resource}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (1) \{                    /* the Apple menu */\par    1,                                   /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    1,                                   /* menu title resource ID */\par    \{257\};                               /* menu item resource IDs */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (2) \{                    /* the File menu */\par    2,                                   /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    2,                                   /* menu title resource ID */\par    \{255,256\};                           /* menu item resource IDs */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (3) \{                    /* the Edit menu */\par    3,                                   /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    3,                                   /* menu title resource ID */\par    \{                                    /* menu item resource IDs */\par       250,\par       251,\par       252,\par       253,\par       254\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenuItem resource}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (250) \{              /* Undo menu item */\par    250,                                 /* menu item ID */\par    "Z","z",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    250                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (251) \{              /* Cut menu item */\par    251,                                 /* menu item ID */\par    "X","x",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    251                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (252) \{              /* Copy menu item */\par    252,                                 /* menu item ID */\par    "C","c",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    252                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (253) \{              /* Paste menu item */\par    253,                                 /* menu item ID */\par    "V","v",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    253                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (254) \{              /* Clear menu item */\par    254,                                 /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    254                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (255) \{              /* Close menu item */\par    255,                                 /* menu item ID */\par    "W","w",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    255                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (256) \{              /* Quit menu item */\par    256,                                 /* menu item ID */\par    "Q","q",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    256                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (257) \{              /* About menu item */\par    257,                                 /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    257                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par                                         /* the various strings */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rPString resource}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 nocrossbank}}}{\v\f4 ;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rPString (1, noCrossBank)      \{"@"\};\par resource rPString (2, noCrossBank)      \{"  File  "\};\par resource rPString (3, noCrossBank)      \{"  Edit  "\};\par resource rPString (250, noCrossBank)    \{"Undo"\};\par resource rPString (251, noCrossBank)    \{"Cut"\};\par resource rPString (252, noCrossBank)    \{"Copy"\};\par resource rPString (253, noCrossBank)    \{"Paste"\};\par resource rPString (254, noCrossBank)    \{"Clear"\};\par resource rPString (255, noCrossBank)    \{"Close"\};\par resource rPString (256, noCrossBank)    \{"Quit"\};\par resource rPString (257, noCrossBank)    \{"About Frame..."\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-1:  A Menu Bar Resource Description File\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 How Rez Files are Typed}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 How Rez Files are Typed\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource description files}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez\:compiler}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This file looks a lot like what you would see in a C program.  Comments work the same way, and the \{ and \} characters are still used to form blocks of lines.  The big difference is in the }{\f6\fs20 resource}{\f4  statement; its syntax is a little like a cross between a function and a structure.  In fact, the }{\f6\fs20 resource}{\f4  statement amounts to a kind of initialized structure.  We\rquote ll explore all of this gradually.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\v\f4 .rez;}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 types.rez}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The first line of the resource description file is\par \par }\pard \li360\widctlpar\adjustright {\f6\fs20 #include "types.rez"\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 This line works the same way as an include in C, with one minor exception: the quote character is used to look in the standard header file directory in Rez, but the < and > characters are used in C.  The file itself is called types.rez, and is located at prefix 2/RInclude (13:RInclude with the 2.0 shell).  It contains a whole lot of type statements and constant declarations.  It defines an interface to the current set of resources for the Apple II}{\f4\fs20 GS}{\f4  toolbox, just like the Menu Manager\rquote s header file for C defines all of the tool calls and data structures in the Menu Manager.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Like the C header files, Rez header files are editable source files.  If you would like to look at the source for the header file, use the command\par \par }{\f6\fs20 edit 2/RInclude:Types.rez\par }{\f4 \par The first resource in our file creates a menu bar; the resource looks like this:\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuBar (1) \{                /* the menu bar */\par    \{\par       1,                               /* resource numbers for the menus */\par       2,\par       3\par       \};\par }\pard \li360\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Later on we\rquote ll come back and see how you could figure out the format for this resource from types.rez, but for now let\rquote s concentrate on the syntax you use to type the resource.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource ID}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenuBar resource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Each resource starts with the reserved word }{\f6\fs20 resource}{\f4 .  Right after this is the name of the resource we want to create; this matches one of the type declarations in types.rez.  In this case, we are defining a menu bar resource, which has a name of }{\f6\fs20 rMenuBar}{\f4 .  The last part of the header for the resource is the resource ID, enclosed in parenthesis.  This is a number you pick; it can be any number from 1 to 65535, as long as there are no other }{\f6\fs20 rMenuBar}{\f4  resources in your resource fork with the same resource ID.  You can have other resources with a resource ID of 1; you just can\rquote t have another }{\f6\fs20 rMenuBar}{\f4  resource with a resource ID of 1.\par The body of the resource fills in the actual information that the program will use.  The body of a resource is enclosed in curly brackets, and is always followed by a semicolon.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenu resource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This particular resource consists of an array of menu resource IDs.  Arrays are variable length groups of values in a resource description file, not fixed length structures like they are in C.  The resource compiler figures out how long the array is by counting the number of things you put in the array.  The array itself is enclosed in brackets, again, and followed by a semicolon.\par The array itself has three values, separated by commas.  These values are the resource IDs for three more resources, each of which is a menu resource.  Here\rquote s the resource for the File menu, which is the menu with a resource ID of 2:\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (2) \{                    /* the File menu */\par    2,                                   /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache;\par       2,                                /* menu title resource ID */\par       \{255,256\};                        /* menu item resource IDs */\par }\pard \li360\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource ID}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenuBar resource}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu ID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The resource ID of 2 is easy to pick out of the header, but the same value is used twice more in the resource.  The first time is for the menu ID; this is the number we use for Menu Manager calls, and the number }{\f6\fs20 TaskMaster}{\f4  sends back to us to tell us which menu has been highlighted.  Later on, we use 2 again for the resource number for the menu title, which is yet another resource containing a string.  All of this is just a handy convention we are using to keep all of the various resources straight in our head.  While we need to know the menu ID inside of our program, as you already know, we can pick whatever number we want.  We could also pick any number we want for the resource ID of this resource, as long as we used the same number in the }{\f6\fs20 rMenuBar}{\f4  resource array.  And, of course, we can use any resource ID we want for the string resource that is the title for the menu.  By using 2 for all three values, though, it\rquote s a little easier to scan the resource file for all of the resources that are used together.\par The flags field in this resource takes the place of the flags characters we used to use in a menu title string.  In a resource description file, the title for a menu is just the name of the menu itself, and all of the other information, like the menu ID and the various format flags, are in other parts of the }{\f6\fs20 rMenu}{\f4  resource.  We also need to tell the Resource Manager that the title is actually a resource.  We could also make it a pointer or a handle, but frankly, that\rquote s a lot of trouble and defeats the whole purpose of resources.  We will always use a resource for the title of a menu it this course, so you will always see the value }{\f6\fs20 refIsResource*menuTitleRefShift}{\f4  in the flags field.  This value just uses some predefined constants to set one bit in the flags value.\par This menu has two items, \ldblquote Close\rdblquote  and \ldblquote Quit\rdblquote .  As you probably guessed by now, these are resources, too.  The resource IDs are in the array at the end of the }{\f6\fs20 rMenu}{\f4  resource.  We also need to set another flag to tell the Resource Manager that the menu items are in resources; that\rquote s what the value }{\f6\fs20 refIsResource*itemRefShift}{\f4  in the flags word does.  The last flag is }{\f6\fs20 fAllowCache}{\f4 ; this is actually the only flag that is used by the Menu Manager for something that isn\rquote t directly involved with resources.  It tells the Menu Manager to use menu caching, a technique that uses a little extra memory to remember a picture of the menu when it is pulled down so the menu can be redrawn quicker.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenuItem resource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The resource for the Quit menu item is a pretty typical example of the menu item resources:\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (256) \{              /* Quit menu item */\par    256,                                 /* menu item ID */\par    "Q","q",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift;     /* flags */\par    256                                  /* menu item title resource ID */\par }\pard \li360\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu item ID}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\f4 In this resource, we\rquote re using the convention of keeping all of the numbers the same, again.  This time we use the value for the menu item ID, which is the same value we created in our older programs with \ldblquote V256\rdblquote  in the options part of the menu item string.  The resource ID, shown in parenthesis at the start of the resource, and the resource ID for the menu item title string are both 256.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 key equivalents}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The various items in the rest of the resource are once again replacements for the information we used to put in the menu item string.  In this case, we\rquote re telling the Menu Manager that the menu item has a keyboard equivalent of \ldblquote Q\rdblquote , with an alternate character of \ldblquote q\rdblquote .  When we created this keyboard equivalent in the last chapter with the characters \ldblquote *Qq\rdblquote  in the menu item string, the first character was the one that was actually drawn in the menu item when the menu was pulled down, and that\rquote s still true.  If we didn\rquote t want any keyboard equivalents, fill in the entry with a pair of empty strings, like this:\par \par }\pard \li360\widctlpar\adjustright {\f6\fs20    "","",                               /* no key equivalents */\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:checking}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s also a special place for the check character that shows up to the left of the menu item; in this example, it\rquote s a zero, which tells the Menu Manager that we don\rquote t want a check mark.  You can use an integer value here, since a single character is equivalent in every way to a number, just as it is in C.  Keep in mind that Rez expects a character here, not a string.\par The flags field is used for all of the other options that used to go in the menu item string, as well as for another flag that tells the Menu Manager that the name of the menu item is a resource; that last flag is the only one you see here.  We\rquote ll look at the other flags a little later, after actually creating a program with this resource file.\par The only kind of resource left in the resource description file is the string.  The strings for all of the menu titles and menu item titles have been collected at the end of the file.  Here\rquote s a typical example:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rPString resource}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 noCrossBank}}}{\v\f4 \par }\pard \li360\widctlpar\adjustright {\f6\fs20 resource rPString (256, noCrossBank) \{"Quit"\};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The }{\f6\fs20 rPString}{\f4  resource is used to define p-strings, which are strings with a leading length byte.  The details of the internal format aren\rquote t really important, since the resource compiler knows what to do based on the declarations in the Types.rez header file.  The only entry in the body of the resource is the string itself.\par There\rquote s a new flag after the resource ID, though.  The }{\f6\fs20 noCrossBank}{\f4  flag tells the Resource Manager not to load the resource in a position where it would span a 64K bank boundary in memory.  The Menu Manager doesn\rquote t work right if the string does cross a bank boundary, and without this flag, the Resource Manager would be free to load the resource to any location in memory that was big enough.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using Constants}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Using Constants\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez\:constants}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 I tried to keep things simple for your first look at a resource description file by keeping all of the values out in the open, where you could see them.  In real life, though, using constants in a resource description file is a great idea for the same reasons you use constants in a program.  By using constants, you can gather all of the \ldblquote magic numbers\rdblquote  into one spot at the start of the program.  That\rquote s a big help when you\rquote re looking for problems or making changes.  Also, keep in mind that the resource ID numbers and menu ID numbers used in the resource description file have to match the numbers used in the C program for things to work correctly.  By collecting these numbers as constants at the beginning of the program, you can change and check the values a lot easier.\par Here\rquote s the same resource description file we just went over, recoded to use #define statements for constants:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 #include "types.rez"\par \par #define appleMenu     1 \par #define fileMenu      2\par #define editMenu      3\par #define editUndo      250\par #define editCut       251\par #define editCopy      252\par #define editPaste     253\par #define editClear     254\par #define fileClose     255\par #define fileQuit      256\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #define appleAbout    257\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuBar (1) \{                 /* the menu bar */\par    \{\par       appleMenu,                        /* resource numbers for the menus */\par       fileMenu,\par       editMenu\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (appleMenu) \{            /* the Apple menu */\par    appleMenu,                           /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    appleMenu,                           /* menu title resource ID */\par    \{appleAbout\};                        /* menu item resource IDs */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (fileMenu) \{             /* the File menu */\par    fileMenu,                            /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    fileMenu,                            /* menu title resource ID */\par    \{fileClose,fileQuit\};                /* menu item resource IDs */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (editMenu) \{             /* the Edit menu */\par    editMenu,                            /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    editMenu,                            /* menu title resource ID */\par    \{                                    /* menu item resource IDs */\par       editUndo,\par       editCut,\par       editCopy,\par       editPaste,\par       editClear\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editUndo) \{         /* Undo menu item */\par    editUndo,                            /* menu item ID */\par    "Z","z",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    editUndo                             /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editCut) \{          /* Cut menu item */\par    editCut,                             /* menu item ID */\par    "X","x",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editCut                              /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editCopy) \{         /* Copy menu item */\par    editCopy,                            /* menu item ID */\par    "C","c",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editCopy                             /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editPaste) \{      /* Paste menu item */\par    editPaste,                           /* menu item ID */\par    "V","v",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editPaste                            /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editClear) \{        /* Clear menu item */\par    editClear,                           /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editClear                            /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (fileClose) \{        /* Close menu item */\par    fileClose,                           /* menu item ID */\par    "W","w",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    fileClose                            /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (fileQuit) \{         /* Quit menu item */\par    fileQuit,                            /* menu item ID */\par    "Q","q",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    fileQuit                             /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (appleAbout) \{       /* About menu item */\par    appleAbout,                          /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    appleAbout                           /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20                                         /* the various strings */\par resource rPString (appleMenu, noCrossBank)  \{"@"\};\par resource rPString (fileMenu, noCrossBank)   \{"  File  "\};\par resource rPString (editMenu, noCrossBank)   \{"  Edit  "\};\par resource rPString (editUndo, noCrossBank)   \{"Undo"\};\par resource rPString (editCut, noCrossBank)    \{"Cut"\};\par resource rPString (editCopy, noCrossBank)   \{"Copy"\};\par resource rPString (editPaste, noCrossBank)  \{"Paste"\};\par resource rPString (editClear, noCrossBank)  \{"Clear"\};\par resource rPString (fileClose, noCrossBank)  \{"Close"\};\par resource rPString (fileQuit, noCrossBank)   \{"Quit"\};\par resource rPString (appleAbout, noCrossBank) \{"About Frame..."\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-2:  A Better Menu Bar Resource Description File\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Compiling the Rez File}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Compiling the Rez File\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez\:using}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The ORCA family of languages is designed to handle more than one language at the same time, which is fortunate, since the Rez compiler is actually another language.  If you load the resource description file from disk and check the language from the editor, you will find that the language stamp for the file is Rez instead of CC or Shell, like you are used to.  If you type in the file from scratch, you\rquote ll have to be sure to set the language yourself.  Exactly how you do that depends on which editor you are using.  If you need help, refer to the documentation for the editor in the reference manual.  As a last resort, check out the CHANGE shell command.\par Once the file is entered and saved to disk, it\rquote s time to compile it.  If you are using PRIZM, saving the file to disk is a more important step than it is when you use C.  That\rquote s because the Rez compiler doesn\rquote t use the FastFile system, so the compiler doesn\rquote t see changes you\rquote ve made in the editor; it only sees the new information after it has been saved to disk.\par You compile the file the same way you would compile a C program.  When you give the file a keep name, use the same name that you will be using for the executable program.  For example, if the program is called Frame.cc, and is compiled under PRIZM, the executable file name (called the keep name) is Frame.  In this case, you\rquote d want to use a file name of Frame.rez for the resource description file, so the resource fork created by Rez would also be saved in the executable file Frame.\par \par Problem 3-1:  Type in the resource description file from the last section or load it from disk.  Compile it, using a keep name of Frame.  Once you finish, use the CATALOG command from the text shell or from PRIZM\rquote s shell window.  You should see a + beside the file type for Frame.  The + is the shell\rquote s way of flagging an extended file.  Extended file is the formal name for a file with a resource fork under the Apple II}{\f4\fs20 GS}{\f4  operating system.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Sharing Defines}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Sharing Defines\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Looking at how similar the Rez file is to a C source file, you might be tempted to use the same define statements to define constants for both languages, then include the file with the define statements in both source files.  To an extent, that works \endash  but there are some subtle differences between the syntax for the C language and resource description files.  Despite the similarities, these are two different languages!\par If you want to use a single file for the define statements that set up the various resource numbers, just be sure you use a simple define with a single label and a single number, like the ones we\rquote ve used for setting up the IDs for the menus.  For the program we\rquote ve just written, you could use this file for defining the menu IDs and menu item IDs in C, and also for defining the resource IDs in the Rez source file:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 #define appleMenu     1 \par #define fileMenu      2\par #define editMenu      3\par \par #define editUndo      250\par #define editCut       251\par #define editCopy      252\par #define editPaste     253\par #define editClear     254\par #define fileClose     255\par #define fileQuit      256\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #define appleAbout    257\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You should save the file with a language stamp of CC, since the C compiler is very picky about the language stamp.  Then place an include in both files, inclosing the name in quotes, like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 #include "Frame.defs"\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using the Menu Bar Rez Created}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using the Menu Bar Rez Created\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Creating the resource description file involved a lot of new stuff, and ended up being pretty tough because of these new concepts.  Well, it\rquote s pay back time.  Creating the menu bar was hard, but using it is actually pretty easy.  Listing 3-3 shows the complete Frame program to use the menu bar we just created with Rez.\par There really isn\rquote t much difference between this program and the one you had developed on your own by the end of the last lesson.  In fact, other than changing some comments, all of the differences are in }{\f6\fs20 InitMenus}{\f4 , where the long series of calls we used to use to build up a menu string and create a series of menus have been replaced by these three calls:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewMenuBar2}}}{\v\f4 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 menuBarHand = NewMenuBar2(refIsResource, menuID, NULL);\par }\pard \qj\fi180\keepn\widctlpar\adjustright {\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSysBar}}}{\v\f4 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SetSysBar(menuBarHand);\par }\pard \qj\fi180\keepn\widctlpar\adjustright {\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetMenuBar}}}{\v\f4 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SetMenuBar(NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first call creates the menu bar itself, using a Menu Manager call from the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 .  The first parameter, }{\f6\fs20 refIsResource}{\f4 , is a constant that tells the Menu Manager that the menu bar description is in a resource file, while the second parameter tells the Menu Manager which resource ID to look for.  The last parameter tells the Menu Manager that we want to create a menu bar that is not inside of a window.  Once we have the menu bar, we still need to install it as the system menu bar.  The call to }{\f6\fs20 SetSysBar}{\f4  makes our new menu bar the system menu bar, and the call to }{\f6\fs20 SetMenuBar}{\f4  makes the system menu bar the current, or active, menu.\par Like so many other parts of our basic program, these calls are generally figured out once, stuffed into a function like }{\f6\fs20 InitMenus}{\f4 , and moved from program to program as a block, without really worrying too much about the details.  Frankly, if you were to ask me what calls have to be made, and in what order, to create a system menu bar from a resource when I wasn\rquote t working on something like this course, I probably couldn\rquote t tell you.  About all I could be sure of is that I have a subroutine in my collection of libraries that does it right.  When I write a new program, I just copy the working code from a working program, and don\rquote t worry about the details.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Frame\par *\par * This program implements all of the support required for desk\par * accessories.\par *\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 ***************************************************************/\par \par #pragma lint -1\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #include <orca.h>\par #include <Event.h>\par #include <Menu.h>\par #include <QuickDraw.h>\par #include <Window.h>\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <Desk.h>\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define appleMenu       1             /* Menu ID #s (also resource ID #s) */\par #define fileMenu        2\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define editMenu        3\par \par #define appleAbout      257\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define fileClose       255\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define fileQuit        256\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define editUndo        250\par #define editCut         251\par #define editCopy        252\par #define editPaste       253\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define editClear       254\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 BOOLEAN done;                           /* are we done, yet? */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 EventRecord myEvent;                    /* event record */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * HandleMenu\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void HandleMenu (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int menuNum, menuItemNum;               /* menu number & menu item number */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuNum = myEvent.wmTaskData >> 16;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 menuItemNum = myEvent.wmTaskData;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 switch (menuItemNum) \{                  /* go handle the menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    case appleAbout:                     break;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    case fileClose:                      break;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    case fileQuit:       done = TRUE;    break;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    case editUndo:                       break;\par    case editCut:                        break;\par    case editCopy:                       break;\par    case editPaste:                      break;\par    case editClear:                      break;\par    \}\par HiliteMenu(FALSE, menuNum);             /* unhighlight the menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * InitMenus\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void InitMenus (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define menuID 1                        /* menu bar resource ID */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 int height;                             /* height of the largest menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 MenuBarRecHndl menuBarHand;             /* for 'handling' the menu bar */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20                                         /* create the menu bar */\par menuBarHand = NewMenuBar2(refIsResource, menuID, NULL);\par SetSysBar(menuBarHand);\par SetMenuBar(NULL);\par FixAppleMenu(1);                        /* add desk accessories */\par height = FixMenuBar();                  /* draw the completed menu bar */\par DrawMenuBar();\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Main program\par *\par ***************************************************************/\par \par int main (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int event;                           /* event type returned by TaskMaster */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 startdesk(640);                         /* start the tools */\par InitMenus();                            /* set up the menu bar */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 InitCursor();                           /* start the arrow cursor */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 done = FALSE;                           /* main event loop */\par myEvent.wmTaskMask = 0x001F7FFF;        /* let TaskMaster do it all */\par while (!done) \{\par    event = TaskMaster(everyEvent, &myEvent);\par    switch (event) \{\par       case wInSpecial:\par       case wInMenuBar:          HandleMenu();           break;\par       \}\par    \}  \par \par enddesk();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-3:  A Program for the Resource Description File\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\keep\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1034{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \tab }{\b\f4 Tip}{\f4 \tab If you look closely, you\rquote ll see that the formatting for the switch statements has changed a lot.  The format you see here works very well for the event loop and menu selection subroutine if you use a single short statement or function call to do the actual work.\~\~}{{\pict{\*\picprop\shplid1035{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 3-2:  Type in this program, using the file name Frame.cc, or load it from the disk.  Compile and link the program, saving the executable file to Frame, the same file that you save the resource fork to in Problem 3-1.\par This program should run correctly, now.  You can even change the file type to S16 and run it from the Finder.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Making Changes}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Making Changes\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez\:using}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you compile a resource description file to create a resource fork, the resource compiler either erases the existing resource fork and creates a new one, or adds to the existing resource fork, depending on the flags you use.  The resource compiler doesn\rquote t touch the data fork of the file at all.  If there was a data fork when the resource compiler started, there will still be one when the resource compiler finishes, and its contents will not be changed.\par When the linker creates an executable file it erases the existing data fork of the output file and creates a new data fork.  The executable program is contained entirely in the data fork.  If the file had a resource fork when the linker started, it still has a resource fork, with the contents unchanged, when the linker finishes.\par The great thing about the way the resource compiler and linker work is that you don\rquote t have to recompile either the program source file or the resource description file each time the program is changed.  If you change the resource fork, say to adjust a menu name, but don\rquote t change the program\rquote s C source file, you need to recompile the resource description file with the resource compiler, but you do not have to recompile or relink the C program.  If the C program is changed, but the resource description file stays the same, you need to recompile and relink the program, but you don\rquote t have to use the resource compiler.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using a Script to Compile}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using a Script to Compile\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez\:using}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scripts}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 make}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Up until now, creating a program was pretty easy.  For most programs, you just pulled down the Run menu and selected the Compile to Memory command.  Now that your programs have at least two source files, things are getting a little more complicated.  In larger desktop programs, you may want to use separate compilation to split the C part of your program up into manageable sized chunks; or you may decide to use a common file for the defines in both the C and Rez source files, like we discussed earlier.  Either way, things get even more complicated.  Shell scripts give you a way to put all of the work back into a single, simple command.\par So far, you\rquote ve probably used menu based commands to create your programs.  The ORCA environment gives you another way to create programs, too.  Using the shell, you can compile, link, and even run a program using text commands, just like in the old days before the desktop interface became popular.  While there are a lot of advantages to the desktop interface, there is one characteristic of text interfaces that has kept them popular with programmers to this day, and promises to keep the text interface alive for the foreseeable future.  While typing the commands to compile a program is probably harder than using the menu commands you are used to, these commands can be collected into something called a script file.  The script file is a shell program that you can create to compile your programs.  Once you have created a script file, you just need to type the name of the script itself in the shell window to compile your program.\par Let\rquote s look at a basic script to compile a program with two source files to see how this works.  This script will compile the C source file Frame.cc and the resource description file Frame.Rez, creating an executable program called Frame.  That\rquote s the same thing you just did by hand.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 unset exit\par set compile false\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 set rez false\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 newer frame.a frame.cc\par if \{status\} != 0\par    set compile true\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 end\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 newer frame frame.rez\par if \{Status\} != 0\par    set rez true\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 end\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 set exit on\par if \{rez\} == true\par    compile frame.rez keep=frame\par end\par if \{compile\} == true\par    cmpl frame.cc keep=frame\par end\par }{\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-4:  A Simple Script\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab The }{\f6\fs20 newer}{\f4  command used in this script is built into the ORCA shell from versions 2.0 on.  If you are using an earlier version of the shell you don\rquote t have this call.  There is a utility called }{\f6\fs20 MoreRecent}{\f4  that comes on your course disks; it works just like the }{\f6\fs20 newer}{\f4  command, it just has a different name.  If you need help installing the }{\f6\fs20 MoreRecent}{\f4  utility, see Appendix D.  The files are in the Lesson.3 folder on the solution disks.\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Let\rquote s start by stepping through this script file to see what it does.  The first line, }{\f6\fs20 unset exit}{\f4 , turns off a shell variable so the script will keep running when we use the }{\f6\fs20 newer}{\f4  command a little later on.  The reason for this step is pretty technical; it\rquote s tied up in the way shell scripts handle errors and the way utilities return error codes and results.  For creating your own programming scripts, just remember to use this command before any }{\f6\fs20 newer}{\f4  commands, and then use }{\f6\fs20 set exit on}{\f4  before you start the actual compiles, so the script will stop if it finds a problem.\par Next you see two statements that are setting shell variables to }{\f6\fs20 false}{\f4 .  The }{\f6\fs20 set}{\f4  command is followed by the name of a shell variable, then by the value.  All shell variables are strings.  The compile and rez shell variables are being used to keep track of whether we need to compile the resource description file or the C source file.\par The next step is to check to see which files actually need to be compiled.  This script won\rquote t compile the C source file unless it has changed since the last time you compiled the program; compiling the program creates the frame.a file.  If the source file Frame.cc is newer than the output from the compiler, Frame.a, the newer command sets the }{\f6\fs20 \{Status\}}{\f4  shell variable to 1; otherwise it sets }{\f6\fs20 \{Status\}}{\f4  to 0.  If an error occurs \endash  such as the script not finding Frame.a at all \endash  }{\f6\fs20 newer}{\f4  returns some other value other than 0, usually -1.  Our script checks to see if }{\f6\fs20 newer}{\f4  returned 0, and if not, sets the value of the }{\f6\fs20 \{Compile\}}{\f4  shell variable to }{\f6\fs20 true}{\f4  so we remember to compile the program later.  The script then uses the same idea to check the resource description file, looking to see if it is newer than the executable program, and setting the shell variable }{\f6\fs20 \{Rez\}}{\f4  to }{\f6\fs20 true}{\f4  if we need to recompile the resource description file.\par Finally, the script checks the values of the shell variables, compiling the resource description file and doing a compile and link of the C source file.\par This script is set up to use }{\f6\fs20 newer}{\f4  to check all of the dates on the files before actually compiling any of the programs.  This is an important point.  Once you start compiling programs, especially the C part of the program, you will also start changing the modification dates used by the }{\f6\fs20 newer}{\f4  command, and that could cause the script to skip compiling a file that should be compiled.  It\rquote s important to know what will be compiled before you start changing the time stamps!\par All of the programs from here to the end of this course are organized just like this one, with a C source file and a resource description file.  You could create a new script for each program by changing the word \ldblquote frame\rdblquote  to the new program name everywhere in this script, but we can put the script language to work to help out, creating a new shell variable called }{\f6\fs20 \{prog\}}{\f4 .  To create a script for a new program, just change the value of }{\f6\fs20 \{prog\}}{\f4  to the new program name.  There\rquote s one other change in this script, the addition of }{\f6\fs20 \{parameters\}}{\f4  to the }{\f6\fs20 cmpl}{\f4  command, that we\rquote ll talk about in a moment.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 set prog Frame\par unset exit\par set compile false\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 set rez false\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 newer \{prog\}.a \{prog\}.cc\par if \{status\} != 0\par    set compile true\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 end\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 newer \{prog\} \{prog\}.rez\par if \{Status\} != 0\par    set rez true\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 end\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 set exit on\par if \{rez\} == true\par    compile \{prog\}.rez keep=\{prog\}\par end\par if \{compile\} == true\par    cmpl \{parameters\} \{prog\}.cc keep=\{prog\}\par end\par }{\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-5:  A Better Script\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Now that we know what the script does, and how to easily change the script to work on any of the programs in this course, let\rquote s take a look at how it is used.  To compile your program from PRIZM, move to the shell window and type the name of the script.  This will compile and link the program.  From the text shell, you don\rquote t have to move anywhere; just type the name of the script.  To run the program, wait until the script finishes and type the name of the program itself.\par One problem with this is that you can\rquote t use PRIZM\rquote s debugger from the shell window.  You can use the \ldblquote Set Execute Options\rdblquote  menu command to tell the debugger to kick in in step or trace mode, and you can use the Execute menu command to run the program instead of typing the program name from the shell window.  These steps cause the debugger to kick in the way you are used to, but there\rquote s a catch: the compiler didn\rquote t create debug code!  That\rquote s why we added the }{\f6\fs20 \{parameters\}}{\f4  shell variable where we did in the script.  You can put the flags you want the compiler to use right after the name of the script in the shell window, and the flags will be used to compile the program.  For example, if the script is called Frame.Make, you can type\par \par }{\f6\fs20 frame.make +d\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 and the +d flag will be used on the }{\f6\fs20 cmpl}{\f4  command, causing the compiler to generate debug code.  As an alternative, you could just put the +d command on the }{\f6\fs20 cmpl}{\f4  command permanently, removing the flag once the program is finished.  If you are using the text shell, using +d will set things up so ORCA/Debugger can debug the program, after which running the }{\f6\fs20 DebugBreak}{\f4  utility will cause the debugger to kick in when your program starts to execute.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 This section has been a pretty quick introduction to scripts, and if you\rquote ve never seen them before it\rquote s understandable if you are a bit confused.  Seeing this many new ideas in so short a time is enough to confuse anyone for a while!  There are two important things you should take with you from this section.  The first is the canned script we developed, which really will make your life easier as you write programs with resource forks.  The second is the idea behind using scripts to automate complicated things you do often when you write programs.  The ORCA/C reference manual has detailed information on the shell, which is a whole language designed to make your life as a programmer a little easier.  There\rquote s a lot to learn in the shell scripting language, but if you program a lot, or write large programs, it can be worth while to take the time to learn how to put the power of shell scripts to work for you.\par \par Problem 3-3:  Type in the script from this section and use it to compile the Frame program.  Try making changes to the C and resource files separately to see how the script only rebuilds what you need rebuilt.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Understanding Resource Description Files}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Understanding Resource Description Files\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk14}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez\:using}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As we create the various resources in this course, we\rquote ll always do it the way we did for menus in this lesson, carefully laying out the format for the resource itself and describing what goes in each field.  Someday, though, you\rquote ll need to create a resource for one of your programs that isn\rquote t covered in this course, and you\rquote ll need to have some idea of how to do it.  In this section, we\rquote ll take a look at where you can get the information about these other resources.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Toolbox Resource Descriptions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Toolbox Resource Descriptions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4  you\rquote ll find an appendix that describes the various resources used by the toolbox.  You\rquote ll have to do some comparing between the information in Appendix E and the tool calls that use the resources to figure out exactly what is going on, so we\rquote ll use an example that you already know something about to look at the layout of this appendix.  On page E-59 you\rquote ll find a section describing }{\f6\fs20 rPString}{\f4 , the resource we used for the names of the menus and menu items.  It looks like this:\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1036{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw445\pich161\picwgoal8900\pichgoal3220\macpict\bliptag993923516\blipupi72{\*\blipuid 3b3e11bc47f93078f6aaaf78049728d5}04ecffffffff00a001bc1101a0008201000affffffff00a001bc30005800090074006da10096000c01000000020000000000000001000a00000000000c00c12c000a001607436f757269657203001604010d000a2b0109087250537472696e672c000800140554696d657303001429300c202020202020202438303036a00097a10096000c01000000020000000000000001000a00140000002b016b04000d000928001e00012f46696775726520452d323720646566696e657320746865206c61796f7574206f66207265736f75726365207479706503001629a909207250537472696e672c000900030647656e657661030003292d0120030014290328282438303036292e205265736f7572636573206f662074686973207479706520636f6e7461696e2028002800010f50617363616c20737472696e67732ea00097a10096000c01000000020000000000000001000a00320000003e01752c0010000d0d5a6170662044696e676261747303000d04010d00072a14016e03001429050220200d000929030e20202046696775726520452d3237030003040029340620202020202003001429121350617363616c20737472696e672c2074797065030016294109207250537472696e67030003292d012003001429030728243830303629a00097a10096000c01000000020000000000000001000a007c0000008801bb03001628008600010a6c656e6774684279746503000329320420202020030014290c214e756d626572206f66206279746573206f6620646174612073746f72656420696e03000329780120030016290310737472696e67436861726163746572730300032950012003001429030661727261792ea00097a10096000c01000000020000000000000001000a00870000009f0129030016280091000110737472696e67436861726163746572730300032950010d28009d00010c0909090909090909090909090300142948084172726179206f66030003291e012003001629030a6c656e677468427974650300032932012003001429030b636861726163746572732ea0009701000affffffff00a001bc09000000000000000031004a00090059006d09ffffffffffffffff38a10096000c02000000020000000000000001000a004c00190057005d28005400270a6c656e67746842797465a00097a10096000c02000000020000000000000001000a0060001d006b0058280068001e10737472696e6743686172616374657273a0009701000affffffff00a001bc09000000000000000030005e006c006e006da10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a00000000000000000300030d0003280066006609a5202020a5202020a501000affffffff00a001bc90000400000000000d002000000000000d0020005f006a006c008a0001e0000000e0000000000000000000000000000000e0000000e0000000000000000000000000000000e0000000e000000000000000a0009730005e0009006e000aa10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a0000000000000000280066000309a5202020a5202020a501000affffffff00a001bc90000400000000000d002000000000000d0020005f0007006c00270001e0000000e0000000000000000000000000000000e0000000e0000000000000000000000000000000e0000000e000000000000000a00097a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 3-1:  Resource Description from the Toolbox Reference Manuals\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par As you can see, Apple assumes you already know why you want to use the resource and basically what it is used for.  You\rquote d learn that from reading about the various tool calls or resources that make use of this resource.\par The table itself gives you the internal format for the data in the resource.  You can see that the data starts with a length byte and is followed by characters.  That makes sense, given that this is a p-string.  After all, that\rquote s the format for a p-string in the rest of the toolbox, too.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Rez Types}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Rez Types\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Appendix E often has some useful information about what sorts of things can go in the resource, but when it comes time to actually type in the resource description file, you need to load a copy of Types.Rez.  Types.Rez is in the RInclude folder, which is in your libraries folder.  Doing a string search in Types.Rez, you would find this entry for }{\f6\fs20 rPString}{\f4 :\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 #define rPString            $8006\par \par /*---------------------- rPString ----------------------*/\par type rPString \{\par         pstring;                    /* String */\par \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-6:  }{\f6\fs20 rPString}{\f4  Resource Definition from Types.rez\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab In the C language, hexadecimal numbers start with 0x; in most other languages on the Apple II}{\f4\fs20 GS}{\f4 , hexadecimal numbers start with $.  In Listing 3-6, you can see an example of a hexadecimal constant which starts with $.  The resource compiler accepts either format, so you could use 0x8006 instead.\par \par \tab \tab Apple\rquote s resource description files generally use the $ character to start a hexadecimal number, so I will generally use the $ character in resource files in this course.  In every case, though, you can use 0x instead.\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This is the actual type declaration the resource compiler uses when it compiles your resource description file.  It\rquote s sort of like a }{\f6\fs20 typedef struct}{\f4  in C, while your resource in the resource description file is sort of like an initialized variable.  This type declaration tells the resource compiler that an }{\f6\fs20 rPString}{\f4  resource has a resource type number of $8006, and that it contains a single piece of information, a p-string.\par The only really tricky feature in a resource type is the array.  Here\rquote s the type declaration for }{\f6\fs20 rMenuBar}{\f4 , which has an array of resource IDs for the various menus in the menu bar:\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 #define rMenuBar            $8008\par \par /* ----------------------- rMenuBar --------------------------------*/\par type rMenuBar \{\par     integer = 0;             /* version must be zero */\par     integer = 0x8000;        /* the following refs are all menu resID's */\par     array \{\par         longint;             /* menu template ID list */\par         \};\par     longint = 0;\par \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-7:  }{\f6\fs20 rMenuBar}{\f4  Resource Definition from Types.rez\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Let\rquote s compare this to the }{\f6\fs20 rMenuBar}{\f4  resource from our resource description file:\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuBar (1) \{      /* the menu bar */\par    \{\par       appleMenu,             /* resource numbers for the menus */\par       fileMenu,\par       editMenu\par       \};\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 3-8:  }{\f6\fs20 rMenuBar}{\f4  Resource Sample\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par One thing that stands out is the first two integers in the }{\f6\fs20 rMenuBar}{\f4  type.  They aren\rquote t in the resource.  These are actually fixed values, set to specific values in the type itself, so we don\rquote t need to put them in the resource; you only need to code a value in a resource if it is a variable in the type.  In fact, the array of resource IDs also ends with a long integer 0, which is also coded as a constant in the resource type.\par The array itself is an array of long integers.  Any time you see an array in a resource type, you code as many of the values as you like in your resource, separating each value with a comma.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Finding Out More About Rez}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Finding Out More About Rez\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Like I said, as we go through the course, each time we use a new resource we\rquote ll stop and lay it out carefully.  If you also take the time to look up the resource in Appendix E and in Types.Rez, you\rquote ll learn quite a bit about the resource compiler.  If you would like to read a very detailed technical description of the resource compiler and how it is used to create resources, you can find detailed technical information in the ORCA/M 2.0 reference manual or in the APW Tools and Interfaces package.\par {\*\bkmkend bk14}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource description files}{\rxe bk14}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Resource Tools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Resource Tools\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Changing Resources}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Changing Resources\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DeRez}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The whole point of resources is that they give you a way to change the program without the source code.  The Rez compiler can create a resource fork, but to change a resource in an existing program, you also need some way to find out what resources already exist.  One of the many ways to do this is by decompiling the resource fork with DeRez, making some changes, and then recompiling the resource fork with Rez.  In this course, we\rquote re really concerned with creating new resources, not changing the resources in programs that someone else has written, so we won\rquote t take up any time talking about the mechanics of changing a resource fork.  I just thought you should know that changing the resource fork is possible, and what you need to use if you want to give it a try.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Programmer\rquote s CAD Tools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Programmer\rquote s CAD Tools\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Design Master}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource editors}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 I\rquote ve talked with a lot of people who want to learn to use resources in their programs because they think using resources will make it easier to create a program.  Well, hopefully this lesson has shattered that completely false myth.  The point of resources was never to make it easier to write the program in the first place; the point of resources is to make it possible to change a program without changing, or even having access to, the source code.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1037{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich412\picwgoal13040\pichgoal8240\macpict\bliptag1506752442\blipupi72{\*\blipuid 59cf37ba4d4ee68ed788fa59f1b62189}288e00000000019c028c1101a00082a0008e01000a000000000240030898005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffe0000e0b600010fc00b003ffe0000e0b600010fc021113f000003c0001f187000000f818c000003c0f70000f0fd000101c0d400010fc021113f000003c0001f187000000f818c000003c0f70000f0fd000101c0d400010fc027113f0000fcf80018003000000c018030000663fe000006fc000701980000c00000c0d400010fc027113f0000fcf80018003000000c018030000663fe000006fc000701980000c00000c0d400010fc02a1c3f0003fff00018383078000c0f9c7c000607c6ccc78f8ccd8f0f000180fef103b1e0c1e0d500010fc02a1c3f0003fff00018383078000c0f9c7c000607c6ccc78f8ccd8f0f000180fef103b1e0c1e0d500010fc029223f0003ffe0001e1830cc000f198c300003c3070cccc60cce19980001819998c1c330c3d400010fc029223f0003ffe0001e1830cc000f198c300003c3070cccc60cce19980001819998c1c330c3d400010fc02a233f0003fffc00181830fc000c198c30000063060ccc060ccc1f8f0001819998c18330c1e0d500010fc02a233f0003fffc00181830fc000c198c30000063060ccc060ccc1f8f0001819998c18330c1e0d500010fc02a233f0001fff800181830c0000c198c36000663660cccc6cccc18018001999998d98330c030d500010fc02a233f0001fff800181830c0000c198c36000663660cccc6cccc18018001999998d98330c030d500010fc02a233f0000fbe000183c7878000f8f9e1c0003c1c607c78387cc0f0f0000f0f1987181e1e1e0d500010fc02a233f0000fbe000183c7878000f8f9e1c0003c1c607c78387cc0f0f0000f0f1987181e1e1e0d500010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc011003ffe0000e0f0000007ddffec00010fc011003ffe0000e0f0000007ddffec00010fc017083f000003c0001f1870f4000006de000003ec00010fc017083f000003c0001f1870f4000006de000003ec00010fc017083f0000fcf800180030f4000006de000003ec00010fc017083f0000fcf800180030f4000006de000003ec00010fc019093f0003fff00018383078f50001060fdfff0083ec00010fc019093f0003fff00018383078f50001060fdfff0083ec00010fc019093f0003ffe0001e1830ccf50001060fdfff0083ec00010fc019093f0003ffe0001e1830ccf50001060fdfff0083ec00010fc01b093f0003fffc00181830fcf50002060f80e100010f83ec00010fc01b093f0003fffc00181830fcf50002060f80e100010f83ec00010fc01b093f0001fff800181830c0f50002060f80e100010f83ec00010fc01b093f0001fff800181830c0f50002060f80e100010f83ec00010fc01b093f0000fbe000183c7878f50002060f80e100010f83ec00010fc01b093f0000fbe000183c7878f50002060f80e100010f83ec00010fc012003fec0002060f80e100010f83ec00010fc012003fec0002060f80e100010f83ec00010fc012003fec0002060f80e100010f83ec00010fc012003fec0002060f80e100010f83ec00010fc01a003fecff02fe0f80f60005f01818000104f200010f83ebff00c01a003fecff02fe0f80f60005f01818000104f200010f83ebff00c01c003cec0002060f80f700060198181800018cf200010f83ec000103c01c003cec0002060f80f700060198181800018cf200010f83ec000103c01f003cec0002060f80f700090198f8f80f81dc78f8ccf500010f83ec000103c01f003cec0002060f80f700090198f8f80f81dc78f8ccf500010f83ec000103c01e003cec0002060f80f70006019999981981fcfeccf500010f83ec000103c01e003cec0002060f80f70006019999981981fcfeccf500010f83ec000103c01f003cec0002060f80f7000901f999981981acfcccccf500010f83ec000103c01f003cec0002060f80f7000901f999981981acfcccccf500010f83ec000103c01f003cec0002060f80f700090199999819818cc0ccccf500010f83ec000103c01f003cec0002060f80f700090199999819818cc0ccccf500010f83ec000103c01f003cec0002060f80f700090198f8f80f818c78cc7cf500010f83ec000103c01f003cec0002060f80f700090198f8f80f818c78cc7cf500010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c01a003cec0003060f8208fe00031f8c0038e900010f83ec000103c01a003cec0003060f8208fe00031f8c0038e900010f83ec000103c01a003cec0003060f8318fe000306003018e900010f83ec000103c01a003cec0003060f8318fe000306003018e900010f83ec000103c01b003cec000b060f83b8f1f198061c7c183cea00010f83ec000103c01b003cec000b060f83b8f1f198061c7c183cea00010f83ec000103c01b003cec000b060f83f9999998060c301866ea00010f83ec000103c01b003cec000b060f83f9999998060c301866ea00010f83ec000103c01b003cec000b060f8359f99998060c30187eea00010f83ec000103c01b003cec000b060f8359f99998060c30187eea00010f83ec000103c01b003cec000b060f8319819998060c361860ea00010f83ec000103c01b003cec000b060f8319819998060c361860ea00010f83ec000103c01b003cec000b060f8318f198f8061e1c3c3cea00010f83ec000103c01b003cec000b060f8318f198f8061e1c3c3cea00010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c016003cec0002060f83e5ff00c0fe00010f83ec000103c016003cec0002060f83e5ff00c0fe00010f83ec000103c016003cec0002060f83e50000c0fe00010f83ec000103c016003cec0002060f83e50000c0fe00010f83ec000103c01a003cec0002060f83fb000040ec0000c0fe00010f83ec000103c01a003cec0002060f83fb000040ec0000c0fe00010f83ec000103c01d003cec0009060f830007c0c6000040ec0000c0fe00010f83ec000103c01d003cec0009060f830007c0c6000040ec0000c0fe00010f83ec000103c01d003cec0009060f83000600c0180040ec0000c0fe00010f83ec000103c01d003cec0009060f83000600c0180040ec0000c0fe00010f83ec000103c01d003cec0009060f83000607ce3e0040ec0000c0fe00010f83ec000103c01d003cec0009060f83000607ce3e0040ec0000c0fe00010f83ec000103c01d003cec0009060f8300078cc6180040ec0000c0fe00010f83ec000103c01d003cec0009060f8300078cc6180040ec0000c0fe00010f83ec000103c01d003cec0009060f8300060cc6180040ec0000c0fe00010f83ec000103c01d003cec0009060f8300060cc6180040ec0000c0fe00010f83ec000103c01d003cec0009060f8300060cc61b0040ec0000c0fe00010f83ec000103c01d003cec0009060f8300060cc61b0040ec0000c0fe00010f83ec000103c01d003cec0009060f830007c7cf0e0040ec0000c0fe00010f83ec000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c00011d003cec0009060f830007c7cf0e0040ec0000c0fe00010f83ec000103c01a003cec0002060f83fb000040ec0000c0fe00010f83ec000103c01a003cec0002060f83fb000040ec0000c0fe00010f83ec000103c016003cec0002060f83e50000c0fe00010f83ec000103c016003cec0002060f83e50000c0fe00010f83ec000103c016003cec0002060f83e5ff00c0fe00010f83ec000103c016003cec0002060f83e5ff00c0fe00010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c016003cf5000002f90002060f80e100010f83ec000103c016003cf5000002f90002060f80e100010f83ec000103c016003cf5000003f90002060f80e100010f83ec000103c016003cf5000003f90002060f80e100010f83ec000103c017003cf500010380fa0002060f80e100010f83ec000103c017003cf500010380fa0002060f80e100010f83ec000103c017003cf5000103c0fa0002060f80e100010f83ec000103c017003cf5000103c0fa0002060f80e100010f83ec000103c017003cf5000103e0fa0002060f80e100010f83ec000103c017003cf5000103e0fa0002060f80e100010f83ec000103c015003cf5000103f0fa0001060fdfff0083ec000103c015003cf5000103f0fa0001060fdfff0083ec000103c017003cf5000103f8fa0002060f80e100010f83ec000103c017003cf5000103f8fa0002060f80e100010f83ec000103c017003cf500010360fa0002060f80e100010f83ec000103c017003cf500010360fa0002060f80e100010f83ec000103c016003cf4000030fa0002060f80e100010f83ec000103c016003cf4000030fa0002060f80e100010f83ec000103c015003cec0005060f83fffff8e400010f83ec000103c015003cec0005060f83fffff8e400010f83ec000103c01c003cec0008060f830000181e001cfc000007ed00010f83ec000103c01c003cec0008060f830000181e001cfc000007ed00010f83ec000103c01c003cec0008060f8300001833000cfc000003ed00010f83ec000103c01c003cec0008060f8300001833000cfc000003ed00010f83ec000103c022003cec0012060f83000018301e0c1e3606c78f8307c78780f100010f83ec000103c022003cec0012060f83000018301e0c1e3606c78f8307c78780f100010f83ec000103c022003cec0012060f8300001830330c3338070cccc30cccccc0f100010f83ec000103c022003cec0012060f8300001830330c3338070cccc30cccccc0f100010f83ec000103c022003cec0012060f8300001830330c3330060fccc30ccc0fc0f100010f83ec000103c022003cec0012060f8300001830330c3330060fccc30ccc0fc0f100010f83ec000103c021003cec0011060f8300001833330c3330060c0cc30cccccf000010f83ec000103c021003cec0011060f8300001833330c3330060c0cc30cccccf000010f83ec000103c021003cec0005060f83000018fd1e083006078f8787c78780f100010f83ec000103c021003cec0005060f83000018fd1e083006078f8787c78780f100010f83ec000103c019003cec0005060f83fffff8fa00000cec00010f83ec000103c019003cec0005060f83fffff8fa00000cec00010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c098005200fa00000177029000fa00000177028c00fa00000177028c000112003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c015003cec0005060f83fffff8e400010f83ec000103c015003cec0005060f83fffff8e400010f83ec000103c01b003cec0007060f830000183e18fe000003ea00010f83ec000103c01b003cec0007060f830000183e18fe000003ea00010f83ec000103c01a003cec0006060f8300001833fd000003ea00010f83ec000103c01a003cec0006060f8300001833fd000003ea00010f83ec000103c01b003cec000b060f830000183339fcfe1e1fea00010f83ec000103c01b003cec000b060f830000183339fcfe1e1fea00010f83ec000103c01b003cec000b060f830000183319b6db3333ea00010f83ec000103c01b003cec000b060f830000183319b6db3333ea00010f83ec000103c01b003cec000b060f830000183319b6db3f33ea00010f83ec000103c01b003cec000b060f830000183319b6db3f33ea00010f83ec000103c01b003cec000b060f830000183319b6db3033ea00010f83ec000103c01b003cec000b060f830000183319b6db3033ea00010f83ec000103c01b003cec000b060f830000183e3db6db1e1fea00010f83ec000103c01b003cec000b060f830000183e3db6db1e1fea00010f83ec000103c015003cec0005060f83fffff8e400010f83ec000103c015003cec0005060f83fffff8e400010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c013003ced000303fe0f80e100010f83ec000103c013003ced000303fe0f80e100010f83ec000103c018023c007ff2ff06f000001e060f80e100010f83ec000103c018023c007ff2ff06f000001e060f80e100010f83ec000103c018023c03c0f200061e000070060f80e100010f83ec000103c018023c03c0f200061e000070060f80e100010f83ec000103c022013c0efe0002780c0cfc000b0184100000038000e0060f80e100010f83ec000103c022013c0efe0002780c0cfc000b0184100000038000e0060f80e100010f83ec000103c022013c1cfe0002cc0c0cfc000b010630000001c000e0060f80e100010f83ec000103c022013c1cfe0002cc0c0cfc000b010630000001c000e0060f80e100010f83ec000103c024013c1cfe0013cc7c7c1fc3c7c66006c770000001c000e0060f80e100010f83ec000103c024013c1cfe0013cc7c7c1fc3c7c66006c770000001c000e0060f80e100010f83ec000103c023013c1cfe00fecc001bfe660c600867f0000001c000e0060f80e100010f83ec000103c023013c1cfe00fecc001bfe660c600867f0000001c000e0060f80e100010f83ec000103c024013c1cfe0013fccccc1b67e666600846b0000001c000e0060f80e100010f83ec000103c024013c1cfe0013fccccc1b67e666600846b0000001c000e0060f80e100010f83ec000103c023013c1cfe00fecc101b66066660096630000001c000e0060f80e100010f83ec000103c023013c1cfe00fecc101b66066660096630000001c000e0060f80e100010f83ec000103c024013c1cfe0013cc7c7c1b63c663e006c630000001c000e0060f80e100010f83ec000103c024013c1cfe0013cc7c7c1b63c663e006c630000001c000e0060f80e100010f83ec000103c017013c0ef1000603800070060f80e100010f83ec000103c017013c0ef1000603800070060f80e100010f83ec000103c018023c03c0f200061e00001e060f80e100010f83ec000103c018023c03c0f200061e00001e060f80e100010f83ec000103c018023c007ff2ff06f0000003fe0f80e100010f83ec000103c018023c007ff2ff06f0000003fe0f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c018023c007ff2ff06f0000001fe0f80e100010f83ec000103c018023c007ff2ff06f0000001fe0f80e100010f83ec000103c018023c03c0f200061e00000d060f80e100010f83ec000103c018023c03c0f200061e00000d060f80e100010f83ec000103c021053c0e00f01818fc000060fd000860f003800038060f80e100010f83ec000103c021053c0e00f01818fc000060fd000860f003800038060f80e100010f83ec000103c022053c1c01981818fc00010180fe0008406001c00070060f80e100010f83ec000103c022053c1c01981818fc00010180fe0008406001c00070060f80e100010f83ec000103c024183c1c0198f8f83f878f8cc0e3e1e7f001b06001c00060060f80e100010f83ec000103c024183c1c0198f8f83f878f8cc0e3e1e7f001b06001c00060060f80e100010f83ec000103c024063c1c0199999836fecc0ec0618336d802186001c00070060f80e100010f83ec000103c024063c1c0199999836fecc0ec0618336d802186001c00070060f80e100010f83ec000103c024183c1c01f9999836cfccccc06183f6d802106001c00060060f80e100010f83ec000103c024183c1c01f9999836cfccccc06183f6d802106001c00060060f80e100010f83ec000103c0271b3c1c0199999836cc0cccc061b306d802586001c00070060f83fffff8e400010f83ec000103c0271b3c1c0199999836cc0cccc061b306d802586001c00070060f83fffff8e400010f83ec000103c0361f3c1c0198f8f836c78cc7c0f0e1e6d801b0f001c00070060f83c000781e000030fb000318000018fc000003f800010f83ec000103c0361f3c1c0198f8f836c78cc7c0f0e1e6d801b0f001c00070060f83c000781e000030fb000318000018fc000003f800010f83ec000103c029013c0ef1000d03800038060f8338039833000030fb000318000018fc000003f800010f83ec000103c029013c0ef1000d03800038060f8338039833000030fb000318000018fc000003f800010f83ec000103c02f023c03c0f2001d1e00000e060f83071c18301f1e3e1e07f0f1f1981f0f8f198f9b1e333e1ff800010f83ec000103c02f023c03c0f2001d1e00000e060f83071c18301f1e3e1e07f0f1f1981f0f8f198f9b1e333e1ff800010f83ec000103c02c023c007ff2ff0af0000001fe0f8300e01830fd330a06d99999981999999b199cfd33f800010f83ec000103c02c023c007ff2ff0af0000001fe0f8300e01830fd330a06d99999981999999b199cfd33f800010f83ec000103c027003cec0015060f83071c18303330333f06d9f999981999981e1998fd33f800010f83ec000103c027003cec0015060f83071c18303330333f06d9f999981999981e1998fd33f800010f83ec000103c026003cec0005060f83380398fd330b3006d98199981999999b0f98fd33f800010f83ec000103c026003cec0005060f83380398fd330b3006d98199981999999b0f98fd33f800010f83ec000103c029003cec0019060f83c000781e1f1e331e06d8f198f81f0f8f1991981e1f331ff800010f83ec000103c029003cec0019060f83c000781e1f1e331e06d8f198f81f0f8f1991981e1f331ff800010f83ec000103c019003cec0005060f83fffff8f300000ff300010f83ec000103c019003cec0005060f83fffff8f300000ff300010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c021003cec0002060f80fc00001ffaff0380000007f8ff00e0fc00010f83ec000103c021003cec0002060f80fc00001ffaff0380000007f8ff00e0fc00010f83ec000103c022003cec0002060f80fc00001cfb00040380000007f80000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb00040380000007f80000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c02a003cec0002060f80fc00021c001ffd000703f80000070003c0fe0003038000e0fc00010f83ec000103c02a003cec0002060f80fc00021c001ffd000703f80000070003c0fe0003038000e0fc00010f83ec000103c02b003cec0002060f80fc00031c001980fe000703f8000007000660fe0003018000e0fc00010f83ec000103c02b003cec0002060f80fc00031c001980fe000703f8000007000660fe0003018000e0fc00010f83ec000103c02b003cec0002060f80fc00151c00198f1f0f0003f8000007000603e7c3c3c18000e0fc00010f83ec000103c02b003cec0002060f80fc00151c00198f1f0f0003f8000007000603e7c3c3c18000e0fc00010f83ec000103c02b003cec0002060f80fc00021c0019fe99088003f8000007000606fe6603618000e0fc00010f83ec000103c02b003cec0002060f80fc00021c0019fe99088003f8000007000606fe6603618000e0fc00010f83ec000103c02b003cec0002060f80fc00151c001999999f8003f8000007000606666607e18000e0fc00010f83ec000103c02b003cec0002060f80fc00151c001999999f8003f8000007000606666607e18000e0fc00010f83ec000103c02a003cec0002060f80fc000d1c00199999980003f80000070006fd6603018000e0fc00010f83ec000103c02a003cec0002060f80fc000d1c00199999980003f80000070006fd6603018000e0fc00010f83ec000103c02b003cec0002060f80fc00151c001f0f198f0003f80000070003c3e663c3c3c000e0fc00010f83ec000103c02b003cec0002060f80fc00151c001f0f198f0003f80000070003c3e663c3c3c000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c098005201770000019c029001770000019c028c01770000019c028c000122003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c022003cec0002060f80fc00001cfb000403f8000007f80000e0fc00010f83ec000103c021003cec0002060f80fc00001ffaff03f8000007f8ff00e0fc00010f83ec000103c021003cec0002060f80fc00001ffaff03f8000007f8ff00e0fc00010f83ec000103c01a003cec0002060f80fc000001faff00f8ef00010f83ec000103c01a003cec0002060f80fc000001faff00f8ef00010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c012003cec0002060f80e100010f83ec000103c00f003fecff01fe0fdfff0083ebff00c00f003fecff01fe0fdfff0083ebff00c010003cec0001060fdfff0083ec000107c010003cec0401060fdfff0083ec040107c00f003cec000006de000003ec000107c00f003cec400046de000003ec400147c00f003cec000006de000003ec000107c00f003cec040006de000003ec040107c00d003cec000007ddffec000107c00d003cec400047ddffec400147c007003cb2000107c007003cb2040107c007003cb2000107c007003cb2400147c007003cb2000107c007003cb2040107c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 3-2:  Design Master Creates a Menu Bar\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par One of the reasons people have this mistaken impression is that they associate programs like Design Master with resources.  Design Master is one of a class of programs I like to refer to as a programmer\rquote s CAD tool.  With Design Master, you don\rquote t have to type in a lot of obscure entries to create a menu bar; instead, you create a menu bar by drawing it, and then Design Master creates the code for the menu bar itself.  This really isn\rquote t all that critical with menu bars, and if menu bars were the hardest thing to create for a desktop program, I don\rquote t think tools like Design Master would really be all that important, and they might never have been invented at all.  When you start laying out a dozen or so buttons in a dialog, though, a tool like Design Master can save you a lot of trouble.  That\rquote s when it\rquote s really nice to be able to click on a button and drag it over a few pixels, instead of changing a value in a resource description file and recompiling it.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1038{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw650\pich412\picwgoal13000\pichgoal8240\macpict\bliptag503858694\blipupi72{\*\blipuid 1e08460613ef3593a83e70e2fe259a7b}2dba00000000019c028a1101a00082a0008e01000a000000000240030898005200000000007e029000000000007e028a00000000007e028a000102af0002af0006003fb1ff000006003fb1ff000006003fb1ff000006003fb1ff000006003fb1ff000006003fb1ff00000f003fe700003ff9ff00f8d600010f000f003fe700003ff9ff00f8d600010f0013003ffe0000e0eb00003ff9ff00f8d600010f0013003ffe0000e0eb00003ff9ff00f8d600010f0024113f000003c0001f187000000f818c000003c0f800013f0ffdff03fe3ffff8d600010f0024113f000003c0001f187000000f818c000003c0f800013f0ffdff03fe3ffff8d600010f0029113f0000fcf80018003000000c018030000663fe000006fc00093e67ffff3fffff3ffff8d600010f0029113f0000fcf80018003000000c018030000663fe000006fc00093e67ffff3fffff3ffff8d600010f002b1c3f0003fff00018383078000c0f9c7c000607c6ccc78f8ccd8f0f003e7ffe0e044e1f3e1ff8d600010f002b1c3f0003fff00018383078000c0f9c7c000607c6ccc78f8ccd8f0f003e7ffe0e044e1f3e1ff8d600010f002b243f0003ffe0001e1830cc000f198c300003c3070cccc60cce1998003e7e66673e3ccf3cfff8d600010f002b243f0003ffe0001e1830cc000f198c300003c3070cccc60cce1998003e7e66673e3ccf3cfff8d600010f002b243f0003fffc00181830fc000c198c30000063060ccc060ccc1f8f003e7e66673e7ccf3e1ff8d600010f002b243f0003fffc00181830fc000c198c30000063060ccc060ccc1f8f003e7e66673e7ccf3e1ff8d600010f002b243f0001fff800181830c0000c198c36000663660cccc6cccc1801803e666667267ccf3fcff8d600010f002b243f0001fff800181830c0000c198c36000663660cccc6cccc1801803e666667267ccf3fcff8d600010f002b243f0000fbe000183c7878000f8f9e1c0003c1c607c78387cc0f0f003f0f0e678e7e1e1e1ff8d600010f002b243f0000fbe000183c7878000f8f9e1c0003c1c607c78387cc0f0f003f0f0e678e7e1e1e1ff8d600010f000f003fe700003ff9ff00f8d600010f000f003fe700003ff9ff00f8d600010f000f003fe700003ff9ff00f8d600010f000f003fe700003ff9ff00f8d600010f0006003fb1ff000006003fb1ff000010003ce7040030f0000101c4e004010f0010003ce7000030f0000101c0e000010f0010003ce7400070f0000101c0e040014f0010003ce7000030f0000101c0e000010f0019003ce7040830003e000318000f80f90002c0c1c4e004010f0019003ce7000830003e000318000f80f90002c0c1c0e000010f001b003ce7400a700033000300000cc00606fb000283c1fce040014f001b003ce7000a300033000300000cc00606fb000283c1fce000010f001e003ce704133000331f1f38780ccccf8f878f8000000360c1fce004010f001e003ce700133000331f1f38780ccccf8f878f8000000360c1fce000010f001e003ce7401370003e333318cc0f8cc6060cccc000000430c1fce040014f001e003ce7001330003e333318cc0f8cc6060cccc000000430c1fce000010f001e003ce70413300036333318cc0cccc6060cccc000000420c1fce004010f001e003ce70013300036333318cc0cccc6060cccc000000420c1fce000010f0022033c40407feaff01f000fe330d18cc0cccc6c6ccccc0000004b0c1effff140014f0022033c00007feaff01f000fe330d18cc0cccc6c6ccccc0000004b0c1effff100010f0025033c040470ea00133000331f1f3c780f87c383878ccccc000363f1f8f1000007f104010f0025033c000070ea00133000331f1f3c780f87c383878ccccc000363f1f8f1000007f100010f0017033c404070ea000030f0000101f8f1000007f140014f0017033c000070ea000030f0000101f8f1000007f100010f0017043c0404707febff00f0f0000001f0ff0007f104010f0017043c0000707febff00f0f0000001f0ff0007f100010f0017043c4040707febff00f0f0000001f0ff0007f140014f0017043c0000707febff00f0f0000001f0ff0007f100010f0019043c0404707ceb000030f0000101f8f200011f07f104010f0019043c0000707ceb000030f0000101f8f200011f07f100010f0019043c4040707ceb000030f0000101f8f200011f07f140014f0019043c0000707ceb000030f0000101f8f200011f07f100010f0021043c0404707ceb000730003e00003003e0f80002c1e1f8f200011f07f104010f0021043c0000707ceb000730003e00003003e0f80002c1e1f8f200011f07f100010f002d0d3c4040707c7c6000300001e00003f4000a3000330000300330018180fb00028331f8f200011f07f140014f002d0d3c0000707c7c6000300001e00003f4000a3000330000300330018180fb00028331f8f200011f07f100010f002f0c3c0404707c6000003000033180f3000c300033331e3e033333e3e1e3e0fe0003036031f8f200011f07f104010f002f0c3c0000707c6000003000033180f3000c300033331e3e033333e3e1e3e0fe0003036031f8f200011f07f100010f0033103c4040707c60e3e1f01f0303e3671f0f80f7000c30003e33303303e33181833330fe0003043061f8f200011f07f140014f0033103c0000707c60e3e1f01f0303e3671f0f80f7000c30003e33303303e33181833330fe0003043061f8f200011f07f100010f0033103c0404707c786333303301e18383199980f7000c300030331e3303333181833330fe00030420c1f8f200011f07f104010f0033103c0000707c786333303301e18383199980f7000c300030331e3303333181833330fe00030420c1f8f200011f07f100010f0033103c4040707c606333303300318303199980f7000c300030330333033331b1b33330fe000304b181f8f200011f07f140014f0033103c0000707c606333303300318303199980f7000c300030330333033331b1b33330fe000304b181f8f200011f07f100010f0033103c0404707c60633330330331b303198f80f700133000301f1e3303e1f0e0e1e3333300000363f1f8f200011f07f104010f0033103c0000707c60633330330331b303198f80f700133000301f1e3303e1f0e0e1e3333300000363f1f8f200011f07f100010f0026113c4040707c60f331f01f01e0e30799919998f8000030f0000101f8f200011f07f140014f0026113c0000707c60f331f01f01e0e30799919998f8000030f0000101f8f200011f07f100010f001d043c0404707cf700000ff6000030f0000101f8f200011f07f104010f001d043c0000707cf700000ff6000030f0000101f8f200011f07f100010f0019043c4040707ceb000030f0000101f8f200011f07f140014f0019043c0000707ceb000030f0000101f8f200011f07f100010f0019043c0404707ceb000030f0000101f8f200011f07f104010f0019043c0000707ceb000030f0000101f8f200011f07f100010f0019043c4040707ceb000030f0000101f8f200011f07f140014f0019043c0000707ceb000030f0000101f8f200011f07f100010f0022043c0404707ceb000830001e3000003003e0f90002c1e1f8f200011f07f104010f0022043c0000707ceb000830001e3000003003e0f90002c1e1f8f200011f07f100010f0022043c4040707ceb0008300033300000300330f900028331f8f200011f07f140014f0022043c0000707ceb0008300033300000300330f900028331f8f200011f07f100010f0025043c0404707ceb000a3000303e1e1e330331e330fc0003036031f8f200011f07f104010f0025043c0000707ceb000a3000303e1e1e330331e330fc0003036031f8f200011f07f100010f0025043c4040707ceb0002300030fe33043603e331e0fc00030430e1f8f200011f07f140014f0025043c0000707ceb0002300030fe33043603e331e0fc00030430e1f8f200011f07f100010f0025043c0404707ceb000a300030333f303c033330c0fc0003042031f8f200011f07f104010f0025043c0000707ceb000a300030333f303c033330c0fc0003042031f8f200011f07f100010f0025043c4040707ceb000a30003333303336033331e0fc000304b331f8f200011f07f140014f0025043c0000707ceb000a30003333303336033331e0fc000304b331f8f200011f07f100010f0026043c0404707ceb000b30001e331e1e3303e1e33333fd00030361e1f8f200011f07f104010f0026043c0000707ceb000b30001e331e1e3303e1e33333fd00030361e1f8f200011f07f100010f0019043c4040707ceb000030f0000101f8f200011f07f140014f0019043c0000707ceb000030f0000101f8f200011f07f100010f0019043c0404707ceb000030f0000101f8f200011f07f104010f0019043c0000707ceb000030f0000101f8f200011f07f100010f0019043c4040707ceb000030f0000101f8f200011f07f140014f0019043c0000707ceb000030f0000101f8f200011f07f100010f0018043c0404707ceb00003fefff00f8f200011f07f104010f0018043c0000707ceb00003fefff00f8f200011f07f100010f0018043c4040707ceb00003fefff00f8f200011f07f140014f0018043c0000707ceb00003fefff00f8f200011f07f100010f0021043c0404707ceb00073fffc1f9cfffe7f3f8ff023cfff8f200011f07f104010f0021043c0000707ceb00073fffc1f9cfffe7f3f8ff023cfff8f200011f07f100010f0020043c4040707ceb00063fffcff9ff3fe7f7ff027ccff8f200011f07f140014f0020043c0000707ceb00063fffcff9ff3fe7f7ff027ccff8f200011f07f100010f0024043c0404707ceb00093fffcfc18e0fe7e383c3fbff03fc9ccff8f200011f07f104010f0024043c0000707ceb00093fffcfc18e0fe7e383c3fbff03fc9ccff8f200011f07f100010f0024043c4040707ceb00093fffc399cf3fe7f39999fbff03fbcccff8f200011f07f140014f0024043c0000707ceb00093fffc399cf3fe7f39999fbff03fbcccff8f200011f07f100010f0027043c0404707ceb00133fffcf99cf3fe7f39981fffffe7ffffffbdc0ff8f200011f07f104010f0027043c0000707ceb00133fffcf99cf3fe7f39981fffffe7ffffffbdc0ff8f200011f07f100010f0027043c4040707ceb00133fffcf99cf27e7f3999ffffffebffffffb4fcff8f200011f07f140014f0027043c0000707ceb00133fffcf99cf27e7f3999ffffffebffffffb4fcff8f200011f07f100010f0027043c0404707ceb00133fffc1c1878fe06199c3999ffedffffffc9fcff8f200011f07f104010f0027043c0000707ceb00133fffc1c1878fe06199c3999ffedffffffc9fcff8f200011f07f100010f001d043c4040707ceb00003ff6ff01feeffcff00f8f200011f07f140014f001d043c0000707ceb00003ff6ff01feeffcff00f8f200011f07f100010f001d043c0404707ceb00003ff6ff01fef7fcff00f8f200011f07f104010f001d043c0000707ceb00003ff6ff01fef7fcff00f8f200011f07f100010f00980052007e000000fc0290007e000000fc028a007e000000fc028a00011d043c4040707ceb00003ff6ff01fefbfcff00f8f200011f07f140014f001d043c0000707ceb00003ff6ff01fefbfcff00f8f200011f07f100010f001d043c0404707ceb000030f50000fcfd000101f8f200011f07f104010f001d043c0000707ceb000030f50000fcfd000101f8f200011f07f100010f001d043c4040707ceb000030f50000fefd000101f8f200011f07f140014f001d043c0000707ceb000030f50000fefd000101f8f200011f07f100010f002e043c0404707cf900033fffff80f70002300014fe000310000540fe0000d8fe00024141f8f200011f07f104010f002e043c0000707cf900033fffff80f70002300014fe000310000540fe0000d8fe00024141f8f200011f07f100010f0035043c4040707cf9001b30000186198000e00030c0000180300022080008000002000002000cfe00028201f8f200011f07f140014f0035043c0000707cf9001b30000186198000e00030c0000180300022080008000002000002000cfe00028201f8f200011f07f100010f0034043c0404707cf9001930000186198000600030c0000180300010141514105001050445fd0003014141f8f200011f07f104010f0034043c0000707cf9001930000186198000600030c0000180300010141514105001050445fd0003014141f8f200011f07f100010f0033043c4040707cf9001930000186d9f0f060f036c78d8f8030000a082208088802088282fc00022021f8f200011f07f140014f0033043c0000707cf9001930000186d9f0f060f036c78d8f8030000a082208088802088282fc00022021f8f200011f07f100010f0034043c0404707cf9001930000186d99998619836ccce1980300001101110104001054104fd0003040011f8f200011f07f104010f0034043c0000707cf9001930000186d99998619836ccce1980300001101110104001054104fd0003040011f8f200011f07f100010f0034043c4040707cf9001a30000186d9999861f836cccc19803000220a220a08880208028280fd0002a221f8f200011f07f140014f0034043c0000707cf9001a30000186d9999861f836cccc19803000220a220a08880208028280fd0002a221f8f200011f07f100010f0035043c0404707cf90021300001833199986180198ccc198030001404150414500105044104440000014141f8f200011f07f104010f0035043c0000707cf90021300001833199986180198ccc198030001404150414500105044104440000014141f8f200011f07f100010f0027043c4040707cf90005300001833198fef00519878c0f8030f0000101f8f200011f07f140014f0027043c0000707cf90005300001833198fef00519878c0f8030f0000101f8f200011f07f100010f0020043c0404707cf900033fffff80f7000030f0000101f8f200011f07f104010f0020043c0000707cf900033fffff80f7000030f0000101f8f200011f07f100010f0019043c4040707ceb000030f0000101f8f200011f07f140014f0019043c0000707ceb000030f0000101f8f200011f07f100010f0019043c0404707ceb000030f0000101f8f200011f07f104010f0019043c0000707ceb000030f0000101f8f200011f07f100010f001d043c4040707cf900007ff4ff00f0f0000101f8f200011f07f140014f001d043c0000707cf900007ff4ff00f0f0000101f8f200011f07f100010f0028043c0404707cf900037fffff80f70002300010fe00010150f800024141f8f200011f07f104010f0028043c0000707cf900037fffff80f70002300010fe00010150f800024141f8f200011f07f100010f0031043c4040707cf9000470000181e0fe00001efe00041800700020fd000380000080fb00028201f8f200011f07f140014f0031043c0000707cf9000470000181e0fe00001efe00041800700020fd000380000080fb00028201f8f200011f07f100010f0032043c0404707cf900047000018330fe000033fd000b603000101414150041411140fc0003014141f8f200011f07f104010f0032043c0000707cf900047000018330fe000033fd000b603000101414150041411140fc0003014141f8f200011f07f100010f0032043c4040707cf900107000018301f1e1e0301e3e1e38f8f00020fe2204008220a080fb00022221f8f200011f07f140014f0032043c0000707cf900107000018301f1e1e0301e3e1e38f8f00020fe2204008220a080fb00022221f8f200011f07f100010f0032043c0404707cf9001070000183033303301e3333301860700010fe110300415041fb0003040111f8f200011f07f104010f0032043c0000707cf9001070000183033303301e3333301860700010fe110300415041fb0003040111f8f200011f07f100010f0032043c4040707cf90018700001830331e3f0033f331e186070002022220a008200a0a0fb0002a221f8f200011f07f140014f0032043c0000707cf90018700001830331e3f0033f331e186070002022220a008200a0a0fb0002a221f8f200011f07f100010f0034043c0404707cf90019700001833330330033303303186c700015141101004141104111fd0003014141f8f200011f07f104010f0034043c0000707cf90019700001833330330033303303186c700015141101004141104111fd0003014141f8f200011f07f100010f002b043c4040707cf9000e70000181e1f1e1e01e1e331e3c38f0fd00000af5000101f8f200011f07f140014f002b043c0000707cf9000e70000181e1f1e1e01e1e331e3c38f0fd00000af5000101f8f200011f07f100010f0020043c0404707cf900037fffff80f7000030f0000101f8f200011f07f104010f0020043c0000707cf900037fffff80f7000030f0000101f8f200011f07f100010f0018043c4040707cf900007fe1ff00f8f200011f07f140014f0018043c0000707cf900007fe1ff00f8f200011f07f100010f0019043c0404707ceb000030f0000101f8f200011f07f104010f0019043c0000707ceb000030f0000101f8f200011f07f100010f0019043c4040707ceb000030f0000101f8f200011f07f140014f0019043c0000707ceb000030f0000101f8f200011f07f100010f0020043c0404707ceb000230001efe00003ff70002c3f1f8f200011f07f104010f0020043c0000707ceb000230001efe00003ff70002c3f1f8f200011f07f100010f0023043c4040707ceb00093000331800180c000018fa00028031f8f200011f07f140014f0023043c0000707ceb00093000331800180c000018fa00028031f8f200011f07f100010f002b073c0404707c000003fcff00e0f400093000303e1f3e0c1e333efb0003036061f8f200011f07f104010f002b073c0000707c000003fcff00e0f400093000303e1f3e0c1e333efb0003036061f8f200011f07f100010f002b073c4040707c00007cfc00001ff4000930001e1833180c331e18fb00030430c1f8f200011f07f140014f002b073c0000707c00007cfc00001ff4000930001e1833180c331e18fb00030430c1f8f200011f07f100010f002c073c0404707c0003c7fcff01f1e0f500093000031833180c3f0c18fb00030420c1f8f200011f07f104010f002c073c0000707c0003c7fcff01f1e0f500093000031833180c3f0c18fb00030420c1f8f200011f07f100010f002c073c4040707c00073cfc00011e70f500093000331b331b0c301e1bfb000304b181f8f200011f07f140014f002c073c0000707c00073cfc00011e70f500093000331b331b0c301e1bfb000304b181f8f200011f07f100010f002e073c0404707c000ee0fc000103b8f5000b30001e0e1f0e0c1e330e3330fd0003036181f8f200011f07f104010f002e073c0000707c000ee0fc000103b8f5000b30001e0e1f0e0c1e330e3330fd0003036181f8f200011f07f100010f00230e3c4040707c001dc001f18000c001dcf5000030f0000101f8f200011f07f140014f00230e3c0000707c001dc001f18000c001dcf5000030f0000101f8f200011f07f100010f00230e3c0404707c001dc001800000c001dcf5000030f0000101f8f200011f07f104010f00230e3c0000707c001dc001800000c001dcf5000030f0000101f8f200011f07f100010f00230e3c4040707c001dc001838f87c001dcf5000030f0000101f8f200011f07f140014f00230e3c0000707c001dc001838f87c001dcf5000030f0000101f8f200011f07f100010f00230e3c0404707c001dc001e18cccc001dcf5000030f0000101f8f200011f07f104010f00230e3c0000707c001dc001e18cccc001dcf5000030f0000101f8f200011f07f100010f00230e3c4040707c001dc001818cccc001dcf5000030f0000101f8f200011f07f140014f00230e3c0000707c001dc001818cccc001dcf5000030f0000101f8f200011f07f100010f00290e3c0404707c001dc001818cccc001dcf5000530003e000033f60002c1e1f8f200011f07f104010f00290e3c0000707c001dc001818cccc001dcf5000530003e000033f60002c1e1f8f200011f07f100010f00290e3c4040707c001dc00183ccc7c001dcf50005300033000033f600028331f8f200011f07f140014f00290e3c0000707c001dc00183ccc7c001dcf50005300033000033f600028331f8f200011f07f100010f0029073c0404707c001dc0fc000101dcf500063000331e3e333ef80003036331f8f200011f07f104010f0029073c0000707c001dc0fc000101dcf500063000331e3e333ef80003036331f8f200011f07f100010f0028073c4040707c000ee0fc000103b8f5000230003efd33f800030431e1f8f300027fff07f140014f0028073c0000707c000ee0fc000103b8f5000230003efd33f800030431e1f8f300027fff07f100010f0028073c0404707c00073cfc00011e70f50002300030fd33f80003042331f8f300027fff07f104010f0028073c0000707c00073cfc00011e70f50002300030fd33f80003042331f8f300027fff07f100010f0028073c4040707c0003c7fcff01f1e0f50002300030fd33f8000304b331f8f300027fff07f140014f0028073c0000707c0003c7fcff01f1e0f50002300030fd33f8000304b331f8f300027fff07f100010f002b073c0404707c00007cfc00001ff400083000301e3e1e3e3330fa00030361e1f8f300027fff07f104010f002b073c0000707c00007cfc00001ff400083000301e3e1e3e3330fa00030361e1f8f300027fff07f100010f0027073c4040707c000003fcff00e0f4000030fe0002300030f6000101f8f300027fff07f140014f0027073c0000707c000003fcff00e0f4000030fe0002300030f6000101f8f300027fff07f100010f001a043c0404707ceb000030f0000101f8f300027fff07f104010f001a043c0000707ceb000030f0000101f8f300027fff07f100010f001a043c4040707ceb000030f0000101f8f300027fff07f140014f001a043c0000707ceb000030f0000101f8f300027fff07f100010f001a043c0404707ceb000030f0000101f8f300027fff07f104010f001a043c0000707ceb000030f0000101f8f300027fff07f100010f001a043c4040707ceb000030f0000101f8f300027fff07f140014f001a043c0000707ceb000030f0000101f8f300027fff07f100010f001e043c0404707ceb000330003018f40002c1e1f8f300027fff07f104010f001e043c0000707ceb000330003018f40002c1e1f8f300027fff07f100010f001d043c4040707febff05f00030000060f600018331f0ff0007f140014f001d043c0000707febff05f00030000060f600018331f0ff0007f100010f001e043c0404707febff05f000303878f8f70002036331f0ff0007f104010f001e043c0000707febff05f000303878f8f70002036331f0ff0007f100010f001e033c404070ea000530003018c060f70003043331f8f1000007f140014f001e033c000070ea000530003018c060f70003043331f8f1000007f100010f001e033c040470ea0005300030187860f700030421f1f8f1000007f104010f001e033c000070ea0005300030187860f700030421f1f8f1000007f100010f001b033c40407feaff05f00030180c6cf7000204b031effff140014f001b033c00007feaff05f00030180c6cf7000204b031effff100010f0019003ce7040730003f3c7838ccc0f900030361e1fce004010f0019003ce7000730003f3c7838ccc0f900030361e1f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0098005200fc0000017a029000fc0000017a028a00fc0000017a028a000114003ce7040330003e18f40002c0f1fce004010f0014003ce7000330003e18f40002c0f1f8e000010f0016003ce74005700033000060f600028131f8e040014f0016003ce70005300033000060f600028131f8e000010f001a003ce704083000333878f8ccd8f0fa0003036331fce004010f001a003ce700083000333878f8ccd8f0fa0003036331f8e000010f001a003ce7400870003e18cc60cce198fa0003043331f8e040014f001a003ce7000830003e18cc60cce198fa0003043331f8e000010f001a003ce7040830003018c060ccc1f8fa0003042331fce004010f001a003ce7000830003018c060ccc1f8fa0003042331f8e000010f001a003ce7400870003018cc6cccc180fa000304b321f8e040014f001a003ce7000830003018cc6cccc180fa000304b321f8e000010f001c003ce7040a3000303c78387cc0f19980fc00030363c1fce004010f001c003ce7000a3000303c78387cc0f19980fc00030363c1f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0013003ce7040230001ef30002c001fce004010f0013003ce7000230001ef30002c001f8e000010f0013003ce7400270000cf300028001f8e040014f0013003ce7000230000cf300028001f8e000010f0017003ce7040530000c1e1e3ef70003036001fce004010f0017003ce7000530000c1e1e3ef70003036001f8e000010f0016003ce7400270000cfe33f700030433f1f8e040014f0016003ce7000230000cfe33f700030433f1f8e000010f0017003ce7040530000c303333f70003042001fce004010f0017003ce7000530000c303333f70003042001f8e000010f0016003ce7400270000cfe33f7000304b001f8e040014f0016003ce7000230000cfe33f7000304b001f8e000010f0019003ce704013000fe1e02333330f90003036001fce004010f0019003ce700013000fe1e02333330f90003036001f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0019003ce7040230003ffe00023e0630f90002c001fce004010f0019003ce7000230003ffe00023e0630f90002c001f8e000010f001a003ce7400970000c000018300600c0fa00028001f8e040014f001a003ce7000930000c000018300600c0fa00028001f8e000010f001b003ce7040930000c1e333e303e71f0fb00030363f1fce004010f001b003ce7000930000c1e333e303e71f0fb00030363f1f8e000010f001b003ce7400970000c331e183c6630c0fb0003043001f8e040014f001b003ce7000930000c331e183c6630c0fb0003043001f8e000010f001b003ce7040930000c3f0c18306630c0fb00030423f1fce004010f001b003ce7000930000c3f0c18306630c0fb00030423f1f8e000010f001b003ce7400970000c301e1b306630d8fb000304b001f8e040014f001b003ce7000930000c301e1b306630d8fb000304b001f8e000010f001d003ce7040b30000c1e330e3e3e78719980fd0003036001fce004010f001d003ce7000b30000c1e330e3e3e78719980fd0003036001f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0018003ce7040230001efe00013838f80002c3c1fce004010f0018003ce7000230001efe00013838f80002c3c1f8e000010f0018003ce74002700033fe00011818f800028301f8e040014f0018003ce70002300033fe00011818f800028301f8e000010f0019003ce704073000301e363c1818f90003036301fce004010f0019003ce700073000301e363c1818f90003036301f8e000010f0019003ce7400770001e3338661818f90003043301f8e040014f0019003ce7000730001e3338661818f90003043301f8e000010f0019003ce704073000033030661818f90003042301fce004010f0019003ce700073000033030661818f90003042301f8e000010f0019003ce740077000333330661818f9000304b301f8e040014f0019003ce700073000333330661818f9000304b301f8e000010f001b003ce7040430001e1e30fe3c016660fb0003036301fce004010f001b003ce7000430001e1e30fe3c016660fb0003036301f8e000010f0011003ce7400070f1000203c1f8e040014f0011003ce7000030f1000203c1f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f0018003ce7040230001efe000103e0f80002c3c1fce004010f0018003ce7000230001efe000103e0f80002c3c1f8e000010f0018003ce74002700033fe00010330f8000280c1f8e040014f0018003ce70002300033fe00010330f8000280c1f8e000010f001b003ce70409300030363cc30331e330fb00030360c1fce004010f001b003ce70009300030363cc30331e330fb00030360c1f8e000010f001b003ce740097000373866db03e331e0fb00030430c1f8e040014f001b003ce700093000373866db03e331e0fb00030430c1f8e000010f001b003ce704093000333066db033330c0fb00030420c1fce004010f001b003ce700093000333066db033330c0fb00030420c1f8e000010f001b003ce74009700033306666033331e0fb000304b0c1f8e040014f001b003ce70009300033306666033331e0fb000304b0c1f8e000010f001c003ce7040a30001e303c6603e1e33333fc00030360c1fce004010f001c003ce7000a30001e303c6603e1e33333fc00030360c1f8e000010f0011003ce7400070f1000203c1f8e040014f0011003ce7000030f1000203c1f8e000010f0010003ce7040030f0000101fce004010f0010003ce7000030f0000101f8e000010f0010003ce7400070f0000101f8e040014f0010003ce7000030f0000101f8e000010f000f003ce704003fefff00fce004010f000f003ce700003fefff00f8e000010f000f003ce7400041efff00f8e040014f000f003ce7000001efff00f8e000010f0007003cb204010f0007003cb200010f0007003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f00980052017a0000019c0290017a0000019c028a017a0000019c028a000107003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f0007003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f0007003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f0007003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f0007003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f0007003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f0007003cb240014f0007003cb200010f0007003cb204010f0007003cb200010f0006003fb1ff000006003fb1ff000006003fb1ff000006003fb1ff000002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 3-3:  Design Master Creates a Dialog\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Once you draw your menu bar, window, or whatever, Design Master essentially writes a part of a program for you, creating code that will create what you drew.  In most cases you can create a resource fork directly, which is where the idea that Design Master and programs like it are resource compilers or resource editors come from, but in fact, you can also create a C program that doesn\rquote t use resources.  In short, Design Master is a wonderful tool.  It can save you a lot of time, especially when you are creating windows and dialogs with lots of buttons and other controls.  But the fact that Design Master can create resources is really incidental; it can generate code to create what you drew in a lot of formats, and resources are just one of many.\par In this course, we\rquote ll always use Rez to create the resources for programs.  There are two really good reasons for this:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab A listing of a resource description file is a lot more precise on paper than telling you how to create something graphically with a tool like Design Master.\par 2.\tab Rez comes with this course.  You don\rquote t have to buy Design Master to create the programs in this course.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par On the other hand, if you have Design Master or one of its cousins, put it to use, especially when you start creating windows and dialogs!\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In this lesson we\rquote ve made the switch to resources, changing one of our most complicated programs to use resources to see how it\rquote s done.  We\rquote ve learned what resources are, how to use Rez to create resources, and how to use scripts to automate the whole process of building the more complicated programs we\rquote re now creating.\par A few other tools and concepts were mentioned briefly so you would know that they exist and basically what they are.  These include Appendix E of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , which covers resource types used by the toolbox; Types.Rez, the main resource type file used by the resource compiler; DeRez, a utility that can decompile resources so you can changed them with Rez; and Design Master, a programmer\rquote s CAD tool that lets you draw complicated parts of a desktop program, and then create either resources or C source code to create the same thing in your program.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 NewMenuBar2\tab SetMenuBar\tab SetSysBar\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rMenu\tab rMenuBar\tab rMenuItem\tab rPString\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkend bk15}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resources}{\rxe bk15}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 4 \endash  Keep Alert!}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 4 \endash  Keep Alert!}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 4 \endash  Keep Alert!\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk18}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Alerts are a simple kind of window used to display information and ask the user of the program for a simple, push-button response.  This lesson covers how to create and use alerts.  We\rquote ll also work on Frame.cc, the basic program we will use as the starting point for most of the programs in the rest of this course.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Alerts Present Messages}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Alerts Present Messages\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When something goes wrong in a text program, it\rquote s easy to plop in a\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 printf("You goofed by doing this instead of that.\\n");\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 in the program when the error is found.  Writing a copyright message is just as easy.  Letting the user pick between a couple of alternatives is a little tougher, but not much:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 printf("Do you really want to reformat your hard disk? (Y or N) ");\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 scanf("%c", &ch);\par }{\f4 \par Alerts are used to do this sort of thing in a desktop program.  An alert is a small window, generally with no title bar (the lined thing at the top of most windows), no scroll bars, no grow box \endash  in short, just a box on the screen where you can write some stuff.  Figure 4-1 shows a typical alert.  The picture at the top left of the alert is called the alert icon, several of which are predefined and used for specific purposes.  }{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 note alert}}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 talking head}}}{\f4 The one you see here is a note alert, used in alerts that give you information, like a copyright message.  This particular icon is also known as the \ldblquote talking head.\rdblquote   The message is generally text, but there\rquote s really nothing that says an alert has to be all text.  The tools in the toolbox make it really easy to put text in an alert, since that is what you will need to do most of the time, but you could certainly put in some sort of a picture, or even an animation, if you prefer.  Finally, most alerts have at least one button.  A few, like an alert you put up to tell someone the program is busy printing a document, don\rquote t have a button; these alerts go away on their own.  Most alerts have at least an OK button, though.  Once you\rquote ve read the text, you click on the OK button to make the alert go away so you can do something else.  Alerts that offer choices will have several buttons, one for each choice.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1039{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw328\pich148\picwgoal6560\pichgoal2960\macpict\bliptag-818030130\blipupi72{\*\blipuid cf3dd9ce45896896383b3f541f07b152}0a7500000000009401481101a00082a0008e01000a0000000002d0024098002a000000000094014800000000009401480000000000940148000102d70002d70007003fdaff01fc0007003fdaff01fc00070030da00010c00070030da00010c00070030da00010c00070030da00010c000901307fdcff02fe0c000901307fdcff02fe0c000901307fdcff02fe0c000901307fdcff02fe0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c002702307c03fcff0efc001f8001800000c0000060000380fe000006fe000301c000c0fc00023e0c002702307c03fcff0efc001f8001800000c0000060000380fe000006fe000301c000c0fc00023e0c002804307c03000ffeff05fc0006000180fd0008306000018000030006fe0003030060c0fc00023e0c002804307c03000ffeff05fc0006000180fd0008306000018000030006fe0003030060c0fc00023e0c002a04307c03000ffeff1afc00060f0f8f9981c3c07c7c3c0183e3c7c03e3e6603c7c0f8f878fd00023e0c002a04307c03000ffeff1afc00060f0f8f9981c3c07c7c3c0183e3c7c03e3e6603c7c0f8f878fd00023e0c002a0b307c03030ffc000ffc000619fe990a80c6003066660186660300fe660506630060ccccfd00023e0c002a0b307c03030ffc000ffc000619fe990a80c6003066660186660300fe660506630060ccccfd00023e0c002a22307c03030ff00003fc00061999999b80c3c030667e018663c30066666e06630060ccfcfd00023e0c002a22307c03030ff00003fc00061999999b80c3c030667e018663c30066666e06630060ccfcfd00023e0c002a22307c03000fc00000fc00061999998d80c06036666001866063606666360663006cccc0fd00023e0c002a22307c03000fc00000fc00061999998d80c06036666001866063606666360663006cccc0fd00023e0c002a22307c03000fc3ccfcfc00060f0f8f9181e3c01c663c03c3e3c1c03e3e4603c30038cc78fd00023e0c002a22307c03000fc3ccfcfc00060f0f8f9181e3c01c663c03c3e3c1c03e3e4603c30038cc78fd00023e0c001808307c03000fc00000fcfc00000ff400003cf700023e0c001808307c03000fc00000fcfc00000ff400003cf700023e0c001008307c03000fc333ccfce300023e0c001008307c03000fc333ccfce300023e0c001a08307c03000fc00000fcfb0000c0fc000207060ef200023e0c001a08307c03000fc00000fcfb0000c0fc000207060ef200023e0c001a08307c03000fc3cf30fcfd00000cfa0002030018f200023e0c001a08307c03000fc3cf30fcfd00000cfa0002030018f200023e0c002018307c0303ffc00000fc001f0f8f1f01c7c0663c666c030e3e3cf300023e0c002018307c0303ffc00000fc001f0f8f1f01c7c0663c666c030e3e3cf300023e0c002010307c03003fc00003fc001999980c00c660fe66047003061866f300023e0c002010307c03003fc00003fc001999980c00c660fe66047003061866f300023e0c002018307c03003f00000ffc0019998f0c00c6606e6666600306187ef300023e0c002018307c03003f00000ffc0019998f0c00c6606e6666600306187ef300023e0c002018307c030ff00000fffc001999818d80c6603666666003061860f300023e0c002018307c030ff00000fffc001999818d80c6603666666003061860f300023e0c002104307c03003ffeff11fc001f0f8f0701e660463c3e60078f183c60f400023e0c002104307c03003ffeff11fc001f0f8f0701e660463c3e60078f183c60f400023e0c001604307c03003ffeff02fc0018fb00003cec00023e0c001604307c03003ffeff02fc0018fb00003cec00023e0c000e02307c03fcff00fce300023e0c000e02307c03fcff00fce300023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c001101307cf2000007fcff00e0f200023e0c001101307cf2000007fcff00e0f200023e0c001101307cf20000f8fc00001ff200023e0c001101307cf20000f8fc00001ff200023e0c001301307cf30001078ffcff01f1e0f300023e0c001301307cf30001078ffcff01f1e0f300023e0c001301307cf300010e78fc00011e70f300023e0c001301307cf300010e78fc00011e70f300023e0c001301307cf300011dc0fc000103b8f300023e0c001301307cf300011dc0fc000103b8f300023e0c001501307cf300083b8000078c600001dcf300023e0c001501307cf300083b8000078c600001dcf300023e0c001501307cf300083b80000cccc00001dcf300023e0c001501307cf300083b80000cccc00001dcf300023e0c001501307cf300083b80000ccd800001dcf300023e0c001501307cf300083b80000ccd800001dcf300023e0c001501307cf300083b80000ccf000001dcf300023e0c001501307cf300083b80000ccf000001dcf300023e0c001501307cf300083b80000ccd800001dcf300023e0c001501307cf300083b80000ccd800001dcf300023e0c001501307cf300083b80000cccc00001dcf300023e0c001501307cf300083b80000cccc00001dcf300023e0c001501307cf300083b8000078c600001dcf300023e0c001501307cf300083b8000078c600001dcf300023e0c001301307cf300011dc0fc000103b8f300023e0c001301307cf300011dc0fc000103b8f300023e0c001301307cf300010e78fc00011e70f300023e0c001301307cf300010e78fc00011e70f300023e0c001301307cf30001078ffcff01f1e0f300023e0c001301307cf30001078ffcff01f1e0f300023e0c001101307cf20000f8fc00001ff200023e0c001101307cf20000f8fc00001ff200023e0c001101307cf2000007fcff00e0f200023e0c001101307cf2000007fcff00e0f200023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307cdc00023e0c000901307fdcff02fe0c000901307fdcff02fe0c000901307fdcff02fe0c000901307fdcff02fe0c00070030da00010c00070030da00010c00070030da00010c00070030da00010c0007003fdaff01fc0007003fdaff01fc0002d70002d700a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 4-1:  A Typical Alert\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Before going too much further, I\rquote d like to point out that there is another sort of temporary window called a dialog.  This lesson does not deal with dialogs at all.  Dialogs usually (but not always!) have something in them besides buttons, text messages an icons, and often support other features as well.  From a visual standpoint, alerts are a specific subset of a larger class of things called dialogs, but you end up using completely different calls to create alerts and dialogs.  We\rquote ll talk about dialogs later, after you know more about the various controls you can put in a dialog.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using an Alert for an About Box}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using an Alert for an About Box\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 About command}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 about box}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AlertWindow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 copyright}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are several ways to create an alert in your program, but one of the easiest is the }{\f6\fs20 AlertWindow}{\f4  call in the window manager.  We\rquote ll start learning about alerts by creating an about box for our Frame program.  As you know from using a lot of desktop programs, the about box is the traditional place to put the name of the program, copyright information, and the place for the programmer to take a bow.  Figure 4-2 shows the about box we\rquote ll create.  This about box will be drawn when we pick the About command form the apple menu, and will stay on the screen until the user clicks on the OK button.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1040{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley48\piccropl0\piccropr0\piccropt0\piccropb0\picw378\pich166\picwgoal7560\pichgoal3320\macpict\bliptag-1646381004\blipupi72{\*\blipuid 9dde3834f27f1c53b20154c38e98f392}0dbf0000000000a6017a1101a00082a0008e01000a00000000030802d09800300000000000a601800000000000a6017a0000000000a6017a000102d10006007fd3ff008006007fd3ff0080070060d400010180070060d400010180070060d400010180070060d400010180070060d4ff01c180070060d4ff01c180070060d4ff01c180070060d4ff01c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180160260f807fcff02f8003efd000201801ee6000207c180160260f807fcff02f8003efd000201801ee6000207c180180460f806001ffeff02f80030fd0002078026e6000207c180180460f806001ffeff02f80030fd0002078026e6000207c180190460f806001ffeff09f800306c7dfc3c018066e6000207c180190460f806001ffeff09f800306c7dfc3c018066e6000207c180191160f806061ff8001ff8003c70cdb666018066e6000207c180191160f806061ff8001ff8003c70cdb666018066e6000207c180191160f806061fe00007f8003060cdb67e018066e6000207c180191160f806061fe00007f8003060cdb67e018066e6000207c180191160f806001f800001f8003060cdb660018064e6000207c180191160f806001f800001f8003060cdb660018064e6000207c180191160f806001f8799f9f80030607db63c07e678e6000207c180191160f806001f8799f9f80030607db63c07e678e6000207c180100860f806001f800001f8dd000207c180100860f806001f800001f8dd000207c180100860f806001f866799f8dd000207c180100860f806001f866799f8dd000207c180211160f806001f800001f80030000208c60000c3fc00041c6001c030f0000207c180211160f806001f800001f80030000208c60000c3fc00041c6001c030f0000207c180231b60f806001f879e61f80030000318060000c30000180000300000c030f0000207c180231b60f806001f879e61f80030000318060000c30000180000300000c030f0000207c180231b60f80607ff800001f8003e3303b9c663c0db1e1e3e1e367ce1e0c1f0f0000207c180231b60f80607ff800001f8003e3303b9c663c0db1e1e3e1e367ce1e0c1f0f0000207c180231b60f806007f800007f800333303f8c6c660db3330183338306330c330f0000207c180231b60f806007f800007f800333303f8c6c660db3330183338306330c330f0000207c180231b60f806007e00001ff80033370358c787e0db3f1e183f303063f0c330f0000207c180231b60f806007e00001ff80033370358c787e0db3f1e183f303063f0c330f0000207c180231460f8061fe00001fff800331b0318c6c6006630031bfe30036300c330f0000207c180231460f8061fe00001fff800331b0318c6c6006630031bfe30036300c330f0000207c180230460f806007ffeff13f8003e230319e663c0661e1e0e1e3030f1e1e1f0f0000207c180230460f806007ffeff13f8003e230319e663c0661e1e0e1e3030f1e1e1f0f0000207c180130460f806007ffeff03f800001ee0000207c180130460f806007ffeff03f800001ee0000207c1800e0260f807fcff00f8dd000207c1800e0260f807fcff00f8dd000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180260160f8f900001efd0005180000070630fe00036000000efe000503c7c3c3c03cf9000207c180260160f8f900001efd0005180000070630fe00036000000efe000503c7c3c3c03cf9000207c180230160f8f9000333000018fd0002030030fb000018fe000006fe66016066f9000207c180230160f8f9000333000018fd0002030030fb000018fe000006fe66016066f9000207c180270160f8f9001a301e3e3e1f38f878030e3e363e6ce1e1e03e6c79fc066666066060f9000207c180270160f8f9001a301e3e3e1f38f878030e3e363e6ce1e1e03e6c79fc066666066060f9000207c180270160f8f9001a303333183318ccc00306333866706333001870cdb60667c6066060f9000207c180270160f8f9001a303333183318ccc00306333866706333001870cdb60667c6066060f9000207c180270160f8f9001a303333183318cc7803063330666063f1e01860cdb60666c607e060f9000207c180270160f8f9001a303333183318cc7803063330666063f1e01860cdb60666c607e060f9000207c180260160f8f900fe33121b3318cc0c0306333066606300301860cdb606fe66016066f9000207c180260160f8f900fe33121b3318cc0c0306333066606300301860cdb606fe66016066f9000207c180280160f8f9001b1e1e330e1f3ccc78078f3e303e60f1e1e0186079b603c663c6603c18fa000207c180280160f8f9001b1e1e330e1f3ccc78078f3e303e60f1e1e0186079b603c663c6603c18fa000207c1800d0160f8de000030fa000207c1800d0160f8de000030fa000207c180090160f8d6000207c180090160f8d6000207c180250160f8f900001efd001430018000060f0f06000f80000001860000c0000780f8000207c180250160f8f900001efd001430018000060f0f06000f80000001860000c0000780f8000207c180230160f8f9000033fc00120180c01e19999e000cc0060001860000c00003f7000207c180230160f8f9000033fc00120180c01e19999e000cc0060001860000c00003f7000207c180280160f8f9001b301e3e333670f9f1f006199986000ccccf8781b63c6ccc78030f8780fa000207c180280160f8f9001b301e3e333670f9f1f006199986000ccccf8781b63c6ccc78030f8780fa000207c180280160f8f9000030fe331738319998c006199986000f8cc60cc1b66670d8c0030cccc0fa000207c180280160f8f9000030fe331738319998c006199986000f8cc60cc1b66670d8c0030cccc0fa000207c180270160f8f9001a3033333730319998c0060f8f86000ccdc60fc1b66660f078030cccf9000207c180270160f8f9001a3033333730319998c0060f8f86000ccdc60fc1b66660f078030cccf9000207c180270160f8f900fe33181b3030f998d806018186000cc6c6cc00cc6660d80c030cccc0fa000207c180270160f8f900fe33181b3030f998d806018186000cc6c6cc00cc6660d80c030cccc0fa000207c180280160f8f9001b1e1e3e2330791998701f8f0f1f8c0f88c38780cc3c60cc78078cc78cfa000207c180280160f8f9001b1e1e3e2330791998701f8f0f1f8c0f88c38780cc3c60cc78078cc78cfa000207c180180160f8f70004301e0000f0fb000318000780ef000207c180180160f8f70004301e0000f0fb000318000780ef000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180110160f8ef000003fcff00f0ef000207c180110160f8ef000003fcff00f0ef000207c180120160f8ef00007cfc00010f80f0000207c180120160f8ef00007cfc00010f80f0000207c180130160f8f0000103c7fcff01f8f0f0000207c180130160f8f0000103c7fcff01f8f0f0000207c180130160f8f00001073cfc00010f38f0000207c180130160f8f00001073cfc00010f38f0000207c180130160f8f000010ee0fc000101dcf0000207c180130160f8f000010ee0fc000101dcf0000207c180150160f8f000081dc00003c6300000eef0000207c180150160f8f000081dc00003c6300000eef0000207c180150160f8f000081dc0000666600000eef0000207c180150160f8f000081dc0000666600000eef0000207c180150160f8f000081dc0000666c00000eef0000207c180150160f8f000081dc0000666c00000eef0000207c180150160f8f000081dc0000667800000eef0000207c180150160f8f000081dc0000667800000eef0000207c180150160f8f000081dc0000666c00000eef0000207c180150160f8f000081dc0000666c00000eef0000207c180150160f8f000081dc0000666600000eef0000207c180150160f8f000081dc0000666600000eef0000207c180150160f8f000081dc00003c6300000eef0000207c180150160f8f000081dc00003c6300000eef0000207c180130160f8f000010ee0fc000101dcf0000207c180130160f8f000010ee0fc000101dcf0000207c180130160f8f00001073cfc00010f38f0000207c180130160f8f00001073cfc00010f38f0000207c180130160f8f0000103c7fcff01f8f0f0000207c180130160f8f0000103c7fcff01f8f0f0000207c180120160f8ef00007cfc00010f80f0000207c180120160f8ef00007cfc00010f80f0000207c180110160f8ef000003fcff00f0ef000207c180110160f8ef000003fcff00f0ef000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180090160f8d6000207c180070060d4ff01c180070060d4ff01c180070060d4ff01c180070060d4ff01c180070060d400010180070060d400010180070060d400010180070060d40001018006007fd3ff008006007fd3ff008002d100a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 4-2:  Our About Box\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par We\rquote ll use the Window Manager call }{\f6\fs20 AlertWindow}{\f4  to draw our about box.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 void DoAbout (void)\par \par \{\par #define alertID 1                       /* alert string resource ID */\par \par AlertWindow(awCString+awResource, NULL, alertID);\par \par #undef alertID \par \}\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-1:  Subroutine to Create an Alert\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 This call doesn\rquote t return control to our program until the user clicks on a button, so all of the hard work is handled for us.  When it does return, it returns the number of the button pushed; since our alert only has one button, we already know which one was pushed, and we throw the value away.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are three parameters to }{\f6\fs20 AlertWindow}{\f4 :\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 alertFlags}{\f4 \tab A flags word.  As with most flags words in the toolbox, this one is a series of bit flags.  Bits 1 and 2 tell what sort of parameter we are passing for }{\f6\fs20 alertStrRef}{\f4 :\par \par }\pard \qj\li2160\keepn\widctlpar\tx2880\adjustright {\f4 00\tab }{\f6\fs20 alertStrRef}{\f4  is a pointer\par 01\tab }{\f6\fs20 alertStrRef}{\f4  is a handle\par }\pard \qj\li2160\widctlpar\tx2880\adjustright {\f4 10\tab }{\f6\fs20 alertStrRef}{\f4  is a resource value\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par \tab The least significant bit of }{\f6\fs20 alertFlags}{\f4  is a 0 if }{\f6\fs20 subStrPtr}{\f4  is an array of pointers to null-terminated strings (c-strings) and 1 if it is an array of pointers to strings with a length byte (p-strings).\par \par \tab There are some constants in the Window.h header file that you can use to form the first parameter.  Here\rquote s the ones we\rquote ll use in this course:\par \par }\pard \li2160\widctlpar\adjustright {\f6\fs20 #define awCString 0x0000\par #define awPointer 0x0000\par #define awResource 0x0004\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par \tab The value of }{\f6\fs20 awCString+awResource}{\f4  we are passing, then, tells the Window Manager that }{\f6\fs20 alertStrRef}{\f4  is a resource ID, and that }{\f6\fs20 subStrPtr}{\f4  is an array of pointers to c-strings.\par \par \tab See Appendix A for information about the other flag bits.\par \par }{\f6\fs20 subStrPtr}{\f4 \tab This is an array of substitution strings.  Substitution strings give }{\f6\fs20 AlertWindow}{\f4  an awesome amount of flexibility in a very simple way.  We\rquote ll look at substitution strings in detail a bit later in the lesson.\par \par }{\f6\fs20 alertStrRef}{\f4 \tab The handle, pointer, or resource ID for the alert string itself.  In this course, we\rquote ll almost always pass a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 alert strings}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rAlertString resource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s a lot to the alert string, and we\rquote ll get to those details a little later in this lesson.  For now, let\rquote s concentrate on getting a program working with an alert string I\rquote ll provide.  Since it is a resource, we\rquote ll need to add a resource description to our resource description file.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rAlertString (1) \{\par    "43/"\par    "Frame 1.0\\n"\par    "by Mike Westerfield\\n"\par    "\\n"\par    "Contains libraries from ORCA C,\\n"\par    "Copyright 1991, Byte Works Inc."\par    "/^#0\\$00";\par    \};\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-2:  Alert String for an About Box\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 4-1:  Add the }{\f6\fs20 DoAbout}{\f4  function and the }{\f6\fs20 rAlertString}{\f4  resource to the Frame program from the last lesson.  Call }{\f6\fs20 DoAbout}{\f4  when the About menu command is selected.\par Don\rquote t peek ahead \endash  the next section of this lesson gives the solution to this problem!\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Frame Program}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Frame Program\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 I hope you worked Problem 4-1, or at least understand all of the principles behind it.  If not, now is the time to take a breather and go back to review enough of what we\rquote ve covered in this course to understand exactly what is happening the the solution to Problem 4-1.  The reason this problem is so important is that there is a lot of work invested in the basics of getting an event loop, menu bar, and about box all working together in a program.  Virtually every desktop program you will ever use or write does these same things.  It doesn\rquote t pay to reinvent the wheel for each and every program you write, so most programmers keep a basic program around that does all of this work, and simply add to it to create a new program.  That\rquote s what we\rquote ll to in the rest of this course.\par The two listings in this section show the C source code and the resource description file for our Frame program.  In almost every programming example for the rest of this course, I\rquote ll start with Frame and either add to it or make changes.  In most cases, I\rquote ll just show you the new stuff, and one of the problems will be to add the new stuff to Frame to create a working program.  Of course, if you get confused, the solutions to the problems are on the disk that comes with this course.\par So, before you move on to the next lesson, be sure you understand this program!\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Frame\par *\par * This is a frame for other programs.  It contains a basic\par * event loop, a menu bar, an about box, and supports NDAs.\par *\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 ***************************************************************/\par \par #pragma lint -1\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #include <orca.h>\par #include <Event.h>\par #include <Menu.h>\par #include <QuickDraw.h>\par #include <Window.h>\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <Desk.h>\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define appleMenu       1             /* Menu ID #s (also resource ID #s) */\par #define fileMenu        2\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define editMenu        3\par \par #define appleAbout      257\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define fileClose       255\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define fileQuit        256\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define editUndo        250\par #define editCut         251\par #define editCopy        252\par #define editPaste       253\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define editClear       254\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 BOOLEAN done;                           /* are we done, yet? */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 EventRecord myEvent;                    /* event record */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DoAbout\par *\par * Draw our about box\par *\par ***************************************************************/\par \par void DoAbout (void)\par \par \{\par #define alertID 1                       /* alert string resource ID */\par \par AlertWindow(awCString+awResource, NULL, alertID);\par \par #undef alertID \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * HandleMenu\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void HandleMenu (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int menuNum, menuItemNum;               /* menu number & menu item number */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuNum = myEvent.wmTaskData >> 16;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 menuItemNum = myEvent.wmTaskData;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 switch (menuItemNum) \{                  /* go handle the menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    case appleAbout:     DoAbout();      break;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    case fileClose:                      break;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    case fileQuit:       done = TRUE;    break;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    case editUndo:                       break;\par    case editCut:                        break;\par    case editCopy:                       break;\par    case editPaste:                      break;\par    case editClear:                      break;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par HiliteMenu(FALSE, menuNum);             /* unhighlight the menu */\par \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * InitMenus\par *\par * Initialize the menu bar.\par *\par ***************************************************************/\par \par void InitMenus (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define menuID 1                        /* menu bar resource ID */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 int height;                             /* height of the largest menu */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 MenuBarRecHndl menuBarHand;             /* for 'handling' the menu bar */\par \par                                         /* create the menu bar */\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuBarHand = NewMenuBar2(refIsResource, menuID, NULL);\par SetSysBar(menuBarHand);\par SetMenuBar(NULL);\par FixAppleMenu(1);                        /* add desk accessories */\par height = FixMenuBar();                  /* draw the completed menu bar */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 DrawMenuBar();\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #undef menuID\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Main program\par *\par ***************************************************************/\par \par int main (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int event;                           /* event type returned by TaskMaster */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 startdesk(640);                         /* start the tools */\par InitMenus();                            /* set up the menu bar */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 InitCursor();                           /* start the arrow cursor */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 done = FALSE;                           /* main event loop */\par myEvent.wmTaskMask = 0x001F7FFF;        /* let TaskMaster do it all */\par while (!done) \{\par    event = TaskMaster(everyEvent, &myEvent);\par    switch (event) \{\par       case wInSpecial:\par       case wInMenuBar:          HandleMenu();           break;\par       \}\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 enddesk();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-3A:  The Frame.cc File\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /*--------------------------------------------------------------*/\par /*                                                              */\par /*  Resources for Frame                                         */\par /*                                                              */\par /*--------------------------------------------------------------*/\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 #include "types.rez"\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /*- Constants --------------------------------------------------*/\par \par #define appleMenu     1 \par #define fileMenu      2\par #define editMenu      3\par #define editUndo      250\par #define editCut       251\par #define editCopy      252\par #define editPaste     253\par #define editClear     254\par #define fileClose     255\par #define fileQuit      256\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #define appleAbout    257\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /*- Menu Bar ---------------------------------------------------*/\par \par resource rMenuBar (1) \{                 /* the menu bar */\par    \{\par       appleMenu,                        /* resource numbers for the menus */\par       fileMenu,\par       editMenu\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (appleMenu) \{            /* the Apple menu */\par    appleMenu,                           /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    appleMenu,                           /* menu title resource ID */\par    \{appleAbout\};                        /* menu item resource IDs */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (fileMenu) \{             /* the File menu */\par    fileMenu,                            /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    fileMenu,                            /* menu title resource ID */\par    \{fileClose,fileQuit\};                /* menu item resource IDs */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (editMenu) \{             /* the Edit menu */\par    editMenu,                            /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    editMenu,                            /* menu title resource ID */\par    \{                                    /* menu item resource IDs */\par       editUndo,\par       editCut,\par       editCopy,\par       editPaste,\par       editClear\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editUndo) \{         /* Undo menu item */\par    editUndo,                            /* menu item ID */\par    "Z","z",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    editUndo                             /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editCut) \{          /* Cut menu item */\par    editCut,                             /* menu item ID */\par    "X","x",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editCut                              /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editCopy) \{         /* Copy menu item */\par    editCopy,                            /* menu item ID */\par    "C","c",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editCopy                             /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editPaste) \{      /* Paste menu item */\par    editPaste,                           /* menu item ID */\par    "V","v",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editPaste                            /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (editClear) \{        /* Clear menu item */\par    editClear,                           /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    editClear                            /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (fileClose) \{        /* Close menu item */\par    fileClose,                           /* menu item ID */\par    "W","w",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    fileClose                            /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (fileQuit) \{         /* Quit menu item */\par    fileQuit,                            /* menu item ID */\par    "Q","q",                             /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    fileQuit                             /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (appleAbout) \{       /* About menu item */\par    appleAbout,                          /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift      /* flags */\par       + fDivider,\par    appleAbout                           /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20                                         /* the various strings */\par resource rPString (appleMenu, noCrossBank)  \{"@"\};\par resource rPString (fileMenu, noCrossBank)   \{"  File  "\};\par resource rPString (editMenu, noCrossBank)   \{"  Edit  "\};\par resource rPString (editUndo, noCrossBank)   \{"Undo"\};\par resource rPString (editCut, noCrossBank)    \{"Cut"\};\par resource rPString (editCopy, noCrossBank)   \{"Copy"\};\par resource rPString (editPaste, noCrossBank)  \{"Paste"\};\par resource rPString (editClear, noCrossBank)  \{"Clear"\};\par resource rPString (fileClose, noCrossBank)  \{"Close"\};\par resource rPString (fileQuit, noCrossBank)   \{"Quit"\};\par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rPString (appleAbout, noCrossBank) \{"About Frame..."\};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /*- About Box --------------------------------------------------*/\par \par resource rAlertString (1) \{\par    "43/"\par    "Frame 1.0\\n"\par    "by Mike Westerfield\\n"\par    "\\n"\par    "Contains libraries from ORCA C,\\n"\par    "Copyright 1991, Byte Works Inc."\par    "/^#0\\$00";\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-3B:  The Frame.Rez File\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Alert Strings}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Alert Strings\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk16}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Before leaving the topic of alerts, let\rquote s take a closer look at the alert string that we used in the resource fork.  This alert string controls a lot of different things about the alert, from its size to the icon that is drawn.  The string itself is divided into three main sections, controlling the alert\rquote s visual appearance, the string that is printed, and the buttons.  Just like menu strings, the string is divided up to perform these functions based on some rigid formatting rules.\par The description of the alert string is divided up into a table form to make it easier to see what field you are reading about, but the descriptions are still real text descriptions, so go ahead and read them like you would the normal text in the book.\par \par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 size\tab This field is generally a single character controlling the size of the alert window.  The character is a numeric digit, from 0 to 9.  All but the first of these digits corresponds to a specific size window, but the 0 character is the first byte of a nine byte field.  The other eight bytes define the size of the window by listing the edges as two-byte integers, in this format:\par \par }\pard \qj\fi-540\li2340\widctlpar\adjustright {\f4 v1\tab Y coordinate (0 is at the top of the screen) of the top edge of the window.\par h1\tab X coordinate of the left edge of the window.\par v2\tab Y coordinate of the bottom edge of the window.\par h2\tab X coordinate of the right edge of the window.\par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 \tab The predefined sizes from 1 to 9 vary in both width and height, giving room for more characters as the number goes up.  An interesting and very useful feature of this size is that it is larger for 640 mode programs than it is for 320 mode programs, giving you about the right size box to display a given number of characters regardless of which screen you pick.  That helps a lot when you are trying to define a package of alerts to move from one program to another, or when you are creating a program that can switch between 320 mode and 640 mode while it is running.\par \par \tab There are two ways to get a handle on what the various sizes are.  One is to look at the table of sizes shown in Appendix A, and you\rquote re free to do that.  A better way to get a real grasp on the issue is to try the various sizes; that\rquote s what you will be doing in Problem 4-2.\par \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 icons}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 iconSpec\tab The picture in the upper-left corner of the dialog is called an icon; it\rquote s something that you can change from alert to alert.  You specify the icon in the second field of the alert string.  Like the size, the icon field is generally a single character, although there is one exception for a custom icon.  The alert sampler from Problem 4-2 will show you the various icons; here\rquote s a list of what they are:\par \par }\pard \qj\fi-1080\li2880\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 Character\tab Use\par }\pard \qj\fi-1080\li2880\ri360\widctlpar\adjustright {\f4 0\tab No icon at all.\par 1\tab Custom icon.  With a custom icon, you have to tell the window manager what icon you want, so you have to follow the single icon character with some other information.  Specifically:\par \par }\pard \qj\fi-1080\li4320\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 size\tab use\par }\pard \qj\fi-1080\li4320\ri360\keepn\widctlpar\adjustright {\f4 4 bytes\tab Pointer to the icon image.  The image is a series of pixels.\par 2 bytes\tab Width of the image in bytes.  Another way to think of this is as the length of a line of pixels.\par }\pard \qj\fi-1080\li4320\ri360\widctlpar\adjustright {\f4 2 bytes\tab Height of the image.  This is the number of lines of pixels in the icon.\par }\pard \qj\fi-1080\li2880\ri360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li2880\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1080\li2880\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 stop alert}}}{\v\f4 \par }\pard \qj\fi-1080\li2880\ri360\widctlpar\adjustright {\f4 2\tab Stop icon.  The stop icon is used when an error occurs.  For example, if the program is trying to save a file and there isn\rquote t enough room on disk, the alert would use the stop icon.\par }\pard \qj\fi-1080\li2880\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1080\li2880\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 note alert}}}{\v\f4 \par }\pard \qj\fi-1080\li2880\ri360\widctlpar\adjustright {\f4 3\tab Note icon.  This is the icon we used for our about box; it is used in alerts that present information to the user.\par }\pard \qj\fi-1080\li2880\ri360\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1080\li2880\ri360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 caution alert}}}{\v\f4 \par }\pard \qj\fi-1080\li2880\ri360\widctlpar\adjustright {\f4 4\tab Caution icon.  This is used for alerts that are displaying some sort of warning, and they usually give you a choice of going on or canceling the operation.  An example would be a message warning the user that they are about to format a hard disk.\par 5\tab Disk icon.  This icon shows a picture of a disk.  It\rquote s generally used by programs that manipulate entire disks.\par 6\tab Disk swap icon.  Use this icon when the program needs to read a file, but the disk containing the file is not in a drive.  The message, of course, should tell the user what disk is needed.\par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 \par separator\tab The rest of the fields in the alert string are variable length strings, so you need some way of telling the Window Manager where one string ends and another begins.  Since you may need to use just about any character in your strings, the Window Manager lets you tell it what character to use to separate the strings.  The / character we used earlier is a traditional example.\par \par messageText\tab This is the string that\rquote s actually printed in the alert.  You can use return characters (}{\f6\fs20 '\\r'}{\f4 ) to break a line, forcing text to a new line.  You can\rquote t have more than 1000 characters in the line.\par \par separator\tab Put another separator character here to mark the end of the message.  Be sure it is the same one you used for the first separator field!\par \par buttonStrings\tab You can put up to three buttons in an alert, separating each of the strings that will appear in the buttons with separator characters.  The Window Manager will create buttons that are all the same size, lined up and centered at the bottom of the dialog.  The total length of the text for the buttons must be 80 characters or less.\par \par \tab There are several special characters you can use to create the buttons.  These are covered in the next table.\par \par terminator\tab The end of the alert string is marked with a null character, which just happens to be what C pits at the end of a string anyway.  In a resource description file, you can put this character in with $"00", as we did in our about box resource.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez\:strings}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Besides the obvious points about what makes up an alert string, there are also some interesting things you can learn from this example about the Rez compiler itself.  The entire }{\f6\fs20 rAlertString}{\f4  resource is really nothing more than a single, big string.  Looking at it, though, you can see that we spread that string out over several lines.  That\rquote s the first neat trick: you can create a single long string in a resource description file by writing two shorter strings, just like you do in C.  You can put spaces between the strings, put them on different lines, or even put comments in between.  As long as you don\rquote t put in a comma, though, Rez combines all of the short strings to create a single, long string.\par Another thing you\rquote ll see imbedded in the string is }{\f6\fs20 \\n}{\f4 , and, at the end of the string, }{\f6\fs20 \\$00}{\f4 .  These are escape sequences, more or less like the ones you are used to in C.  In fact, the only difference you need to be aware of is that you use }{\f6\fs20 $}{\f4  instead of }{\f6\fs20 x}{\f4  to start a hexadecimal constant \endash  in other words, }{\f6\fs20 \\$00}{\f4  does the same thing in Rez as }{\f6\fs20 \\x00}{\f4  does in C.\par \par Problem 4-2:  Write a program that can display any combination of an alert size and icon.  Your program should have a menu labeled Size with the nine fixed sizes, showing a check mark beside the currently selected size.  Another menu, labeled Icon, should have an entry for each of the predefined icons, again using check marks to show the active icon.  Add an Open command under the File menu, and use it to actually draw the dialog, displaying a dialog with the size and icon selected in the menus.\par This is the only place in the course where you won\rquote t use a resource for the alert string, since it would be a little crazy to create one alert for each possible combination of size and icon.  Instead, set up a string and call }{\f6\fs20 AlertWindow}{\f4  using this subroutine:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * SampleAlert\par *\par * Draw an alert window\par *\par * Parameters:\par *    size - size of the alert (1..9)\par *    icon - alert icon number (2..6)\par *\par ***************************************************************/\par \par void SampleAlert (int size, int icon)\par \par \{\par int button;                             /* button pushed */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 char alertString[] = "00/Sample alert of size 0, with icon 0./^#0";\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 alertString[ 0] = (char) ('0'+size);\par alertString[ 1] = (char) ('0'+icon);\par alertString[24] = (char) ('0'+size);\par alertString[37] = (char) ('0'+icon);\par AlertWindow(awCString+awPointer, NULL, (Ref) alertString);\par \}\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-4:  Creating an }{\f6\fs20 AlertWindow}{\f4  from a Pointer\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Substitution Strings}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Substitution Strings\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk17}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the more powerful features of the alert string is the ability to use substitution strings.  Substitution strings are a special character sequence the Window Manager replaces with some other string before it actually draws the text in the alert.  Using substitution strings, you can create a single alert, and then use it to display a whole wealth of information.  A great example is an error handler that uses a single alert with a substitution string to show any of the errors you need to display while a program runs.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 alert strings\:buttons}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You can use a substitution string in either the text of the message or for the name of a button.  They come in two flavors, and in fact, you\rquote ve already used one of them without knowing it.  The first kind of substitution string, and the one you\rquote ve already seen, is generally used for common button names.  These substitution strings consist of two characters, a # and a numeric digit.  Table 4-1 shows the string you type, along with the string the Window Manager substitutes when the alert is actually drawn.\par \par }\pard \qj\li2880\ri3240\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx5040\adjustright {\f4 Substitution\tab String\par String\tab Drawn\par }\pard \qj\li2880\ri3240\keepn\widctlpar\tx5040\adjustright {\f6\fs20 #0\tab OK\par #1\tab Cancel\par #2\tab Yes\par #3\tab No\par #4\tab Try Again\par #5\tab Quit\par #6\tab Continue\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 4-1:  Predefined Substitution Strings\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If you look back at the alert we used for the about box, you\rquote ll find }{\f6\fs20 #0}{\f4  used for the name of the button.  From this table, you can see why the alert actually showed up with a button named OK.\par There are a lot of hidden advantages to using these predefined button names, and they go way beyond saving you some typing.  If your program is used in, say, France, it\rquote s pretty easy for Apple France to change the names of all of the buttons at the operating system level; they don\rquote t even need to change your resource fork to get French button names.  A more subtle issue is the fact that the human interface Apple uses is an evolving concept, and it changes from time to time.  It\rquote s not uncommon to find button names of Okay in older Macintosh programs.  Using these predefined names has the dual affect of making your program more standard, which makes it easier to use; and making your program easier to update if Apple decides that the button really should have been called Okay after all.\par The other flavor of substitution string is a little harder to use, but it\rquote s here that the real power of substitution strings comes into play.  You can define up to ten substitution strings of your own.  Each of them starts with an asterisk (*) and is followed by a numeric digit.  One of the parameters you pass to }{\f6\fs20 AlertWindow}{\f4  is an array of string pointers; this array is used for the various values of the strings.\par To see how this is used, let\rquote s create an error dialog.  Our error dialog will be used from anywhere in our program.  We\rquote ll just pass an error number, and expect the error dialog to do the rest.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Error\par *\par * Flag an error\par *\par * Parameters:\par *    err - error number\par *\par ***************************************************************/\par \par void FortuneAlert (int number)\par \par \{\par #define errorAlert 21                   /* alert resource ID */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define base 2000                       /* base resource ID for fortunes */\par \par char *substArray;                       /* substitution "array" */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 substArray = GetString(base+number);\par if (substArray != NULL) \{\par    AlertWindow(awCString+awResource, (Pointer) &substArray, errorAlert);\par    FreeString(base+number);\par    \}\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-5A:  Error Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rAlertString (21) \{\par    "42/"\par    "*0"\par    "/^#0"\par    $"00"\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-5B:  }{\f6\fs20 AlertWindow}{\f4  Resource\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par In this case we only need a substitution array with one element, since }{\f6\fs20 *0}{\f4  is the only substitution string we\rquote re using.  For a single string, we can just pass the address of the address of the substitution string, which is the same thing as passing the address of an array of addresses when the array only has one element.\par }{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rCString resource}}}{\v\f4 \par }{\f4 The only real concern with this mechanism is where all of the substitution strings are stored.  One of the advantages to using resources for the }{\f6\fs20 AlertWindow}{\f4  alert string is to put the text messages in the resource fork so they can be changed by the end user.  Well, we still put the alert strings in the resource fork, but we store them as }{\f6\fs20 rCString}{\f4  resources and load them with some simple Resource Manager calls.  In good structured programming style, this mechanism is packaged in a couple of subroutines, }{\f6\fs20 GetString}{\f4  and }{\f6\fs20 FreeString}{\f4 .  Here they are, along with a few sample error strings:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * GetString\par *\par * Get a string from the resource fork\par *\par * Parameters:\par *    resourceID - resource ID of the rCString resource\par *\par * Returns: pointer to the string; NULL for an error\par *\par * Notes: The string is in a locked resource handle.  The caller\par *    should call FreeString when the string is no longer needed.\par *    Failure to do so is not catastrophic; the memory will be\par *    deallocated when the program is shut down.\par *\par ***************************************************************/\par \par char *GetString (int resourceID)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 Handle hndl;                            /* resource handle */\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LoadResource}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 hndl = LoadResource(rCString, resourceID);\par if (toolerror() == 0) \{\par    HLock(hndl);\par    return (char *) (*hndl);\par    \}\par return NULL;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Free a resource string\par *\par * Parameters:\par *    resourceID - resource ID of the rCString to free\par *\par ***************************************************************/\par    \par void FreeString (int resourceID)\par \par \{\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReleaseResource}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 ReleaseResource(-3, rCString, resourceID);\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-6A:  }{\f6\fs20 GetString}{\f4  and }{\f6\fs20 FreeString}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rCString (2001) \{"Out of memory"\};\par resource rCString (2002) \{"Could not form the full path name"\};\par resource rCString (2003) \{"A document using this file name is already"\par                           " open"\};\par resource rCString (2004) \{"All of the objects are locked"\};\par resource rCString (2005) \{"You must select a printer from the control panel"\par                           " before setting up the page"\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 4-6B:  Sample Error String Resources\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LoadResource}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReleaseResource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 These subroutines use a couple of Resource Manager calls.  }{\f6\fs20 LoadResource}{\f4  loads a resource into memory based on the type of the resource and the resource ID; the subroutine then locks the handle so the string won\rquote t move and returns a pointer to the string.  }{\f6\fs20 FreeString}{\f4  just calls }{\f6\fs20 ReleaseResource}{\f4  to free up the memory used by the resource.  There isn\rquote t much to using these Resource Manager calls, but if you want to explore some of the options available, check out their descriptions in Appendix A.\par I also snuck a new resource type into the example.  Most of the toolbox is designed to work with p-strings, but the C language works best with null terminated strings.  To make it easier on us, I\rquote ve used the }{\f6\fs20 rCString}{\f4  resource}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 rCString}{\v\f4  resource}{\v\f6\fs20 }}}{\f4  for these strings.  It looks and works just like the }{\f6\fs20 rPString}{\f4  resource we\rquote ve been using for menus, but the }{\f6\fs20 rCString}{\f4  resource gives us a null terminated string instead of a string with a length byte up front.\par \par Problem 4-3:  Create a fortune Cookie program.  Each time the user picks Open from the file menu, randomly select a string number and display a note alert with the string.  You can make up your own fortunes, or use this group of famous quotes:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Be cheerful while you are alive.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Ptahhotpe, 24th century B.C.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 I know nothing except the fact of my ignorance.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Socrates, c.469-399 B.C.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Nothing endures but change.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Heraclitus, c.540-480 B.C.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 I have made this letter longer than usual, because I lack the time to make it short.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Blaise Pascal, 1656 or 1657\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 There are three faithful friends \endash  and old wife, and old dog, and ready money.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Benjamin Franklin, 1738\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Common sense is not so common.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Voltaire, 1764\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 It is never too late to give up our prejudices.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Henry David Thoreau, 1854\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Always do right.  This will gratify some people, and astonish the rest.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Mark Twain, 1901\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Everything is funny as long as it is happening to someone else.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Will Rogers, 1924\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 The whole of science is nothing more than a refinement of everyday thinking.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \tab \endash Albert Einstein, 1936\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkend bk16}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 alert strings}{\rxe bk16}}}{\v\f4 \par {\*\bkmkend bk17}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 substitution strings}{\rxe bk17}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In this lesson we\rquote ve learned to use alerts to create about boxes and display messages.  In the process, we have developed a program called Frame which will be the basis for most of the programs in the rest of the course.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 AlertWindow\tab LoadResource\tab ReleaseResource\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rAlertString\tab rCString\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk18}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 alerts}{\rxe bk18}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 5 - Why, Yes.  We Do Windows!}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 5 \endash  Why, Yes.  We Do Windows!}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 5 \endash  Why, Yes.  We Do Windows!\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk30}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 In this lesson we will learn to create, draw, and manipulate windows.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Defining Our Terms}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Defining Our Terms\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You see windows all of the time in desktop programs, so it may seem a little odd to start off by looking at what they are, but that\rquote s just what we\rquote ll do.  Visually, a window is a thing on the desktop where information is presented.  A standard document window, like the one in Figure 5-1, can be moved, can overlap other windows, and can even be shoved partway off of the screen.  In fact, while you can\rquote t }{\i\f4 drag}{\f4  a window off of the screen (the mouse won\rquote t move that far), your program can actually }{\i\f4 position}{\f4  a window completely off the the visible screen.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1041{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw329\pich213\picwgoal6580\pichgoal4260\macpict\bliptag466447202\blipupi72{\*\blipuid 1bcd6b62be9397bf34d15591bfb740de}06a1ffffffff00d401481101a0008201000affffffff00d4014809882288228822882231003800ff00b5010a09ffffffffffffffff3830009d00ff00aa010a20002100320021010920002400320024010920001e0032001e0109a100b60004004c008009000000000000000031001b00330026003d38a100b60004000100010700000000230000a100b60004004c008031001c00340025003d070001000109ffffffffffffffff38a100b60004000100010700000000230000a100b60004004c008009000000000000000031001b00fc00260106070001000138a100b60004000100010700000000230000a100b60004004c008031001c00fd00250105070001000109ffffffffffffffff38a100b600040001000107000000002300000988228822882288223100a9003200b5010a070001000109ffffffffffffffff3890000400000000001700180000000000170016009d00fe00aa010b000000000000000000000000000003ff000003ff000003030000030300000303000003030000030300003f03f0003f03f000300030000c00c0000c00c000030300000303000000cc000000cc00000030000000300000000000000000000030009d00ff00aa010a0900000000000000003100a900f500b5010009ffffffffffffffff38a100b60004004c008009000000000000000031001b0090002500aa38a100b600040001000107000000002300003100a900ff00b5010a070001000109ffffffffffffffff380900000000000000003100ac010100b3010809ffffffffffffffff380900000000000000003100ab010000af010509ffffffffffffffff380900000000000000003100a9003200b5003d09ffffffffffffffff380900000000000000003100a9006500b5008f09ffffffffffffffff38220046002b300022007a002b070022000c002d0d0023001522000a0113f10023fd172200be00fa0a002300f32200ce010e210023d5c62200ce00dbf80023e9e309000000000000000031003100ff003c010a09ffffffffffffffff3822002e0123e1fe9000040000000000160018000000000016001600a8003200b5003f00000000000000000000003800000038000000d8000000d80000031ff000031ff0000c0030000c00300030003000300030000c0030000c003000031ff000031ff00000d8000000d80000003800000038000000000000000000009000040000000000150018000000000015001400a800f300b500ff0000000000000000000000e0000000e0000000d8000000d800007fc600007fc600006001800060018000600060006000600060018000600180007fc600007fc6000000d8000000d8000000e0000000e00000000000003000a9003200b500403000a900f200b5010090000400000000001600180000000000160016003100fe003e010b00000000000000000000003000000030000000cc000000cc000003030000030300000c00c0000c00c000300030003f03f0003f03f000030300000303000003030000030300000303000003ff000003ff0000000000000000000030003100ff003e010a09882288228822882231003e00ff0064010a09ffffffffffffffff38a10096000c01000000020000000000000001000a000400000010002d2c000c00150948656c7665746963610300150d000a2b010d09436c6f736520626f78a00097a10096000c01000000020000000000000001000a003e00050056002b2b053a08436f6e74656e74202a0c06526567696f6ea00097a10096000c03000000020000000000000001000a00720008008a002f2b06280757696e646f77202b0a0c056672616d65a00097a10096000c01000000020000000000000001000a00b700cf00c300f62bba390853697a6520626f78a00097a10096000c01000000020000000000000001000a00c700dc00d3010c2b0d100b5363726f6c6c2062617273a00097a10096000c01000000020000000000000001000a00030115001b013228000c0116055a6f6f6d202a0c03626f78a00097a10096000c01000000020000000000000001000a00280125003401472b101908496e666f20626172a00097a10096000c01000000020000000000000001000a001a0093002600a90300000d00092800230094055469746c65a0009701000affffffff00d4014809000000000000000031005300ff007b010a09ffffffffffffffff38a10096000c01000000020000000000000001000a00000056000c007c0300150d000a2800090057095469746c6520426172a0009701000affffffff00d4014822000400831200231b1b30001b00320027010a30002600320032010a30001b003200b5010aa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 5-1:  Typical Document Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 title bar}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 title bar\tab The title bar is the top part of the window.  It includes the name of the window and all of the box surrounding the name except for the close box and zoom box.  You can move a window by dragging the title bar.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 close box}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 close box\tab The close box is the small box at the left hand end of the title bar.  Clicking in the close box does the same thing as selecting Close from the file menu.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 zoom box}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 zoom box\tab The zoom box is the box at the right hand size of the title bar.  Clicking on the zoom box resizes and moves the window.  If the window is not in its zoomed state when you click on the zoom box, it is resized and repositioned to the zoom state.  If the window is in the zoomed state when you click on the zoom box, the window is resized and repositioned to the last unzoomed state.  In most cases, the zoomed state is when the window fills all of the available screen space.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 info bar}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 info bar\tab The info bar is a part of the window right below the title bar; it is missing on most windows.  The info bar is used for extra information about the window.  One typical use is for rulers; you can see an info bar in the PRIZM desktop development system by showing the ruler.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 content region}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 content region\tab The content region is technically defined as all of the window that isn\rquote t something else.  It\rquote s the part you draw in.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 scroll bars\tab You can put scroll bars anywhere, but you can also have the Window Manager create the two normal scroll bars for you.  These scroll bars appear to the bottom and right of the content region, and are used to scroll the content region to different parts of a document.  (Technically, scroll bars are controls that are inside the content region.)\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 size box}}}{\v\f4 \par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\f4 size box\tab The size box is in the corner formed by the two scroll bars.  Dragging on the size box will change the size of the window.\par \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 window frame}}}{\v\f4 \par }{\f4 window frame\tab The window frame is the line (or area) that surrounds the rest of the window.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 5-1:  Parts of a Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are a lot of variations on this basic theme.  You can leave off almost any of the parts you see in the standard window.  You must have a title bar to have either a close box or a zoom box, but with that exception, you can create windows with any combination of these parts.  The only things you can\rquote t leave off are the window frame and the content region \endash  but they can be so small they don\rquote t matter, much.  There are also several options available to you.  Windows can have several forms of title bar and they can have a special frame called an alert frame, just to name a couple.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Opening a Window}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Opening a Window\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk19}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Windows are created with the Window Manager\rquote s }{\f6\fs20 NewWindow2}{\f4  call.  Here\rquote s the code you need to open a standard document window on the desktop:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * NewDocument\par *\par * Open a new window, returning the pointer\par *\par * Returns: Window's window pointer; NULL for an error\par *        \par ***************************************************************/\par \par GrafPortPtr NewDocument (void)\par \par \{\par #define wrNum 1001                      /* window resource number */\par \par return NewWindow2("\\pMyWindow", 0, NULL, NULL, 0x02, wrNum, rWindParam1);\par \par #undef wrNum\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-1A:  C Code to Open a New Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab The }{\f6\fs20 \\p}{\f4  at the start of the string turns the string into a p-string.  It\rquote s an important step, since the Window Manager expects to get p-strings for window titles, not the null terminated string you usually use in C.\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindParam1 resource}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindParam1 (1001) \{\par    $DDA5,                      /* wFrameBits */\par    nil,                        /* wTitle */\par    0,                          /* wRefCon */\par    \{0,0,0,0\},                  /* ZoomRect */\par    nil,                        /* wColor ID */\par    \{0,0\},                      /* Origin */\par    \{1,1\},                      /* data size */\par    \{0,0\},                      /* max height-width */\par    \{8,8\},                      /* scroll ver hors */\par    \{0,0\},                      /* page ver horiz */\par    0,                          /* winfoRefcon */\par    10,                         /* wInfoHeight */\par    \{30,10,183,602\},            /* wposition */\par    infront,                    /* wPlane */\par    nil,                        /* wStorage */\par    $0000                       /* wInVerb */\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-1B:  Resource for a New Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab The value }{\f6\fs20 nil}{\f4  is equivalent to the }{\f6\fs20 NULL}{\f4  you use for an unused pointer in C; resource description files just use a different name.\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMaster}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scrolling}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Most of the things you need to learn about windows involve changing the resource and the parameters to the }{\f6\fs20 NewWindow2}{\f4  call that actually creates the window.  Almost everything else about a window can be handled automatically for you by }{\f6\fs20 TaskMaster}{\f4 .  All you really have to do is keep track of the positions of the scroll bars and draw the contents of the window, since moving windows, overlapping windows, resizing windows, and even scrolling windows is handled by }{\f6\fs20 TaskMaster}{\f4 .\par Obviously there\rquote s a lot I haven\rquote t told you about windows, yet.  Your knowledge of windows will grow gradually through the lesson, and by the end, you\rquote ll understand all of the parameters to }{\f6\fs20 NewWindow2}{\f4  and all of the entries in the window resource.  Along the way, though, I\rquote m going to give you a series of problems, and in most cases they build on the previous problems.  You will learn about windows as you develop a program than handles them.  The point is to be patient: you may not know enough about windows to understand all of the parameters, yet, but you can still type in what you see so you have a program to explore ideas with as you work through the lesson.\par \par Problem 5-1:  Add the }{\f6\fs20 NewDocument}{\f4  function to the Frame program, calling it whenever New or Open are selected from the File menu.\par For now, just save the window pointer }{\f6\fs20 NewDocument}{\f4  returns in a global variable, and don\rquote t worry about the fact that you\rquote re loosing track of the windows if you open more than one.  As it turns out, this doesn\rquote t do any harm, since the Window Manager will dispose of all of the memory when it shuts down.  We\rquote ll start handling this better later in the lesson.\par You\rquote ll have to add New and Open as menu commands, of course.  You File menu should look like this:\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1042{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw96\pich130\picwgoal1920\pichgoal2600\macpict\bliptag-1784868696\blipupi72{\*\blipuid 959d10a814a12d02e50a6ba6d76124e4}056700000000008200601101a00082a0008e01000a0000000002d0024098000c000000000082006000000000008200600000000000820060000102f50002f50008003ffdff00fefb0008003ffdff00fefb0008003ffdff00fefb0008003ffdff00fefb0008003ffdff00fefb0008003ffdff00fefb0009053fe0e78ffffefb0009053fe0e78ffffefb0009053fe7ffcffffefb0009053fe7ffcffffefb0009053fe7c7cf87fefb0009053fe7c7cf87fefb0009053fe1e7cf33fefb0009053fe1e7cf33fefb0009053fe7e7cf03fefb0009053fe7e7cf03fefb0009053fe7e7cf3ffefb0009053fe7e7cf3ffefb0009053fe7c38787fefb0009053fe7c38787fefb0008003ffdff00fefb0008003ffdff00fefb0008003ffdff00fefb0008003ffdff00fefb0006003ff7ff00e006003ff7ff00e0060030f7000060060030f7000060060030f7000060060030f70000600a02300023fb0002308c600a02300023fb0002308c600a02300033fb000220cc7c0a02300033fb000220cc7c0d0530003b1e6180fe0002d8ec7c0d0530003b1e6180fe0002d8ec7c0d0b30003f336d800000010cfc7c0d0b30003f336d800000010cfc7c0d0b3000373f6d8000000108dc7c0d0b3000373f6d8000000108dc7c0d043000333033fe0003012ccc7c0d043000333033fe0003012ccc7c0c043000311e33fd0002d8c47c0c043000311e33fd0002d8c47c060030f700007c060030f700007c060030f700007c060030f700007c060030f700007c060030f700007c060030f700007c060030f700007c060030f700007c060030f700007c0a0230001efb000230787c0a0230001efb000230787c0a02300033fb000220cc7c0a02300033fb000220cc7c0d053000333e1e3efe0002d8cc7c0d053000333e1e3efe0002d8cc7c0c013000fd33050000010ccc7c0c013000fd33050000010ccc7c0d0b300033333f3300000108cc7c0d0b300033333f3300000108cc7c0d0b3000333330330000012ccc7c0d0b3000333330330000012ccc7c0d0530001e3e1e33fe0002d8787c0d0530001e3e1e33fe0002d8787c090330000030fa00007c090330000030fa00007c060030f700007c060030f700007c06003ff7ff00fc06003ff7ff00fc060030f700007c060030f700007c060030f700007c060030f700007c0b0330001e1cfc000231867c0b0330001e1cfc000231867c0b033000330cfc000221867c0b033000330cfc000221867c0d033000300cfe1e040000d9b67c0d033000300cfe1e040000d9b67c0d0b3000300c33303300010db67c0d0b3000300c33303300010db67c0d0b3000300c331e3f000109b67c0d0b3000300c331e3f000109b67c0d0b3000330c33033000012ccc7c0d0b3000330c33033000012ccc7c0b013000fc1e040000d8cc7c0b013000fc1e040000d8cc7c060030f700007c060030f700007c060030f700007c060030f700007c06003ff7ff00fc06003ff7ff00fc060030f700007c060030f700007c060030f700007c060030f700007c0c0430001e0018fd000230787c0c0430001e0018fd000230787c0d05300033000060fe000220cc7c0d05300033000060fe000220cc7c0d053000333338f8fe0002d8cc7c0d053000333338f8fe0002d8cc7c0d0b3000333318600000010ccc7c0d0b3000333318600000010ccc7c0d0b30003333186000000108cc7c0d0b30003333186000000108cc7c0d0b30003333186c0000012ccc7c0d0b30003333186c0000012ccc7c0d0530001e1f3c38fe0002d8787c0d0530001e1f3c38fe0002d8787c0902300003fa00010c7c0902300003fa00010c7c060030f700007c060030f700007c060030f700007c060030f700007c06003ff7ff00fc06003ff7ff00fc060001f7ff00fc060001f7ff00fc02f50002f500a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 5-2:  File Menu for Problem 5-1\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Be sure and put in the key equivalents shown.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you run the program, be sure you try opening more than one window.  You will be able to overlap them, resize them, and drag them around the screen.  The zoom box will work fine, but the close box doesn\rquote t work, yet.\par {\*\bkmkend bk19}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:opening}{\rxe bk19}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Closing a Window}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Closing a Window\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseWindow}}}{\f4 {\*\bkmkstart bk20}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Closing a window is really very easy.  If }{\f6\fs20 wPtr}{\f4  is the window pointer for the window you want to close, you close the window like this:\par \par }{\f6\fs20 CloseWindow(wPtr);\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The interesting part of closing a window isn\rquote t really closing it, it\rquote s finding }{\f6\fs20 wPtr}{\f4  for the window to close.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are two ways to close a window, and you use a different mechanism for closing the window with each.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FrontWindow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Close command}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The first way to close a window is to select Close from the File menu.  When the user picks Close from the File menu, you are supposed to close the front most window on the desktop.  That, of course, means that you need a convenient way to find out what window is in front.  The Window Manager\rquote s }{\f6\fs20 FrontWindow}{\f4  call does the trick, returning a pointer to the front window if there are any windows open, and }{\f6\fs20 NULL}{\f4  of there aren\rquote t any windows.  Here\rquote s how you would close a window if Close is picked from the File menu:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 wPtr = FrontWindow();\par if (wPtr != NULL)\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20    CloseWindow(wPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Checking to see if }{\f6\fs20 wPtr}{\f4  is }{\f6\fs20 NULL}{\f4  before closing the window is critical!  If you don\rquote t check, and the user picks the Close command, your program could crash.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMaster}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInGoAway}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wmTaskData}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The second mechanism for closing a window is clicking on the close box.  When the user clicks on the close box, }{\f6\fs20 TaskMaster}{\f4  returns a }{\f6\fs20 wInGoAway}{\f4  event.\par In most programs, you can only click on the close box for the front window, so it might seem like the same code we just used would work just fine.  In practice, that just won\rquote t do.  Even if your program only allows the user to click on the close box for the front window, you have to keep in mind that the user might be using a desk accessory that doesn\rquote t enforce that restriction.  So, instead of just closing the front window, we\rquote ll use the window pointer returned by }{\f6\fs20 TaskMaster}{\f4 .  When }{\f6\fs20 TaskMaster}{\f4  returns }{\f6\fs20 wInGoAway}{\f4  for the event, it stuffs a pointer to the window to close in }{\f6\fs20 wmTaskData}{\f4  field of the event record.  We can use this window pointer to close the window, like this:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 wPtr = (GrafPortPtr) myEvent.wmTaskData;\par if (wPtr != NULL)\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20    CloseWindow(wPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Technically, we don\rquote t need to check to see if }{\f6\fs20 wPtr}{\f4  is }{\f6\fs20 NULL}{\f4  this time, since }{\f6\fs20 TaskMaster}{\f4  wouldn\rquote t return }{\f6\fs20 wInGoAway}{\f4  unless it also passed back a valid window pointer.  In the next section, though, we\rquote re going to start doing a lot more work when we close a window, so we\rquote re going to encapsulate the code to close the window in a subroutine right away.\par \par Problem 5-2:  Add the ability to close windows to Frame.  You will need to add the check for a }{\f6\fs20 wInGoAway}{\f4  event to the event loop, and you\rquote ll have to add code that will be called when Close is picked from the File menu.  In both cases, you should call a function named }{\f6\fs20 CloseDocument}{\f4 , passing a pointer to the window to close.  }{\f6\fs20 CloseDocument}{\f4  should check to be sure the window pointer is not }{\f6\fs20 NULL}{\f4  before closing the window.\par {\*\bkmkend bk20}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:closing}{\rxe bk20}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Multiple Windows}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Multiple Windows\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk21}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 documents}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:documents}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Frame program can already handle multiple windows, but as we start to add more things to the program, we\rquote ll need to keep track of our windows a bit better.  In this section we\rquote ll look at two ways to handle more than one window effectively, and implement one of them in Frame.  In the process, we\rquote ll add distinct names to our windows, so they don\rquote t all have the name \ldblquote MyWindow\rdblquote .\par Most programs need to keep track of a wide variety of information about a window.  One of the best ways to organize all of this information is with a structure, which we will call a document record.  In fact, the reason our open and close subroutines were called }{\f6\fs20 NewDocument}{\f4  and }{\f6\fs20 CloseDocument}{\f4  was because I was going to eventually suggest calling our own records document records, and all of the information about one window a document.\par For now, our document record only needs two pieces of information, a window pointer }{\f6\fs20 wPtr}{\f4  and a window name }{\f6\fs20 wName}{\f4 .  As you already know, }{\f6\fs20 wPtr}{\f4  is a }{\f6\fs20 GrafPortPtr}{\f4 .  The }{\f6\fs20 wName}{\f4  field should be a p-string long enough to hold our longest window name.  Unfortunately, we really do have to use a p-string for this value, since the Window Manager will only take a p-string for a window title.\par How you keep track of these document records is pretty important.  One very common way is to create an array of document records, and flag them as either used or unused.  When you open a window, you can scan the array, looking for an entry that hasn\rquote t been used.  One easy way to keep track of which entries are used and which are not is to set }{\f6\fs20 wPtr}{\f4  to }{\f6\fs20 NULL}{\f4  in an unused record.  With this organization, you would have definitions something like these at the top of your program:\par \par }\pard \qj\li180\keepn\widctlpar\adjustright {\f6\fs20 #define numDocs 4                       /* max # open windows */\par \par typedef struct documentStruct \{         /* information about our document */\par    GrafPortPtr wPtr;                    /* window pointer */\par    char wName[81];                      /* window name */\par    \} documentStruct;\par \par documentStruct documents[numDocs];      /* our documents */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-2:  Array Based Documents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This works, but it builds an obvious limitation into your program: there will be some maximum number of documents that the user can have open at any one time.  You can pick a big number, but if it\rquote s too big, you\rquote ll waste a lot of space.  (Our document records already use 85 bytes of memory per document, and they will get bigger.)  Also, no matter what number you pick, someone someday is going to have a very good reason for trying to open more.  For that reason, I prefer a slightly more complicated but infinitely more flexible way of dealing with document records.  Instead of a fixed length array, use a linked list, allocating document records as they are needed.  This doesn\rquote t waste memory, and it allows the user to open as many documents as they have memory for.  Using linked lists, the definitions look like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define maxName 80                      /* max length of a window title */\par typedef struct documentStruct \{         /* information about our document */\par    struct documentStruct *next;         /* next document */\par    GrafPortPtr wPtr;                    /* window pointer */\par    char wName[maxName+1];               /* window name */\par    \} documentStruct;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef documentStruct *documentPtr;    /* document pointer */\par }\pard \qj\li180\widctlpar\adjustright {\f6\fs20 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 documentPtr documents;                  /* our documents */\par }\pard \qj\li180\widctlpar\adjustright {\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * InitGlobals\par *\par * Initialize the global variables\par *\par ***************************************************************/\par \par void InitGlobals (void)\par \par \{\par documents = NULL;\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-3:  List Based Documents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The only thing remotely complicated about using a linked list for our document records is adding, removing, and finding the correct document record.  Here\rquote s a modified form of }{\f6\fs20 NewDocument}{\f4  and }{\f6\fs20 CloseDocument}{\f4  that handles these details, along with appropriate error checking.  I\rquote ve also included a subroutine called }{\f6\fs20 FindDocument}{\f4  which returns the document pointer for a given window pointer.  These subroutines will be the basis for manipulating windows  for the rest of this course.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * CloseDocument\par *\par * Close a document and its associated window\par *\par * Parameters:\par *    dPtr - pointer to the document to close; may be NULL\par *\par ***************************************************************/\par \par void CloseDocument (documentPtr dPtr)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 documentPtr lPtr;                    /* pointer to the previous document */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (dPtr != NULL) \{\par    CloseWindow(dPtr->wPtr);          /* close the window */\par    if (documents == dPtr)            /* remove dPtr from the list when... */\par       documents = dPtr->next;        /* ...dPtr is the first document */\par    else \{                            /* ...dPtr is not the first document */\par       lPtr = documents;\par       while (lPtr->next != dPtr)\par          lPtr = lPtr->next;\par       lPtr->next = dPtr->next;\par       \}\par    free(dPtr);                       /* dispose of the document record */\par    \}\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par }\pard \li180\widctlpar\adjustright {\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * FindDocument\par *\par * Find the document for wPtr\par *\par * Parameters:\par *    wPtr  pointer to the window for which to find a document\par *\par * Returns: Document pointer; NULL if there isn't one\par *        \par ***************************************************************/\par \par documentPtr FindDocument (GrafPortPtr wPtr)\par \par \{\par BOOLEAN done;                        /* used to test for loop termination */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 documentPtr dPtr;                    /* used to trace the document list */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 dPtr = documents;\par done = dPtr == NULL;\par while (!done) \par    if (dPtr->wPtr == wPtr)\par       done = TRUE;\par    else \{\par       dPtr = dPtr->next;\par       done = dPtr == NULL;\par       \}\par return dPtr;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par }\pard \li180\widctlpar\adjustright {\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * NewDocument\par *\par * Open a new window, returning the pointer\par *\par * Parameters:\par *    wName - name for the new window\par *\par * Returns: Document pointer; NULL for an error\par *        \par ***************************************************************/\par \par documentPtr NewDocument (char *wName)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define wrNum 1001                   /* window resource number */\par \par documentPtr dPtr;                    /* new document pointer */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 dPtr = malloc(sizeof(documentStruct)); /* allocate the record */\par if (dPtr != NULL) \{\par    dPtr->onDisk = FALSE;             /* not on disk */\par    dPtr->wName[0] = strlen(wName);   /* set up the name */\par    strncpy(&dPtr->wName[1], wName, maxName);\par    dPtr->wPtr =                      /* open the window */\par       NewWindow2(dPtr->wName, 0, NULL, NULL, 0x02, wrNum, rWindParam1);\par    if (dPtr->wPtr == NULL) \{\par       FlagError(1, toolerror());     /* handle a window error */\par       free(dPtr);\par       dPtr = NULL;\par       \}\par    else \{\par       dPtr->next = documents;        /* put the document in the list */\par       documents = dPtr;\par       X(dPtr->wPtr);                 /* draw the X in the window */\par       \}\par    \}\par else\par    FlagError(2, 0);                  /* handle an out of memory error */\par return dPtr;\par \par #undef wrNum\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-4:  Basic Document Manipulation Subroutines\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This leaves two issues to deal with before we can add this new document handling mechanism to Frame.  The first is how errors are flagged by }{\f6\fs20 FlagError}{\f4 , and the other is how window names are chosen and passed.  We\rquote ll leave the topic of window names for the next section.  Flagging errors is relatively simple, though:  }{\f6\fs20 FlagError}{\f4  uses }{\f6\fs20 GetString}{\f4  and }{\f6\fs20 FreeString}{\f4  from the last lesson, appending a note about the specific tool error if a non-zero error number is passed.  The numbers refer to specific, numbered error messages.  }{\f6\fs20 NewDocument}{\f4  used error numbers 1 and 2, which might have messages like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 1\tab }{\f6\fs20 Could not open a new document}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 2\tab }{\f6\fs20 Out of memory}{\f4 \par \par Installing an error handler to display these messages is part of Problem 5-3.\par {\*\bkmkend bk21}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:multiple}{\rxe bk21}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Window Names}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Window Names\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk22}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s more to picking the name for a window that you might think, at first.  In most programs, each document window corresponds to a specific file.  For example, in a word processor, the text from a file is displayed in a window, and the name of the window is the same as the name of a file.  When a document is new, and hasn\rquote t been saved to disk, it doesn\rquote t have a file name.  In that case, it\rquote s customary to name the window }{\f6\fs20 Untitled x}{\f4 , where }{\f6\fs20 x}{\f4  is a number that is incremented for each window.\par The Window Manager also puts one fairly severe restriction on how we create and manipulate window names:  It\rquote s up to us to allocate space for the window name, to make sure the window name stays in one place, and to make sure it doesn\rquote t get changed without making an appropriate Window Manager call to change the name, so the window gets redrawn with the new window name.  All of these restrictions are handled nicely by keeping the window name in its own string buffer in our document record.\par Setting the window name based on a disk file name is something we\rquote ll leave for the next lesson, when we learn how to use the Standard File Operations Tool Set to figure out what file to open or what name to use for a new file.  Creating a window name for an untitled window is something we can do right away, though.  The subroutine in listing 5-5 shows one way to do it; this subroutine fills in a string buffer you pass as a parameter with an appropriate untitled window name.  It uses a global variable, }{\f6\fs20 untitledNum}{\f4 , to keep track of the number for the untitled window, resetting it to 1 if there are no untitled windows in the current list of documents.\par If you look close, you\rquote ll also see that this subroutine assumes there is a new field in the document record.  This field, called }{\f6\fs20 onDisk}{\f4 , indicates whether the file exists on disk \endash  in other words, whether there is a valid file name for the document.  We\rquote ll need this field later on, when we actually start loading and saving disk files.  This field should be set to }{\f6\fs20 FALSE}{\f4  in }{\f6\fs20 NewDocument}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * GetUntitledName\par *\par * Create a name for an untitled window\par *\par * Returns: Pointer to the new window name\par *        \par ***************************************************************/\par \par char *GetUntitledName (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define untitled 101                 /* Resource number for "Untitled " */\par \par static char name[maxName];           /* window name */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 char *sPtr;                          /* pointer to the resource string */\par documentPtr dPtr;                    /* used to trace the document list */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int number;                          /* new value for untitledNum */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 dPtr = documents;                    /* if there are no untitled          */\par number = 1;                          /*  documents then reset untitledNum */\par while (dPtr != NULL)\par    if (!dPtr->onDisk) \{\par       number = untitledNum;\par       dPtr = NULL;\par       \}\par    else\par       dPtr = dPtr->next;\par untitledNum = number;\par sPtr = GetString(untitled);          /* set the base name */\par if (sPtr == NULL)\par    strcpy(name, "Untitled ");\par else \{\par    strncpy(name, sPtr, maxName-6);\par    FreeString(untitled);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20                                      /* add the untitled number */\par sprintf(&name[strlen(name)], "%d", untitledNum);\par ++untitledNum;                       /* update untitledNum */\par \par return name;                         /* return the name */\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-5:  }{\f6\fs20 GetUntitledName}{\f4  Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 5-3:  In this problem you will be adding support for multiple windows to Frame.  This involves several steps:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Add }{\f6\fs20 NewDocument,}{\f4  }{\f6\fs20 CloseDocument}{\f4  and }{\f6\fs20 FindDocument}{\f4  from the last section.  Adjust the two places in your program where a window is closed, calling }{\f6\fs20 FindDocument}{\f4  with the window pointer and use the result to call }{\f6\fs20 CloseDocument}{\f4 .\par 2.\tab Add a document record, a document list variable, and the }{\f6\fs20 InitGlobals}{\f4  subroutine.  }{\f6\fs20 InitGlobals}{\f4  should set the document list variable to }{\f6\fs20 NULL}{\f4 , indicating that there are no open documents.  Be sure to include the }{\f6\fs20 onDisk}{\f4  field, initializing it to }{\f6\fs20 FALSE}{\f4  in }{\f6\fs20 NewDocument}{\f4 .\par 3.\tab Add }{\f6\fs20 GetUntitledName}{\f4 , calling this subroutine before calling }{\f6\fs20 NewDocument}{\f4  to get a distinct window name for each new window.  It\rquote s important to establish the name before calling }{\f6\fs20 NewDocument}{\f4 , since we will eventually call }{\f6\fs20 NewDocument}{\f4  to set up a new document record when we open a disk file, too.\par 4.\tab Create an error handler based on }{\f6\fs20 GetString}{\f4  and }{\f6\fs20 FreeString}{\f4 .  Use the description for the error handler at the end of the last lesson to write yours.\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk22}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:name}{\rxe bk22}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Drawing in a Window}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Drawing in a Window\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk23}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Back in Lesson 4 you used the QuickDraw drawing commands }{\f6\fs20 MoveTo}{\f4  and }{\f6\fs20 LineTo}{\f4  to draw some lines on the screen.  At that point, your program didn\rquote t have any windows, so you didn\rquote t have to worry about exactly where you were drawing; your program just wrote to the screen, figuring that it owned the whole thing.  Well, at that time, it did \endash  but no longer!\par The Frame program you\rquote ve created can open as many windows as you have the patience and memory to handle.  Each of these windows is, among other things, a separate drawing area called a }{\f6\fs20 GrafPort}{\f4 .  Any time you use QuickDraw to draw to \ldblquote the screen\rdblquote  you are really drawing to a }{\f6\fs20 GrafPort}{\f4 , which may or may not be the whole screen.  The }{\f6\fs20 GrafPort}{\f4  you are drawing to could also be a window, and the window could be part on the screen or part off of the screen.  The window might even be covered up, part way or all the way, by another window.  And, last but not least, the }{\f6\fs20 GrafPort}{\f4  might not even be on the screen at all.  Later, you\rquote ll draw to a }{\f6\fs20 GrafPort}{\f4  to print, instead of to display something on the screen.\par Regardless of which of these myriad of conditions exist, QuickDraw II is smart enough to keep your drawing where it belongs.  You can, and generally do, just move your pen and draw wherever you want.  QuickDraw II figures out if the stuff you draw is on a visible part of the screen or not, and draws the actual dots on the screen if it needs to, ignoring you if what you are drawing is not visible.  This is something you\rquote ll get a chance to see for yourself in a little while.\par About the only thing you really do have to do is tell QuickDraw II which }{\f6\fs20 GrafPort}{\f4  to use.  The normal sequence of events to draw to any particular window is:\par \par }\pard \qj\fi-360\li720\keepn\widctlpar\adjustright {\pard\plain \qj\fi-360\li720\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetPort}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Get and save the \ldblquote current\rdblquote  }{\f6\fs20 GrafPort}{\f4 , so you can restore it later.  That way, if the subroutine that called the one you are writing assumes a specific }{\f6\fs20 GrafPort}{\f4  is active, it will still be active when you return.  QuickDraw\rquote s }{\f6\fs20 GetPort}{\f4  call returns the current }{\f6\fs20 GrafPort}{\f4 .\par }\pard \qj\fi-360\li720\keepn\widctlpar\adjustright {\pard\plain \qj\fi-360\li720\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPort}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 2.\tab Set the }{\f6\fs20 GrafPort}{\f4  to your own window using }{\f6\fs20 SetPort}{\f4 .\par }\pard \qj\fi-360\li720\keepn\widctlpar\adjustright {\pard\plain \qj\fi-360\li720\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PenNormal}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 3.\tab Unless you\rquote re sure about the current state of QuickDraw II\rquote s drawing pen, make a quick call to }{\f6\fs20 PenNormal}{\f4  to set things up for \ldblquote normal\rdblquote  drawing.  }{\f6\fs20 PenNormal}{\f4  gives you a pen that is one pixel wide and one pixel tall, sets the drawing mode to }{\f6\fs20 modeCopy}{\f4 , sets the pen color to black, and gives you a solid pen mask.  Some of that may not make any sense; we\rquote ll get to it later.  The result, though, is a setting that tells QuickDraw II to draw normal looking black lines.\par 4.\tab Draw whatever you want to draw.\par 5.\tab Use }{\f6\fs20 SetPort}{\f4  to reset the }{\f6\fs20 GrafPort}{\f4  to whatever it was before you started.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-360\li720\keepn\widctlpar\adjustright {\pard\plain \qj\fi-360\li720\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetPortRect}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It\rquote s actually faster to do all of this than to describe it.  Here\rquote s a subroutine that draws an X across a window.  It uses }{\f6\fs20 GetPortRect}{\f4  to find out how big the window is.  }{\f6\fs20 GetPortRect}{\f4  assumes the whole window is visible, and returns its full size, even if part of the window is covered by another window or is off of the screen.\par (You saw rectangles briefly in Lesson 4; a rectangle is just a structure with a top, bottom, left and right position.  We\rquote ll look at them in detail in a later lesson.)\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * X\par *\par * Draw an X across the window wPtr\par *\par * Parameters:\par *    wPtr - pointer to the window to draw in\par *        \par ***************************************************************/\par \par void X (GrafPortPtr wPtr)\par \par \{\par GrafPortPtr port;                       /* caller's GrafPort */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 Rect r;                                 /* port rectangle */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 port = GetPort();                       /* get the caller's GrafPort */\par SetPort(wPtr);                          /* make our port active */\par PenNormal();                            /* use a "normal" pen */\par GetPortRect(&r);                        /* get the size of our window */\par MoveTo(r.h1, r.v1);                     /* draw the X */\par LineTo(r.h2, r.v2);\par MoveTo(r.h1, r.v2);\par LineTo(r.h2, r.v1);\par SetPort(port);                          /* reset the caller's port */\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-6:  Subroutine to Draw in a Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 5-4:  Add the subroutine X to your Frame program, calling it right after the window is created.\par Unlike the other changes we\rquote ve been making, the function X won\rquote t become a permanent addition to Frame, so be sure you keep a separate copy of Frame that does not have this subroutine.\par Try creating other windows, dragging your window off of the screen and back on, and showing and then hiding the about box with your window positioned so the about box covers part of the X, but not all of it.  These experiments point out a problem that we\rquote ll deal with in the next section: your X disappears.\par {\*\bkmkend bk23}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:drawing in}{\rxe bk23}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Updating a Window}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Updating a Window\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk24}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you tried Problem 5-4, you found out that drawing to a window isn\rquote t exactly permanent \endash  far from it, in fact!  If you drag a window partway off of the screen, then drag it back, the part of the X that was off of the screen is not redrawn.  If you cover the window with another window (or dialog), the part that is covered doesn\rquote t get redrawn.  In fact, about the only thing that redraws the window after covering it up is a menu that gets pulled down over part of the window.\par To understand what is happening, and what we have to do to keep what we draw in the window, we need to delve into the way the toolbox handles windows.  There are two ways to handle the situation when a window is covered and then uncovered, so that part of the window needs to be redrawn.  One way is for the toolbox to remember what was covered up, and redraw it when the time comes.  That would work, and in fact some windowing systems do just that.  The other way is to call some subroutine to redraw the contents of the window, which is what the Apple II}{\f4\fs20 GS}{\f4  toolbox tries to do.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 update events}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Whenever some part of a window becomes visible the toolbox posts an update event.  Part of a window could become visible because you close a window that covers another one, move one window to uncover part of another window, or because you drag a window that was part way off of the screen back onto the visible screen.  The toolbox itself also posts an update event when the window is created in the first place.  In each of these situations, the toolbox adds the area of the window that needs to be drawn to something called the update region.  We\rquote ll explore regions in more detail later; for now you can think of the update region as all of the parts of the window that need to be redrawn, or updated \endash  and that\rquote s exactly what it is.  An update event is then created, and your event loop will eventually find that update event and return it to you.\par Once you find an update event in your event loop, you should do the following:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 BeginUpdate}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EndUpdate}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Call }{\f6\fs20 BeginUpdate}{\f4 , passing the window pointer for the window that needs to be updated.  }{\f6\fs20 BeginUpdate}{\f4  does some internal magic to make sure you only redraw the part of the window that needs to be redrawn.\par 2.\tab Draw whatever needs to be drawn.  In most programs you would redraw everything in the window, letting QuickDraw II decide what needs to be drawn and what can be ignored.  If it takes a long time to redraw the window, though, there are ways to check to see exactly what must be redrawn.\par 3.\tab Call }{\f6\fs20 EndUpdate}{\f4 , again passing the window pointer.  It is very important to make sure that you call }{\f6\fs20 EndUpdate}{\f4  exactly one time for every }{\f6\fs20 BeginUpdate}{\f4  call.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPort}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You draw in the window the same way as before.  The only difference is that you don\rquote t need to save the caller\rquote s }{\f6\fs20 GrafPort}{\f4  or set your own; }{\f6\fs20 BeginUpdate}{\f4  and }{\f6\fs20 EndUpdate}{\f4  handle all of that for you.  In fact, you }{\i\f4 can\rquote t}{\f4  call }{\f6\fs20 SetPort}{\f4  between calls to }{\f6\fs20 BeginUpdate}{\f4  and }{\f6\fs20 EndUpdate}{\f4  \endash  if you do, strange and not-so-wonderful things will happen.  You also can\rquote t change the origin while you\rquote re updating a window \endash  but you don\rquote t know how to do that yet, anyway.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewWindow2}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMaster}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It isn\rquote t really quite as hard to do all of this as it sounds, but it is a bit of a pain for something that gets done all of the time, in every desktop program.  With a very small change in the call to }{\f6\fs20 NewWindow2}{\f4 , }{\f6\fs20 TaskMaster}{\f4  can do all of the work for us.  The only change is to pass the name of a subroutine to call when an update is needed.  There are no inputs or outputs to the subroutine that }{\f6\fs20 TaskMaster}{\f4  calls.  You will probably use the same subroutine for all of your windows, so you need some way to figure out which window you are drawing; }{\f6\fs20 GetPort}{\f4  does a nice job, returning the window pointer for the window to draw.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 databank}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There is one special requirement for this subroutine.  Any time a subroutine is called from the toolbox, as this one is, the subroutine can have trouble reading global variables.  The reason this is true has to do with the memory models used by compilers on the Apple II}{\f4\fs20 GS}{\f4 .  In ORCA/C, you need to tell the compiler that the subroutine will be called by the toolbox so the compiler will add some special code to the function to fix the data bank register.  You do that with the }{\f6\fs20 databank}{\f4  pragma, as you can see in Listing 5-7.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DrawContents\par *\par * Draw the contents of the active port\par *\par ***************************************************************/\par \par #pragma databank 1\par \par void DrawContents (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 Rect r;                                 /* port rectangle */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 PenNormal();                            /* use a "normal" pen */\par GetPortRect(&r);                        /* get the size of our window */\par MoveTo(r.h1, r.v1);                     /* draw the X */\par LineTo(r.h2, r.v2);\par MoveTo(r.h1, r.v2);\par LineTo(r.h2, r.v1);\par \}\par \par #pragma databank 0\par }\pard \li180\widctlpar\adjustright {\f6\fs20 \par    .\par    .\par    .\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 dPtr->wPtr =\par    NewWindow2(dPtr->wName, 0, DrawContents, NULL, 0x02, wrNum, rWindParam1);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-7:  An Update Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 5-5:  Add the update subroutine from Listing 5-7 to Frame.  If you are using the version of Frame from Problem 5-4, take out the function X; it isn\rquote t needed any more.  Be sure and change the call to }{\f6\fs20 NewWindow2}{\f4  in }{\f6\fs20 NewDocument}{\f4  so it passes the address of }{\f6\fs20 DrawContents}{\f4  to the Window Manager.\par With these changes in place your window behaves like you expect it to.  The contents are drawn once when you create the window, so you don\rquote t even have to do it manually.  If you drag the window off of the desktop, then back on, the part that was erased before is redrawn.  If your window is covered up, then uncovered, the area that was covered is redrawn correctly.\par {\*\bkmkend bk24}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:updating}{\rxe bk24}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Window Port and Coordinate Systems}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Window Port and Coordinate Systems\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk25}{\*\bkmkstart bk26}{\*\bkmkstart bk27}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you click the mouse, a variety of different things can happen, depending on where the mouse was when you pressed the mouse button.  If you press on the menu bar, }{\f6\fs20 TaskMaster}{\f4  handles a menu event; pressing on an inactive window makes it active; and so forth.  All of these different kinds of actions are separated based on where the event occurs, and }{\f6\fs20 TaskMaster}{\f4  returns a distinct kind of event in each case.  When you click in the content region of the active window, }{\f6\fs20 TaskMaster}{\f4  returns }{\f6\fs20 wInContent}{\f4  for the event and places a pointer to the window in }{\f6\fs20 wmTaskData}{\f4 .  As with any event, the location of the event is in the }{\f6\fs20 where}{\f4  field.\par Programs can do any number of different things when an event occurs in the window\rquote s content area, like position a cursor, start drawing a line, manipulate a control, or even ignore the event.  We\rquote re going to create a simple dot drawing program based on these events.  This will give us a simple but effective way to explore multiple windows, each containing different information; to see how scrolling works; and later, to explore printing and file access.  Creating the actual program will be left for Problem 5-6, but there is one key concept you need to learn about before tackling that program.  You can then use the program you write to explore this concept in more detail.  This important concept is the idea of using multiple coordinate systems.\par Up until we started drawing the X in our window, everything we\rquote d done used global coordinates.  Global coordinates are basically screen coordinates.  (Technically the screen can move, but we\rquote ll ignore that since it is rarely an issue.)  Global coordinates do go past the edge of the screen, extending from -32767 to +32787 in both the horizontal and vertical direction.  The visible screen appears just below and to the right of the 0,0 point, extending for 200 pixels down and either 320 pixels or 640 pixels to the right, depending on which graphics mode you are using.\par Each }{\f6\fs20 GrafPort}{\f4  (and a window has a }{\f6\fs20 GrafPort}{\f4 ; that\rquote s what we draw in) has its own coordinate system, called local coordinates.  As with global coordinates, the local coordinates extend from -32767 to +32767 in each direction.  Although you\rquote ll learn to change the origin later, for now, the 0,0 point is always at the top, left edge of the content region of the window.  The content region of the window is also called the window port, which is also the port rectangle until we start changing the origin.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1043{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw234\pich160\picwgoal4680\pichgoal3200\macpict\bliptag876414785\blipupi72{\*\blipuid 343d0741394f1e3ea9f5142a4b1005de}0285ffffffff009f00e91101a0008201000affffffff009f00e930001d001a009f00e9a0008c220040004a7600220042004a7600a100b60004004c008009000000000000000031003e004b0044005038a100b60004000100010700000000230000070001000109ffffffffffffffff30003e004a008b00c130003e004a004500c1a100b60004004c008009000000000000000031003e004b0043005009ffffffffffffffff38a100b60004000100010700000000230000a100b60004004c008009000000000000000031003e00ba004400bf070001000138a100b60004000100010700000000230000a100b60004004c008031003e00ba004300bf070001000109ffffffffffffffff38a100b60004000100010700000000230000a0008d09000000000000000031001d001a002900e9070001000109ffffffffffffffff3822001d0016f30022001a001a00f2a10096000c02000000020000000000000001000a00000017000c001d2c000c00150948656c7665746963610300150d000a2b18090130a00097a10096000c02000000020000000000000001000a001700000023000628002000010130a0009701000affffffff009f00e922003b004a00fa2200440047f200a10096000c02000000020000000000000001000a003e0030004a00362b30270130a0009701000affffffff009f00e9220044002fe000a10096000c02000000020000000000000001000a002800460034004c28003100470130a0009701000affffffff009f00e9220027004a00eba10096000c02000000020000000000000001000a000700430013004f2800100044023530a00097a10096000c02000000020000000000000001000a003e0001004a000d2800470002023730a00097a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 5-3:  Global and Local Coordinates\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par All of these rather dry definitions are very important.  Keep in mind that windows can move on the desktop, but you don\rquote t want the information inside the window to move relative to the window as it moves.  When a window has a circle at the top left corner before you drag the window, the circle should still be at the top left corner of the window after you drag it.  Local coordinates make this easy:  when you use QuickDraw II drawing commands to draw in the window, it always uses the window\rquote s local coordinate system.  Whether you move the window, cover it up, or drag it off of the screen, the top left corner of the window is still the 0,0 point.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1044{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw239\pich160\picwgoal4780\pichgoal3200\macpict\bliptag-355759049\blipupi72{\*\blipuid eacb8c37db2e8c7b87b53bc0a024d908}1324ffffffff009f00ee1101a0008201000affffffff009f00ee30001d001f009f00eea0008c09aa55aa55aa55aa55220033002b7700220035002b7700a100b60004004c0080090000000000000000310031002c0037003209aa55aa55aa55aa5538a100b60004000100010700000000230000090000000000000000310031002b007e00a3070001000109aa55aa55aa55aa5538090000000000000000310031002b003800a309aa55aa55aa55aa5538a100b60004004c0080090000000000000000310031002c0036003109aa55aa55aa55aa5538a100b60004000100010700000000230000a100b60004004c0080090000000000000000310031009b003700a0070001000109aa55aa55aa55aa5538a100b60004000100010700000000230000a100b60004004c0080090000000000000000310031009b003600a1070001000109aa55aa55aa55aa5538a100b60004000100010700000000230000a0008d09000000000000000031001d001f002900ee070001000109ffffffffffffffff3822001d001bf30022001a001f00f2a10096000c02000000020000000000000001000a0000001c000c00222c000c00150948656c7665746963610300150d000a2b1d090130a00097a10096000c02000000020000000000000001000a001700050023000b28002000060130a00097a0008c01000affffffff009f00ee22004e006a7700220050006a7700a100b60004004c008009000000000000000031004c006b0052007138a100b60004000100010700000000230000070001000109ffffffffffffffff30004c006a009900e230004c006a005300e2a100b60004004c008009000000000000000031004c006b0051007009ffffffffffffffff38a100b60004000100010700000000230000a100b60004004c008009000000000000000031004c00da005200df070001000138a100b60004000100010700000000230000a100b60004004c008031004c00da005100e0070001000109ffffffffffffffff38a100b60004000100010700000000230000a0008d0700010001220048006a00f2a10096000c02000000020000000000000001000a002d00670039006d2b62160130a00097a10096000c01000000020000000000000001000a004d003c00590042280056003d0130a0009701000affffffff009f00ee2200530064e00022002d006a00e7220053003bda00a10096000c02000000020000000000000001000a000600600012007128000f006103313230a00097a10096000c02000000020000000000000001000a004d000000590011280056000103313330a0009701000affffffff009f00ee070000000022e0c0e0c00000a000a0a100a40002070001000a0000000000000000070001000109800008008000080022004600730cf4230000231f1e2300002306f923000023082223000023dff82300002306f923000023e2e22300000a800008008000080084000a0000000000000000a000a301000affffffff009f00ee84027c003a0074007300ac003a007f00807fff003b007e007f008000817fff003c007d007e008100827fff003d007c007d008200837fff003e007b007c008300847fff003f007a007b008400857fff00400079007a008500867fff004100780079008600877fff004200770078008700887fff004300760077008800897fff0044007500760089008a7fff004500740075008a008b7fff0046008b008c7fff004700740075008c008d7fff004800750076008d008e7fff004900760077008e008f7fff004a00770078008f00907fff004b00780079009000917fff004c0079007a009100927fff004d007a007b009200937fff004e007b007c009300947fff004f007c007d009400957fff0050007d007e009500967fff0051007e007f009600977fff0052007f00800097009800a300a57fff0053008000810098009900a200a37fff0054008100820099009a00a100a27fff005500820083009a009b00a000a17fff005600830084009b009c009f00a000a500a67fff005700840085009c009d009e009f7fff005800850086009d009e7fff0059008600877fff005a008700887fff005b0088008900a600a77fff005c0089008a7fff005d008a008b7fff005e008b008c7fff005f008c008d00a700a87fff0060008d008e7fff0061008e008f7fff0062008f00907fff00630090009100a800a97fff0065009000917fff0066008f00907fff0067008e008f00a900aa7fff0068008d008e7fff0069008c008d7fff006a008b008c7fff006b008b008d7fff006c008d009100aa00ab7fff006d009100957fff006e009500997fff006f0099009e7fff0070009e00a200ab00ac7fff007100a200a67fff007200a600aa7fff007300aa00ac7fff7fff230cf4231f1e2306f923082223dff82306f923e2e2a000a1070000000022e0c0e0c00000a000a0a100a40002070001000a0000000000000000070001000109882288228822882222004b00770df3230000231e1e2300002307fa23000023082123000023def82300002307fa23000023e1e22300000a882288228822882284000a0000000000000000a000a301000affffffff009f00ee840278003e0078007700b1003e008400857fff003f00830084008500867fff004000820083008600877fff004100810082008700887fff004200800081008800897fff0043007f00800089008a7fff0044007e007f008a008b7fff0045007d007e008b008c7fff0046007c007d008c008d7fff0047007b007c008d008e7fff0048007a007b008e008f7fff00490079007a008f00907fff004a00780079009000917fff004b009100927fff004c00780079009200937fff004d0079007a009300947fff004e007a007b009400957fff004f007b007c009500967fff0050007c007d009600977fff0051007d007e009700987fff0052007e007f009800997fff0053007f00800099009a7fff005400800081009a009b7fff005500810082009b009c7fff005600820083009c009d7fff005700830084009d009e00a800aa7fff005800840085009e009f00a700a87fff005900850086009f00a000a600a77fff005a0086008700a000a100a500a67fff005b0087008800a100a200a400a500aa00ab7fff005c0088008900a200a47fff005d0089008a7fff005e008a008b7fff005f008b008c00ab00ac7fff0060008c008d7fff0061008d008e7fff0062008e008f7fff0063008f009000ac00ad7fff0064009000917fff0065009100927fff0066009200937fff0067009300947fff00680094009500ad00ae7fff0069009500967fff006a009500967fff006b009400957fff006c0093009400ae00af7fff006d009200937fff006e009100927fff00700091009500af00b07fff00710095009a7fff0072009a009e7fff0073009e00a27fff007400a200a600b000b17fff007500a600ab7fff007600ab00af7fff007700af00b17fff7fff230df3231e1e2307fa23082123def82307fa23e1e2a000a1070000000022e0c0e0c00000a000a0a100a40002070001000a0000000000000000070001000109aa55aa55aa55aa5522004f007c0cf4230000231f1e2300002306f923000023082223000023dff82300002306f923000023e2e22300000aaa55aa55aa55aa5584000a0000000000000000a000a301000affffffff009f00ee84027c0043007d007c00b50043008800897fff0044008700880089008a7fff004500860087008a008b7fff004600850086008b008c7fff004700840085008c008d7fff004800830084008d008e7fff004900820083008e008f7fff004a00810082008f00907fff004b00800081009000917fff004c007f0080009100927fff004d007e007f009200937fff004e007d007e009300947fff004f009400957fff0050007d007e009500967fff0051007e007f009600977fff0052007f0080009700987fff005300800081009800997fff0054008100820099009a7fff005500820083009a009b7fff005600830084009b009c7fff005700840085009c009d7fff005800850086009d009e7fff005900860087009e009f7fff005a00870088009f00a07fff005b0088008900a000a100ac00ae7fff005c0089008a00a100a200ab00ac7fff005d008a008b00a200a300aa00ab7fff005e008b008c00a300a400a900aa7fff005f008c008d00a400a500a800a900ae00af7fff0060008d008e00a500a600a700a87fff0061008e008f00a600a77fff0062008f00907fff0063009000917fff00640091009200af00b07fff0065009200937fff0066009300947fff0067009400957fff00680095009600b000b17fff0069009600977fff006a009700987fff006b009800997fff006c0099009a00b100b27fff006e0099009a7fff006f009800997fff00700097009800b200b37fff0071009600977fff0072009500967fff0073009400957fff0074009400967fff00750096009a00b300b47fff0076009a009e7fff0077009e00a27fff007800a200a77fff007900a700ab00b400b57fff007a00ab00af7fff007b00af00b37fff007c00b300b57fff7fff230cf4231f1e2306f923082223dff82306f923e2e2a000a1070000000022e0c0e0c00000a000a0a100a40002070001000a000000000000000007000100010977dd77dd77dd77dd22005400800df3230000231e1e2300002307fa23000023082123000023def82300002307fa23000023e1e22300000a77dd77dd77dd77dd84000a0000000000000000a000a301000affffffff009f00ee84027800470081008000ba0047008d008e7fff0048008c008d008e008f7fff0049008b008c008f00907fff004a008a008b009000917fff004b0089008a009100927fff004c00880089009200937fff004d00870088009300947fff004e00860087009400957fff004f00850086009500967fff005000840085009600977fff005100830084009700987fff005200820083009800997fff0053008100820099009a7fff0054009a009b7fff005500810082009b009c7fff005600820083009c009d7fff005700830084009d009e7fff005800840085009e009f7fff005900850086009f00a07fff005a0086008700a000a17fff005b0087008800a100a27fff005c0088008900a200a37fff005d0089008a00a300a47fff005e008a008b00a400a57fff005f008b008c00a500a67fff0060008c008d00a600a700b100b37fff0061008d008e00a700a800b000b17fff0062008e008f00a800a900af00b07fff0063008f009000a900aa00ae00af7fff00640090009100aa00ab00ad00ae00b300b47fff00650091009200ab00ad7fff0066009200937fff0067009300947fff00680094009500b400b57fff0069009500967fff006a009600977fff006b009700987fff006c0098009900b500b67fff006d0099009a7fff006e009a009b7fff006f009b009c7fff0070009c009d7fff0071009d009e00b600b77fff0072009e009f7fff0073009e009f7fff0074009d009e7fff0075009c009d00b700b87fff0076009b009c7fff0077009a009b7fff0079009a009e00b800b97fff007a009e00a37fff007b00a300a77fff007c00a700ab7fff007d00ab00af00b900ba7fff007e00af00b47fff007f00b400b87fff008000b800ba7fff7fff230df3231e1e2307fa23082123def82307fa23e1e2a000a1070000000022e0c0e0c00000a000a0a100a40002070001000a0000000000000000070001000109ffffffffffffffff22005800850cf4230000231f1e2300002306f923000023082223000023dff82300002306f923000023e2e22300000affffffffffffffff84000a0000000000000000a000a301000affffffff009f00ee84027c004c0086008500be004c009100927fff004d00900091009200937fff004e008f0090009300947fff004f008e008f009400957fff0050008d008e009500967fff0051008c008d009600977fff0052008b008c009700987fff0053008a008b009800997fff00540089008a0099009a7fff005500880089009a009b7fff005600870088009b009c7fff005700860087009c009d7fff0058009d009e7fff005900860087009e009f7fff005a00870088009f00a07fff005b0088008900a000a17fff005c0089008a00a100a27fff005d008a008b00a200a37fff005e008b008c00a300a47fff005f008c008d00a400a57fff0060008d008e00a500a67fff0061008e008f00a600a77fff0062008f009000a700a87fff00630090009100a800a97fff00640091009200a900aa00b500b77fff00650092009300aa00ab00b400b57fff00660093009400ab00ac00b300b47fff00670094009500ac00ad00b200b37fff00680095009600ad00ae00b100b200b700b87fff00690096009700ae00af00b000b17fff006a0097009800af00b07fff006b009800997fff006c0099009a7fff006d009a009b00b800b97fff006e009b009c7fff006f009c009d7fff0070009d009e7fff0071009e009f00b900ba7fff0072009f00a07fff007300a000a17fff007400a100a27fff007500a200a300ba00bb7fff007700a200a37fff007800a100a27fff007900a000a100bb00bc7fff007a009f00a07fff007b009e009f7fff007c009d009e7fff007d009d009f7fff007e009f00a300bc00bd7fff007f00a300a77fff008000a700ab7fff008100ab00b07fff008200b000b400bd00be7fff008300b400b87fff008400b800bc7fff008500bc00be7fff7fff230cf4231f1e2306f923082223dff82306f923e2e2a000a1a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 5-4:  Dragging Doesn\rquote t Affect Local Coordinates\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 where}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The problem is that the }{\f6\fs20 where}{\f4  value returned in the event record isn\rquote t connected with a particular window, so there is no practical way to decide whose local coordinates to use.  So, instead of using local coordinates, the }{\f6\fs20 where}{\f4  field is returned in global coordinates.  Dealing with this difference is not hard, but you do have to remember that there are two different coordinate systems in use, and be sure you convert between them when you need to.  If you\rquote re not sure what coordinate system a tool call uses, you can always check the definition of the tool call in the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference }{\f4 or in Appendix A, but as a general rule, tool calls that deal with a specific }{\f6\fs20 GrafPort}{\f4  (like the drawing commands) use local coordinates, while tool calls that do not deal with a specific port (like Event Manager calls) use global coordinates.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GlobalToLocal}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LocalToGlobal}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 QuickDraw II has two easy to use commands to switch back and forth between local and global coordinates; they are }{\f6\fs20 GlobalToLocal}{\f4  and }{\f6\fs20 LocalToGlobal}{\f4 .  Each takes a point as a parameter, and adjusts the point to the appropriate coordinate system.  The only thing you have to be careful of is to make sure your }{\f6\fs20 GrafPort}{\f4  has been set before doing the conversion!\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 /* convert where to local coordinates for wPtr */\par port = GetPort();\par SetPort(wPtr);\par localPoint = where;\par GlobalToLocal(&localPoint);\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 SetPort(port);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 5-6:  Starting with Frame, create a program that allows the user to draw dots in a window.\par Start by adding a subroutine call in your event loop that will call a subroutine when a }{\f6\fs20 wInContent}{\f4  event is detected.  Pass the position of the mouse in global coordinates, as well as the pointer to the window where the event occurred.\par The subroutine itself should convert the position to local coordinates, then draw a point at that location.  (You can draw a point with }{\f6\fs20 MoveTo}{\f4  and }{\f6\fs20 LineTo}{\f4  calls using the same coordinates.)  The point should also be recorded in a new linked list of points, with the head of the list stored in the document record.  (Keeping the list of points in the document record keeps the points separate for each document.)\par Change the update procedure so it draws all of the points in the document\rquote s point list.\par Be sure you dispose of all of the points in the linked list when you close the document!\par When you test your program, be sure and try it with at least two open windows.  Make sure your points stay correct for each window as the windows are dragged over one another, selected, dragged off of the screen, and resized.\par {\*\bkmkend bk25}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 coordinates}{\rxe bk25}}}{\*\bkmkend bk26}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 local coordinates}{\rxe bk26}}}{\*\bkmkend bk27}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 global coordinates}{\rxe bk27}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Tricks With Update Events}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Tricks With Update Events\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:updating}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the interesting things about the dot drawing program you wrote in the last section is that you had to draw the dots in two places: once in the update procedure and once in the subroutine that created the initial dots.  There are some kinds of programs where handling the drawing in two different places can cause a lot of problems, both in terms of the amount of work you have to do as a programmer, and in terms of the bugs that can creep in when a single complicated task is done in two slightly different ways in two different places.  (What if the drawing isn\rquote t done exactly the same way?)\par There is a way to avoid drawing in two different places.  Basically, you tell the Window Manager that the window needs to be updated, and let the update procedure do all of the drawing.  If your update routine goes to the trouble of updating only the parts of the window that have changed, you can even tell the Window Manager to update just a portion of the window.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InvalRect}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Window Manager call }{\f6\fs20 InvalRect}{\f4  is used to force an update.  You pass a rectangle as a parameter, and the Window Manager makes sure the rectangle gets redrawn by the update procedure at the next opportunity.  Assuming you have already set the proper }{\f6\fs20 GrafPort}{\f4  with }{\f6\fs20 SetPort}{\f4 , this is all you need to do to force the entire window to be redrawn:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 GetPortRect(&r);\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 InvalRect(&r);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The variable }{\f6\fs20 r}{\f4  is a }{\f6\fs20 Rect}{\f4 .\par \par Problem 5-7:  Start with the program you created in Problem 5-6.  Instead of drawing the point when the mouse is clicked, add the point to the point list and use }{\f6\fs20 InvalRect}{\f4  to mark the window for update.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Scrolling}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Scrolling\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk28}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 In most cases, a window only shows a small portion of the overall document.  For example, in a word processor, you can only see a few lines of a document, even if you\rquote re editing an entire book.  Scroll bars are used to move the window around to see different parts of the document, and if you know how to read them, they even give you clues as to the total size of the document and where you are in the document.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1045{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw241\pich163\picwgoal4820\pichgoal3260\macpict\bliptag876700772\blipupi72{\*\blipuid 344164647beee0b290fc40159b7ee6c1}04dbffffffff00a200f01101a0008201000affffffff00a200f03000010001008300d0098822882288228822310097000600a100cb09ffffffffffffffff3809000000000000000031009700c100a100cb09ffffffffffffffff38090000000000000000310097000600a1001109ffffffffffffffff38090000000000000000310097002700a100a909ffffffffffffffff38900004000000000016001800000000001600160096000400a2001000000000000000000000003800000038000000d8000000d80000031ff000031ff0000c0030000c00300030003000300030000c0030000c003000031ff000031ff00000d8000000d800000038000000380000000000000000000090000400000000001500180000000000150014009600bf00a200cb0000000000000000000000e0000000e0000000d8000000d800007fc600007fc600006001800060018000600060006000600060018000600180007fc600007fc6000000d8000000d8000000e0000000e0000000000000300097000600a1001130009700bf00a100cb20000b001c000b00b520000d001c000d00b5a100b60004004c0080090000000000000000310008001d000f002438a100b60004000100010700000000230000070001000109ffffffffffffffff300009001c006700b6a100b60004004c0080090000000000000000310009001d000f002409ffffffffffffffff38a100b60004000100010700000000230000a100b60004004c008009000000000000000031000800ab000f00b3070001000138a100b60004000100010700000000230000070001000109ffffffffffffffff300009001c001000b6a100b60004004c008009000000000000000031000900ac000f00b309ffffffffffffffff38a100b60004000100010700000000230000070001000122008100010f1622008100cff216220066001c0b3122006600b5f33209882288228822882231000d00e5007500ef09ffffffffffffffff3809000000000000000031000d00e5001700ef09ffffffffffffffff3809000000000000000031006b00e5007500ef09ffffffffffffffff3890000400000000001700180000000000170016006900e4007500f0000000000000000000000000000003ff000003ff000003030000030300000303000003030000030300003f03f0003f03f000300030000c00c0000c00c000030300000303000000cc000000cc00000030000000300000000000000000000030006900e5007500ef90000400000000001600180000000000160016000c00e4001900f000000000000000000000003000000030000000cc000000cc000003030000030300000c00c0000c00c000300030003f03f0003f03f000030300000303000003030000030300000303000003ff000003ff0000000000000000000030000d00e5001a00ef22000100cf151622008100cf15ea22006600b52ff422000f00b52f12a10096000c01000000020000000000000001000a0026003c003e006e2c000c00150948656c7665746963610300150d000a2b3d2f0757696e646f770d2a0c0b2876696577206172656129a00097a10096000c01000000020000000000000001000a0067003a007f006b280070003b09646f63756d656e740d2a0c0b2864617461206172656129a0009701000affffffff00a200f009000000000000000031002100e5005b00ef09ffffffffffffffff38a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 5-5:  Scroll Bars and the Document\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Looking at Figure 5-5, you can see that the thumb of the scroll bar (the thumb is the white part on the gray background) shows you both where you are in the document, as well as roughly how much of the document you can see.  There is a minimum size for the thumb, so for a very large document, the size of the thumb doesn\rquote t mean anything.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 thumb}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are five actions the user can control with the scroll bar.  By clicking on one of the two arrows, the document is scrolled in the direction of the arrow by a small amount; this is generally one line in a text editor, so we call this line scrolling.  By clicking in the page area (the gray area between the thumb and arrows) the user can scroll one page in either direction.  A page is generally a little smaller than what you can see in the window.  Finally, by dragging the thumb, the user can jump around in the document.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMaster}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TaskMaster}{\f4  handles most of the details concerning the scroll bars for you, but you need to set a few parameters so }{\f6\fs20 TaskMaster}{\f4  knows how you want the scroll bars handled.  The first of these is the total size of the document itself; }{\f6\fs20 TaskMaster}{\f4  uses this for three reasons.  First, by comparing the total size of the document to the current port rectangle for the window, }{\f6\fs20 TaskMaster}{\f4  can decide how big to make the scroll bar\rquote s thumb.  Second, knowing the size of the document tells }{\f6\fs20 TaskMaster}{\f4  how far over the thumb should be when you have scrolled, say, two pages into the document.  Finally, the size of the document tells }{\f6\fs20 TaskMaster}{\f4  whether you can scroll at all.  If the entire document is visible, the thumb and paging area disappear, and if you scroll to either end of the document, }{\f6\fs20 TaskMaster}{\f4  stops you from going any farther.\par The size of the data area can be set two different ways.  The first is when the window is created, by setting the size of the data size field.  In our programs so far, the data size field has been set to 1,1.  This is a great way to set the data size for programs that have a fixed data size, like a paint program or CAD program that starts with a one-page data area.  It\rquote s also a good place to set an initial default size for programs like word processors, which have a much more variable data size.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetDataSize}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawControls}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once the window is open you can set the data size with a call to the Window Manager routine }{\f6\fs20 SetDataSize}{\f4 .  You pass the width and height of the data area in pixels, along with the window pointer.  This subroutine doesn\rquote t redraw the controls with the new settings, though, so you generally need to follow this up by either marking the window for update, as we did in the last section, or by drawing the controls manually with the Control Manager\rquote s }{\f6\fs20 DrawControls}{\f4  call, which redraws all of the controls in a window.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 /* Change the data size to 640 by 200 */\par SetDataSize(640, 200, wPtr);\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 DrawControls(wPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par When the user scrolls the window, either using the arrows or the page area, }{\f6\fs20 TaskMaster}{\f4  needs to know how far to move.  In this case, it\rquote s almost always best to set the sizes in the original resource defining the window.  The line size is controlled by the field in the resource definition with the comment \ldblquote scroll ver hors\rdblquote .  (Refer back to Listing 5-1B to see these fields.  We\rquote ll define these a little better later in the lesson, but for now, just change the fields based on the comments listed here.)  The vertical size can be just about anything you want, but the horizontal scroll size needs to be a multiple of 8.  The reason for this has to do with the way dithered colors are drawn in 640 mode, which is something we won\rquote t talk about in detail until the lesson on QuickDraw II.  Basically, if a picture is shifted by something other than a multiple of 8, the colors can change in 640 mode.\par The next two entries in the resource, \ldblquote page ver horiz\rdblquote , are the number of pixels to scroll when the page area is clicked.  You can set a specific value here, but then you will need to change it each time the window changes size.  It\rquote s easier to do what we\rquote ve done, setting these values to 0.  }{\f6\fs20 TaskMaster}{\f4  will scroll by the physical pages size minus 10 pixels with this setting.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetScroll}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPage}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetDataSize}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Of course, you can set these values from your program, too.  The }{\f6\fs20 SetScroll}{\f4  call sets the number of pixels to move when the arrows are clicked, while }{\f6\fs20 SetPage}{\f4  controls the number of pixels to scroll when the click is in the page area.  Each of these has the same parameters as }{\f6\fs20 SetDataSize}{\f4 , namely the horizontal value, the vertical value, and the window pointer.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 /* Set up for 8 pixel line scrolling */\par SetScroll(8, 8, wPtr);\par /* Set up for full page scrolling */\par GetPortRect(&r);\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 SetPage(r.h2-r.h1, r.v2-r.v1, wPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetContentOrigin}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Finally, you need to tell }{\f6\fs20 TaskMaster}{\f4  where the data area starts.  In most cases, you\rquote ll start with the top left part of the data area \endash  that would be the beginning of a text document, or the top left corner of a picture.  That means you start with an origin of 0,0, which is what we\rquote ve been using in our window resource.  The field controlling the starting position is labeled \ldblquote Origin\rdblquote .  You can change this manually from the program using }{\f6\fs20 SetContentOrigin}{\f4 , which also takes a horizontal position, a vertical position, and a window pointer, just like the other calls we\rquote ve been discussing.  You might want to do this, for example, in a text editor if the user starts typing while the insertion point is not on the visible part of the screen.  In that case, you could start off with a }{\f6\fs20 SetContentOrigin}{\f4  call to display the text containing the insertion point so the user can see what he\rquote s typing.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetContentOrigin}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LocalToGlobal}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GlobalToLocal}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TaskMaster}{\f4  does almost everything for you when it comes to handling the scroll bars, but there is one thing you have to do for yourself.  The }{\f6\fs20 LocalToGlobal}{\f4  and }{\f6\fs20 GlobalToLocal}{\f4  functions that convert between the global coordinate system and the local coordinate system for a }{\f6\fs20 GrafPort}{\f4  don\rquote t take the origin into account.  If you scroll a window, then convert from one coordinate system to another, the result will be off by however far you scrolled.  To take this into account, you need to call }{\f6\fs20 GetContentOrigin}{\f4 , which tells you what the origin is.  Add the origin to a point after calling }{\f6\fs20 GlobalToLocal}{\f4 , and subtract this value from a point before calling }{\f6\fs20 LocalToGlobal}{\f4 .\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 origin}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 GetContentOrigin}{\f4  call itself is a little odd; it returns a long integer.  The least significant word in this long integer is the vertical origin, while the most significant word is the horizontal origin.  You\rquote ve been pulling apart long integers into two words for quite a while to separate the menu ID and menu item ID from a single long integer value, and you can use the same idea to pull apart the value returned by }{\f6\fs20 GetContentOrigin}{\f4 .  If you get stuck on this, you can look at the solution to Problem 5-8, which shows at least one way to handle the conversion.\par \par Problem 5-8:  Change the dot drawing program from Problem 5-7 to allow a full-screen drawing of 200 by 640 pixels.  Set the line scrolling values to 8 pixels high and 16 pixels wide, and leave the page scrolling areas alone so }{\f6\fs20 TaskMaster}{\f4  will calculate an appropriate page scroll distance.  With this simple change, you program can start using scroll bars, handling large documents.\par Be sure to add a new point after scrolling the window.  If you\rquote ve taken the origin into account, everything will work correctly, but if you haven\rquote t, the points will appear in a different spot than where you see the cursor.\par {\*\bkmkend bk28}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:scrolling}{\rxe bk28}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Customizing Your Windows}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Customizing Your Windows\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk29}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 In the last section we started messing around with the values in the window resource, which we\rquote ve treated as a black box up until this point.  It\rquote s time to go back and shine some light in that black box.\par When you create a window, you pass a lot of information to the Window Manager to describe the window you want to create.  This information can be in the form of a structure using the }{\f6\fs20 NewWindow}{\f4  call, or a resource and some parameters to override the defaults in the resource, as with the }{\f6\fs20 NewWindow2}{\f4  call.  Either way, the information you supply is basically the same; only the way you pass the information changes.  The rest of this section describes the various parameters and what they are used for.  Right after that, we\rquote ll look at how the values are set using two different Window Manager calls, }{\f6\fs20 NewWindow2}{\f4  and }{\f6\fs20 NewWindow}{\f4 .\par One of the problems at the end of the section creates a fun, fairly useful window explorer program.  It\rquote s a rather long problem, but it does help firm up the concepts in this section, and it also gives you a great visual aid to explore the various window options.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wFrameBits\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wFrameBits}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 wFrameBits}{\f4  field is a word with 16 bits, each controlling some visual aspect of the window.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 window\:title}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fTitle}{\f4 \tab 15\tab If this bit is set, the window will have a title bar.  If this bit is clear, the window will not have a title bar.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 close box}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fClose}{\f4 \tab 14\tab If this bit is set, the window will have a close box at the left side of the title bar.  If this bit is clear, there will not be a close box.  You might leave off a close box for the main window in a game, for example, so the main display can\rquote t be closed.  You must clear this bit if the window does not have a title bar (i.e. if }{\f6\fs20 fTitle}{\f4  is 0).\par \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\tx1700\adjustright {\pard\plain \qj\fi-1800\li2160\keepn\widctlpar\tx1700\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 alert frame}}}{\v\f6\fs20 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fAlert}{\f4 \tab 13\tab Set this bit to 1 for an alert-style window frame.  An alert style window has a double-lined frame around the content region.  Alert windows don\rquote t have much besides a window frame, so if you set this bit, you should clear }{\f6\fs20 fInfo}{\f4 , }{\f6\fs20 fZoom}{\f4 , }{\f6\fs20 fFlex}{\f4 , }{\f6\fs20 fGrow}{\f4 , }{\f6\fs20 fBScroll}{\f4 , }{\f6\fs20 fRScroll}{\f4 , }{\f6\fs20 fClose}{\f4  and }{\f6\fs20 fTitle}{\f4 .\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fRScroll}{\f4 \tab 12\tab If this bit is set, the Window Manager will create a scroll bar at the right side of the window to scroll up and down in the document.  This scroll bar must be handled by }{\f6\fs20 TaskMaster}{\f4 ; if you want to create your own scroll bar, leave this bit clear and use the Control Manager to create the scroll bar.\par \par \tab \tab If this bit is set, }{\f6\fs20 fBScroll}{\f4  and }{\f6\fs20 fGrow}{\f4  should also be set.\par \par }{\f6\fs20 fBScroll}{\f4 \tab 11\tab If this bit is set, there will be a bottom scroll bar.  As with }{\f6\fs20 fRScroll}{\f4 , you only use this bit if you want }{\f6\fs20 TaskMaster}{\f4  to handle scrolling for you.\par \par \tab \tab If this bit is set, }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fGrow}{\f4  should also be set.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 grow box}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fGrow}{\f4 \tab 10\tab If this bit is set, there will be a grow box in the corner formed by the scroll bars at the lower right corner of the window.  If the bit is clear, there will not be a grow box.  As with the scroll bars, this grow box must be handled by }{\f6\fs20 TaskMaster}{\f4 ; to handle a grow box manually, you must create it yourself using the Control Manager.\par \par \tab \tab If this bit is set, }{\f6\fs20 fBScroll}{\f4  and }{\f6\fs20 fRScroll}{\f4  should also be set.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GrowWindow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ZoomWindow}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fFlex}{\f4 \tab 9\tab If this bit is set, the data height and width are flexible.  If the bit is clear, }{\f6\fs20 GrowWindow}{\f4  and }{\f6\fs20 ZoomWindow}{\f4  (called by }{\f6\fs20 TaskMaster}{\f4  to resize the window) will change the origin when the window size changes.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 zoom box}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fZoom}{\f4 \tab 8\tab If this bit is set, there will be a zoom box at the right end of the title bar; if the bit is clear, there won\rquote t be a zoom box.  You must set }{\f6\fs20 fTitle}{\f4  to get a title bar if this bit is set.\par \par }{\f6\fs20 fMove}{\f4 \tab 7\tab In most cases, the title bar for the window is also its drag region.  In other words, you can move the window by dragging the title around.  If you set this bit, things behave as you would expect; if this bit is clear, you can still have a title bar, but the window can\rquote t be moved.\par \par }{\f6\fs20 fQContent}{\f4 \tab 6\tab Most of the time, when you click in the content region of a window, you expect the window to become the front window, but you don\rquote t expect anything else to happen.  If this bit is set, clicking in the content region of a window not only brings it to the front, but it also acts as if you actually clicked in the content region.  If this bit is clear, clicking in the content region of a window that isn\rquote t the front window just brings it to the front.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ShowWindow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HideWindow}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fVis}{\f4 \tab 5\tab If this bit is set, the window is visible; if it is clear, the window exists, but it is invisible.  The window stays invisible until you use the }{\f6\fs20 ShowWindow}{\f4  call to make it visible.  You can also hide a visible window using }{\f6\fs20 HideWindow}{\f4 .  (We won\rquote t be using these in the course, but they are in Appendix A.)\par \par \tab \tab It may seem sort of silly to create an invisible window, but there\rquote s actually a very good reason for it.  In complicated windows with lots of controls (like dialogs, which are a special kind of window) it can take a lot of time to create the items that go in the window.  If the window is created, and you then add the controls, the user sees all of the construction as it occurs.  The same thing can happen if you are using a standard resource for a window, and making changes after the window is open.\par \par \tab \tab If, on the other hand, you create an invisible window, then create the controls and make any changes, and finally use }{\f6\fs20 ShowWindow}{\f4  to make the window visible, the user doesn\rquote t see the construction of the window \endash  he just sees a window, drawn all at once.  Cases like this are when }{\f6\fs20 fVis}{\f4  should be clear.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 info bar}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx1700\adjustright {\f6\fs20 fInfo}{\f4 \tab 4\tab If this bit is set, the window will have an info bar.  An info bar is an area at the top of the window, generally used for things like palettes or text editor rulers.  An info bar has its own update procedure, so it acts like a little window all its own, imbedded in the main window.\par \par \tab \tab If this bit is set, the }{\f6\fs20 wInfoHeight}{\f4  and }{\f6\fs20 wInfoDefProc}{\f4  fields must have values.\par \par }{\f6\fs20 fCtlTie}{\f4 \tab 3\tab In most programs, when a window is not the front window, the controls look different.  Scroll bars and grow boxes, for example, are hollow outlines.  If this bit is set, }{\f6\fs20 TaskMaster}{\f4  will redraw the controls in the proper state to match the window.  If the bit is clear, }{\f6\fs20 TaskMaster}{\f4  leaves the controls alone.\par \par }{\f6\fs20 fAllocated}{\f4 \tab 2\tab This flag is used internally by the Window Manager to determine if it allocated the memory for a window.  It always does for your windows, ignoring whatever value you code.\par \par }{\f6\fs20 fZoomed}{\f4 \tab 1\tab This flag is set if the window is currently in its zoomed state, and clear if not.\par \par }{\f6\fs20 fHilited}{\f4 \tab 0\tab This flag is used internally by the Window Manager.  You can set or clear the bit; the Window Manager ignores what you code.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wTitle\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wTitle}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 window\:title}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field is a pointer to the title of a window.  The title is a p-string, and must be in a fixed memory location.\par The Window Manager draws any pattern in the window right up to the edge of the characters in this title, so you will normally leave at least one space on each end of the title.\par If there is no title bar, this field can be set to }{\f6\fs20 NULL}{\f4 .  It is generally set to }{\f6\fs20 NULL}{\f4  in resource files, and the window title is assigned when the }{\f6\fs20 NewWindow2}{\f4  call is made.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wRefCon\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wRefCon}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This long integer field is reserved for your use.  You can set it to anything you like.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wZoom\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wZoom}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field is a }{\f6\fs20 Rect}{\f4 , with the normal complement of four integer fields (v1, h1, v2, h2) defining the edges of the rectangle.  This }{\f6\fs20 Rect}{\f4  defines the size of the window when it is in its zoomed state.  You can set the coordinates in the rectangle to 0, in which case the Window Manager picks out default values to zoom to the entire visible screen.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wColor\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wColor}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This is a pointer (or a resource number, in a resource description file) to a window color record.  We\rquote ll look at window color records in detail in a moment.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wYOrigin, wXOrigin\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wYOrigin}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wXOrigin}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 These two fields define the origin for the window.  As you know, scrolling a window changes its origin; setting these fields to a non-zero value lets you start off somewhere other than the top-left corner of your document.\par Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wDataH, wDataW\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wDataH}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wDataW}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 These values define the size of the entire document, in pixels.  The values are used by }{\f6\fs20 TaskMaster}{\f4  to decide how far you can scroll using the scroll bars, as well as to decide how big the thumb should be in a scroll bar.\par Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wMaxH, wMaxW\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wMaxH}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wMaxW}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 These values define the maximum size for the window.  If you code 0, the Window Manager will fill in values to let the window grow as big as the visible desktop.\par Set these values to 0 if you are not setting the }{\f6\fs20 fGrow}{\f4  bit in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wScrollVer, wScrollHor\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wScrollVer}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wScrollHor}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 These fields tell }{\f6\fs20 TaskMaster}{\f4  how many bits to scroll in each direction when the user clicks on a scroll bar arrow.  }{\f6\fs20 wScrollVer}{\f4  is generally set to 8 or the height for a font, while }{\f6\fs20 wScrollHor}{\f4  is typically set to 8.  Because of the way dithered colors are created in 640 mode, you really should set }{\f6\fs20 wScrollHor}{\f4  to some multiple of 8.  The reasons are discussed in detail in a later lesson, when drawing using QuickDraw II is covered in detail.\par Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wPageVer, wPageHor\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPageVer}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPageHor}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 These fields tell }{\f6\fs20 TaskMaster}{\f4  how many bits to scroll in each direction when the user clicks in the page area of a scroll bar.  In most cases, you will set these values to 0; this tells the Window Manager to pick an appropriate value.  It will use a value 10 pixels smaller than the size of the window, so that paging will leave a little of the old page on the screen.\par Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wInfoRefCon\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInfoRefCon}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 info bar}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This value can be set to anything you like.  It\rquote s for your use when creating info bars.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wInfoHeight\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInfoHeight}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 info bar}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This is the height of the info bar, in pixels.  The width of the info bar matches the width of the window itself, so there is no separate parameter for the width.\par This value is only used if }{\f6\fs20 fInfo}{\f4  is set in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wFrameDefProc\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wFrameDefProc}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This pointer points to a subroutine that will be called when the Window Manager needs to draw the window.  In all of the programs in this course, we\rquote ll set this to }{\f6\fs20 NULL}{\f4 , telling the Window Manager to use the standard subroutine for drawing a window frame.\par While this parameter exists in any window definition, the Types.rez interface file for the Rez compiler hard-codes this value to 0, so it doesn\rquote t appear at all when you use Types.rez to format an }{\f6\fs20 rWindParam1}{\f4  resource.\par If you are adventurous, you might want to experiment with creating your own window definition procedures.  While it\rquote s pretty complicated, you can create round windows, windows in special shapes, or even hollow windows.  For details, see the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference}{\f4 .\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wInfoDefProc\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInfoDefProc}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This pointer points to the subroutine to call when the information bar needs to be drawn.  It works like }{\f6\fs20 wContDefProc}{\f4 , only for information bars.\par Set this field to }{\f6\fs20 NULL}{\f4  if you did not set the }{\f6\fs20 fInfo}{\f4  bit in }{\f6\fs20 wFrameBits}{\f4 .\par While this parameter exists in any window definition, the Types.rez interface file for the Rez compiler hard-codes this value to 0, so it doesn\rquote t appear at all when you use Types.rez to format an }{\f6\fs20 rWindParam1}{\f4  resource.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wContDefProc\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wContDefProc}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field points to your update procedure.  We discussed the update procedure in detail earlier in the lesson.\par While this parameter exists in any window definition, the Types.rez interface file for the Rez compiler hard-codes this value to 0, so it doesn\rquote t appear at all when you use Types.rez to format an }{\f6\fs20 rWindParam1}{\f4  resource.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wPosition\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPosition}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field is a }{\f6\fs20 Rect}{\f4 .  It determines where the window is and how big it is when the window is first created.  The rectangle, which you specify in global coordinates, defines the size of the content region of the window.  Be sure to leave room for the window title bar, the system menu bar, and the scroll bars!\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wPlane\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPlane}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you create a window, you can actually define where it shows up \endash  it doesn\rquote t have to be the front most window.\par To make a new window the front most window, set this field to -1.  To create a window that is behind all of the existing ones, use 0.  You can also pass a specific }{\f6\fs20 GrafPortPtr}{\f4  in this parameter, in which case the new window will be right behind the one whose }{\f6\fs20 GrafPortPtr}{\f4  you pass.\par \par }\pard \qj\keepn\widctlpar\adjustright {\b\f4 wStorage\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wStorage}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field is used for different purposes, depending on whether you are using a resource for a }{\f6\fs20 NewWindow2}{\f4  call or setting up a window record for a }{\f6\fs20 NewWindow}{\f4  call.\par For the }{\f6\fs20 NewWindow}{\f4  call, this parameter lets you allocate storage for a window yourself, rather than having the Window Manager set aside the memory.  Setting the value to }{\f6\fs20 NULL}{\f4  tells the Window Manager to allocate memory for the window record itself, and that\rquote s what we\rquote ll do throughout this course.\par In a window resource, this parameter is used for control lists.  Later on, when we start dealing with the Control Manager up close and personal, we\rquote ll come back and use this field.  For now, though, this value should be set to }{\f6\fs20 NULL}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Windows with Colors and Patterns}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Windows with Colors and Patterns\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:colors}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:title bar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:lined}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 So far, the window\rquote s we\rquote ve created have used }{\f6\fs20 NULL}{\f4  for the }{\f6\fs20 wColor}{\f4  parameter, which tells the Window Manager to use the default colors and patterns for a window.  Unfortunately, the defaults are pretty gross.  You get a solid black title bar, rather than the cute lined one you see in most programs.  In this section, you\rquote ll finally find out how to create the coolest window frames.\par The colors for the various parts of the window frame, as well as the way the title bar area is drawn, are controlled by a color table.  This color table can be defined either as a resource or as a structure, but there is a restriction:  like the window title, the color table must remain in a fixed area of memory.  This means you have to set aside the space for the structure using a global variable or dynamically allocated memory; you cannot use a local variable, since local variables vanish when you return from a subroutine.  If you are using a resource, the Window Manager makes sure the color table stays in one spot.\par The color table itself is made up of five integers.  These integers are divided into four-bit groups, with an occasional eight-bit group for variety.  In the definitions below, the various four- and eight-bit groups are marked as letters in hexadecimal digits.  These digits are then explained in the following table.\par The table format you see here is very easy to refer to, but it\rquote s a lot more graphic to actually see the colors on the screen.  That\rquote s one of the things you\rquote ll do with the program you write at the end of this section.\par All of the colors can be any value from 0 to 15.  These represent solid colors in 320 mode, and dithered colors in 640 mode.  In most cases, you\rquote ll use 0xF (white) or 0x0 (black).\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 frameColor\tab 0x00a0\par titleColor\tab 0x0bcd\par tBarColor\tab 0xeefg\par growColor\tab 0xh0ij\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 infoColor\tab 0xk0m0\par }{\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 a\tab This is the outline color for the window frame.  It includes the lines around the edge of the window, the lines around the info bar, the lines outlining the close box and grow box, and the lines used to draw the small boxes inside the grow box.\par \par b\tab The background color of an inactive title bar.  This is the color behind both the text of the title, and the color used to fill the title bar itself.  In most cases, all of the windows except the front window are inactive; this is handled for you by }{\f6\fs20 TaskMaster}{\f4 .\par \par c\tab This is the foreground color of the text when the window is inactive.  This is usually the same as the foreground text color for an active window (nibble d), but you could set this to a different color, say to get gray text when a window is inactive.\par \par d\tab This is the color of the text when the window is active.\par \par ee\tab These eight bits define the type of title bar.  There are three types of title bars:\par \par }\pard \qj\fi-720\li1800\widctlpar\adjustright {\f4 0x00\tab Solid title bars are the normal kind, by default a boring black.  The color is actually set by digit g.\par \par 0x01\tab Dithered title bars use a checkerboard pattern, alternating between the foreground and background colors set by digits f and g.\par \par 0x02\tab Lines title bars are the sort you see most often, with lines running across the title bar.  Digits f and g define the colors.\par }\pard \qj\fi-540\li1620\widctlpar\adjustright {\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 f\tab This is one of the colors for a dithered title bar, or the color of the lines on a lined title bar.\par \par g\tab This is the second color for a dithered title bar, the background color for a lined title bar, or the solid color used for a solid title bar.\par \par h\tab This digit is only used on alert frames, where it defines the color between the outside line around the window and the heavy line just inside the main outline.\par \par i\tab This is the interior color for the grow box when the window is not selected.\par \par j\tab This is the interior color for the grow box when the window is selected.\par \par k\tab This digit is only used on alert frames, where it defines the color of the heavy box that runs inside of the main window outline.\par \par m\tab This is the interior color for an info bar.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The next section gives an example, showing you exactly how to set up a resource-based color table for a lined window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Creating Custom Windows With Resources}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Creating Custom Windows With Resources\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In most cases, you\rquote ll want to do just what we\rquote ve done so far in this lesson, using resources to create a window definition, then calling }{\f6\fs20 NewWindow2}{\f4  to create the window.  Back at the start of this lesson, we used this resource definition to set up our standard document window:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindParam1 resource}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindParam1 (1001) \{\par    $DDA5,                      /* wFrameBits */\par    nil,                        /* wTitle */\par    0,                          /* wRefCon */\par    \{0,0,0,0\},                  /* ZoomRect */\par    nil,                        /* wColor ID */\par    \{0,0\},                      /* Origin */\par    \{1,1\},                      /* data size */\par    \{0,0\},                      /* max height-width */\par    \{8,8\},                      /* scroll ver hors */\par    \{0,0\},                      /* page ver horiz */\par    0,                          /* winfoRefcon */\par    10,                         /* wInfoHeight */\par    \{30,10,183,602\},            /* wposition */\par    infront,                    /* wPlane */\par    nil,                        /* wStorage */\par    $0000                       /* wInVerb */\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-8:  Resource For a Standard Document Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Let\rquote s update that definition, adding cool, lined windows.  The new resource, along with the appropriate color table, looks like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindParam1 resource}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindParam1 (1001) \{\par    $DDA5,                      /* wFrameBits */\par    nil,                        /* wTitle */\par    0,                          /* wRefCon */\par    \{0,0,0,0\},                  /* ZoomRect */\par    linedColors,                /* wColor ID */\par    \{0,0\},                      /* Origin */\par    \{1,1\},                      /* data size */\par    \{0,0\},                      /* max height-width */\par    \{8,8\},                      /* scroll ver hors */\par    \{0,0\},                      /* page ver horiz */\par    0,                          /* winfoRefcon */\par    10,                         /* wInfoHeight */\par    \{30,10,183,602\},            /* wposition */\par    infront,                    /* wPlane */\par    nil,                        /* wStorage */\par    $0800                       /* wInVerb */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindColor resource}}}{\v\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindColor (linedColors) \{\par    0x0000,                     /* frameColor */\par    0x0F00,                     /* titleColor */\par    0x020F,                     /* tbarColor */\par    0xF0F0,                     /* growColor */\par    0x00F0,                     /* infoColor */\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-9:  Resource For a Lined Document Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Finally, let\rquote s give this same definition again, but this time, instead of actual values, we\rquote ll use the field names that we\rquote ve used during this whole, long section.  That way, you can compare the description of the field you want with the place you need to put the value in the resource.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindParam1 resource}}}{\v\f4 \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rWindParam1 (1001) \{\par    wFrameBits,                 /* wFrameBits */\par    wTitle,                     /* wTitle */\par    wRefCon,                    /* wRefCon */\par    wZoom,                      /* ZoomRect */\par    wColor,                     /* wColor ID */\par    \{wXOrigin,wYOrigin\},        /* Origin */\par    \{wDataH,wDataW\},            /* data size */\par    \{wMaxH,wMaxW\},              /* max height-width */\par    \{wScrollHor,wScrollVer\},    /* scroll ver hors */\par    \{wPageHor,wPageVer\},        /* page ver horiz */\par    wInfoRefCon,                /* winfoRefcon */\par    wInfoHeight,                /* wInfoHeight */\par    wPosition,                  /* wposition */\par    wPlane,                     /* wPlane */\par    wStorage,                   /* wStorage */\par    $0800                       /* wInVerb */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-10:  Window Resource By Field Name\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par With the exception of the last one, all of these parameters have been explained in gory detail already.  The big exception is the last parameter; it\rquote s the one with the comment }{\f6\fs20 wInVerb}{\f4 .  This parameter tells the Window Manager where to look for certain things after the resource has been loaded.  This field is a set of flags, used for three different purposes.\par Bits 15 to 12 (the first four bits) are reserved, and should be set to 0.\par Bits 7 to 0 (the last eight bits) are used when we define a control list for the window.  We won\rquote t be doing that for a while, so set this part of the value to 0 for now.\par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindColor resource}}}{\v\f6\fs20 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The remaining four bits are divided into two two-bit fields.  Bits 10 and 11 tell the Window Manager what sort of entry you\rquote re using in }{\f6\fs20 wColor}{\f4 , while bits 8 and 9 tell what sort of entry is in the }{\f6\fs20 wTitle}{\f4  field.  Each of these can be 00 for a pointer, 01 for a handle, or 10 if you\rquote re using a resource ID.  Back before we started using color tables, this value was set to 0x0000, which told the Window Manager to look for a pointer in both fields, and we passed }{\f6\fs20 NULL}{\f4  for both the color table and title.  That basically told the Window Manager there was no title or color table.  Now, with a color table defined via a resource, we\rquote re using a value of 0x0800, which still tells the Window Manager to use a pointer for the window title, but we\rquote re using a resource for the color table.  The resource ID number for the color table goes in the }{\f6\fs20 wColor}{\f4  field; the resource ID is the same number you put in parenthesis in the }{\f6\fs20 rWindColor}{\f4  resource.  Of course, if you are using different color tables for different windows, you need to use different }{\f6\fs20 rWindColor}{\f4  resources and resource ID numbers, but if you\rquote ll be using cool lined color tables for all of the windows, save some space and use the same color table for all of your windows.\par Some of these fields just don\rquote t work well from a resource definition, since they change for practically every window.  A good example is the window title, which is generally either \ldblquote Untitled x\rdblquote  or the name of the disk file where the information displayed when the document is actually stored.  }{\f6\fs20 NewWindow2}{\f4  lets you override several of these parameters.  Here\rquote s the }{\f6\fs20 NewWindow2}{\f4  call with our familiar field names instead of actual parameters:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 NewWindow2(wTitle, wRefCon, wContDefProc, wFrameDefProc, paramTableDesc,\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20    paramTableRef, resourceType);\par }{\f4 \par The last three are not normal window parameters; they are used to tell the Window Manager which resource to use.  The first of these new parameters, }{\f6\fs20 paramTableDesc}{\f4 , tells the Window Manager what the next parameter is.  We\rquote ll be using 2 all of the time, telling the Window Manager that }{\f6\fs20 paramTableRef}{\f4  is a resource ID number, but it is possible to tell the Window Manager to use a pointer or handle, instead.  The last parameter, }{\f6\fs20 resourceType}{\f4 , tells the Window Manager which of two possible window resource types we\rquote re using.  We\rquote ll always use }{\f6\fs20 rWindParam1}{\f4 .\par Of course, I glossed over a lot of options by just telling you what we\rquote ll be using in the course.  In a way that\rquote s unfair, since you may get the feeling I\rquote m hiding something.  The real reason for skipping the various alternatives is that we\rquote re covering the most useful ones.  Adding a detailed discussion of all of the rest of them would be overkill \endash  besides, I\rquote ve optioned you to death in this section!  If you really feel like you just have to know about all of those other options, check out Appendix A or }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using NewWindow and Window Records}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Using NewWindow and Window Records\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewWindow}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s one big disadvantage to using }{\f6\fs20 NewWindow2}{\f4  and a resource to define a window:  It\rquote s a real pain to define windows that need something other than }{\f6\fs20 wTitle}{\f4 , }{\f6\fs20 wRefCon}{\f4 , }{\f6\fs20 wContDefProc}{\f4  or }{\f6\fs20 wFrameDefProc}{\f4  changed for each new window.  (If you\rquote ll recall, these are the parameters that you can pass as parameters to the }{\f6\fs20 NewWindow2}{\f4  call.)  The big problem at the end of this section is a window sampler, where you\rquote ll be changing most of the }{\f6\fs20 wFrameBits}{\f4  bit flags as well as the color table.  Since those can\rquote t be passed as parameters to }{\f6\fs20 NewWindow2}{\f4 , we\rquote ll cover a very similar call called }{\f6\fs20 NewWindow}{\f4  in this section.  }{\f6\fs20 NewWindow}{\f4  has the disadvantage of using a structure that has to be filled in field by field with assignment statements, but that\rquote s a lot easier than changing a resource on the fly.\par Basically, using }{\f6\fs20 NewWindow}{\f4  is a lot like using }{\f6\fs20 NewWindow2}{\f4 ; the thing that changes is how you specify all of the parameters.  Instead of defining a resource, you define a window record; this window record can be a local variable, since the Window Manager takes what it needs.  The color table, though, still has to be defined as a fixed variable, so we\rquote ll stuff that in our document record.  Listing 5-11 shows a subroutine that will define a window using a }{\f6\fs20 NewWindow}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * NewWind\par *\par * Create a new window\par *\par * Parameters:\par *    dPtr - document for which to create the window\par *\par * Returns: Pointer to the window; NULL for error\par *        \par ***************************************************************/\par \par GrafPortPtr NewWind (documentPtr dPtr)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 ParamList wParms;                   /* parameters for NewWindow */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 dPtr->wColor.frameColor = 0x0000;   /* initialize the window color record */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 dPtr->wColor.titleColor = 0x0F00;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 switch (titleBarKind) \{\par    case solid:\par       dPtr->wColor.titleColor = 0x0F0F;\par       dPtr->wColor.tBarColor = 0x0000;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       break;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    case lined:\par       dPtr->wColor.tBarColor = 0x020F;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       break;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    case dithered:\par       dPtr->wColor.tBarColor = 0x010F;\par       break;\par    \}\par dPtr->wColor.growColor = 0xF0F0;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 dPtr->wColor.infoColor = 0x00F0;\par \par wParms.paramLength = sizeof(wParms); /* initialize the window record */\par wParms.wFrameBits = 0x0025;\par if (fbTitle) wParms.wFrameBits |= fTitle;\par if (fbClose) wParms.wFrameBits |= fClose;\par if (fbAlert) wParms.wFrameBits |= fAlert;\par if (fbControls) wParms.wFrameBits =\par    wParms.wFrameBits | fGrow | fBScroll | fRScroll;\par if (fbFlex) wParms.wFrameBits |= fFlex;\par if (fbZoom) wParms.wFrameBits |= fZoom;\par if (fbMove) wParms.wFrameBits |= fMove;\par if (fbCtlTie) wParms.wFrameBits |= fCtlTie;\par wParms.wTitle = dPtr->wName;\par wParms.wRefCon = 0;\par wParms.wZoom.h1 = 0; wParms.wZoom.h2 = 0;\par wParms.wZoom.v1 = 0; wParms.wZoom.v2 = 0;\par wParms.wColor = &dPtr->wColor;\par wParms.wYOrigin = 0;\par wParms.wXOrigin = 0;\par wParms.wDataH = 200;\par wParms.wDataW = 640;\par wParms.wMaxH = 0;\par wParms.wMaxW = 0;\par wParms.wScrollVer = 8; wParms.wScrollHor = 8;\par wParms.wPageVer = 0; wParms.wPageHor = 0;\par wParms.wInfoRefCon = 0;\par wParms.wInfoHeight = 0;\par wParms.wFrameDefProc = NULL;\par wParms.wInfoDefProc = NULL;\par wParms.wContDefProc = DrawContents;\par wParms.wPosition.v1 = 30;\par wParms.wPosition.h1 = 10;\par wParms.wPosition.v2 = 183;\par wParms.wPosition.h2 = 602;\par wParms.wPlane = (WindowPtr) topMost;\par wParms.wStorage = NULL;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 return NewWindow(&wParms);          /* open the window */\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 5-11:  Subroutine to Define a Window with }{\f6\fs20 NewWindow}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The parameters you actually pass in this structure are basically the same old familiar ones you used with resources.  Here are the differences:\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 paramLength}{\f4 \tab This is the size of the window structure in bytes.  Like all of the parameters that appear here but not in the }{\f6\fs20 rWindParam1}{\f4  resource descriptions we\rquote ve used, this parameter is actually in the resource, too, but Types.rez sets it to a constant, so we normally don\rquote t worry about it in the resource description file.\par \par }{\f6\fs20 wFrameDefProc}{\f4 \tab This is the address of a subroutine that will draw the window frame.  It\rquote s used for custom windows.  For one odd example, by using this parameter and a few others, you could create a round window.\par \par }{\f6\fs20 wInfoDefProc}{\f4 \tab This is the address of a subroutine that draws the contents of the info bar.\par \par }{\f6\fs20 wContDefProc}{\f4 \tab This is the address of the subroutine that draws the contents of the window.  Since the window is set up at run time, we can set this address here, rather than passing it as a parameter to }{\f6\fs20 NewWindow}{\f4 .\par \par }{\f6\fs20 wStorage}{\f4 \tab This is a pointer to the window structure itself.  It\rquote s almost always set to }{\f6\fs20 NULL}{\f4 , forcing the Window Manager to allocate the space.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Problem 5-9:  This problem makes a small change to our Frame program.  This is the version we\rquote ll use in future chapters.\par Add the window color table shown in Listing 5-9 to your Frame program.  (Start with the version developed for Problem 5-5.)  To keep the lines from butting right up against the window name, be sure and add two spaces to the left and right of the window title string.\par \par Problem 5-10:  This problem is a fairly long one, but it\rquote s well worth the effort.  Even if you don\rquote t work the problem, take time to read it so you understand what it\rquote s all about, then run the solution.  The problem develops a window sampler that lets you quickly try out the various window color and }{\f6\fs20 wFrameBits}{\f4  options.\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 a.\tab Starting with the Frame program from Problem 5-9, add a window color record to the document record.  This window color record will be filled in for each window we create.\par \par \tab ORCA/C\rquote s interface file for the Window Manager has a structure defined for color tables.  To save you the trouble of looking it up, here\rquote s the structure you should use to define the color table:\par \par }\pard \li1080\widctlpar\adjustright {\f6\fs20 typedef struct WindColor \{\par    Word frameColor;                  /* Color of window frame */\par    Word titleColor;                  /* Color of title and bar */\par    Word tBarColor;                   /* Color/pattern of title bar */\par    Word growColor;                   /* Color of grow box */\par    Word infoColor;                   /* Color of information bar */\par    \} WindColor, *WindColorPtr, **WindColorHndl;\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par b.\tab Add a menu called }{\f6\fs20 wFrameBits}{\f4 .  Add these menu items to the menu:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\li720\widctlpar\tx1800\tx2880\tx3960\tx5040\tx6120\tx7200\tx8280\adjustright {\f6\fs20 fTitle\tab fClose\tab fAlert\tab Controls\tab fFlex\tab fZoom\tab fMove\tab fCtlTie\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \tab All of these but }{\f6\fs20 controls}{\f4  is the name of one of the bits in }{\f6\fs20 wFrameBits}{\f4 ; }{\f6\fs20 controls}{\f4  is used for }{\f6\fs20 fRScroll}{\f4 , }{\f6\fs20 fBScroll}{\f4  and }{\f6\fs20 fGrow}{\f4 , since these have to be set as a group.  Add the appropriate code to your program so the user can select or deselect these options.  When the option is selected, show a check by the option in the window, erasing the check when the option is not selected.\par \par c.\tab Add another menu called Title.  It should have three options: Solid, Lined and Dithered.  Only one of these can be selected at a time.\par \par d.\tab Remove the code that calls }{\f6\fs20 NewWindow2}{\f4 , using the subroutine from Listing 5-11, instead.  Form the color table and }{\f6\fs20 wFrameBits}{\f4  parameters based on the options that the user has selected from the menus.\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk29}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:customizing}{\rxe bk29}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson has covered the basics of creating and using windows.  It\rquote s been a long, long lesson, so it may seem strange to claim we only covered the basics, but there are a lot of things you can do with windows that we didn\rquote t cover \endash  there are lots of Window Manager calls to manipulate windows that we won\rquote t use, and you can even create your own, custom windows.  Still, this lesson gives you enough information about the Window Manager and windows to recreate what you\rquote ll see in the vast majority of desktop programs.  If you have copies of the toolbox reference manuals, now would be a great time to browse through the chapters that cover the Window Manager.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 BeginUpdate\tab CloseWindow\tab DrawControls\tab EndUpdate\par FrontWindow\tab GetContentOrigin\tab GetPort\tab GetPortRect\par GlobalToLocal\tab HideWindow\tab InvalRect\tab LocalToGlobal\par NewWindow\tab NewWindow2\tab SetContentOrigin\tab SetDataSize\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 SetPage\tab SetPort\tab SetScroll\tab ShowWindow\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rWindColor\tab rWindParam1\par }\pard \qj\fi-1080\li1440\widctlpar\tx1800\adjustright {\*\bkmkend bk30}{\pard\plain \qj\fi-1080\li1440\widctlpar\tx1800\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows}{\rxe bk30}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 6 \endash  File I/O}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 6 \endash  File I/O}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 6 \endash  File I/O\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson concentrates on the Standard File Operations Tool Set, which is a collection of prewritten routines that lets the user of a program specify what files to load and save.  We\rquote ll follow the process through to its natural conclusion by learning to load files and save files using GS/OS, the disk operating system for the Apple II}{\f4\fs20 GS}{\f4 .  Along the way, we\rquote ll add file input and output subroutines to our Frame program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 SFO}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 SFO\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Standard File Operations Tool Set\:See SFO}}}{\f4 Before we get going, let\rquote s stop and get a really good overview of what this lesson is all about.  Most desktop programs need to load and save files; about the only exception would be a game of some sort.  Dealing with file input and output involves two separate issues.  The first is the communication that goes on between the program and the user of the program to decide which file to open or close.  You\rquote ve certainly gone thought the process of selecting Open from the File menu, seeing a dialog appear, and then selected a file.  Saving a file is also handled by a dialog, this time a dialog that lets you pick a name for your file.  If you pick a duplicate, you are warned, and so on.  The process of asking for file names is so common on desktop programs, and there are so many right ways to do it, that Apple decided to create the Standard File Operations Tool Set.  That\rquote s a real mouthful, so most people call it SFO.  SFO displays dialogs for either opening or saving files, handles all of the interaction with the user up to the point that a file name has been picked, and then hands you the file name on a silver platter.  There are some unusual cases when you might want to bypass SFO and do all of this for yourself, but they are very, very unusual.  Almost all desktop programs that do file input or output use SFO to figure out what file name to use.\par Once you have a file name, the second part of the problem is to actually load or save the file.  You could do that with C\rquote s built in file I/O mechanism, but there are some limitations that make C\rquote s file I/O subroutines inadequate for a wide variety of programs.  The two most severe problems are that you can\rquote t set the file type on a file you create, and GS/OS can load and save most files a lot faster than C.  For both of these reasons, we\rquote ll also develop some simple, canned subroutines in this lesson that you can use to load and save files.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Open Dialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Open Dialog\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk34}{\*\bkmkstart bk35}{\*\bkmkstart bk38}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you select Open from the File menu of a desktop program, you generally see something like the dialog shown in Figure 6-1.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1046{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw429\pich252\picwgoal8580\pichgoal5040\macpict\bliptag321011612\blipupi72{\*\blipuid 13223f9cf703d3d02c26f6a93c868149}1d0a0000000000fc01ad1101a00082a0008e01000a0000000002d002409800360000000000be01b00000000000be01ad0000000000be01ad000102cb0002cb0006003fcdff00c006003fcdff00c0060030cd0000c0060030cd0000c0060030cd0000c0060030cd0000c00801307fcfff01e0c00801307fcfff01e0c00801307fcfff01e0c00801307fcfff01e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c01804307c0001e0fd000018fe00047187000780e0000203e0c01804307c0001e0fd000018fe00047187000780e0000203e0c01804307c000330fd000818000c00c003000cc0e0000203e0c01804307c000330fd000818000c00c003000cc0e0000203e0c01911307c000333e1e3e0619f0f9f01f3830780c0e0000203e0c01911307c000333e1e3e0619f0f9f01f3830780c0e0000203e0c01903307c0003fe330a306d99998c00c1830cc180e0000203e0c01903307c0003fe330a306d99998c00c1830cc180e0000203e0c01810307c00033333f3306d99998c00c1830fc3df000203e0c01810307c00033333f3306d99998c00c1830fc3df000203e0c0170f307c0003333303303319998d80c1830cde000203e0c0170f307c0003333303303319998d80c1830cde000203e0c01810307c0001e3e1e33033198f8700c3c78783df000203e0c01810307c0001e3e1e33033198f8700c3c78783df000203e0c00c04307c000003d3000203e0c00c04307c000003d3000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00f07307c00003fffffc0d6000203e0c00f07307c00003fffffc0d6000203e0c0200b307c0000300000f003f00060fc000903c00cf80001f0f0f180e9000203e0c0200b307c0000300000f003f00060fc000903c00cf80001f0f0f180e9000203e0c0200b307c000033fffcf00c0ff060fc0009060030cc000199999860e9000203e0c0200b307c000033fffcf00c0ff060fc0009060030cc000199999860e9000203e0c0210b307c000030fff0f00c000c60fd3c0a7c07c060ccd8f199998030e9000203e0c0210b307c000030fff0f00c000c60fd3c0a7c07c060ccd8f199998030e9000203e0c0221a307c0000303fc0f3ffff0c606660606666066060f8e1999998f030e9000203e0c0221a307c0000303fc0f3ffff0c606660606666066060f8e1999998f030e9000203e0c0221a307c0000300f00f0c000cc607e3c3c6666066060c0c19999981830e9000203e0c0221a307c0000300f00f0c000cc607e3c3c6666066060c0c19999981830e9000203e0c02215307c0000300000f030003c606006066666066060c0c1fe99019830e9000203e0c02215307c0000300000f030003c606006066666066060c0c1fe99019830e9000203e0c0210b307c00003ffffff00ffffc7efd3c066663c030c0c0f1fef00060e9000203e0c0210b307c00003ffffff00ffffc7efd3c066663c030c0c0f1fef00060e9000203e0c01807307c00000ffffff0f600000cfc00010180e9000203e0c01807307c00000ffffff0f600000cfc00010180e9000203e0c00901307cd0000203e0c00901307cd0000203e0c01703307c0000e6ff00f8fe000007f6ff00fefe000203e0c01703307c0000e6ff00f8fe000007f6ff00fefe000203e0c01a03307c0000e9ff03f8000018fe00003cf6000603c0000003e0c01a03307c0000e9ff03f8000018fe00003cf6000603c0000003e0c02803307c0000fdff06e0ffffcffe1ff3f4ff03f8018018fe0005e0000031800efa000570000003e0c02803307c0000fdff06e0ffffcffe1ff3f4ff03f8018018fe0005e0000031800efa000570000003e0c0290e307c0000ffc000ffe67fffcffcffc3f4ff0cf8066018000001c00000318006fa000538000003e0c0290e307c0000ffc000ffe67fffcffcffc3f4ff0cf8066018000001c00000318006fa000538000003e0c03112307c0000ffcff33fe664e1c1fc1ff3fc1e0e1ff8ff00f8fe1815000001c00000318f0619bf878780000038000003e0c03112307c0000ffcff33fe664e1c1fc1ff3fc1e0e1ff8ff00f8fe1815000001c00000318f0619bf878780000038000003e0c03011307c0000ffcff03fe0e3ccccfccff3fcccccf7ff10f8600618000001c000001b198619b6ccccfe000538000003e0c03011307c0000ffcff03fe0e3ccccfccff3fcccccf7ff10f8600618000001c000001b198619b6ccccfe000538000003e0c03112307c0000ffcfff3fe7e7ccccfccff3fcccce1ff8ff19f9f81f98000001c000001b198619b6cfc780000038000003e0c03112307c0000ffcfff3fe7e7ccccfccff3fcccce1ff8ff19f9f81f98000001c000001b198619b6cfc780000038000003e0c03112307c0000ffcfff3fe7e7ccccfccff3fccccfcff8ff00f8fe1815000001c000000e198619b6cc00c0000038000003e0c03112307c0000ffcfff3fe7e7ccccfccff3fccccfcff8ff00f8fe1815000001c000000e198619b6cc00c0000038000003e0c03112307c0000ffcfff3fe7e7e1c1ce1cc0cc1e0e1ff8ff00f8fe1806000001c000000efe0f0bb6c78780000038000003e0c03112307c0000ffcfff3fe7e7e1c1ce1cc0cc1e0e1ff8ff00f8fe1806000001c000000efe0f0bb6c78780000038000003e0c02007307c0000ffc0003ffaff00fcf5ff00f8fe18fe0000e0f5000570000003e0c02007307c0000ffc0003ffaff00fcf5ff00f8fe18fe0000e0f5000570000003e0c01a03307c0000e9ff03f81ff818fe00003cf6000603c0000003e0c01a03307c0000e9ff03f81ff818fe00003cf6000603c0000003e0c01b04307c0000c0ea000318000018fe000007f6ff00fefe000203e0c01b04307c0000c0ea000318000018fe000007f6ff00fefe000203e0c01d04307c0000c0fe00061f00003001e00cf400031ffffff8ee000203e0c01d04307c0000c0fe00061f00003001e00cf400031ffffff8ee000203e0c01d0e307c0000c03fff001980003003003cf4000318000018ee000203e0c01d0e307c0000c03fff001980003003003cf4000318000018ee000203e0c02112307c0000c0300cc0199b1e3e03e00c0363c7e0f8000318000018ee000203e0c02112307c0000c0300cc0199b1e3e03e00c0363c7e0f8000318000018ee000203e0c02112307c0000c0300fc01f1c333303300c038660c0f8000318000018ee000203e0c02112307c0000c0300fc01f1c333303300c038660c0f8000318000018ee000203e0c02112307c0000c03000c01818333303300c0307e180f8000318000018ee000203e0c02112307c0000c03000c01818333303300c0307e180f8000318000018ee000203e0c02011307c0000c03000c01818333303300c030603f7000318000018ee000203e0c02011307c0000c03000c01818333303300c030603f7000318000018ee000203e0c02112307c0000c03000c018181e3e31e33f3303c7e0f8000318000018ee000203e0c02112307c0000c03000c018181e3e31e33f3303c7e0f8000318000018ee000203e0c01607307c0000c03fffc0ed000318000018ee000203e0c01607307c0000c03fffc0ed000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01d04307c0000c0fe00061f00003001e01ef4000318000018ee000203e0c01d04307c0000c0fe00061f00003001e01ef4000318000018ee000203e0c01d0e307c0000c03fff0019800030030033f4000318000018ee000203e0c01d0e307c0000c03fff0019800030030033f4000318000018ee000203e0c02112307c0000c0300cc0199b1e3e03e00303e1f1e0f8000318000018ee000203e0c02112307c0000c0300cc0199b1e3e03e00303e1f1e0f8000318000018ee000203e0c02011307c0000c0300fc01f1c3333033006033333f7000318000018ee000203e0c02011307c0000c0300fc01f1c3333033006033333f7000318000018ee000203e0c02112307c0000c03000c01818333303300c033331e0f8000318000018ee000203e0c02112307c0000c03000c01818333303300c033331e0f8000318000018ee000203e0c02112307c0000c03000c01818333303301803333030f8000318000018ee000203e0c02112307c0000c03000c01818333303301803333030f8000318000018ee000203e0c02112307c0000c03000c018181e3e31e33f33e1f1e0f8000318000018ee000203e0c02112307c0000c03000c018181e3e31e33f33e1f1e0f8000318000018ee000203e0c01a07307c0000c03fffc0fa000003f5000318000018ee000203e0c01a07307c0000c03fffc0fa000003f5000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01d04307c0000c0fe00061f00003001e01ef4000318000018ee000203e0c01d04307c0000c0fe00061f00003001e01ef4000318000018ee000203e0c01d0e307c0000c03fff0019800030030033f4000318000018ee000203e0c01d0e307c0000c03fff0019800030030033f4000318000018ee000203e0c02912307c0000c0300cc0199b1e3e03e0030363c7e0f8000318000018fe000003f6ff00fcfe000203e0c02912307c0000c0300cc0199b1e3e03e0030363c7e0f8000318000018fe000003f6ff00fcfe000203e0c02912307c0000c0300fc01f1c3333033006038660c0f8000318000018fe00007cf6000603e0000003e0c02912307c0000c0300fc01f1c3333033006038660c0f8000318000018fe00007cf6000603e0000003e0c02912307c0000c03000c01818333303300c0307e180f8000718000018000003c7f6ff06fe3c000003e0c02912307c0000c03000c01818333303300c0307e180f8000718000018000003c7f6ff06fe3c000003e0c02811307c0000c03000c018183333033018030603f70007180000180000073cf6000603ce000003e0c02811307c0000c03000c018183333033018030603f70007180000180000073cf6000603ce000003e0c02c12307c0000c03000c018181e3e31e33f3303c7e0f800071800001800000ee0fd0000f0fa000577000003e0c02c12307c0000c03000c018181e3e31e33f3303c7e0f800071800001800000ee0fd0000f0fa000577000003e0c02207307c0000c03fffc0ed00071800001800001dc0fe00010198fa00053b800003e0c02207307c0000c03fffc0ed00071800001800001dc0fe00010198fa00053b800003e0c02204307c0000c0ea00071800001800001dc0fe00040199f0f1f0fd00053b800003e0c02204307c0000c0ea00071800001800001dc0fe00040199f0f1f0fd00053b800003e0c02204307c0000c0ea00071800001800001dc0fe000001fe990098fd00053b800003e0c02204307c0000c0ea00071800001800001dc0fe000001fe990098fd00053b800003e0c02c04307c0000c0fe00061f00003001e01ef400071800001800001dc0fe0004019999f998fd00053b800003e0c02c04307c0000c0fe00061f00003001e01ef400071800001800001dc0fe0004019999f998fd00053b800003e0c02c0e307c0000c03fff0019800030030033f400071800001800001dc0fe00040199998198fd00053b800003e0c02c0e307c0000c03fff0019800030030033f400071800001800001dc0fe00040199998198fd00053b800003e0c02f12307c0000c0300cc0199b1e3e03e00303e1f1e0f800071800001800001dc0fd0003f1f0f198fd00053b800003e0c02f12307c0000c0300cc0199b1e3e03e00303e1f1e0f800071800001800001dc0fd0003f1f0f198fd00053b800003e0c02c11307c0000c0300fc01f1c333303300e033333f700071800001800000ee0fd00010180fb000577000003e0c02c11307c0000c0300fc01f1c333303300e033333f700071800001800000ee0fd00010180fb000577000003e0c02912307c0000c03000c018183333033003033331e0f80007180000180000073cf6000603ce000003e0c02912307c0000c03000c018183333033003033331e0f80007180000180000073cf6000603ce000003e0c02912307c0000c03000c01818333303303303333030f8000718000018000003c7f6ff06fe3c000003e0c02912307c0000c03000c01818333303303303333030f8000718000018000003c7f6ff06fe3c000003e0c02912307c0000c03000c018181e3e31e31e33e1f1e0f8000318000018fe00007cf6000603e0000003e0c02912307c0000c03000c018181e3e31e31e33e1f1e0f8000318000018fe00007cf6000603e0000003e0c02207307c0000c03fffc0fa000003f5000318000018fe000003f6ff00fcfe000203e0c02207307c0000c03fffc0fa000003f5000318000018fe000003f6ff00fcfe000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01d04307c0000c0fe00061f00003001e01ef4000318000018ee000203e0c01d04307c0000c0fe00061f00003001e01ef4000318000018ee000203e0c01d0e307c0000c03fff0019800030030033f4000318000018ee000203e0c01d0e307c0000c03fff0019800030030033f4000318000018ee000203e0c02912307c0000c0300cc0199b1e3e03e0030363c7e0f8000318000018fe000007f6ff00fefe000203e0c02912307c0000c0300cc0199b1e3e03e0030363c7e0f8000318000018fe000007f6ff00fefe000203e0c02912307c0000c0300fc01f1c333303300e038660c0f8000318000018fe00003cf6000603c0000003e0c02912307c0000c0300fc01f1c333303300e038660c0f8000318000018fe00003cf6000603c0000003e0c02d12307c0000c03000c0181833330330030307e180f8000318000018fe0000e0fe00010f0efa000570000003e0c02d12307c0000c03000c0181833330330030307e180f8000318000018fe0000e0fe00010f0efa000570000003e0c02c11307c0000c03000c018183333033033030603f7000718000018000001c0fe00011986fa000538000003e0c02c11307c0000c03000c018183333033033030603f7000718000018000001c0fe00011986fa000538000003e0c02f12307c0000c03000c018181e3e31e31e3303c7e0f8000718000018000001c0fe00011806fe0ffd000538000003e0c02f12307c0000c03000c018181e3e31e31e3303c7e0f8000718000018000001c0fe00011806fe0ffd000538000003e0c02607307c0000c03fffc0ed000718000018000001c0fe0005180619981980fe000538000003e0c02607307c0000c03fffc0ed000718000018000001c0fe0005180619981980fe000538000003e0c02304307c0000c0ea000718000018000001c0fe00051806198f1f80fe000538000003e0c02304307c0000c0ea000718000018000001c0fe00051806198f1f80fe000538000003e0c02204307c0000c0ea000718000018000001c0fe00041986198198fd000538000003e0c02204307c0000c0ea000718000018000001c0fe00041986198198fd000538000003e0c02804307c0000c0fe00061f00003001e030f4000718000018000001c0fe00fc0ffd000538000003e0c02804307c0000c0fe00061f00003001e030f4000718000018000001c0fe00fc0ffd000538000003e0c0240e307c0000c03fff0019800030030033f4000318000018fe0000e0f5000570000003e0c0240e307c0000c03fff0019800030030033f4000318000018fe0000e0f5000570000003e0c098003600be000000fc01b000be000000fc01ad00be000000fc01ad00012912307c0000c0300cc0199b1e3e03e03303e1f1e0f8000318000018fe00003cf6000603c0000003e0c02912307c0000c0300cc0199b1e3e03e03303e1f1e0f8000318000018fe00003cf6000603c0000003e0c02811307c0000c0300fc01f1c3333033033033333f7000318000018fe000007f6ff00fefe000203e0c02811307c0000c0300fc01f1c3333033033033333f7000318000018fe000007f6ff00fefe000203e0c02112307c0000c03000c01818333303303f033331e0f8000318000018ee000203e0c02112307c0000c03000c01818333303303f033331e0f8000318000018ee000203e0c02112307c0000c03000c01818333303300303333030f8000318000018ee000203e0c02112307c0000c03000c01818333303300303333030f8000318000018ee000203e0c02112307c0000c03000c018181e3e31e30333e1f1e0f8000318000018ee000203e0c02112307c0000c03000c018181e3e31e30333e1f1e0f8000318000018ee000203e0c01a07307c0000c03fffc0fa000003f500031ffffff8ee000203e0c01a07307c0000c03fffc0fa000003f500031ffffff8ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea000318000018ee000203e0c01304307c0000c0ea0003181ff818ee000203e0c01304307c0000c0ea0003181ff818ee000203e0c02204307c0000c0fe00061f00003001e030f400fd18fe000007f6ff00fefe000203e0c02204307c0000c0fe00061f00003001e030f400fd18fe000007f6ff00fefe000203e0c0220e307c0000c03fff0019800030030033f400fd18fe00003cf6000603c0000003e0c0220e307c0000c03fff0019800030030033f400fd18fe00003cf6000603c0000003e0c02d12307c0000c0300cc0199b1e3e03e0330363c7e0f800fd18fe0000e0fe0000f0fd0000e0fe000570000003e0c02d12307c0000c0300cc0199b1e3e03e0330363c7e0f800fd18fe0000e0fe0000f0fd0000e0fe000570000003e0c03012307c0000c0300fc01f1c3333033033038660c0f8000b19f81f98000001c000000198fd000060fe000538000003e0c03012307c0000c0300fc01f1c3333033033038660c0f8000b19f81f98000001c000000198fd000060fe000538000003e0c03112307c0000c03000c01818333303303f0307e180f8000c18600618000001c000000180f9fef00060fe000538000003e0c03112307c0000c03000c01818333303303f0307e180f8000c18600618000001c000000180f9fef00060fe000538000003e0c02e11307c0000c03000c018183333033003030603f700fd1807000001c000000181fe99019860fe000538000003e0c02e11307c0000c03000c018183333033003030603f700fd1807000001c000000181fe99019860fe000538000003e0c03112307c0000c03000c018181e3e31e3033303c7e0f8001018066018000001c000000181999981f860fe000538000003e0c03112307c0000c03000c018181e3e31e3033303c7e0f8001018066018000001c000000181999981f860fe000538000003e0c02507307c0000c03fffc0ed000a18018018000001c0000001fd99018060fe000538000003e0c02507307c0000c03fffc0ed000a18018018000001c0000001fd99018060fe000538000003e0c02204307c0000c0ea000718000018000001c0fe0002f0f998fef0fe000538000003e0c02204307c0000c0ea000718000018000001c0fe0002f0f998fef0fe000538000003e0c01603307c0000e6ff00f8fe0000e0f5000570000003e0c01603307c0000e6ff00f8fe0000e0f5000570000003e0c01101307ce000003cf6000603c0000003e0c01101307ce000003cf6000603c0000003e0c01101307ce0000007f6ff00fefe000203e0c01101307ce0000007f6ff00fefe000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00901307cd0000203e0c00801307fcfff01e0c00801307fcfff01e0c00801307fcfff01e0c00801307fcfff01e0c0060030cd0000c0060030cd0000c0060030cd0000c0060030cd0000c006003fcdff00c006003fcdff00c002cb0002cb00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 6-1:  Open Dialog\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par I\rquote m going to assume you know how to use this dialog to open a file.  If not, you can find all of the information you need in the introductory books that came with your computer.\par Creating this dialog is remarkably easy.  All you have to do is call }{\f6\fs20 SFGetFile2}{\f4  with a few parameters.  Here\rquote s a model call to }{\f6\fs20 SFGetFile2}{\f4  with some parameter names that we can use to talk about the various things you have to tell SFO to get a dialog like the one in Figure 6-1:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 SFGetFile2(x, y, promptRefDesc, promptRef, filterProcPtr, typeListPtr,\par }\pard \li180\widctlpar\adjustright {\f6\fs20    replyPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first two parameters tell SFO where to put the dialog.  The parameters x and y give the position of the top left corner of the dialog.  Unfortunately, since the dialog can change size from one version of the system software to another, you can\rquote t really do the sensible thing and center the dialog.\par There\rquote s a string, \ldblquote Open what file?\rdblquote , at the top of Figure 6-1.  You can change this string to whatever prompt you like, and that\rquote s what the next two parameter are for.  }{\f6\fs20 promptRefDesc}{\f4  is the sort of parameter you should be getting used to by now; it tells SFO what sort of parameter you are passing in }{\f6\fs20 promptRef}{\f4 .  If }{\f6\fs20 promptRefDesc}{\f4  is }{\f6\fs20 refIsPointer}{\f4  (a value of 0), }{\f6\fs20 promptRef}{\f4  is a pointer to a p-string.  If it is }{\f6\fs20 refIsHandle}{\f4  (1), }{\f6\fs20 promptRef}{\f4  is the handle of a p-string.  Finally, the most appropriate choice for }{\f6\fs20 promptRefDesc}{\f4  is }{\f6\fs20 refIsResource}{\f4  (2), which tells SFO that }{\f6\fs20 promptRef}{\f4  is the resource ID of an }{\f6\fs20 rPString}{\f4  resource.  The reason that\rquote s the best choice is because all strings belong in the resource fork, where they can be changed by the user.\par The }{\f6\fs20 filterProcPtr}{\f4  is a pointer to a function in your program.  To understand what this subroutine is for you have to stop and remember that most programs only accept certain kinds of files.  }{\f6\fs20 SFGetFile2}{\f4  is perfectly capable of weeding out files based on file types and auxiliary file types (you\rquote ll see how to do this in a moment), but there are occasionally strange situations where you want to be even more picky.  The filter procedure gives you a way to be as picky as you want, selecting each individual file that will appear in the open dialog.  We won\rquote t use filter procedures in this course, so we\rquote ll always set the }{\f6\fs20 filterProcPtr}{\f4  parameter to }{\f6\fs20 NULL}{\f4 .\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 auxiliary file type}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The next parameter is a pointer to a list of file types you are willing to accept.  In most cases, your program will only load files with a specific file type.  A program that will load and display pictures, for example, would allow the picture file types, but reject C source code files.  The process of picking out and displaying only the files that you can actually load is done automatically when you give SFO a list of file types.  We\rquote ll talk about the file type list in detail in a moment.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 auxiliary file type}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 path names}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 reply record}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Finally, }{\f6\fs20 replyPtr}{\f4  is a reply record you supply.  SFO fills in the reply record with a flag telling you if the user picked a file or canceled the operation, and if a file was selected, the file type, auxiliary file type, file name, and full path name for the file.  That\rquote s more than enough information to load the file.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 File Type Lists}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 File Type Lists\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk31}{\*\bkmkstart bk32}{\*\bkmkstart bk33}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The file type list controls the files that are listed in the open dialog.  You can specify files by file type, auxiliary file type, or a combination of both a file type and auxiliary file type.  You can also tell SFO to list files in the dialog, but to make the files dimmed and unselectable.\par A file type structure starts with an integer telling how many file type records are in the array of file types.  This is followed by the correct number of file type entries, each with four parameters: a flags word, a file type, and an auxiliary file type.  In ORCA/C, the declarations that are used for a file type structure list are:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct TypeSelector2 \{\par    Word flags;\par    Word fileType;\par    LongWord auxType;\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct TypeSelector2 TypeSelector2;\par }\pard \li180\widctlpar\adjustright {\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct SFTypeList2 \{\par    Word numEntries;\par    TypeSelector2 fileTypeEntries[sfFileTypeEntriesLength];\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct SFTypeList2 SFTypeList2, *SFTypeList2Ptr, **SFTypeList2Hndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The }{\f6\fs20 SFTypeList2}{\f4  declaration uses a pretty interesting feature of the C language.  The length of the file type array is given by }{\f6\fs20 sfFileTypeEntriesLength}{\f4 , which is a constant declared at the top of the StdFile.h header file:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20                         /* SFTypeList - default number of FileTypeEntries */\par #ifndef sfFileTypeEntriesLength\par #define sfFileTypeEntriesLength 0x0005\par #endif\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par As you can see, this gives you room for up to five file type entries.  That\rquote s not a lot, but it will do in most cases.  The nice thing about handling the length of the array this way, though, is it\rquote s easy for you to change the length, and you don\rquote t even have to change the header file to do it.  For example, if you need ten entries, put this line somewhere before the }{\f6\fs20 #include}{\f4  for StdFile.h:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define sfFileTypeEntriesLength 10\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Three bits are used in the flags word.  If bit 15 is set, SFO matches any file type.  If bit 14 is set, SFO matches any auxiliary file type.  Finally, if bit 13 is set, the files are displayed as dimmed and unselectable.  The rest of the bits are reserved, and must be set to 0.\par Checking the list of file types in Appendix A, you can see that a C source file has a file type of 0xB0 and an auxiliary file type of 0x0008.  A file type record to load C source files would be set up like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 types.fileTypeEntries[0].flags = 0x0000;\par types.fileTypeEntries[0].fileType = 0xB0;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 types.fileTypeEntries[0].auxType = 0x0008;\par }{\f4 \par If you wanted to load any source file, and not just C source files, you would want to load any file with a file type of 0xB0, no matter what auxiliary file type the file had.  In that case, you would set up the file type entry like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 types.fileTypeEntries[0].flags = 0x8000;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 types.fileTypeEntries[0].fileType = 0xB0;\par }{\f4 \par Bits 15 and 14 can also work together, telling SFO to accept }{\i\f4 any}{\f4  file, no matter what file type or auxiliary file type the file has.  Here\rquote s a complete type list record that will let you load any file at all:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 SFTypeList2 types;\par \par types.numEntries = 1;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 types.fileTypeEntries[0].flags = 0xC000;\par }{\f4 \par In this case we don\rquote t have to set the file type or auxiliary file type, since SFO is going to ignore them anyway.\par {\*\bkmkend bk31}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type}{\rxe bk31}}}{\*\bkmkend bk32}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 auxiliary file type}{\rxe bk32}}}{\*\bkmkend bk33}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type lists}{\rxe bk33}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Reply Record}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 The Reply Record\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk36}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The reply record is where SFO tells you what file you are supposed to load.  Here\rquote s the declaration for a reply record:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct SFReplyRec2 \{\par    Boolean good;\par    Word fileType;\par    LongWord auxType;\par    RefDescriptor nameRefDesc;\par    Ref nameRef;\par    RefDescriptor pathRefDesc;\par    Ref pathRef;\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct SFReplyRec2 SFReplyRec2, *SFReplyRec2Ptr, **SFReplyRec2Hndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first entry tells you if the user actually picked a file, or if they decided to cancel the operation.  If the open has been canceled, }{\f6\fs20 good}{\f4  will be set to 0, and all of the other entries are invalid.  You simply ignore the operation and get back to the event loop.  If }{\f6\fs20 good}{\f4  is not zero, the rest of the fields tell you which file to load.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 auxiliary file type}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 fileType}{\f4  and }{\f6\fs20 auxType}{\f4  field are pretty obvious; they tell you the file type and auxiliary file type of the file type to load.  If you only allowed one file type, or if your program doesn\rquote t depend on the actual format of the file (as in, for example, a copy program), you can ignore these fields.\par {\*\bkmkstart bk37}SFO can return the file name and path name in a variety of ways; you control the method with }{\f6\fs20 nameRefDesc}{\f4  and }{\f6\fs20 pathRefDesc}{\f4 , which you have to set up in the reply record before calling }{\f6\fs20 SFGetFile2}{\f4 .  The most reasonable choice (and the only one we\rquote ll talk about here) is 3, which tells SFO to allocate whatever memory is needed and return a handle in }{\f6\fs20 nameRef}{\f4  and }{\f6\fs20 pathRef}{\f4 .  Handles are something we won\rquote t talk about in detail for a while yet.  All you need to know for now is how to get at the actual string, and what to do with the handle when you are finished with it.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using the }{\b\f6\fs20 nameRef}{\b\f4  and }{\b\f6\fs20 pathRef}{\b\f4  Handles}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Using the }{\b\v\f6\fs20 nameRef}{\b\v\f4  and }{\b\v\f6\fs20 pathRef}{\b\v\f4  Handles\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HLock}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HUnlock}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DisposeHandle}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The file name and path name }{\f6\fs20 SFGetFile2}{\f4  returns in }{\f6\fs20 nameRef}{\f4  and }{\f6\fs20 pathRef}{\f4  are handles.  We haven\rquote t talked about handles much, but you don\rquote t need to know much to use them.  (Lesson 8 deals with handles in detail.)  You can think of a handle as a pointer to a pointer, although there\rquote s a bit more to it than that.  First off, the information a handle points to can move, so you need to use the }{\f6\fs20 HLock}{\f4  call to lock the handle before you try to get at the information the handle points to.  Once you are finished looking at the information, you use }{\f6\fs20 HUnlock}{\f4  to unlock the handle again.  Finally, handles are dynamically allocated memory, just like the memory you get using C\rquote s }{\f6\fs20 malloc}{\f4  function, and you have to dispose of the memory when you are finished with it.  You dispose of a handle and the memory allocated by the handle using }{\f6\fs20 DisposeHandle}{\f4 .  All three of these calls \endash  }{\f6\fs20 HLock}{\f4 , }{\f6\fs20 HUnlock}{\f4 , and }{\f6\fs20 DisposeHandle}{\f4  \endash  take the handle that they work on as the only parameter.\par The names returned by }{\f6\fs20 SFGetFile2}{\f4  are GS/OS output strings, also called class 1 strings.  While these names may be called strings, they really aren\rquote t strings in the sense we use the term in C.  Instead, GS/OS is returning a structure consisting of three parts: a record length word, a name length word, and an array of characters.  This array of characters can have just about anything inside, including null characters, so you have to be careful when you access the information.  The biggest caution is to never use C\rquote s string handling facilities on the characters in a GS/OS name, even if they have been copied into a C string, since C uses the null character to signal the end of a string, and null characters are legal characters in a GS/OS path name.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 typedef struct GSString255 \{\par    Word length;\par    char text[255];\par    \} GSString255, *GSString255Ptr, **GSString255Hndl;\par typedef GSString255Hndl *GSString255HndlPtr;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 typedef struct ResultBuf255 \{\par    Word bufSize;\par    GSString255 bufString;\par    \} ResultBuf255, *ResultBuf255Ptr, **ResultBuf255Hndl;\par typedef ResultBuf255Hndl *ResultBuf255HndlPtr ;\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-1:  GS/OS String Definitions Used in ORCA/C\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The full path name is use when the file is opened and read, and again if the file is saved.  The file name is used as the name of the window (with some spaces added on either side) and as the default name when the file is saved using the Save As... menu command.  Basically, then, you need to save both the file name and the path name in the document record so they can be used later, and you also need to form a window name from the file name.\par With all of this in mind, you can write a subroutine to implement the Open command, right up to the place where the file is read.  There are a lot of details you have to deal with to develop a good routine, though, especially with the type casting and error handling.  Listing 6-2 shows one way to handle all of these details.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DoOpen\par *\par * Open a file\par *\par ***************************************************************/\par \par void DoOpen (void)\par \par \{\par #define posX 80                         /* X position of the dialog */\par #define posY 50                         /* Y position of the dialog */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define titleID 102                     /* prompt string resource ID */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 documentPtr dPtr;                       /* pointer to the new document */\par SFTypeList2 fileTypes;                  /* list of valid file types */\par Handle gsosNameHandle;                  /* handle of the file name */\par ResultBuf255Ptr gsosNamePtr;            /* pointer to the GS/OS file name */\par int i;                                  /* loop/index variable */\par int len;                                /* GS/OS name length */\par char name[maxName];                     /* new document name */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SFReplyRec2 reply;                      /* reply record */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 fileTypes.numEntries = 2;               /* set up the allowed file types */\par fileTypes.fileTypeEntries[0].flags = 0x8000;\par fileTypes.fileTypeEntries[0].fileType = 0xB0;\par fileTypes.fileTypeEntries[1].flags = 0x8000;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 fileTypes.fileTypeEntries[1].fileType = 0x04;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 reply.nameRefDesc = 3;                  /* get the file to open */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 reply.pathRefDesc = 3;\par SFGetFile2(posX, posY, refIsResource, titleID, NULL, &fileTypes, &reply);\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (toolerror() != 0)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    FlagError(3, toolerror());           /* handle an error */\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 else if (reply.good) \{                  /* form the file name */\par    gsosNameHandle = (Handle) reply.nameRef;\par    HLock(gsosNameHandle);\par    gsosNamePtr = (ResultBuf255Ptr) (*gsosNameHandle);\par    strcpy(name, "  ");\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    len = gsosNamePtr->bufString.length;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    if (len > maxName-5)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       len = maxName-5;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    for (i = 0; i < len; ++i)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       name[2+i] = gsosNamePtr->bufString.text[i];\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    name[2+i] = (char) 0;\par    strcat(name, "  ");\par    HUnlock(gsosNameHandle);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    dPtr = NewDocument(name);            /* get a document record */\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    if (dPtr == NULL) \{          /* in case of error, dispose of the names */\par       DisposeHandle((Handle) reply.nameRef);\par       DisposeHandle((Handle) reply.pathRef);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    else \{                               /* otherwise save the names */\par       dPtr->fileName = (Handle) reply.nameRef;\par       dPtr->pathName = (Handle) reply.pathRef;\par \par       if (LoadDocument(dPtr))           /* read the file */\par          dPtr->onDisk = TRUE;           /* file is on disk */\par       else                              /* handle a read error */\par          CloseDocument(dPtr);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       \}\par    \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #undef posX\par #undef posY\par #undef titleID\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-2:  A Subroutine to Implement the Open Command\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par While this subroutine doesn\rquote t actually load a file from disk, it does call }{\f6\fs20 LoadDocument}{\f4 .  That\rquote s where you would put the code to load the file itself.  }{\f6\fs20 LoadDocument}{\f4  is a function, returning }{\f6\fs20 TRUE}{\f4  if the file was loaded successfully, and }{\f6\fs20 FALSE}{\f4  if the file couldn\rquote t be loaded for some reason.  We\rquote ll assume }{\f6\fs20 LoadDocument}{\f4  flags its own errors and cleans up after itself, but as you see, getting rid of the document is still up to us.\par This subroutine can be moved from program to program pretty easily.  After all, the only thing that\rquote s likely to change is the list of file types that the program can read.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Problem 6-1:  Implement the Open command, adding it to Frame.  (Start with the solution to Problem 5-9.)  Make sure you do all of the following:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 a.\tab Add two fields to your document record to save }{\f6\fs20 nameRef}{\f4  and }{\f6\fs20 pathRef}{\f4 .  In Listing 6-2 these fields are called }{\f6\fs20 fileName}{\f4  and }{\f6\fs20 pathName}{\f4 .  They should have a type of }{\f6\fs20 Handle}{\f4 .\par b.\tab When the New command is used to open a new document, be sure and set the file name and path name handles to }{\f6\fs20 NULL}{\f4 .\par c.\tab When a document is closed, be sure you check to see if the file name and path name fields have been filled in with handles.  If so, dispose of the handles.\par d.\tab Add the subroutine from Listing 6-2 to your program, calling it when the user picks Open from the File menu.\par e.\tab Create a dummy }{\f6\fs20 LoadDocument}{\f4  subroutine.  This subroutine needs to return }{\f6\fs20 TRUE}{\f4 , but for now, that\rquote s all it needs to do.  When you\rquote re testing your program, try returning }{\f6\fs20 FALSE}{\f4  once to test the error handler.\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk34}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Open command}{\rxe bk34}}}{\*\bkmkend bk35}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 open dialog}{\rxe bk35}}}{\*\bkmkend bk36}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 reply record}{\rxe bk36}}}{\v\f4 \par {\*\bkmkend bk37}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 path names}{\rxe bk37}}}{\*\bkmkend bk38}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SFGetFile2}{\rxe bk38}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Role of Save and Save As...}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Role of Save and Save As...\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk39}\par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Save command}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Save As command}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are two save commands in a standard File menu, Save and Save As...  The Save command is the \ldblquote quickie\rdblquote  save, replacing an existing copy of a file with an updated version of the same file.  When the Save command is used, the program should use the full path name returned from the }{\f6\fs20 SFGetFile2}{\f4  call.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SFPutFile2}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Save As command is used when you want to save a document to a new file name.  In that case, you use the }{\f6\fs20 SFPutFile2}{\f4  call, which works a lot like the }{\f6\fs20 SFGetFile2}{\f4  call.  We\rquote ll cover the call itself in the next section.  }{\f6\fs20 SFPutFile2}{\f4  draws the standard \ldblquote save dialog,\rdblquote  which lets you move around on a disk, or even between disks, create a new folder, and ultimately enter a file name to use when the file is saved.\par This covers the case of a file loaded from disk fairly well, but there is one other possibility.  When you use the Save command to save a document that was created with New, and has never been saved before, you should call the same subroutine you call when the Save As... command is used, since you need to get a file name.  Way back when we first created a document record, we added a flag, }{\f6\fs20 onDisk}{\f4 , to tell whether a document had been created with the New or Open command, so the check to see if you should use Save or Save As... is fast and easy.  Of course, you do need to remember to set the }{\f6\fs20 onDisk}{\f4  flag to }{\f6\fs20 TRUE}{\f4  after saving a new document for the first time.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Save As... Dialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Save As... Dialog\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk40}{\*\bkmkstart bk41}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The save dialog itself is created with a call to }{\f6\fs20 SFPutFile2}{\f4 .  Here\rquote s a prototype call, again with names of the parameters instead of values to make it easier to talk about the call.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1047{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw346\pich262\picwgoal6920\pichgoal5240\macpict\bliptag-871077414\blipupi72{\*\blipuid cc1469da37fd8f966173bea5e8d98a56}1b48000000000106015a1101a00082a0008e01000a000000000308048098002c0000000000ec01600000000000ec015a0000000000ec015a000102d50006007fd7ff008006007fd7ff0080070060d800010180070060d800010180070060d800010180070060d800010180070060d8ff01c180070060d8ff01c180070060d8ff01c180070060d8ff01c180090160f8da000207c180090160f8da000207c180090160f8da000207c180090160f8da000207c180090160f8da000207c180090160f8da000207c1800e0660f8001fffffe0df000207c1800e0660f8001fffffe0df000207c1801f0a60f8001800007801f80030fc000901e0067c0000f87878c0f2000207c1801f0a60f8001800007801f80030fc000901e0067c0000f87878c0f2000207c1801f0a60f80019fffe780607f830fc0005030018660000fecc0030f2000207c1801f0a60f80019fffe780607f830fc0005030018660000fecc0030f2000207c180200a60f800187ff87806000630fd1e0a3e03e030666c78ccccc018f2000207c180200a60f800187ff87806000630fd1e0a3e03e030666c78ccccc018f2000207c180211460f800181fe079ffff863033303033330330307c70fecc017818f2000207c180211460f800181fe079ffff863033303033330330307c70fecc017818f2000207c180211460f80018078078600066303f1e1e33330330306060fecc010c18f2000207c180211460f80018078078600066303f1e1e33330330306060fecc010c18f2000207c180201460f8001800007818001e3030030333330330306060fdcc0018f2000207c180201460f8001800007818001e3030030333330330306060fdcc0018f2000207c180200a60f8001ffffff807fffe3ffd1e0a3331e018606078f8787830f2000207c180200a60f8001ffffff807fffe3ffd1e0a3331e018606078f8787830f2000207c180160660f80007fffff8f6000006fb0000c0f2000207c180160660f80007fffff8f6000006fb0000c0f2000207c180090160f8da000207c180090160f8da000207c180190860f800787830f80380fd0005e03c7e3c3c63eb000207c180190860f800787830f80380fd0005e03c7e3c3c63eb000207c180180760f800ccc0f0c006fd000301806606fe66eb000207c180180760f800ccc0f0c006fd000301806606fe66eb000207c180201260f8000cf830f80f9b1e1e01e3e0660c06666cf9000001f6ff04f80007c180201260f8000cf830f80f9b1e1e01e3e0660c06666cf9000001f6ff04f80007c180201260f80038cc300c061c333303318066181c3c78f900000ff600040f0007c180201260f80038cc300c061c333303318066181c3c78f900000ff600040f0007c180251260f8000ccc300c06183f3f0331803e1806666cf9000538000031800efb000401c007c180251260f8000ccc300c06183f3f0331803e1806666cf9000538000031800efb000401c007c180230f60f800cccc30cc061830300331800630fe66f90005700000318006fa0003e007c180230f60f800cccc30cc061830300331800630fe66f90005700000318006fa0003e007c180291360f8007878fc7806181e1e01e1803c303c3c6330fa0010700000318f0619bf8787800000e007c180291360f8007878fc7806181e1e01e1803c303c3c6330fa0010700000318f0619bf8787800000e007c180170160f8e800097000001b198619b6ccccfe0003e007c180170160f8e800097000001b198619b6ccccfe0003e007c180170160f8e800107000001b198619b6cfc7800000e007c180170160f8e800107000001b198619b6cfc7800000e007c180170160f8e800107000000e198619b6cc00c00000e007c180170160f8e800107000000e198619b6cc00c00000e007c180170160f8e800037000000efe0f09b6c787800000e007c180170160f8e800037000000efe0f09b6c787800000e007c1800f0160f8e8000038f6000401c007c1800f0160f8e8000038f6000401c007c180120260f801ebff02fe000ff600040f0007c180120260f801ebff02fe000ff600040f0007c180160360f80180ef0005060000060001f6ff04f80007c180160360f80180ef0005060000060001f6ff04f80007c1801c0360f80180fe00062a000020028008f9000306006006f2000207c1801c0360f80180fe00062a000020028008f9000306006006f2000207c1801c0d60f8018055540011000040040050f9000306019806f2000207c1801c0d60f8018055540011000040040050f9000306019806f2000207c180211060f8018020088022222828028008028280fc00fd06010001f6ff04f80007c180211060f8018020088022222828028008028280fc00fd06010001f6ff04f80007c180231060f8018040150014104444044010044440fc000506180186000df60004070007c180231060f8018040150014104444044010044440fc000506180186000df60004070007c1802a0f60f80180200080202022220220080202fb0015067e07e600380002000002a0028020000001c007c1802a0f60f80180200080202022220220080202fb0015067e07e600380002000002a0028020000001c007c180291060f8018040010010104444044010044440fc00fd060a0070004400000100010040fe0003e007c180291060f8018040010010104444044010044440fc00fd060a0070004400000100010040fe0003e007c180291060f801802000802020282822822a228280fc00fd061100600022288202028082a2828000e007c180291060f801802000802020282822822a228280fc00fd061100600022288202028082a2828000e007c1801e0560f801805555f100fd061100700054445101444104444500006007c1801e0560f801805555f100fd061100700054445101444104444500006007c1801e0360f80180ef00150607fe060060002a2a8a0202208222a20000e007c1801e0360f80180ef00150607fe060060002a2a8a0202208222a20000e007c1801e0360f80180ef00150600000600700044404401044104440400006007c1801e0360f80180ef00150600000600700044404401044104440400006007c180280360f80180fe00062a000020028008f9001507fffffe00700022282202028282a2820000e007c180280360f80180fe00062a000020028008f9001507fffffe00700022282202028282a2820000e007c180200d60f8018055540011000040040050f9000507fffffe0038f6000401c007c180200d60f8018055540011000040040050f9000507fffffe0038f6000401c007c180241160f801802008802222282802800802828a80fd00050780001e000ef600040b0007c180241160f801802008802222282802800802828a80fd00050780001e000ef600040b0007c180231060f8018040150014104444044010050441fc00050780001e0001f6ff04f80007c180231060f8018040150014104444044010050441fc00050780001e0001f6ff04f80007c1801f1060f8018020008020202222022008020a82fc00030780001ef2000207c1801f1060f8018020008020202222022008020a82fc00030780001ef2000207c1801e0d60f8018040010010104444044010fe04fc00030780001ef2000207c1801e0d60f8018040010010104444044010fe04fc00030780001ef2000207c180201160f801802000802020282822822a22028a80fd00030780001ef2000207c180201160f801802000802020282822822a22028a80fd00030780001ef2000207c180140560f801805555f100030780001ef2000207c180140560f801805555f100030780001ef2000207c180120360f80180ef00030780001ef2000207c180120360f80180ef00030780001ef2000207c180120360f80180ef00030780001ef2000207c180120360f80180ef00030780001ef2000207c1801c0360f80180fe00062a000020028028f900030780001ef2000207c1801c0360f80180fe00062a000020028028f900030780001ef2000207c1801c0d60f8018055540011000040040044f900030780001ef2000207c1801c0d60f8018055540011000040040044f900030780001ef2000207c180231060f8018020088022222828028002028280fc00050780001e0001f6ff04f80007c180231060f8018020088022222828028002028280fc00050780001e0001f6ff04f80007c180231060f8018040150014104444044004044440fc00050780001e000df60004070007c180231060f8018040150014104444044004044440fc00050780001e000df60004070007c180260f60f80180200080202022220220080202fb00050780001e0038fd0000a0fb000401c007c180260f60f80180200080202022220220080202fb00050780001e0038fd0000a0fb000401c007c180271060f8018040010010104444044010044440fc00050780001e0070fe00010110fa0003e007c180271060f8018040010010104444044010044440fc00050780001e0070fe00010110fa0003e007c180281060f801802000802020282822822a228280fc00050780001e0060fd000088fea0fd0003e007c180281060f801802000802020282822822a228280fc00050780001e0060fd000088fea0fd0003e007c1801f0560f801805555f100050780001e0070fe000001fe110010fd00036007c1801f0560f801805555f100050780001e0070fe000001fe110010fd00036007c1801c0360f80180ef00050780001e0060fd00038888a888fd0003e007c1801c0360f80180ef00050780001e0060fd00038888a888fd0003e007c1801d0360f80180ef00050780001e0070fe00040111110110fd00036007c1801d0360f80180ef00050780001e0070fe00040111110110fd00036007c180250360f80180fe00062a000020028028f900050780001e0070fd00fea00088fd0003e007c180250360f80180fe00062a000020028028f900050780001e0070fd00fea00088fd0003e007c180240d60f8018055540011000040040044f900050780001e0038fd000001fb000401c007c180240d60f8018055540011000040040044f900050780001e0038fd000001fb000401c007c180241160f801802008802222282802800202828a80fd00050780001e000ef600040b0007c180241160f801802008802222282802800202828a80fd00050780001e000ef600040b0007c180231060f8018040150014104444044004050441fc00050780001e0001f6ff04f80007c180231060f8018040150014104444044004050441fc00050780001e0001f6ff04f80007c1801f1060f8018020008020202222022008020a82fc000307fffffef2000207c1801f1060f8018020008020202222022008020a82fc000307fffffef2000207c1801e0d60f8018040010010104444044010fe04fc000306aaaaaef2000207c1801e0d60f8018040010010104444044010fe04fc000306aaaaaef2000207c180201160f801802000802020282822822a22028a80fd000306aaaaaef2000207c180201160f801802000802020282822822a22028a80fd000306aaaaaef2000207c180180560f801805555f1000506aaaaae0001f6ff04f80007c180180560f801805555f1000506aaaaae0001f6ff04f80007c180160360f80180ef000506aaaaae000ff600040f0007c180160360f80180ef000506aaaaae000ff600040f0007c1801b0360f80180ef000506aaaaae0038fe00010f0efb000401c007c1801b0360f80180ef000506aaaaae0038fe00010f0efb000401c007c180240360f80180fe00062a000020028028f9000506aaaaae0070fe00011986fa0003e007c180240360f80180fe00062a000020028028f9000506aaaaae0070fe00011986fa0003e007c180260d60f8018055540011000040040044f9000506aaaaae0070fe00011806fe0ffd0003e007c180260d60f8018055540011000040040044f9000506aaaaae0070fe00011806fe0ffd0003e007c1802b1060f8018020088022222828028002028280fc000506aaaaae0070fe0005180619981980fe0003e007c1802b1060f8018020088022222828028002028280fc000506aaaaae0070fe0005180619981980fe0003e007c1802b1060f8018040150014104444044014044440fc000506aaaaae0070fe00051806198f1f80fe0003e007c1802b1060f8018040150014104444044014044440fc000506aaaaae0070fe00051806198f1f80fe0003e007c180280c60f80180200080202022220220fe02fb000506aaaaae0070fe00041986198198fd0003e007c180280c60f80180200080202022220220fe02fb000506aaaaae0070fe00041986198198fd0003e007c180261060f8018040010010104444044044044440fc000506aaaaae0070fe00fc0ffd0003e007c180261060f8018040010010104444044044044440fc000506aaaaae0070fe00fc0ffd0003e007c180231060f8018020008020202828228228228280fc000506aaaaae0038f6000401c007c180231060f8018020008020202828228228228280fc000506aaaaae0038f6000401c007c180180560f801805555f1000507fffffe000ff600040f0007c180180560f801805555f1000507fffffe000ff600040f0007c180160360f80180ef0005060000060001f6ff04f80007c180160360f80180ef0005060000060001f6ff04f80007c180120360f80180ef00030607fe06f2000207c180120360f80180ef00030607fe06f2000207c180190360f80180fe00062a000020028028f900fd06f2000207c180190360f80180fe00062a000020028028f900fd06f2000207c180190d60f8018055540011000040040044f900fd06f2000207c180190d60f8018055540011000040040044f900fd06f2000207c1801d1160f801802008802222282802800202828a80fd00fd06f2000207c1801d1160f801802008802222282802800202828a80fd00fd06f2000207c1801f1060f8018040150014104444044014050441fc0003067e07e6f2000207c1801f1060f8018040150014104444044014050441fc0003067e07e6f2000207c1801f1060f8018020008020202222022002020a82fc000306180186f2000207c1801f1060f8018020008020202222022002020a82fc000306180186f2000207c1801b0d60f8018040010010104444044044fe04fc00fd06f2000207c1801b0d60f8018040010010104444044044fe04fc00fd06f2000207c180201160f801802000802020282822822822028a80fd000306019806f2000207c180201160f801802000802020282822822822028a80fd000306019806f2000207c180140560f801805555f1000306006006f2000207c180140560f801805555f1000306006006f2000207c180160360f80180ef0005060000060000f6ff04f00007c180160360f80180ef0005060000060000f6ff04f00007c180120260f801ebff02fe001ff600040f8007c180120260f801ebff02fe001ff600040f8007c1800f0160f8e80000f1f6ff04f8f007c1800f0160f8e80000f1f6ff04f8f007c180100160f8e9000101cdf60004073807c180100160f8e9000101cdf60004073807c1801c0360f80078fe000201c61cf1000103b8fd0000a0fb000401dc07c1801c0360f80078fe000201c61cf1000103b8fd0000a0fb000401dc07c1801c0360f800ccfe000203000cf100010770fe00010110fa0003ee07c1801c0360f800ccfe000203000cf100010770fe00010110fa0003ee07c180230d60f800c07cc63c07ce0c1e01f1e0f500010760fe00040200a208a0fd0003ee07c180230d60f800c07cc63c07ce0c1e01f1e0f500010760fe00040200a208a0fd0003ee07c180220c60f80078ccc66603060c330333f400010770fe00040141111110fd00036e07c180220c60f80078ccc66603060c330333f400010770fe00040141111110fd00036e07c180220d60f8000ccc6c7e03060c3f0331e0f500010760fd00032220a0a8fd0003ee07c180220d60f8000ccc6c7e03060c3f0331e0f500010760fd00032220a0a8fd0003ee07c180210d60f800cccc6c6003060c30033030f500010770fe000001fe11fc00036e07c180210d60f800cccc6c6003060c30033030f500010770fe000001fe11fc00036e07c180200e60f800787c383c030f1e1e01f1e333f600010770fd00fda0fd0003ee07c180200e60f800787c383c030f1e1e01f1e333f600010770fd00fda0fd0003ee07c180100160f8e9000103b8f6000401dc07c180100160f8e9000103b8f6000401dc07c180100160f8e9000101cef600040b3807c180100160f8e9000101cef600040b3807c1800f0160f8e80000f1f6ff04f8f007c1800f0160f8e80000f1f6ff04f8f007c1800f0160f8e800001ff600040f8007c1800f0160f8e800001ff600040f8007c180120260f801ebff02fe0000f6ff04f00007c180120260f801ebff02fe0000f6ff04f00007c1800f0360f80180ec000006f2000207c1800f0360f80180ec000006f2000207c1800f0360f80180ec000006f2000207c1800f0360f80180ec000006f2000207c1800f0360f80180ec000006f2000207c1800f0360f80180ec000006f2000207c180130360f80184ec0002060001f6ff04f80007c180130360f80184ec0002060001f6ff04f80007c180130360f80184ec000206000ff600040f0007c180130360f80184ec000206000ff600040f0007c1801a0360f80184ec0002060038fe0000f0fd0007e0000001c007c1801a0360f80184ec0002060038fe0000f0fd0007e0000001c007c1801a0360f80184ec000606007000000198fd000060fe0003e007c1801a0360f80184ec000606007000000198fd000060fe0003e007c1801b0360f80184ec000706007000000180f9fef00060fe0003e007c1801b0360f80184ec000706007000000180f9fef00060fe0003e007c1801b0360f80184ec000606007000000181fe99019860fe0003e007c1801b0360f80184ec000606007000000181fe99019860fe0003e007c1801b0360f80184ec000b06007000000181999981f860fe0003e007c1801b0360f80184ec000b06007000000181999981f860fe0003e007c1801a0360f80184ec0005060070000001fd99018060fe0003e007c1801a0360f80184ec0005060070000001fd99018060fe0003e007c1801a0360f80184ec0002060070fe0002f0f998fef0fe0003e007c18098002c00ec00000106016000ec00000106015a00ec00000106015a00011a0360f80184ec0002060070fe0002f0f998fef0fe0003e007c180130360f80180ec0002060038f6000401c007c180130360f80180ec0002060038f6000401c007c180130360f80180ec000206000ff600040f0007c180130360f80180ec000206000ff600040f0007c180130360f80180ec0002060001f6ff04f80007c180130360f80180ec0002060001f6ff04f80007c1800f0360f80180ec000006f2000207c1800f0360f80180ec000006f2000207c1800e0260f801ebff00fef2000207c1800e0260f801ebff00fef2000207c180090160f8da000207c180090160f8da000207c180090160f8da000207c180090160f8da000207c180070060d8ff01c180070060d8ff01c180070060d8ff01c180070060d8ff01c180070060d800010180070060d800010180070060d800010180070060d80001018006007fd7ff008006007fd7ff008002d500a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 6-2:  Sample Save Dialog\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\li180\keepn\widctlpar\adjustright {\f6\fs20 SFPutFile2(x, y, promptRefDesc, promptRef, origNameRefDesc, origNameRef,\par }\pard \qj\li180\widctlpar\adjustright {\f6\fs20    replyPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par As with the }{\f6\fs20 SFGetFile2}{\f4  call, }{\f6\fs20 x}{\f4  and }{\f6\fs20 y}{\f4  give the position of the dialog, and }{\f6\fs20 promptRefDesc}{\f4  and }{\f6\fs20 promptRef}{\f4  give the prompt string that appears at the top of the dialog.\par When the save dialog is drawn, the line edit box at the bottom where the file name is entered can have a default name.  When a document exists on disk, this default name is the file name returned by the }{\f6\fs20 SFGetFile2}{\f4  call.  If the file does not exist on disk, you can pass a string with no characters.  The default name is passed in the }{\f6\fs20 origNameRef}{\f4  field, with }{\f6\fs20 origNameRefDesc}{\f4  telling }{\f6\fs20 SFPutFile2}{\f4  what sort of parameter is being passed.  We\rquote ll use }{\f6\fs20 refIsPointer}{\f4  (which has a value of 0) for }{\f6\fs20 origNameRefDesc}{\f4 , telling }{\f6\fs20 SFPutFile2}{\f4  that we are passing a pointer to the default name.\par Of course, that still leaves the issue of getting a pointer to a file name to pass.  SFPutFile2 is expecting a GS/OS input file name.  A GS/OS input file name is a length word followed by characters \endash  sort of like an extra-long p-string.  }{\f6\fs20 SFGetFile2}{\f4  gave us a GS/OS output file name, though, which has an extra integer at the start of the record.  We can pass a pointer to this name when we call }{\f6\fs20 SFPutFile2}{\f4 , but we need to make sure the pointer points two bytes past the start of the value returned by }{\f6\fs20 SFGetFile2}{\f4 .  You\rquote ll see one way to handle this in the sample code in Listing 6-3.\par If the file was never saved to disk, we have a different problem.  In that case there\rquote s no file name to pass, and we have to create one on the fly.  You can use some sort of default name if you like, but a null string is appropriate to \endash  that gives an immediate visual reminder that there literally is no file name for the file, yet.  Creating a null file name is pretty easy, too; just pass a pointer to an integer set to 0.\par The last parameter is the reply pointer.  It is used exactly the same way as the reply pointer in }{\f6\fs20 SFGetFile2}{\f4 , but the file type and auxiliary file type fields are not filled in.\par Once you get a file name, there are two other things you need to do.  The first is to update the name of the window, which should change to reflect the new file name, and the second is to actually save the file.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetWTitle}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Creating a new name for the window from the }{\f6\fs20 SFPutFile2}{\f4  reply record is no different than creating the window name from the }{\f6\fs20 SFGetFile2}{\f4  reply record.  The difference is that this time the window already exists, so you need to let the Window Manager know that the name of the window has changed.  You can do that with the }{\f6\fs20 SetWTitle}{\f4  call:\par \par }{\f6\fs20 SetWTitle(name, wPtr);\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first parameter is the new name for the window; like the original name, it\rquote s a p-string.  The second parameter is a pointer to the window you\rquote re changing.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Listing 6-3 shows two subroutines, }{\f6\fs20 DoSave}{\f4  and }{\f6\fs20 DoSaveAs}{\f4 , that can be used to implement all of the ideas we\rquote ve covered.  Both call }{\f6\fs20 SaveDocument}{\f4  to actually write the file to disk, and assume that }{\f6\fs20 SaveDocument}{\f4  will handle any errors in its own.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DoSaveAs\par *\par * Save a document to a new name\par *\par ***************************************************************/\par \par void DoSaveAs (void)\par \par \{\par #define posX 80                         /* X position of the dialog */\par #define posY 50                         /* Y position of the dialog */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define titleID 103                     /* prompt string resource ID */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 documentPtr dPtr;                       /* document to save */\par int dummyName;                        /* used for a null file name prompt */\par Handle gsosNameHandle;                  /* handle of the file name */\par ResultBuf255Ptr gsosNamePtr;            /* pointer to the GS/OS file name */\par int i;                                  /* loop/index variable */\par int len;                                /* GS/OS name length */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SFReplyRec2 reply;                      /* reply record */\par \par dPtr = FindDocument(FrontWindow());\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (dPtr != NULL) \{\par    reply.nameRefDesc = 3;               /* get the new file name */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    reply.pathRefDesc = 3;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    if (dPtr->fileName == NULL) \{\par       dummyName = 0;\par       SFPutFile2(posX, posY, refIsResource, (Ref) titleID, refIsPointer,\par          (Ref) &dummyName, &reply);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    else\par       SFPutFile2(posX, posY, refIsResource, titleID, refIsPointer,\par }\pard \fi180\widctlpar\adjustright {\f6\fs20          (Ref) (((long) (*dPtr->fileName)) + 2), &reply);\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    if (toolerror() != 0)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       FlagError(3, toolerror());        /* handle an error */\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    else if (reply.good) \{\par                                         /* form the new window name */\par       gsosNameHandle = (Handle) reply.nameRef;\par       HLock(gsosNameHandle);\par       gsosNamePtr = (ResultBuf255Ptr) (*gsosNameHandle);\par       strcpy(dPtr->wName, "   ");\par       len = gsosNamePtr->bufString.length;\par       if (len > maxName-6)\par          len = maxName-6;\par       for (i = 0; i < len; ++i)\par          dPtr->wName[2+i] = gsosNamePtr->bufString.text[i];\par       dPtr->wName[2+i] = (char) 0;\par       strcat(dPtr->wName, "  ");\par       dPtr->wName[0] = (char) (strlen(dPtr->wName)-1);\par       HUnlock(gsosNameHandle);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       SetWTitle(dPtr->wName, dPtr->wPtr);\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20                                         /* save the names */\par       dPtr->fileName = (Handle) reply.nameRef;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       dPtr->pathName = (Handle) reply.pathRef;\par       dPtr->onDisk = TRUE;              /* file is on disk */\par       SaveDocument(dPtr);               /* save the file */\par       \}\par    \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #undef posX\par #undef posY\par #undef titleID\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DoSave\par *\par * Save a document to the existing disk file\par *\par ***************************************************************/\par \par void DoSave (void)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 documentPtr dPtr;                       /* document to save */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 dPtr = FindDocument(FrontWindow());\par if (dPtr != NULL)\par    if (dPtr->onDisk)\par       SaveDocument(dPtr);\par    else\par       DoSaveAs();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-3:  Subroutines to Implement the Save and Save As Commands\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 A Comment About Ellipsis}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 A Comment About Ellipsis\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ellipsis}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 An ellipsis is the series of three periods you see after some of the menu commands in desktop programs.  They actually have a meaning.  Any time a menu command brings up a modal dialog, forcing the user to stop and do something, the name of the menu command should be followed by three periods.\par Up until now, the only menu command we\rquote ve used that brought up a dialog is the about command.  We\rquote ve just changed the Open command so it brings up a dialog, though, and we\rquote re adding a new command (Save As) that also brings up a dialog.  Be sure you change the names of your menus to take this into account.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Problem 6-2:  Implement the Save As... command, adding it to Frame.  Add a Save command subroutine, too, calling it when a new document is saved.  Here\rquote s what your File menu should look like (and what the key equivalents should be!):\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1048{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw101\pich178\picwgoal2020\pichgoal3560\macpict\bliptag-146521088\blipupi72{\*\blipuid f74444009f09eaa795728c99f046341f}088d0000000000b200651101a00082a0008e01000a0000000002d0024098000e0000000000b200680000000000b200650000000000b20065000102f30002f30008003ffdff00fef90008003ffdff00fef90008003ffdff00fef90008003ffdff00fef90008003ffdff00fef90008003ffdff00fef90009053fe0e78ffffef90009053fe0e78ffffef90009053fe7ffcffffef90009053fe7ffcffffef90009053fe7c7cf87fef90009053fe7c7cf87fef90009053fe1e7cf33fef90009053fe1e7cf33fef90009053fe7e7cf03fef90009053fe7e7cf03fef90009053fe7e7cf3ffef90009053fe7e7cf3ffef90009053fe7c38787fef90009053fe7c38787fef90008003ffdff00fef90008003ffdff00fef90008003ffdff00fef90008003ffdff00fef90008003ff7ff00feff0008003ff7ff00feff00080030f7000006ff00080030f7000006ff00080030f7000006ff00080030f7000006ff000c02300023fb00020308c6ff000c02300023fb00020308c6ff000c02300033fb0004020cc7e0000c02300033fb0004020cc7e0000f0530003b1e6180fe00040d8ec7e0000f0530003b1e6180fe00040d8ec7e0000f0530003f336d80fe000410cfc7e0000f0530003f336d80fe000410cfc7e0000f053000373f6d80fe0004108dc7e0000f053000373f6d80fe0004108dc7e0000e043000333033fd000412ccc7e0000e043000333033fd000412ccc7e0000e043000311e33fd00040d8c47e0000e043000311e33fd00040d8c47e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e0000c0230001efb0004030787e0000c0230001efb0004030787e0000c02300033fb0004020cc7e0000c02300033fb0004020cc7e0000f053000333e1e3efe00040d8cc7e0000f053000333e1e3efe00040d8cc7e0000d013000fd33fe000410ccc7e0000d013000fd33fe000410ccc7e0000f05300033333f33fe0004108cc7e0000f05300033333f33fe0004108cc7e0000f05300033333033fe000412ccc7e0000f05300033333033fe000412ccc7e0000f0d30001e3e1e333330000d8787e0000f0d30001e3e1e333330000d8787e0000b0330000030fa000207e0000b0330000030fa000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e0000d0330001e1cfc0004031867e0000d0330001e1cfc0004031867e0000d033000330cfc0004021867e0000d033000330cfc0004021867e0000f033000300cfe1e0600000d9b67e0000f033000300cfe1e0600000d9b67e0000f0d3000300c333033000010db67e0000f0d3000300c333033000010db67e0000f0d3000300c331e3f0000109b67e0000f0d3000300c331e3f0000109b67e0000f0d3000330c330330000012ccc7e0000f0d3000330c330330000012ccc7e0000d013000fc1e0600000d8cc7e0000d013000fc1e0600000d8cc7e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e0000c0230001efb0004030787e0000c0230001efb0004030787e0000c02300033fb0004020cc7e0000c02300033fb0004020cc7e0000f053000301f318ffe00040d8c07e0000f053000301f318ffe00040d8c07e0000f0d30001e33319980000010c787e0000f0d30001e33319980000010c787e0000f0d300003331b1f8000001080c7e0000f0d300003331b1f8000001080c7e0000f05300033331b18fe000412ccc7e0000f05300033331b18fe000412ccc7e0000f0530001e1f0e0ffe00040d8787e0000f0530001e1f0e0ffe00040d8787e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e0000e0230001efd0000f0fe000207e0000e0230001efd0000f0fe000207e0000f02300033fe00010198fe000207e0000f02300033fe00010198fe000207e0000f0d3000301f318f0198f0000007e0000f0d3000301f318f0198f0000007e0000f0d30001e333199819980000007e0000f0d30001e333199819980000007e0000f0d300003331b1f81f8f0000007e0000f0d300003331b1f81f8f0000007e0000f0d300033331b18019818000007e0000f0d300033331b18019818000007e0000f0d30001e1f0e0f0198f1998007e0000f0d30001e1f0e0f0198f1998007e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e00007003ff6ff01e00007003ff6ff01e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e0000e0430001e0018fd0004030787e0000e0430001e0018fd0004030787e0000f05300033000060fe0004020cc7e0000f05300033000060fe0004020cc7e0000f053000333338f8fe00040d8cc7e0000f053000333338f8fe00040d8cc7e0000f05300033331860fe000410ccc7e0000f05300033331860fe000410ccc7e0000f05300033331860fe0004108cc7e0000f05300033331860fe0004108cc7e0000f0530003333186cfe000412ccc7e0000f0530003333186cfe000412ccc7e0000f0530001e1f3c38fe00040d8787e0000f0530001e1f3c38fe00040d8787e0000a02300003f90002c7e0000a02300003f90002c7e000080030f7000207e000080030f7000207e000080030f7000207e000080030f7000207e00007003ff6ff01e00007003ff6ff01e000070001f6ff01e000070001f6ff01e00002f30002f300a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 6-3:  File Menu with Save and Save As\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Make sure you do all of the following:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 a.\tab Add the }{\f6\fs20 DoSave}{\f4  and }{\f6\fs20 DoSaveAs}{\f4  functions from Listing 6-3, calling them when the user uses the Save or Save As... command.\par b.\tab Create a }{\f6\fs20 SaveDocument}{\f4  function.  This doesn\rquote t need to do anything, yet, it just needs to exist since }{\f6\fs20 DoSave}{\f4  and }{\f6\fs20 DoSaveAs}{\f4  call it.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 6-3:  You created a program to draw dots on the screen in Problem 5-8.  Combine this solution with the results from Problems 6-1 and 6-2 to create a program that can save and load lists of the dots.\par You can use C\rquote s built in file handling functions, }{\f6\fs20 fopen}{\f4 , }{\f6\fs20 fclose}{\f4 , }{\f6\fs20 fread}{\f4  and }{\f6\fs20 fwrite}{\f4 , to handle the file input and output.  You\rquote ll want to open the output file with the command\par \par }{\f6\fs20 f = fopen(name, "wb");\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 which opens a binary file, with a file type of 0x06 and an auxiliary file type of 0x0000.  You will need those values for your }{\f6\fs20 SFGetFile2}{\f4  call.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1049{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \tab }{\b\f4 Hint}{\f4 \tab Just to make things easy, I saved the number of points in the file as the first integer.  I saved the points by writing the point records in the point list.\~\~}{{\pict{\*\picprop\shplid1050{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk39}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 saving files}{\rxe bk39}}}{\v\f4 \par {\*\bkmkend bk40}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Save As command}{\rxe bk40}}}{\v\f4 \par {\*\bkmkend bk41}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SFPutFile2}{\rxe bk41}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Other Standard File Calls}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Other Standard File Calls\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 We\rquote ve covered the use of }{\f6\fs20 SFGetFile2}{\f4  and }{\f6\fs20 SFPutFile2}{\f4 , which do the job of figuring out file names for file loads and saves very well, but there are always exceptional cases that just don\rquote t quite work with the simple dialogs we\rquote ve used.  While we won\rquote t cover any of the other SFO calls, I\rquote d like to mention a few of the biggies so you know they exist.  If you would like to use any of the other SFO calls, you can refer to }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3 }{\f4 for details.\par It\rquote s not all that uncommon to need a few additional buttons in a dialog.  One of the most common examples is a program that can save to several different file formats.  In that case, you need to let the user pick the file format.  A common way to do that is to add a button called Format, and open your own dialog when the button is pushed.  The }{\f6\fs20 SFGetFile2}{\f4  and }{\f6\fs20 SFPutFile2}{\f4  calls don\rquote t give you any chance to add your own buttons, but two close cousins do.  They are }{\f6\fs20 SFPGetFile2}{\f4  and }{\f6\fs20 SFPPutFile2}{\f4 .\par In some kinds of programs, it might be nice to be able to select more than one file in an open dialog, but }{\f6\fs20 SFGetFile2}{\f4  only lets the user pick one file at a time.  There is a way to get more than one file at a time, though, using the }{\f6\fs20 SFMultiGet2}{\f4  call.\par All of these calls are documented in chapter 48 of the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Technical Reference Manual, Volume 3}{\f4 .  Of course, there are a lot of other calls in SFO, too.  Browsing through the chapters that cover SFO will reveal all sorts of tricks you can do with SFO.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Reading a File}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Reading a File\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk42}{\*\bkmkstart bk44}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Now that you know how to get a file name, it\rquote s time to actually load the file.  You could load the file using C\rquote s built in file handling functions, like f}{\f6\fs20 read}{\f4 , but there are some problems with these, mainly in the area of speed.  We\rquote ll use GS/OS to load the file, instead.\par GS/OS isn\rquote t technically a part of the Apple II}{\f4\fs20 GS}{\f4  toolbox, although there\rquote s really no reason why it couldn\rquote t be.  In fact, the Macintosh file I/O system is a tool.  At the machine code level there are some very big differences in the way you call GS/OS and the way you make tool calls, but from the viewpoint of a high-level language, these differences vanish.  In this course, we\rquote ll treat GS/OS as if it were a tool, and in fact, the GS/OS calls we\rquote ll use are listed in Appendix A just like the tool calls.  For a complete description of GS/OS, you need to get a copy of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4 .\par Reading a file is relatively easy with GS/OS.  Here\rquote s the steps involved:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenGS}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 1.\tab Call }{\f6\fs20 OpenGS}{\f4  to open the file.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewHandle}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 2.\tab Call }{\f6\fs20 NewHandle}{\f4  to get memory to load the file.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReadGS}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 3.\tab Call }{\f6\fs20 ReadGS}{\f4  to read the contents of the file into memory.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseGS}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 4.\tab Call }{\f6\fs20 CloseGS}{\f4  to close the file.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 toolerror}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GS/OS errors}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Unlike the tools, every GS/OS call uses exactly one parameter, a structure that contains the various values that will be passed to the call.  The GS/OS subroutines also return values in the same structure.  In ORCA/C GS/OS errors are reported just like tool errors; you read the error number using the }{\f6\fs20 toolerror}{\f4  function, which is still 0 if there is no error to report.\par Each of the GS/OS structures starts with a parameter count word that has to be filled in by you before the call is made.  This parameter count word exists because you don\rquote t always have to pass the same number of parameters to a GS/OS call; you can abbreviate the parameters if you like.  Here\rquote s the structure and call declarations for }{\f6\fs20 OpenGS}{\f4 .  The structure is taken from the ORCA/C header file GSOS.h.  Because of the way GS/OS calls are actually made, the function looks different in the header file; what you see here represents the way the function is used.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenGS}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 typedef struct OpenRecGS \{\par    Word pCount;\par    Word refNum;\par    GSString255Ptr pathname;\par    Word requestAccess;\par    Word resourceNumber;\par    Word access;\par    Word fileType;\par    LongWord auxType;\par    Word storageType;\par    TimeRec createDateTime;\par    TimeRec modDateTime;\par    ResultBuf255Ptr optionList;\par    LongWord eof;\par    LongWord blocksUsed;\par    LongWord resourceEOF;\par    LongWord resourceBlocks;\par    \} OpenRecGS, *OpenRecPtrGS;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenGS}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 void OpenGS (OpenRecGS *parms);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-4:  }{\f6\fs20 OpenGS}{\f4  Declaration\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are a lot of fields here, but we\rquote re only interested in four of them.  The }{\f6\fs20 pCount}{\f4  parameter is the parameter count I mentioned; we need to set this before making a call.  The }{\f6\fs20 pathname}{\f4  field is a pointer to a GS/OS input string; we\rquote ll pass the path name returned by the }{\f6\fs20 SFGetFile2}{\f4  call (after adding two to skip the initial buffer size, as before).  The }{\f6\fs20 eof}{\f4  field contains the total length of the file in bytes; we\rquote ll use this value to tell how much memory to allocate, and again when we read the file.  Finally, once the file is open, GS/OS expects us to refer to the file with a number it returns; this number is called the file reference number, and is returned in the }{\f6\fs20 refNum}{\f4  field.  We\rquote ll pass this }{\f6\fs20 refNum}{\f4  to both the }{\f6\fs20 ReadGS}{\f4  call and the }{\f6\fs20 CloseGS}{\f4  call.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 refNum}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you look back in Appendix A at the documentation for }{\f6\fs20 OpenGS}{\f4 , you will find that the }{\f6\fs20 pCount}{\f4  field can be any value from 2 to 15.  Counting the fields in the }{\f6\fs20 OpenRecGS}{\f4  record, }{\f6\fs20 pCount}{\f4  is 0, }{\f6\fs20 refNum}{\f4  is 1 and }{\f6\fs20 pathName}{\f4  is 2, so this tells us that we have to supply at least the name of the file to open, and as a minimum, GS/OS will tell us the reference number for the file so we can close it.  Since you have to tell GS/OS which file to open, and GS/OS really does expect you to be polite enough to close the file when you\rquote re finished with it, it shouldn\rquote t be any surprise that you have to use at least those first two parameters.\par Counting down the list, }{\f6\fs20 eof}{\f4  is parameter number 12.  We need this value, so the smallest value we can supply is 12.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 networks}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are three other input parameters in the }{\f6\fs20 OpenRecGS}{\f4  structure; they are the }{\f6\fs20 requestAccess}{\f4  parameter, the }{\f6\fs20 optionList}{\f4  parameter and the }{\f6\fs20 resourceNumber}{\f4  parameter.  If we\rquote d stuck with a }{\f6\fs20 pCount}{\f4  of 2, we could have ignored these parameters, but since we have used a }{\f6\fs20 pCount}{\f4  of 12, they must be filled in.  It\rquote s a good idea to fill in the }{\f6\fs20 requestAccess}{\f4  parameter anyway, especially when the program may be used by people on a network.  The }{\f6\fs20 requestAccess}{\f4  parameter is a flags word; bit 1 is set if you want to write to the file, and clear if not, while bit 0 is set if you want to read the file.  The reason this pair of flags is so important is that more than one program can read a file at the same time, as long as all of them only open the file for input, but only one program can have a file open for output at any given time, and no one else can read the file while it is open for output.  For a data file on a network, opening the file for input only means that other people can load the file at the same time.  That\rquote s a real possibility with a program that might be used by a class of students to open a file at the start of a class session.  All of that boils down to using 1 for }{\f6\fs20 requestAccess}{\f4 , setting the read bit but leaving the write access bit clear.\par The }{\f6\fs20 optionList}{\f4  parameter is something we won\rquote t cover here.  Basically, it\rquote s a pointer to a buffer area GS/OS can fill in with extra information, but since we don\rquote t need any of the information, we can just set this value to }{\f6\fs20 NULL}{\f4  to tell GS/OS not to bother.\par The }{\f6\fs20 resourceNumber}{\f4  parameter lets you tell GS/OS whether you want to open the data fork (use 0) or the resource fork (use 1).  We\rquote ll use 0, since we\rquote re opening the data fork.\par There are a wide variety of errors that can occur when you try to open a file, and it is very important to check for them with the }{\f6\fs20 toolerror}{\f4  function before you move on to the rest of the load process.  The error checking isn\rquote t hard, you just have to remember to do it.  After we finish talking about the rest of the calls, we\rquote ll collect all of the information into a single subroutine that loads a file.  You can check out how the error handling is done then.\par After opening the file, the next step is to reserve some memory.  In this course, I\rquote m assuming that you will load the file into memory, work on it there, and write the file once when the user uses the Save or Save As... command.  There are other ways of handling files, such as leaving the file open and keeping only a small part of the file in memory.  This is a good idea in some programs, like a commercial quality word processor that might need to let the user edit files larger than available memory.  It\rquote s a bad idea in others, since the complexity of the program shoots up dramatically, and the program is also a lot slower.\par Allocating the memory is done with the }{\f6\fs20 NewHandle}{\f4  call.  We need to allocate }{\f6\fs20 eof}{\f4  bytes of memory, and this memory should normally be moveable.  That\rquote s a big help to the Memory Manager, as you\rquote ll discover in a couple of lessons.  The call to }{\f6\fs20 NewHandle}{\f4  looks like this:\par \par }\pard \qj\li180\widctlpar\adjustright {\f6\fs20 myHandle = NewHandle(ref.eof, userid(), 0x8000, NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 We\rquote ll cover }{\f6\fs20 NewHandle}{\f4  in a lot more detail in a later lesson; for now, use the call just like you see it.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Assuming the call is successful, }{\f6\fs20 NewHandle}{\f4  returns a handle to a chunk of memory.  The memory will be locked at first, but after we read the file, we should unlock the handle so the Memory Manager can move the file around if it needs to.  Before accessing the memory, we need to lock the file again.\par Here\rquote s the declarations for the }{\f6\fs20 ReadGS}{\f4  call and its structure:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 typedef struct IORecGS \{\par    Word pCount;\par    Word refNum;\par    Pointer dataBuffer;\par    LongWord requestCount;\par    LongWord transferCount;\par    Word cachePriority;\par    \} IORecGS, *IORecPtrGS;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReadGS}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 void ReadGS (IORecGS *parms);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-5:  }{\f6\fs20 ReadGS}{\f4  and the }{\f6\fs20 IORecGS}{\f4  Structure\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 We won\rquote t be using (or discussing) the cache priority field, so }{\f6\fs20 pCount}{\f4  will be set to 4.  The }{\f6\fs20 refNum}{\f4  field needs to be filled in with the reference number returned by }{\f6\fs20 OpenGS}{\f4 .  The }{\f6\fs20 dataBuffer}{\f4  field is a pointer to the place to put the bytes read; that would be *}{\f6\fs20 myHandle}{\f4 , which is a pointer to the first byte of memory reserved by the }{\f6\fs20 NewHandle}{\f4  call.  The }{\f6\fs20 requestCount}{\f4  field tells }{\f6\fs20 ReadGS}{\f4  how many bytes to read; that should be filled in with }{\f6\fs20 eof}{\f4  from the }{\f6\fs20 OpenGS}{\f4  structure.  The }{\f6\fs20 transferCount}{\f4  parameter is returned by }{\f6\fs20 ReadGS}{\f4 .  It tells us how many bytes were actually read.  That\rquote s pretty useful in situations where you are reading a file in small chunks, but we don\rquote t actually need the value, so we\rquote ll ignore it.  The minimum allowed value for }{\f6\fs20 pCount}{\f4  is 4, though (check Appendix A for information like the minimum }{\f6\fs20 pCount}{\f4  value) so we have to let }{\f6\fs20 ReadGS}{\f4  fill in the field.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseGS}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last step in reading the file is to close the file with }{\f6\fs20 CloseGS}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 typedef struct RefNumRecGS \{\par    Word pCount;\par    Word refNum;\par    \} RefNumRecGS, *RefnumRecPtrGS;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par void CloseGS (RefNumRecGS *parms); \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-6:  }{\f6\fs20 CloseGS}{\f4  and the }{\f6\fs20 RefNumRecGS}{\f4  Structure\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par While the other GS/OS calls weren\rquote t all that complicated, this one is trivial.  You just pass the reference number for the file to close, along with a }{\f6\fs20 pCount}{\f4  of 1, and GS/OS closes the file.\par All of this is pulled together in Listing 6-7, which shows a subroutine that loads a file into memory.  This subroutine does all of the appropriate error checking, calling our standard error handler if an error is found.  (You should add message 4, \ldblquote File read error\rdblquote , to the list of error messages in your resource file.)  If the load is successful, the subroutine puts the handle to an unlocked chunk of memory containing the file in the document record; if the file can\rquote t be loaded for some reason, the subroutine sets the data handle to }{\f6\fs20 NULL}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * LoadDocument\par *\par * Load a document file from disk\par *\par * Parameters:\par *    dPtr - pointer to the document to load\par *        \par * Returns: TRUE if successful, else FALSE\par *\par ***************************************************************/\par \par BOOLEAN LoadDocument (documentPtr dPtr)\par \par \{\par RefNumRecGS clRec;                      /* CloseGS record */\par OpenRecGS opRec;                        /* OpenGS record */\par IORecGS rdRec;                          /* ReadGS record */\par GrafPortPtr port;                       /* caller's GrafPort */\par Rect r;                                 /* our port rect */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 BOOLEAN success;                        /* was the operation successful? */\par \par success = TRUE;                         /* assume we will succeed */\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 opRec.pCount = 12;                      /* open the file */\par HLock(dPtr->pathName);\par opRec.pathname = (GSString255Ptr) (((long) (*(dPtr->pathName))) + 2);\par opRec.requestAccess = 1;\par opRec.resourceNumber = 0;\par opRec.optionList = NULL;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 OpenGS(&opRec);\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (toolerror() != 0) \{\par    FlagError(4, toolerror());\par    success = FALSE;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 else \{\par    dPtr->pictureHandle =                /* allocate memory for the file */\par       NewHandle(opRec.eof, userid(), 0x8000, NULL);\par    if (toolerror() != 0) \{\par       FlagError(2, toolerror());\par       success = FALSE;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    else \{\par       rdRec.pCount = 4;                 /* read the file */\par       rdRec.refNum = opRec.refNum;\par       rdRec.dataBuffer = *(dPtr->pictureHandle);\par       rdRec.requestCount = opRec.eof;\par       ReadGS(&rdRec);\par       if (toolerror() != 0) \{\par          FlagError(4, toolerror());\par          success = FALSE;\par          DisposeHandle(dPtr->pictureHandle);\par          dPtr->pictureHandle = NULL;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20          \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20       else \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20          HUnlock(dPtr->pictureHandle);  /* let the data move in memory */\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20          port = GetPort();              /* force an update */\par          SetPort(dPtr->wPtr);\par          GetPortRect(&r);\par          InvalRect(&r);\par          SetPort(port);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20          \}\par       \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    clRec.pCount = 1;                    /* close the file */\par    clRec.refNum = opRec.refNum;\par    CloseGS(&clRec);\par    \}\par HUnlock(dPtr->pathName);                /* unlock the name handle */\par \par return success;                         /* return the success flag */\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-7:  Subroutine to Load a File\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk42}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 files\:reading}{\rxe bk42}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Writing a File}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Writing a File\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk43}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Writing a file follows pretty much the same pattern as reading one, with one exception.  The }{\f6\fs20 OpenGS}{\f4  call assumes that a file exists; it won\rquote t create one.  Instead, if the file doesn\rquote t exist, you start out by creating one.  Just to keep things interesting, creating a file will fail if the file already exists, so we have to start by deleting any file that already happens to be on the disk.\par Here\rquote s the procedure we will use to save a file:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DestroyGS}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Use }{\f6\fs20 DestroyGS}{\f4  to delete any file that happens to exist.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CreateGS}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 2.\tab Use }{\f6\fs20 CreateGS}{\f4  to create a new file.  If }{\f6\fs20 DestroyGS}{\f4  failed for some reason (like a locked file) this call will also fail, and we\rquote ll bail out of the save subroutine.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenGS}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 3.\tab Call }{\f6\fs20 OpenGS}{\f4  to open the file.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 WriteGS}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 4.\tab Call }{\f6\fs20 WriteGS}{\f4  to write the file.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseGS}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 5.\tab Call }{\f6\fs20 CloseGS}{\f4  to close the file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par While this is a fairly simple way to handle saving the file, there is another strategy you might want to consider.  If you are saving a change to an existing file, it\rquote s possible (unlikely, but possible) to get an error after deleting the original file, but before the new information is safely on a disk.  One way to avoid this problem is to save the file first, using some temporary file name, then delete the original file, and finally rename the new one.  There are two disadvantages to this scheme.  The minor one is that it\rquote s a little harder to implement than the way I\rquote ve outlined.  Since we package all of our ideas in neat subroutines that can be moved from program to program, though, this is only a minor problem.  No matter how hard it is, we only have to do it once \endash  after that, we can just copy our old subroutine.  The main problem is that you can easily fill a disk while you are saving the new file.  In fact, if the file you are saving is more than half the size of the capacity of the disk, you can\rquote t save a change to a file at all, since two copies will exist on the disk right before the original is deleted.  That may or may not be a problem, depending on the program you are writing.  In any case, we\rquote ll stick to the simple method here.\par Here\rquote s the declarations for }{\f6\fs20 DestroyGS}{\f4 , the GS/OS call to delete a disk file, along with its structure:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct NameRecGS \{\par    Word pCount;\par    GSString255Ptr pathname;\par    \} NameRecGS, *NameRecPtrGS;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DestroyGS}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 void DestroyGS (NameRecGS *parms);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-8:  }{\f6\fs20 DestroyGS}{\f4  and the }{\f6\fs20 NameRecGS}{\f4  Structure\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This call just needs the name of the file to delete from the disk; you pass the same file name you passed for }{\f6\fs20 OpenGS}{\f4  in the last section.  There are three possibilities.  First, the file might not exist at all.  This could happen if we are saving a new file for the first time, or if we are saving a file to a new location.  Either way, the }{\f6\fs20 DestroyGS}{\f4  call will fail, and we simply ignore that fact.  If the file already exists, the most likely possibility is that the }{\f6\fs20 DestroyGS}{\f4  call will delete the file, making room for the new copy we are about to save.  The third possibility is that the file exists, but for some reason can\rquote t be deleted.  The reason a file can\rquote t be deleted is usually because it is locked, but there might be a disk error of some sort.  Either way, the }{\f6\fs20 DestroyGS}{\f4  call will fail.  We can safely ignore this possibility, since the next call to create a file will also fail.  In short, we just take a stab at deleting the file \endash  whatever happens is OK!\par The next call is a bit more complicated.  The }{\f6\fs20 CreateGS}{\f4  call, shown in Listing 6-9 with its parameter record, is used to create a new file on disk.\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct CreateRecGS \{\par    Word pCount;\par    GSString255Ptr pathname;\par    Word access;\par    Word fileType;\par    LongWord auxType;\par    Word storageType;\par    LongWord eof;\par    LongWord resourceEOF;\par    \} CreateRecGS, *CreateRecPtrGS;\par }\pard \li180\widctlpar\adjustright {\f6\fs20 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CreateGS}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 void CreateGS (CreateRecGS *parms);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-9:  }{\f6\fs20 CreateGS}{\f4  and the }{\f6\fs20 CreateRecGS}{\f4  Structure\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par We need to set up the first six parameters, through }{\f6\fs20 storageType}{\f4 , to create the output file.  The last two parameters \endash  }{\f6\fs20 eof}{\f4  and }{\f6\fs20 resourceEOF}{\f4  \endash  are used to set aside space for a file.  In almost all cases, it\rquote s better to let the operating system figure that out for itself, so that\rquote s what we will do.\par Running through the parameters that we actually need to set, }{\f6\fs20 pCount}{\f4  should be set to 5.  The }{\f6\fs20 pathname}{\f4  parameter is again a pointer to the name of the file to create; since it can be a full path name, we can safely pass the same path name we use to open or delete the file.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 locked files}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 files\:locked}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 access}{\f4  parameter tells GS/OS who should have access to a file.  This flags word should be set to 0xC3, which tells GS/OS to allow deleting, renaming, reading and writing, and to make the file visible.  I won\rquote t go over the various bit flags here, but if you want to disable any of these options, you can check out the complete documentation for the }{\f6\fs20 CreateGS}{\f4  call in Appendix A.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 auxiliary file type}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 fileType}{\f4  and }{\f6\fs20 auxType}{\f4  parameters are the file type and auxiliary file type you want to use for the file.  File types and auxiliary file types are assigned by Apple Computer.  In a lot of cases, there will already be a file type for the file format you want to use.  For example, if you are saving a picture, there are several predefined file formats you can pick from, and you would use the file type and auxiliary file type for that format.  If you need to create a completely new type of file, you can apply for a file type assignment from Apple Computer.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource fork}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 data fork}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 directories}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last of the parameters we\rquote ll use is }{\f6\fs20 storageType}{\f4 , which controls the kind of file we\rquote re creating.  For the normal kinds of data files we will create in this course, the value should be 1.  The other common options are 13, which tells GS/OS we want to create a new folder, and 5, which creates a file that has both a data fork and a resource fork.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenGS}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 After creating the file, we need to open it.  The only difference between opening a file for output and opening one for input, like you did in the last section, is that the }{\f6\fs20 requestAccess}{\f4  parameter in the }{\f6\fs20 OpenRecGS}{\f4  structure should be set to 2 to get write access, instead of 1, which gave us read access.  The }{\f6\fs20 pCount}{\f4  parameter can also be set to 3, since we\rquote re just using the first 3 parameters, this time.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 WriteGS}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Writing the file is also very similar to reading one.  The only different is the obvious one:  we tell GS/OS where the bytes to write start, and how many bytes to write, rather than telling GS/OS where to put the bytes, and how many bytes to read.  In fact, as you can see in Listing 6-10, the parameter block we pass for a }{\f6\fs20 WriteGS}{\f4  call is even the same as the parameter for a }{\f6\fs20 ReadGS}{\f4  call.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 typedef struct IORecGS \{\par    Word pCount;\par    Word refNum;\par    Pointer dataBuffer;\par    LongWord requestCount;\par    LongWord transferCount;\par    Word cachePriority;\par    \} IORecGS, *IORecPtrGS;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 WriteGS}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 void WriteGS (IORecGS *parms);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-10:  }{\f6\fs20 WriteGS}{\f4  and its Structure\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There is one touchy issue with writing a file that we didn\rquote t have to worry about when we read it.  When an error occurs at this point, it is usually because the disk is full.  After all, if the disk is locked or completely hosed, we probably would have had trouble with the }{\f6\fs20 CreateGS}{\f4  call.  If the disk doesn\rquote t have enough room to write the entire file, GS/OS will write as much of the file as it can, then return both the number of bytes written (in }{\f6\fs20 transferCount}{\f4 ) and an error code.  The touchy point is what your program does then.  For a program that is writing a text file, it might be best to leave the file there, just in case the poor user doesn\rquote t have another disk to put the file on.  At least that way he won\rquote t loose the }{\i\f4 entire}{\f4  file.  For a file that has a very delicate format with a lot of interdependencies, like a linked database, it might be better to delete the entire file, and force the user to either rush out any buy a new box of disks, or cut out some information and resave the file.\par The last step is to close the file.  That\rquote s done exactly the same way the file was closed after reading it.\par Listing 6-11 pulls all of this together into a subroutine you can use in your programs.  It assumes you have added error message 5, \ldblquote File write error\rdblquote , to the list of error messages in your resource fork.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * SaveDocument\par *\par * Save a document file to disk\par *\par * Parameters:\par *    dPtr - pointer to the document to save\par *        \par ***************************************************************/\par \par void SaveDocument (documentPtr dPtr)\par \par \{\par RefNumRecGS clRec;                      /* CloseGS record */\par CreateRecGS crRec;                      /* CreateGS record */\par NameRecGS dsRec;                        /* DestroyGS record */\par OpenRecGS opRec;                        /* OpenGS record */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 IORecGS wrRec;                          /* WriteGS record */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 HLock(dPtr->pathName);                  /* lock the path name */\par dsRec.pCount = 1;                       /* destroy any old file */\par dsRec.pathname = (GSString255Ptr) (((long) (*(dPtr->pathName))) + 2);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 DestroyGS(&dsRec);\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 crRec.pCount = 5;                       /* create a new file */\par crRec.pathname = (GSString255Ptr) (((long) (*(dPtr->pathName))) + 2);\par crRec.access = 0xC3;\par crRec.fileType = 0xC1;\par crRec.auxType = 0;\par crRec.storageType = 1;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 CreateGS(&crRec);\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (toolerror() != 0)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    FlagError(5, toolerror());\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 else \{\par    opRec.pCount = 3;                    /* open the file */\par    opRec.pathname = (GSString255Ptr) (((long) (*(dPtr->pathName))) + 2);\par    opRec.requestAccess = 2;\par    OpenGS(&opRec);\par    if (toolerror() != 0)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       FlagError(5, toolerror());\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    else \{\par       wrRec.pCount = 4;                 /* write the file */\par       wrRec.refNum = opRec.refNum;\par       HLock(dPtr->pictureHandle);\par       wrRec.dataBuffer = (Pointer) (*(dPtr->pictureHandle));\par       wrRec.requestCount = 0x8000;\par       WriteGS(&wrRec);\par       if (toolerror() != 0)\par          FlagError(5, toolerror());\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       HUnlock(dPtr->pictureHandle);\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20       clRec.pCount = 1;                 /* close the file */\par       clRec.refNum = opRec.refNum;\par       CloseGS(&clRec);\par       \}\par    \}\par HUnlock(dPtr->pathName);                /* unlock the name handle */\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-11:  Subroutine to Save a File\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk43}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 files\:writing}{\rxe bk43}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Screen Dumps}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Screen Dumps\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 screen dumps}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pictures}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 graphics}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are several formats for pictures, but one of the simplest is a screen dump.  This file format is literally a copy of the graphics screen with a picture on the screen.  In this section, we\rquote ll look at this format for a file and learn about a QuickDraw II call that can quickly draw the picture.  In the problem at the end of the section you will finally get a chance to put the file input and output routines to work to create a slide show program.\par A screen dump file has a file type of 0xC1 with an auxiliary file type of 0.  There are three parts to the file: a bit map of the picture itself, a series of color tables that tells the computer which of the possible 4096 colors to use when displaying the picture, and a set of flag values that give some very specific hardware related information about each line that is displayed on the screen.  These last two parts of the file are pretty hard to understand right now, so we\rquote ll ignore them until we get to the lesson on QuickDraw II.\par The picture comes first in the file.  A picture is organized as a series of 200 lines, starting from the top of the screen and moving down.  Each line contains 160 bytes, organized as two pixels per byte for 640 mode pictures, and four pixels per byte for 320 mode pictures.  A pixel is one colored dot on the screen.  If you know enough about binary math to understand how the bits are organized in a byte, this probably makes a lot of sense.  After all, in 320 mode you have 16 distinct colors available, and you need four bits to represent 16 values.  That gives you two pixels to the byte, or 160 bytes for an entire 320 pixel scan line.  In 640 mode, you only get four colors per pixel, which means you need two bits per pixel, and you can stuff four pixels in a byte.  If you don\rquote t know much about binary math, don\rquote t get to worried about all of this just yet.  You don\rquote t have to know anything about the organization of bits or pixels to draw a picture, and we\rquote ll come back to all of this in gory detail when we talk about QuickDraw II.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PPToPort}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 After you load one of these picture files into memory, the first byte of the file you loaded is also the first byte of the picture.  The fastest and easiest way to draw the picture is to use QuickDraw II\rquote s }{\f6\fs20 PPToPort}{\f4  call.  }{\f6\fs20 PPToPort}{\f4  stands for Paint Pixels to Port, and that\rquote s just what it does.  }{\f6\fs20 PPToPort}{\f4  takes the entire picture and draws it in the active port.  In the process, it clips the picture so it doesn\rquote t draw outside of the window, and if you ask it to, }{\f6\fs20 PPToPort}{\f4  can even scale the picture, changing its shape to match the space that\rquote s available.  It\rquote s all a bit messy, but then you can do quite a lot with }{\f6\fs20 PPToPort}{\f4 .\par Here\rquote s a prototype call to }{\f6\fs20 PPToPort}{\f4 , with names for the various parameters:\par \par }{\f6\fs20 PPToPort(srcLocInfo, srcRect, destX, destY, transferMode);\par }{\f4 \par The first parameter is the most complex; it\rquote s a structure that tells QuickDraw II a lot about the picture it is supposed to draw.  The structure is defined like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LocInfo}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct LocInfo \{\par    Word portSCB;                        /* SCBByte in low byte */\par    Pointer ptrToPixImage;               /* ImageRef */\par    Word width;                          /* Width */\par    Rect boundsRect;                     /* BoundsRect */\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct LocInfo LocInfo, *LocInfoPtr, **LocInfoHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first parameter is a bit mask that tells QuickDraw II, among other things, whether we are drawing a 640 mode picture or a 320 mode picture.  QuickDraw II gets pretty upset if you try to draw a 320 mode picture to a 640 mode screen, or vice versa, but it also trusts you \endash  so we\rquote ll lie.  When you are drawing to a 640 mode screen, set }{\f6\fs20 portSCB}{\f4  to 0x80; for 320 mode pictures use a value of 0x00.  Later in the course we\rquote ll cover this byte in more detail.\par The next parameter is a pointer to the first byte of the picture.  Set }{\f6\fs20 ptrToPixelImage}{\f4  to the first byte of the picture file.\par The }{\f6\fs20 width}{\f4  parameter tells }{\f6\fs20 PPToPort}{\f4  how long each line is, in bytes.  Our lines are 160 bytes long, so we set  }{\f6\fs20 width}{\f4  to 160.\par The last parameter is a rectangle that gives the size for the entire pixel image.  For a screen dump, this would be a rectangle with the top left point at 0,0, and the bottom right point at either 320,200 or 640,200, depending on the screen resolution.\par The next parameter to }{\f6\fs20 PPToPort}{\f4  is }{\f6\fs20 srcRect}{\f4 , which is the rectangle to draw into.  The obvious choice is to set this rectangle to the same size we used in the structure describing the picture, and that\rquote s what you would normally do.  In fact, you can just pass }{\f6\fs20 boundsRect}{\f4 , from the }{\f6\fs20 LocInfo}{\f4  structure.  If this rectangle is half the size of the original, though, the }{\f6\fs20 PPToPort}{\f4  call will squeeze the picture down to fit in the new rectangle.  You can stretch the picture by increasing the size of the rectangle.\par The next two parameters, }{\f6\fs20 destX}{\f4  and }{\f6\fs20 destY}{\f4 , tell where in the port to draw the picture.  We\rquote re letting }{\f6\fs20 TaskMaster}{\f4  handle scrolling for us, and }{\f6\fs20 TaskMaster}{\f4  will move the origin of our window around to handle scrolling, so all we have to do is pass 0,0.  If you wanted to draw the picture in the middle of the window you could set these parameters to some other value.\par Finally, you have to tell }{\f6\fs20 PPToPort}{\f4  which drawing mode to use.  For now we\rquote ll stick with }{\f6\fs20 modeCopy}{\f4 , which is what you\rquote ve been using all along.\par Here\rquote s a short subroutine that pulls this information together.  This subroutine is set up as an update subroutine, so you can use it as a drop-in replacement for the update subroutine you\rquote ve used in Frame.  All you have to do is make sure the document structure defines the name of the handle for the file you load as }{\f6\fs20 pictureHandle}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DrawContents\par *\par * Draw the contents of the active port\par *\par ***************************************************************/\par \par #pragma databank 1\par \par void DrawContents (void)\par \par \{\par documentPtr dPtr;                       /* document to draw */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 LocInfo info;                           /* record for PPToPort */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 dPtr = FindDocument(GetPort());\par if (dPtr != NULL) \{\par    HLock(dPtr->pictureHandle);\par    info.portSCB = 0x00;\par    info.ptrToPixImage = *(dPtr->pictureHandle);\par    info.width = 160;\par    info.boundsRect.h1 = 0;\par    info.boundsRect.h2 = 320;\par    info.boundsRect.v1 = 0;\par    info.boundsRect.v2 = 200;\par    PPToPort(&info, &info.boundsRect, 0, 0, modeCopy);\par    HUnlock(dPtr->pictureHandle);\par    \}\par \}\par \par #pragma databank 0\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 6-12:  Update Subroutine for Drawing a Picture\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 6-4:  Create a slide show program, starting with the version of Frame from Problem 6-2.  You program should use GS/OS to load the picture file, and it should also let the user save the file to a new name.  Since you can\rquote t create new pictures, your program should not have New as an option in the File menu.  Finally, the program should use 320 mode graphics.\par You can test your program with any screen dump format picture.  If you don\rquote t have any others handy, you can load one of the pictures from the Pictures folder on the solution disks.\par Be sure and test the About box with your program.  You\rquote ve switched screen resolutions, and that changes the size of your alerts.  (The size is adjusted automatically by }{\f6\fs20 AlertWindow}{\f4 , but you should check the new size to make sure it looks nice.)  Of course, you\rquote ll also have to change the size of the window in your }{\f6\fs20 rWindParam1}{\f4  resource.  If you forget, your window will be just a tad too wide for the 320 mode screen!\par {\*\bkmkend bk44}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GS/OS}{\rxe bk44}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson showed how to use the Standard File Operations Tool Set to get file names for reading and writing files.  You learned two ways to load and save these files: using C\rquote s standard input and output functions, or calling the GS/OS disk operating system directly.  Along the way, Frame has been updated to handle SFO.  While they aren\rquote t a part of the Frame program, you also have two subroutines that can be dropped into a program to read or write files using GS/OS.\par The last problem in this lesson is also our first really useful program.  It\rquote s a slide show program that lets you load as many screen dump format pictures as you like, displaying the pictures in multiple windows.  You can even create a copy of a picture by saving it to a new name using the Save As... command.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 CloseGS\tab CreateGS\tab DestroyGS\tab DisposeHandle\par HLock\tab HUnlock\tab NewHandle\tab OpenGS\par PPToPort\tab ReadGS\tab SetWTitle\tab SFGetFile2\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 SFPutFile2\tab WriteGS\par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 7 \endash  Move Over Guttenberg}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 7 \endash  Move Over Guttenberg}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 7 \endash  Move Over Guttenberg\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk46}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson shows how to use the Print Manager to print anything you can draw in a window.  We also add printing to Frame, our framework program that will be the basis for most of the programs in the book.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 How the Print Manager Works}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 How the Print Manager Works\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Printing could have been really hard on the Apple II}{\f4\fs20 GS}{\f4 .  After all, virtually every desktop program has to print graphic images, not the simple text you would expect from a program on an IBM PC or a text-based Apple II.  Printing text is hard enough, but with graphics you have to know how to address the individual bits on each and every printer someone might try to hook up to their Apple II}{\f4\fs20 GS}{\f4 .  Apple\rquote s Print Manager takes over the job of figuring out what sort of printer is hooked up to the computer \endash  whether it can print color or just black and white, how many individually addressable dots there are in each direction, and how big the paper is.  All you have to do is bring up a few dialogs to let the user pick options, and when the time comes, draw to the printer just like you would draw to a window.\par There\rquote s a lot of information that the user can pick to control the printing process \endash  things like whether they want a full color image, whether the image should be printed normally or in landscape mode, and a host of smaller details.  Of course, no one wants to pick all of those details each time something is printed.  Well, maybe not all of them.  Things like how many copies are printed should at least be pointed out each time a document is printed.  You wouldn\rquote t want to get forty copies of something by mistake because forty copies were printed the last time!\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printer\:choosing}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 To handle this varying level of detail, the Print Manager actually uses three distinct levels of dialogs.  The first level is something you don\rquote t even worry about.  It\rquote s possible to have more than one printer hooked up to an Apple II}{\f4\fs20 GS}{\f4  \endash  mine is hooked up to two LaserWriters over a network, and generally to an ImageWriter on my desk.  When I pick out a printer, it\rquote s something that I generally only do once, and then I use the same printer all of the time.  The same thing would be true if you have just one printer hooked up.  You want to tell your computer what sort of printer it is, and what printer port it is plugged into, just once.  After that, every single application should be able to find out about the printer you\rquote ve picked.  That first level of information is selected from the Control Panel.  You and your program don\rquote t do anything at all.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 page setup dialog}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The next level of information is the sort of stuff you want to do one time for each document, and then leave it pretty much the same after that.  For example, if you\rquote re using a paint program to create a picture, you\rquote re may want to print the picture in portrait mode or landscape mode, but you\rquote re probably not going to switch between the two for the same picture.  This second level of information is done with the page setup dialog.  The Print Manager will handle all of the details for you, even using a different page setup dialog for each kind of printer.  You do have to get involved, though, even if it\rquote s just a little bit.  You have to make a Print Manager call to draw the dialog.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 print job dialog}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last level of information is the sort of information that could change each time a document is printed, like the number of copies that will print, and whether the document should be printed quickly with low quality output; or whether the document is finished, so it\rquote s worth the time to let the printer do the best job it can.  This is in the print job dialog.  Like the page setup dialog, it\rquote s something you have to ask the Print Manager to do, but the Print Manager will draw the dialog and figure out what happens for you.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 print record}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 That\rquote s a lot of information to remember about how to print something, and some of that information should be remembered for the lifetime of the document.  The Print Manager uses a chunk of memory called a print record to remember all of this information.  The print record is something you create when the document is first created with the New command.  Normally, you would save the print record right along with the document, loading it and asking the Print Manager to check it for accuracy each time the document itself is loaded.  That way, if the user picks landscape mode printing today, your program will be smart enough to print the document the same way tomorrow.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The rest of this lesson covers the mechanics of making all of this happen, as well as outlining the print loop which actually prints the information.  You\rquote ll get to add printing to two programs: Frame, so you can put it in all of your future programs with a minimum of hassle; and the slide show program you wrote as part of a problem in the last section, so it becomes not just a slide show program, but a picture printing program.  Incidentally, this finishes Frame.  After this lesson, all of the things you learn will be a lot more specific to the kind of program you are writing.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Starting the Tools (Again)}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Starting the Tools (Again)\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Well, after all that, the first call we\rquote ll talk about isn\rquote t even in the Print Manager.  You see, there\rquote s a minor problem with the Print Manager.  It isn\rquote t started by }{\f6\fs20 startdesk}{\f4 , the quick and dirty tool start up subroutine built into ORCA/C, so we need to start the Print Manager for ourselves.  We\rquote ll face the same problem later in the course with tools like TextEdit, so it\rquote s a topic I though we should cover fairly carefully.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 starting tools}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tools\:starting}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resources}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 startdesk}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Back before System 5.0, starting tools was a piecemeal process.  Each tool had to be started individually, and many of them had specific requirements.  A very common one was the need for a chunk of direct page memory.  Getting over this initial hurdle was pretty hard for a beginning toolbox programer, and that\rquote s why I put }{\f6\fs20 startdesk}{\f4  into ORCA/C.  Well, Apple must have agreed with me, because there is a nifty new tool call in the toolbox starting with System Disk 5.0 that starts the tools almost as smoothly as }{\f6\fs20 startdesk}{\f4 .  It had a major problem, though: for programs that used resources, Apple\rquote s }{\f6\fs20 StartUpTools}{\f4  call didn\rquote t work correctly from a programming environment like ORCA.  This problem has been fixed starting with System Disk 6.0, so there\rquote s no reason at all not to take advantage of all of the help }{\f6\fs20 StartUpTools}{\f4  gives us.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ShutDownTools}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 StartUpTools}{\f4  needs two things from us: a user ID, so it knows who owns the memory it allocates for the tools that need it; and a record containing a list of the tools you want started.  The record also has a few other details, like whether you want to use 320 mode or 640 mode.  It passes back a value which you\rquote ll pass to }{\f6\fs20 ShutDownTools}{\f4  when your program quits.  Here\rquote s the code you need:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 Ref startStopParm;                      /* tool start/shutdown parameter */\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 startStopParm =                         /* start up the tools */\par    StartUpTools(userid(), 2, 1);\par if (toolerror() != 0)\par    /* handle the error here */\par \par ...\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ShutDownTools}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 ShutDownTools(1, startStopParm);        /* shut down the tools */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 7-1A:  Using }{\f6\fs20 StartUpTools}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rToolStartup resource}}}{\v\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 type rToolStartup (1) \{\par    mode640;                    /* mode to start QuickDraw */\par       \{\par       1,$0300,                 /* Tool number, version */\par       \};\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 7-1B:  The }{\f6\fs20 rToolStartup}{\f4  Resource\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ShutDownTools}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As you can see, one way to give }{\f6\fs20 StartUpTools}{\f4  a list of tools is with a resource, and that\rquote s the method we\rquote ll use.  That second parameter of a 2 to }{\f6\fs20 StartUpTools}{\f4  tells }{\f6\fs20 StartUpTools}{\f4  that the last parameter is a resource ID for an }{\f6\fs20 rToolStartup}{\f4  resource.  If you would rather use a structure that\rquote s built inside of your program, you can check out the complete description of the tool call in the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 .\par }{\f6\fs20 StartUpTools}{\f4  returns a handle to a record that you need to pass along to }{\f6\fs20 ShutDownTools}{\f4  when your program quits.  That parameter has to be stored in a safe, global variable so you can get to it at the proper time.  The first parameter to }{\f6\fs20 ShutDownTools}{\f4  tells it that the second parameter is a handle; the other possibility is a pointer, which you would only use if you are setting up the record manually.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SysFailMgr}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Of course, it is possible for }{\f6\fs20 StartUpTools}{\f4  to fail.  One of the tools you ask for might not be on the boot disk, or there might not be enough direct page memory left, or there might be a disk error, or...  well, a lot could go wrong.  No matter what does happen, though, your program is left in the lurch.  You can\rquote t go on, since you don\rquote t have all of the tools available, and you can\rquote t even tell the user what happened, since the tools you use to put up an alert may not be going.  Handling this error is a tough one, and the only reliable way to do it is with a Miscellaneous Tool Set call called }{\f6\fs20 SysFailMgr}{\f4 .  This tool call prints a message and a number, then displays that familiar sliding apple, completely shutting down the machine until the computer is rebooted.  That\rquote s a horribly drastic action for your program to take, but the only other possibility is to just exit, without even telling the user why you quit, and that\rquote s even worse.\par Here\rquote s a call you could use for this rather severe error:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SysFailMgr(toolerror(), "\\pCould not start tools: ");\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first parameter is the error number, while the second is the message you want to put on the screen.  The message is a p-string, so if you\rquote re using a string constant, be sure to include the }{\f6\fs20 \\p}{\f4  to generate the p-string length byte.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Just for fun, when you\rquote re working the first problem, be sure and fake a tool start up error. It\rquote s a good idea to test your program in sensitive places like this anyway, so you can make sure errors are handled properly, and it also lets you see exactly what you\rquote re doing to the user.\par The only other topic we need to cover before we get back to the Print Manager is the tool numbers and versions for the various tools used in this course.  Table 7-1 shows the tools, their tool numbers, and the version numbers as of System Disk 6.0.  Some tools depend on other tools, too.  For example, the Print Manager uses the Dialog Manager to create the various printer dialogs.  The table shows the tools you need to start to use a particular tool in the last column.\par If there is a more recent system disk, or if your program needs to work with older system disks, you will have to check the release notes for the system disk or use a program like NiftyList to find the version numbers.\par \par }\pard \qj\fi-5400\li5760\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1800\tx3240\adjustright {\f4 tool number\tab tool version\tab tool name\tab depends on...\par }\pard \qj\fi-5400\li5760\keepn\widctlpar\tx1800\tx3240\adjustright {\f4 1\tab 3.1\tab Tool Locator\par 2\tab 3.2\tab Memory Manager\tab 1\par 3\tab 3.2\tab Miscellaneous Tool Set\tab 1, 2\par 4\tab 3.7\tab QuickDraw II\tab 1, 2, 3\par 5\tab 3.4\tab Desk Manager\tab 1, 2, 3, 4, 6, 14, 15, 16, 20, 21, 22\par 6\tab 3.1\tab Event Manager\tab 1, 2, 3\par 8\tab 3.3\tab Sound Tool Set\tab 1, 2, 3\par 11\tab 3.0\tab Integer Math Tool Set\tab 1\par 14\tab 3.3\tab Window Manager\tab 1, 2, 3, 4, 6, 15, 16, 20, 27, 30\par 15\tab 3.3\tab Menu Manager\tab 1, 2, 3, 4, 6, 14, 16, 30\par 16\tab 3.3\tab Control Manager\tab 1, 2, 3, 4, 6, 14, 15, 30\par 18\tab 3.4\tab QuickDraw II Auxiliary\tab 1, 2, 3, 4, 27\par 19\tab 3.1\tab Print Manager\tab 1, 2, 3, 4, 6, 14, 15, 16, 18, 20, 21, 27, 28\par 20\tab 3.3\tab LineEdit Tool Set\tab 1, 2, 3, 4, 6, 18, 22, 27\par 21\tab 3.4\tab Dialog Manager\tab 1, 2, 3, 4, 6, 14, 15, 16, 18, 20, 27\par 22\tab 3.1\tab Scrap Manager\tab 1, 2\par 23\tab 3.3\tab Standard File Operations\tab 1, 2, 3, 4, 6, 14, 15, 16, 20, 21\par 25\tab 1.4\tab Note Synthesizer\tab 1, 2, 8\par 27\tab 3.3\tab Font Manager\tab 1, 2, 3, 4, 11, 14, 15, 16, 20, 21, 28\par 28\tab 3.3\tab List Manager\tab 1, 2, 3, 4, 6, 14, 15, 16\par 30\tab 1.2\tab Resource Manager\tab 1\par 34\tab 1.3\tab TextEdit Tool Set\tab 1, 3, 4, 6, 14, 15, 16, 18, 22, 27, 30\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tool numbers}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tool versions}}}{\v\f4 \par }{\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 7-1:  Tools }{\f6\fs20 StartUpTools}{\f4  Can Start\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The Tool Locator, Memory Manager and Resource Manager are started automatically, and don\rquote t need to be listed.  As a general rule, you should start all of the other tools except the Sound Tool Set, Print Manager, Note Synthesizer and TextEdit Tool Set for every program.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Frame}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Problem 7-1:  Change Frame so it uses }{\f6\fs20 StartUpTools}{\f4  to start all of the tools checked in Table 7-1.  Use }{\f6\fs20 SysFailMgr}{\f4  to handle any errors reported by }{\f6\fs20 StartUpTools}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Getting a Print Record}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Getting a Print Record\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 print record}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Getting back to the Print Manager, the first thing we have to do is allocate a print record.  The print record needs to be a handle, and it needs to be 140 bytes long.  Since you need a print record in every document, it makes sense to allocate one when you create the document record and open the window.\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 dPtr->prHandle = NewHandle(140, userid(), 0, NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrDefault}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 What you do with this record depends on whether or not you are creating the record for a new document or opening an existing one that will get a print record from the document\rquote s file.  If you are creating a new print record, you need to fill in the print record with default values for all of the fields.  }{\f6\fs20 PrDefault}{\f4  does that for you; you should probably call it in the subroutine you have hooked up to handle the menu command New.\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 PrDefault(dPtr->prHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrValidate}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you are opening a file that has a print record, the natural thing to do is to fill in the print record from the file.  That\rquote s fine as far as it goes, but the print record might have been created for a different printer, or even for a different version of the Print Manager that had slightly different requirements.  Either way, you need to give the Print Manager a chance to check all of the information in the print record; you do that like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 PrValidate(dPtr->prHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If the Print Manager finds any problems with the print record, it updates the print record before returning.  Problems could occur for all sorts of reasons.  The most common is that the user picked a new printer.  }{\f6\fs20 PrValidate}{\f4  returns a boolean result that tells you if the print record was changed.  If so, you might want to set a \ldblquote changed\rdblquote  flag in your document record to make sure the user gets a chance to save the document with the new print record, even if there are no other changes.  Then again, you might feel like I do.  I figure the same call will be made the next time the document is opened, and the user isn\rquote t likely to know or care about a change that happens automatically, behind their back.  I just ignore the result.\par It\rquote s possible to get errors back from any of these calls, so you need to handle those appropriately.  I think one good way to handle errors here is to flag the error using our normal error handler, then dispose of the print record (if it was even allocated) and set the handle to }{\f6\fs20 NULL}{\f4 .  Later, you can check to see if there is a valid print record before trying to print.  That lets the user of the program keep going, even if there is some problem with printing.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Page Setup Dialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Page Setup Dialog\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 page setup}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrStlDialog}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are two menu commands that every program using the Print Manager should include in the File menu.  The first is \ldblquote Page Setup...\rdblquote , and the second is \ldblquote Print...\rdblquote   The Page Setup command calls }{\f6\fs20 PrStlDialog}{\f4  to let the user pick out that second level information we talked about earlier; things like whether the page is in portrait or landscape mode.  The call is pretty simple:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 dPtr->changed = dPtr->changed || PrStlDialog(dPtr->prHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The call returns a flag, just like }{\f6\fs20 PrValidate}{\f4 , that tells whether or not changes were actually made.  For }{\f6\fs20 PrValidate}{\f4 , I mentioned that I normally throw the flag away, since the user doesn\rquote t really know we are calling }{\f6\fs20 PrValidate}{\f4 , anyway.  This time, though, the user picked a specific menu command to make specific changes to a document, so I think it\rquote s appropriate to make sure the changes get saved.  If you aren\rquote t saving the print record with the document, though, you should still throw the value away, and not set the document\rquote s changed flag.\par You might notice that there\rquote s no figure here telling you what the dialog looks like.  There are two very good reasons for that.  The first is that the dialog is different for different printers and different versions of the Print Manager, so you\rquote d have to check the program to see what was happening, anyway.  The most important reason, though, points out one of the neat things about the way the toolbox works:  }{\i\f4 we don\rquote t care what the dialog looks like!}{\f4   Oh, sure, the user cares, but as a programmer, it just doesn\rquote t matter to us.  The Print Manager worries about all of the details, and fills in the print record for us.  All we really care about are a few fields in the print record itself.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Print Dialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Print Dialog\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 print dialog}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last of the dialogs is the one that lets the user pick things that will change from one time the document is printed to the next, like the number of copies that will be printed.  This is the first step you take when the user picks the Print command from the File menu.  The second step, of course, is to actually print the document.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrJobDialog}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Like the other calls that set up information in the print record, }{\f6\fs20 PrJobDialog}{\f4  takes the print record as a parameter, and returns a boolean result.  If the result is }{\f6\fs20 TRUE}{\f4 , the user picked out some options and asked you to print the document; if the result is }{\f6\fs20 FALSE}{\f4 , you don\rquote t do anything.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 if (PrJobDialog(dPtr->prHandle))\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20    /* print the document */;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Dimming the Menus}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Dimming the Menus\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 human interface}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dimmed menus}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the nice things a program can do is to let the user know when a command is available, and when it can\rquote t be used.  Normally you will want to dim any menu command that isn\rquote t available.  That\rquote s not something I\rquote ve made a big deal about so far, since most of our programs have been frameworks for future programs, but now it\rquote s time to start thinking about when commands are available and when they are not.\par The idea is to dim a menu command when it can\rquote t be used, and undim it as soon as it can be used.  In the case of the print commands, that means the commands should be dim if there isn\rquote t an active document window, and they should not be dimmed if a window is open.  The big issue is actually when you dim or undim the menu items.\par There are a lot of ways to handle this, but let\rquote s talk about two: the obvious solution, and the one I hope you will use.  The obvious solution is to go into the program and insert a check where documents are created and closed, dimming or undimming the print commands then.  That works, but it makes the program very complicated.  It means that you have to think about each and every menu command, and pepper code throughout the program to turn menu commands on and off.  Let me make a very safe prediction: you\rquote ll mess it up.  This method is a sure-fire way to create bugs, and they\rquote ll be very hard to track down.\par Let\rquote s think about this another way.  Instead of peppering the code to handle dimming throughout the program, collect it all in one spot.  For each menu command that may need to be disabled, check the command in this one place for all of the possible conditions and either dim or undim the menu.  This way, if there is a bug, you know exactly where the problem is.\par Of course, you still need to call this subroutine.  In most cases, you can just put the subroutine in the event loop, right before the call to }{\f6\fs20 TaskMaster}{\f4 .  That way, if the event you just handled changed the status of the menus, the menu bar is updated before }{\f6\fs20 TaskMaster}{\f4  gets a shot at an event that might end up pulling down a menu.\par The obvious problem with this method is that it takes time, even if the menus don\rquote t need to be changed.  Well, sometimes that\rquote s important, and sometimes it isn\rquote t.  After all, most of the time spent in the event loop is just time spent waiting on the organic computer at the keyboard to do something, so checking the menu status is sort of the computer equivalent of twiddling your thumbs.  Time consuming work is done outside of the event loop, when the subroutines are called.  Still, maybe the time will be a factor.  To see, try commenting out the call to the subroutine during testing.  After all, you know when the commands are available, right?  If the program runs noticeably faster, go back and make the subroutine itself more efficient, or perhaps set it up so it only gets called when there\rquote s a null event.\par I doubt if you\rquote ll notice a speed difference, though.  At least, not in this program.  Later in the course, we\rquote ll write a program that is a little sensitive to this subroutine, and we\rquote ll make a few minor changes \endash  but only for that program.\par \par Problem 7-2:  Update Frame to handle the standard print dialogs.  You will need to add the menu commands \ldblquote Page Setup...\rdblquote  and \ldblquote Print...\rdblquote  to your File menu, calling subroutines to make the appropriate Print Manager calls in each case.  You should also set up Frame to create a print record and call }{\f6\fs20 PrDefault}{\f4 .  For now, assume that your program does not save the print record with a document, and set things up appropriately.\par Be sure the print commands are dimmed if no document is open.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Print Loop}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Print Loop\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\v\f4 {\*\bkmkstart bk45}\par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once the print record has been filled in by calls to the various Print Manager subroutines it\rquote s time to actually print the document.  The print loop is a little complicated, so we\rquote ll take it in stages.  Let\rquote s start by summarizing the entire print loop.  After that, we\rquote ll look at the various steps in detail, learning about several fields in the print record along the way.  Finally, we\rquote ll look at an actual print loop.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 spooling}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The print loop is broken up into two parts.  In the first part, you make the calls that actually draw to the printer port.  With some printers, it\rquote s possible to spool the printing.  Spooling means that the printing isn\rquote t actually done when you issue the various drawing commands; instead, all of the information is saved to a disk file, then the printing is done after you\rquote ve finished.  That\rquote s why there is a second part of the printing process.  After you\rquote ve finished with the drawing part of the loop, you need to tell the Print Manager it\rquote s time to open the spool file and actually start printing.  Of course, if spooled printing wasn\rquote t used, the Print Manager knows that and ignores the call.\par Here\rquote s an outline of the print loop:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrOpenDoc}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Call }{\f6\fs20 PrOpenDoc}{\f4  to tell the Print Manager to get ready to print.\par \par 2.\tab For each page in your document, do the following:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrOpenPage}}}{\v\f4 \par }\pard \qj\fi-360\li1080\widctlpar\adjustright {\f4 a.\tab Call }{\f6\fs20 PrOpenPage}{\f4  to get the Print Manager ready for a new page.\par \par b.\tab Draw the page, just as you would draw the information in a window.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrClosePage}}}{\v\f4 \par }\pard \qj\fi-360\li1080\widctlpar\adjustright {\f4 c.\tab Call }{\f6\fs20 PrClosePage}{\f4  to tell the Print Manager you\rquote re through with this page.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrCloseDoc}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 3.\tab Call }{\f6\fs20 PrCloseDoc}{\f4  to tell the Print Manager you\rquote re finished printing.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 spooling}}}{\v\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrError}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrPicFile}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 4.\tab Call }{\f6\fs20 PrError}{\f4  to see if there were any errors while printing.  If not, call }{\f6\fs20 PrPicFile}{\f4 , which will print the document if it was spooled.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Opening the Printer\rquote s GrafPort}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Opening the Printer\rquote s GrafPort\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GrafPort}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The first step in actually printing a document is to open a }{\f6\fs20 GrafPort}{\f4 .  Opening a }{\f6\fs20 GrafPort}{\f4  for the printer is a lot like opening a window in the sense that both of these actions give you someplace to draw.  The only difference from your perspective is how you open the }{\f6\fs20 GrafPort}{\f4  and how you go about finding out things like how big the drawing area is.  In both cases you use exactly the same drawing commands.  In fact, in a lot of programs, you might even call the same update routine you use to update the document window to draw to the printer\rquote s }{\f6\fs20 GrafPort}{\f4 .\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrOpenDoc}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You open a printer }{\f6\fs20 GrafPort}{\f4  with }{\f6\fs20 PrOpenDoc}{\f4 , like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 prPort = PrOpenDoc(dPtr->prHandle, NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The value returned is a }{\f6\fs20 GrafPortPtr}{\f4 , just like a window, so you declare }{\f6\fs20 prPort}{\f4  as a }{\f6\fs20 GrafPortPtr}{\f4 .  Naturally, one of the things you pass is the print record that has been set up by all of the Print Manager calls we\rquote ve talked about up to this point.  The last parameter is the }{\f6\fs20 GrafPortPtr}{\f4  you want to use; in almost all cases, you just pass }{\f6\fs20 NULL}{\f4 , telling }{\f6\fs20 PrOpenDoc}{\f4  to create a new }{\f6\fs20 GrafPort}{\f4  just for printing the document.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Page Sizes and Multiple Pages}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Page Sizes and Multiple Pages\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Up until now, we\rquote ve treated the print record as a black box; something the Print Manager sets up and uses, and that we don\rquote t need to know anything about.  There is one thing we have to delve into the print record to find out, though, and that\rquote s the size of the page.  The reason, of course, is that we need to know whether the document we\rquote re printing will fit on one page, or whether we need to break it up into multiple pages.\par The information we need is actually imbedded in a subrecord inside the main print record.  The subrecord, called }{\f6\fs20 prInfo}{\f4  in the print record, is of type }{\f6\fs20 PrInfoRec}{\f4 ; the type is defined like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 struct PrInfoRec \{\par    Word iDev;                         /* reserved for internal use */\par    Word iVRes;                        /* vertical resolution of printer */\par    Word iHRes;                        /* horizontal resolution of printer */\par    Rect rPage;                        /* defining page rectangle */\par    \};\par typedef struct PrInfoRec PrInfoRec, *PrInfoRecPtr, **PrInfoRecHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first field doesn\rquote t really interest us; it tells what kind of printer is being used.  The two most common values are 1, for an ImageWriter; and 3, for a LaserWriter.  The next two fields give the vertical and horizontal resolution of the printer in pixels per inch.  There are a lot of ways this information can be used, depending on what is being printed.  One common example would be a CAD program, which needs to draw a 1 inch square when you tell it to, no matter what printer is used.  The CAD program could use these fields to find out how many pixels to move in a particular direction to draw a 1 inch line.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printer page size}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last field, }{\f6\fs20 rPage}{\f4 , is the one we can\rquote t do without.  This rectangle defines the actual printable area on a page.  If our document is wider than }{\f6\fs20 rPage.h2-rPage.h1}{\f4  we have to print two pages wide, and if the document is taller than }{\f6\fs20 rPage.v2-rPage.v1}{\f4 , we have to print more than one page high.  In some cases, you might even want to use these values to figure out how much information you will let the user put in the document.  A common example is a word processor, which would make sure that the page wasn\rquote t any wider than }{\f6\fs20 rPage.h2-rPage.h1}{\f4 .\par Figuring out just how to map a document onto a printed page depends a lot on the kind of program you are writing, so I\rquote d strongly recommend packaging the process into a subroutine.  That makes Frame a lot easier to change, since all of the information you need to change to print a document is in one neat little subroutine.  The only other change you might have to make is for programs that can save the print record with a document, in which case you have to add the code to save, load, and validate the print record.\par Here\rquote s a simple version of the subroutine that assumes the document record has a field called }{\f6\fs20 docRect}{\f4  which defines the total size of the document, and also assumes that you want to print the document with one screen pixel mapping to one printer pixel.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * GetPageCount\par *\par * Figure out how many printer pages are needed for the document\par *\par }\pard \qj\li180\keepn\widctlpar\adjustright {\f6\fs20 * Parameters:\par *    dPtr - document to print\par *    h - (returned) number of horizontal pages in the document\par *    v - (returned) number of vertical pages in the document\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 *\par ***************************************************************/\par \par }\pard \qj\li180\keepn\widctlpar\adjustright {\f6\fs20 void GetPageCount (documentPtr dPtr, int *h, int *v)\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \{\par PrInfoRec infoRec;                       /* printer info record */\par unsigned pwidth, pheight;                /* page size */\par }\pard \li180\widctlpar\adjustright {\f6\fs20 unsigned dwidth, dheight;                /* document size */\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 HLock(dPtr->prHndl);                     /* get a copy of the info record */\par infoRec = *(dPtr->prHndl->prInfo);\par }\pard \li180\widctlpar\adjustright {\f6\fs20 HUnlock(dPtr->prHndl);\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 pwidth = infoRec.h2 - infoRec.h1;        /* get the page size */\par }\pard \li180\widctlpar\adjustright {\f6\fs20 pheight = infoRect.v2 - infoRec.v1;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20                                          /* get the document size */\par dwidth = dPtr->docRect.h2 - dPtr->docRect.h1;\par }\pard \li180\widctlpar\adjustright {\f6\fs20 dheight = dPtr->docRect.v2 - dPtr->docRect.v1;\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 *h = dwidth div pwidth;                  /* get the page counts */\par if ((*h)*pwidth < dwidth)\par    ++(*h);\par *v = dheight div dheight;\par if ((*v)*pheight < dheight)\par    ++(*v);\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 7-2:  Sample }{\f6\fs20 GetPageCount}{\f4  Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par In Frame, we\rquote ll just set h and v to 1, and remember to replace these values with more appropriate calculations when Frame is adapted for a specific program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Main Print Loop}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 The Main Print Loop\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrOpenPage}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrClosePage}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You make a pass through the print loop once for each page that needs to be printed.  In the print loop itself, you do three things: call }{\f6\fs20 PrOpenPage}{\f4  to start a fresh page, draw all of the information for that page, and call }{\f6\fs20 PrClosePage}{\f4  to tell the Print Manager you are finished with the page.\par The first step is to call }{\f6\fs20 PrOpenPage}{\f4 .  This is a pretty simple call:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 PrOpenPage(prPort, NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The }{\f6\fs20 prPort}{\f4  parameter, of course, is the printer }{\f6\fs20 GrafPort}{\f4  returned by the call to }{\f6\fs20 PrOpenDoc}{\f4 .  The second parameter can point to a rectangle, which the Print Manager will use to automatically scale your drawing.  If you aren\rquote t using the automatic scaling feature (and we won\rquote t in this course) the parameter is set to }{\f6\fs20 NULL}{\f4 .\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Before you start printing, be sure and set up your drawing tools.  Most of the time, that means calling }{\f6\fs20 PenNormal}{\f4  right after the call to }{\f6\fs20 PrOpenPage}{\f4 .\par The next step is to draw the information that should appear on this page of the document.  By \ldblquote this page,\rdblquote  I\rquote m assuming that you\rquote re taking into account which page is actually being printed.  Naturally, you should loop over each of the horizontal and vertical pages the call to }{\f6\fs20 GetPageCount}{\f4  told you to take into account.\par There\rquote s one other touchy issue about printing multiple pages, and that\rquote s that the Print Manager doesn\rquote t shift your image over for you.  For example, let\rquote s assume you\rquote re printing a 3 page by 3 page document, like the one shown in Figure 7-1.  If you\rquote re printing the middle page, it\rquote s up to you to subtract the height and width of one sheet of paper from the horizontal and vertical coordinates used for each drawing command.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1051{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex93\picscaley93\piccropl0\piccropr0\piccropt0\piccropb0\picw272\pich203\picwgoal5440\pichgoal4060\macpict\bliptag-1023665150\blipupi72{\*\blipuid c2fc1c02001ac64d2ce5dcf45205510b}0ecdffffffff00ca010f1101a0008201000affffffff00ca010f98001c0000000000a100d80000000000a100d70025003500c7010d000005e75501540006e8aa02a2aa000902555515ea5501540006e8aa02a2aa000902555515ea5501540006e8aa02a2aa000902555515ea5501540006e8aa02a2aa000902555515ea5501540006e8aa02a2aa000902555515ea5501540006e8aa02a2aa000902555515ea550154000af4aa00a8f6aa02a2aa000d02555515f7550050f5550154000bf4aa01a22af7aa02a2aa000e02555515f755014515f6550154000bf4aa01888af7aa02a2aa000e02555515f755011045f6550154000bf4aa012222f7aa02a2aa000f02555515f85502544511f6550154000cf5aa02a88a88f7aa02a2aa000f02555515f85502511544f6550154000df5aa03a22aa22af8aa02a2aa001002555515f8550344555115f7550154000df5aa0388aaa88af8aa02a2aa001002555515f8550311555445f7550154000df5aa0322aaaa22f8aa02a2aa001102555515f955045445555511f7550154000ef6aa04a88aaaaa88f8aa02a2aa001102555515f955045115555544f7550154000ff6aa05a22aaaaaa22af9aa02a2aa001202555515f9550044fe55015115f8550154000ff6aa0088feaa01a88af9aa02a2aa001202555515f9550011fe55015445f8550154000ef6aa0022fdaa0022f9aa02a2aa001202555515fa55015445fd550011f8550154000ff7aa01a88afdaa0088f9aa02a2aa001202555515fa55015115fd550044f85501540010f7aa01a22afdaa01a22afaaa02a2aa001402555515fa55074455555055555115f95501540011f7aa0788aaaa0202aaa88afaaa02a2aa001402555515fa55071155505550555445f9550154000ef7aa0022fbaa0022faaa02a2aa001502555515fb5508544555500000555511f95501540012f8aa04a88aaaaaa8feaa0088faaa02a2aa001502555515fb5508511555505550555544f95501540013f8aa04a22aaaaaa8feaa01a22afbaa02a2aa001602555515fb550944555550555055555115fa5501540013f8aa0088feaa00a8feaa01a88afbaa02a2aa001602555515fb550911555550555055555445fa550154001602aaaa80fb000022feaa00a8fdaa0020fb000202aa001602555545fb5505455555505550fe550015fa550154001602aaaaa0fb00000afeaa00a8fdaa0080fb00020aaa00190355555440fc0005155555505550fe550040fc00030155540019feaa008afeaa010002fdaa00a8fcaa010000feaa038aaaaa001702555554fe5502545551fe5502505550f855035155540019feaa008afeaa01800afdaa00a8fcaa010000feaa038aaaaa001b02555554fe5502541541fe5502505550fd550054fd55035155540018feaa008afeaa00a8fcaa00a8fcaa010aa0feaa038aaaaa001b02555554fe5502541541fe5502505550fd550054fd55035155540018feaa008afeaa00a8fcaa00a8fcaa010aa0feaa038aaaaa001b02555554fe5502541541fe5502505550fd550054fd55035155540018feaa008afeaa00a8fcaa00a8fcaa010aa0feaa038aaaaa001b02555554fe5502541541fe5502505550fd550054fd55035155540018feaa008afeaa00a8fcaa00a8fcaa010aa0feaa038aaaaa001b02555554fe5502541541fe5502505550fd550054fd55035155540018feaa008afeaa00a8fcaa00a8fcaa010aa0feaa038aaaaa001b02555554fe5502541541fe5502500000fd550054fd55035155540015feaa008afeaa01800af7aa010000feaa038aaaaa001b02555554fe5502541541fe5502500000fd550054fd55035155540018feaa008afeaa00a8fcaa00a8fcaa010aa0feaa038aaaaa001b02555554fe5502541541fe5502505550fd550054fd5503515554001bfeaa068aa2aaaaa8aaa2feaa00a8fdaa098a0aa0aaaa2a8aaaaa001d0e555554555155541541515555505550fe55091554555554555155540015feaa018a88fd000008f9000020fd00048a8aaaaa0017045555545551fd550051f9550015fe550554555155540015feaa018a88fd000008f9000020fd00048a8aaaaa001d0e555554555155541541515555545550fe55091554555554555155540016feaa018a88fd800088f98001a000fe80048a8aaaaa001d0e555554555155541541515555505550fe55091554555554555155540016feaa008afe88018008f88809a0000088888a8aaaaa001d0e555554555155545551515555505550fe550015fe550554555155540016feaa058a8808080000f8080920000008088a8aaaaa001c045555545551fd5505515555514141fe550015fe550554555155540015feaa018a88fd000008f9000020fd00048a8aaaaa0017045555545551fd550051f9550015fe55055455515554000bfeaa0080ed00030aaaaa000b02555554ec0003015554000bfeaa008aedaa038aaaaa000c0355555440ed0003115554000bfeaa008aedaa038aaaaa00150355555440fc550041f9550005fd5504501155540013feaa0082fcaa008af9aa00a2fcaa030aaaaa000c0355555450ed0003515554001cfeaa018828fe000b02a0a000008a8800008a0aa0fe0004a08aaaaa001d1b555554514550000151151555544511555545511500005514515554001cfeaa018a2afeaa01a8a8feaa040a82aaaaa8fe2a06aa2aa28aaaaa001d0955555451555000015415fe55014515fe5509505540015554515554001bfeaa018a0afdaa02a82aa8feaa0ca82aaa28aa0a282a828aaaaa001c1255555451155051415514550505555501015451fd550444515554001bfeaa018a2afdaa1228a0aaa82aa82aa82a2aaa0a282aa28aaaaa001b0c55555450155051415500515554fd55015401fd550440515554001bfeaa01882afdaa128aaa0002aaa800002a82aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001d1b555554515550000155515055505555545555155540015554515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaa0002aaa800002aa2aa0a282aa28aaaaa001a0c55555451555051415551505550fc550015fd550454515554001bfeaa018a2afdaa128aaa0002aaa800002aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001bfeaa018a2afdaa128aaaa8aaaaa82aa82aa2aa0a282aa28aaaaa001c1255555451555051415551505550555554555515fd550454515554001cfeaa18800aaa000aaa00aaa8aaaaa82aa82a00aa00002a800aaaaa001a11555554455551555155545055505555545554fb55031155540016feaa0080fb0007aaa8aaaaa82aa82afb00030aaaaa001b045555545515fd550915505550555554555551fd550445515554001afeaa018080fd000920aaa8aaaaa82aa82a08fd0004080aaaaa001b045555545504fd440905505550555554555551fd5504415155540019feaa0080fcaa09a8aaa8aaaaa82aa82a08fd88048a0aaaaa001b045555545504fd440905505550555554555551fd5504415155540018feaa0080fca008a8aa0002aaa800002afc08040a0aaaaa0019045555545504fd440305505550fc550051fd5504415155540018feaa0080fcaa00a8fdaa04a82aa82a08fd88048a0aaaaa001b045555545504fd440905500000555500015551fd5504415155540019feaa01808afd0a0028fdaa04a8aaaa2a08fd80048a0aaaaa001b045555545404fd440905500000555000001541fd5504415155540019feaa018280fd000428a2aaaa2afdaa0028fd00040a0aaaaa0016045555545515fd550014f9000051fd5504455155540015feaa018280fd000028f9aa0028fd00040a0aaaaa000c0355555450ed0003515554000bfeaa008aedaa038aaaaa000b02555554ec5503515554000bfeaa008aedaa038aaaaa000b02555554ec00030155540004e6aa000005e75501540004e6aa000005e75501540004e6aa000005e75501540022005c002eea0022001d007d00eea10096000c02000000020000000000000001000a00000071000c008a2c000c00150948656c7665746963610300150d000a2b750903363430a00097a10096000c02000000020000000000000001000a0058000000640019280061000403333738a0009701000affffffff00ca010f3000260035005d007e300026007d005d00c630002600c5005d010e30005c00c50093010e09000000000000000031005c007d009300c609ffffffffffffffff3830005c00350093007e300092003500c9007e300092007d00c900c630009200c500c9010ea10096000c02000000020000000000000001000a0065008d008900b62b8d0d095072696e74696e67202b080c05746869730d28008600960470616765a0009701000affffffff00ca010f0700020002300025003400c9010ea00083ff}}{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 7-1:  Shifting for Multiple Page Documents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Let\rquote s assume that the Print Manager tells us that a page is 378 pixels high, and 640 pixels wide.  If the document is a drawing a picture that is 1134 pixels high and 1920 pixels wide, we might end up with something a lot like the document we just looked at in Figure 7-1.  In that case, when we printed the top left page, everything would work just fine.  The entire picture won\rquote t be on the page, but the Print Manager figures that out and only prints the part of the picture that should be printed.  When we print the next page to the right, though, it\rquote s very important to subtract 640 from each horizontal coordinate.  For the page being printed in Figure 7-1, we would subtract 640 from each horizontal coordinate, and 378 from each vertical coordinate.\par The simplest thing to do when you draw a page is to just draw the entire document and let the Print Manager figure out what should be on the page and what should be ignored.  That works fine for a lot of programs, but if it takes a long time to do all of the drawing commands, you might want to to some preprocessing yourself.  For example, if you are writing a word processor that will print a 100 page book, you don\rquote t want to force QuickDraw II to reformat all 100 pages of text each time a single page is printed.  In a case like that, you should go to the trouble of skipping over the lines that have already been printed, then stopping when you get to the first line that will be on the next page.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrClosePage}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once a page is printed, call }{\f6\fs20 PrClosePage}{\f4  to tell the Print Manager you\rquote re through with the page:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 PrClosePage(prPort);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Finishing the Print Process}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Finishing the Print Process\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrCloseDoc}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once all of the pages have been printed in the main print loop, close the document.\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 PrCloseDoc(prPort);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If the user didn\rquote t ask for spooled printing, or if the Print Manager ignored the user because the printer being used doesn\rquote t support spooled printing, this is actually the end of the print loop.  Just in case the document has been spooled, though, you should keep going.  The next step is to check to see if there were any errors flagged during the print loop with a call to }{\f6\fs20 PrError}{\f4 .  If not, you call }{\f6\fs20 PrPicFile}{\f4  to print the document.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 PrStatusRec status;                     /* printer status */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 \par ...\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (PrError() == 0)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    PrPicFile(dPtr->prHandle, NULL, &status);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first parameter is the print record, which is natural enough.  The next parameter is the }{\f6\fs20 GrafPort}{\f4  you want the Print Manager to use while printing the spooled file.  This is }{\i\f4 not}{\f4  the same }{\f6\fs20 GrafPort}{\f4  as the one used when the drawing commands were used in the main print loop; that one was closed by }{\f6\fs20 PrCloseDoc}{\f4 , and doesn\rquote t exist anymore.  By passing }{\f6\fs20 NULL}{\f4 , we\rquote re telling the Print Manager to create a working }{\f6\fs20 GrafPort}{\f4  for itself.  The last parameter points to a status record.  This record is filled in constantly while the Print Manager prints the spooled document, and you can set up a heartbeat interrupt task that will watch this record and keep the user informed about what is happening.  That\rquote s a lot of trouble for a very meager return on the amount of effort you have to expend, so we won\rquote t get into that here.  All you have to do is make sure you pass a pointer to a valid status record.\par \par Problem 7-3:  Add the print loop code to Frame.  Use a default }{\f6\fs20 GetPageCount}{\f4  subroutine that always says the document is one page high and one page wide.\par While you aren\rquote t printing anything yet, the printer should still cycle, printing a blank page each time you ask the program to print a document.  If you like, add code to print an X.\par \par Problem 7-4:  Add printing to the slide show program you developed as a solution to Problem 6-4.  Keep things simple by assuming that the entire picture will fit on a single page.  With most printers, it will.\par {\*\bkmkend bk45}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 print loop}{\rxe bk45}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 A Few Tips and Tricks}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 A Few Tips and Tricks\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are several odd little things you should know about the Print Manager that I won\rquote t go into in detail in this course.  I\rquote ll cover a few of them in this section so you know the features exist, but for details you\rquote ll have to refer to }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 1}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Printing a Subrange}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Printing a Subrange\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It\rquote s possible for the user to pick a subrange of pages to print.  For example, if someone is using a word processor to write a book or long paper, they might want to print just a few pages from a larger document.  The Print Manager lets the user pick a subrange of pages, and it will automatically skip printing the pages that the user didn\rquote t ask for.  It\rquote s possible for you to poll some fields in the print record to find out if the user asked for a subrange of pages, and with some appropriate tricks, not print the pages that need to be skipped at all.  In some kinds of programs a trick like that could save a lot of time, while in other kinds it just isn\rquote t worth the effort, since drawing the document doesn\rquote t take much time anyway.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Aborting with Open-Apple Period}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Aborting with Open-Apple Period\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 While the Print Manager is printing a document, it checks for an open-apple-period abort key.  If the user holds down the open-apple key and presses the period, the Print Manager will eventually figure that out and stop printing, flagging an error.  If you like, you can draw an alert window with an appropriate message (like \ldblquote Press open-apple-period to cancel\rdblquote ) before you drop into the print loop, then close the window after the print loop finishes.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The 10K Check}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 The 10K Check\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 PrPicFile}{\f4  needs one fairly good size chunk of memory, namely one 10K chunk.  There are some situations where }{\f6\fs20 PrPicFile}{\f4  will fail because it can\rquote t get this block of memory, but it could have succeeded if you had known in advance that there wasn\rquote t enough memory.  This generally happens when your program uses chunks of memory itself for temporary results.  For example, a paint program often keeps a large buffer or two open for something called an off-screen }{\f6\fs20 GrafPort}{\f4 .  This memory could be freed up if your program knew it was needed.\par If your program falls into this category, you should try to allocate a 10K block of memory before calling }{\f6\fs20 PrPicFile}{\f4 .  If you can\rquote t get the memory, stop and dispose of some of your program\rquote s temporary buffers, and try again.  Of course, if your program doesn\rquote t have any temporary buffers it can dispose of, you can just call }{\f6\fs20 PrPicFile}{\f4  and let it flag an error and return.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Page Gaps and Ribbon Printing}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Page Gaps and Ribbon Printing\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 page gaps}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the options the user can pick with the ImageWriter printer is \ldblquote No Gaps Between Pages,\rdblquote  which does pretty much what it says.  When the user picks this option, the Print Manager gives you a vertical resolution for the page that goes literally from one fold in the paper to the other.  The neat thing about this option is that it gives you a way to print continuous ribbons from a large document.  For example, you can print a sign sideways, printing a continuous picture that runs right across page gaps.  You can also print a large house plan in a CAD program so the user only has to paste the strips together, and didn\rquote t have to tape the drawing together in individual pages.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1052{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw309\pich152\picwgoal6180\pichgoal3040\macpict\bliptag-1756464198\blipupi72{\*\blipuid 974e7bba1d87401ceb599a4b063d85e4}1827ffffffff009701341101a0008201000affffffff0097013498000800000000004b003800000000004b0035002b00440077006d000002f90002f90006027ffff0fc00070300001fe0fd0007037fffffb8fd0007037ffffffcfd0007037e0001fefd00070303fffc3ffd0007037e0007fffd000804000001ff80fe000804000001bfc0fe000804000001ffe0fe000804003ffdffe0fe000804006004bff0fe000804004004bff8fe0008047fc004eb68fe0008047ffffc7ffcfe00080403900f77fcfe0008000ffeff00ecfe00090778000003efff800009077fffe0003f81800009007ffeff03f781c0000907000007ffffc3e0000907000003801ffee00009070000018071ffe000090700001f87c0fde00009057ffff2fc00e0ff000905000002000070ff000905000002000070ff000905000002000070ff000905000002000078ff000905000002000038ff000905000006000028ff00090500000400003cff00090500000400001eff000905000004000016ff00090500000400001eff00090500000400001eff00090500000400001fff00090700000400000b000008007ffdff02cb000009077ffffe0ffe4b000009077ffffb0f30cb000009077ffffa3b78cb000009077ffffeffc0cb000009077ffffccdfbcb0000090740000cf377cb000009077fffffda7fef000009007ffeff03e7f9000009057ffc07fffc01ff00090700000c000001000009057ffff800000fff0008fe00043ffffb000008007ffdff0082ff0008fe0002ffff82ff0008fe0002f80002ff0006fc000006ff0006fc000006ff0006fc00000eff0006fc00021a000009077ffff8000072000009057ffff80000c2ff0008fe00040fff82000009057ffffff82002ff0007fd00012002ff0007fd0003e002000009007ffeff03e002000009007ffeff01a002ff0007fd00012002ff0007fd00012006ff0007fd00013ffeff0007fd00013ffcff0002f90002f90002f90098000800000000005100380000000000510032002700090079002e000002f90002f90002f90002f90002f90002f90008fe000407ffffc00006fe00007cfd0008fe0004cfffffc0000902000003feff01c0000907000002e00003c0000905000007c1fffeff00090700000fff0003c000070300000bfafd00070300001ffefd00070300003ffcfd00090500003efdffe0ff000905000077e90030ff0009050000ffe90010ff0009070000bff9001fc00009070001fb51ffffc00009050001775f001cff0009070001f6780006000007000ffcff01c00009070c0fe03fffffc00008011c0ffdff01c000070337ffffe0fd000703387f0018fd0007033ff9c038fd0008043f787fffc0fe000907007000107fffc000070300e00010fd00070301c00010fd00070303c00010fd00070303800010fd00070303800010fd00070307800010fd00070307000010fd0007030e000010fd0007030e000018fd0007030e000008fd0007030e000008fd0007031e000008fd0007031c000008fd0007001ffcff01c0000907367fb83fffffc00009073786b82fffffc0000907378fae2fffff800009073789b7bfffff800009073fc6bd9fffff800009073ff3a78c0001c00009073fff3d8fffffc00009072ffffff7ffffc0000801200ffdff01c00007032000000cfd00090738000007ffffc00006023fffe0fc00070010fcff01c000070318ffff80fd0007031800ff80fd00040008fa0004000cfa0004000efa0005010b80fb00090708e00003ffffc000090708300003ffffc0000703081fff80fd000902080100feff01c00005010801fb0006020801e0fc0008010801fdff01c000090208013ffeff01c00005010801fb0005010801fb0005010ffffb0005010ffffb0002f90002f90002f90002f90002f90098002000000000003301000000000000330100006800a3008b012e0000211f178ff7b7beefa9fffda00089f0a0e10525043828418800292829282928292810211f1685ffcebffe7effffa0008a50cf6105250437987c88002fe82fe82fe82fe810211f0ddffbd7b56968a5eca0008a50d2610525043258528800292829282928292810211f03f5ef7b75d867bfbca0008af0d2e105fd043a58528800292829282928292810211f017ffbbbff5e54ecfca0008b50d76105250437587a8800292829282928292810211f005dbffffffdf6eabfa0008a50da6105250432d85688002fe82fe82fe82fe8101c1600577fbfb6d7fbfff5a0008a50d2610525043258528800f9280010211f0054fd5ffacffdce9fa0008af0d2e105fd043a585288002fe82fe82fe82fe810211f0056e77fffaff3623da0008bf0d76105050437587a88002d682d682d682d6810211f005c917f9fed7d68f5a0008b50dae105fd043ad85688002d682d682d682d6810211f004a9ddd5f73f3f7b5a0008b70dbe105ad043ed87688002d682d682d682d6810211f004c81b7fd75eb5cb5a0008bd0dee105ad043bd85e88002d682d682d682d6810211fffc9fe6d7fddc33db5a0008b50dae105ad043ad85688002d682d682d682d6810211f004bffabf9fd72a4b5a0008b50dae105ad043ad85688002d682d682d682d6810211fffcb7e7ee9afb7b0b5a0008b50dae105ad043ad85688002d682d682d682d6810211f0047c96b9fef74cabfa0008bf0dfe105fd043fd87e88002fe82fe82fe82fe81f211f0041c867bf7660d38020008af0d0610401043058428800200820082008200810211fffc1ee5497feeb73ffe003fff0c7e107ff043f1878fe003ff83ff83ff83ff81f210e0041c6f61efde3b1ffe003bffffb7ffeff0df6ffffee003ff83ffb3f1afffa102116ff40ae995abda032a1e00287402a80694a900aa0170a00fe28052e2cc9ffa3fc21168140cc1a7fdbf73cc0c00cf6402a80694a900aa0137980fe10051cd9c3778db42116ff409d6e668efd580000140a402a80694a900aa0128140fe00050d3414ed9a6c1e04807fbc763ffcff0cf7fbc02a80694a900aa01eff7ffdff04d63b007fa91d0c8240b40667bb0340000550623ffaff02e23050fe0005bf3feecefe7f200b82406ee797de003fffe59f82fd000038fe000b020fcc07fffca4b4b92c416b2105aec01fab13dcfe0007058302000e0000eefe000202060afe0005a434a90e0867211fdac00bfd0cb8083fffa5fc0400150081ab0203800101f907fff4b73eedcb6e54211f36c0006805b0082802a70808003581c2aa8706c0008081050054e37c78dfc6f7211fd6c000000418003bfba3f81000358142aa850aa00040ff077f74574af5d5ae9c211f3f7000000cb8000a4a03047000358002aa820aa0003105014940660cd986cc1c211fb5cb000008f8000a4a02feb000558002aa800aa0002bf90149404eb9d3ac9d7e211f33dcecfffce9fffa4be641e000558002aa800ab0003c110149405e3bd78dbc7c211f2a4c3bfb1fefb7fbfbff3fa000558002aa800ab0002fe1017f405a0b5685b40a20057b0bf7eafdfefdff15d04000558002aa800ab00010410fffc03776eddf6eec20044cac5aff5ffdff0df7cff000558002aa800ab0007f81feff05efd5fbf5ffa91c010d3ff9ff15fc0800558002aa800ab0008111ffbffc05febffffffb1501b730f9000a03fc00558002aa800ab001f7ff00fb1e183b1dc1c4a4ca4537592ee30200558002aa800ab00204fe0030fb000006211f0339f67f5abffdf5bf5f753f00558002aa800ab007fefbfdd99b838949958a6f211f73fe6fad2dd5b4bfeaa4570080558002aa800ab00817bdd7fff3ecfeb57fffee1b01ddfbf8ff147fc0558002aa800ab01fec6ca5bfbcdf5a5baf6d7e1702feae7ff9ff0af03fd58002aa800ab0603cf9ff019bfe1c02b61ec0fb000e0fffc000fffc02aa800abfc03fefc0fc000213ea521602bdd240f60008ffc2aa81fff0000d30fb00025f9fbe1002b77840f500023ffffef60002525ae60a02ff6540e700025219ff0a02bb69c0e700025b95ff0a027efb80e7000271bdfd06e4ff02eba4ff07011cf9e400003102e10098002200000000004e011000000000004e010b002300a200530132000002df0002df0002df0002df0002df0006f1000004f00006f1000007f00007f100010780f10007f100010580f10007f1000107c0f10007f1000107a0f10007f100010450f10007f1000107b0f10007f1000104dcf10007f1000105d2f10008f1000206fd80f20008f1000205b680f20007f10001041ef10006f1000004f0000af1000004fc00007ef6000ff7000103f0fd000004fc000042f6000ff700010210fd000004fc00007ef60011f7000103f0fe00feff00f8fe000042f60012f7000c0210000fff54555157ff800042f60012f7000c021007f51554555155457f0042f60012f7000c0210fd5515044011054555f842f60012f7000c02134551100440110044551642f60012f70004023d440110feff04f8440115e2f60012f700040275440ffffe000407ff811572f60012f7000c02d047f0007ffffff0007f105af6001701000ff8ff03407c07fffeaa04afff01f017f8ff0180002321000c5551554555155455510181faaabfffffeaaafc0c045551554555155455518000231f00045551554555155455510e3f57ffc000001fff57e384555155455515545551ff00200d000440110044011004401170d5f8fb000bfd5874401100440110044011ff001f0c0004401100440110044011875ffa000b07d70c401100440110044011ff001201003ff8ff013ae0f900013ae7f8ff01e00016010020f800035700000ffdff0380000750f8000120001701001ff8ff0bb80003f002aaaa007e0000eff8ff01c00017010015f8550b4000feb5eb5556bd53f80015f8550140001701000ff8ff0bc01f01561aaaaac36c07c01ff8ff018000190500080000e2e0fb00096cf5be1f5557c3d57bb0f7000180001a0500080000cda0fc000a01db0d561afffac2ad86dcf7000180001a0500080000d360fc000a036f0faa154015435787b6f7000180001a05000800027d48fc000a05b50d561adfdac2aa856bf7000180001a05000ffffff3f7fcff0afceb0dfe15525543fc86b9f7ff0180001d060004038bcb5c80fd000b08bf0a0e1ad25ac382844880f9000001ff00231f00043ff6c33dbfffbfff8008c10cf6155255437987e8800fffefffefffefffe1ff00231f00042b4df2a4a802a80280089f0d261adfd043258418800a00aa00aa00aa00a1ff00231f00043bf537b6bbfbbbfb8008a50d2e10525043a587c8800efeeefeeefeeefee1ff00231f0004efcfdcdede4a0a4a0008a50d761052504375852880029282928292829281ff00231f0004a92d72dbb64a0a4a0008af0da6105250432d852880029282928292829281ff00231f0004690cf77a6e4a0a4a0008b50d26105fd0432587a880029282928292829281ff00231f00046dca93ffabfa0bfa0008a50d2e10505043a585688002fe82fe82fe82fe81ff00231f0005f7dec37e7e7a0a4a0008a50d76105fd04375852880029282928292829281ff00231f00055dd32b496b4aea4a0008af0dae105ad043ad852880029282928292829281ff00231f00053d834f48660daa4a0008b50dbe105ad043ed87a880029282928292829281ff00231f0006b7adefee54db6bfa0008b70dee105ad043bd85688002fe82fe82fe82fe81ff001f170017b78fc7c6f67d4a0a0008bd0dae105ad043ad87688002fa820081ff0023210014cec1db6e9bdbf7fa0008b50dae105ad043ad85e88002fe82fe82fe82fe81000023210664dfdfe6cc1a0b5fda0008bf0c121fbfefc3ad85688002d682d682d682d6810000232104ef7bf6fa9d6e0b3e5a0008890dfe12554a43fd85688002d682d682d682d6810000232105e7bb7de7ee7f0aaf5a0008f50d0612554a430585688002d682d682d682d6810000232105a43bf5b6b90e10ba1a0008a90f7e12554a43f187e88002d682d682d682d6810000231f03773bdfde7be58ec99a0008af0dd612554a435f84288002d682d682d682d681ff00231f00fd5bfd7749affadbfa0008bd095212554a435487888002fe82fe82fe82fe81ff00231f005f691cff61fdeb7b020008f5095212554a4354877880020082008200820081ff00231f002f6ffafb95efffbffe0008d509521fffffc35485588003ff83ff83ff83ff81ff001f17003cbbfec3a71faa3a0a0008d5097e10000043f485588002fa820081ff001c1600376ddb3fe66f773c040008d50fc21fffffc21f855880f801ff0023160034d9cb4f779bfd58000008ff081e10000043c087f880fe000010fe00011001ff002316009f5badce6deaff68000008810fe2100000423f840880fe000028fe000328010000232102fcfffeeefb9fbb41f00008ff0802100000420087f880007c00ec007c00ec01000023210292df5bfbea5ae4060c00088108021000004200840880018301930183019301000023210290cf77ffffb9ef79f200088108021fffffc200840880027c866cc27c866cc10000232102dcafd7f6daf524d609000881081e1fffffc3f084088004824886448248864100002321038def3f7ff9fd87bfff0008810ffe10000043ff84088007ffcfffc7ffcfffc100002321015db6b5dbf5e7d76f4a0008ff0fe2107ff0420f87f8800292829282928292810000231f0198b4f3fffd9b5feeca0008ff0802104010420087f880029282928292829281ff0030000100050033002f30003200050065002f30006400050096002f30000100010096000650000300020006000550000c0002000f000550001500020018000550001e0002002100055000270002002a00055000300002003300055000390002003c000550004200020045000550004b0002004e000550005400020057000550005d00020060000550006600020069000550006f0002007200055000780002007b000550008100020084000550008a0002008d0005300001002e00960033500003002f0006003250000c002f000f0032500015002f0018003250001e002f00210032500027002f002a0032500030002f00330032500039002f003c0032500042002f0045003250004b002f004e0032500054002f0057003250005d002f00600032500066002f0069003250006f002f00720032500078002f007b0032500081002f0084003250008a002f008d003230000100440033006e30003200440065006e30006400440096006e30000100400096004550000300410006004450000c0041000f004450001500410018004450001e0041002100445000270041002a00445000300041003300445000390041003c004450004200410045004450004b0041004e004450005400410057004450005d00410060004450006600410069004450006f0041007200445000780041007b004450008100410084004450008a0041008d0044300001006d00960072500003006e0006007150000c006e000f0071500015006e0018007150001e006e00210071500027006e002a0071500030006e00330071500039006e003c0071500042006e0045007150004b006e004e0071500054006e0057007150005d006e00600071500066006e0069007150006f006e00720071500078006e007b0071500081006e0084007150008a006e008d007130006801010092013430006800d000920102300068009e009200d1300064009e00690134500065012e00680131500065012500680128500065011c0068011f500065011300680116500065010a0068010d50006501010068010450006500f8006800fb50006500ef006800f250006500e6006800e950006500dd006800e050006500d4006800d750006500cb006800ce50006500c2006800c550006500b9006800bc50006500b0006800b350006500a7006800aa300091009e00960134500092012e00950131500092012500950128500092011c0095011f500092011300950116500092010a0095010d50009201010095010450009200f8009500fb50009200ef009500f250009200e6009500e950009200dd009500e050009200d4009500d750009200cb009500ce50009200c2009500c550009200b9009500bc50009200b0009500b350009200a7009500aa30002901010053013430002900d000530102300029009e005300d1300052009e00570134500053012e00560131500053012500560128500053011c0056011f500053011300560116500053010a0056010d50005301010056010450005300f8005600fb50005300ef005600f250005300e6005600e950005300dd005600e050005300d4005600d750005300cb005600ce50005300c2005600c550005300b9005600bc50005300b0005600b350005300a7005600aa090000000000000000310025009e002a013409ffffffffffffffff38a0008c500026012e00290131500026012500290128500026011c0029011f500026011300290116500026010a0029010d50002601010029010450002600f8002900fb50002600ef002900f250002600e6002900e950002600dd002900e050002600d4002900d750002600cb002900ce50002600c2002900c550002600b9002900bc50002600b0002900b350002600a7002900aaa0008da00083ff}}{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 7-2:  Ribbon Printing in Portrait and Landscape Modes\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par To make this work, of course, you have to print the pages in a particular order, and the order changes depending on whether the document is being printed in portrait or landscape mode.  In portrait mode, you should print the document in columns, printing an entire column from top to bottom and then moving on to the next column.  In landscape mode, the document it printed sideways, so you have to switch the printing order, too, printing a row from left to right, then moving to the next row.  While we didn\rquote t cover where it is, you can find out which mode the user picked by looking in the print record.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson covered the basics of printing from desktop programs using the Print Manager.  Along the way we finished the Frame program, which gives you a great start on almost any desktop program, and learned a new way to start the tools.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 PrDefault\tab PrJobDialog\tab PrCloseDoc\tab PrClosePage\par PrError\tab PrOpenDoc\tab PrOpenPage\tab PrPicFile\par PrStlDialog\tab PrValidate\tab ShutDownTools\tab StartUpTools\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 SysFailMgr\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rToolStartup\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk46}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printing}{\rxe bk46}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 8 \endash  Thanks for the Memory}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 8 \endash  Thanks for the Memory}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 8 \endash  Thanks for the Memory\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk48}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 In past lessons we\rquote ve made use of Memory Manager calls like }{\f6\fs20 NewHandle}{\f4  and }{\f6\fs20 HLock}{\f4 .  In this lesson, we\rquote ll learn about these calls in more detail, exploring the organization of memory on the Apple II}{\f4\fs20 GS}{\f4  and how to effectively use the Memory Manager to get the most out of that memory.  We\rquote ll also find out what a handle really is, and look into the advantages and disadvantages of the Memory Manager compared to the standard memory management functions of C, }{\f6\fs20 malloc}{\f4  and }{\f6\fs20 free}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Memory on the Apple II}{\b\f4 GS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Memory on the Apple II}{\b\v\f4 GS}{\b\v\f4\fs28 \tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 I\rquote d like to start off with a quick run down on how memory is organized.  I\rquote m doing this mostly to define a few terms, but also to remind you of some computer related facts you don\rquote t have to use often in C.  If you\rquote ve never heard of a byte, bit, or hexadecimal number, this is probably going to be a little too quick.  In that case, I\rquote d recommend looking for a good run down on bits, bytes, binary math, hexadecimal math, and memory organization in a book that goes into a little more detail.  One good source for information like that is an introductory book on assembly language.  Bits and bytes are the bread and butter of assembly language programming, so the beginner books dive into it right away, and generally have a pretty complete description.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 bit}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 byte}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 memory}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Like most modern computers, the memory of the Apple II}{\f4\fs20 GS}{\f4  is organized into addressable units called bytes.  Each byte of memory contains 8 bits, and each bit is an on-off switch.  With a little math, it\rquote s easy to see that a byte can hold up to 256 distinct values.\par Each byte of memory has a specific address.  The very first byte of memory has an address of 0, the next byte has an address of 1, and so on.  We generally use hexadecimal math when we talk about memory addresses, mostly because it\rquote s easy to see the individual bytes of the address, which is important for reasons we\rquote ll talk about in a moment.  The Apple II}{\f4\fs20 GS}{\f4  uses the 65816 CPU.  The 65816 has a three-byte address, and there are two hexadecimal digits in each byte, so we\rquote d write the addresses as 0x000000, 0x000001, and so forth.  In practice, we actually use a four byte chunk of memory to store an address, but the fourth byte is not used by the 65816, and rarely written when we\rquote re talking about addresses.  We just assume it\rquote s zero.\par Because the addresses for bytes of memory are stored in bytes, the computer has some natural chunk sizes for memory.  A page of memory is all of the memory with the same two values in the first two bytes.  Another way of looking at a page of memory is that it\rquote s 256 consecutive bytes, numbered 0xnnnn00 to 0xnnnnFF, where nnnn has to be the same value.  There are some advantages to keeping some kinds of memory aligned to a page boundary.  The most common is to align something called the direct page register to a page boundary, which makes some kinds of machine language programs run just a bit faster.  Some instructions in the 65816 instruction set also run a tad slower when the memory you are using crosses a page boundary.  Finally, many of the tools ask specifically for memory in page-size chunks, and require that the pages start at an even page boundary.  The Memory Manager has to be able to handle all of this, so it has a flag that lets you tell it to give you a chunk of memory that starts on a page boundary.\par The next natural chunk of memory is called a bank of memory, and it\rquote s all of the memory with the same first byte.  For example, 0xnn0000 to 0xnnFFFF would be one bank of memory.  A bank of memory is 256 by 256, or 65536 bytes long; we call this 64K, where one K (or Kilobyte) is 1024 bytes.  Banks are important for a lot of reasons.  First, the registers on the 65816 hold two bytes, which means that the computer is a lot more efficient when it deals with information that is in the same bank of memory.  Second, a program can\rquote t lie across a bank boundary.  Please notice that I did not say a program can\rquote t be in several banks, or that a program can\rquote t be bigger than a bank of memory \endash  it can.  The restriction is that a program can\rquote t be put in memory so any one piece of it crosses a bank boundary, so all of the pieces must be smaller than 64K, and each piece must lie entirely in a bank of memory.  The Memory Manager can give you memory that is all in one bank.\par Memory is certainly not created equal.  The 65816 has some special instructions which only work in something called direct page, and direct page memory has to come from bank zero.  (Bank zero is the bank with addresses of 0x000000 to 0x00FFFF.  Bank 0xE1 would be the bank of memory from 0xE10000 to 0xE1FFFF, and so on.)  The hardware stack on the 65816 is also restricted to bank zero.  Finally, the Apple II}{\f4\fs20 GS}{\f4  uses a lot of memory in banks 0x00, 0x01, 0xE0 and 0xE1 for special purposes.  The only memory that\rquote s completely free for use by a program is the memory that starts at bank 0x02, and continues up from there.\par Using the terms from the toolbox reference manuals, the memory that can be used for anything is called \ldblquote allocatable memory.\rdblquote \par Some memory has a special use, but can be used for something else if you don\rquote t need it for the special use.  A good example is the chunk of memory from 0xE12000 to 0xE19FFF, which is where the pixels on the screen are stored; that\rquote s the only place the screen can go, but if you aren\rquote t using the super high resolution graphics screen, you can use that chunk of memory for something else \endash  like your program.  All of this memory is called \ldblquote special memory,\rdblquote  and of course you want to avoid it if you can, just in case it\rquote s needed later for its special purpose.  The Memory Manager will let you avoid allocating special memory.\par Memory which can\rquote t be used for anything but a very specific purpose, like the language card area or memory mapped I/O areas, is called \ldblquote unmanaged memory.\rdblquote   The Memory Manager simply won\rquote t give you that memory, and you should never try to make use of it unless you know exactly how the Apple II}{\f4\fs20 GS}{\f4  uses that memory, and follow all of the rules imposed by the operating system.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Handles}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Handles\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk47}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 In Pascal, C, and most other languages, when you ask for a chunk of memory, you get back a pointer to the first byte of the chunk you get to use.  The pointer, of course, is an address of a byte of memory.  The Apple II}{\f4\fs20 GS}{\f4  Memory Manager doesn\rquote t give you a pointer, though.  Instead, you get back something called a handle.  Back when we first started making Memory Manager calls, I told you it was safe to think of a handle as a pointer to a pointer, which is true up to a point.  (Pun intended.)  Actually, a handle is not just a pointer to a pointer, it\rquote s a pointer to a structure, and the first thing in the structure is a pointer.  This is an important distinction, as you\rquote ll see in a moment.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Why Handles?}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Why Handles?\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Before we go any further, though, let\rquote s stop and see why the Apple II}{\f4\fs20 GS}{\f4  uses handles instead of pointers.  After all, with all of the confusion and extra code needed to deal with handles, there must be a darn good reason for using them instead of a pointer.\par Let\rquote s play a simple mind game, allocating and deallocating memory.  We\rquote ll start off and allocate 10 chunks of memory, each 5 bytes long.  Once we\rquote re finished, the memory is divided up like you see in Figure 8-1.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1053{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw159\pich129\picwgoal3180\pichgoal2580\macpict\bliptag1582287703\blipupi72{\*\blipuid 5e4fcb574d83b3f490b8c1bd43e8dae9}0831ffffffff0080009e1101a0008201000affffffff0080009e09000000000000000031000100560066009d09ffffffffffffffff380900000000000000003100010056000e006509ffffffffffffffff383000010064000e00733000010072000e00813000010080000e008f300001008e000e009d09000000000000000031000d0056001b006509ffffffffffffffff3809000000000000000031000d0064001b007309ffffffffffffffff3809000000000000000031000d0072001b008109ffffffffffffffff3809000000000000000031000d0080001b008f09ffffffffffffffff3809000000000000000031000d008e001b009d09ffffffffffffffff3830001a00560027006530001a00640027007330001a00720027008130001a00800027008f30001a008e0027009d09000000000000000031002600560034006509ffffffffffffffff3809000000000000000031002600640034007309ffffffffffffffff3809000000000000000031002600720034008109ffffffffffffffff3809000000000000000031002600800034008f09ffffffffffffffff38090000000000000000310026008e0034009d09ffffffffffffffff3830003300560041006530003300640041007330003300720041008130003300800041008f300033008e0041009d0900000000000000003100400056004d006509ffffffffffffffff380900000000000000003100400064004d007309ffffffffffffffff380900000000000000003100400072004d008109ffffffffffffffff380900000000000000003100400080004d008f09ffffffffffffffff38090000000000000000310040008e004d009d09ffffffffffffffff3809000000000000000031004c0056005a006509ffffffffffffffff3809000000000000000031004c0064005a007309ffffffffffffffff3809000000000000000031004c0072005a008109ffffffffffffffff3809000000000000000031004c0080005a008f09ffffffffffffffff3809000000000000000031004c008e005a009d09ffffffffffffffff3809000000000000000031005900560066006509ffffffffffffffff3809000000000000000031005900640066007309ffffffffffffffff3809000000000000000031005900720066008109ffffffffffffffff3809000000000000000031005900800066008f09ffffffffffffffff38090000000000000000310059008e0066009d09ffffffffffffffff3809000000000000000031006500560073006509ffffffffffffffff3809000000000000000031006500640073007309ffffffffffffffff3809000000000000000031006500720073008109ffffffffffffffff3809000000000000000031006500800073008f09ffffffffffffffff38090000000000000000310065008e0073009d09ffffffffffffffff3809000000000000000031007200560080006509ffffffffffffffff3809000000000000000031007200640080007309ffffffffffffffff3809000000000000000031007200720080008109ffffffffffffffff3809000000000000000031007200800080008f09ffffffffffffffff38090000000000000000310072008e0080009d09ffffffffffffffff3871001e0004004a000a005600070056000a004a0007004a0004004a0007005622000700301a00a10096000c02000000020000000000000001000a00010003000d00342c000c00150948656c7665746963610300150d000a2b080a09706f696e7465722031a00097a10096000c02000000020000000000000001000a001b0003002700342a1a09706f696e7465722033a00097a10096000c02000000020000000000000001000a00270003003300342a0c09706f696e7465722034a00097a10096000c02000000020000000000000001000a00330003003f00342a0c09706f696e7465722035a00097a10096000c02000000020000000000000001000a000e0003001a0034280017000809706f696e7465722032a0009701000affffffff0080009e71001e0010004a00160056001300560016004a0013004a0010004a0013005622001300301a0071001e001e004a00240056002100560024004a0021004a001e004a0021005622002100301a0071001e002a004a00300056002d00560030004a002d004a002a004a002d005622002d00301a0071001e0036004a003c005600390056003c004a0039004a0036004a0039005622003900301a00a10096000c02000000020000000000000001000a00400003004c00342a3209706f696e7465722036a0009701000affffffff0080009e71001e0043004a00490056004600560049004a0046004a0043004a0046005622004600301a00a10096000c02000000020000000000000001000a004d0003005900342a0d09706f696e7465722037a0009701000affffffff0080009e71001e004f004a00550056005200560055004a0052004a004f004a0052005622005200301a00a10096000c02000000020000000000000001000a00590003006500342a0c09706f696e7465722038a0009701000affffffff0080009e71001e005c004a00620056005f00560062004a005f004a005c004a005f005622005f00301a00a10096000c02000000020000000000000001000a00650003007100342a0c09706f696e7465722039a0009701000affffffff0080009e71001e0069004a006f0056006c0056006f004a006c004a0069004a006c005622006c00301a00a10096000c02000000020000000000000001000a00710000007d003128007a00020a706f696e746572203130a0009701000affffffff0080009e71001e0073004a00790056007600560079004a0076004a0073004a0076005622007600301a00a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 8-1:  Memory After Initial Allocation\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This is a pretty typical state of affairs in a program that uses dynamic memory, but as you know, it\rquote s also fairly common to dispose of memory, and the memory isn\rquote t always disposed of in a neat order.  For example, if the program ends up disposing of every other chunk of memory, we end up with memory looking like Figure 8-2.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1054{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw156\pich128\picwgoal3120\pichgoal2560\macpict\bliptag-1432928376\blipupi72{\*\blipuid aa973f8856d930017e2bf108848252e7}0661ffffffff007f009b1101a0008201000affffffff007f009b09000000000000000031000100530066009a09ffffffffffffffff380900000000000000003100010053000e006209ffffffffffffffff383000010061000e0070300001006f000e007e300001007d000e008c300001008b000e009a09112244881122448831000d0053001b006209ffffffffffffffff3809112244881122448831000d0061001b007009ffffffffffffffff3809112244881122448831000d006f001b007e09ffffffffffffffff3809112244881122448831000d007d001b008c09ffffffffffffffff3809112244881122448831000d008b001b009a09ffffffffffffffff3830001a00530027006230001a00610027007030001a006f0027007e30001a007d0027008c30001a008b0027009a09112244881122448831002600530034006209ffffffffffffffff3809112244881122448831002600610034007009ffffffffffffffff38091122448811224488310026006f0034007e09ffffffffffffffff38091122448811224488310026007d0034008c09ffffffffffffffff38091122448811224488310026008b0034009a09ffffffffffffffff38300033005300410062300033006100410070300033006f0041007e300033007d0041008c300033008b0041009a09000000000000000031004b00530059006209ffffffffffffffff3809000000000000000031004b00610059007009ffffffffffffffff3809000000000000000031004b006f0059007e09ffffffffffffffff3809000000000000000031004b007d0059008c09ffffffffffffffff3809000000000000000031004b008b0059009a09ffffffffffffffff3809112244881122448831005800530065006209ffffffffffffffff3809112244881122448831005800610065007009ffffffffffffffff38091122448811224488310058006f0065007e09ffffffffffffffff38091122448811224488310058007d0065008c09ffffffffffffffff38091122448811224488310058008b0065009a09ffffffffffffffff3809000000000000000031006400530072006209ffffffffffffffff3809000000000000000031006400610072007009ffffffffffffffff38090000000000000000310064006f0072007e09ffffffffffffffff38090000000000000000310064007d0072008c09ffffffffffffffff38090000000000000000310064008b0072009a09ffffffffffffffff380911224488112244883100710053007f006209ffffffffffffffff380911224488112244883100710061007f007009ffffffffffffffff38091122448811224488310071006f007f007e09ffffffffffffffff38091122448811224488310071007d007f008c09ffffffffffffffff38091122448811224488310071008b007f009a09ffffffffffffffff3871001e00040047000a005300070053000a0047000700470004004700070053220007002d1a00a10096000c02000000020000000000000001000a00010000000d00312c000c00150948656c7665746963610300150d000a2b050a09706f696e7465722031a00097a10096000c02000000020000000000000001000a001b0000002700312a1a09706f696e7465722035a00097a10096000c02000000020000000000000001000a00270000003300312a0c09706f696e7465722037a00097a10096000c02000000020000000000000001000a00330000003f00312a0c09706f696e7465722039a00097a10096000c02000000020000000000000001000a000e0000001a0031280017000509706f696e7465722033a0009701000affffffff007f009b71001e00180046001e0053001e0053001e0046001b004700180048001e0053220013002d1a0871001e00300046003a0052003a005200350046003300480030004a003a0052220021002d1b1271001e004600460051005100510051004a0046004800480046004b0051005122002d002d1b1b71001e005e00470069005100690051006100470060004a005e004c00690051220039002d1d2709112244881122448831003f0053004d006209ffffffffffffffff3809112244881122448831003f0061004d007009ffffffffffffffff3809112244881122448831003f006f004d007e09ffffffffffffffff3809112244881122448831003f007d004d008c09ffffffffffffffff3809112244881122448831003f008b004d009a09ffffffffffffffff38a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 8-2:  Memory After Deallocation\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par At this point, half of the memory is actually free, for a total of 25 free bytes of memory, but the larges piece of memory available is only 5 bytes long.  If a program asks for a 6 byte piece of memory, it can\rquote t get it \endash  and the program might easily fail with an out of memory error, even though there\rquote s more than four times as much memory available as it asked for.\par The problem, of course, is that the memory that is available isn\rquote t in a single place.  The solution would be to move the allocated pieces of memory together so the 25 free bytes are all in one place, but if we do that, all of the pointers in the program are invalid \endash  they all point to the wrong place.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1055{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw156\pich128\picwgoal3120\pichgoal2560\macpict\bliptag583545873\blipupi72{\*\blipuid 22c83411507d8734a1b0c0d6ca346cbc}0661ffffffff007f009b1101a0008201000affffffff007f009b09000000000000000031000100530066009a09ffffffffffffffff380900000000000000003100010053000e006209ffffffffffffffff383000010061000e0070300001006f000e007e300001007d000e008c300001008b000e009a09000000000000000031000d0053001b006209ffffffffffffffff3809000000000000000031000d0061001b007009ffffffffffffffff3809000000000000000031000d006f001b007e09ffffffffffffffff3809000000000000000031000d007d001b008c09ffffffffffffffff3809000000000000000031000d008b001b009a09ffffffffffffffff3830001a00530027006230001a00610027007030001a006f0027007e30001a007d0027008c30001a008b0027009a09000000000000000031002600530034006209ffffffffffffffff3809000000000000000031002600610034007009ffffffffffffffff38090000000000000000310026006f0034007e09ffffffffffffffff38090000000000000000310026007d0034008c09ffffffffffffffff38090000000000000000310026008b0034009a09ffffffffffffffff38300033005300410062300033006100410070300033006f0041007e300033007d0041008c300033008b0041009a09112244881122448831004b00530059006209ffffffffffffffff3809112244881122448831004b00610059007009ffffffffffffffff3809112244881122448831004b006f0059007e09ffffffffffffffff3809112244881122448831004b007d0059008c09ffffffffffffffff3809112244881122448831004b008b0059009a09ffffffffffffffff3809112244881122448831005800530065006209ffffffffffffffff3809112244881122448831005800610065007009ffffffffffffffff38091122448811224488310058006f0065007e09ffffffffffffffff38091122448811224488310058007d0065008c09ffffffffffffffff38091122448811224488310058008b0065009a09ffffffffffffffff3809112244881122448831006400530072006209ffffffffffffffff3809112244881122448831006400610072007009ffffffffffffffff38091122448811224488310064006f0072007e09ffffffffffffffff38091122448811224488310064007d0072008c09ffffffffffffffff38091122448811224488310064008b0072009a09ffffffffffffffff380911224488112244883100710053007f006209ffffffffffffffff380911224488112244883100710061007f007009ffffffffffffffff38091122448811224488310071006f007f007e09ffffffffffffffff38091122448811224488310071007d007f008c09ffffffffffffffff38091122448811224488310071008b007f009a09ffffffffffffffff3871001e00040047000a005300070053000a0047000700470004004700070053220007002d1a00a10096000c02000000020000000000000001000a00010000000d00312c000c00150948656c7665746963610300150d000a2b050a09706f696e7465722031a00097a10096000c02000000020000000000000001000a001b0000002700312a1a09706f696e7465722035a00097a10096000c02000000020000000000000001000a00270000003300312a0c09706f696e7465722037a00097a10096000c02000000020000000000000001000a00330000003f00312a0c09706f696e7465722039a00097a10096000c02000000020000000000000001000a000e0000001a0031280017000509706f696e7465722033a0009701000affffffff007f009b71001e00180046001e0053001e0053001e0046001b004700180048001e0053220013002d1a0871001e00300046003a0052003a005200350046003300480030004a003a0052220021002d1b1271001e004600460051005100510051004a0046004800480046004b0051005122002d002d1b1b71001e005e00470069005100690051006100470060004a005e004c00690051220039002d1d2709112244881122448831003f0053004d006209ffffffffffffffff3809112244881122448831003f0061004d007009ffffffffffffffff3809112244881122448831003f006f004d007e09ffffffffffffffff3809112244881122448831003f007d004d008c09ffffffffffffffff3809112244881122448831003f008b004d009a09ffffffffffffffff38a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 8-3:  Memory After Compaction\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Handles solve this problem very neatly.  Instead of keeping a pointer to the chunk of memory, the program has a pointer to a chunk of memory that, in turn, points to the memory.  That way, when the Memory Manager moves the memory around to combine the smaller pieces, the program doesn\rquote t get messed up.  After all, the program doesn\rquote t keep a pointer to the memory at all, it keeps a pointer to a pointer, and the Memory Manager is free to update the actual pointers as the memory is moved around.\par \par }\pard \qc\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1056{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw444\pich129\picwgoal8880\pichgoal2580\macpict\bliptag-1943209641\blipupi72{\*\blipuid 8c2cf95728786fe44910d4073788194e}0fd5ffffffff008001bb1101a0008201000affffffff008001bb0900000000000000003100010173006601ba09ffffffffffffffff380900000000000000003100010173000e018209ffffffffffffffff383000010181000e0190300001018f000e019e300001019d000e01ac30000101ab000e01ba09000000000000000031000d0173001b018209ffffffffffffffff3809000000000000000031000d0181001b019009ffffffffffffffff3809000000000000000031000d018f001b019e09ffffffffffffffff3809000000000000000031000d019d001b01ac09ffffffffffffffff3809000000000000000031000d01ab001b01ba09ffffffffffffffff3830001a01730027018230001a01810027019030001a018f0027019e30001a019d002701ac30001a01ab002701ba09000000000000000031002601730034018209ffffffffffffffff3809000000000000000031002601810034019009ffffffffffffffff38090000000000000000310026018f0034019e09ffffffffffffffff38090000000000000000310026019d003401ac09ffffffffffffffff3809000000000000000031002601ab003401ba09ffffffffffffffff38300033017300410182300033018100410190300033018f0041019e300033019d004101ac30003301ab004101ba0911224488112244883100400173004d018209ffffffffffffffff380911224488112244883100400181004d019009ffffffffffffffff38091122448811224488310040018f004d019e09ffffffffffffffff38091122448811224488310040019d004d01ac09ffffffffffffffff3809112244881122448831004001ab004d01ba09ffffffffffffffff3809112244881122448831004c0173005a018209ffffffffffffffff3809112244881122448831004c0181005a019009ffffffffffffffff3809112244881122448831004c018f005a019e09ffffffffffffffff3809112244881122448831004c019d005a01ac09ffffffffffffffff3809112244881122448831004c01ab005a01ba09ffffffffffffffff3809112244881122448831005901730066018209ffffffffffffffff3809112244881122448831005901810066019009ffffffffffffffff38091122448811224488310059018f0066019e09ffffffffffffffff38091122448811224488310059019d006601ac09ffffffffffffffff3809112244881122448831005901ab006601ba09ffffffffffffffff3809112244881122448831006501730073018209ffffffffffffffff3809112244881122448831006501810073019009ffffffffffffffff38091122448811224488310065018f0073019e09ffffffffffffffff38091122448811224488310065019d007301ac09ffffffffffffffff3809112244881122448831006501ab007301ba09ffffffffffffffff3809112244881122448831007201730080018209ffffffffffffffff3809112244881122448831007201810080019009ffffffffffffffff38091122448811224488310072018f0080019e09ffffffffffffffff38091122448811224488310072019d008001ac09ffffffffffffffff3809112244881122448831007201ab008001ba09ffffffffffffffff3871001e00040167000a017300070173000a016700070167000401670007017322000701561100a10096000c02000000020000000000000001000a00010129000d015a2c000c00150948656c7665746963610300150d000a28000a012e09706f696e7465722031a00097a10096000c02000000020000000000000001000a001b01290027015a2a1a09706f696e7465722035a00097a10096000c02000000020000000000000001000a002701290033015a2a0c09706f696e7465722037a00097a10096000c02000000020000000000000001000a00330129003f015a2a0c09706f696e7465722039a00097a10096000c02000000020000000000000001000a000e0129001a015a280017012e09706f696e7465722033a0009701000affffffff008001bb71001e001001670016017300130173001601670013016700100167001301732200130156110071001e001e016700240173002101730024016700210167001e0167002101732200210156110071001e002a016700300173002d017300300167002d0167002a0167002d017322002d0156110071001e00360167003c017300390173003c01670039016700360167003901732200390156110071001e0004011f000a012b0007012b000a011f0007011f0004011f0007012b220007010e1100a10096000c02000000020000000000000001000a000100e1000d011228000a00e60868616e646c652031a00097a10096000c02000000020000000000000001000a001b00e1002701122a1a0868616e646c652035a00097a10096000c02000000020000000000000001000a002700e1003301122a0c0868616e646c652037a00097a10096000c02000000020000000000000001000a003300e1003f01122a0c0868616e646c652039a00097a10096000c02000000020000000000000001000a000e00e1001a011228001700e60868616e646c652033a0009701000affffffff008001bb71001e0010011f0016012b0013012b0016011f0013011f0010011f0013012b220013010e110071001e001e011f0024012b0021012b0024011f0021011f001e011f0021012b220021010e110071001e002a011f0030012b002d012b0030011f002d011f002a011f002d012b22002d010e110071001e0036011f003c012b0039012b003c011f0039011f0036011f0039012b220039010e1100090000000000000000310001009b006600e209ffffffffffffffff38090000000000000000310001009b000e00aa09ffffffffffffffff3830000100a9000e00b830000100b7000e00c630000100c5000e00d430000100d3000e00e209112244881122448831000d009b001b00aa09ffffffffffffffff3809112244881122448831000d00a9001b00b809ffffffffffffffff3809112244881122448831000d00b7001b00c609ffffffffffffffff3809112244881122448831000d00c5001b00d409ffffffffffffffff3809112244881122448831000d00d3001b00e209ffffffffffffffff3830001a009b002700aa30001a00a9002700b830001a00b7002700c630001a00c5002700d430001a00d3002700e2091122448811224488310026009b003400aa09ffffffffffffffff3809112244881122448831002600a9003400b809ffffffffffffffff3809112244881122448831002600b7003400c609ffffffffffffffff3809112244881122448831002600c5003400d409ffffffffffffffff3809112244881122448831002600d3003400e209ffffffffffffffff38300033009b004100aa30003300a9004100b830003300b7004100c630003300c5004100d430003300d3004100e209000000000000000031004b009b005900aa09ffffffffffffffff3809000000000000000031004b00a9005900b809ffffffffffffffff3809000000000000000031004b00b7005900c609ffffffffffffffff3809000000000000000031004b00c5005900d409ffffffffffffffff3809000000000000000031004b00d3005900e209ffffffffffffffff38091122448811224488310058009b006500aa09ffffffffffffffff3809112244881122448831005800a9006500b809ffffffffffffffff3809112244881122448831005800b7006500c609ffffffffffffffff3809112244881122448831005800c5006500d409ffffffffffffffff3809112244881122448831005800d3006500e209ffffffffffffffff38090000000000000000310064009b007200aa09ffffffffffffffff3809000000000000000031006400a9007200b809ffffffffffffffff3809000000000000000031006400b7007200c609ffffffffffffffff3809000000000000000031006400c5007200d409ffffffffffffffff3809000000000000000031006400d3007200e209ffffffffffffffff38091122448811224488310071009b007f00aa09ffffffffffffffff3809112244881122448831007100a9007f00b809ffffffffffffffff3809112244881122448831007100b7007f00c609ffffffffffffffff3809112244881122448831007100c5007f00d409ffffffffffffffff3809112244881122448831007100d3007f00e209ffffffffffffffff3871001e0004008f000a009b0007009b000a008f0007008f0004008f0007009b22000700751a00a10096000c02000000020000000000000001000a00010048000d007928000a004d09706f696e7465722031a00097a10096000c02000000020000000000000001000a001b0048002700792a1a09706f696e7465722035a00097a10096000c02000000020000000000000001000a00270048003300792a0c09706f696e7465722037a00097a10096000c02000000020000000000000001000a00330048003f00792a0c09706f696e7465722039a00097a10096000c02000000020000000000000001000a000e0048001a0079280017004d09706f696e7465722033a0009701000affffffff008001bb71001e0018008e001e009b001e009b001e008e001b008f00180090001e009b22001300751a0871001e0030008e003a009a003a009a0035008e0033009000300092003a009a22002100751b1271001e0046008e0051009900510099004a008e00480090004600930051009922002d00751b1b71001e005e008f00690099006900990061008f00600092005e00940069009922003900751d2771001e0004003e000a004a0007004a000a003e0007003e0004003e0007004a220007002d1100a10096000c02000000020000000000000001000a00010000000d003128000a00050868616e646c652031a00097a10096000c02000000020000000000000001000a001b0000002700312a1a0868616e646c652035a00097a10096000c02000000020000000000000001000a00270000003300312a0c0868616e646c652037a00097a10096000c02000000020000000000000001000a00330000003f00312a0c0868616e646c652039a00097a10096000c02000000020000000000000001000a000e0000001a003128001700050868616e646c652033a0009701000affffffff008001bb71001e0010003e0016004a0013004a0016003e0013003e0010003e0013004a220013002d110071001e001e003e0024004a0021004a0024003e0021003e001e003e0021004a220021002d110071001e002a003e0030004a002d004a0030003e002d003e002a003e002d004a22002d002d110071001e0036003e003c004a0039004a003c003e0039003e0036003e0039004a220039002d110009112244881122448831003f009b004d00aa09ffffffffffffffff3809112244881122448831003f00a9004d00b809ffffffffffffffff3809112244881122448831003f00b7004d00c609ffffffffffffffff3809112244881122448831003f00c5004d00d409ffffffffffffffff3809112244881122448831003f00d3004d00e209ffffffffffffffff38a00083ff}}{\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 8-4:  Compaction with Handles\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Locking Memory}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Locking Memory\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Of course, there are some problems with this scheme.  The obvious problem is that there are a lot of cases when you don\rquote t want something to move.  If you know much about machine language programs, you can imagine the havoc it would play with a program to move the program itself, or even the program\rquote s data, while the program was trying to run!  Even for your own dynamic memory, there may be times when you need to keep pointers to the memory, and it would blow your program out of the water if something moved.  Finally, even if it\rquote s OK for a chunk of memory to me moveable most of the time, it needs to hold still while you are trying to read or write to the area \endash  and on a machine like the Apple II}{\f4\fs20 GS}{\f4 , which has a lot of interrupt handlers running in the background, it\rquote s quite possible for something to make a Memory Manager call that will shift memory around even if you aren\rquote t making any tool calls in your subroutine.  In short, the ability to move chunks of memory around to combine small free pieces into larger ones is pretty neat, but there are a lot or problems with this scheme.\par The Memory Manager handles all of this fairly smoothly with the concept of locked memory.  A locked chunk of memory can\rquote t be moved.  If you\rquote ll think back, we\rquote ve been locking and unlocking memory all along, and this is why we\rquote ve been doing it.  When you are about to read or write to a chunk of memory through a handle, the first step is to lock the memory.  If you like, you can then get the actual pointer; that\rquote s called dereferencing the handle, and in some cases it will make your program run a lot faster.  Finally, when you\rquote re through with a piece of memory, you unlock it so the Memory Manager can move it again if it needs to.\par So far things look pretty good, but what if you accidentally unlock a chunk of memory that should }{\i\f4 never}{\f4  be moved, like a chunk of memory that holds some executable code?  To prevent that, the Memory Manager lets you ask for memory that is fixed, which basically means that it is always locked.  You can still use }{\f6\fs20 HLock}{\f4  and }{\f6\fs20 HUnlock}{\f4 , and you won\rquote t get an error, but the Memory Manager will never move the memory, even if it is unlocked.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Purgeable Memory}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Purgeable Memory\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Another really useful feature of the Memory Manager is its ability to mark memory as purgeable.  When memory is purgeable, it\rquote s still there, but the Memory Manager is allowed to get rid of it if someone asks for memory, and there isn\rquote t enough around to satisfy the request.\par It may seem strange to have such a thing as purgeable memory, and in a lot of programs you\rquote ll never use this idea, but you\rquote re still getting the advantage of purgeable memory all of the time.  One way you can take advantage of purgeable memory is to write programs that don\rquote t depend on the initial values of global variables.  Basically, that means never assuming that a global variable really starts off with a value of 0.  When you do this, your program can be restarted.  What that means is that when you leave the program, it stays in memory \endash  and if the user restarts your program before anything else uses the memory, it starts up from memory, rather than taking the time to reload the program from disk.\par Another place this idea is used is in the ORCA development environment.  When you load a file from disk to edit it or compile it, then close the file, the ORCA shell doesn\rquote t actually get rid of the file.  Instead, the file is written to disk, but it stays in memory, too.  Then, when you edit the file again, the copy that\rquote s already in memory can be used, saving a lot of time.\par These are the sorts of things you might use purgeable memory for in your own programs, too.  Basically, any time you have temporary information \endash  something you could get from disk or recalculate if you need it again \endash  you should store the information in purgeable memory.  That way, if someone else needs the memory, your purgeable chunk can be used.  In all likelihood, whoever used the memory will free up the memory again before you need it.  All you have to do is check the handle to make sure the memory hasn\rquote t been purged before you lock it.  And, incidentally, locking the memory also prevents it from being purged, so the information is safe until you unlock it again.\par We\rquote ll look at the calls to mark memory as purgeable, as well as looking at some details about purge levels and the like, a little later in this lesson.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 How Memory is Allocated}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 How Memory is Allocated\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 All of this is starting to get pretty involved.  Memory can be fixed or moveable, purgeable or not purgeable, locked or unlocked \endash  with all of these options, it might seem like it would be pretty easy to end up with memory that was almost as fragmented as with pointers.  Well, it would be \endash  except for a convention the Memory Manager uses when it allocates memory, and that you have to follow to make things work smoothly.\par If your program deals exclusively or mainly with fixed chunks of memory, and does a lot of allocating and deallocating in no particular order, it won\rquote t be long before memory gets pretty fragmented.  Also, the current Memory Manager won\rquote t change the order of chunks of memory; it just pushes moveable chunks as far towards the end of memory as it can when it needs to make room.  Because of this, if moveable and fixed memory is more or less randomly scattered through memory, you\rquote ll still fragment the memory pretty quickly, since the moveable chunks won\rquote t be moved around the fixed chunks.\par Obviously, things will work better if the fixed memory is kept near the bottom of memory, and doesn\rquote t have many gaps; and if moveable memory is kept near the top of memory, and doesn\rquote t have any fixed memory stuffed in the middle.  That\rquote s just what the Memory Manager tries to do for you.  If you ask for fixed memory, the Memory Manager gives you the first chunk of memory it can find that meets all of your requirements, starting its search from the lowest memory address and working up.  If you ask for moveable memory, the Memory Manager scans from the end of memory, and works towards the beginning.\par You have to help, though.  If you are asking for a fixed piece of memory, you should make sure it\rquote s a chunk that will stay around for a while.  If you won\rquote t need the memory long, it might be best to ask for a moveable piece of memory and just keep it locked.  That way, the fixed memory area won\rquote t get fragmented.  And, if you ask for moveable memory, you should do everything you can to keep it moveable as much as possible.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Writing Efficient Programs}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Writing Efficient Programs\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the problems with the Memory Manager is that it doesn\rquote t deal with huge numbers of handles very well.  As your program, the tools, and the various desk accessories and Inits start to allocate memory, some operations will slow down noticeably compared to a configuration that uses fewer handles.  To keep this problem at bay, I\rquote d recommend allocating a few large chunks of memory instead of a lot of small ones.  That\rquote s what ORCA/C does when you use the }{\f6\fs20 malloc}{\f4  and }{\f6\fs20 free}{\f4  functions, so if you need a lot of small pieces of fixed memory, just use }{\f6\fs20 malloc}{\f4  and }{\f6\fs20 free}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 So What\rquote s a Handle?}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 So What\rquote s a Handle?\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Even up until this point, everything we\rquote ve said about a handle is that it\rquote s a pointer to a pointer.  For the most part, that\rquote s exactly how you should think of it.  If you stop and think about it, though, you can see that the Memory Manager needs to know a lot more about a chunk of memory than where it is at.  The Memory Manager has to keep track of whether the memory is fixed or moveable, whether it\rquote s locked at the moment, and whether the memory is purgeable.  It also needs to know how big the chunk of memory is, whether it has to remain in a fixed bank, whether it is page aligned or bank aligned, and even who owns the memory.  All of that information, and more, is in the record the Memory Manager uses for each and every handle.  The first field in that record is certainly a pointer to the memory, but that isn\rquote t all that\rquote s in the handle.  So what is actually in the record?  Well, to put it bluntly, it\rquote s none of our business.  Except for the first field, the format for a handle is private, and only the Memory Manager knows or cares just what the record looks like.  That\rquote s good in most respects, because it means Apple can change and improve the Memory Manager without worrying (much) about breaking other programs.\par The point, though, is that a handle is really not just a pointer to a pointer.  If some tool call asks for a handle, you darn well better give it one.  Don\rquote t assume that it\rquote s OK to just pass the address of a pointer, or even a pointer to a pointer.  Even if you try it and it works, the toolbox may change in some future version, and break your program.  If the description of a tool call says you are supposed to use a handle, accept no substitutes: pass a handle that was actually created by the Memory Manager.\par {\*\bkmkend bk47}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 handles}{\rxe bk47}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Allocating Memory}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Allocating Memory\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewHandle}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 With all of the newfound knowledge, let\rquote s go back and take a closer look at the }{\f6\fs20 NewHandle}{\f4  call, and especially at the flags word.  The }{\f6\fs20 NewHandle}{\f4  call looks like this:\par \par }{\f6\fs20 hndl = NewHandle(size, userID, attributes, location);\par }{\f4 \par The size is just the number of bytes you want, and of course the result is a handle.  (If there is an error, }{\f6\fs20 NULL}{\f4  is returned, and you can get the error number from }{\f6\fs20 toolerror}{\f4 .)  It\rquote s the last three parameters that can be more useful than you would expect from what was mentioned in earlier lessons.\par The }{\f6\fs20 userID}{\f4  is a unique number assigned to your program when it was started.  You can actually ask for your own user ID, but it\rquote s rarely a good idea to do that.  The reason is simple: the program launcher that starts your program knows your user ID, and when your program finishes, the program launcher can make sure all of your memory is deallocated, even if your program messes up.  If the program allocates another user ID of its own, the program launcher can\rquote t double-check to make sure all of the memory gets deallocated.\par On the other hand, it\rquote s nice to be able to set aside some user ID\rquote s for yourself, mostly because there are a few Memory Manager calls that can work on a whole group of handles, doing something to all of the handles with a particular user ID.  A common example is }{\f6\fs20 DisposeAll}{\f4 , which disposes of all of the handles that use a particular user ID at the same time.  You can get sixteen distinct sub-user ID\rquote s to help make efficient use of the calls that work on more than one handle without resorting to allocating an entirely new user ID.  All you have to do is or the main user ID with 0x0n00, where n is some hexadecimal digit other than 0.  In fact, ORCA/C does exactly that \endash  when you use ORCA/C\rquote s }{\f6\fs20 userid}{\f4  function, it returns the program\rquote s main user ID ored with 0x0100.\par The attributes flag is the parameter that gives you the most control over the way memory is actually allocated.  This parameter is a series of bit flags.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HLock}}}{\v\f4 \par }\pard \qj\fi-2160\li2520\widctlpar\tx1080\adjustright {\f4 15\tab }{\f6\fs20 attrLocked}{\f4 \tab This bit is set when a handle is locked, and clear when it is not locked.  It\rquote s pretty handy when you\rquote re allocating memory, since you can allocate the memory in an initial locked state, saving yourself the trouble of an explicit call to }{\f6\fs20 HLock}{\f4  to lock the new handle.\par \par 14\tab }{\f6\fs20 attrFixed}{\f4 \tab This bit is set for fixed memory, and clear for moveable memory.  Both bits 14 and 15 must be clear before the Memory Manager will actually move the memory.\par \par 13-10\tab \tab Reserved; set to 0.\par \par 9-8\tab }{\f6\fs20 attrPurge}{\f4 \tab These two bits define the initial purge level, which can be 0 (00), 1 (01), 2 (10) or 3 (11).  Purge levels are described later in this lesson.\par \par 7-5\tab \tab Reserved; set to 0.\par \par 4\tab }{\f6\fs20 attrNoCross}{\f4 \tab If this bit is set, the Memory Manager will make sure that all of the memory is in a single bank of memory.  This can be pretty important for some applications.  For example, you should always set this bit if you are bypassing C\rquote s }{\f6\fs20 malloc}{\f4  and }{\f6\fs20 free}{\f4  calls, but will be using C with the small memory model to access arrays or pointers in the memory.\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx360\adjustright {\f20 }{\f4 \tab }{\b\f4 Note}{\f4 \tab A common mistake is to ask for more than 64K of memory but set this flag.  Since a bank of memory can only hold 64K, there is no way to allocate more than 64K without crossing a bank boundary, and the Memory Manager returns an out of memory error.\~\~}{\f20\fs20 }{\f4 \par }\pard \qj\fi-2160\li2520\widctlpar\tx1080\adjustright {\f4 \par 3\tab }{\f6\fs20 attrNoSpec}{\f4 \tab If this bit is set, the Memory Manager won\rquote t give you any special memory.\par \par 2\tab }{\f6\fs20 attrPage}{\f4 \tab If this bit is set, the Memory Manager will make sure the chunk of memory it returns starts on a page boundary.  Another way of looking at it is that the last two digits of the address will be 00.\par \par \tab \tab The most common use for this flag is when you are starting tools without the assistance of }{\f6\fs20 startdesk}{\f4  or }{\f6\fs20 StartUpTools}{\f4 .  Many of the tools ask for page aligned chunks of memory from bank zero, and you need to set this flag to satisfy the \ldblquote page aligned\rdblquote  part of the requirement.\par \par 1\tab }{\f6\fs20 attrAddr}{\f4 \tab The toolbox documentation is a little misleading when it describes this flag; it says the flag forces the memory to }{\i\f4 remain}{\f4  at a fixed address.  Actually, this flag forces the memory to be }{\i\f4 allocated}{\f4  at a particular location; specifically, wherever the last parameter, }{\f6\fs20 location}{\f4 , points.  The }{\f6\fs20 attrFixed}{\f4  flag is the one that causes a chunk of memory to stay at a fixed location once it is allocated.\par \par \tab \tab You should almost never use this flag.  The only excuse is when you need a specific piece of memory that is set aside for a particular purpose.  For example, QuickDraw II would use this flag to allocate the screen buffer for the super high resolution graphics screen, which has to be at 0xE12000.  Some animation programs might also use this flag to allocate the shadow buffer.\par \par 0\tab }{\f6\fs20 attrBank}{\f4 \tab If this flag is set, the memory will come from a specific bank, but it can come from anywhere in the bank.  The most common use for this flag is also for allocating direct page space when initializing tools.\par \par \tab \tab When this flag is set, the last parameter, }{\f6\fs20 location}{\f4 , should point to the proper bank.  It doesn\rquote t matter where in the bank }{\f6\fs20 location}{\f4  points; the last two bytes of this address are ignored.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The last parameter, }{\f6\fs20 location}{\f4 , is only used if }{\f6\fs20 attrAddr}{\f4  or }{\f6\fs20 attrBank}{\f4  is set.\par Most of the time you\rquote ll ask for memory with a flags word of 0x8000 or 0x8010, giving you a moveable chunk of memory that starts locked.  The later case of 0x8010 also makes sure the memory doesn\rquote t cross a bank boundary.  The next most common values would be 0xC000 or 0xC010, which gives you a chunk of memory that will never be moved.  In rare cases, you might ask for memory with a flags word of 0xC015, which says that the memory is fixed, may not cross a bank boundary, is page aligned, and comes from a particular bank.  That\rquote s the correct setting for allocating memory from bank zero when you\rquote re initializing a tool.  For example, the Print Manager needs one page of memory, so you would get it like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 printHandle = NewHandle(256, userid(), 0xC015, 0);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Even better is to let }{\f6\fs20 StartUpTools}{\f4  start the Print Manager so you don\rquote t have to worry about this sort of detail.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Purgeable Memory}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Purgeable Memory\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 purgeable memory}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 At the start of the lesson we talked about a lot of the different things the Memory Manager can do with memory, and one of these was to mark memory as purgeable.  The Memory Manager is allowed to dispose of purgeable memory if it needs to to try and satisfy a }{\f6\fs20 NewHandle}{\f4  call.\par Of course, some things are more important than others, so there are purge levels.  Memory that can\rquote t be purged has a purge level of 0.  Purge levels of 1, 2 and 3 are successively more likely to be purged; the Memory Manager will purge all of the memory with a purge level of 3 before it gets desperate and starts in on the memory with a purge level of 2.  Purge level 3 is actually reserved for the System Loader, which uses it for restartable programs.\par You can set the purge level when the memory is originally allocated, or you can set the purge level later with }{\f6\fs20 SetPurge}{\f4 :\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 SetPurge(level, myHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Either way, the memory won\rquote t be purged if it is locked.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 So what happens if the memory is purged?  Well, the handle is still there, but the pointer is }{\f6\fs20 NULL}{\f4  (which has a value of 0).  So, if you are using purgeable memory, always start by locking the memory, then check to see if the pointer is }{\f6\fs20 NULL}{\f4 .  If it is, you need to reallocate the memory and recalculate or reload whatever should be in the chunk of memory.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Finding Free Memory}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Finding Free Memory\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FreeMem}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are three Memory Manager calls that can give you some idea of how much memory is available, although none tell you enough to tell if a particular request is going to succeed.  The first is }{\f6\fs20 FreeMem}{\f4 , which doesn\rquote t use any parameters, and returns the total number of free bytes.  This does not include memory that can be made free by purging; it only counts the bytes that are actually unused when }{\f6\fs20 FreeMem}{\f4  is called.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 RealFreeMem}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you want to know how much memory is available, use }{\f6\fs20 RealFreeMem}{\f4 .  Like }{\f6\fs20 FreeMem}{\f4 , this call doesn\rquote t need any parameters, and returns a long integer value that is the number of free bytes.  This time, though, the call also counts any bytes that are in an unlocked, purgeable chunk of memory.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MaxBlock}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 FreeMem}{\f4  and }{\f6\fs20 RealFreeMem}{\f4  tell you the total amount of free memory, but they don\rquote t give you a clue about how that memory is organized.  The most useful single number about how memory is organized is the largest single piece of free memory, which is returned by }{\f6\fs20 MaxBlock}{\f4 .  Like the other calls, it doesn\rquote t need any parameters.  }{\f6\fs20 MaxBlock}{\f4  returns the size of the largest piece of free memory.  Like }{\f6\fs20 FreeMem}{\f4 , it doesn\rquote t take into account purgeable memory, so you might be able to allocate a bigger block of memory than }{\f6\fs20 MaxBlock}{\f4  says is available.\par In the end, these numbers don\rquote t mean much to a running program.  The only way to tell if you can get a particular chunk of memory is to try.  These calls can be useful, though, to tell the user how much memory is lying around.\par \par Problem 8-1:  Change Frame so the about box shows the total free memory (as returned by }{\f6\fs20 RealFreeMem}{\f4 ) and the largest block of free memory (as returned by }{\f6\fs20 MaxBlock}{\f4 ).\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1057{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \tab }{\b\f4 Hint}{\f4 \tab Use substitution strings.\~\~}{{\pict{\*\picprop\shplid1058{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson has covered the concepts behind the Memory Manager.  You learned what a handle really is, how memory is managed by the Memory Manager, how to use purgeable memory, when to use the Memory Manager and when to use C\rquote s }{\f6\fs20 malloc}{\f4  and }{\f6\fs20 free}{\f4  functions, and how to find out how much free memory is available.\par It\rquote s worth repeating something that I pointed out at the start of the course.  This is an introductory toolbox course, and there is no attempt at covering all of the tool calls available.  There are a lot of other Memory Manager tool calls, and it would be a great idea to browse through the toolbox reference manuals to see what else is available.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 FreeMem\tab MaxBlock\tab RealFreeMem\tab SetPurge\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk48}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Memory Manager}{\rxe bk48}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 9 \endash  Drawing on the Front Side of the Screen}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 9 \endash  Drawing on the Front Side of the Screen}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 9 \endash  Drawing on the Front Side of the Screen\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson concentrates on the graphics capabilities of the Apple II}{\f4\fs20 GS}{\f4 .  Of course, we\rquote ve been using a GUI (Graphical User Interface) all along, but up until now we\rquote ve concentrated on using existing tools to draw menus, windows, and so forth.  This lesson looks at the graphics package for the Apple II}{\f4\fs20 GS}{\f4 , QuickDraw II.  It also looks at the hardware capabilities of the Apple II}{\f4\fs20 GS}{\f4  that allow it to display colors, and how you can select colors from the palette of 4096 that are available.  Finally, we\rquote ll look at a few topics, like regions, that add a lot of power to the basic drawing commands of the Apple II}{\f4\fs20 GS}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Super High Resolution Graphics}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Super High Resolution Graphics\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Super High Resolution Graphics Screen}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 The Super High Resolution Graphics Screen\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 super high resolution graphics}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SHR screen}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Apple II}{\f4\fs20 GS}{\f4  toolbox always draws using super high-resolution (SHR) graphics.  This graphics mode uses a single 32K screen buffer, located at 0xE12000 in the Apple II}{\f4\fs20 GS}{\f4 \rquote s memory.  There are actually three distinct parts of the screen buffer, all of which are read by the display hardware of the Apple II}{\f4\fs20 GS}{\f4  to draw the colored pixels you see on the screen.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scan lines}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The first chunk of memory is a 32000 byte buffer that contains the actual pixels that are displayed on the monitor.  The buffer is arranged as 200 scan lines, one for each of the lines of pixels the Apple II}{\f4\fs20 GS}{\f4  can display.  The lines are arranged top to bottom, so that the top scan line is at 0xE12000, the next scan line at 0xE120A0, and so forth.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1059{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw258\pich129\picwgoal5160\pichgoal2580\macpict\bliptag340704918\blipupi72{\*\blipuid 144ebe969865a23647b94026d73f6640}051cffffffff008001011101a00082a10096000c02000000020000000000000001000a00030000000f002c2c000c00150948656c7665746963610300150d000a2e0004000001002b020c0724453132303030a00097a10096000c02000000020000000000000001000a001500000021002d2a120724453132304130a00097a10096000c02000000020000000000000001000a002700000033002c2a120724453132313430a00097a10096000c02000000020000000000000001000a003900000045002d2a120724453132314530a00097a10096000c02000000020000000000000001000a004b00000057002c2a120724453132323830a0009701000affffffff00800101090000000000000000310001003a0014004d09ffffffffffffffff38300001004c0014005f090000000000000000310001005e0014007109ffffffffffffffff3809000000000000000031000100700014008309ddff77ffddff77ff38090000000000000000310013003a0026004d09ffffffffffffffff38090000000000000000310013004c0026005f09ffffffffffffffff38090000000000000000310013005e0026007109ddff77ffddff77ff380977dd77dd77dd77dd300013007000260083090000000000000000310025003a0038004d09ffffffffffffffff38090000000000000000310025004c0038005f09ddff77ffddff77ff380977dd77dd77dd77dd300025005e0038007109aa55aa55aa55aa55300025007000380083090000000000000000310037003a004a004d09ddff77ffddff77ff380977dd77dd77dd77dd300037004c004a005f09aa55aa55aa55aa55300037005e004a00710988228822882288223000370070004a0083090000000000000000310049003a005c004d0977dd77dd77dd77dd3809aa55aa55aa55aa55300049004c005c005f098822882288228822300049005e005c00710988002200880022003000490070005c008309ffffffffffffffff22005b005e002422005b0070001222005b00820009a0008c2200010082360022001300822d00220025008224002200370082120022004900820900a0008d09aa55aa55aa55aa5530005b003a006e004d09882288228822882230006d003a0080004d30005b004c006e005f0977dd77dd77dd77dd30000100820014009509aa55aa55aa55aa553000010094001400a73000130082002600950988228822882288223000250082003800953000130094002600a70980000800800008003000490082005c00950980000000080000003000490094005c00a709ffffffffffffffff3000370094004a00a70988002200880022003000250094003800a709882288228822882230000100a6001400b909880022008800220030001300a6002600b909800000000800000030004900a6005c00b930003700a6004a00b909800008008000080030002500a6003800b909880022008800220030005b005e006e007130000100b8001400cb09800008008000080030000100ca001400dd30001300b8002600cb09800000000800000030000100dc001400ef30001300ca002600dd30002500b8003800cb30003700b8004a00cb09800008008000080030005b0070006e008330006d005e0080007109880022008800220030006d004c0080005f09800000000800000030005b0082006e009530006d00700080008330005b0094006e00a730006d00820080009530002500ca003800dd30001300dc002600ef30000100ee001401010988002200880022003000370082004a00950980000800800008003000370094004a00a7a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-1:  Mapping of Scan Lines\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 640 mode}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 320 mode}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In the 640 graphics mode we\rquote ve used for most of our programs, each of the 160 byte scan lines contains 640 pixels.  The pixels are arranged in a simple, linear map, with the leftmost pixel in the most significant two bits of the first byte of the scan line, and so forth across the screen.  This gives four pixels in each byte, with two bits per pixel.  In 320 mode, each pixel uses four bits, so only two pixels fit in each byte of the scan line.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1060{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw428\pich111\picwgoal8560\pichgoal2220\macpict\bliptag-1268215511\blipupi72{\*\blipuid b4689129b75a49debe427b1b84496d5e}0479ffffffff006e01ab1101a0008201000affffffff006e01ab30004000390053005e300040005d005300823000400081005300a630004000a5005300ca30004000c9005300ee30004000ed0053011230004001110053013630004001350053015a3000130039002600823000130081002600ca30001300c90026011230001301110026015aa10096000c02000000020000000000000001000a005600480062004f2c000c00150948656c7665746963610300150d000a2e0004000001002b495f0130a00097a10096000c02000000020000000000000001000a0056006c0062007329240131a00097a10096000c02000000020000000000000001000a005600900062009729240132a00097a10096000c02000000020000000000000001000a005600b4006200bb29240133a00097a10096000c02000000020000000000000001000a005600d8006200df29240134a00097a10096000c02000000020000000000000001000a005600fc0062010329240135a00097a10096000c02000000020000000000000001000a005601200062012729240136a00097a10096000c02000000020000000000000001000a005601440062014b29240137a00097a10096000c02000000020000000000000001000a0029005a00350061280032005b0130a00097a10096000c02000000020000000000000001000a002900a2003500a929480131a00097a10096000c02000000020000000000000001000a002900ea003500f129480132a00097a10096000c02000000020000000000000001000a002901320035013929480133a00097a10096000c02000000020000000000000001000a001700000023002f280020000108333230204d6f6465a00097a10096000c02000000020000000000000001000a004400000050002f2a2d08363430204d6f6465a00097a10096000c02000000020000000000000001000a000500480011007428000e004a0724453132303030a00097a10096000c02000000020000000000000001000a000500d80011010429900724453132303031a0009701000affffffff006e01ab3000130159002601a23000400159005301a2090000000000000000310001018f006e01ab38098800220088002200220013018ff700098822882288228822220013018bf70009aa55aa55aa55aa552200130186f7000977dd77dd77dd77dd2200130182f700220013017df700098800220088002200220025018ff700098822882288228822220025018bf70009aa55aa55aa55aa552200250186f7000977dd77dd77dd77dd2200250182f700220025017df700098800220088002200220040018ff700098822882288228822220040018bf70009aa55aa55aa55aa552200400186f7000977dd77dd77dd77dd2200400182f700220040017df700098800220088002200220052018ff700098822882288228822220052018bf70009aa55aa55aa55aa552200520186f7000977dd77dd77dd77dd2200520182f700220052017df70009ffffffffffffffff2200130038001222001300c80012220013015800122200400038001222004000c8001222004001580012a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-2:  Mapping of Pixels in a Scan Line\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SCB}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Right after the 32000 bytes that map to pixels are 200 additional bytes, one for each scan line.  Once again, a simple linear order is used: the first byte corresponds to the top line of pixels on the screen, the next byte to the second line, and so on.  These bytes are the scan line control bytes, and each one has control of a number of different characteristics for the scan line.  We\rquote ll talk about the scan line control bytes in detail later, after we\rquote ve looked at colors.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The third area of the screen buffer is a series of 16 color tables, each needing 32 bytes.  These are pretty involved, so we\rquote ll break the discussion of colors out into a separate section.\par If you\rquote ve been counting, we\rquote re still 56 bytes short of 32K.  The extra 56 bytes are at the end of the 200 scan line control bytes, right before the color tables.  The extra 56 bytes aren\rquote t used for anything, although a few QuickDraw commands will set these bytes in the process of changing the rest of the scan line control bytes.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Colors in 320 Mode}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Colors in 320 Mode\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 320 mode}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 colors}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 ;\par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Each pixel on the 320 mode graphics screen is set using four bits of memory, so it\rquote s easy enough to see that you can set any one of 16 values.  You might expect that each of these values would correspond to a particular color, and you\rquote d be right, up to a point.  Each value does correspond to a particular color, but that color is not fixed.  Instead, the Apple II}{\f4\fs20 GS}{\f4  uses a color table, with a two-byte entry for each of the 16 possible pixel values.\par Each of the two byte entries in a color table is broken up into four four-bit fields, like this:\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1061{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw292\pich53\picwgoal5840\pichgoal1060\macpict\bliptag-1532555372\blipupi72{\*\blipuid a4a70f94c00208c13097901fb854c015}0b40ffffffff003401231101a0008201000affffffff0034012309000000000000000031000100010014001409ffffffffffffffff3809000000000000000031000100130014002609ffffffffffffffff3809000000000000000031000100250014003809ffffffffffffffff3809000000000000000031000100370014004a09ffffffffffffffff3809000000000000000031000100490014005c09ffffffffffffffff38090000000000000000310001005b0014006e09ffffffffffffffff38090000000000000000310001006d0014008009ffffffffffffffff38300001007f001400923000010091001400a430000100a3001400b630000100b5001400c830000100c7001400da30000100d9001400ec30000100eb001400fe30000100fd00140110a10096000c02000000020000000000000001000a00040002001000132c000c00150948656c7665746963610300150d000a2b050d023135a00097a10096000c02000000020000000000000001000a00040014001000252912023134a00097a10096000c02000000020000000000000001000a00040026001000372912023133a00097a10096000c02000000020000000000000001000a00040038001000492912023132a00097a10096000c02000000020000000000000001000a0004004a0010005b2912023131a00097a10096000c02000000020000000000000001000a0004005c0010006d2912023130a00097a10096000c02000000020000000000000001000a0004006e0010007f29150139a00097a10096000c02000000020000000000000001000a000400800010009129120138a00097a10096000c02000000020000000000000001000a00040092001000a329120137a00097a10096000c02000000020000000000000001000a000400a4001000b529120136a00097a10096000c02000000020000000000000001000a000400b6001000c729120135a00097a10096000c02000000020000000000000001000a000400c8001000d929120134a00097a10096000c02000000020000000000000001000a000400da001000eb29120133a00097a10096000c02000000020000000000000001000a000400ec001000fd29120132a00097a10096000c02000000020000000000000001000a000400fe0010010f29120131a0009701000affffffff00340123300001010f00140122a10096000c02000000020000000000000001000a000401100010012129120130a0009701000affffffff00340123070002000230000000000014004a3000000048001400923000000090001400da30000000d800140122a10096000c02000000020000000000000001000a002700100033003b280030001506756e75736564a00097a10096000c02000000020000000000000001000a0027005800330083295103726564a00097a10096000c02000000020000000000000001000a002700a0003300cb294305677265656ea00097a10096000c02000000020000000000000001000a002700e800330113294b04626c7565a00097a0008ca100d8000400004000a100d6000400004000a000d701000affffffff003401230700000000080017200030010600180037a100ca00080000000000000000a100c80008000000b400b40000070001000160001300250026006e010e005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d908000870004600130025001c004900130049001400490014004900150048001600470017004500180043001800420019003f0019003e001a003b001b0035001c002f001c0029001c0025a100d8000400004000a000bfa000d9a000d7a100d8000400004000a100d6000400004000a000d7070000000008001722001c0025eefca100ca00080000000000000000a100c80008000000b400b400000700010001600013ffdd002600260000005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d908000870004600130001001c0025001c0025001c0021001c001b001b0015001a000f0019000c0019000b0018000800180007001700050016000300150002001400010014000100130001a100d8000400004000a000bfa000d9a000d722001c00250009a0008da0008ca100d8000400004000a100d6000400004000a000d70700000000080017235af3a100ca00080000000000000000a100c80008000000b400b400000700010001600013006d002600b6010e005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d90800087000460013006d001c0091001300910014009100140091001500900016008f0017008d0018008b0018008a0019008700190086001a0083001b007d001c0077001c0071001c006da100d8000400004000a000bfa000d9a000d7a100d8000400004000a100d6000400004000a000d7070000000008001722001c006deefca100ca00080000000000000000a100c80008000000b400b40000070001000160001300250026006e0000005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d908000870004600130049001c006d001c006d001c0069001c0063001b005d001a00570019005400190053001800500018004f0017004d0016004b0015004a001400490014004900130049a100d8000400004000a000bfa000d9a000d722001c006d0009a0008da0008ca100d8000400004000a100d6000400004000a000d70700000000080017235af3a100ca00080000000000000000a100c80008000000b400b40000070001000160001300b5002600fe010e005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d9080008700046001300b5001c00d9001300d9001400d9001400d9001500d8001600d7001700d5001800d3001800d2001900cf001900ce001a00cb001b00c5001c00bf001c00b9001c00b5a100d8000400004000a000bfa000d9a000d7a100d8000400004000a100d6000400004000a000d7070000000008001722001c00b5eefca100ca00080000000000000000a100c80008000000b400b400000700010001600013006d002600b60000005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d908000870004600130091001c00b5001c00b5001c00b1001c00ab001b00a5001a009f0019009c0019009b0018009800180097001700950016009300150092001400910014009100130091a100d8000400004000a000bfa000d9a000d722001c00b50009a0008da0008ca100d8000400004000a100d6000400004000a000d70700000000080017235af3a100ca00080000000000000000a100c80008000000b400b40000070001000160001300fd00260146010e005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d9080008700046001300fd001c0121001301210014012100140121001501200016011f0017011d0018011b0018011a0019011700190116001a0113001b010d001c0107001c0101001c00fda100d8000400004000a000bfa000d9a000d7a100d8000400004000a100d6000400004000a000d7070000000008001722001c00fdeefca100ca00080000000000000000a100c80008000000b400b40000070001000160001300b5002600fe0000005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d9080008700046001300d9001c00fd001c00fd001c00f9001c00f3001b00ed001a00e7001900e4001900e3001800e0001800df001700dd001600db001500da001400d9001400d9001300d9a100d8000400004000a000bfa000d9a000d722001c00fd0009a0008da00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-3:  Master Color Value\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 primary colors}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 master color value}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Each of these color words is called a master color value.  The first four bits aren\rquote t used, but the next three groups of bits control the red, green, and blue intensity of the dot, with 0 turning the color off, and 15 giving the brightest value possible for the color.  If you\rquote re at all familiar with the physics of color, you\rquote ll recognize these three colors as the primary colors; you can get (almost) any color by mixing these three colors together.  If you\rquote re not familiar with the physics of color, and you\rquote d like an introduction that is fascinating, easy to read, and very informative, I\rquote d suggest Chapter 35 of }{\i\f4 The Feynman Lectures on Physics}{\f4 .  The title is probably pretty scary, but this particular chapter is the only short article I\rquote ve ever read which is easy to understand and still manages to explain things like where brown comes from.  (Think about it: you can mix any color from a primary color, right?  Then where is brown in the rainbow?)  Anyway, the book is famous, and should be available in any library.\par A color table has 16 of these master color values, one for each of the 16 possible values of a pixel.  You can set each master color value to anything you\rquote d like \endash  for a fun treat, try creating an Init that periodically sets all of the colors to 0x0000 (black) or inverts all of the color values (making the screen look like a color negative).\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetColorTable}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetColorTable}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 To change the colors used to display the screen, you use two QuickDraw II calls, }{\f6\fs20 GetColorTable}{\f4  and }{\f6\fs20 SetColorTable}{\f4 .  Each takes two parameters, the color table number and a variable with a type of }{\f6\fs20 ColorTable}{\f4 .  The }{\f6\fs20 ColorTable}{\f4  type is defined in QuickDraw.h:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef Word ColorTable[16], *ColorTablePtr, **ColorTableHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par As a general rule of thumb, you should always set color 0 (the first element of the color table) to black (0x0000) and color 15 to white (0x0FFF).  If you don\rquote t the screen will look, well, strange.  These are the colors used by the toolbox to draw window frames, erase the window to white, and so on.\par Here\rquote s the color table that you get if you don\rquote t make any changes:\par \par }\pard \li720\ri540\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1800\tx3600\tx5220\tx6300\tx7920\adjustright {\f4 Number\tab Color\tab Value\tab Number\tab Color\tab Value\par }\pard \li720\ri540\keepn\widctlpar\tx1800\tx3600\tx5220\tx6300\tx7920\adjustright {\f4 0\tab black\tab 0x0000\tab 8\tab beige\tab 0x0FA9\par 1\tab dark gray\tab 0x0777\tab 9\tab yellow\tab 0x0FF0\par 2\tab brown\tab 0x0841\tab 10\tab green\tab 0x00E0\par 3\tab purple\tab 0x072C\tab 11\tab light blue\tab 0x04DF\par 4\tab blue\tab 0x000F\tab 12\tab lilac\tab 0x0DAF\par 5\tab dark green\tab 0x0080\tab 13\tab periwinkle blue\tab 0x078F\par 6\tab orange\tab 0x0F70\tab 14\tab light gray\tab 0x0CCC\par 7\tab red\tab 0x0D00\tab 15\tab white\tab 0x0FFF\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qc\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 colors}}}{\pard\plain \qc\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 320 mode colors}}}{\v\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-4:  Standard 320 Mode Colors\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Scan Line Control Byte}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 The Scan Line Control Byte\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scan line control byte}}}{\f4 {\*\bkmkstart bk49}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 I mentioned that there are 16 color tables, which seems pretty silly at first.  After all, there are only 16 possible values for a pixel, and each color table has 16 color entries, so why do we need 16 color tables?  The reason is that you can actually pick a different color table for each scan line.  In fact, you can pick all sorts of things for each scan line.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1062{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw231\pich115\picwgoal4620\pichgoal2300\macpict\bliptag-1125564644\blipupi72{\*\blipuid bce93f1c3c9658d05425a1b1e653a5c8}03c0ffffffff007200e61101a0008201000affffffff007200e609000000000000000031000200020015001509ffffffffffffffff3809000000000000000031000200140015002709ffffffffffffffff3809000000000000000031000200260015003909ffffffffffffffff3809000000000000000031000200380015004b09ffffffffffffffff38090000000000000000310002004a0015005d09ffffffffffffffff38090000000000000000310002005c0015006f09ffffffffffffffff38090000000000000000310002006e0015008109ffffffffffffffff3809000000000000000031000200800015009309ffffffffffffffff38a10096000c01000000020000000000000001000a000400070010000d2c000c00150948656c7665746963610300150d000a2b080d0137a00097a10096000c01000000020000000000000001000a000400190010001f29120136a00097a10096000c01000000020000000000000001000a0004002b0010003129120135a00097a10096000c01000000020000000000000001000a0004003d0010004329120134a00097a10096000c01000000020000000000000001000a0004004f0010005529120133a00097a10096000c01000000020000000000000001000a000400610010006729120132a00097a10096000c01000000020000000000000001000a000400730010007929120131a00097a10096000c01000000020000000000000001000a000400850010008b29120130a0009701000affffffff007200e60700020002300000000000140092070001000160000b004a001e009300b4005a68005a005aa10096000c01000000020000000000000001000a0065002f0071007b28006e00301073657420666f7220363430206d6f6465a0009701000affffffff007200e6220014000b005a231b00a10096000c01000000020000000000000001000a00530041005f00af28005c00421b73657420666f72207363616e206c696e6520696e74657272757074a00097a10096000c01000000020000000000000001000a00410053004d00ac28004a00541473657420666f722066696c6c206d6f6465206f6ea00097a10096000c01000000020000000000000001000a002f0065003b00b328003800661272657365727665643b2073657420746f2030a00097a10096000c01000000020000000000000001000a001d0092002900e5280026009312636f6c6f72207461626c65206e756d626572a0009701000affffffff007200e6220014001d0048231b00220014002f0036231b0022001400410024231b0022001d006e0009231b00a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-5:  The Scan Line Control Byte\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Bits 6 and 5, used for scan line interrupts and fill mode, are generally used by assembly language programmers doing advanced animation programs; in any case, we won\rquote t get into them in this course.  The two values you should know about are the }{\f6\fs20 scbColorMode}{\f4  bit, which tells you if the scan line is in 320 or 640 mode, and the color table number.  There are a couple of fairly useful tricks you can do by manipulating these SCB values directly:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 640 mode}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 320 mode}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Since the SCB for each scan line is recorded in a dump of a picture file, you can check the most significant bit of the SCB to figure out if a picture should be displayed in 320 mode or 640 mode.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 2.\tab You can use the QuickDraw II call }{\f6\fs20 SetAllSCBs}{\f4  to change all of the scan line control bytes at once.  One useful feature is to quickly change the color table that you are using, something you could do to switch between the colors for two different pictures.  Here\rquote s a quick example that changes a 320 mode screen so it uses color table 1, instead of the default color table of 0:\par \par }\pard \qj\li900\widctlpar\adjustright {\f6\fs20 SetAllSCBs(0x01);\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par 3.\tab The Apple II}{\f4\fs20 GS}{\f4  can only display 16 colors, right?  Well, yes and no.  You can only display 16 colors on a single scan line, but since you can use a different color table on each scan line, you can actually use up to 256 colors at once.  This isn\rquote t very useful in most desktop programs, but in a game it might be fun to use one color table for a control panel at the bottom of the screen, and another color table for a picture at the top of the screen.  You could even use 640 mode in one area for crisp text, and 320 mode in another area for great color pictures!\par \par \tab Here\rquote s a quick sample that shows how to use color table 0 for the top half of the screen, and color table 1 for the bottom half:\par \par }\pard \qj\li900\keepn\widctlpar\adjustright {\f6\fs20 for (i = 0; i < 100; ++i) \{\par    SetSCB(i, 0x00);\par    SetSCB(i+100, 0x01);\par }\pard \qj\li900\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are all sorts of creative ways you can use these multiple color tables and the ability to use different resolutions on different lines.  In fact, some clever assembly language programmers have even written programs that switch the color tables }{\i\f4 while the Apple II}{\i\f4\fs20 GS}{\i\f4  is drawing the screen!}{\f4   That\rquote s a bizarre thing to do to a defenseless piece of silicon, but the result is a staggering ability to display pictures with virtually any of the 4096 colors the Apple II}{\f4\fs20 GS}{\f4  can display, all at the same time.  Unfortunately, while it\rquote s pretty, this isn\rquote t very useful \endash  all of the computer\rquote s time is used up switching color tables, rather than running a program to use all of those colors.\par \par Problem 9-1:  Starting with Frame, create a color explorer.  Your program should open a single window with no close box, no scroll bars or grow box, and no zoom box.  You should also remove all of the commands except Close and Quit from the file menu.  Close is there to support desk accessories; your program should ignore this command.  In short, the user only gets one window.\par Switch the program to use 320 mode graphics.\par Next, add three new menus, labeled Red, Green and Blue.  Each should have 16 entries, the numbers 0 to 15.  These are the levels of each color, and the current level should be checked in each menu.\par Inside the window, draw four rectangles.  Along the left third of the screen, draw three rectangles , one on top of the other.  Paint these rectangles with colors 1, 2 and 3.  Set each of these colors to a pure color from the color menu.  For example, if the user picked a value of 3 for red, set color 1 to 0x0300.\par The right two-thirds of the screen should be painted with color 4, which, of course, is set to the combination of all three colors.\par This is a pretty simple program, but it\rquote s great fun.  Using this program, you can try all sorts of color combinations quickly.\par {\*\bkmkend bk49}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SCB}{\rxe bk49}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Colors in 640 Mode}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Colors in 640 Mode\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 640 mode}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Compared to 320 mode graphics, 640 mode graphics swaps increased resolution for a decrease in the number of colors that can be displayed.  Instead of using four bits per pixel, with 16 distinct colors, 640 mode uses two bits per pixel, giving 4 distinct colors.\par {\*\bkmkstart bk50}If that was all there was to the story, you would be limited to four colors per scan line in 640 mode, but as it turns out, there are some tricks you can use to get more than just four colors at a time.  The trick is called dithering, and it relies on the fact that alternating colored dots in 640 mode get mixed to produce a third color.  For example, if you draw alternating black and white pixels across the 640 mode screen, you\rquote ll see a gray screen, not a striped one.  Considering how crisp black and white text looks in 640 mode, that may be a hard one to swallow.  Frankly, I didn\rquote t believe it myself.  Just for fun, give it a try with this program:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #pragma lint -1\par \par #include <orca.h>\par #include <stdio.h>\par #include <QuickDraw.h>\par \par int main (void)\par \par \{\par unsigned color;                    /* pen color */\par unsigned i;                        /* loop variable */\par \par startgraph(640);\par color = 0;\par for (i = 0; i < 640; ++i) \{\par    SetSolidPenPat(color);\par    MoveTo(i, 0);\par    LineTo(i, 199);\par    color = color ^ 3;\par    \}\par scanf("%*[^\\n]");\par endgraph();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 Listing 9-1:  A Simple Dithering Demonstration\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Without dithering, the result would be a black and white striped screen, but as you can see, you get a gray screen.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 At first blush, it looks like the color table used for 320 mode graphics is a bit large for 640 mode graphics.  After all, 640 mode only needs the first 4 entries, not all 16 like 320 mode graphics.  Apple\rquote s engineers went for another trick, though, that extends the dithered colors quite a bit.  Instead of using the first four entries in the color table, each of the pixels in a byte uses a different set of four colors.  You can certainly set each of the minipalettes up to have the same four colors, and in fact black and white are normally in all four of the minipalettes, but you can also mix the colors.  Since the screen is dithered, that gives you a great mix of colors.  By default, you get black and white for colors 0 and 3 in all four minipalettes.  Pixels in odd columns are colored blue for color 1, and yellow for color 2; while pixels in even columns are colored red and green for colors 1 and 2.  Painting a large area with color 1 mixes the blue and red to give an annoying purple, while color 2 mixes the green and yellow to give a sickly green.  Naturally, you can change the color tables to get other dithered colors.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1063{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw293\pich319\picwgoal5860\pichgoal6380\macpict\bliptag-463069136\blipupi72{\*\blipuid e4662030bebed46d920722109d3d2e95}0cf8ffffffff013e01241101a00082a10096000c02000000020000000000000001000a000400980010009e2c000c00150948656c7665746963610300150d000a2b990d0137a00097a10096000c02000000020000000000000001000a000400aa001000b029120136a00097a10096000c02000000020000000000000001000a000400bc001000c229120135a00097a10096000c02000000020000000000000001000a000400ce001000d429120134a00097a10096000c02000000020000000000000001000a000400e0001000e629120133a00097a10096000c02000000020000000000000001000a000400f2001000f829120132a00097a10096000c02000000020000000000000001000a000401040010010a29120131a00097a10096000c02000000020000000000000001000a000401160010011c29120130a0009701000affffffff013e012407000200023000000091001400b730000000b5001400db30000000d9001400ff30000000fd001401230700010001220088011000942000d000a4001c00a422000100a4001222000100c8001222000100ec00122200010110001222008800947c00a0008ca10096000c01000000020000000000000001000a001f0053002b0074280028005407436f6c6f722030a00097a10096000c01000000020000000000000001000a00310053003d00742a1207436f6c6f722031a00097a10096000c01000000020000000000000001000a00430053004f00742a1207436f6c6f722032a00097a10096000c01000000020000000000000001000a00550053006100742a1207436f6c6f722033a0009701000affffffff013e0124070002000230001b004300650084a10096000c01000000020000000000000001000a00670053007300742a1207436f6c6f722034a00097a10096000c01000000020000000000000001000a00790053008500742a1207436f6c6f722035a00097a10096000c01000000020000000000000001000a008b0053009700742a1207436f6c6f722036a00097a10096000c01000000020000000000000001000a009d005300a900742a1207436f6c6f722037a0009701000affffffff013e0124300063004300ad0084a10096000c01000000020000000000000001000a007f0000008b003a28008800010d6d696e6970616c657474652034a00097a10096000c01000000020000000000000001000a003700000043003a28004000010d6d696e6970616c657474652033a0009701000affffffff013e0124070001000130001c0044002f008430002e0044004100843000400044005300843000520044006500843000640044007700843000760044008900843000880044009b008430009a004400ad0084070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001c0086070923ff12230809a000a301000affffffff013e012422001c00860203230203230206230003230003230002230105230204230305230202a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220064008607f723ffee2308f7a000a301000affffffff013e0124220064008602fd2302fd2302fa2300fd2300fd2300fe2301fb2302fc2303fb2302fea000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200640086070923ff12230809a000a301000affffffff013e012422006400860203230203230206230003230003230002230105230204230305230202a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200ac008607f723ffee2308f7a000a301000affffffff013e01242200ac008602fd2302fd2302fa2300fd2300fd2300fe2301fb2302fc2303fb2302fea000a1a0008da0008ca10096000c01000000020000000000000001000a00af005300bb00742b537807436f6c6f722038a00097a10096000c01000000020000000000000001000a00c1005300cd00742a1207436f6c6f722039a0009701000affffffff013e012407000200023000ab004300f50084a10096000c02000000020000000000000001000a011b004a01270081280124005308436f6c6f72203134a0009701000affffffff013e01243000f30043013d0084a10096000c01000000020000000000000001000a00c7000000d3003a2800d000010d6d696e6970616c657474652031a00097a10096000c01000000020000000000000001000a010f0000011b003a2a480d6d696e6970616c657474652032a0009701000affffffff013e012407000100013000ac004400bf00843000be004400d100843001180044012b008430012a0044013d00843000d0004400e300843000e2004400f500843000f4004401070084300106004401190084a10096000c02000000020000000000000001000a0109004a01150081280112005308436f6c6f72203133a00097a10096000c02000000020000000000000001000a00f7004a01030081280100005308436f6c6f72203132a00097a10096000c02000000020000000000000001000a00e5004a00f100812800ee005308436f6c6f72203131a00097a10096000c02000000020000000000000001000a00d3004a00df00812800dc005308436f6c6f72203130a0009701000affffffff013e0124070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200ac0085070923ff12230809a000a301000affffffff013e01242200ac00850203230203230205230105230002230001230003230001230103230103230102230101230203230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200f4008507f723ffee2308f7a000a301000affffffff013e01242200f4008502fd2302fd2302fb2301fb2300fe2300ff2300fd2300ff2301fd2301fd2301fe2301ff2302fd2301ffa000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200f40085070923ff12230809a000a301000affffffff013e01242200f400850203230203230205230105230002230001230003230001230103230103230102230101230203230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122013c008507f723ffee2308f7a000a301000affffffff013e012422013c008502fd2302fd2302fb2301fb2300fe2300ff2300fd2300ff2301fd2301fd2301fe2301ff2302fd2301ffa000a1a10096000c02000000020000000000000001000a012d004a013900812a5a08436f6c6f72203135a00097a0008d01000affffffff013e01242200d00092120022004000925a002300dc2201180092360020001c00c8011800c8070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220014009205042309ff230406a000a301000affffffff013e012422001400920101230201230301230200230200230100230201230201230203230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001400b6fb0423f7ff23fc06a000a301000affffffff013e012422001400b6ff0123fe0123fd0123fe0023fe0023ff0023fe0123fe0123fe0323ff01a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001400b605042309ff230406a000a301000affffffff013e012422001400b60101230201230301230200230200230100230201230201230203230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001400dafb0423f7ff23fc06a000a301000affffffff013e012422001400daff0123fe0123fd0123fe0023fe0023ff0023fe0123fe0123fe0323ff01a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001400da05042309ff230406a000a301000affffffff013e012422001400da0101230201230301230200230200230100230201230201230203230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001400fefb0423f7ff23fc06a000a301000affffffff013e012422001400feff0123fe0123fd0123fe0023fe0023ff0023fe0123fe0123fe0323ff01a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001400fe05042309ff230406a000a301000affffffff013e012422001400fe0101230201230301230200230200230100230201230201230203230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200140122fb0423f7ff23fc06a000a301000affffffff013e01242200140122ff0123fe0123fd0123fe0023fe0023ff0023fe0123fe0123fe0323ff01a000a1a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-6:  Minipalettes in 640 Mode Graphics\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Dithered colors are pretty neat; they give you a way to get 640 pixels on a scan line for precision, and still get 16 solid colors for things like graphs or colored icons.  There are some disadvantages to dithering, though.  The big one is that you can\rquote t draw colored objects with very fine detail, since the colors tend to mix.  Another problem is that an object will shift colors a bit if you move it over one pixel, since the color table alternates by pixel position.  You can avoid that problem by setting all of the minipalettes to the same colors, or by making sure that you always move pictures right and left by even multiples of four pixels.  That\rquote s one of two reasons why I said to always be sure you tell }{\f6\fs20 TaskMaster}{\f4  to scroll your window left and right in multiples of eight pixels.  The other reason has to do with pen patterns, which we\rquote ll talk about in a moment.\par The last problem with dithered colors is that it\rquote s really tough to plan a color palette.  With 320 mode graphics, you could pick any 16 colors you want; but with 640 mode, each color in a palette affects several dithered colors.  Frankly, I have such a tough time with planning 640 mode color palettes that I almost always use the default color table.  If you want to create a new 640 mode color table, I\rquote d suggest trial and error as a good way to go about it.  While it won\rquote t be assigned as a problem, a good way to do a lot of trials and see those errors quickly would be to write a 640 mode color explorer, sort of like the 320 mode color explorer from Problem 9-1.\par \par Problem 9-2:  Write a short program to display all 16 possible dithered colors.  This isn\rquote t a complicated desktop program; it\rquote s just a quickie program to see the actual dithered colors for yourself.  You can base it on the Dither program from this section.\par The screen will be divided into boxes like the ones you see below.\par \par }\pard \qc\fi360\widctlpar\adjustright {{\pict{\*\picprop\shplid1064{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw192\pich192\picwgoal3840\pichgoal3840\macpict\bliptag-1867398468\blipupi72{\*\blipuid 90b1c2bcc3d5a44d471db42414109ae2}02beffffffff00bf00bf1101a0008201000affffffff00bf00bf09000000000000000031001300130038003809ffffffffffffffff3809000000000000000031001300400038006509ffffffffffffffff38090000000000000000310013006d0038009209ffffffffffffffff38090000000000000000310013009a003800bf09ffffffffffffffff3809000000000000000031004000130065003809ffffffffffffffff3809000000000000000031004000400065006509ffffffffffffffff38090000000000000000310040006d0065009209ffffffffffffffff38090000000000000000310040009a006500bf09ffffffffffffffff3809000000000000000031006d00130092003809ffffffffffffffff3809000000000000000031006d00400092006509ffffffffffffffff3809000000000000000031006d006d0092009209ffffffffffffffff3809000000000000000031006d009a009200bf09ffffffffffffffff3809000000000000000031009a001300bf003809ffffffffffffffff3809000000000000000031009a004000bf006509ffffffffffffffff3809000000000000000031009a006d00bf009209ffffffffffffffff3809000000000000000031009a009a00bf00bf09ffffffffffffffff3809000000000000000031001300010038000b09ffffffffffffffff3809000000000000000031004000010065000b09ffffffffffffffff3809000000000000000031006d00010092000b09ffffffffffffffff3809000000000000000031009a000100bf000b09ffffffffffffffff380900000000000000003100010013000b003809ffffffffffffffff380900000000000000003100010040000b006509ffffffffffffffff38090000000000000000310001006d000b009209ffffffffffffffff38090000000000000000310001009a000b00bf09ffffffffffffffff38a00083ff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Color the small rectangles using colors 0 to 3 from left to right along the top row, then using 0 to 3 again from top to bottom along the left column.  The larger boxes in the middle should be drawn using a combination of the colors from the pure color to the top and left of the box.  You should alternate colors every other vertical line, just like the Dither program from this section alternated black and white to get gray.\par {\*\bkmkend bk50}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dithering}{\rxe bk50}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Screen Dump Files}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Screen Dump Files\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 screen dumps}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the graphics file formats for the Apple II}{\f4\fs20 GS}{\f4  is just a snapshot of the screen memory.  It\rquote s a pretty good format for simple paint programs or slide shows, but of course it limits a picture to the size of the screen, and there are a lot of cases where that isn\rquote t big enough.\par Screen dump files have a file type of 0xC1 and an auxiliary file type of 0x0000.  If that looks familiar, it\rquote s because the pictures you\rquote ve loaded in a few of the problems have used these screen dump files.\par \par Problem 9-3:  Now that you know the format for a screen dump file, go back and add two features to finish the slide show program you wrote in Problem 7-4.  First, add checks to make sure the picture can be displayed by your program.  Specifically, you should make sure only one color table is used, and that all of the SCBs are for 320 mode.  If not, warn the user that the picture may not look quite right.  Next, read the color table used by the program and set the current color tables to use the correct colors for the picture.\par Be sure you can handle pictures with different color tables!  An easy way to do this is more or less the way you handle menu dimming, by simply setting the correct color table each time through the event loop.  In a time-critical program you would have to get a bit more sophisticated, but this method will do here.\par You can test your program on the pictures in the Pictures folder.  They use several different color palettes.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Setting the Pen Size}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Setting the Pen Size\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen size}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Most of the QuickDraw drawing commands use the idea of a pen.  You\rquote ve used this pen already: positioning it with }{\f6\fs20 MoveTo}{\f4 , setting the color of the pen with }{\f6\fs20 SetSolidPenPat}{\f4 , and so forth.  As it turns out, there\rquote s a lot more to the drawing pen than you might think.  In addition to setting the size and color of the pen, you can also set the pen pattern so it can draw something besides just a solid color.  You can even change the way the pen works, telling it to reverse the color in bits instead of drawing normally.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 640 mode}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Up until now, we\rquote ve only used the pen to draw lines, or perhaps set the pen color for some of the commands like }{\f6\fs20 PaintRect}{\f4  that fill a large area with the pen color.  In all cases, we\rquote ve used the default pen size of 1 pixel by 1 pixel that is set by }{\f6\fs20 PenNormal}{\f4 .  You can actually set the size of the pen to a lot of other values, though.  In fact, the pen can be as large as eight pixels by eight pixels.  One of the most common reasons to change the size of the pen is that horizontal lines are thicker in 640 mode than vertical lines, since each pixel in 640 mode is a little more than twice as high as it is wide.  When I\rquote m doing line drawings in 640 mode, I almost always set the pen to be one pixel high and two pixels wide.  }{\f6\fs20 SetPenSize}{\f4  does the trick:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPenSize}}}{\v\f4 \par }\pard \qj\li180\widctlpar\adjustright {\f6\fs20 SetPenSize(2, 1);                    /* use a pen that is two pixels wide */\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Pen Patterns}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Pen Patterns\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen patterns}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSolidPenPat}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 We\rquote ve used }{\f6\fs20 SetSolidPenPat}{\f4  to change the color of the lines and objects we draw with the pen, but you can also change the pen pattern.  With a pen pattern, you set up an eight by eight array of colored dots, using literally any color you like.\par The pen pattern itself is actually a tiny picture, eight pixels wide and eight pixels high.  Since pixels are not the same size in 640 mode and 320 mode, this means that the pen pattern is also not the same size.  In fact, a pen pattern in 320 mode is 32 bytes long, while a pen pattern in 640 mode is only 16 bytes long.\par You can set up the bytes for the pen pattern a lot of different ways.  In ORCA/C, a pen pattern is defined as an array of bytes, like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef unsigned char Pattern[32], *PatternPtr;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 (The definition was pulled from the header file Types.h.)  What }{\f6\fs20 SetSolidPenPat}{\f4  actually does is to set all of the pixels in a pen pattern to the same color.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Here\rquote s one way to set up a pen pattern.  In 320 mode, this pen pattern will give you alternating lines of red (color 7) and white (color 15, or 0xF), with the lines running vertically.\par \par }\pard \li360\keepn\widctlpar\adjustright {\f6\fs20 for (i = 0; i < 32; ++i)\par    myPattern[i] = 0xF7;\par }\pard \li360\widctlpar\adjustright {\f6\fs20 SetPenPat(myPattern);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par When most people see pen patterns for the first time, it seems like they would be a great way to draw small pictures:  just set up a pattern, then do a }{\f6\fs20 MoveTo}{\f4 , }{\f6\fs20 LineTo}{\f4  at a single point.  That sort of works, but the problem is that patterns are fixed to a very specific grid system.  To visualize how they work, imagine painting over patterned wallpaper, then erasing part of the paint.  You see the original pattern showing through, but nothing short of ripping off the paper will shift the pattern over an eighth of an inch.  Patterns work the same way: they are fixed to the physical coordinate system of the graphics screen itself.  That\rquote s why you want to make sure you always scroll left and right by multiples of eight pixels, and why }{\f6\fs20 TaskMaster}{\f4  makes sure your window moves by multiples of eight pixels.  If you moved or scrolled the window by two pixels, then drew part of a pattern again, the old and new areas would clash where they joined together.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Pen Modes}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Pen Modes\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen modes}}}{\v\f4 \par }{\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPenMode}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The normal thing to expect when you draw a black line across a white screen is for a black line to appear.  That\rquote s what QuickDraw does most of the time, but there are a lot of cases when it is very useful to have QuickDraw do something else entirely.  The most useful is to have it reverse the bits, something called exclusive oring the bits.  You can do that, and a lot more, by setting the pen mode with }{\f6\fs20 SetPenMode}{\f4 .\par Actually, this isn\rquote t the first time you\rquote ve seen the }{\f6\fs20 SetPenMode}{\f4  call.  Way back in Lesson 1 you learned to put a }{\f6\fs20 SetPenMode(modeCopy)}{\f4  call into your program to make sure QuickDraw did what you normally want it to do: just copy the colors you tell it to onto the screen.\par }{\f6\fs20 modeCopy}{\f4  is the first of four drawing modes.  The others are }{\f6\fs20 modeOR}{\f4 , which tells QuickDraw to overlay the bits that are being drawn with the ones already on the screen; }{\f6\fs20 modeXOR}{\f4 , which tells QuickDraw to perform an exclusive or on the bits being drawn and the ones already on the screen; and }{\f6\fs20 modeBIC}{\f4 , which flips all of the bits in the pen, then ands them with the image.  If you\rquote re familiar with truth tables and boolean logic, you\rquote ll recognize most of these operations.  Figure 9-7 shows how they work when you use each of the pen modes to draw a white X across a white box.  The color white has all of the pen bits set, so white would be the equivalent of true in boolean logic, while black would be false.  Of course, some judicious changes in the color table could change those meanings!\par Each of the pen modes also has a \ldblquote not\rdblquote  version, where all of the bits in the pen are reversed before drawing.  Figure 9-7 also shows these \ldblquote not\rdblquote  modes.\par \par }\pard \qc\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1065{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw468\pich222\picwgoal9360\pichgoal4440\macpict\bliptag-834315481\blipupi72{\*\blipuid ce455b274393fd3fec98b646bc319eb0}2924ffffffff00dd01d31101a0008201000affffffff00dd01d30900000000000000003100160004005f004d09ffffffffffffffff3809000000000000000031001600040020000e09ffffffffffffffff38310016000d002000173831001600160020002038310016001f00200029383100160028002000323831001600310020003b38310016003a002000443809000000000000000031001600430020004d09ffffffffffffffff3831001f00040029000e3809000000000000000031001f000d0029001709ffffffffffffffff3831001f0016002900203831001f001f002900293831001f0028002900323831001f00310029003b3809000000000000000031001f003a0029004409ffffffffffffffff3831001f00430029004d3831002800040032000e38310028000d003200173809000000000000000031002800160032002009ffffffffffffffff38310028001f00320029383100280028003200323809000000000000000031002800310032003b09ffffffffffffffff38310028003a003200443831002800430032004d383100310004003b000e38310031000d003b0017383100310016003b002038090000000000000000310031001f003b002909ffffffffffffffff380900000000000000003100310028003b003209ffffffffffffffff383100310031003b003b38310031003a003b0044383100310043003b004d3831003a00040044000e3831003a000d004400173831003a0016004400203809000000000000000031003a001f0044002909ffffffffffffffff3809000000000000000031003a00280044003209ffffffffffffffff3831003a00310044003b3831003a003a004400443831003a00430044004d383100430004004d000e38310043000d004d0017380900000000000000003100430016004d002009ffffffffffffffff38310043001f004d0029383100430028004d0032380900000000000000003100430031004d003b09ffffffffffffffff38310043003a004d0044383100430043004d004d3831004c00040056000e3809000000000000000031004c000d0056001709ffffffffffffffff3831004c0016005600203831004c001f005600293831004c0028005600323831004c00310056003b3809000000000000000031004c003a0056004409ffffffffffffffff3831004c00430056004d380900000000000000003100550004005f000e09ffffffffffffffff38310055000d005f0017383100550016005f002038310055001f005f0029383100550028005f0032383100550031005f003b38310055003a005f0044380900000000000000003100550043005f004d09ffffffffffffffff3809000000000000000031001600d3005f011c09ffffffffffffffff3809000000000000000031001600d3002000dd09ffffffffffffffff3831001600dc002000e63831001600e5002000ef3831001600ee002000f83831001600f7002001013831001601000020010a383100160109002001133809000000000000000031001601120020011c09ffffffffffffffff3831001f00d3002900dd3809000000000000000031001f00dc002900e609ffffffffffffffff3831001f00e5002900ef3831001f00ee002900f83831001f00f7002901013831001f01000029010a3809000000000000000031001f01090029011309ffffffffffffffff3831001f01120029011c3831002800d3003200dd3831002800dc003200e63831002800e5003200ef3809000000000000000031002800ee003200f809ffffffffffffffff3809000000000000000031002800f70032010109ffffffffffffffff3831002801000032010a383100280109003201133831002801120032011c3831003100d3003b00dd3831003100dc003b00e63809000000000000000031003100e5003b00ef09ffffffffffffffff3831003100ee003b00f83831003100f7003b0101380900000000000000003100310100003b010a09ffffffffffffffff383100310109003b0113383100310112003b011c3831003a00d3004400dd3831003a00dc004400e63809000000000000000031003a00e5004400ef09ffffffffffffffff3831003a00ee004400f83831003a00f7004401013809000000000000000031003a01000044010a09ffffffffffffffff3831003a0109004401133831003a01120044011c3831004300d3004d00dd3831004300dc004d00e63831004300e5004d00ef3809000000000000000031004300ee004d00f809ffffffffffffffff3809000000000000000031004300f7004d010109ffffffffffffffff383100430100004d010a383100430109004d0113383100430112004d011c3831004c00d3005600dd3809000000000000000031004c00dc005600e609ffffffffffffffff3831004c00e5005600ef3831004c00ee005600f83831004c00f7005601013831004c01000056010a3809000000000000000031004c01090056011309ffffffffffffffff3831004c01120056011c3809000000000000000031005500d3005f00dd09ffffffffffffffff3831005500dc005f00e63831005500e5005f00ef3831005500ee005f00f83831005500f7005f0101383100550100005f010a383100550109005f0113380900000000000000003100550112005f011c09ffffffffffffffff38090000000000000000310016012d005f017609ffffffffffffffff38090000000000000000310016012d0020013709ffffffffffffffff3831001601360020014038310016013f00200149383100160148002001523831001601510020015b38310016015a002001643831001601630020016d38090000000000000000310016016c0020017609ffffffffffffffff3831001f012d002901373809000000000000000031001f01360029014009ffffffffffffffff3831001f013f002901493831001f0148002901523831001f01510029015b3831001f015a002901643809000000000000000031001f01630029016d09ffffffffffffffff3831001f016c0029017638310028012d003201373831002801360032014038090000000000000000310028013f0032014909ffffffffffffffff3809000000000000000031002801480032015209ffffffffffffffff3809000000000000000031002801510032015b09ffffffffffffffff38090000000000000000310028015a0032016409ffffffffffffffff3831002801630032016d38310028016c0032017638310031012d003b0137383100310136003b014038090000000000000000310031013f003b014909ffffffffffffffff380900000000000000003100310148003b015209ffffffffffffffff380900000000000000003100310151003b015b09ffffffffffffffff38090000000000000000310031015a003b016409ffffffffffffffff383100310163003b016d38310031016c003b01763831003a012d004401373831003a0136004401403809000000000000000031003a013f0044014909ffffffffffffffff3809000000000000000031003a01480044015209ffffffffffffffff3809000000000000000031003a01510044015b09ffffffffffffffff3809000000000000000031003a015a0044016409ffffffffffffffff3831003a01630044016d3831003a016c0044017638310043012d004d0137383100430136004d014038090000000000000000310043013f004d014909ffffffffffffffff380900000000000000003100430148004d015209ffffffffffffffff380900000000000000003100430151004d015b09ffffffffffffffff38090000000000000000310043015a004d016409ffffffffffffffff383100430163004d016d38310043016c004d01763831004c012d005601373809000000000000000031004c01360056014009ffffffffffffffff3831004c013f005601493831004c0148005601523831004c01510056015b3831004c015a005601643809000000000000000031004c01630056016d09ffffffffffffffff3831004c016c0056017638090000000000000000310055012d005f013709ffffffffffffffff383100550136005f014038310055013f005f0149383100550148005f0152383100550151005f015b38310055015a005f0164383100550163005f016d38090000000000000000310055016c005f017609ffffffffffffffff38300094000400dd004d3100940004009e000e38310094000d009e0017383100940016009e002038310094001f009e0029383100940028009e0032383100940031009e003b38310094003a009e0044383100940043009e004d3831009d000400a7000e3831009d000d00a700173831009d001600a700203831009d001f00a700293831009d002800a700323831009d003100a7003b3831009d003a00a700443831009d004300a7004d383100a6000400b0000e383100a6000d00b00017383000a6001600b000203000a6001f00b000293000a6002800b000323000a6003100b0003b3100a6003a00b00044383100a6004300b0004d383100af000400b9000e383100af000d00b90017383000af001600b900203000af001f00b900293000af002800b900323000af003100b9003b3100af003a00b90044383100af004300b9004d383100b8000400c2000e383100b8000d00c20017383000b8001600c200203000b8001f00c200293000b8002800c200323000b8003100c2003b3100b8003a00c20044383100b8004300c2004d383100c1000400cb000e383100c1000d00cb0017383000c1001600cb00203000c1001f00cb00293000c1002800cb00323000c1003100cb003b3100c1003a00cb0044383100c1004300cb004d383100ca000400d4000e383100ca000d00d40017383100ca001600d40020383100ca001f00d40029383100ca002800d40032383100ca003100d4003b383100ca003a00d40044383100ca004300d4004d383100d3000400dd000e383100d3000d00dd0017383100d3001600dd0020383100d3001f00dd0029383100d3002800dd0032383100d3003100dd003b383100d3003a00dd0044383100d3004300dd004d38090000000000000000310094007900dd00c209ffffffffffffffff383100940079009e0083380900000000000000003100940082009e008c09ffffffffffffffff38090000000000000000310094008b009e009509ffffffffffffffff380900000000000000003100940094009e009e09ffffffffffffffff38090000000000000000310094009d009e00a709ffffffffffffffff3809000000000000000031009400a6009e00b009ffffffffffffffff3809000000000000000031009400af009e00b909ffffffffffffffff3831009400b8009e00c23809000000000000000031009d007900a7008309ffffffffffffffff3831009d008200a7008c3809000000000000000031009d008b00a7009509ffffffffffffffff3809000000000000000031009d009400a7009e09ffffffffffffffff3809000000000000000031009d009d00a700a709ffffffffffffffff3809000000000000000031009d00a600a700b009ffffffffffffffff3831009d00af00a700b93809000000000000000031009d00b800a700c209ffffffffffffffff380900000000000000003100a6007900b0008309ffffffffffffffff380900000000000000003100a6008200b0008c09ffffffffffffffff383100a6008b00b00095380900000000000000003100a6009400b0009e09ffffffffffffffff380900000000000000003100a6009d00b000a709ffffffffffffffff383100a600a600b000b0380900000000000000003100a600af00b000b909ffffffffffffffff380900000000000000003100a600b800b000c209ffffffffffffffff380900000000000000003100af007900b9008309ffffffffffffffff380900000000000000003100af008200b9008c09ffffffffffffffff380900000000000000003100af008b00b9009509ffffffffffffffff383100af009400b9009e383100af009d00b900a7380900000000000000003100af00a600b900b009ffffffffffffffff380900000000000000003100af00af00b900b909ffffffffffffffff380900000000000000003100af00b800b900c209ffffffffffffffff380900000000000000003100b8007900c2008309ffffffffffffffff380900000000000000003100b8008200c2008c09ffffffffffffffff380900000000000000003100b8008b00c2009509ffffffffffffffff383100b8009400c2009e383100b8009d00c200a7380900000000000000003100b800a600c200b009ffffffffffffffff380900000000000000003100b800af00c200b909ffffffffffffffff380900000000000000003100b800b800c200c209ffffffffffffffff380900000000000000003100c1007900cb008309ffffffffffffffff380900000000000000003100c1008200cb008c09ffffffffffffffff383100c1008b00cb0095380900000000000000003100c1009400cb009e09ffffffffffffffff380900000000000000003100c1009d00cb00a709ffffffffffffffff383100c100a600cb00b0380900000000000000003100c100af00cb00b909ffffffffffffffff380900000000000000003100c100b800cb00c209ffffffffffffffff380900000000000000003100ca007900d4008309ffffffffffffffff383100ca008200d4008c380900000000000000003100ca008b00d4009509ffffffffffffffff380900000000000000003100ca009400d4009e09ffffffffffffffff380900000000000000003100ca009d00d400a709ffffffffffffffff380900000000000000003100ca00a600d400b009ffffffffffffffff383100ca00af00d400b9380900000000000000003100ca00b800d400c209ffffffffffffffff383100d3007900dd0083380900000000000000003100d3008200dd008c09ffffffffffffffff380900000000000000003100d3008b00dd009509ffffffffffffffff380900000000000000003100d3009400dd009e09ffffffffffffffff380900000000000000003100d3009d00dd00a709ffffffffffffffff380900000000000000003100d300a600dd00b009ffffffffffffffff380900000000000000003100d300af00dd00b909ffffffffffffffff383100d300b800dd00c23809000000000000000031009400d300dd011c09ffffffffffffffff3831009400d3009e00dd3809000000000000000031009400dc009e00e609ffffffffffffffff3809000000000000000031009400e5009e00ef09ffffffffffffffff3809000000000000000031009400ee009e00f809ffffffffffffffff3809000000000000000031009400f7009e010109ffffffffffffffff380900000000000000003100940100009e010a09ffffffffffffffff380900000000000000003100940109009e011309ffffffffffffffff383100940112009e011c3809000000000000000031009d00d300a700dd09ffffffffffffffff3831009d00dc00a700e63809000000000000000031009d00e500a700ef09ffffffffffffffff3809000000000000000031009d00ee00a700f809ffffffffffffffff3809000000000000000031009d00f700a7010109ffffffffffffffff3809000000000000000031009d010000a7010a09ffffffffffffffff3831009d010900a701133809000000000000000031009d011200a7011c09ffffffffffffffff380900000000000000003100a600d300b000dd09ffffffffffffffff380900000000000000003100a600dc00b000e609ffffffffffffffff380900000000000000003100a600e500b000ef09ffffffffffffffff383100a600ee00b000f8383100a600f700b00101380900000000000000003100a6010000b0010a09ffffffffffffffff380900000000000000003100a6010900b0011309ffffffffffffffff380900000000000000003100a6011200b0011c09ffffffffffffffff380900000000000000003100af00d300b900dd09ffffffffffffffff380900000000000000003100af00dc00b900e609ffffffffffffffff383100af00e500b900ef380900000000000000003100af00ee00b900f809ffffffffffffffff380900000000000000003100af00f700b9010109ffffffffffffffff383100af010000b9010a380900000000000000003100af010900b9011309ffffffffffffffff380900000000000000003100af011200b9011c09ffffffffffffffff380900000000000000003100b800d300c200dd09ffffffffffffffff380900000000000000003100b800dc00c200e609ffffffffffffffff383100b800e500c200ef380900000000000000003100b800ee00c200f809ffffffffffffffff380900000000000000003100b800f700c2010109ffffffffffffffff383100b8010000c2010a380900000000000000003100b8010900c2011309ffffffffffffffff380900000000000000003100b8011200c2011c09ffffffffffffffff380900000000000000003100c100d300cb00dd09ffffffffffffffff380900000000000000003100c100dc00cb00e609ffffffffffffffff380900000000000000003100c100e500cb00ef09ffffffffffffffff383100c100ee00cb00f8383100c100f700cb0101380900000000000000003100c1010000cb010a09ffffffffffffffff380900000000000000003100c1010900cb011309ffffffffffffffff380900000000000000003100c1011200cb011c09ffffffffffffffff380900000000000000003100ca00d300d400dd09ffffffffffffffff383100ca00dc00d400e6380900000000000000003100ca00e500d400ef09ffffffffffffffff380900000000000000003100ca00ee00d400f809ffffffffffffffff380900000000000000003100ca00f700d4010109ffffffffffffffff380900000000000000003100ca010000d4010a09ffffffffffffffff383100ca010900d40113380900000000000000003100ca011200d4011c09ffffffffffffffff383100d300d300dd00dd380900000000000000003100d300dc00dd00e609ffffffffffffffff380900000000000000003100d300e500dd00ef09ffffffffffffffff380900000000000000003100d300ee00dd00f809ffffffffffffffff380900000000000000003100d300f700dd010109ffffffffffffffff380900000000000000003100d3010000dd010a09ffffffffffffffff380900000000000000003100d3010900dd011309ffffffffffffffff383100d3011200dd011c380900000000000000003100160187005f01d009ffffffffffffffff383100160187002001913831001601900020019a383100160199002001a33831001601a2002001ac3831001601ab002001b53831001601b4002001be3831001601bd002001c73831001601c6002001d03831001f0187002901913831001f01900029019a3831001f0199002901a33831001f01a2002901ac3831001f01ab002901b53831001f01b4002901be3831001f01bd002901c73831001f01c6002901d0383100280187003201913831002801900032019a383100280199003201a33809000000000000000031002801a2003201ac09ffffffffffffffff3809000000000000000031002801ab003201b509ffffffffffffffff3831002801b4003201be3831002801bd003201c73831002801c6003201d0383100310187003b0191383100310190003b019a380900000000000000003100310199003b01a309ffffffffffffffff3831003101a2003b01ac3831003101ab003b01b53809000000000000000031003101b4003b01be09ffffffffffffffff3831003101bd003b01c73831003101c6003b01d03831003a0187004401913831003a01900044019a3809000000000000000031003a0199004401a309ffffffffffffffff3831003a01a2004401ac3831003a01ab004401b53809000000000000000031003a01b4004401be09ffffffffffffffff3831003a01bd004401c73831003a01c6004401d0383100430187004d0191383100430190004d019a383100430199004d01a33809000000000000000031004301a2004d01ac09ffffffffffffffff3809000000000000000031004301ab004d01b509ffffffffffffffff3831004301b4004d01be3831004301bd004d01c73831004301c6004d01d03831004c0187005601913831004c01900056019a3831004c0199005601a33831004c01a2005601ac3831004c01ab005601b53831004c01b4005601be3831004c01bd005601c73831004c01c6005601d0383100550187005f0191383100550190005f019a383100550199005f01a33831005501a2005f01ac3831005501ab005f01b53831005501b4005f01be3831005501bd005f01c73831005501c6005f01d038310094012d00dd017638090000000000000000310094012d009e013709ffffffffffffffff383100940136009e014038310094013f009e0149383100940148009e0152383100940151009e015b38310094015a009e0164383100940163009e016d38090000000000000000310094016c009e017609ffffffffffffffff3831009d012d00a701373809000000000000000031009d013600a7014009ffffffffffffffff3831009d013f00a701493831009d014800a701523831009d015100a7015b3831009d015a00a701643809000000000000000031009d016300a7016d09ffffffffffffffff3831009d016c00a70176383100a6012d00b00137383100a6013600b00140383100a6013f00b00149383100a6014800b00152383100a6015100b0015b383100a6015a00b00164383100a6016300b0016d383100a6016c00b00176383100af012d00b90137383100af013600b90140383100af013f00b90149383100af014800b90152383100af015100b9015b383100af015a00b90164383100af016300b9016d383100af016c00b90176383100b8012d00c20137383100b8013600c20140383100b8013f00c20149383100b8014800c20152383100b8015100c2015b383100b8015a00c20164383100b8016300c2016d383100b8016c00c20176383100c1012d00cb0137383100c1013600cb0140383100c1013f00cb0149383100c1014800cb0152383100c1015100cb015b383100c1015a00cb0164383100c1016300cb016d383100c1016c00cb0176383100ca012d00d40137380900000000000000003100ca013600d4014009ffffffffffffffff383100ca013f00d40149383100ca014800d40152383100ca015100d4015b383100ca015a00d40164380900000000000000003100ca016300d4016d09ffffffffffffffff383100ca016c00d40176380900000000000000003100d3012d00dd013709ffffffffffffffff383100d3013600dd0140383100d3013f00dd0149383100d3014800dd0152383100d3015100dd015b383100d3015a00dd0164383100d3016300dd016d380900000000000000003100d3016c00dd017609ffffffffffffffff38310094018700dd01d0383100940187009e0191383100940190009e019a383100940199009e01a33831009401a2009e01ac3831009401ab009e01b53831009401b4009e01be3831009401bd009e01c73831009401c6009e01d03831009d018700a701913831009d019000a7019a3831009d019900a701a33831009d01a200a701ac3831009d01ab00a701b53831009d01b400a701be3831009d01bd00a701c73831009d01c600a701d0383100a6018700b00191383100a6019000b0019a380900000000000000003100a6019900b001a309ffffffffffffffff383100a601a200b001ac383100a601ab00b001b5380900000000000000003100a601b400b001be09ffffffffffffffff383100a601bd00b001c7383100a601c600b001d0383100af018700b90191383100af019000b9019a383100af019900b901a3380900000000000000003100af01a200b901ac09ffffffffffffffff380900000000000000003100af01ab00b901b509ffffffffffffffff383100af01b400b901be383100af01bd00b901c7383100af01c600b901d0383100b8018700c20191383100b8019000c2019a383100b8019900c201a3380900000000000000003100b801a200c201ac09ffffffffffffffff380900000000000000003100b801ab00c201b509ffffffffffffffff383100b801b400c201be383100b801bd00c201c7383100b801c600c201d0383100c1018700cb0191383100c1019000cb019a380900000000000000003100c1019900cb01a309ffffffffffffffff383100c101a200cb01ac383100c101ab00cb01b5380900000000000000003100c101b400cb01be09ffffffffffffffff383100c101bd00cb01c7383100c101c600cb01d0383100ca018700d40191383100ca019000d4019a383100ca019900d401a3383100ca01a200d401ac383100ca01ab00d401b5383100ca01b400d401be383100ca01bd00d401c7383100ca01c600d401d0383100d3018700dd0191383100d3019000dd019a383100d3019900dd01a3383100d301a200dd01ac383100d301ab00dd01b5383100d301b400dd01be383100d301bd00dd01c7383100d301c600dd01d0380900000000000000003100160079005f00c209ffffffffffffffff3809000000000000000031001600790020008309ffffffffffffffff3831001600820020008c38310016008b002000953831001600940020009e38310016009d002000a73831001600a6002000b03831001600af002000b93809000000000000000031001600b8002000c209ffffffffffffffff3831001f0079002900833809000000000000000031001f00820029008c09ffffffffffffffff3831001f008b002900953831001f00940029009e3831001f009d002900a73831001f00a6002900b03809000000000000000031001f00af002900b909ffffffffffffffff3831001f00b8002900c2383100280079003200833831002800820032008c38090000000000000000310028008b0032009509ffffffffffffffff3831002800940032009e38310028009d003200a73809000000000000000031002800a6003200b009ffffffffffffffff3831002800af003200b93831002800b8003200c2383100310079003b0083383100310082003b008c38310031008b003b0095380900000000000000003100310094003b009e09ffffffffffffffff38090000000000000000310031009d003b00a709ffffffffffffffff3831003100a6003b00b03831003100af003b00b93831003100b8003b00c23831003a0079004400833831003a00820044008c3831003a008b004400953809000000000000000031003a00940044009e09ffffffffffffffff3809000000000000000031003a009d004400a709ffffffffffffffff3831003a00a6004400b03831003a00af004400b93831003a00b8004400c2383100430079004d0083383100430082004d008c38090000000000000000310043008b004d009509ffffffffffffffff383100430094004d009e38310043009d004d00a73809000000000000000031004300a6004d00b009ffffffffffffffff3831004300af004d00b93831004300b8004d00c23831004c0079005600833809000000000000000031004c00820056008c09ffffffffffffffff3831004c008b005600953831004c00940056009e3831004c009d005600a73831004c00a6005600b03809000000000000000031004c00af005600b909ffffffffffffffff3831004c00b8005600c2380900000000000000003100550079005f008309ffffffffffffffff383100550082005f008c38310055008b005f0095383100550094005f009e38310055009d005f00a73831005500a6005f00b03831005500af005f00b93809000000000000000031005500b8005f00c209ffffffffffffffff38a10096000c01000000020000000000000001000a00000012000c003d2c000c00150948656c7665746963610300150d000a2b130906536f75726365a00097a10096000c02000000020000000000000001000a007e0000008a004f280087000e0b44657374696e6174696f6ea00097a10096000c02000000020000000000000001000a007e0075008a00c4297c076e6f74436f7079a00097a10096000c02000000020000000000000001000a007e00cf008a011e295b066e6f74584f52a00097a10096000c02000000020000000000000001000a007e0129008a0178295f056e6f744f72a00097a10096000c02000000020000000000000001000a007e0183008a01d22959066e6f74426963a00097a10096000c02000000020000000000000001000a00000075000c00c42800090084086d6f6465436f7079a00097a10096000c02000000020000000000000001000a000000cf000c011e295b076d6f6465584f52a00097a10096000c02000000020000000000000001000a00000129000c0178295f066d6f64654f72a00097a10096000c02000000020000000000000001000a00000183000c01d22958076d6f6465424943a00097a00083ff}}{\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-7:  Pen Modes\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par It\rquote s very important to keep in mind that these operations are bitwise operations.  The distinction doesn\rquote t matter when we\rquote re looking at black and white pictures, where drawing a white pixel on a white background in }{\f6\fs20 modeXOR}{\f4  will make the pixel black.  It matters a lot when we use colors, though.  For example, if you use }{\f6\fs20 modeXOR}{\f4  to draw a white pixel in 320 mode (value 0xF, or all four bits set) on a red background (value 0x7, or 0111 in binary), the result is a beige pixel (value 0x8, or 1000 in binary).\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Rubber-Banding}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Rubber-Banding\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rubber-banding}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modeXOR}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 modeXOR}{\f4  has a very useful feature.  If you draw the exact same image twice in }{\f6\fs20 modeXOR}{\f4 , you end up drawing the image and then erasing it.  It doesn\rquote t matter how complicated the picture is that you draw, or how complicated the background is, or even what colors are involved: draw the image once and it appears, draw it again and it vanishes.  We can put this technique to work for something called rubber-banding.\par When you use a drawing program to draw a line, you start by pressing the mouse at one end of the line, then you drag until you get to the other end.  While you\rquote re doing this, you see the line that you would get if you let up on the mouse button \endash  move the mouse a little, and the line gets redrawn in the new spot.  That\rquote s what rubber-banding is.  You get to \ldblquote stretch\rdblquote  a line or object from one point to another.  The way it\rquote s done is with }{\f6\fs20 modeXOR}{\f4 , drawing the image once so you see it, and again to erase it.  You\rquote ll put this to use a bit later in a program.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StillDown}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetMouse}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It messes up the event loop to try and handle rubber-banding in the main even loop, so it\rquote s best to create a second event loop that handles the rubber-banding, and only exits once the user is finished dragging the shape around.  For such a simple task as following the mouse, though, it doesn\rquote t make sense to set up a full-fledged event loop, where you would have to allow for all of the various possible kinds of events.  Instead, you can use two calls, }{\f6\fs20 StillDown}{\f4  and }{\f6\fs20 GetMouse}{\f4 , to track the mouse.  }{\f6\fs20 StillDown}{\f4  checks to see if the mouse button is still down, returning }{\f6\fs20 TRUE}{\f4  if it is and }{\f6\fs20 FALSE}{\f4  if it isn\rquote t.  You stay in your rubber-banding loop as long as }{\f6\fs20 StillDown}{\f4  returns }{\f6\fs20 TRUE}{\f4 .  }{\f6\fs20 GetMouse}{\f4  reads the position of the mouse (in local coordinates!).  Putting these two commands to work, here\rquote s a simple loop that will handle rubber-banding for a line.  This subroutine is a little more complicated than it has to be, mostly because it bothers to check to see if the mouse has really moved before redrawing the line.  This avoids a nasty problem in simpler rubber-banding subroutines, where the line can flicker while the mouse is held still.  Also, this subroutine just handles the rubber-banding \endash  it\rquote s up to the caller to draw the finished line after this subroutine returns.  The caller is also responsible for setting up the pen mode it wants to use; this subroutine leaves the pen mode in }{\f6\fs20 modeXOR}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * RubberBand\par *\par * Entered to draw a line in rubber-band mode\par *\par }\pard \qj\li180\keepn\widctlpar\adjustright {\f6\fs20 * Parameters:\par *    start - initial point on the line\par *    finish - (output) end point for the line\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 *\par ***************************************************************/\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \qj\li180\keepn\widctlpar\adjustright {\f6\fs20 void RubberBand (Point start, Point *finish)\par \par \{\par }\pard \li180\widctlpar\adjustright {\f6\fs20 Point newPoint ;                         /* mouse position */\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /* get ready to rubber-band */\par *finish = start;\par PenNormal();\par SetSolidPenPat(15);\par }\pard \li180\widctlpar\adjustright {\f6\fs20 SetPenMode(modeXOR);\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /* draw the initial line */\par MoveTo(start.h, start.v);\par }\pard \li180\widctlpar\adjustright {\f6\fs20 LineTo(finish->h, finish->v);\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /* rubber-band loop */\par while (StillDown(0)) \{\par    GetMouse(&newPoint);\par    if ((newPoint.h != finish.h) || (newPoint.v <> finish.v)) \{\par       MoveTo(start.h, start.v);\par       LineTo(finish->h, finish->v);\par       *finish = newPoint;\par       MoveTo(start.h, start.v);\par       LineTo(finish->h, finish->v);\par       \}\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /* erase the line */\par MoveTo(start.h, start.v);\par LineTo(finish->h, finish->v);\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 9-2:  Rubber-Banding\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Pen Masks}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Pen Masks\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen masks}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The pen mask is another eight pixel by eight pixel pattern, just like the pen itself.  Unlike the pen, though, the pen mask is a simple bit map, one bit per pixel in the pen.  If a bit in the pen mask is set, the corresponding bit is drawn on the screen, but if the pen mask bit is clear, that pixel isn\rquote t drawn on the screen.\par Probably the most common use for pen masks is to draw something in an unhighlighted or unselected state.  A good example of this is a dimmed menu item.  By setting the pen mask to a checkerboard pattern, and then drawing something, only every other pixel is actually drawn.  That\rquote s exactly what you normally see for dimmed menus.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1066{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw258\pich96\picwgoal5160\pichgoal1920\macpict\bliptag-1414295203\blipupi72{\*\blipuid abb3915d37d4739943a7633ab9569c16}0ef4ffffffff005f01011101a0008201000affffffff005f01010900000000000000003100160001005f004a09ffffffffffffffff3809000000000000000031001600010020000b09ffffffffffffffff38090000000000000000310016000a0020001409ffffffffffffffff3831001600130020001d38310016001c002000263831001600250020002f38310016002e002000383809000000000000000031001600370020004109ffffffffffffffff3809000000000000000031001600400020004a09ffffffffffffffff3809000000000000000031001f00010029000b09ffffffffffffffff3809000000000000000031001f000a0029001409ffffffffffffffff3809000000000000000031001f00130029001d09ffffffffffffffff3831001f001c002900263831001f00250029002f3809000000000000000031001f002e0029003809ffffffffffffffff3809000000000000000031001f00370029004109ffffffffffffffff3809000000000000000031001f00400029004a09ffffffffffffffff3831002800010032000b38090000000000000000310028000a0032001409ffffffffffffffff3809000000000000000031002800130032001d09ffffffffffffffff38090000000000000000310028001c0032002609ffffffffffffffff3809000000000000000031002800250032002f09ffffffffffffffff38090000000000000000310028002e0032003809ffffffffffffffff3809000000000000000031002800370032004109ffffffffffffffff3831002800400032004a383100310001003b000b38310031000a003b0014380900000000000000003100310013003b001d09ffffffffffffffff38090000000000000000310031001c003b002609ffffffffffffffff380900000000000000003100310025003b002f09ffffffffffffffff38090000000000000000310031002e003b003809ffffffffffffffff383100310037003b0041383100310040003b004a3831003a00010044000b3831003a000a004400143809000000000000000031003a00130044001d09ffffffffffffffff3809000000000000000031003a001c0044002609ffffffffffffffff3809000000000000000031003a00250044002f09ffffffffffffffff3809000000000000000031003a002e0044003809ffffffffffffffff3831003a0037004400413831003a00400044004a383100430001004d000b38090000000000000000310043000a004d001409ffffffffffffffff380900000000000000003100430013004d001d09ffffffffffffffff38090000000000000000310043001c004d002609ffffffffffffffff380900000000000000003100430025004d002f09ffffffffffffffff38090000000000000000310043002e004d003809ffffffffffffffff380900000000000000003100430037004d004109ffffffffffffffff383100430040004d004a3809000000000000000031004c00010056000b09ffffffffffffffff3809000000000000000031004c000a0056001409ffffffffffffffff3809000000000000000031004c00130056001d09ffffffffffffffff3831004c001c005600263831004c00250056002f3809000000000000000031004c002e0056003809ffffffffffffffff3809000000000000000031004c00370056004109ffffffffffffffff3809000000000000000031004c00400056004a09ffffffffffffffff380900000000000000003100550001005f000b09ffffffffffffffff38090000000000000000310055000a005f001409ffffffffffffffff383100550013005f001d38310055001c005f0026383100550025005f002f38310055002e005f0038380900000000000000003100550037005f004109ffffffffffffffff380900000000000000003100550040005f004a09ffffffffffffffff3809000000000000000031001600b5005f00fe09ffffffffffffffff3809000000000000000031001600b5002000bf09ffffffffffffffff3831001600be002000c83831001600c7002000d13831001600d0002000da3831001600d9002000e33831001600e2002000ec3809000000000000000031001600eb002000f509ffffffffffffffff3831001600f4002000fe3831001f00b5002900bf3809000000000000000031001f00be002900c809ffffffffffffffff3831001f00c7002900d13831001f00d0002900da3831001f00d9002900e33809000000000000000031001f00e2002900ec09ffffffffffffffff3831001f00eb002900f53809000000000000000031001f00f4002900fe09ffffffffffffffff3831002800b5003200bf3831002800be003200c83809000000000000000031002800c7003200d109ffffffffffffffff3831002800d0003200da3809000000000000000031002800d9003200e309ffffffffffffffff3831002800e2003200ec3809000000000000000031002800eb003200f509ffffffffffffffff3831002800f4003200fe3831003100b5003b00bf3831003100be003b00c83831003100c7003b00d13809000000000000000031003100d0003b00da09ffffffffffffffff3831003100d9003b00e33809000000000000000031003100e2003b00ec09ffffffffffffffff3831003100eb003b00f53831003100f4003b00fe3831003a00b5004400bf3831003a00be004400c83809000000000000000031003a00c7004400d109ffffffffffffffff3831003a00d0004400da3809000000000000000031003a00d9004400e309ffffffffffffffff3831003a00e2004400ec3831003a00eb004400f53831003a00f4004400fe3831004300b5004d00bf3809000000000000000031004300be004d00c809ffffffffffffffff3831004300c7004d00d13809000000000000000031004300d0004d00da09ffffffffffffffff3831004300d9004d00e33809000000000000000031004300e2004d00ec09ffffffffffffffff3831004300eb004d00f53831004300f4004d00fe3809000000000000000031004c00b5005600bf09ffffffffffffffff3831004c00be005600c83809000000000000000031004c00c7005600d109ffffffffffffffff3831004c00d0005600da3831004c00d9005600e33831004c00e2005600ec3809000000000000000031004c00eb005600f509ffffffffffffffff3831004c00f4005600fe3831005500b5005f00bf3809000000000000000031005500be005f00c809ffffffffffffffff3831005500c7005f00d13831005500d0005f00da3831005500d9005f00e33831005500e2005f00ec3831005500eb005f00f53809000000000000000031005500f4005f00fe09ffffffffffffffff38090000000000000000310016005b005f00a409ffffffffffffffff38090000000000000000310016005b0020006509ffffffffffffffff3831001600640020006e38090000000000000000310016006d0020007709ffffffffffffffff3831001600760020008038090000000000000000310016007f0020008909ffffffffffffffff383100160088002000923809000000000000000031001600910020009b09ffffffffffffffff38310016009a002000a43831001f005b002900653809000000000000000031001f00640029006e09ffffffffffffffff3831001f006d002900773809000000000000000031001f00760029008009ffffffffffffffff3831001f007f002900893809000000000000000031001f00880029009209ffffffffffffffff3831001f00910029009b3809000000000000000031001f009a002900a409ffffffffffffffff38090000000000000000310028005b0032006509ffffffffffffffff3831002800640032006e38090000000000000000310028006d0032007709ffffffffffffffff3831002800760032008038090000000000000000310028007f0032008909ffffffffffffffff383100280088003200923809000000000000000031002800910032009b09ffffffffffffffff38310028009a003200a438310031005b003b0065380900000000000000003100310064003b006e09ffffffffffffffff38310031006d003b0077380900000000000000003100310076003b008009ffffffffffffffff38310031007f003b0089380900000000000000003100310088003b009209ffffffffffffffff383100310091003b009b38090000000000000000310031009a003b00a409ffffffffffffffff3809000000000000000031003a005b0044006509ffffffffffffffff3831003a00640044006e3809000000000000000031003a006d0044007709ffffffffffffffff3831003a0076004400803809000000000000000031003a007f0044008909ffffffffffffffff3831003a0088004400923809000000000000000031003a00910044009b09ffffffffffffffff3831003a009a004400a438310043005b004d0065380900000000000000003100430064004d006e09ffffffffffffffff38310043006d004d0077380900000000000000003100430076004d008009ffffffffffffffff38310043007f004d0089380900000000000000003100430088004d009209ffffffffffffffff383100430091004d009b38090000000000000000310043009a004d00a409ffffffffffffffff3809000000000000000031004c005b0056006509ffffffffffffffff3831004c00640056006e3809000000000000000031004c006d0056007709ffffffffffffffff3831004c0076005600803809000000000000000031004c007f0056008909ffffffffffffffff3831004c0088005600923809000000000000000031004c00910056009b09ffffffffffffffff3831004c009a005600a438310055005b005f0065380900000000000000003100550064005f006e09ffffffffffffffff38310055006d005f0077380900000000000000003100550076005f008009ffffffffffffffff38310055007f005f0089380900000000000000003100550088005f009209ffffffffffffffff383100550091005f009b38090000000000000000310055009a005f00a409ffffffffffffffff38a10096000c02000000020000000000000001000a0000000b000c003f2c000c00150948656c7665746963610300150d000a2b1509077061747465726ea00097a10096000c02000000020000000000000001000a00000057000c00a6295e046d61736ba00097a10096000c02000000020000000000000001000a000000b1000c0100295d0370656ea00097a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-8:  Pen Mask\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPenMask}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Here\rquote s a sample section of code that could be used to set up a dimmed pen mask.  To set the pen back to normal, you could either use }{\f6\fs20 SetPenMask}{\f4  a second time with a mask set to all 0xFFs, or you could use }{\f6\fs20 PenNormal}{\f4 .\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DimmedMask\par *\par }\pard \qj\li180\keepn\widctlpar\adjustright {\f6\fs20 * Set the pen mask for drawing dimmed items\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 *\par ***************************************************************/\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par void DimmedMask (void)\par \par \{\par unsigned i;                              /* loop variable */\par }\pard \li180\widctlpar\adjustright {\f6\fs20 Mask myMask;                             /* pen mask */\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 for (i = 0; i < 4; ++i) \{\par    myMask[i*2] = 0x55;\par    myMask[i*2+1] = 0xAA;\par    \}\par SetPenMask(myMask);\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 9-3:  Set the Pen Mask for Dimmed Drawing\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Drawing Shapes}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Drawing Shapes\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 We\rquote ve used }{\f6\fs20 PaintRect}{\f4  to fill in large, rectangular areas of the screen, and occasionally to clear a window or even draw a rectangle.  It\rquote s almost that easy to draw a lot of other shapes on the screen, too.  In addition, you can do a lot more than just fill them in with the current pen pattern, like }{\f6\fs20 PaintRect}{\f4  does.  Each shape can also be filled; filling works a lot like painting, but you give QuickDraw a pattern along with the shape, so you don\rquote t have to set the pen pattern before drawing the object.  You can also erase a shape, which fills in the shape with the background color for the window (generally white).  Shapes can be inverted, which flips all of the bits in the shape.  Inverting a shape has the same effect as setting the pen color to white, setting the pen mode to }{\f6\fs20 modeXOR}{\f4 , and then drawing the shape \endash  but you don\rquote t have to set the pen mode or color first, and you don\rquote t have to change them back when you\rquote ve finished drawing.  Finally, you can frame a shape, which outlines the shape using the current pen color and size.  Framing a shape is just like using }{\f6\fs20 MoveTo}{\f4  and }{\f6\fs20 LineTo}{\f4  to outline the shape.\par In the sections below we\rquote ll talk about each of these shapes in detail.  Here\rquote s a quick map before we start, in the form of a typical picture of each of the basic shapes.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1067{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw272\pich62\picwgoal5440\pichgoal1240\macpict\bliptag-984815513\blipupi72{\*\blipuid c54ce8679a91f43cd6d813bc56cdbf7b}02efffffffff003d010f1101a00082a0008c01000affffffff003d010f3100010001001d002f38a10096000c01000000020000000000000001000a002400030030002b0300140d000a2b042d0952656374616e676c65a00097a0008da0008c01000affffffff003d010f510001003e001d006c58a10096000c01000000020000000000000001000a0024004a0030005e2947044f76616ca00097a0008da0008c01000affffffff003d010f6000010047003800a20000005aa10096000c01000000020000000000000001000a0024008300300092293903417263a00097a0008da0008c01000affffffff003d010f0b001b001b41000100ab001d00d948a10096000c01000000020000000000000001000a002400aa003c00d2292706526f756e64202a0c0952656374616e676c65a00097a0008da0008ca10096000c01000000020000000000000001000a002400e60030010828002d00e707506f6c79676f6ea0009701000affffffff003d010f070000000022e0c0e0c00000a000a0a100a40002070001000a0000000000000000070001000122000b00e11b002300002300f723000023120e23000023ee0d2300002300f723000023e5002300002300f723000084000a0000000000000000a000a301000affffffff003d010f8400f4000200e1001d010e000200fc00fd7fff000300fd00fe7fff000400fe00ff7fff000500ff01007fff0006010001027fff0007010201037fff0008010301047fff0009010401067fff000a010601077fff000b00e100fc010701087fff000c010801097fff000d0109010b7fff000e010b010c7fff000f010c010d7fff0010010d010e7fff0011010d010e7fff0012010c010d7fff0013010a010c7fff001400e100fc0109010a7fff0015010701097fff0016010601077fff0017010501067fff0018010301057fff0019010201037fff001a010001027fff001b00ff01007fff001c00fe00ff7fff001d00fc00fe7fff7fff231b002300f723120e23ee0d2300f723e5002300f7a000a1a0008da00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-9:  The Basic Shapes in QuickDraw II\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Rectangle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Rectangle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f6\fs20 void EraseRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 EraseRect}}}{\f6\fs20  (Rect *r);\par void FillRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FillRect}}}{\f6\fs20   (Rect *r, Pattern p);\par void FrameRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FrameRect}}}{\f6\fs20  (Rect *r);\par void InvertRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 InvertRect}}}{\f6\fs20 (Rect *r);\par void PaintRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PaintRect}}}{\f6\fs20  (Rect *r);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You\rquote ve already seen and used rectangles.  The }{\f6\fs20 Rect}{\f4  structure gets filled in with the top, bottom, left and right dimension of the rectangle, then you make the appropriate call.\par There is one subtle point about how rectangles are drawn that is real easy to miss, and very unexpected (at least to me).  When you paint this rectangle:\par \par }{\f6\fs20 r.h1 = 1;  r.h2 = 10; r.v2 = 1; r.v2 = 10;\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 you might expect to see a picture that looks like the one you would get from this loop:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 for (h = 1; i <= 10; ++i) \{\par    MoveTo(h, 1);\par    LineTo(h, 10);\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20    \}\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Well, it\rquote s not.  Actually, }{\f6\fs20 PaintRect}{\f4 , }{\f6\fs20 EraseRect}{\f4  and }{\f6\fs20 FillRect}{\f4  all fill the }{\i\f4 interior}{\f4  of the rectangle outlined by the points in the }{\f6\fs20 Rect}{\f4  structure.  That means the right and bottom edge are filled up to, but not including the coordinates you give.  In short, the rectangle really looks like the one drawn by this loop:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 for (h = 1; i <= 9; ++i) \{\par    MoveTo(h, 1);\par    LineTo(h, 9);\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20    \}\par }{\f4 \par Framing a rectangle works the same way, so framing our example rectangle would produce a drawing that would look like this one:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 SetPenSize(1, 1);\par MoveTo(1, 1);\par LineTo(9, 1);\par LineTo(9, 9);\par LineTo(1, 9);\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 LineTo(1, 1);\par }{\f4 \par There\rquote s one other subtlety, though.  The idea is that }{\f6\fs20 FrameRect}{\f4  should only affect pixels that are entirely inside the boundary set by the }{\f6\fs20 Rect}{\f4  structure.  What happens when you set the pen width to something bigger, say 2 by 2?  The answer is that QuickDraw moves in as many pixels as it needs to.  With a pen size of 2 by 2, you would have to pass 8 to }{\f6\fs20 MoveTo}{\f4  and }{\f6\fs20 LineTo}{\f4  to mimic }{\f6\fs20 FrameRect}{\f4 .\par While I\rquote m not going to assign a problem about drawing rectangles, if you are not quite sure what I mean about rectangles being drawn inside the border you set up in the }{\f6\fs20 Rect}{\f4  structure, I\rquote d suggest writing a few short programs to try out the loops from this section, along with a few more that use }{\f6\fs20 FrameRect}{\f4  with pen widths other than one by one.  You can use a short, graphics only program like the Dither program from earlier in this lesson, so it isn\rquote t that hard.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Oval}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Oval\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ovals}}}{\v\f4 \par }{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f6\fs20 void EraseOval}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 EraseOval}}}{\f6\fs20  (Rect *r);\par void FillOval}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FillOval}}}{\f6\fs20   (Rect *r, Pattern p);\par void FrameOval}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FrameOval}}}{\f6\fs20  (Rect *r);\par void InvertOval}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 InvertOval}}}{\f6\fs20 (Rect *r);\par void PaintOval}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PaintOval}}}{\f6\fs20  (Rect *r);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Ovals are basically squashed circles.  Of course, if you draw a \ldblquote square\rdblquote  oval, with the height and width the same size, you get a perfect, unsquashed circle.\par The only thing you have to tell QuickDraw to draw an oval is how big it is.  QuickDraw figures out all of the messy math and draws an oval.  It even lives up to its name, drawing the oval pretty quickly.\par As with rectangles, the oval is entirely }{\i\f4 inside}{\f4  the border you set up in the }{\f6\fs20 Rect}{\f4  structure.  For example, this code looks like it would draw a box around an oval:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 r.h1 = 1;\par r.h2 = 10;\par r.v1 = 1;\par r.v2 = 5;\par SetSolidPenPat(5);\par PaintOval(r);\par SetSolidPenPat(1);\par MoveTo(1, 1);\par LineTo(10, 1);\par LineTo(10, 5);\par LineTo(1, 5);\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 LineTo(1, 1);\par }{\f4 \par If you think it will, you should try it in a short program.  What actually happens is the top and left lines hit the topmost and leftmost pixels, but the bottom and right lines are one pixel below and to the right of the oval.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Arc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Arc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 arcs}}}{\v\f4 \par }{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f6\fs20 void EraseArc}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 EraseArc}}}{\f6\fs20  (Rect *r, int startAngle, int arcAngle);\par void FillArc}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FillArc}}}{\f6\fs20   (Rect *r, int startAngle, int arcAngle, Pattern p);\par void FrameArc}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FrameArc}}}{\f6\fs20  (Rect *r, int startAngle, int arcAngle);\par void InvertArc}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 InvertArc}}}{\f6\fs20 (Rect *r, int startAngle, int arcAngle);\par void PaintArc}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PaintArc}}}{\f6\fs20  (Rect *r, int startAngle, int arcAngle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 An arc is a chunk cut from an oval, more or less the way you would cut a slice of pie.  You give a start angle and an arc angle, which tell QuickDraw how big of a pie slice you want, and QuickDraw draws just the part of the oval from the start angle to the start angle plus arc angle.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1068{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw187\pich134\picwgoal3740\pichgoal2680\macpict\bliptag1093243272\blipupi72{\*\blipuid 4129918882ad1572cfb930383afb2e06}075dffffffff008500ba1101a0008201000affffffff008500ba6000230011006c005a0000002171001e00240044002e004f002e004f002900440027004600240048002e004f2200290048fefea10096000c01000000020000000000000001000a00390088004500b92c000c00150948656c7665746963610300150d000a2b89420961726320616e676c65a0009701000affffffff008500ba070000000022e0c0e0c00000a000a0a100a40002030001000a00000000000000000700010001090000000000000000220023005802fe23040123fffc23faf923fe0023f0f723fdfe23f7fd23f8fe23f60023f90523fd0223ff0423ef112308fd2311fa2304ff2307fd2303ff2304fc2303072306052305022303032307022302012306ff2302000a000000000000000084000a0000000000000000a000a301000affffffff008500ba8401d40007000e0025005d0007002900317fff000800250029003100367fff000900230025003600397fff000a002200230039003e7fff000b00210022003e00417fff000c00200021004100427fff000d001f0020004200447fff000e001e001f004400467fff000f001d001e004600487fff00100048004a7fff0011001c001d004a004c7fff0012001b001c00360037004c004e7fff00130034003600370038004e00507fff0014001a001b00330034005000517fff00150019001a0032003300380039005100537fff001600180019002e0032005300557fff001700170018002b002e0039003a005500577fff001800160017002a002b003a003b005700587fff0019001500160026002a003b003c005800597fff001a0014001500240026003c003d0059005a7fff001b0013001400210024003d003e005a005b7fff001c00120013001e0021003e003f005b005c7fff001d00110012001b001e003f00407fff001e001000110019001b00400042005c005d7fff001f000f001000160019004200447fff002000130016004400467fff0021000e000f00120013004600477fff0022000e0012004700480059005d7fff00230048004c005800597fff0024004c0050005300587fff0025005000537fff7fff220023005800002301ff2301002302002300002301002300002300002300fe2300002300002300ff23ffff23fffe23ffff23ffff23ffff23ffff23ffff23000023000023feff23feff23fdfe23feff23feff23fcfe23feff23feff23000023000023feff23ffff23ff0023feff23fe0023fcff23feff23fe0023fcff23fd0023fe0023fb0123fe0123fe0223fe0223000023ff0123ff0123000123000023fe0323fe0223fc0423fe0223ff0123fe0223ff0223ff012300002300002300022300ff2301002301002303fe2303ff2303ff2302ff2303ff2303ff2303ff2302ff2300002301002303ff2301ff2301002302ff2301002301002300002301002302fe2301ff2300002302ff2301012301012300012301022302022301012302022302022301002302012302012301012301012302012301002301002302012301002301002300002301012301002302ff230200230200230100a000a1a10096000c01000000020000000000000001000a001e0000002a003128002700010b537461727420616e676c65a0009701000affffffff008500ba09ffffffffffffffff220049003500b8a0008ca100d8000400004000a100d6000400004000a000d70700000000080017233749a100ca00080000000000000000a100c80008000000890089001409000000000000000061002a004d00a900cc010e005a070001000109ffffffffffffffff68010e005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d908000809000000000000000071005e001d00400076007f001d006e001f00700024007400290077002e007a0034007c003b007e0041007f0046007f004a007f004d007f0054007e0059007d005f007b00650078006a0075006f00720074006d0076006b00480040001d006e09ffffffffffffffff700056001d00400076007f001d006e001f00700024007400290077002e007a0034007c003b007e0041007f0046007f004a007f004d007f0054007e0059007d005f007b00650078006a0075006f00720074006d0076006ba100d8000400004000a000bfa000d9a000d7a100d8000400004000a100d6000400004000a000d70700000000080017220076006bf4d4a100ca00080000000000000000a100c800080000008a008a001f070006000609aa55aa55aa55aa5560002c0041009e00b3010e005aa000c9a100d6000400004000a000d7a000d9a100d6000400004000a100d8000400004000a000bea000d90800087000560021005a006d006b0021005e0024006000270063002d0066003100680036006a003b006b003f006b0045006b0048006b004a006b0051006a00550069005a0067005f00650062006300670060006b005c006d005aa100d8000400004000a000bfa000d9a000d7070001000109ffffffffffffffff220083006acbc5233bcb71001e006e00690079007300790069006e006e007000700072007300790069220072006e02fea0008da00083ff}}{\f4 \par \par Figure 9-10:  Angles in an Arc\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you\rquote ve ever done much with angles on computers, you are used to dealing with radians instead of degrees.  Well, surprise!  You can never get to complacent, because waiting around the corner is some piece of software that blows away all of your conventions.  The arc commands use angles specified in degrees.  They also use compass style headings, with 0 degrees at the top of the circle, 90 degrees to the right, and so on.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Round Rectangle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Round Rectangle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rounded rectangles}}}{\v\f4 \par }{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f6\fs20 void EraseRRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 EraseRRect}}}{\f6\fs20  (Rect *r, int ovalWidth, int ovalHeight);\par void FillRRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FillRRect}}}{\f6\fs20   (Rect *r, int ovalWidth, int ovalHeight, Pattern p);\par void FrameRRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FrameRRect}}}{\f6\fs20  (Rect *r, int ovalWidth, int ovalHeight);\par void InvertRRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 InvertRRect}}}{\f6\fs20 (Rect *r, int ovalWidth, int ovalHeight);\par void PaintRRect}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PaintRRect}}}{\f6\fs20  (Rect *r, int ovalWidth, int ovalHeight);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1069{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw215\pich147\picwgoal4300\pichgoal2940\macpict\bliptag-954875026\blipupi72{\*\blipuid c715c36e0e82b9295505620789f24fce}0225ffffffff009200d61101a00082a10096000c02000000020000000000000001000a00040074001000992c000c00150948656c7665746963610300150d000a2b7b0d057769647468a0009701000affffffff009200d60900000000000000000b00240024410020000e007b009b09ffffffffffffffff4809000000000000000031000e0001009200383831006d0025008900b13831003b0088006e00ad385100200068004a00a809ffffffffffffffff5822003700a7003a2200010068001222000100a7001222002000b9120022004900b91200a10096000c02000000020000000000000001000a002f00b0003b00d52b3a2b06686569676874a0009701000affffffff009200d671001e00070068000d0074000a006800070074000a0074000d0074000a006822000a0074060071001e0007009b000d00a7000a00a7000d009b000a009b0007009b000a00a722000a009bfa0071001e002000bf002c00c5002000c2002c00c5002c00c2002c00bf002000c222002c00c2000271001e003d00bf004900c5004900c2003d00bf003d00c2003d00c5004900c222003d00c200fe09800008008000080022002000321200098822882288228822220020003b120009aa55aa55aa55aa55220020004412000977dd77dd77dd77dd220020004d120009880022008800220022006400a7001209882288228822882222005b00a7001209aa55aa55aa55aa5522005200a7001209ddff77ffddff77ff22004900a70012a00083ff}}{\f4 \par \par Figure 9-11:  Oval Size in a Round Rectangle\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 A round rectangle is a rectangle with little quarter-ovals at the corners instead of the normal square corners.  They\rquote re pretty cool for button outlines, and you see them sometimes for windows with a slightly rounded corner.\par Of course, you have to tell QuickDraw just how round those corners should be.  You do that by giving the height and width of an oval to take the chunk from.  Remember, you\rquote re telling QuickDraw the total size of the oval, not the size of the rounded part of the corner!\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Polygon}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Polygon\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f6\fs20 void ErasePoly}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 ErasePoly}}}{\f6\fs20  (Handle p);\par void FillPoly}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FillPoly}}}{\f6\fs20   (Handle p, Pattern p);\par void FramePoly}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FramePoly}}}{\f6\fs20  (Handle p);\par void InvertPoly}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 InvertPoly}}}{\f6\fs20 (Handle p);\par void PaintPoly}{\pard\plain \qj\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PaintPoly}}}{\f6\fs20  (Handle p);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 All of the shapes we\rquote ve talked about so far are useful, but fairly simple.  They are used for the vast majority of cases where you want to draw regular objects, like the outline of a window or button.  Polygons are harder to use, but they fill the gap between these simple shapes and the industrial strength shapes you occasionally need for more complicated objects, like arrows in a scroll bar.\par A polygon is a closed object, so it does eventually get back to its starting point.  A polygon is made up of lines, so you could always duplicate }{\f6\fs20 FramePoly}{\f4  with a series of }{\f6\fs20 MoveTo}{\f4 , }{\f6\fs20 LineTo}{\f4  calls.  (And, unlike the other shapes we\rquote ve been studying, this time you get exactly the same thing from }{\f6\fs20 MoveTo}{\f4  and }{\f6\fs20 LineTo}{\f4  as you would from }{\f6\fs20 FramePoly}{\f4  \endash  none of the edges get shifted over.)  The lines themselves can be as short as you like, so you could even create an oval with a polygon.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenPoly}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ClosePoly}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Of course, since you can put as many line segments as you want in a polygon, you can\rquote t use a simple data structure like the }{\f6\fs20 Rect}{\f4  structure to create a polygon, and that\rquote s the main drawback.  You have to create a polygon by giving QuickDraw all of the points that make up the edge of the polygon.  You start with a call to }{\f6\fs20 OpenPoly}{\f4 , which creates a new polygon record and gives you back a handle for the record.  After that, you draw the object once with an initial }{\f6\fs20 MoveTo}{\f4  call to get to the first point, followed by a series of }{\f6\fs20 LineTo}{\f4  calls to outline the polygon.  Once the polygon is outlined, you call }{\f6\fs20 ClosePoly}{\f4  to finish off the polygon definition.  Creating an arrow like the ones on a scroll bar (but a little bigger!) would look like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 poly = OpenPoly();\par if (toolerror() != 0)\par    poly = NULL;\par else \{\par    MoveTo(50, 50);\par    LineTo(100, 50);\par    LineTo(100, 25);\par    LineTo(140, 75);\par    LineTo(100, 125);\par    LineTo(100, 100);\par    LineTo(50, 100);\par    LineTo(50, 50);\par    ClosePoly();\par    if (toolerror() != 0) \{\par       KillPoly(poly);\par       poly = NULL;\par       \}\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20    \};\par }{\f4 \par It\rquote s worth looking at this code fragment carefully.  Polygons are created with dynamic memory records, so there is a very real chance that an error will pop up while you\rquote re creating one, especially if it\rquote s a very complex polygon and your program is running low on memory.  In short, the error checking is very important, and you also need to make sure }{\f6\fs20 poly}{\f4  isn\rquote t }{\f6\fs20 NULL}{\f4  before you try to use one of the polygon drawing commands.\par Setting up the polygon is the hard part, though.  Once the polygon exists, you can do all sorts of wonderful things with it very quickly.  Filling, painting, erasing, inverting and framing all work fine, and quickly, too.  Since drawing a polygon is done entirely inside QuickDraw, with no overhead for individual tool calls, even framing a polygon is faster than drawing the same thing with }{\f6\fs20 LineTo}{\f4  calls.  In short, polygons are a great choice anytime a complex shape needs to be drawn more than once, or anytime you have to fill, paint, erase or invert a complex shape.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 KillPoly}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once you are through with a polygon, you use }{\f6\fs20 KillPoly}{\f4  to get rid of the polygon QuickDraw created.  You can see an example of }{\f6\fs20 KillPoly}{\f4  in the sample code fragment that we used to show how to create a polygon.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OffsetPoly}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There is one other useful call that you should know about when you start using polygons, and that\rquote s the }{\f6\fs20 OffsetPoly}{\f4  call.  Without }{\f6\fs20 OffsetPoly}{\f4 , you would have to create a separate polygon for each and every object you wanted to draw, in each and every position it might appear in.  Obviously, that\rquote s pretty wasteful for something like a scroll bar arrow, which will be drawn in a lot of different places, but doesn\rquote t change shape.  }{\f6\fs20 OffsetPoly}{\f4  lets you move a polygon to a new location without changing its shape.  You give QuickDraw the polygon and a horizontal and vertical offset, and QuickDraw moves the polygon.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 /* move a polygon to the right 5 pixels and down 10 pixels */\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 OffsetPoly(poly, 5, 10);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 9-4:  Write a short 320 mode \ldblquote graphics only\rdblquote  program, like Dither, to explore polygons.\par Start by filling the entire screen with gray (14), setting the pen mode to }{\f6\fs20 modeCopy}{\f4 , setting the pen color to blue (4), and creating the polygon you saw in the text \endash  the one that draws a large arrow.\par Now draw the polygon in different positions on the screen using the five polygon drawing commands.  Use }{\f6\fs20 OffsetPoly}{\f4  to draw the five polygons without recreating the polygon each time.  For }{\f6\fs20 FillPoly}{\f4 , set up a pattern with red and white vertical stripes.\par \par Problem 9-5:  For this program you will create a simple draw program that will let you draw lines, rectangles and ovals in any one of eight pen colors.  You\rquote ll use rubber-banding to let the user see the shapes as they are drawn.\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 a.\tab Switch Frame to 320 mode.\par \par b.\tab Add menus and menu items to let the user pick the pen color and select between lines, rectangles, and ovals.  These three shapes are the three basic shapes the program will let the user draw.  You should support the following colors:\par \par }\pard \qj\li1080\widctlpar\tx1440\tx2880\tx3240\tx4680\tx5040\tx6480\tx6840\adjustright {\f4 0\tab Black\tab 2\tab Brown\tab 7\tab Red\tab 6\tab Orange\par 9\tab Yellow\tab 10\tab Green\tab 4\tab Blue\tab 3\tab Purple\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par c.\tab Create a list in the document record that is sort of like the one you used for the point plotting program, but this time, the list needs to be a list of unions, since each element can be a line, rectangle or oval, and you need to be able to tell the difference between them.\par \par d.\tab When the user presses the mouse button, look to see which shape is selected.  Enter a drawing routine for the appropriate shape.  In the drawing routine, use rubber-banding and framing to let the user create the shape.  On exit, draw the new object and add it to the list for the document.\par \par \tab I would suggest implementing and testing each of the three shapes individually.  Do lines first, rectangles next, and ovals last.\par \par e.\tab Create an update routine that will draw all of the objects in the object list.  Be sure and test overlapping objects, making sure that the object that was created first is drawn first.  Otherwise the picture will change when the window is updated!\par \par f.\tab Add support for printing.\par \par g.\tab Add support for saving and loading files.\par \par h.\tab This is actually the first time in this course we\rquote ve created a program that can load, change, and save a file, so be sure you handle this!  If the user makes a change to a document, then closes it, double-check to see if the user really wants to close the document.  You can do that with a three-button alert window with a caution icon.  The question should be \ldblquote Save changes to *0 before closing?\rdblquote  with buttons of Yes, No and Cancel.  When the user quits, do the same sort of check on all of the documents, letting the user save the document, close the document, or cancel the quit operation.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Regions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Regions\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk51}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you look through the chapter on QuickDraw II in }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 2}{\f4 , you will find one kind of object that I didn\rquote t cover in the last section: regions.  I didn\rquote t include regions with the \ldblquote basic\rdblquote  drawing objects for two reasons: regions are generally used for drastically different reasons than the other objects, and there are some restrictions on what you can do with regions.\par Let\rquote s talk about the restrictions, first.  With some kinds of printers, notably the LaserWriter, you can\rquote t print a region.  Any of the drawing commands we talked about in the last section will work just fine, drawing just the way you would expect, but regions don\rquote t work.  Because of that restriction, it\rquote s a good idea to make sure that all of the parts of your document are drawn without using any regions.\par That\rquote s a pretty severe restriction, and a pretty severe recommendation against using regions, too.  If regions can\rquote t be used well, they must have a darn good reason for existing, and they do.  To understand this reason, we\rquote ll have to explore what regions are.\par Like polygons, regions are built up by drawing other objects.  Unlike polygons, regions are a collection of solid areas, and they don\rquote t have to be connected.  You can also have a hole in the middle of a region, something that doesn\rquote t work very well with polygons.  (You can sort of fake a hole with a polygon by drawing a line from the outer edge to the inner hole, then retracing your line on the way out, but the connecting line shows up when you call }{\f6\fs20 FramePoly}{\f4 .)\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1070{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw198\pich94\picwgoal3960\pichgoal1880\macpict\bliptag548785743\blipupi72{\*\blipuid 20b5ce4f714836534a33271891aa9d83}0405ffffffff005d00c51101a0008201000affffffff005d00c509aa55aa55aa55aa55510014007c005d00c509ffffffffffffffff58090000000000000000510026008e004b00b309ffffffffffffffff58a10096000c02000000020000000000000001000a0000008b000c00b52c000c00150948656c7665746963610300150d000a2b900906526567696f6ea00097a0008c01000affffffff005d00c5070000000022e0c0e0c00000a000a0a100a40002060001000a0000000000000000070001000109aa55aa55aa55aa5522003b0024eb1f2300002309e623000023e9f0230000231c002300002307e623000023091a230000231b0023000023eb1023000023081a23000023eaf023000023ea102300002315e12300000aaa55aa55aa55aa5584000a0000000000000000a000a301000affffffff005d00c584026400160002005a00480016002400257fff0018002300247fff0019002500267fff001c00220023002600277fff001f00210022002700287fff0022002800297fff0023002000217fff00250029002a7fff0027001f00207fff0028002a002b7fff002a001e001f7fff002b002b002c7fff002e001d001e002c002d7fff00300002001d002d00487fff003100020003004700487fff003200030005004600477fff003300050006004400467fff003400060007004300447fff003500070009004200437fff00360009000a004000427fff0037000a000c003f00407fff0038000c000d003e003f7fff0039000d000f003d003e7fff003a000f0010003b003d7fff003b00100012003a003b7fff003c001200130039003a7fff003d00130014003700397fff003e00140016003600377fff003f00160017003500367fff004000170018003300357fff004100170018003300347fff004400160017003400357fff004700150016003500367fff004a0014001500250026003600377fff004b00240025002600277fff004c00230024002700287fff004d00130014002100230028002a7fff004e00200021002a002b003700387fff004f001e0020002b002d7fff005000120013001d001e002d002e7fff0051001c001d002e002f003800397fff0052001a001c002f00317fff0053001100120019001a003100327fff005400180019003200330039003a7fff005500160018003300357fff00560010001100150016003500367fff00570013001500360038003a003b7fff005800120013003800397fff0059000f0010001100120039003a7fff005a000f0011003a003b7fff7fffa000a109ffffffffffffffff22005a001008e623e9f1231c002308e6230819231b0123eb0f2200410033091923e9f023eb0fa0008da10096000c02000000020000000000000001000a00000011000c003b280009001407506f6c79676f6ea00097a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 9-12:  Comparing Polygons and Regions\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par By far the most common use for a region is to form a complex drawing mask, and that\rquote s the only use we\rquote ll look at in this course.  That\rquote s not the only way to use regions effectively \endash  they\rquote re also very handy for things like flood fills in a paint program \endash  but I\rquote ll leave you to explore the other uses for regions on your own.\par There are three very important regions associated with any window.  Two are maintained by the Window Manager, and the other is one you can use for your own purposes.\par The regions that are maintained by the Window Manager are called the visible region and the update region.  The visible region is the part of the window\rquote s content region that you can actually see.  Since widows can overlap other windows, and can hang partway off of the screen, the visible region is not always a simple rectangular area.  The Window Manager keeps track of the visible region as you shuffle windows around or open and close windows.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using the Update Region}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Using the Update Region\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 update region}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The update region is the part of a window that needs to be redrawn.  When a program is just sitting there, doing nothing, the update region is empty, but if you drag one window so it exposes part of a window that used to be covered, the newly exposed area has to be redrawn.  The Window Manager automatically figures out what needs to be drawn, creating an update region that includes all of the pixels that need to be drawn.  The Window Manager also tells the Event Manager that the window needs to be updated, and the Event Manager reports the update event to your program as soon as all of the higher priority events have been handled.\par Just before }{\f6\fs20 TaskMaster}{\f4  calls your update subroutine, it calls }{\f6\fs20 BeginUpdate}{\f4 .  }{\f6\fs20 BeginUpdate}{\f4  is a Window Manager call that temporarily replaces the visible region with the pixels that are in both the visible region and the update region.  QuickDraw will never draw a pixel unless it is in a }{\f6\fs20 GrafPort}{\f4 \rquote s visible region, so any drawing command outside of the area that needs to be redrawn is ignored.  Once your update routine finishes updating the window and returns to }{\f6\fs20 TaskMaster}{\f4 , }{\f6\fs20 TaskMaster}{\f4  calls }{\f6\fs20 EndUpdate}{\f4 , which restores the original visible region for the window.  All of this happens inside }{\f6\fs20 TaskMaster}{\f4 , so you normally don\rquote t have to worry about the process unless you are writing your own event loop without the aid of }{\f6\fs20 TaskMaster}{\f4 , but understanding how it all works will help you see how you can take advantage of this process to make your program simpler and faster.\par The first way to take advantage of this process is to create programs that only draw in the update procedure.  For example, in a simple version of the drawing program from Problem 9-5, all of the objects could be drawn in two places: once when the user draws the object for the first time, and once in the update routine.  Another way to handle this is to not draw the object when the user creates it at all.  Instead, you use the Window Manager\rquote s }{\f6\fs20 InvalRect}{\f4  call to tell it to mark the area where the object should be as invalid.  The Window Manager will take it from there, making sure that the window gets updated at the next convenient moment.  The actual drawing takes place in the update routine, so your program is simpler, and you have less chance of making a mistake or creating an incompatibility in the way the object is drawn in the two different places.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 /* accumulate the area covered by the rectangle r in the update region */\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 InvalRect(&r);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Incidentally, you\rquote ve seen }{\f6\fs20 InvalRect}{\f4  before.  There was a brief discussion about it back in Lesson 5, but I though it would be a good idea to go over the ideas again, now that you know a little more about how the Window Manager and QuickDraw handle updates.\par The second way to take advantage of the update region helps you draw the window faster.  In a lot of cases \endash  like after }{\f6\fs20 TaskMaster}{\f4  scrolls a window, for example \endash  most of the visible region is perfectly OK, and doesn\rquote t need to be redrawn.  Also, in a lot of programs, more of the document is actually outside of the window than inside.  For example, you can only see a few lines from a book on the screen at any one time.  Drawing the entire document, as we\rquote ve done so far, wastes a lot of time.  If you check first, and only draw the parts of the document that are in the update region, you can save a lot of time.  In some kinds of programs, the time you save can be pretty substantial.\par The key to using the update region is twofold: first, you have to find out what it is, and second, you have to check to see if the object you are about to draw is in the update region.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetVisHandle}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Getting the region that needs to be updated is pretty easy, but if you look through the toolbox reference manual, it can also be pretty confusing.  The problem is that you don\rquote t really want the update region, and when you stumble across the Window Manager call to return the update region, it\rquote s real tempting to try to use that call.  The reason you don\rquote t want the update region is because }{\f6\fs20 BeginUpdate}{\f4 , which is called by }{\f6\fs20 TaskMaster}{\f4  before your update routine is called, has already set the visible region to the area that actually needs to be updated, and then cleared the update region.  In short, the update region is already empty when your update routine is called.  What you want is the visible region; you get it with a call to }{\f6\fs20 GetVisHandle}{\f4 :\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 visRegion = GetVisHandle();\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par With the region in hand (or at least in a handle), the next step is to test to see if the thing you need to draw is in the update region.  There are several tool calls that can help, but I\rquote m just going to cover the easiest one to use here.  That\rquote s }{\f6\fs20 RectInRgn}{\f4 , which checks to see if there are any points in common in a rectangle and a region.  If you pass the }{\f6\fs20 visRegion}{\f4  and a rectangle that surrounds the object you are about to draw, and }{\f6\fs20 RectInRgn}{\f4  returns }{\f6\fs20 FALSE}{\f4 , you can skip drawing the object.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 if (RectInRgn(&objectRect, visRegion))\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20    DrawMyObject();\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par It\rquote s important to use some common sense here.  Testing to see if an object is in a region takes time.  If you do this blindly, you could end up with an update region that takes }{\i\f4 longer}{\f4  than a simpler one that just draws everything.  That\rquote s because you\rquote re playing a game of averages.  To come out ahead, two things must be true:  First, it has to take less time to check an object to see if it should be drawn than it does to draw the object.  That\rquote s not always true.  You may need to do some fancy footwork to get faster tests, doing things like sorting graphics objects or using information about the document itself, like the fact that lines in a text document come one after the other, so you can even skip the tests on a lot of objects.  Second, the total amount of time you save on objects that are not drawn has to exceed the amount of time it takes to test the objects that end up getting drawn.\par In a lot of cases, these conditions will hold some of the time, but not other times.  For example, if you close a window, exposing a second window that was completely covered, the whole second window will have to be redrawn.  Chances are, it will take longer with the \ldblquote smart\rdblquote  update routine than with a simple dumb one that redraws the entire document.  On the other hand, if you scroll the document down one line, the smart update routine could win big, since only a small part of the screen really needs to be redrawn. Since it\rquote s probably more important to update the screen quickly while scrolling than it is to redraw the screen quickly after the entire window has been uncovered, the program will seem faster.  You\rquote ve won the game of averages, even though, in a few specific cases, your program might be slower.\par All of this really points out the need to use the old neural network stuffed between your ears for more than just remembering rules.  You have to exercise some judgement, too.  In most cases, you end up trying it both ways to see which method works best for a particular program.  Another tried and true method is to try it the simple way first: if it works, and the program seems fast enough, there\rquote s no reason to bother with the more complicated update routine.  If the program seems too slow, you can always go back and try the smart update method later.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using the Clip Region}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Using the Clip Region\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 clip region}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s another region that QuickDraw maintains for every }{\f6\fs20 GrafPort}{\f4  that can be very useful; it\rquote s called the clip region.  You already know from experience that QuickDraw won\rquote t draw where it isn\rquote t supposed to.  For example, if you try to draw outside of the visible part of the window, QuickDraw figures that out and doesn\rquote t put any pixels there.  That\rquote s due to the fact that QuickDraw never draws outside of the visible region.  As it turns out, QuickDraw is even more selective: not only does it not draw outside of the visible region, but it also doesn\rquote t draw outside of the clip region.\par The clip region is for you to use.  One of the most frequent uses is to mask off part of the screen so you don\rquote t accidentally draw on part of your window you want to leave alone.  That can save you a lot of time and effort that you would otherwise spend checking to see if what you are about to draw will overwrite something that should be protected.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ClipRect}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One simple way to set the clip region is with }{\f6\fs20 ClipRect}{\f4 , which sets the clip region to a particular rectangle.  Everything outside of the rectangle is masked off, and QuickDraw won\rquote t draw to it.  Of course, you need to make sure you fix the clip region when you are through; otherwise, scroll bars, palettes, and anything else in the window will never get updated!  Here\rquote s a fairly typical way to use the clip region, assuming }{\f6\fs20 drawRect}{\f4  is a rectangle that includes the part of the window you want to draw to, and r is a work rectangle.  The second call to }{\f6\fs20 ClipRect restores}{\f4  the clip region to the entire window.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 ClipRect(&drawRect);\par /* draw the contents here */\par GetPortRect(&r);\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 ClipRect(&r);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are several other commands that give you more detailed control over the clip region.  While they can be very useful in a lot of specific cases, I\rquote m not going to cover them here.  After all, this is an introductory course!  We don\rquote t need to get so bogged down in details we miss the overall picture.\par \par Problem 9-6:  Modify your drawing program from Problem 9-5 so it only draws an object if the object is in the update region.\par {\*\bkmkend bk51}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 regions}{\rxe bk51}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 GrafPorts}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 GrafPorts\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk52}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Throughout this course, we\rquote ve talked about windows and }{\f6\fs20 GrafPort}{\f4 s, and by now you\rquote re probably getting pretty used to the terms, not to mention how to make use of them.  I\rquote d like to finish off this lesson with a more detailed definition of these terms.\par A }{\f6\fs20 GrafPort}{\f4  is something QuickDraw II can draw to.  In a simple graphics program, like the Dither sample from the beginning of this lesson, the }{\f6\fs20 GrafPort}{\f4  is the entire screen.  The clip region and visible region we\rquote ve talked about are attached to a }{\f6\fs20 GrafPort}{\f4 , and each }{\f6\fs20 GrafPort}{\f4  has its own clip region and visible region.  There are a lot of other properties tied to a }{\f6\fs20 GrafPort}{\f4 , with each one keeping separate copies, too.  Pen characteristics are a good example.  Changing your pen to }{\f6\fs20 modeXOR}{\f4  affects the current }{\f6\fs20 GrafPort}{\f4 , but the pen mode for all of the other }{\f6\fs20 GrafPort}{\f4 s doesn\rquote t get changed.\par In theory, every }{\f6\fs20 GrafPort}{\f4  covers the entire drawing plane, extending from -32767 to 32767 in each direction.  In practice, the real drawing area is always smaller.  It\rquote s contained in a }{\f6\fs20 LocInfo}{\f4  record that gives, among other things, the actual size of the drawing rectangle.  You saw }{\f6\fs20 LocInfo}{\f4  records back when you drew a picture into a window with a single command, }{\f6\fs20 PPToPort}{\f4 .\par Every window has a }{\f6\fs20 GrafPort}{\f4 , and in fact, the structure that defines a }{\f6\fs20 GrafPort}{\f4  is the first thing you find in the structure that defines a window.  That\rquote s why we can play so fast and loose with }{\f6\fs20 GrafPort}{\f4 s and windows:  when you pass a window record to a QuickDraw command that expects a }{\f6\fs20 GrafPort}{\f4 , it doesn\rquote t miss a beat, since the window record starts with a }{\f6\fs20 GrafPort}{\f4 .  In fact, in the header files for C, the Window Manager calls are actually defined to accept }{\f6\fs20 GrafPort}{\f4 s, not window records.  Of course, window records have more information after the }{\f6\fs20 GrafPort}{\f4 , but that information is private to the Window Manager.  We can read, and when necessary set, all of that information with various Window Manager calls.\par While every window has a }{\f6\fs20 GrafPort}{\f4 , every }{\f6\fs20 GrafPort}{\f4  is definitely not a window.  The drawing screen in a non-toolbox graphics program like Dither is also a }{\f6\fs20 GrafPort}{\f4 , and you\rquote ve also used a }{\f6\fs20 GrafPort}{\f4  when you used the Print Manager.  It\rquote s also possible to create a }{\f6\fs20 GrafPort}{\f4  that will never be visible.  These }{\f6\fs20 GrafPort}{\f4 s, generally called offscreen }{\f6\fs20 GrafPort}{\f4 s, are very useful when you want to take some time to create a complicates picture, then draw it all at once on the screen.  Graphics programs use offscreen }{\f6\fs20 GrafPort}{\f4 s a lot, as do programs doing animation from the toolbox.  (You have to resort to assembly language for really fast, crisp animation on the Apple II}{\f4\fs20 GS}{\f4 , but a clever programmer can do a lot with toolbox calls from a high-level language.)\par There\rquote s a lot to QuickDraw that we haven\rquote t covered in this lesson; it\rquote s just too big, and many of the features (like offscreen }{\f6\fs20 GrafPort}{\f4 s) are only used in very specific circumstances.  In the next lesson, we\rquote ll explore another aspect of QuickDraw II and learn about the Font Manager.  It would be a great idea, though, to spend some time now browsing through the chapters in the toolbox reference manual that cover QuickDraw.  Some of the things we\rquote ve talked about are in the Window Manager, so try and spend some time there, too.  I\rquote d suggest reading the introductory sections at the front of both of those tools.  After that, spend some time flipping through the rest of the chapter, browsing through the descriptions of any calls that catch your eye.  There\rquote s a lot to discover!\par {\*\bkmkend bk52}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GrafPort}{\rxe bk52}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson has concentrated on the graphics capabilities of the Apple II}{\f4\fs20 GS}{\f4 .  We\rquote ve spent most of our time learning to use QuickDraw, but several important ideas that involve the Window Manager have also been explored.  We\rquote ve learned how to use colors in both 320 mode and 640 mode, including how to change the color palette to get something other than the default colors.  We\rquote ve seen how dithering can be used to get more than four colors in 640 mode.\par QuickDraw II uses the idea of a drawing pen, and we\rquote ve expanded on our ability to use this pen.  We\rquote ve learned to use pen modes for things like rubber-banding, and seen how to use pen patterns and pen masks.\par QuickDraw II has a wide variety of commands used to draw shapes, including rectangles, ovals, arcs, round rectangles, and polygons.  You can also do a variety of things with each shape, including painting the shape, filling it, erasing it, inverting it, or even framing a shape to draw its outline.  We\rquote ve seen how these ideas are implemented as a set of well-ordered calls.\par We\rquote ve also touched on regions, although we just covered the bare essentials.  We learned about visible regions, update regions, and clip regions, and saw how to use these effectively to simplify and speed up our programs.\par The lesson ended with a short discussion that defined }{\f6\fs20 GrafPort}{\f4 s and windows.  We\rquote ve used these all along, but with some knowledge of QuickDraw and some experience to guide us, we were able to get a little more formal about the definitions.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 ClipRect\tab ClosePoly\tab EraseArc\tab EraseOval\par ErasePoly\tab EraseRect\tab EraseRRect\tab FillArc\par FillOval\tab FillPoly\tab FillRect\tab FillRRect\par FrameArc\tab FrameOval\tab FramePoly\tab FrameRRect\par FrameRect\tab GetColorTable\tab GetMouse\tab GetVisHandle\par InvertArc\tab InvertOval\tab InvertPoly\tab InvertRect\par InvertRRect\tab KillPoly\tab OffsetPoly\tab OpenPoly\par PaintArc\tab PaintOval\tab PaintPoly\tab PaintRRect\par RectInRgn\tab SetAllSCBs\tab SetColorTable\tab SetPenMask\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 SetPenPat\tab SetPenSize\tab SetSCB\tab StillDown\par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 10 \endash  Fonts}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 10 \endash  Fonts}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 10 \endash  Fonts\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk60}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson covers the use of fonts.  You will learn how the Apple II}{\f4\fs20 GS}{\f4  uses font families, sizes and styles to organize a vast array of character shapes you can choose from.  You will also learn how to write text to a }{\f6\fs20 GrafPort}{\f4 , including colored text.  Finally, you will learn how to create programs that let the user pick their own fonts.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Defining Some Terms}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Defining Some Terms\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 By now, you\rquote re probably getting pretty used to the names of the various tools, so when we start to talk about fonts, you mind probably turns to the Font Manager.  I know mine did the first time I needed to use text in a desktop program.  As it turns out, the Font Manager isn\rquote t the only tool you need to worry about, and in many ways it\rquote s the least important.  QuickDraw II has a lot to do with fonts, too, and QuickDraw II Auxiliary even gets involved a bit.  There is a pretty clear division of labor, though.  QuickDraw is used to draw text in a }{\f6\fs20 GrafPort}{\f4 , and the Font Manager is used to select and manipulate the font QuickDraw II will use to draw.\par In this lesson, we\rquote ll start with the drawing commands, so we\rquote ll be starting in QuickDraw II.  Rather than getting bogged down in large desktop programs, we\rquote ll use short graphics-only programs that just write some text on the screen.  They will look a lot like the Dither program we used in the last lesson to explore dithered colors.  Later in the lesson we\rquote ll start to learn how to change to different fonts, and at that point we\rquote ll go back to full desktop programs.\par Drawing text really isn\rquote t much different from drawing anything else in a }{\f6\fs20 GrafPort}{\f4 .  In fact, drawing text is actually quite a bit easier than some of the basic shapes, like polygons.  You just position the pen and make a call to a QuickDraw routine to print the text.  There are a lot of ways to tell QuickDraw what text to draw \endash  you might use a p-string, a c-string, or just a plain text buffer \endash  so there are a lot of different calls to actually draw the text.  They all work pretty much the same way, though.  The hard part, surprisingly enough, is figuring out where to position the pen to get the text to show up at a particular spot.  To understand how text is positioned on the screen, we\rquote ll have to define some terms.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1071{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw323\pich217\picwgoal6460\pichgoal4340\macpict\bliptag1811241637\blipupi72{\*\blipuid 6bf55aa520cc652071ebc708fa56b08b}0861ffffffff00d801421101a0008201000affffffff00d80142300001005a0014006d300001006c0014007f300001007e001400913000010090001400a3300013005a0026006d300013006c0026007f300013007e002600913000130090002600a30977dd77dd77dd77dd310025005a0038006d38310025006c0038007f38310025007e003800913809ffffffffffffffff3000250090003800a30977dd77dd77dd77dd310037005a004a006d3809ffffffffffffffff300037006c004a007f300037007e004a00910977dd77dd77dd77dd3100370090004a00a338310049005a005c006d3809ffffffffffffffff300049006c005c007f300049007e005c00910977dd77dd77dd77dd3100490090005c00a33831005b005a006e006d3809ffffffffffffffff30005b006c006e007f30005b007e006e00910977dd77dd77dd77dd31005b0090006e00a33831006d005a0080006d3831006d006c0080007f3831006d007e008000913809ffffffffffffffff30006d0090008000a30977dd77dd77dd77dd31007f005a0092006d3809ffffffffffffffff30007f006c0092007f30007f007e0092009130007f0090009200a30977dd77dd77dd77dd310091005a00a4006d3809ffffffffffffffff300091006c00a4007f300091007e00a40091300091009000a400a322007f00c682002200a300b4940022000100b49400a10096000c02000000020000000000000001000a00100009001c00342c000c00150948656c7665746963610300150d000a2b0a190a6173656e74206c696e65a00097a10096000c02000000020000000000000001000a003d0009004900342b022d08626173656c696e65a00097a10096000c02000000020000000000000001000a00850009009d003428008e000a0a636861726163746572202b080c066f726967696ea00097a10096000c02000000020000000000000001000a00b2000000be00342800bb00020b646573656e74206c696e65a00097a10096000c02000000020000000000000001000a002000cf003800fa28002900d00a636861726163746572202a0c0972656374616e676c65a00097a10096000c02000000020000000000000001000a004d00cd007100fe2b0c21056e6578742028006200d10a636861726163746572202b080c076f726967696e20a0009701000affffffff00d8014230000100a2001400b530001300a2002600b530002500a2003800b530003700a2004a00b530004900a2005c00b530005b00a2006e00b530006d00a2008000b530007f00a2009200b530009100a200a400b551007b00b0008500ba5851007b0056008500605871001e007000b7007b00c1007b00b7007000bc007100be007300c1007b00b722005400d4ea1d71001e003b00a1004400ad004400a1003b00a9003d00ab004000ad004400a122002700cbe016a10096000c02000000020000000000000001000a00b0005b00bc00a12800b900630b696d616765207769647468a00097a0008c01000affffffff00d80142070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200a6005a07062317f9230609a000a301000affffffff00d801422200a6005a01012302012302012303012302002301002303002304ff2301002301002302ff230300230300230201230201230101230201230102a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200a600a2f90623e9f923fa09a000a301000affffffff00d801422200a600a2ff0123fe0123fe0123fd0123fe0023ff0023fd0023fcff23ff0023ff0023feff23fd0023fd0023fe0123fe0123ff0123fe0123ff02a000a1a0008d0700020002300000005900a400a3a10096000c02000000020000000000000001000a00cb006400d700aa2b021b0f636861726163746572207769647468a0009701000affffffff00d80142070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200c1005a0906231df9230709a000a301000affffffff00d801422200c1005a02012302012303012302012303002303002303002305ff2301002301002304ff230300230300230301230201230201230302230001a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200c100b4f70623e3f923f909a000a301000affffffff00d801422200c100b4fe0123fe0123fd0123fe0123fd0023fe0023fd0023fbff23ff0023ff0023fcff23fd0023fc0023fd0123fe0123fe0123fd02230001a000a171001e00720043007e004a007e004a007400430073004600720049007e004a2200400036103371001e0081004c00890058008100580089004e0086004d0083004c00810058220091003617f571001e00a3003d00ae004800a3004800ae004200ab004000a9003d00a300482200b500360af671001e0001003d000c004800010048000c0042000900400007003d0001004822001300360af6a0008c070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200a500fe0cf023f2cc2312f3a000a301000affffffff00d801422200a500fe02fe2302fb2302fc2301fb2301fa2300fb23fffa23fffb23fffc23fffc23fffa2300fb2301fa2301fb2302fd2303fc2303fc2303fea000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122000300fe0c1023f23423120da000a301000affffffff00d8014222000300fe020223020523020423010523010623000523ff0623ff0523ff0423ff0423ff06230005230106230105230203230304230304230302a000a1a0008da10096000c02000000020000000000000001000a004c01120058014128005501130b666f6e7420686569676874a00097a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 10-1:  Terms Used to Describe Characters\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 base line}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 Base Line\tab The base line is a horizontal line drawn through the character origin.  In terms of handwritten characters, the base line does exactly the same thing as a line on a piece of paper.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 character origin}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 origin}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 Character Origin\tab This is the spot the pen is at when QuickDraw starts to draw a character.  When I was learning about fonts, I expected this point to be at the top left corner or bottom left corner of the character, but it isn\rquote t.  In terms of writing, it\rquote s where the line would be on a piece of stationary; in the terms used by QuickDraw, the origin is on the base line.  The part of the character above the character origin is \ldblquote above the line;\rdblquote  characters like \ldblquote W\rdblquote  and \ldblquote a\rdblquote  appear entirely above this point, resting on the base line.  Characters like \ldblquote y\rdblquote , which extend below the base line when you write them by hand on lined paper, also extend below the base line in QuickDraw fonts.\par \par \tab When QuickDraw II draws a character, it starts at the current pen location, which is set with }{\f6\fs20 MoveTo}{\f4 , just like you were getting ready to draw a line.  After a character is drawn, the pen moves to the right a few pixels to the next character origin.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ascent line}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 Ascent Line\tab The ascent line is a line over the top of the character.  In most fonts capitol letters and tall lowercase letters (like \ldblquote k\rdblquote ) extend from the ascent line to the base line.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 descent line}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 Descent Line\tab The descent line is a line below the bottom of the character.  In most fonts, characters like \ldblquote y\rdblquote  extend below the base line, touching the descent line.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 kerning}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 Kern Max\tab Kerning is a pretty wild concept for those of us who had no background in printing or typesetting before we started writing desktop programs.  It turns out that typesetters sometimes place letters so close together that part of one letter can extend further to the right than the leftmost part of the next character.  For example, if the characters \ldblquote Ta\rdblquote  are typed, the \ldblquote a\rdblquote  can be scooted over to the left to appear right next to the \ldblquote T\rdblquote , or maybe even under the overhang of the top bar in the \ldblquote T\rdblquote .  The process of pushing characters together like this is called kerning.  In bit mapped fonts like those used on the Apple II}{\f4\fs20 GS}{\f4 , kerning is done by extending part of a character to the left of the character origin.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font rectangle}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 Font Rectangle\tab The font rectangle is the rectangle that completely encloses the character.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetFontInfo}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Some of this information, like the ascent and descent distances, is the same for all characters.  QuickDraw\rquote s }{\f6\fs20 GetFontInfo}{\f4  call returns a structure with all of the global information.  A typical call would look like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 FontInfoRecord info;                    /* info about the current font */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 GetFontInfo(&info);\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 ...\par }{\f4 \par }{\f6\fs20 GetFontInfo}{\f4  tells you about the current font.  In other words, it returns information about the font QuickDraw II will use to draw text if you draw the text before picking another font.\par The font record itself looks like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct FontInfoRecord \{\par    Word ascent; \par    Word descent; \par    Word widMax; \par    Word leading; \par    \};\par typedef struct FontInfoRecord FontInfoRecord, *FontInfoRecPtr,\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    **FontInfoRecHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 base line}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ascent line}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 descent line}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 ascent}{\f4  and }{\f6\fs20 descent}{\f4  fields are pretty obvious; they\rquote re the number of pixels between the base line and the ascent and descent lines.\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 character width}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 widMax}{\f4  field tells you the width of the widest character in the font.  There are other calls to find out the width of a particular character; we\rquote ll look at those in a moment.\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 leading}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 leading}{\f4  is the recommended number of pixels you should leave between lines.  Once you think about it, it\rquote s pretty obvious: you should leave more space between lines of 1 inch characters than you would leave between lines of 1/10 inch characters.  Incidentally, this word is pronounced like the metal lead, not like lead a horse.  The term comes from the not so distant past, when thin strips of lead were stuck in between lines of hand set type to increase the space between lines.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Drawing Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Drawing Text\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It might seem pretty frightening to spend that much time learning how to figure out the horizontal and vertical values you need to pass to }{\f6\fs20 MoveTo}{\f4  to put text where you want it, but take heart.  We\rquote re at the easy part, now.  To actually write text to the screen, all you do is pass a string to QuickDraw.  Here\rquote s a short program that writes \ldblquote Hello, world.\rdblquote  on the graphics screen.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #pragma lint -1\par \par #include <stdio.h>\par #include <orca.h>\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <QuickDraw.h>\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 int main (void)\par \par \{\par startgraph(320);\par PenNormal();\par MoveTo(50, 50);\par LineTo(320, baseLine);\par DrawCString("Hello, world.");\par scanf("%*[^\\n]");\par endgraph();\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 10-1:  Writing Text to the Graphics Screen\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawString}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawCString}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are a lot of different ways to represent strings in memory, and QuickDraw supports several of them with different text drawing commands.  Listing 10-1 uses }{\f6\fs20 DrawCString}{\f4 , which takes a pointer to a null terminated string.  That\rquote s the kind you generally use in C.  You can also print a p-string using }{\f6\fs20 DrawString}{\f4 ; it works the same way, but expects a length byte as the first byte of the string.\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawChar}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are some times when you just need to get some characters out to the screen, either individually, or plucking characters from a large chunk of text.  To print an individual character, pass the character to }{\f6\fs20 DrawChar}{\f4 .\par \par }{\f6\fs20 DrawChar('a');\par }{\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawText}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 To print a block of text, call }{\f6\fs20 DrawText}{\f4 .  This time you need to pass more than the address of the first character in the text block; you also need to pass the number of characters.\par \par }{\f6\fs20 DrawText(gsosString.bufString.text, gsosString.bufString.length);\par }{\f4 \par Problem 10-1:  Create a program that shows how text is placed on the screen.  Start with a white screen in 320 mode graphics, then draw a light gray (color 14) line at the baseline, and light blue lines (11) at the ascent and descent lines.  Next, draw a vertical red line (7) through the character origin.  Finally, write the string \ldblquote The quick gray Apple II}{\f4\fs20 GS}{\f4  jumped over the lazy black IBM PC\rdblquote  to the screen.\par We\rquote ll get to what these calls mean in a moment, but for now, just add them right after you set up QuickDraw:\par \par }{\f6\fs20 SetForeColor(0);\par SetBackColor(15);\par SetTextMode(modeForeCOPY);\par }{\f4 \par Actually, the entire line won\rquote t fit in 320 mode, but you get the idea.  We\rquote ll fix the line width problem in Problem 10-3.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Colorful Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Colorful Text\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text\:colored}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The text we\rquote ve drawn so far is black text on a white background.  That\rquote s fine, as far as it goes.  Black text on a white background is the way we usually see it on paper and in windows on the desktop.  Of course, it would be a lot more fun to see colored text every once in a while.\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetForeColor}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 SetForeColor}{\f4  tells QuickDraw to write using colored text.  By foreground, we mean all of the pixels that make up the character itself; the pixels that are in the character\rquote s rectangle but that are not a part of the character are called the background.  The foreground color for text can be any of the solid colors, but you can\rquote t use dithered colors in 640 mode.  }{\f6\fs20 SetForeColor}{\f4  takes a single parameter, the number of the color you want QuickDraw II to use.\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetBackColor}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You can also set the background color of the text using }{\f6\fs20 SetBackColor}{\f4 .  This causes QuickDraw II to fill the rectangle surrounding each character with the background color, usually white.  Like }{\f6\fs20 SetForeColor}{\f4 , you can use the number of any solid color as a parameter for }{\f6\fs20 SetBackColor}{\f4 .\par The pen modes you used in the last lesson to get all of the great effects, like rubber-banding, don\rquote t affect the way text is drawn at all.  QuickDraw uses a separate text mode to draw text.  The text modes work just like pen modes, they\rquote re just separate from pen modes to make it easier to draw text in one mode and graphics in another.  In fact, all of the pen modes can also be used as text modes, and they work exactly the same way.  You can also use eight other modes.  These work just like the original eight pen modes, but when you use them, QuickDraw II only draws the text \endash  the background is not affected at all.\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetTextMode}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The call to set the text mode is }{\f6\fs20 SetTextMode}{\f4 .  It takes a single integer parameter as the text mode.\par Here\rquote s a complete list of the pen modes, along with a short description of each one.  For more details, check out the toolbox reference manual.  Be careful, though:  The toolbox reference manual has some mistakes in the description of }{\f6\fs20 SetTextMode}{\f4 .  These mistakes are outlined in Chapter 43 of Volume 3 of the toolbox reference manual.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 modeCopy}{\f4 \tab Copy the foreground and background to the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 notCopy}{\f4 \tab Reverse the bits in the character, then copy the foreground and background to the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 modeOR}{\f4 \tab Or the bits in the foreground and background with the pixels in the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 notOR}{\f4 \tab Reverse the bits in the character, then or the bits in the foreground and background with the pixels in the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 modeXOR}{\f4 \tab Exclusive or the bits in the foreground and background with the pixels in the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 notXOR}{\f4 \tab Reverse the bits in the character, then exclusive or the bits in the foreground and background with the pixels in the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 modeBIC}{\f4 \tab Reverse the pixels in the foreground and background of the text, then and the pixels in the text with the pixels in the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 notBIC}{\f4 \tab And the pixels in the foreground and background of the text with the pixels in the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 modeForeCOPY}{\f4 \tab Like }{\f6\fs20 modeCopy}{\f4 , but only the foreground of the text is used.\par }{\f6\fs20 notForeCopy}{\f4 \tab Like }{\f6\fs20 notCopy}{\f4 , but only the foreground of the text is used.\par }{\f6\fs20 modeForeOR}{\f4 \tab Like }{\f6\fs20 modeOR}{\f4 , but only the foreground of the text is used.\par }{\f6\fs20 notForeOR}{\f4 \tab Like }{\f6\fs20 notOR}{\f4 , but only the foreground of the text is used.\par }{\f6\fs20 modeForeXOR}{\f4 \tab Like }{\f6\fs20 modeXOR}{\f4 , but only the foreground of the text is used.\par }{\f6\fs20 notForeXOR}{\f4 \tab Like }{\f6\fs20 notXOR}{\f4 , but only the foreground of the text is used.\par }{\f6\fs20 modeForeBIC}{\f4 \tab Like }{\f6\fs20 modeBIC}{\f4 , but only the foreground of the text is used.\par }{\f6\fs20 notForeBIC}{\f4 \tab Like }{\f6\fs20 notBIC}{\f4 , but only the foreground of the text is used.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 10-2:  Write a graphics program in 320 mode that shows all of the text modes.  Start by drawing a red (color 7) and yellow (color 9) checkerboard pattern across the entire screen.  Set the text foreground color to blue (color 4), and the background color to white (color 15).  (These colors are carefully chosen for maximum eyestrain.)  Finally, draw the name of the various text modes in the appropriate mode.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Formatting Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Formatting Text\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tabs}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 QuickDraw figures its job is to take a character number, look up the character in the font, and draw whatever it finds in the current }{\f6\fs20 GrafPort}{\f4 .  As far as QuickDraw is concerned, issues like tabs, return characters, and formatting numbers for output are your problem.  It only wants text.  Of course, that means you might have to get a little creative to write certain things on the screen.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using printf and sprintf}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Using printf and sprintf\tcl3}}}{\b\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printf}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As it turns out, ORCA/C can do a lot of formatting for you.  When you start the tools with }{\f6\fs20 startdesk}{\f4  or }{\f6\fs20 startgraph}{\f4 , ORCA/C automatically hooks up the standard text output routines, like }{\f6\fs20 printf}{\f4  and }{\f6\fs20 putchar}{\f4 , so they write the text to the graphics screen instead of writing the text to the text screen.  ORCA/C uses }{\f6\fs20 DrawChar}{\f4  and }{\f6\fs20 DrawString}{\f4  to write the text, so all of the color and text mode options work just fine.  ORCA/C will also handle newline characters, moving down one text line and moving back to the horizontal pen location that was set when you started writing text.\par Even if you are starting the tools with }{\f6\fs20 StartUpTools}{\f4 , like we generally do in our desktop programs, you can still take advantage of the text formatting capabilities you\rquote re used to with }{\f6\fs20 printf}{\f4 .  The stdio.h library includes another output command, }{\f6\fs20 sprintf}{\f4 , that works pretty much like }{\f6\fs20 printf}{\f4 .  The difference is that }{\f6\fs20 printf}{\f4  writes characters to the standard output device, while }{\f6\fs20 sprintf}{\f4  writes the characters to a string.  Once the characters are in the string, you can use }{\f6\fs20 DrawCString}{\f4  to write the characters to the current }{\f6\fs20 GrafPort}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using the Size of Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Using the Size of Text\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Of course, you may just be trying to dump a block of text to a window.  In that case, the major problem you will have is figuring out when to split a line and start a new one.  There are two sets of calls that let you do this.  One set returns the width of a character or string, while the other returns a rectangle surrounding the character or string.  There\rquote s one of each of these calls for each of the string formats, as well as one for characters.  The width calls are the simplest, and since you already know the height of the text from the }{\f6\fs20 GetFontInfo}{\f4  call, they are the ones you will use most often, too.  Each of them takes the same sort of parameter as the corresponding text drawing command, and each returns an integer that is the width of the string or character in pixels.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CharWidth}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 width = CharWidth('A');\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StringWidth}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 width = StringWidth("\\pHello, world.");\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CStringWidth}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 width = CStringWidth("Hello, world.");\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TextWidth}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 width = TextWidth(gsosString.bufString.text, gsosString.bufString.length);\par }{\f4 \par The calls that return a rectangle surrounding the text all look like the text drawing commands with an extra parameter at the end of the parameter list.  The extra parameter is the rectangle you want the call to fill in.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CharBounds}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 CharBounds('A', &r);\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StringBounds}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 StringBounds("\\pHello, world.", &r);\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CStringBounds}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 CStringBounds("Hello, world.", &r);\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TextBounds}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TextBounds(gsosString.bufString.text, gsosString.bufString.length, &r);\par }{\f4 \par Problem 10-3:  The text from Problem 10-1 didn\rquote t all fit on a single line.  Find where the text should be split, and draw it on two lines.  Be sure to split the text on a space, not in the middle of a word.  Use leading to figure out how much space to leave between the lines.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Standard Character Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Standard Character Set\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you hear someone talk about a character font, it\rquote s natural to assume that all of the printing characters you\rquote re used to are in the font.  The alphabet, the numeric digits, and the other characters you see on a standard keyboard certainly ought to be there.  On the other hand, folks in France have a different idea about what a standard keyboard looks like than the people in the United States do, and the Germans and British have their own ideas, too.\par One of the nice things about a graphics based font is that all of these differing viewpoints can be accommodated.  Figure 10-2 shows how Apple has defined the font space available with eight bit characters on the Apple II}{\f4\fs20 GS}{\f4  and Macintosh.  It\rquote s worth pointing out that very few fonts actually have all of these characters, but if a font uses these characters, they are almost always in the right spot.  It\rquote s also worth pointing out that these are conventions, not rules.  Greeks and Japanese have a different enough view of a standard keyboard that this character set is scrapped and replaced, and there are some special purpose fonts that use symbols instead of letters.  The most common is Cairo, but I\rquote ve also seen an Egyptian hieroglyphics font.\par \par }\pard \li180\keepn\widctlpar\tx540\tx1080\tx1620\tx2160\tx2700\tx3240\tx3780\tx4320\tx4860\tx5400\tx5940\tx6480\tx7020\tx7560\tx8100\tx8640\adjustright {\pard\plain \li180\keepn\widctlpar\tx540\tx1080\tx1620\tx2160\tx2700\tx3240\tx3780\tx4320\tx4860\tx5400\tx5940\tx6480\tx7020\tx7560\tx8100\tx8640\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font standard}}}{\v\f4 \par }{\f4 \tab 0\tab 1\tab 2\tab 3\tab 4\tab 5\tab 6\tab 7\tab 8\tab 9\tab A\tab B\tab C\tab D\tab E\tab F\par 0\tab }{\f20 \tab \tab }{\f4\fs20 space}{\f20 \tab 0\tab @\tab P\tab `\tab p\tab \u196\'80\tab \u234\'90\tab \u8224\'a0\tab \u8734\'b0\tab \u191\'c0\tab \endash \par }{\f4 1\tab }{\f20 \tab \u17\'11\tab }{\f20\fs20 !}{\f20 \tab 1\tab A\tab Q\tab a\tab q\tab \u197\'81\tab \u235\'91\tab \u176\'a1\tab \u177\'b1\tab \u161\'c1\tab \emdash \par }{\f4 2\tab }{\f20 \tab \u18\'12\tab "\tab 2\tab B\tab R\tab b\tab r\tab \u199\'82\tab \u237\'92\tab \u162\'a2\tab \u8804\'b2\tab \u172\'c2\tab \ldblquote \par }{\f4 3\tab }{\f20 \tab \tab #\tab 3\tab C\tab S\tab c\tab s\tab \u201\'83\tab \u236\'93\tab \u163\'a3\tab \u8805\'b3\tab \u8730\'c3\tab \rdblquote \par }{\f4 4\tab }{\f20 \tab \tab $\tab 4\tab D\tab T\tab d\tab t\tab \u209\'84\tab \u238\'94\tab \u167\'a4\tab \u165\'b4\tab \u402\'c4\tab \lquote \par }{\f4 5\tab }{\f20 \tab \tab %\tab 5\tab E\tab U\tab e\tab u\tab \u214\'85\tab \u239\'95\tab \bullet \tab \u181\'b5\tab \u8776\'c5\tab \rquote \par }{\f4 6\tab }{\f20 \tab \tab &\tab 6\tab F\tab V\tab f\tab v\tab \u220\'86\tab \u241\'96\tab \u182\'a6\tab \u8706\'b6\tab \u8710\'c6\tab \u247\'d6\par }{\f4 7\tab }{\f20 \tab \tab '\tab 7\tab G\tab W\tab g\tab w\tab \u225\'87\tab \u243\'97\tab \u223\'a7\tab \u8721\'b7\tab \u171\'c7\tab \u9674\'d7\par }{\f4 8\tab }{\f20 \tab \tab (\tab 8\tab H\tab X\tab h\tab x\tab \u224\'88\tab \u242\'98\tab \u174\'a8\tab \u8719\'b8\tab \u187\'c8\tab \u255\'d8\par }{\f4 9\tab }{\f20 \tab \tab )\tab 9\tab I\tab Y\tab i\tab y\tab \u226\'89\tab \u244\'99\tab \u169\'a9\tab \u960\'b9\tab \u8230\'c9\tab \par }{\f4 A\tab }{\f20 \tab \tab *\tab :\tab J\tab Z\tab j\tab z\tab \u228\'8a\tab \u246\'9a\tab \u8482\'aa\tab \u8747\'ba\tab }{\f4 space}{\f20 \tab \par }{\f4 B\tab }{\f20 \tab \tab +\tab ;\tab K\tab [\tab k\tab \{\tab \u227\'8b\tab \u245\'9b\tab \u180\'ab\tab \u170\'bb\tab \u192\'cb\tab \par }{\f4 C\tab }{\f20 \tab \tab ,\tab <\tab L\tab \\\tab l\tab |\tab \u229\'8c\tab \u250\'9c\tab \u168\'ac\tab \u186\'bc\tab \u195\'cc\tab \par }{\f4 D\tab }{\f20 \tab \tab -\tab =\tab M\tab ]\tab m\tab \}\tab \u231\'8d\tab \u249\'9d\tab \u8800\'ad\tab \u8486\'bd\tab \u213\'cd\tab \par }{\f4 E\tab }{\f20 \tab \tab .\tab >\tab N\tab ^\tab n\tab ~\tab \u233\'8e\tab \u251\'9e\tab \u198\'ae\tab \u230\'be\tab \u338\'ce\tab \par }{\f4 F\tab }{\f20 \tab \tab /\tab ?\tab O\tab _\tab o\tab \tab \u232\'8f\tab \u252\'9f\tab \u216\'af\tab \u248\'bf\tab \u339\'cf\tab \par }\pard \keepn\widctlpar\adjustright {\f4 \par }\pard \fi-360\li1080\ri720\keepn\widctlpar\adjustright {\f4 \bullet \tab The characters from the space (0x20) to the tilde (0x7E) are all standard printing ASCII characters.\par \bullet \tab While they have standard definitions, the characters 0x11..0x14, 0xAD, 0xB0..0xB3, 0xB5..0xBA, 0xBD, 0xC2..0xC6 and 0xD6 tend to be rare in most fonts.\par \bullet \tab Character 0xCA is the non-breaking space.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 10-2:  The Standard Graphics Characters\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Font Families}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Font Families\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk53}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 system font}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 So far we\rquote ve been using the default font, also known as the system font.  Of course, there are a lot of other fonts out there.  To organize all of these fonts, Apple uses font families, font sizes, and font styles.\par Font families are the different kinds of fonts.  Each font family has a name and a number.  Sometimes it\rquote s easiest to use the name and sometimes it\rquote s easiest to use the number, but you can always count on a particular font number always matching a font name.\par You can get a font family number directly from a name, but in most cases you won\rquote t have to.  If you decide to get a font family number from a name, you will need to know the exact font name beforehand, and in most cases, if you know the font name, you know its number, too.  As a general rule, the Font Manager calls that let the user pick fonts deal with names and give you back a number, so for this lesson, we\rquote ll assume you already have a font number.\par Of course, you don\rquote t, yet, so here\rquote s a few to get you started.  I\rquote ve also shown the font name.  If you try to use any of the Font Manager calls that need a name, be sure and pass the font name just as it is shown, character for character.  You can\rquote t even change an uppercase character to a lowercase character.  If you do, the Font Manager won\rquote t recognize the font.\par \par }\pard \qj\li3600\keepn\widctlpar\adjustright {\f6\fs20 2\tab newYork\par 3\tab geneva\par 4\tab monaco\par 20\tab times\par 21\tab helvetica\par 22\tab courier\par -2\tab shaston\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 10-3:  Some Font Family Names and Numbers\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The Font Manager interface file has constants defined for all of these fonts (plus a few more), so you can use the font name when you are writing programs.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 system font}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The system font doesn\rquote t have a name, but it does have a number.  It\rquote s font number 0.  The system font is the default font, and it\rquote s also the one you see on menus, in dialogs, and so forth.\par {\*\bkmkend bk53}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font families}{\rxe bk53}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Font Sizes}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Font Sizes\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk54}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 points}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Each font family comes in a variety of sizes.  Font sizes are specified in points, a unit of measurement used by printers.  In rough terms, a 72 point font is one inch high \endash  at least, it\rquote s one inch high on the printer.  There are some funky scaling issues that take place to display fonts on the Apple II}{\f4\fs20 GS}{\f4  screen, especially in 320 mode.  Also, while a 12" monitor is pretty common on the Apple II}{\f4\fs20 GS}{\f4 , it\rquote s not required, so trying to measure a font on the screen isn\rquote t going to work.  Finally, some fonts are a little bigger than others, even when you use the same point size.  For example, in this book I\rquote ve used 12 point Times for text, and 10 point Courier for listings.  They look about the same size to me, though, and 12 point Courier definitely looks a lot bigger than 12 point times.\par You can ask for a font size from 1 to 255 points.  A 1 point font will look pretty weird; about all it\rquote s good for is to frustrate people.  Lawyers love it.  For the most part, you should start with about 12 or 14 point for the screen or a dot matrix printer, and 10 or 12 point for a laser printer.  You can always adjust the size later.\par It would take a lot of disk space to save every font in every possible font size, so of course, each font is only stored in a few sizes.  If you ask for a font that isn\rquote t available, the Font manager will politely make one for you.  That may not be what you want, since a font created on the fly by the Font Manager doesn\rquote t look as good as one created pixel by pixel by an artist, but at least it works.  With some kinds of printers, the output will even be pretty good.  Some laser writers may even have the font built in in the correct size, even if the Font Manager can\rquote t find it to display on the screen.\par There are ways to find out what font sizes exist already, and even ways to tell the Font Manager not to scale the fonts, but just to pick the closest fit.  If you\rquote re writing a program that does a lot with fonts, like a word processor or page layout program, it would be worth your while to spend some time pouring through the chapter on the Font Manager in the toolbox reference manual to find out about all of these things, but for most programs it isn\rquote t an issue, so I\rquote m not going to get bogged down in those details here.\par {\*\bkmkend bk54}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font sizes}{\rxe bk54}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Font Styles}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Font Styles\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk55}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 In addition to sizes, fonts can have styles.  Unlike sizes, styles are generally created on the fly, although you can have them created in a bit mapped form.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 Plain Text\tab Plain text is the unadorned font, with no extra styling applied.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 outline}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text\:outlined}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\outl\f4 Outline}{\f4 \tab Outlined text is drawn as an outline around the bits that would normally be displayed.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 shadow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text\:shadowed}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\shad\f4 Shadow}{\f4 \tab Shadowed text is a lot like outlined text, but the border is thicker on the bottom and right, giving a shadowed effect.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 underline}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text\:underline}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4\ul Underline}{\f4 \tab Underlined text has a line under it.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 italics}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text\:italic}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\i\f4 Italic}{\f4 \tab Italicized text is slanted.  The pixels on each line or two are moved over one column to get this effect.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 bold}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text\:bold}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\b\f4 Bold}{\f4 \tab Bold text is darker than the normal font.  On the screen, this is done by printing the character twice, with the second character one bit to the right of the first.  Of course, the font is actually preformed, but that\rquote s the effect.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par To be really annoying, you can use these styles in combination.  With a little effort, you can take a perfectly readable sentence and apply enough styles so it would take an expert to figure out what the letters really are.\par For the most part, you only need to have QuickDraw II and the Font Manager started to use the capabilities we\rquote re talking about in this lesson.  (A quick check of Appendix A or the toolbox reference manual shows that the Font Manager also requires the Memory Manager and Tool Locator, but those are running in any C program.)  If you are using the styles shadow, outline or italic, though, you also have to load QuickDraw II Auxiliary.  Both }{\f6\fs20 startdesk}{\f4  and }{\f6\fs20 startgraph}{\f4  load QuickDraw II Auxiliary, but if you\rquote re using }{\f6\fs20 StartUpTools}{\f4  you have to remember to include QuickDraw II Auxiliary in your list of tools.\par {\*\bkmkend bk55}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font styles}{\rxe bk55}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Installing a Font}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Installing a Font\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 installing fonts}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 loading fonts}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 All of the information you need to specify a font \endash  the family number, size, and style \endash  can be packed into a single structure called a font ID record.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 union FontID \{\par    struct \{\par       Word famNum;\par       Byte fontStyle;\par       Byte fontSize;\par       \} fidRec;\par    Long fidLong;\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef union FontID FontID, *FontIDPtr, **FontIDHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The font ID structure actually uses four bytes of memory, since it\rquote s made up of an integer and two bytes.  Since some toolbox calls have a hard time dealing with structures \endash  especially those that return a font ID \endash  the toolbox headers are set up with a union of a font ID structure and a long integer.  Sometimes it\rquote s easier to use the structure, and sometimes it\rquote s easier to use the long integer; this way, you get a choice.\par The family number and size are pretty obvious.  The family number is a number like one of the ones in Figure 10-3, and the size is the size of the font in points.  The font style is a bit map, with one bit for each style element:\par }\pard \qj\fi720\li360\widctlpar\adjustright {\f4 \par }\pard \qj\li1440\ri6120\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 bit\tab style\par }\pard \qj\li1440\ri6120\keepn\widctlpar\adjustright {\f4 0\tab Bold\par 1\tab Italic\par 2\tab Underline\par 3\tab Outline\par }\pard \qj\li1440\ri6120\widctlpar\adjustright {\f4 4\tab Shadow\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par In each case, a style bit of 1 says the style is in use, while a style bit of 0 says the style is not in use.  Plain text, then, would have a style byte of 0, while underlined text would have a style byte of 4.\par For the system font, all three fields are zero.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InstallFont}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you want to use a new font, you first create the font ID, then call }{\f6\fs20 InstallFont}{\f4 .  }{\f6\fs20 InstallFont}{\f4  does all of the work, loading the font if it needs to be loaded.  It also makes the font the current font, so the QuickDraw text drawing commands will use the font until the next time you change it.  In the couple of sections, we\rquote ll cover neat ways to let the user pick the font, but even now you can load a font by hard-coding the font ID, like this:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 /* load 10 point plain courier */\par id.fidRec.famNum = courier;\par id.fidRec.fontStyle = 0;\par id.fidRec.fontSize = 10;\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 InstallFont(id, 0);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first parameter to }{\f6\fs20 InstallFont}{\f4  is pretty obvious; it\rquote s the font ID for the font you want to install.  The second parameter is called the scale word.  If it\rquote s zero, you\rquote re giving the Font Manager permission to scale the font.  If you pass 1, the Font Manager uses the closest font it can find, but doesn\rquote t scale the font.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FMGetCurFID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are a lot of cases where you want to use the current font, but change the font size or style.  One way to do that is to read the current font ID, change it, and call }{\f6\fs20 InstallFont}{\f4  with the new font ID.  }{\f6\fs20 FMGetCurFID}{\f4  reads the current font, but the value is returned as a long integer.  That means you need to assign the value returned to the long integer part of the union, like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 /* switch to bold */\par id.fidLong = FMGetCurFID();\par id.fidRec.fontStyle = id.fidRec.fontStyle | 1;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 InstallFont(id);\par }{\f4 \par Problem 10-4:  Write \ldblquote Hello, world.\rdblquote  to the 320 mode screen in 36 point bold times.  Use red letters.\par Try the same program with 640 mode graphics.  As you see, the font is not the same.\par You can use }{\f6\fs20 startdesk}{\f4  for this program, then paint the screen white, just like you have done in the short programs that use }{\f6\fs20 startgraph}{\f4 .  You\rquote re loading a lot of tools you don\rquote t need, but the point of this problem is to let you see a couple of font calls in action, not spent the afternoon starting tools in a custom way!\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Choosing Fonts with ChooseFont}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Choosing Fonts with ChooseFont\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 choosing fonts}}}{\v\f4 \par }{\f4 {\*\bkmkstart bk56}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are two common ways to let the user pick a font.  One involves menus with explicit menu items for each font family, style and size, and the other one just uses one menu item to call up a standard Font Manager alert.  In my own opinion, programs that don\rquote t do much with text, but do let the user pick fonts, should use the dialog.  That saves space on the menu bar for other important jobs.  Programs like text editors and page layout programs ought to use the menus, since you can pick the options quicker with menus.\par }{\f6\fs20 ChooseFont}{\f4  is the call that brings up the Font Manager\rquote s font chooser dialog.  It\rquote s really pretty simple to use.  You need to install a menu item named \ldblquote Choose Font\rdblquote  somewhere in one of your menus.  When the user picks this item, you call }{\f6\fs20 ChooseFont}{\f4 , passing the current font ID and a word of family specification bits.  }{\f6\fs20 ChooseFont}{\f4  returns the font ID.  Like }{\f6\fs20 FMGetCurFID}{\f4 , }{\f6\fs20 ChooseFont}{\f4  returns the font ID as a long integer.\par \par }{\f6\fs20 id.fidLong = ChooseFont(currentID, 0);\par }{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 base fonts}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The family specification bits word only has one bit that\rquote s currently used.  It\rquote s bit 5, which is set if you only want to allow base families and clear otherwise.  All of the other bits should be clear  Base fonts are fonts that actually exist in the font folder, as opposed to those that the Font Manager builds for you by changing the base fonts.\par {\*\bkmkend bk56}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ChooseFont}{\rxe bk56}}}{\v\f4 \par }{\f4 \par Problem 10-5:  Create a font sampler program.  Your program should call }{\f6\fs20 ChooseFont}{\f4  to let the user pick a font.  If any windows are open, it should apply the font ID to the topmost window; if not, the value should be saved and used when the next window is opened.\par The window update routine should print the font ID at the top of the window, using the system font.  It should then print column and row numbers, similar to Figure 10-2, again using the system font.  The table should be filled in with the printable characters from the font selected by the user.\par Be sure to take the size of both the font being sampled and the system font into account when the table is created!\par Printed fonts don\rquote t always look quite like you would expect, so be sure you use a version of the Frame program that supports printing as a basis for your program.  There\rquote s no point is supporting disk I/O, though.\par Once again, the point is to get some practice working with the Font Manager, not to develop the world\rquote s best font sampler.  Keep it simple.  Allow a document size of 640 by 400 \endash  that will print fine on most printers \endash  but don\rquote t worry about it when a font is too big to display or print.  Just show what you can.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Choosing Fonts with Full Menus}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Choosing Fonts with Full Menus\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk59}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you want to use full menus to select the fonts, you need to provide three things: a way to select the font family, a way to select the font size, and a way to select the font style.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font menus\:style}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The font style is the easiest.  There are five flags you can set, so you can just put five menu items, one for each style, in a menu.  A simple check works best for showing which styles are selected.  The Menu Manager has some flags that can be used to apply font styles to the menu itself, so, for example, you can use outlined text to write \ldblquote Outline\rdblquote  in the menu.  That\rquote s a classy touch I highly recommend.  (But remember: underline won\rquote t work, since the system font doesn\rquote t support it.)  It\rquote s also traditional to include an option for plain text; it just turns off any style bits that have been selected all in one whack.\par {\*\bkmkstart bk57}The size isn\rquote t that much harder to handle.  Most programs give a few common sizes as menu items that can be selected, checking them when a particular size is the current size.  The common font sizes to include are 9, 10, 12, 14, 18 and 24.  Of course, that\rquote s just a small selection from the 255 possible font sizes, so most programs also give you the option of using }{\f6\fs20 ChooseFont}{\f4 , and a few even create a custom dialog that lets the user type in a font size in a LineEdit item.  That\rquote s something you don\rquote t know how to do yet, but it\rquote s a pretty simple dialog to create once you\rquote ve learned a few things about controls.\par There is one thing you should do in a font size menu that\rquote s a little tough.  When the Font Manager builds a font, the result isn\rquote t generally as good as a font that is created by an artist.  The user may want to pick fonts that will look good, so you need some way to tell them which font sizes actually exist.  The traditional way to show which font sizes exist as bit mapped fonts is to show those sizes using outlined or bold text.  That means you need some way to outline a menu item name, and you also need some way to tell if a font exists on disk.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CountFonts}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 CountFonts}{\f4  is one way to see if the font exists on disk.  There are a lot of ways to use }{\f6\fs20 CountFonts}{\f4 , but we\rquote ll only discuss this one.\par You pass two parameters to }{\f6\fs20 CountFonts}{\f4 , a font ID with the proper font family number and size, and a flags word, which for our purposes should be set to 0x0A.  The font ID should also have the style word set to 0xFF.  }{\f6\fs20 CountFonts}{\f4  returns the number of fonts that fit the bill.  If it returns 0, the size should be printed in normal text in the font size menu.  If something other than 0 is returned, the size should be printed with outlined text.\par You can change the style for the text in a menu item using the Menu Manager\rquote s }{\f6\fs20 SetMItemStyle}{\f4  call.  You pass the menu item number and a style word.  The style word is basically a copy of the font style byte expanded to a word length, so for outlined text you would pass 0x0008, and for normal text you would pass 0x0000.\par Putting all of this together, here\rquote s the sort of code you would need to set the style on a font size menu item:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 id.fidLong = FMGetCurFID();\par id.fidRec.fontStyle = 0xFF;\par id.fidRec.fontSize = 10;\par if (CountFonts(id, 0x0A) == 0)\par    SetMItemStyle(0, size_10);\par else\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20    SetMItemStyle(8, size_10);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par {\*\bkmkend bk57}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font menus\:size}{\rxe bk57}}}{\v\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk58}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixFontMenu}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last of the three things you need to put in your menus is a list of the font families, listed by name.  The Font Manager has a call that will do this for you.  }{\f6\fs20 FixFontMenu}{\f4  builds a list of font family names, starting with a menu ID for the menu to put the font names into; a starting ID, which will be the first menu ID assigned to one of the font family names; and a family specification bits word, like the one used for }{\f6\fs20 ChooseFont}{\f4 .  You have to tell the Menu Manager to rebuild the menu size after adding these new items, too.  A typical call looks like this:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 FixFontMenu(Font_Menu_ID, First_Font_ID, 0);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 height = FixMenuBar();\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The menu item IDs are assigned sequentially, starting with }{\f6\fs20 First_Font_ID}{\f4 .  Your }{\f6\fs20 HandleMenu}{\f4  subroutine should be updated to check for these menu numbers; to make the check easy, you might use a value like 1000 for }{\f6\fs20 First_Font_ID}{\f4 , then make sure all other menu IDs are much smaller.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ItemID2FamNum}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once your menu handler detects a font family choice, pass it to }{\f6\fs20 ItemID2FamNum}{\f4 .  This Font Manager call takes the item ID as input and returns the correct family number.  By combining this family number with the size and style information from the other two menus, you can create a complete font ID.\par \par }{\f6\fs20 id.fidRec.famNum = ItemID2FamNum(menuItemNum);\par }{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FamNum2ItemID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There\rquote s also an inverse to this call.  }{\f6\fs20 FamNum2ItemID}{\f4  returns the item ID for a particular family number, something you need to handle checking and unchecking of the family names as your application switches windows.\par \par }{\f6\fs20 menuItemNum = FamNum2ItemID(id.fidRec.famNum);\par }{\f4 \par These three different aspects of the font \endash  the family, size and style \endash  don\rquote t generally get their own private menus.  I\rquote ve seen it done that way, but in a lot of programs, menu bar space is precious enough that you just can\rquote t use three separate menus.  If you combine any of these menus, though, be sure to put the font families at the bottom, so the other font information doesn\rquote t get crowded off of the menu bar if the user has too many fonts installed!\par {\*\bkmkend bk58}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font menus\:family}{\rxe bk58}}}{\*\bkmkend bk59}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 font menus}{\rxe bk59}}}{\v\f4 \par }{\f4 \par Problem 10-6:  Rework the font sampler from Problem 10-5 so it uses three font menus, labeled \ldblquote Font\rdblquote , \ldblquote Style\rdblquote , and \ldblquote Size\rdblquote .  Be sure to support checking of the current font family, style and size, and be sure to outline the sizes that exist as bit mapped fonts on disk.  Also, add \ldblquote Plain Text\rdblquote  as one of the font styles, and handle it appropriately.\par The first entry in your Font menu should be the call to Choose Font.\par Be sure you keep the proper items checked and outlined!  As the user picks different windows, the checks and outlines should be updated to reflect the front document window.  If something other than a document window is front (like a desk accessory) or if all of the document windows are closed, the checks and outlines should reflect the font that would be used for a new window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson has covered fonts \endash  how to use them and how to select them.  You have learned to use QuickDraw to draw text in a variety of colors and pen modes.  You\rquote ve also learned how to measure text so you know when to wrap lines.  Finally, you learned to use the Font Manager to select fonts.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 CharBounds\tab CharWidth\tab ChooseFont\tab CountFonts\par CStringBounds\tab CStringWidth\tab DrawChar\tab DrawCString\par DrawString\tab DrawText\tab FamNum2ItemID\tab FixFontMenu\par FMGetCurFID\tab GetFontInfo\tab InstallFont\tab ItemID2FamNum\par SetMItemStyle\tab SetTextMode\tab StringBounds\tab StringWidth\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 TextBounds\tab TextWidth\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk60}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 fonts}{\rxe bk60}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 11 \endash  TextEdit}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 11 \endash  TextEdit}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 11 \endash  TextEdit\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 {\*\bkmkstart bk63}This lesson introduces one of the most specialized tools in the toolbox, TextEdit.  TextEdit is a fairly sophisticated tool for displaying and editing text.  In fact, you can create a reasonably good text editor using little more than TextEdit \endash  and that\rquote s what we\rquote ll do in this lesson.  This text editor will be used later in the course to help explore other parts of the toolbox in a realistic program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 An Overview}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 An Overview\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You may not have thought about it quite this way, but you already know enough to write most of a text editor.  About the only things you would need that we haven\rquote t covered are some dialogs.  After all, you know how to choose and use fonts.  You know how to figure out how big a string is in a particular font, how to scroll windows, how to draw and erase a line in }{\f6\fs20 modeXOR}{\f4  to create a flashing cursor, how to scroll the screen, how to load and save files, and how to print.  In short, you know all of the things you need to know to actually write an effective text editor up to the point where you would add dialogs.\par Of course, knowing how something is done doesn\rquote t mean it is easy, or that you would ever want to do it.  I know how to walk from Albuquerque to Chicago, but I don\rquote t ever plan to put that knowledge to use.  It would be a big job, and if I ever really wanted to get to Chicago, there are a dozen better ways.\par The TextEdit tool is a better way to handle something you already know how to do for yourself.  The TextEdit tool can display text in one or several fonts, scroll the text, update the window, and even let the user enter new text.  It gives you relatively easy to use mechanisms to print the text or examine and change it from your program.  In short, it\rquote s all you need to put together a very effective little editor.  About the only major things it can\rquote t do are wrap text around a picture and scroll horizontally.\par There are two good reasons for learning about the TextEdit tool in an introductory course.  The first is that most programs need to display text, and many need to edit text.  TextEdit gives you a way to get the program finished enormously faster than if you had to do all of that work for yourself.  The second reason we\rquote ll use TextEdit is to actually get that word processor.  It\rquote s not that I expect you to really need a word processor; you probably have two or three that do more than the one we\rquote ll write.  The real reason for wanting the editor is to give us a simple but realistic program we can use later.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using TextEdit}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using TextEdit\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 TextEdit has to be started, and it\rquote s not one of the tools that we\rquote ve been starting so far.  There\rquote s not much to adding another tool to the list of tools to start, but you should be sure you add TextEdit to your }{\f6\fs20 StartUpTools}{\f4  tool list.  The tool number for TextEdit is 34 (0x22); the version number, as of System Disk 6.0, is 1.3 (0x0103 in the resource description file).\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 controls}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The easiest way to use TextEdit is to create a TextEdit control.  That\rquote s something we haven\rquote t done before, but creating a control is a lot easier than you might think.  For the most part, it\rquote s all done with resources.\par Back in Lesson 5, when you learned how to set up a window with an }{\f6\fs20 rWindParam1}{\f4  resource, there were two fields at the end that I basically told you to not worry too much about.  They were right at the end of the resource.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 rWindParam1 (1001) \{\par    $DDA5,                      /* wFrameBits */\par    nil,                        /* wTitle */\par    0,                          /* wRefCon */\par    \{0,0,0,0\},                  /* ZoomRect */\par    linedColors,                /* wColor ID */\par    \{0,0\},                      /* Origin */\par    \{1,1\},                      /* data size */\par    \{0,0\},                      /* max height-width */\par    \{8,8\},                      /* scroll ver hors */\par    \{0,0\},                      /* page ver horiz */\par    0,                          /* winfoRefcon */\par    10,                         /* wInfoHeight */\par    \{30,10,183,602\},            /* wposition */\par    infront,                    /* wPlane */\par    nil,                        /* wStorage */\par    $0800                       /* wInVerb */\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 11-1:  Resource For a Standard Document Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The field labeled }{\f6\fs20 wStorage}{\f4  is actually a reference to a list of controls.  The last field, }{\f6\fs20 wInVerb}{\f4 , is named a little more appropriately; it is a flags word that gives some detailed information about the control reference, color table reference, and window title reference.  You used the color table bits, bits 10 and 11, back in Lesson 5 to create a window with a custom color table.  In this lesson, we\rquote ll use bits 7-0, which describe the control list.\par (Incidentally, the comments for the fields come from the Types.rez header file that comes with the Rez compiler.  I left the names alone so you would feel comfortable reading that file later.  }{\f6\fs20 wStorage}{\f4  is a horrible comment for what the field is used for.  It\rquote s a hold over from the pre-resource days; this position in the window record tells where the window is stored.)\par To create a TextEdit control, the first step is to modify the window resource so it looks for a list of controls.  The modified resource looks like this:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 rWindParam1 (1001) \{\par    $C1A5,                      /* wFrameBits */\par    nil,                        /* wTitle */\par    0,                          /* wRefCon */\par    \{0,0,0,0\},                  /* ZoomRect */\par    linedColors,                /* wColor ID */\par    \{0,0\},                      /* Origin */\par    \{0,0\},                      /* data size */\par    \{0,0\},                      /* max height-width */\par    \{0,0\},                      /* scroll ver hors */\par    \{0,0\},                      /* page ver horiz */\par    0,                          /* winfoRefcon */\par    0,                          /* wInfoHeight */\par    \{30,10,195,630\},            /* wposition */\par    infront,                    /* wPlane */\par    1001,                       /* wStorage */\par    $0802                       /* wInVerb */\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 11-2:  Resource For a Window with Controls\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par {\*\bkmkstart bk61}The 1001 for }{\f6\fs20 wStorage}{\f4  is a resource number for an }{\f6\fs20 rControlTemplate}{\f4  resource.  A value of 2 in bits 7-0 of the }{\f6\fs20 wInVerb}{\f4  parameter tells the Control Manager that the }{\f6\fs20 wStorage}{\f4  parameter is a resource ID, and that it points to a single control, not a list of controls.  (We\rquote ll use lists of controls in Lesson 13.)\par The next step is to create the TextEdit control itself.  Here\rquote s the }{\f6\fs20 rControlTemplate}{\f4  resource we\rquote ll use in the problems to create a TextEdit control.  We\rquote ll talk about the individual fields in a moment.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    1001,                              /* Application defined ID */\par    \{0,0,165,620\},                     /* controls bounding rectangle */\par    editTextControl \{\{\par       $0000,                          /* flags */\par       $7C00,                          /* more flags */\par       0,                              /* refcon */\par       $42280000,                      /* text flags */\par       /*--------------------------------------------------*/\par       \{-1,-1,-1,-1\},                  /* indent Rect */\par       /*--------------------------------------------------*/\par       $FFFFFFFF,                      /* vert bar */\par       0,                              /* vert Amount */\par       nil,                            /* hor bar */\par       0,                              /* hor amount */\par       /*--------------------------------------------------*/\par       nil,                            /* style ref */\par       /*--------------------------------------------------*/\par       0,                              /* text descriptor */\par       nil,                            /* text ref */\par       0,                              /* text length */\par       /*--------------------------------------------------*/\par       nil,                            /* max chars */\par       nil,                            /* max lines */\par       nil,                            /* Max chars per line */\par       nil,                            /* max height */\par       /*--------------------------------------------------*/\par       nil,                            /* color ref */\par       4,                              /* drawing mode */\par       /*--------------------------------------------------*/\par       nil,                            /* Filter Proc Ptr */\par       \}\}\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 11-3:  }{\f6\fs20 rControlTemplate}{\f4  for a TextEdit Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par As you can see, there\rquote s a lot to this record.  While there\rquote s a lot of work setting up this resource, one of the really neat things about the resource is that it\rquote s all you have to do.  When you add this resource to your window, TextEdit, the Control Manager, and the Window Manager all take over and work a small miracle.  Suddenly, when your program runs, a cursor appears in the window.  When you close the window, the control and all of its associated data structures are cleaned up.  The user can type text, erase and delete text, cut copy and paste, and all sorts of wonderful things.  We\rquote ll get into a lot more detail about that later.  With a few rather simple additions to your program, the user can even change fonts, format the text, load and save files, and print the text.  You\rquote ll learn to do all of that shortly.\par Here\rquote s the details about the parameters in the }{\f6\fs20 rControlTemplate}{\f4  resource.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 1001,                              /* Application defined ID */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This is the control ID.  You need this number for some Control Manager and TextEdit calls.  It can be anything except 0 or 1, but it causes a little less confusion if you use the same number for the resource ID and the control ID, as we\rquote ve done here.\par (Actually, 1 would work as a control ID, but it\rquote s not a good choice, for reasons we\rquote ll explore in a later lesson.)\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 \{0,0,165,620\},                /* controls bounding rectangle */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This rectangle is the size of the TextEdit control.  For our text editor, the size is the same as the window size, and later on we\rquote ll set up some flags to tell TextEdit to change the size of the control to match the size of the window.  You can create a TextEdit control that doesn\rquote t take up the whole window, though.  That way you can have text in the same window with other controls or pictures.  You can even put more than one TextEdit control in the same window.  You\rquote ll learn how to handle more than one control in the same window in Lesson 13.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 $0000,                          /* flags */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 All of the bits but one are unused in this flags word \endash  at least, they are unused for a TextEdit control.  This same resource type is used for a lot of different kinds of controls, and for some of the other controls, more of the bits are used.\par Bit 7 should be clear, as it is in our resource, if you want the control to be visible.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 $7C00,                          /* more flags */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par All of the bits in this flags word are used for TextEdit controls.\par \par }\pard \qj\fi-1080\li2520\ri360\widctlpar\adjustright {\f4 bit 15\tab If this bit is set, the control is the current target.  That means that if the user presses a key, this control is the one that gets the character.  TextEdit sets the bit for itself, though, and we\rquote re supposed to leave in clear when the control is defined.\par \par bits 14-12\tab These bits have to be set to 1.  TextEdit uses them for internal flags, and will turn them off if it needs to.\par \par bit 11\tab Setting this bit tells TextEdit to create its own size box, and to hook that size box to the window.  It replaces the size box we\rquote ve used in the past, so we\rquote ll need to get rid of the size box and scroll bars we generally ask }{\f6\fs20 TaskMaster}{\f4  to handle for us.\par \par \tab If you are creating a TextEdit control that will be a small part of a larger window, you would clear this bit.\par \par bit 10\tab This bit must be set to 1.  It\rquote s another one of those internal bits that TextEdit insists must be set when you create the control.\par \par bits 9-4\tab These bits must be set to 0.\par \par bits 3-2\tab You can create a separate color table for the TextEdit control, and there is a field later on in the resource that refers to the color table.  These bits tell what kind of a color table reference we\rquote re using.  In this case, we\rquote ve set the bits to 00 for a pointer reference, and then set the color table pointer to }{\f6\fs20 nil}{\f4 , telling TextEdit to use the default color table.\par \par bits 1-0\tab These bits define the reference type for a list of styles.  We will cover styles a little later in this lesson, but we won\rquote t use styles from a resource at all, so once again the reference is 00, and the pointer that appears later in the resource is }{\f6\fs20 nil}{\f4 .\par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 0,                              /* refcon */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 The Control Manager sets aside this long word field for our own use.  We\rquote re not using it, so it\rquote s set to 0.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 $42280000,                      /* text flags */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 The text flags long word controls all sorts of things.  This parameter finishes the job started by the flag words, letting you tell TextEdit just how you want the text to look, and how you want it to work.\par \par }\pard \qj\fi-1080\li2520\ri360\widctlpar\adjustright {\f4 bit 31\tab This bit is set if the TextEdit control is supposed to actually be a control.  You can create a TextEdit control and hide it from the Control Manager by clearing this bit, but then you have to do all of the nasty work for yourself.\par \par bit 30\tab This bit must be set to 1, telling TextEdit that there will only be one format used for all of the text.  It\rquote s there so Apple can expand TextEdit later.\par \par bit 29\tab If this bit is clear, like it is in our resource, TextEdit will allow any number of different styles of text.  If it\rquote s set, only one font, size, and so forth can be used.\par \par bit 28\tab For something like a program listing, you might want to let a line disappear off of the right edge of a page if it is too long.  In that case, you would set this bit.  Text editors normally break a line when they get to the end of a page, starting the next word on a new screen line.  If you clear this bit, as we\rquote ve done, that\rquote s what TextEdit will do with the lines.\par \par \tab Another way to think of this is to label a physical line of text as anything ending with a carriage return character.  If this bit is set, TextEdit only uses one screen line for each physical line, no matter how long the line is.  If this bit is clear, TextEdit treats a physical line as a paragraph, splitting it up so you can see all of the words in the available space.\par \par bit 27\tab Setting this bit disables scrolling.\par \par bit 26\tab TextEdit can be used to display text, as well as edit it.  If you set this bit, the user can read the text, but can\rquote t change it.\par \par bit 25\tab TextEdit can handle cutting and pasting text, but there are some problems with simple methods of cutting and pasting.  The problems are related to how you handle cutting and pasting words of text.  If you set this bit, it turns on smart cuts and pastes, which cause TextEdit to apply a few extra rules when it cuts and pastes text.  Specifically, blanks are removed from the start of text when you cut it.  If there are no blanks at the start of the text, blanks at the end are removed.  When text is pasted, blanks are inserted if the pasted text would butt up against characters already in the window.\par \par \tab What this does is apply some reasonable rules to help you cut and paste words.  When you select a word and cut it, TextEdit tries to remove extra spaces from the text you cut.  Then, when you paste the text, TextEdit tries to keep spaces between the words.  The method isn\rquote t perfect, but it works more often than it fails.\par \par bit 24\tab If you are using more than one TextEdit control in a window, or if you\rquote re mixing TextEdit controls with other controls that can use keys, the Tab key is normally used to move from one control to another.  If you\rquote re not using more than one control that uses keys, though, you should let the user type tabs.  Setting this bit tells TextEdit to move to the next control when you type Tab; clearing it, as we\rquote ve done, tells TextEdit to put tabs in the text.\par \par bit 23\tab If you set this bit, TextEdit draws a box around the control.  That\rquote s probably what you would want if the control is a small control in a larger window, but in our case the control fills the entire window, so we left this bit off.\par \par bit 22\tab This bit must be set to 0.\par \par bit 21\tab TextEdit uses a ruler to decide how wide the text is.  If this bit is set, resizing the window automatically resizes the ruler.  To create a program that works a little more like a real text editor, the ruler size should depend on the width of the printed page, not on the width of the window.  In that case, the bit would be clear, and the program would have some other way of setting the ruler width.\par \par bit 20\tab If this bit is clear, TextEdit lets the user select text.  If it is set, the user can\rquote t select text.\par \par \tab In most cases, if you\rquote re going to let the user edit the text, you should let them select it, too.\par \par bit 19\tab Imagine two open windows on the desktop, both with TextEdit boxes, and both with selected text.  When you select one of them, the controls are drawn differently.  The controls in the window that isn\rquote t active are just outlines, while the controls in the active window have arrows, thumbs, and so forth.  If you set this bit, the selections will change, too.  In the active window, selected text will be inverted, like you\rquote re used to seeing it.  In the window that isn\rquote t active, TextEdit draws an outline around the text.  I sort of like that.  If you don\rquote t, clear this bit in your resource.\par \par bits 18-0\tab These bits are not used, and should be set to 0.\par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 \{-1,-1,-1,-1\},                  /* indent Rect */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 You don\rquote t want text smashed right up against the edge of the window.  This rectangle tells how big of a margin to leave on each side.  The values of -1 we\rquote ve used tell TextEdit to use some default values.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 $FFFFFFFF,                      /* vert bar */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This is the handle for the vertical scroll bar.  If you don\rquote t want a vertical scroll bar, use }{\f6\fs20 nil}{\f4 .  If you want TextEdit to create one for you, use $FFFFFFFF.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 0,                              /* vert Amount */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This tells TextEdit how far to scroll when the scroll bar arrow is used.  A value of 0 tells TextEdit to use its internal default.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* hor bar */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This field is for the horizontal scroll bar.  Unfortunately, TextEdit doesn\rquote t use it.  Maybe someday it will.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 0,                              /* hor amount */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 If horizontal scroll bars are ever added to TextEdit, this field will be the number of pixels to scroll.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* style ref */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This is a reference to the styles to use in the TextEdit control.  We won\rquote t be using predefined styles, so this field is set to }{\f6\fs20 nil}{\f4  in our resource.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 0,                              /* text descriptor */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This field tells what sort of value is in the next one.  We\rquote ve set it to 0, for a pointer.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* text ref */\par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 \par This field is a reference to the initial text for the TextEdit record.  For a help screen, you might want to point this at another resource.  For our text editor, we\rquote ll load the text manually, so this field is set to }{\f6\fs20 nil}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 0,                              /* text length */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This is the length of the text in the previous field.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* max chars */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 You can limit the number of characters in the TextEdit control, or tell TextEdit it can allow as many characters as it wants.  That\rquote s what we\rquote ve done by setting the field to }{\f6\fs20 nil}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* max lines */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 In later versions of TextEdit, you may be able to limit the number of lines in a TextEdit control.  So far, this field isn\rquote t actually used, and must be set to }{\f6\fs20 nil}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* Max chars per line */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 In later versions of TextEdit, you may be able to limit the number of characters on a  line.  So far, this field isn\rquote t actually used, and must be set to }{\f6\fs20 nil}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* max height */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 I\rquote m really not sure what this field might be used for some day, but it isn\rquote t used yet.  It must be set to }{\f6\fs20 nil}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* color ref */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This field is used for color tables.  We aren\rquote t using one, so the field is set to }{\f6\fs20 nil}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 4,                              /* drawing mode */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 You get some control over the drawing mode TextEdit uses.  We\rquote ve picked a drawing mode of 4, which is the numeric value for }{\f6\fs20 modeForeCOPY}{\f4 .  It\rquote s not very fast, but it uses the correct colors.  If you\rquote re willing to play with the text colors a bit, you can speed up the text drawing by using one of the other drawing modes.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 nil,                            /* Filter Proc Ptr */\par }\pard \qj\fi360\li720\ri360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\li720\ri360\widctlpar\adjustright {\f4 This parameter is for a filter procedure, which gives you control over some of the internal functions of TextEdit.  We won\rquote t be using filter procedures in this course.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par TextEdit does almost everything for you, but there is one chore you do have to take care of.  Your window update procedure has to make one call to }{\f6\fs20 DrawControls}{\f4  to make sure the control actually gets drawn.\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 DrawControls}}}{\v\f6\fs20 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 DrawControls(GetPort);\par {\*\bkmkend bk61}}{\pard\plain \qj\fi180\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rControlTemplate resource}{\rxe bk61}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 11-1:  Start with the solution to Problem 10-6, which was the font sampler that used full menus.  We\rquote ll use that program as the basis for our text editor, which will be used in several problems throughout the rest of the course.  Remove the font sampler code, so all you have left is Frame with the font selection menus.  Now add the TextEdit resource to the document window.\par When you worked Problem 10-6, you took out disk I/O.  We\rquote ll put that back in later.  You should leave the printing hooks in your program, but for now, don\rquote t try to implement printing.  There are some details about TextEdit we need to talk about before you try to print a document.  Finally, while we\rquote re starting with the font sampler for the very good reason that we\rquote ll implement font selection, we haven\rquote t covered how to do it yet.  This problem is just about getting the basic window up.  You should be able to type text, use the mouse, and use cut, copy, paste and clear.  Leave everything else for later.\par Be sure and change the frame bits word in the window resource to get rid of the }{\f6\fs20 TaskMaster}{\f4  scroll bars and grow box.  TextEdit uses its own, and you don\rquote t want two sets of controls in the same window.  Also, remember that TextEdit is a new tool \endash  you need to update your tool startup list appropriately.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Editing with TextEdit}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Editing with TextEdit\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 TextEdit supports quite a few editing operations, doing all of the work for you.  We\rquote ll explore them in this section, using the program you wrote as a solution to Problem 11-1.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tabs}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Naturally, you can type characters from the keyboard.  The return key starts a new line, and unlike most other tools, TextEdit supports the tab key.  You can even change where the tab stops are located, although we won\rquote t deal with that in this lesson.\par TextEdit uses the standard editing keys, and supports the standard mouse editing features.\par \par }\pard \qj\fi-1440\li1800\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 Key\tab Description\par }\pard \qj\fi-1440\li1800\ri360\widctlpar\adjustright {\f4 \par left arrow\tab Backs up one character.  Hold down the command key to back up to the start of the last word, or the option key to move to the start of a line of text.  You can hold down the shift key while you move the cursor to select text.\par \par right arrow\tab Moves forward one character.  Hold down the command key to move to the next word, or the option key to move to the end of the line.  You can hold down the shift key while you move the cursor to select text.\par \par up arrow\tab Moves up one line.  Hold down the command key to move to the top of the page, or the option key to move to the start of the document.  You can hold down the shift key while you move the cursor to select text.\par \par down arrow\tab Moves down one line.  Hold down the command key to move to the bottom of the page, or the option key to move to the end of the document.  You can hold down the shift key while you move the cursor to select text.\par \par delete\tab If any text is selected, the delete key deletes the text.  If nothing is selected, the character to the left of the insertion point is deleted.\par \par clear\tab This key works like the delete key if anything is selected, but is ignored if nothing is selected.\par \par control-F\tab This is a forward delete; it deletes the character to the right of the selection point.  If any text is selected, it works like delete and clear, selecting the selected text.\par \par control-Y\tab Deletes all of the characters from the insertion point to the end of the line.\par \par control-X\tab Copies the selected text to the clipboard, then deletes it.\par \par control-C\tab Copies the selected text to the clipboard.\par \par control-V\tab Pastes the text in the clipboard into the document.  If any text is selected, the selected text is deleted first.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table 11-1: TextEdit Editing Functions\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You can also use the mouse, of course.  You can click to move the selection point, or click and drag to select characters.  You can also double-click, which selects words, or even triple-click to select lines.\par Finally, TextEdit knows about your Edit menu.  After all, the Cut, Copy, Paste and Clear commands all have standard menu ID numbers.  Well, TextEdit recognizes them, taking appropriate action when the commands are used.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Changing the Ruler}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Changing the Ruler\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ruler}}}{\f4 {\*\bkmkstart bk62}TextEdit can do some limited formatting of the text it displays \endash  things like left or right justification, or picking out where the tab stops should go.  The values that control these formatting options are collected in a ruler record that looks like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct TERuler \{\par    Word leftMargin;\par    Word leftIndent;\par    Word rightMargin;\par    Word just;\par    Word extraLS;\par    Word flags;\par    LongWord userData;\par    Word tabType;\par    TabItem theTabs[1];\par    Word tabTerminator;\par    \};\par typedef struct TERuler TERuler, *TERulerPtr, **TERulerHndl;\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 11-4:  The Ruler Record\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Setting things like tab stops and margins works best with dialogs or interactive rulers.  We haven\rquote t talked about dialogs, and we won\rquote t talk about interactive rulers, so I\rquote m going to ignore a lot of the fields in this record for now.  If you want to read about all of the fields, flip back to Appendix A.  We\rquote ll also talk about a few more of these fields later, when we create some sample dialogs.  For now, I\rquote d like to concentrate on the }{\f6\fs20 just}{\f4  field, which controls text justification.\par Text justification is used to line up lines of text.  Unjustified text, called left justified by TextEdit, is the sort you would normally get with a typewriter.  The left edge of all of the lines match, but the right edges don\rquote t \endash  they end after the last character of the last word.  Right justification does just the opposite, lining up the right edges of each line, leaving a ragged left edge.  Fill justification lines up both the left and right edges by inserting small amounts of space between each word (or character, in some editors).  Fill justification is what you normally see in books, like this one.  The last type of justification is centering, which puts the same amount of space on the left and right edge of the text.\par The }{\f6\fs20 just}{\f4  field records the kind of justification TextEdit uses.  You can use any of these values:\par \par }\pard \qj\li720\keepn\widctlpar\adjustright {\f4 0\tab left justification\par -1\tab right justification\par 1\tab center justification\par }\pard \qj\li720\widctlpar\adjustright {\f4 2\tab fill justification \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEGetRuler}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Since there are other fields in the record besides the }{\f6\fs20 just}{\f4  field, the best way to change the way text is justified is to read the current ruler record, change it, and then send the changed record back to TextEdit.  }{\f6\fs20 TEGetRuler}{\f4  is used to read the record.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 void TEGetRuler(Word rulerDescriptor, Ref rulerRef, Handle teH);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f6\fs20 rulerDescriptor}{\f4 \tab This field tells whether }{\f6\fs20 rulerRef}{\f4  is a pointer, an existing handle, a resource ID, or a pointer to a location to put a handle TextEdit allocates for us.  Since the ruler record doesn\rquote t have a fixed length, it\rquote s best to let TextEdit figure out how much room it needs and allocate a handle to hold it.  For that, }{\f6\fs20 rulerDescriptor}{\f4  is set to 3.\par \par }{\f6\fs20 rulerRef}{\f4 \tab This is the address where we want TextEdit to place the handle.  If the variable where the handle will be stored is called }{\f6\fs20 rulerHandle}{\f4 , you would use a parameter of }{\f6\fs20 (Ref) &rulerHandle}{\f4 .  The type cast is important, since }{\f6\fs20 Ref}{\f4  is a macro that expands to }{\f6\fs20 Long}{\f4 , not a pointer to a handle.\par \par }{\f6\fs20 teH}{\f4 \tab If there are several text edit controls in a single window, you can pass the handle for a specific control for this last parameter.  We just use }{\f6\fs20 NULL}{\f4 , which tells TextEdit to look at the active control.  Since there\rquote s only one of them in our window, we know it will be the right one.  Just be sure you use }{\f6\fs20 SetPort}{\f4  so your window is the active window.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TESetRuler}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 After you change the ruler, call }{\f6\fs20 TESetRuler}{\f4  to force TextEdit to use the new values.  The parameters are almost the same as for the }{\f6\fs20 TEGetRuler}{\f4  call.  The only difference is that you pass 1 for }{\f6\fs20 rulerDescriptor}{\f4  instead of 3, and you pass the actual handle instead of a pointer to the handle.\par Of course, you have to check for errors after the }{\f6\fs20 TEGetRuler}{\f4  call, since you wouldn\rquote t want to modify something you thought was a handle when }{\f6\fs20 TEGetRuler}{\f4  had run out of memory or something.  Be sure and lock the handle before you use it, too, and dispose of the handle after the }{\f6\fs20 TESetRuler}{\f4  call.\par Rulers do have one unfortunate limitation.  Each ruler applies to the entire TextEdit document.\par \par Problem 11-2:  Add justification to the editor you wrote in Problem 11-1.  Start by adding four new menu items to the Style menu that you already have for the font style.  These new menu items should be at the bottom, and there should be a separator under the last font style.  The new items are \ldblquote Left Justify\rdblquote , \ldblquote Right Justify\rdblquote , \ldblquote Fill Justify\rdblquote , and \ldblquote Center\rdblquote .  Use a check mark to show which one is currently in use, reading the setting from TextEdit to set the check mark.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CheckMenu}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When the user picks one of these menu items, set the appropriate value for }{\f6\fs20 just}{\f4  in the ruler record.  Dim the menu items if there are no open windows.  Check the appropriate style menu in your }{\f6\fs20 CheckMenu}{\f4  subroutine (the one you call from the event loop to highlight and unhighlight menus), reading the ruler to find out what style to check.  If that seems unnecessary, try setting one style in one window, and another style in a second window, and switch back and forth \endash  I would expect the style that is checked to switch, too.\par Note:  When I added these final checks to my }{\f6\fs20 CheckMenu}{\f4  subroutine, I finally noticed an impact on the program.  The repeated calls to get the ruler were interfering with the flashing of the cursor.  To fix the problem, I just moved the }{\f6\fs20 CheckMenu}{\f4  call to a spot right after the case statement that handles events, then did a simple check, calling it only if the event that was just handled wasn\rquote t a }{\f6\fs20 nullEvt}{\f4 .  That way, the subroutine was only called if something happened.  So, why not make this check earlier?  Because the call wasn\rquote t a problem earlier, and there is no point in making a program more complicated until you have a reason!\par {\*\bkmkend bk62}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text justification}{\rxe bk62}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Changing Fonts}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Changing Fonts\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text styles}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text colors}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 fonts}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 TextEdit uses a style record to hold information about the current font.  The style structure looks like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct TEStyle \{\par    FontID styleFontID;\par    Word foreColor;\par    Word backColor;\par    LongWord userData;\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct TEStyle TEStyle}{\pard\plain \fi180\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TEStyle}}}{\f6\fs20 , *TEStylePtr, **TEStyleHndl;\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 11-5:  }{\f6\fs20 TEStyle}{\f4  Structure\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Knowing what you do about fonts, the fields in this structure should make a lot of sense.  The first one is the font ID; it\rquote s exactly the same one you used in the last lesson.  The }{\f6\fs20 foreColor}{\f4  and }{\f6\fs20 backColor}{\f4  fields are the foreground and background colors.  The last field is for your own use.\par Setting the style is pretty easy.  }{\f6\fs20 TEStyleChange}{\f4  changes the style for all of the text in the current selection.  If there is no selection, }{\f6\fs20 TEStyleChange}{\f4  changes something called the null style record.  That\rquote s just a 50\u162\'a2 name for the default style.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TEStyleChange}}}{\v\f6\fs20 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 void TEStyleChange(Word flags, TEStylePtr teStyle, Handle teH);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 flags}{\f4 \tab You don\rquote t always want to change everything about a particular style.  For example, if the user selects some text and picks a font size of 10, you wouldn\rquote t want to set the font style, too.  After all, some of the text might be bold, and some normal text.  You can set and clear bits in this flag to tell }{\f6\fs20 TEStyleChange}{\f4  just what you want to change, and what you want left alone.\par \par }\pard \qj\fi-1080\li3240\widctlpar\adjustright {\f4 bits 15-7\tab Reserved; set to 0.\par bit 6\tab If this bit is set, the font family is changed.\par bit 5\tab If this bit is set, the font size is changed.\par bit 4\tab If this bit is set, the foreground color is changed.\par bit 3\tab If this bit is set, the background color is changed.\par bit 2\tab If this bit is set, the user data is changed.\par bit 1\tab If this bit is set, the style attributes are changed.\par bit 0\tab If this bit is set, the style attributes are reversed.  This only happens if all of the text that is selected already has a style that matches the attributes in the style record.  If the selected text doesn\rquote t match the font style in the style record, setting this bit would have the same effect as setting bit 1.  (More on this in a moment.)\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par }{\f6\fs20 stylePtr}{\f4 \tab This is a pointer to the style record itself.\par \par }{\f6\fs20 teH}{\f4 \tab This is the handle of the TextEdit record to change.  If you pass }{\f6\fs20 NULL}{\f4 , the active TextEdit record is changed.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Most of this is pretty obvious, but bits 0 and 1 of the }{\f6\fs20 flags}{\f4  parameter may seem a bit odd.  The reason for the difference is that a lot of editors will undo a style if you apply it twice.  For example, if you select a word and pick out Bold from the style menu, the word changes to bold text.  If you pick bold again, the text changes back to the way it was.  Setting bit 0 when you change the font style will cause TextEdit to work that way.  Setting bit 1, instead, tells TextEdit to just do it.  You have to pick one or the other, though.  If you set both bits, }{\f6\fs20 TEStyleChange}{\f4  will flag an error.\par Towards the end of a programming project, you\rquote ll sometimes hear programmers muttering about the 80-20 rule.  Normally that rule says that a program spends 80 percent of its time in 20 percent of the code.  (I\rquote ve also heard it as the 90-10 rule.  I guess it depends on the kind of programs you write.)  Towards the end of a programming project, though, the 80-20 rule takes on a new meaning: a programmer spends 80 percent of his programming time writing 20 percent of the program.  Or, saying the same thing a different way, it\rquote s the details that sneak up and cause you grief.  And that\rquote s what happens with changing fonts, too.\par Everything we\rquote ve talked about works just fine.  There\rquote s just one tiny problem.  When you pull down the font menu, you sort of expect to see a check mark beside the name of the font that you\rquote re using.  Multiple fonts create a minor headache, though, since moving the cursor can change the font.  Selecting text presents another problem, since the selected text might include more than one font.  A good way to handle this is not to check a font name unless all of the selected text uses the same font, but that assumes you know what font is being used.  Well, you can find out.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f6\fs20 TEGetSelectionStyle}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TEGetSelectionStyle}{\f4  is a little more complicated than the call to set a selection.  It does have to return more than one style, after all.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 Word TEGetSelectionStyle(TEStylePtr commonStyle, Handle styleHandle,\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    Handle teH);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 commonStyle}{\f4 \tab This is the field we actually need.  }{\f6\fs20 TEGetSelectionStyle}{\f4  looks for all of the style elements that are the same in all of the selected text.  Those values are placed in this style record.  Of course, some style elements might be the same, while others are different \endash  the selection might use the same font family, for example, but part of the selection could be bold while part is not.  }{\f6\fs20 TEGetSelectionStyle}{\f4  also returns an integer flag word with bits telling which fields are valid.\par \par }\pard \qj\fi-540\li2880\widctlpar\adjustright {\f4 bit 5\tab This bit is set if the font family is the same throughout the selection.\par bit 4\tab This bit is set if the font size is the same throughout the selection.\par bit 3\tab This bit is set if the foreground color is the same throughout the selection.\par bit 2\tab This bit is set if the background color is the same throughout the selection.\par bit 1\tab This bit is set if the user data field is the same throughout the selection.\par bit 0\tab This bit is set if the font style attributes are the same throughout the selection.\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f4 \par }{\f6\fs20 styleHandle}{\f4 \tab You have to pass a handle for this value, and it should be one that can be moved.  }{\f6\fs20 TEGetSelectionStyle}{\f4  will resize it and put all of the style records that are used throughout the selection into the buffer, one after another.  The very first word of the buffer is the number of style records.\par \par }{\f6\fs20 teH}{\f4 \tab As with the other calls, this is the handle for the text edit control you want to check.  If you pass }{\f6\fs20 NULL}{\f4 , TextEdit uses the active text edit control.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 11-3:  In this problem, you add font selection to the editor that you created in Problem 11-2.\par Start by adding a call to }{\f6\fs20 TEGetSelectionStyle}{\f4  in your }{\f6\fs20 CheckMenu}{\f4  subroutine.  Check and uncheck the various font menus, leaving all of the items unchecked if a characteristic is mixed.  For example, if the font family varies, none of the font names should be checked.\par Now call }{\f6\fs20 TEStyleChange}{\f4  to change the style when the user picks a new font family, font style, or font size.\par Get rid of the call to }{\f6\fs20 ChooseFont}{\f4 , and get rid of the Choose Font command, to.  There\rquote s nothing really wrong with this command, but it makes handling the various style selections a lot more complicated than it needs to be for our purposes, which is to learn about the toolbox.\par You can also get rid of the font variable in the document record, since TextEdit is handling all of that for you, now.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Loading and Saving}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Loading and Saving\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 files}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEGetText}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TESetText}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The next step in writing the editor is to load and save text files.  TextEdit has two calls that help.  The first is }{\f6\fs20 TEGetText}{\f4 , which returns the text and the style information for the text in a TextEdit control.  The text and style information come back in two separate buffers.\par }{\f6\fs20 TESetText}{\f4  puts text into a TextEdit control.  Its inputs are the same buffers returned by }{\f6\fs20 TEGetText}{\f4 .\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEGetText}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 LongWord TEGetText(Word bufferDescriptor, Ref bufferRef, Long bufferLength,\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    Word styleDescriptor, Ref styleRef, Handle teH);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f6\fs20 bufferDescriptor}{\f4 \tab This flags word tells }{\f6\fs20 TEGetText}{\f4  what we are passing in }{\f6\fs20 bufferRef}{\f4 .  It also tells }{\f6\fs20 TEGetText}{\f4  what format to use for the text.  We\rquote ll use 0x0019, which tells }{\f6\fs20 TEGetText}{\f4  that }{\f6\fs20 bufferRef}{\f4  is the address of a variable, and that it should put a handle there.  }{\f6\fs20 TEGetText}{\f4  will figure out how big the handle needs to be and allocate the memory.  Of course, we need to remember to dispose of the handle when we\rquote re finished saving the text.  This flags word also tells }{\f6\fs20 TEGetText}{\f4  to use a null terminated string for the format of the text.\par \par }{\f6\fs20 bufferRef}{\f4 \tab We\rquote ll pass the address of our pointer variable in this spot.  You can look up the call in the toolbox reference manual if you would like to find out what the other possible parameters are.\par \par }{\f6\fs20 bufferLength}{\f4 \tab This field isn\rquote t used the way we\rquote re calling }{\f6\fs20 TEGetText}{\f4 .  Pass a 0.\par \par }{\f6\fs20 styleDescriptor}{\f4 \tab Pass a 3, which tells }{\f6\fs20 TEGetText}{\f4  that the }{\f6\fs20 styleRef}{\f4  field is a pointer to a variable where it should store a handle.  }{\f6\fs20 TEGetText}{\f4  will allocate the memory and return the handle.\par \par }{\f6\fs20 styleRef}{\f4 \tab This is where you pass the address of the variable where the style handle will be stored.\par \par }{\f6\fs20 teH}{\f4 \tab This is the handle of the TextEdit control we want to know about.  Pass }{\f6\fs20 NULL}{\f4 , as usual, to tell }{\f6\fs20 TEGetText}{\f4  to use the active TextEdit record.\par \par }{\f6\fs20 TEGetText}{\f4 \tab }{\f6\fs20 TEGetText}{\f4  is a function; it returns the total length of the text.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Both the text and style records need to be saved.  }{\f6\fs20 TEGetText}{\f4  returns the length of the text buffer, so we can use that as part of the output file.  You can write the length as a four byte value at the start of the file, so that you can easily read the length when you load the file.  Right after that, you would write the actual text.  Next would come the length of the style information, followed by the data returned in the style buffer.  The only trick here is to figure out how long the style record is.  You can do that by looking in the style record itself, which has this format:\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1072{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw200\pich179\picwgoal4000\pichgoal3580\macpict\bliptag1075606665\blipupi72{\*\blipuid 401c74896bf5e074d895a4e0f54c6b2b}07b7ffffffff00b200c71101a0008201000affffffff00b200c70900000000000000003100010002000f006609ffffffffffffffff38a10096000c02000000020000000000000001000a00020011000d00552c000800140554696d65730300140d00092b260a0776657273696f6ea00097a0008c01000affffffff00b200c7300029000200450066a10096000c02000000020000000000000001000a00310016003c0051280039001c0d7468652052756c65724c697374a0009701000affffffff00b200c709000000000000000030002f006500400066a10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a00000000000000002c000900030647656e6576610300030d0003280038005f09a5202020a5202020a501000affffffff00b200c790000400000000000d002000000000000d002000310062003e0082000170000000700000000000000000000000000000007000000070000000000000000000000000000000700000007000000000000000a0009730002f000200400003a10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a0000000000000000280038fffc09a5202020a5202020a501000affffffff00b200c790000400000000000d002000000000000d00200031ffff003e001f000170000000700000000000000000000000000000007000000070000000000000000000000000000000700000007000000000000000a00097a0008d09ffffffffffffffff30000e0002002a0066a10096000c02000000020000000000000001000a00160016002100510300140d000928001e00170f72756c65724c6973744c656e677468a0009701000affffffff00b200c722001c0002090022001c005c0900300044000200600066a10096000c02000000020000000000000001000a004c0016005700512a360f7374796c654c6973744c656e677468a0009701000affffffff00b200c722005200020900220052005c090030005f0002007b0066a10096000c02000000020000000000000001000a00670016007200512b071b0c7468655374796c654c697374a0009701000affffffff00b200c7090000000000000000300065006500760066a10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a00000000000000000300030d000328006e005f09a5202020a5202020a501000affffffff00b200c790000400000000000d002000000000000d00200067006200740082000170000000700000000000000000000000000000007000000070000000000000000000000000000000700000007000000000000000a00097300065000200760003a10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a000000000000000028006efffc09a5202020a5202020a501000affffffff00b200c790000400000000000d002000000000000d00200067ffff0074001f000170000000700000000000000000000000000000007000000070000000000000000000000000000000700000007000000000000000a0009709ffffffffffffffff300095000200b10066a10096000c02000000020000000000000001000a009d001600a800510300140d00092b2737097468655374796c6573a0009701000affffffff00b200c709000000000000000030009b006500ac0066a10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a00000000000000000300030d00032800a4005f09a5202020a5202020a501000affffffff00b200c790000400000000000d002000000000000d0020009d006200aa0082000170000000700000000000000000000000000000007000000070000000000000000000000000000000700000007000000000000000a0009730009b000200ac0003a10096000c0200005a0200005a00000000a1009a0008ffff00000006000001000a00000000000000002800a4fffc09a5202020a5202020a501000affffffff00b200c790000400000000000d002000000000000d0020009dffff00aa001f000170000000700000000000000000000000000000007000000070000000000000000000000000000000700000007000000000000000a0009709ffffffffffffffff30007a000200960066a10096000c02000000020000000000000001000a00820016008d00510300140d000928008a00170e6e756d6265724f665374796c6573a0009701000affffffff00b200c722008800020900220088005c0900a10096000c01000000020000000000000001000a00160070002100ab28001e0071076c6f6e67696e74a00097a10096000c01000000020000000000000001000a00310070003c00ab2a1b106172726179206f6620746552756c6572a00097a10096000c01000000020000000000000001000a004c0070005700ab2a1b076c6f6e67696e74a00097a10096000c01000000020000000000000001000a00670070007200ab2a1b106172726179206f662074655374796c65a00097a10096000c01000000020000000000000001000a00820070008d00ab2a1b076c6f6e67696e74a00097a10096000c01000000020000000000000001000a009d007000a800c62a1b146172726179206f662074655374796c656c746572a00097a10096000c01000000020000000000000001000a00020070000d00b428000a007107696e7465676572a00097a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 11-1:  The }{\f6\fs20 TEFormat}{\f4  Record Returned by }{\f6\fs20 TEGetText}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par It will take a little pointer math, but you can scan through the record, adding up the lengths.  The lengths of the first two fields are given directly; the last (}{\f6\fs20 numberOfStyles}{\f4 ) is the number of 8 byte array elements in the }{\f6\fs20 theStyles}{\f4  array.  Of course, you need to add an extra 14 to the length to account for the lengths themselves and the version number at the start of the record.\par The part of the program that reads a file from disk can start by loading the entire file and figuring out where the text and style information start.  With these values in hand, call }{\f6\fs20 TESetText}{\f4 .\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TESetText}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 void TESetText(Word textDescriptor, Ref textRef, Long textLength,\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    Word styleDescriptor, Ref styleRef, Handle teH);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f6\fs20 textDescriptor}{\f4 \tab Pass 5, telling }{\f6\fs20 TESetText}{\f4  that }{\f6\fs20 textRef}{\f4  is a pointer to a text buffer, and that }{\f6\fs20 textLength}{\f4  contains the length of the text.\par \par }{\f6\fs20 textRef}{\f4 \tab Pass a pointer to the first byte of the text.  You\rquote ll need to use a type cast, since the type of the parameter is }{\f6\fs20 Ref}{\f4 .\par \par }{\f6\fs20 textLength}{\f4 \tab Pass the length of the text here.\par \par }{\f6\fs20 styleDescriptor}{\f4 \tab Pass 0, telling }{\f6\fs20 TESetText}{\f4  that }{\f6\fs20 styleRef}{\f4  is a pointer.  Once again, you\rquote ll need a type cast.\par \par }{\f6\fs20 teH}{\f4 \tab Pass }{\f6\fs20 NULL}{\f4 , telling }{\f6\fs20 TESetText}{\f4  to write to the active TextEdit control.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par I\rquote ve only told you enough to use these calls one way.  There are lots of other formats you can use.  As with any new call, it would be a good idea to look these up in the toolbox reference manual or Appendix A and read the complete description.\par \par Problem 11-4:  Add file input and output to the editor from Problem 11-3.  Use a file type of 0x06 and auxiliary file type of 0x0000, which is a general binary file.\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1073{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \tab }{\b\f4 Hint}{\f4 \tab The subroutine we developed in Lesson 6 for writing a file using GS/OS calls was designed to write the file in one block.  You could do it that way, but since TextEdit gives you the file in two pieces, and you have to add some length words, it will be tough.  A better way to handle writing the file would be to do several writes.  That\rquote s something we talked about in Lesson 6, but didn\rquote t actually do.\~\~}{{\pict{\*\picprop\shplid1074{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Printing}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Printing\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printing}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 TextEdit has a fairly simple call that lets you print the document.  It\rquote s called }{\f6\fs20 TEPaintText}{\f4 .\par \par }\pard \li360\keepn\widctlpar\adjustright {\pard\plain \li360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TEPaintText}}}{\v\f6\fs20 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 LongWord TEPaintText(GrafPortPtr thePort, Long startingLine, Rect *destRect,\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    Word flags, Handle teH);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 thePort}{\f4 \tab This is the }{\f6\fs20 GrafPort}{\f4  where the text will be drawn.  }{\f6\fs20 TEPaintText}{\f4  can actually draw to any }{\f6\fs20 GrafPort}{\f4 .  When you are printing, this parameter should be the }{\f6\fs20 GrafPort}{\f4  the Print Manager sets up.\par \par }{\f6\fs20 startingLine}{\f4 \tab This is the line number for the first line to print.  It should be zero for the first call.  }{\f6\fs20 TEPaintText}{\f4  is a function; it returns the line number for the next line to print, so you need to keep track of that value and pass it on the second and all future calls.  }{\f6\fs20 TEPaintText}{\f4  will return -1 when there are no more lines to print.\par \par }{\f6\fs20 destRect}{\f4 \tab This is the size of one page.  I actually covered the information you need to find the page size way back in Lesson 7, but that was a long time ago.  To review, you need to look in the }{\f6\fs20 PrInfoRec}{\f4  structure, which is imbedded in the print record.  Inside that record is a }{\f6\fs20 Rect}{\f4  data structure called }{\f6\fs20 rPage}{\f4 ; }{\f6\fs20 rPage}{\f4  is a rectangle that\rquote s the same size as the page.  You might want to look at the data structures listed in Appendix A or flip back to Listing 7-2 for a detailed look at the }{\f6\fs20 PrInfoRec}{\f4  record.\par \par }{\f6\fs20 flags}{\f4 \tab You can ask }{\f6\fs20 TEPaintText}{\f4  to just calculate the lines that would be printed, without actually printing them.  The big use for this feature is to skip pages.  To calculate the proper number of lines without printing, set bit 14.  For normal printing, pass a 0.  All bits except bit 14 must be 0.\par \par }{\f6\fs20 teH}{\f4 \tab This is the handle for the TextEdit control to print.  This should be the actual handle; we\rquote ll look at how to find it in the next section.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par We\rquote ll add printing to the text editor in Problem 11-5.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Did the Document Change?}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Did the Document Change?\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last step to finish up the basic editor is to see if the document has changed.  The reason we need to know is so we can warn the user if they attempt to close a document that has been changed since the last time it was saved.  You\rquote ve done this before, back in Lesson 9.  In fact, if you\rquote ve been snatching code from that lesson, you may have already added most of what you need.\par If the file has changed, you need to bring up an alert that warns the user and asks if he wants to save the file.  The alert should have three buttons: Yes (the default), No, and Cancel (which stops the close operation).  You can create the alert itself with }{\f6\fs20 AlertWindow}{\f4 , which you\rquote ve been using for a long time.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlHandleFromID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The problem is when to display the alert.  After all, TextEdit is doing so much of the work for you that it\rquote s hard to tell if the user even typed anything!  To find out, you need to delve into the TextEdit record itself to grab a flag called }{\f6\fs20 fRecordDirty}{\f4 .  This flag is bit 6 of the }{\f6\fs20 ctrlFlag}{\f4  byte, which is located 16 bytes into the text edit record.  The text edit record is the thing we\rquote ve been ignoring up until now, passing }{\f6\fs20 NULL}{\f4  whenever we were supposed to pass a record handle.  All you need to get the handle is the control ID number and the window pointer; after that, you call }{\f6\fs20 GetCtlHandleFromID}{\f4 , passing the window pointer and the control ID.  }{\f6\fs20 GetCtlHandleFromID}{\f4  returns the control handle.\par Putting all of that together, here\rquote s a subroutine that checks to see if a text edit record has changed.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * TextEditChange\par *\par * Check to see if the text or style information has changed\par *\par * Parameters:\par *    id - control ID for the record to check\par *    wPtr - window containing the record\par *\par * Returns: TRUE if the record changed, FALSE if not or error\par *\par ***************************************************************/\par \par BOOLEAN TextEditChange (unsigned id, GrafPortPtr wPtr)\par \par \{\par BOOLEAN changed;                        /* are there any changes? */\par CtlRecHndl ctlHandle;                   /* control handle */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 unsigned char *ptr;                     /* work pointer */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 ctlHandle = GetCtlHandleFromID(wPtr, id);\par changed = FALSE;\par if (toolerror() == 0) \{\par    HLock((Handle) ctlHandle);\par    ptr = (unsigned char *) (((unsigned long) (*ctlHandle)) + 16);\par    changed = ((*ptr) & 0x40) != 0;\par    HUnlock((Handle) ctlHandle);\par    \}\par return changed;\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 11-6:  Subroutine to See if Text Has Changed\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 11-5:  Add printing and checks for changes to your program.  Before quitting, make sure all windows are closed.  Before closing a document, check to see if the text has changed.  If so, bring up a dialog like the one discussed in this section.\par If the user picks Cancel, your program should not close the window.  If you are in the process of quitting, you should stop the process.\par If the user picks No, go ahead and close the window.\par If the user picks Yes, save the document and then close the window.\par One last detail:  your save subroutine needs to clear the }{\f6\fs20 fRecordDirty}{\f4  bit, just in case the user saves the document, but leaves it open.  TextEdit has no idea when (or if) you save the document, so it depends on you to clear the }{\f6\fs20 fRecordDirty}{\f4  bit after you\rquote ve done a save.  You can do that with a subroutine based on the one in Listing 11-6.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson introduced TextEdit, a very handy tool for displaying and editing text.  The problems in the lesson ended with a simple text editor.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx3600\tx6480\adjustright {\f6\fs20 GetCtlHandleFromID\tab TEGetRuler\tab TEGetSelectionStyle\par TEGetText\tab TEPaintText\tab TESetRuler\par }\pard \qj\li720\widctlpar\tx3600\tx6480\adjustright {\f6\fs20 TESetText\tab TEStyleChange\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rControlTemplate\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk63}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text edit}{\rxe bk63}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 12 \endash  Scraps}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 {\*\bkmkstart bk65}Lesson 12 \endash  Scraps}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 12 \endash  Scraps\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson introduces the Scrap Manager.  The Scrap Manager is the tool that is used for cutting, copying and pasting.  When you use the Scrap Manager for these operations, you can create programs that can cut, copy and paste information to and from other applications.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Scrap Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Scrap Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The obvious difference between programs written for the Apple II}{\f4\fs20 GS}{\f4  or Macintosh and programs written for MS DOS computers is the desktop interface.  Another difference that, in many ways, is just as important but a lot less obvious is that programs on the Apple II}{\f4\fs20 GS}{\f4  and Macintosh have a remarkable ability to share data.  You can bring up a spread sheet, do some pretty heavy duty calculations, then move some of the cells to a word processor to create a table for a report.  Pictures move just as easily as text.  The Scrap Manager makes all of this possible with amazingly little effort.\par There are two problems that the Scrap Manager has to handle to make cutting and pasting between applications work smoothly.  The first is where the information is stored.  After all, on the Apple II}{\f4\fs20 GS}{\f4  at least, you have to shut down one application and start another to move information from a spread sheet to a text editor.  The second problem the Scrap Manager has to deal with is the format for the information.  The information in a spread sheet is obviously very different from the information in a word processor, and the Scrap Manager has to handle this some way.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Scraps}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Scraps\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PutScrap}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Scraps are the chunks of information you cut and paste.  The Scrap Manager keeps track of scraps for you, saving the information your program passes when it cuts or copies, and passing the information back when it pastes.  When the program cuts or copies information, it calls }{\f6\fs20 PutScrap}{\f4  to tell the Scrap Manager to save the information.\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 PutScrap(numBytes, scrapType, srcPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first parameter is the number of bytes you want the Scrap Manager to remember.  This parameter is a long integer, so you don\rquote t have to worry about 64K limits.  The next parameter is the scrap type, which tells the Scrap Manager what kind of information it is remembering.  We\rquote ll talk a little more about the scrap type in a moment.  The last parameter is a pointer to the information the Scrap Manager should remember.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Scrap Manager makes a copy of the information, so you can safely change the original information right after the call.  For example, if you are cutting a word out of a text buffer, you can pass a pointer to the start of the word in }{\f6\fs20 srcPtr}{\f4 , then remove the word right away.  Since }{\f6\fs20 PutScrap}{\f4  made its own copy, you don\rquote t have to preserve the buffer.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetScrapSize}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When your program needs to get the information that\rquote s in the scrap to paste it into the document, you start with a call to }{\f6\fs20 GetScrapSize}{\f4  to find out how big the scrap is.  Of course, if the size of the scrap is zero, there\rquote s nothing to paste.\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 size = GetScrapSize(scrapType);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Once you know how big the scrap is, you can ask for the handle.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetScrapHandle}}}{\v\f4 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 scrapHandle = GetScrapHandle(scrapType);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 You can lock the handle and copy the information out, just like you would with any other handle.  Be sure to unlock the handle when you are through.  Don\rquote t delete the handle when you\rquote re though, though: this is the Scrap Manager\rquote s copy, so all you should do is copy the information into your document.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Scrap Types}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Scrap Types\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 {\*\bkmkstart bk64}One of the problems I said the Scrap Manager had to solve was the problem of what format to use for all of the information.  In a sense, the Scrap Manager solves this problem by ignoring it.  Instead of worrying about the format any particular program wants to use, the Scrap Manager lets you specify any one of 65536 different scrap types!  Well, that\rquote s obviously enough to handle more than just a couple of formats, but it presents a problem for your program.  You simply can\rquote t handle that many kinds of input data.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 private scraps}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 public scraps}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scraps\:private}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scraps\:public}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The whole issue is resolved by having two different kinds of scrap, private scraps and public scraps.  A private scrap is yours and yours alone.  You pick out a number for the scrap type, and you decide what format to use for the information.  If you are writing a dungeon style game, your data format might include pictures for animating the figure, hit points, and so forth.  For a spread sheet, you might include the formula used to compute the value in a cell.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text scraps}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scraps\:text}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 picture scraps}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scraps\:picture}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The other kind of scrap is the public scrap.  There are two kinds of public scrap.  Text scraps have a scrap type of 0.  Text scraps are just ASCII character sequences.  To find the length, you need to look in the length of the scrap.  Scrap type 1 is set aside for picture scraps.  Pictures are a kind of recorded drawing that you can create or draw using QuickDraw II.\par Let\rquote s imagine a sophisticated word processor to see how these scrap types work together in a real program.  Let\rquote s say you are using the word processor, and select a chapter from a book like this one, then copy it.  The text editor will actually create two different scraps, one text scrap and one more complicated scrap that includes font information, the position and contents of pictures, tab settings, and so forth.\par Now let\rquote s imagine pasting this scrap into two different programs, the original word processor and a paint program.  When you paste the scrap into the word processor, it looks for its private scrap type \endash  and finds it.  The text editor uses the private scrap type, using all of the font, tab, and picture information it saved in the private scrap.\par Now imagine pasting the same scrap in a paint program.  The paint program doesn\rquote t have any idea what to do with the word processor\rquote s private scrap.  In fact, it doesn\rquote t even look for it.  Instead, the paint program probably looks for its own private scrap type, which might contain things like the color palette to use with a picture.  It doesn\rquote t find it, so its next step is to look at one of the public scraps.  This is the key point that makes the Scrap Manager work: the paint program, like every other program, should be able to read and use either one of the public scrap types.  Naturally, it will look for the picture scrap first.  Since the text editor didn\rquote t create a picture scrap, it will then grab the text scrap and draw the text in the picture window.\par Now, it\rquote s pretty obvious that the text won\rquote t look quite the way it did in the text editor.  Any pictures are lost.  Tabs, fonts, and other formatting information is also lost.  But the text itself does get passed.  A spread sheet would also create a text scrap, and the cell contents could be pasted into the word processor or onto a graph in the paint program.  In short, because every program must create at least one of the public scrap types, and every other program is responsible for being able to use either one of them, you can always move information from one program to another.\par In practice, there are problems.  Almost any program can read and use text, but not all programs can handle a picture.  Our small text editor can\rquote t, for example.  In that case, the program treats the scrap as if it were empty.  It\rquote s not perfect, but it works in the vast majority of cases.  Most people wouldn\rquote t expect to be able to paste a picture into a text only editor, anyway, so they won\rquote t even be surprised when it doesn\rquote t work.\par {\*\bkmkend bk64}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scrap types}{\rxe bk64}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Multiple Scraps}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Multiple Scraps\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PutScrap}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Creating more than one scrap type is really pretty easy.  Just call }{\f6\fs20 PutScrap}{\f4  one time for each scrap type, passing the proper scrap type as a parameter each time.  The Scrap Manager handles all of the details.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetScrapSize}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Using multiple scraps is almost as easy.  When you call }{\f6\fs20 GetScrapSize}{\f4 , check first for your private scrap type.  If the Scrap Manager returns an error or a scrap length of zero, check for the public scrap type that is easiest to handle.  A text editor would check for a text scrap, for example.  If you still come up blank, check the other public scrap type.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ZeroScrap}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It\rquote s actually possible to accumulate information in a scrap.  For example, if you call }{\f6\fs20 PutScrap}{\f4  ten times in a row with the same information, then paste the result, you\rquote ll get ten copies of the information.  That can be useful in situations where you have to preprocess the information, and may not have enough memory to create the entire scrap in one chunk.  Most of the time, though, it\rquote s something you want to avoid, and you avoid it by calling }{\f6\fs20 ZeroScrap}{\f4  just before you start copying information into the scrap with the }{\f6\fs20 PutScrap}{\f4  calls.  }{\f6\fs20 ZeroScrap}{\f4  doesn\rquote t have any parameters, and doesn\rquote t return anything.  It just deletes the current scrap, so the Scrap Manager creates a new scrap with the next series of }{\f6\fs20 PutScrap}{\f4  calls.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Scrap File}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Scrap File\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scrap file}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 UnloadScrap}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The second problem the Scrap Manager has to solve is where to put the scrap.  For the short term, the answer is pretty obvious: the scrap is kept in memory.  This doesn\rquote t work well when you switch between programs, though, since the Scrap Manager, like all of the tools, is shut down in the process of leaving your program.  To handle this situation, the Scrap Manager lets you save the scrap to disk by calling }{\f6\fs20 UnloadScrap}{\f4 .  }{\f6\fs20 UnloadScrap}{\f4  doesn\rquote t have any parameters.  It just tells the Scrap Manager to save the scrap.\par You can actually tell the Scrap Manager where to save the scrap, but that\rquote s rarely a good idea.  After all, the idea is for another program to be able to find your scrap.  Unless you\rquote re trying to hide the scrap, you want the Scrap Manager to be able to find it in its normal place.  That\rquote s in the system folder; you need to know that so you are aware that your program may ask for the system disk.  Beyond that, the location, type, and all other information about the scrap file is really not your concern.  You can look it up if you want, but I wouldn\rquote t bother.  (And didn\rquote t.)\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LoadScrap}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When your program starts, you need to make a call to }{\f6\fs20 LoadScrap}{\f4 .  That tells the Scrap Manager to look for the scrap file on disk, loading it into memory where it can be used by }{\f6\fs20 GetScrapSize}{\f4  and }{\f6\fs20 GetScrapHandle}{\f4 .  Like }{\f6\fs20 UnloadScrap}{\f4 , }{\f6\fs20 LoadScrap}{\f4  doesn\rquote t have any parameters.\par \par Problem 12-1:  Add scrap file handling to the text editor you created in Problem 11-5.  All you really have to add are the calls to }{\f6\fs20 LoadScrap}{\f4  and }{\f6\fs20 UnloadScrap}{\f4 .  }{\f6\fs20 LoadScrap}{\f4  should be called right as your program starts, and }{\f6\fs20 UnloadScrap}{\f4  just before you shut down the tools.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 A Scrapbook Program}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 A Scrapbook Program\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scrapbook}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 We\rquote ll put a lot of this information to use by creating a scrapbook program.  There are two tool calls I\rquote d like to describe which are needed for this program but don\rquote t really fit in with the lesson as a whole, and some program design issues I\rquote d like to talk about, too.  So, rather than jump right into the problem, I\rquote d like to discuss those other issues first.\par A scrapbook is a program that lets you collect a lot of scraps in a single, convenient location.  Our program, like most scrapbooks, will be pretty simple.  It will handle multiple scraps, displaying the first one in a window when the program starts.  It will call }{\f6\fs20 LoadScrap}{\f4  when it starts, and when you select Paste, it will create a new scrap entry and put the pasted scrap in the new spot.  Cutting will remove a scrap from the scrapbook, placing it in the scrap.  Copying will also place a scrap in the clipboard, but in this case the scrap won\rquote t be removed from the scrapbook.  Finally, Clear will remove a scrap from the scrapbook without calling the Scrap Manager to put it in the clipboard.\par Scrapbooks generally only display one scrap at a time, and ours is no exception.  For now, we\rquote ll use a menu called Move with two items, Next Scrap and Last Scrap, to move through the scraps in the scrapbook.\par The scrap itself will be displayed in the scrap window, displaying it as a picture if possible, and as a text scrap if there is no picture.  If a scrap is loaded which doesn\rquote t have a text or picture scrap type, the scrapbook should post an appropriate message.\par Figure 12-1 summarizes the program, showing the menus and the scrap window from the solution to Problem 12-2.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1075{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw649\pich410\picwgoal12980\pichgoal8200\macpict\bliptag1368647891\blipupi72{\*\blipuid 5193e8d3b1ad92a7ca395bc72e2c0264}19de00000000019a02891101a00082a0008e01000a000000000240030898005200000000007e029000000000007e028900000000007e0289000102af0002af0007003fb2ff01fe0007003fb2ff01fe0007003fb2ff01fe0007003fb2ff01fe0007003fb2ff01fe000f003ef200001ffcff00f8c800011e000f003ef200001ffcff00f8c800011e0013043e000001c0f600001ffcff00f8c800011e0013043e000001c0f600001ffcff00f8c800011e001d123e00000780003e30e0000001f03180001ff7dffeff00f8c800011e001d123e00000780003e30e0000001f03180001ff7dffeff00f8c800011e001d123e0001f9f000300060000001803006001ff39ffeff00f8c800011e001d123e0001f9f000300060000001803006001ff39ffeff00f8c800011e001d163e0007ffe000307060f0000181f38f801ff11c39ce1ff8c800011e001d163e0007ffe000307060f0000181f38f801ff11c39ce1ff8c800011e001d163e0007ffc0003c3061980001e33186001ff01999cccff8c800011e001d163e0007ffc0003c3061980001e33186001ff01999cccff8c800011e001d163e0007fff800303061f80001833186001ff2999c9c0ff8c800011e001d163e0007fff800303061f80001833186001ff2999c9c0ff8c800011e001d163e0003fff000303061800001833186c01ff3999c9cfff8c800011e001d163e0003fff000303061800001833186c01ff3999c9cfff8c800011e001d163e0001f7c0003078f0f00001f1f3c3801ff39c3e3e1ff8c800011e001d163e0001f7c0003078f0f00001f1f3c3801ff39c3e3e1ff8c800011e000f003ef200001ffcff00f8c800011e000f003ef200001ffcff00f8c800011e000f003ef200001ffcff00f8c800011e000f003ef200001ffcff00f8c800011e0007003fb2ff01fe0007003fb2ff01fe00100038f2200038f6000101a0cf20012e00100038f2000038f600010180cf00010e0010003af2020038f600010182cf02010e00100038f2000038f600010180cf00010e00160038f22002380008fd0000a0fd000101a0cf20012e00160038f20002380008fd0000a0fd00010180cf00010e0017003af202073800100000040110fd000101facf02010e00170038f200073800100000040110fd000101f8cf00010e00180038f2200d3800080a8a0a0080a0a0a2a001f8cf20012e00180038f2000d3800080a8a0a0080a0a0a2a001f8cf00010e0018003af2020d38001011100400511141111001facf02010e00180038f2000d38001011100400511141111001f8cf00010e00180038f2200d380008088a0800088082222001f8cf20012e00180038f2000d380008088a0800088082222001f8cf00010e0018003af2020d38001011010501111101111001facf02010e00180038f2000d38001011010501111101111001f8cf00010e00180038f2200d38000a8a8a0200a0a080a2a001f8cf20012e00180038f2000d38000a8a8a0200a0a080a2a001f8cf00010e0012003af2020038f80003010001facf02010e00120038f2000038f80003010001f8cf00010e00100038f2200038f6000101f8cf20012e00100038f2000038f6000101f8cf00010e0010003af2020038f6000101facf02010e00100038f2000038f6000101f8cf00010e000f0038f220003ff5ff00f8cf20012e000f0038f200003ff5ff00f8cf00010e000f003af202003ff5ff00facf02010e000f0038f200003ff5ff00f8cf00010e00160038f220033fffee7ffeff000ffcff00f8cf20012e00160038f200033fffee7ffeff000ffcff00f8cf00010e0016003af202073fffe67ffff3fe67fcff00facf02010e00160038f200073fffe67ffff3fe67fcff00f8cf00010e00180038f2200d3fffe270e660fe7f0e4e0c1ffff8cf20012e00180038f2000d3fffe270e660fe7f0e4e0c1ffff8cf00010e0018003af2020d3fffe06670f3ff0e663ccccffffacf02010e00180038f2000d3fffe06670f3ff0e663ccccffff8cf00010e00180038f2200d3fffe46079f3ffe67e7ccccffff8cf20012e00180038f2000d3fffe46079f3ffe67e7ccccffff8cf00010e0018003af2020d3fffe667f0f27e66667ccccffffacf02010e00180038f2000d3fffe667f0f27e66667ccccffff8cf00010e00180038f2200d3fffe770e678ff0f0e7e0c1e7ff8cf20012e00180038f2000d3fffe770e678ff0f0e7e0c1e7ff8cf00010e0012003af202003ff8ff03fcfebffacf02010e00120038f200003ff8ff03fcfebff8cf00010e00110038f220003ff7ff02fedff8cf20012e00110038f200003ff7ff02fedff8cf00010e0011003af202003ff7ff02feeffacf02010e00110038f200003ff7ff02feeff8cf00010e00110038f220003ff7ff02fef7f8cf20012e00110038f200003ff7ff02fef7f8cf00010e000f003af102f7ff02fefbfacf02010e000f0038f100f7ff02fefbf8cf00010e000b0038e62000fcce20012e000b0038e60000fcce00010e000b003ae60200fece02010e000b0038e60000fece00010e000b0038e62000f8ce20012e000b0038e60000d8ce00010e000b003ae602000ece02010e000b0038e600000cce00010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e000f0038f320003fd0ff00fcf320012e000f0038f300001fd0ff00fcf300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e0024003af3020319f9fffcf3ff02f801e0fe000807c00006001801e00ff0ff00e6f302010e00240038f3000319f9fffcf3ff02f801e0fe000807c00006001801e00ff0ff00e4f300010e00220038f320033801800cf200010330fe00070660000600780260ef000004f320012e00220038f300031801800cf200010330fe00070660000600780260ef000004f300010e0024003af3020319f9800cf3ff0ef80301e363e7c663c3c6601806600ff0ff00e6f302010e00240038f3000319f9800cf3ff0ef80301e363e7c663c3c6601806600ff0ff00e4f300010e00220038f320033801800cf2000c01e333866667c66666c0180660ef000004f320012e00220038f300031801800cf2000c01e333866667c66666c0180660ef000004f300010e0023003af3020319f9800cf3ff04f800330306fd660567801806600ff0ff00e6f302010e00230038f3000319f9800cf3ff04f800330306fd660567801806600ff0ff00e4f300010e00200038f320033801800cf2000303333306fc6603c0180640ef000004f320012e00200038f300031801800cf2000303333306fc6603c0180640ef000004f300010e0024003af3020319f9fffcf3ff0ef801e1e303e7c7c3c3c6607e67800ff0ff00e6f302010e00240038f3000319f9fffcf3ff0ef801e1e303e7c7c3c3c6607e67800ff0ff00e4f300010e00130038f3200038eb000006e7000004f320012e00130038f3000018eb000006e7000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f320003fd0ff00fcf320012e000f0038f300001fd0ff00fcf300010e000f003af3020018d0000006f302010e00980052007e000000fc0290007e000000fc0289007e000000fc028900010f0038f3000018d0000004f300010e00150038f320063800fcc0600018d6000004f320012e00150038f300061800fcc0600018d6000004f300010e0019003af30203180030c0fb000360000060dd000006f302010e00190038f30003180030c0fb000360000060dd000004f300010e001c0038f3200d380030f8e1e0387807c0f87878f8dd000004f320012e001c0038f3000d180030f8e1e0387807c0f87878f8dd000004f300010e001c003af3020d180030cc630018c00cc060ccc060dd000006f302010e001c0038f3000d180030cc630018c00cc060ccc060dd000004f300010e001c0038f3200d380030cc61e018780cc060fc7860dd000004f320012e001c0038f3000d180030cc61e018780cc060fc7860dd000004f300010e001c003af3020d180030cc6030180c0cc06cc00c6cdd000006f302010e001c0038f3000d180030cc6030180c0cc06cc00c6cdd000004f300010e001d0038f3200e380030ccf1e03c7807c038787838c0de000004f320012e001d0038f3000e180030ccf1e03c7807c038787838c0de000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e0098005200fc0000017a029000fc0000017a028900fc0000017a028900010f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af3020018d0000006f302010e000f0038f3000018d0000004f300010e000f0038f3200038d0000004f320012e000f0038f3000018d0000004f300010e000f003af302001fd0ff00fef302010e000f0038f300001fd0ff00fcf300010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00980052017a0000019a0290017a0000019a0289017a0000019a02890001070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003ab202010e00070038b200010e00070038b220012e00070038b200010e0007003fb2ff01fe0007003fb2ff01fe0007003fb2ff01fe0002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 12-1:  The Scrapbook Program\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are three internal design issues you will have to deal with before you can write this program.  The first is the matter of how to store the scraps in the scrap file.  The solution disk has a scrap file for you to use, so you should use the same file format the solution uses.  The file consists of a series of scraps.  Each scrap starts with a count word; this simply tells you how many scrap types exist for a particular scrap.  If there are no more scraps, the count word is zero.  The count word is followed by the scrap records, one for each scrap type.  Each scrap record consists of three fields.  The first is a two-byte scrap type.  The next field is a four-byte scrap length.  The last field is variable length; it\rquote s the scrap contents.  It\rquote s worth pointing out that we really don\rquote t care what the scrap contents are; all we need to know is the length.  To skip to the next scrap, then, you would add the scrap length plus six to the location of the first scrap.  The type for the file is 0x06, a general binary file, so you can use standard C file I/O.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetIndScrap}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The next issue that you need to deal with is how to figure out what the scrap types are, so you can paste all of them in the scrapbook.  After all, it would be a shame to miss the preferred scrap type for a program, but it just wouldn\rquote t make much sense to find the scrap length for each and every possible scrap type.  The }{\f6\fs20 GetIndScrap}{\f4  call is used by scrapbooks to find and read all of the scrap types for a scrap.  The scrap information is copied into a structure.  The structure and the call look like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct scrapInfo \{\par    Word scrapType;\par    LongWord scrapSize;\par    Handle scrapHandle;\par    \};\par typedef struct scrapInfo scrapInfo, *scrapInfoPtr, **scrapInfoHndl;\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetIndScrap}}}{\v\f4 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 void GetIndScrap(Word index, Ptr buffer);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par To get all of the scraps, start calling }{\f6\fs20 GetIndScrap}{\f4  with an index of 1.  It will fill in the scrap buffer you pass with the scrap type, scrap size, and scrap handle for the first scrap.  Repeat this with an index of 2, and so forth, until }{\f6\fs20 GetIndScrap}{\f4  returns an error.  At that point, you\rquote ve read all of the scrap types.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawPicture}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last design issue is how to display the scrap.  You already know how to draw text strings, so displaying a text scrap is no problem.  What about picture scraps, though?  The answer is, fortunately, very simple.  QuickDraw II Auxiliary has a call called }{\f6\fs20 DrawPicture}{\f4 .  To draw a picture scrap, you just pass the handle to }{\f6\fs20 DrawPicture}{\f4 , along with the destination rectangle.\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 void DrawPicture(Handle picHandle, Rect *destRect);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There is still one overriding problem with this program, and that is that using it is pretty awkward.  To put a scrap in the scrapbook, you have to cut or copy it from a program, quit, run the scrapbook, and paste it into the scrapbook.  To paste a scrap from the scrapbook into a document, you have to quit the original program, run the scrapbook, copy the scrap, rerun the program, and paste the scrap.  To be technical, ick.\par The solution is to turn the scrapbook into a desk accessory, so it can be used by almost any desktop program without leaving the program.  While there won\rquote t actually be a problem assigned to convert this program into an NDA, you\rquote ll eventually learn all of the things you need to know to make the conversion.\par \par Problem 12-2:  Write the scrapbook program.  To be useful, this program would eventually be turned into a desk accessory, so it can\rquote t depend on any custom menu items, and must have a single window.  That makes the detailed requirements look a little strange for an application!\par Your program should have a single, fixed size window that stays open all of the time.  The window should be moveable, though.  The program should support Cut, Copy, Paste, Clear and Close, all of which are standard menus.  (Close should do what Quit normally does; for now, you can hook the two menu items together, so both quit.)  The program should look for a scrap file when it starts, loading it if there is one, and automatically write the scrap file before quitting.  Use the name \ldblquote ScrapBook\rdblquote  for the file; you\rquote ll find one in the Lesson 12 folder on your disks.  The single new menu, Move, should have two items, Next Scrap and Last Scrap.\par Internally, I\rquote d suggest setting up the scraps as a doubly linked list of structures, one structure for each scrap.  That makes it easier to insert and delete scraps.  Inside each structure, you\rquote ll need another linked list; this one lists the various scrap styles for a particular scrap.  The scraps themselves should be in moveable handles.\par I\rquote d suggest starting with the solution to Problem 9-1, which also uses a single window.\par Test your program by moving a scrap from your text editor to the scrapbook, then by moving a different scrap back to a text editor document.  You might try some of your other desktop applications, too.  Some of them will support the Scrap Manager, while some will not.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson covered the Scrap Manager, and how it is used to create programs that can cut, copy and paste information.  It showed how programs share information, too.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 DrawPicture\tab GetIndScrap\tab GetScrapHandle\tab GetScrapSize\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 LoadScrap\tab PutScrap\tab UnloadScrap\tab ZeroScrap\par }\pard \qj\widctlpar\adjustright {\*\bkmkend bk65}{\pard\plain \qj\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scraps}{\rxe bk65}}}{\v\f4 \par }{\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 13 - Controls, Part 1}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 {\*\bkmkstart bk80}{\*\bkmkstart bk81}Lesson 13 \endash  Controls, Part 1}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 13 \endash  Controls, Part 1\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In this lesson, you will learn to create windows with your own controls.  We\rquote ll cover a few basic controls, concentrating on how the program interacts with the Control Manager and Window Manager to create and use controls.  More advanced controls will be covered in Lesson 14.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 A Quick History Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 A Quick History Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Before getting started, I\rquote d like to caution you a little bit about the Control Manager and how it has grown over the years.  I hope you are reading }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference }{\f4 as you go through the course.  If so, it would be pretty natural to flip open volume 1 and read the introductory section of the chapter on the Control Manager.  If you do that, you\rquote re going to find something that doesn\rquote t look much like what this lesson covers.\par The Control Manager has changed a lot over the years.  One of the major changes is the use of resources, with a clean, unified mechanism for defining controls, coupled with a mechanism for attaching them to a particular window from inside the resource fork.  None of this was possible when the original two volumes of the toolbox reference manual were released.  Back then, all controls were created by setting up a record and making a Control Manager call.  In the next two lessons, we\rquote ll use the newer, resource based method exclusively.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Control Records and Control Lists}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Control Records and Control Lists\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Actually, you\rquote ve already created a control, and it\rquote s the most complicated control of all.  The text editor you wrote in Lesson 11 used a text edit control.  The resource you filled in to create the text edit record is actually a special case of a much more complicated resource.  The complete }{\f6\fs20 rControlTemplate}{\f4  resource, which includes the text edit control as a subset, is shown in Listing 13-1.  This is the raw definition from the Types.rez header file used by the resource compiler.  Seen all in one chunk, it can be very intimidating, but we\rquote ll break it down in bite size pieces over the next two lessons.  I\rquote m showing you the resource here so you have something to refer back to.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 type rControlTemplate \{\par         integer = 3+$$optionalcount (Fields);/* pCount must be at least 6 */\par         _mybase_ longint;                   /* Application defined ID */\par         Rect;                              /* controls bounding rectangle */\par         switch \{\par \par         case SimpleButtonControl:\par             key longint = 0x80000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* Title Ref */\par                 _mybase_ longint;           /* color table ref */\par                 KeyEquiv;\par             \};\par \par         case CheckControl:\par             key longint = 0x82000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* Title Ref */\par                 integer;                    /* initial value */\par                 _mybase_ longint;           /* color table ref */\par                 KeyEquiv;\par             \};\par \par         case RadioControl:\par                 key longint = 0x84000000;   /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* Title Ref */\par                 integer;                    /* initial value */\par                 _mybase_ longint;           /* color table ref */\par                 KeyEquiv;\par             \};\par         case scrollControl:\par             key longint = 0x86000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 integer;                    /* Max Size */\par                 integer;                    /* viewSize */\par                 integer;                    /* initial value */\par                 _mybase_ longint;           /* color table ref */\par             \};\par \par         case statTextControl:\par             key longint = 0x81000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* Text Ref */\par                 integer;                    /* text size */\par                 integer leftJust,\par                         centerJust,\par                         fullJust,\par                         rightJust = -1;     /* text justification */\par             \};\par \par         case editLineControl:\par             key longint = 0x83000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 integer;                    /* Max Size */\par                 _mybase_ longint;           /* resource ID of the text */\par                 integer;                    /* password character - 6.0 */\par             \};\par \par         case PopUpControl:\par             key longint = 0x87000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 integer;                    /* Title Width */\par                 _mybase_ longint;           /* menu Ref */\par                 integer;                    /* Initial Value */\par                 _mybase_ longint;           /* Color table ref */\par             \};\par \par         case ListControl:\par             key longint = 0x89000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 integer;                    /* list size */\par                 integer;                    /* List View */\par                 _mybase_ integer;           /* List Type */\par                 integer;                    /* List Start */\par                 longint =0 ;                /* member drawing routine */\par                 integer;                    /* ListMemHeight */\par                 integer;                    /* List Mem Size */\par                 _mybase_ longint;           /* List Ref */\par                 _mybase_ longint;           /* Color Ref */\par             \};\par \par         case growControl:\par             key longint = 0x88000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* color table ref */\par             \};\par \par         case PictureControl:\par             key longint = 0x8D000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* picture ref */\par             \};\par \par         case editTextControl:\par             key longint = 0x85000000;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* text flags */\par                 Rect;                       /* indent Rect */\par                 _mybase_ longint;           /* vert bar */\par                 integer;                    /* vert Amount */\par                 _mybase_ longint;           /* hor bar */\par                 integer;                    /* hor amount */\par                 _mybase_ longint;           /* style ref */\par                 _mybase_ integer;           /* text descriptor */\par                 _mybase_ longint;           /* text ref */\par                 longint;                    /* text length */\par                 longint;                    /* max chars */\par                 longint;                    /* max lines */\par                 integer;                    /* Max chars per line */\par                 integer;                    /* max height */\par                 _mybase_ longint;           /* color ref */\par                 _mybase_ integer;           /* drawing mode */\par                 _mybase_ LongInt;           /* Filter Proc Ptr */\par             \};\par \par         case IconButtonControl:\par             key longint = 0x07FF0001;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 _mybase_ longint;           /* Icon Ref */\par                 _mybase_ longint;           /* Title Ref */\par                 _mybase_ longint;           /* color table ref */\par                 _mybase_ integer;           /* Display mode */\par                 KeyEquiv;\par             \};\par \par         case rectangleControl:\par             key longint = 0x87FF0003;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 integer;                    /* pen height */\par                 integer;                    /* pen width */\par                 hex string[8];              /* penmask */\par                 hex string[32];             /* penpattern */\par             \};\par \par         case thermometerControl:\par             key longint = 0x87FF0002;       /* procRef */\par             optional Fields \{\par                 _mybase_ integer;           /* flags */\par                 _mybase_ integer;           /* more flags */\par                 _mybase_ longint;           /* refcon */\par                 integer;                    /* value for pos of mercury */\par                 integer;                    /* scale for mercury */\par                 _mybase_ longint;           /* color table reference */\par             \};\par \par         \};\par \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 Listing 13-1:  The Complete }{\f6\fs20 rControlTemplate}{\f4  Resource\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par When you created the text edit control for the text editor, you told the Window Manager to look for a single }{\f6\fs20 rControlTemplate}{\f4  resource.  It\rquote s pretty rare to have a window with just one control, so in most cases, we want to tell the Window Manager to look for a list of controls.  We do that by coding 9 as the last byte of the last parameter in the }{\f6\fs20 rWindParam1}{\f4  resource; that\rquote s the field with the comment of }{\f6\fs20 /* wInVerb */}{\f4 .  In the text editor, this field is $0802; now it will be $0809.  This tells the Window Manager that the resource ID in the previous field (labeled }{\f6\fs20 wStorage}{\f4 ) is the resource ID for an }{\f6\fs20 rControlList}{\f4  resource, rather than an }{\f6\fs20 rControlTemplate}{\f4  resource.  (The $x8xx part is used for the window color table.)  The }{\f6\fs20 rControlList}{\f4  resource is a list of resource IDs for }{\f6\fs20 rControlTemplate}{\f4  resources.  Listing 13-2 shows a typical }{\f6\fs20 rControlList}{\f4  resource.  This one lists three controls, with resource IDs of 1001, 1002, and 1003.  If you need more controls, just tack a few more resource IDs on the end of the list.\par \par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 rControlList resource}}}{\v\f6\fs20 \par }{\f6\fs20 resource rControlList (1001) \{\par    \{\par       1001,\par       1002,\par       1003\par       \}\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 13-2:  A Typical }{\f6\fs20 rControlList}{\f4  Resource\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Simple Buttons}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Simple Buttons\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 {\*\bkmkstart bk66}{\*\bkmkstart bk67}The first control we\rquote ll look at is the simple button.  Simple button controls are the (usually) oval shaped buttons with text in the middle, like the ubiquitous OK button shown in Figure 13-1.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1076{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw72\pich38\picwgoal1440\pichgoal760\macpict\bliptag1595450123\blipupi72{\*\blipuid 5f18a30b1d8d10915da3dbec154c3ff0}01bd00000000002600481101a00082a0008e01000a0000000002d0024098000a000000000026004800000000002600480000000000260048000102f70002f70009010007fcff00e0ff0009010007fcff00e0ff00090100f8fc00001fff00090100f8fc00001fff000901078ffcff02f1e0000901078ffcff02f1e00009010e78fc00021e700009010e78fc00021e700009011dc0fc000203b80009011dc0fc000203b8000b093b8000078c600001dc000b093b8000078c600001dc000b093b80000cccc00001dc000b093b80000cccc00001dc000b093b80000ccd800001dc000b093b80000ccd800001dc000b093b80000ccf000001dc000b093b80000ccf000001dc000b093b80000ccd800001dc000b093b80000ccd800001dc000b093b80000cccc00001dc000b093b80000cccc00001dc000b093b8000078c600001dc000b093b8000078c600001dc0009011dc0fc000203b80009011dc0fc000203b80009010e78fc00021e700009010e78fc00021e70000901078ffcff02f1e0000901078ffcff02f1e000090100f8fc00001fff00090100f8fc00001fff0009010007fcff00e0ff0009010007fcff00e0ff0002f70002f700a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-1:  A Typical Simple Button Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You can click on a simple button, but that\rquote s about it.  When you click on the simple button, the program does something right away.  The OK button, for example, is usually the button you press to accept some choices you\rquote ve made in a complicated dialog, or to acknowledge that you have read the message in an alert.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Defining the Control}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Defining the Control\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Listing 13-3 shows the }{\f6\fs20 rControlTemplate}{\f4  resource for an OK button.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    1,                                 /* control ID */\par    \{100,10,0,0\},                      /* control Rect */\par    SimpleButtonControl \{\{\par       $0001,                          /* flags */\par       $3002,                          /* more flags */\par       0,                              /* refcon */\par       1001,                           /* Title Ref */\par       0,                              /* color table ref */\par       \{"\\$0D","\\$0D",0,0\}             /* key equivalents */\par       \}\};\par    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rPString (1001) \{"OK"\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 Listing 13-3:  Resources for an OK Button\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The first two lines are common to all controls.  The first of these is the control ID, which works sort of like a menu ID.  Each control in the window has a unique ID number, and it\rquote s that ID number that we usually use to identify a control.  In some cases, the control handle is used, instead.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 default control}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 controls\:default}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 control ID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 A control ID of 1 has a special meaning in dialogs.  The control with an ID of 1 is the default control.  The default control is frequently a simple button, and when it is a simple button, it\rquote s the one with a double outline.  The default control should be hooked to the return key, so that the window or dialog acts like the default control was picked if the return key is pressed.  If there is no default control, there shouldn\rquote t be a control with a control ID of 1, either.\par The default control should represent the \ldblquote normal\rdblquote  action for the control, which should also be the safe action.  For example, if you are about to reformat a hard disk, and you\rquote re asking the user if you should go ahead, the default action should be to not format the disk.  Make the user pick the dangerous action by hand!  The default button isn\rquote t always the OK button.\par The next line is a rectangle that tells the Control Manager where to put the control.  The first two coordinates are the top and left coordinates for the control, respectively, while the last two are the bottom and right edges for the control.  Of course, there is the minor issue that you may not know how big the button should be, especially if the user picks out an alternate system font or changes the button message to another language.  For most controls, the Control Manager can figure out the correct bottom and right coordinates for you.  To ask the Control Manager to pick out the size, set the last two coordinates for the rectangle to 0, as we did in the example.\par The next line is the one that finally determines just what sort of control we are creating, in this case a }{\f6\fs20 SimpleButtonControl}{\f4 .\par The next four entries can change from control to control, but they don\rquote t change very often.  All of the controls defined as of System 6.0 have two integer flag words and a long integer field you can use for your own purposes, and most controls also have the fourth parameter, a title reference.  There\rquote s a lot of variation in how the two flag words are used, though, so we\rquote ll give a little table with each control that lists the meaning of each of the flag bits.\par \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\widctlpar\adjustright {\f4 7\tab 0 for a visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 6-2\tab Reserved; set to 0.\par 1-0\tab Determines the style for the button.  There are four button styles:\par }\pard \fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab An oval button with a single line outlining the button.\par 01\tab An oval button with a double outline.  The double outline should only be used for the default button.\par 10\tab A square button with a single line outlining the button.\par 11\tab A square button with a drop shadow.  This is the default button form for the square button.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 15-14\tab Reserved; set to 0.\par 13\tab Set this bit to 1 if the button has a keystroke equivalent.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-4\tab Reserved; set to 0.\par 3-2\tab Defines the type of reference in the color table field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 1-0\tab Defines the type of reference in the title field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Title reference is a pointer.\par 01\tab Title reference is a handle.\par 10\tab Title reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The next field is the }{\f6\fs20 refcon}{\f4  field.  It\rquote s a long integer value you can use for your own purposes.\par The title reference field is the resource ID for an }{\f6\fs20 rPString}{\f4  resource.  This is the string that will appear in the button.\par The next field is the color table reference.  It can be pretty distracting to have chartreuse buttons on a mustard background, but with a little effort, you can create truly annoying colored buttons.  We\rquote ll cover that topic in detail later, but for now, use a pointer of 0 \endash  which tells the Control Manager to pick a boring black on white for the button color.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 key equivalents}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last field is used to define keyboard equivalents for the button.  It this example, we\rquote ve set up a key equivalent of }{\f6\fs20 "\\$0D"}{\f4 , coding the numeric equivalent of the return key (13, or $0D) as an escape sequence.  The first two entries in the key equivalent record are the uppercase and lowercase version of the key.  Since the return key works the same way, whether or not the shift key is pressed, we\rquote ve set both values to 13.  You should use characters if they are printable.  For example,\par \par }{\f6\fs20 \{"C","c",0,0\}\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 would work just fine.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last two items are the key modifiers and a flags word called the key care bits.  These two words let you do fancy tricks, like only allowing the return key, and not allowing the enter key.  I\rquote m not going to go over them in detail here.  If you want to treat the keys some special way, check out the detailed description in the toolbox reference manual.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using the Control}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Using the Control\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMaster}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the things }{\f6\fs20 TaskMaster}{\f4  checks for as it preprocesses an event is whether or not a keypress or mouse down event involves a control.  If it does, }{\f6\fs20 TaskMaster}{\f4  does all of the work to track the mouse and highlight the control, then returns }{\f6\fs20 wInControl}{\f4 .  Some fields in the event record tell us what actually happened:\par \par }\pard \qj\fi-1620\li1980\ri360\widctlpar\adjustright {\f6\fs20 wmTaskData2}{\f4 \tab The handle for the control will be in this field.  The control handle is used by several Control Manager calls, some of which we\rquote ll look at later.\par }{\f6\fs20 wmTaskData3}{\f4 \tab The part code for the control is in }{\f6\fs20 wmTaskData3}{\f4 .  The part code tells us what part of the control was hit by a mouse down event.  For most controls, including simple buttons, there is only one part, so this value isn\rquote t very useful.  We\rquote ll use the value later, though, for scroll bars.\par }{\f6\fs20 wmTaskData4}{\f4 \tab The control ID is placed here.  This is the value we really need; it tells us which control was hit.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 13-1:  Create a program that opens a single alert style window.  Use 320 mode graphics, since we\rquote ll add some colored objects to this program later in the lesson, and we want to be able to use lots of colors.  Get rid of everything in the File menu except Quit and Close.  (Close is required to support desk accessories, but your program should ignore it.)\par Create two simple buttons in the window.  The first should be called \ldblquote Beep Once.\rdblquote   It is the default button, and should have a double outline and use the return key as a key equivalent.  The other button should be called \ldblquote Beep Twice.\rdblquote   It should have a normal outline, and a key equivalent of 2.\par Your program should detect hits on the buttons, calling }{\f6\fs20 SysBeep}{\f4  once when the first button is pressed, and twice when the second button is pressed.\par We\rquote re going to use this same program as a test bed over the next two lessons, creating a control sampler.  Because of that, you need lots of room, so make the window as big as you can.  The controls should be laid out more or less like you see in Figure 13-2.\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1077{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \tab }{\b\f4 Tip}{\f4 \tab Don\rquote t forget to call }{\f6\fs20 DrawControls}{\f4  in your window update procedure, just like you did for the text editor.  The controls aren\rquote t drawn unless you do.\~\~}{{\pict{\*\picprop\shplid1078{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1079{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley49\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag719555818\blipupi72{\*\blipuid 2ae38ceae55d4bb590402d7c598369ae}12aa00000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00b003cbd000030f7000103c00b003cbd000030f7000103c00b003cbd00003cf7000103c00b003cbd00003cf7000103c00b003cbd00003ff7000103c00b003cbd00003ff7000103c00c003cbd00013fc0f8000103c00c003cbd00013fc0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffff8000103c00c003cbd00013ffff8000103c00c003cbd00013cf0f8000103c00c003cbd00013cf0f8000103c00b003cbc00003cf8000103c00b003cbc00003cf8000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c02e033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000103c0ec000103c02e033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000103c0ec000103c02a033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000103c0ec000103c02a033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000103c0ec000103c040033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000103c0ec000103c040033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000103c0ec000103c034033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec304c0000003c0ec000103c034033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec304c0000003c0ec000103c03e033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef00e000f03cf3c0f03c003ffc0000003c0ec000103c03e033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef00e000f03cf3c0f03c003ffc0000003c0ec000103c038033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000103c0ec000103c038033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000103c0ec000103c040033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000103c0ec000103c040033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000103c0ec000103c01f033c00003cf800003cf400003cfd0000f0f80000f0f3000103c0ec000103c01f033c00003cf800003cf400003cfd0000f0f80000f0f3000103c0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-2:  Control Sampler Window\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk66}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 button control}{\rxe bk66}}}{\*\bkmkend bk67}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 simple button control}{\rxe bk67}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4\fs28 Colored Controls}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Colored Controls\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 controls\:colors}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 colored controls}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It\rquote s possible to create a control that isn\rquote t made up of black text and lines on a white background by adding a color resource.  Listing 13-4 shows the OK button with a typical color resource that draws all of the parts that are normally black in blue \endash  at least, it\rquote s blue on a 320 mode screen with the standard color palette.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    1,                                 /* control ID */\par    \{100,10,0,0\},                      /* control Rect */\par    SimpleButtonControl \{\{\par       $0000,                          /* flags */\par       $300A,                          /* more flags */\par       0,                              /* refcon */\par       1001,                           /* Title Ref */\par       1001,                           /* color table ref */\par       \{13,13,0,0\}                     /* key equivalents */\par       \}\};\par    \};\par \par resource rPString (1001) \{"OK"\};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 data rCtlColorTbl (1001) \{\par    $"3000 F000 3000 F300 3F00"\par    \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 Listing 13-4:  A Blue OK Button\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are two steps needed to add the color resource to the }{\f6\fs20 rControlTemplate}{\f4 .  The first step is to set bits 3-2 for the }{\f6\fs20 moreFlags}{\f4  parameter to 10, telling the Control Manager that the color table reference field is a resource ID for a color table.  The second step, of course, is to put the resource number for the color table in the color table reference field.  Following our long standing convention, we\rquote ve used the same resource number of 1001 for the color table reference that we\rquote ve used for all of the other resources associated with this control.\par The resource for the color table itself looks a little odd.  That\rquote s because there isn\rquote t a resource defined in Apple\rquote s header files for a color table, so we have to put in the fields as raw data.  Unfortunately, that wasn\rquote t just an oversight on their part.  There\rquote s a very good reason for not putting in a color table resource type: the color table format varies from control to control.\par Other than the bizarre format, though, there\rquote s nothing special about using raw data instead of a resource defined via a type.  The resource as you see it defines five integers, each entered as a hexadecimal value.  The bytes appear in the string in the same order they appear in memory, so the least significant byte comes first.  In normal hexadecimal format, the five numbers you see are $0030, $00F0, $0030, $00F3 and $003F.\par All five integers are bit maps, divided up into various fields to control the color of the button.  It\rquote s possible, for example, to create a simple button with a blue outline and red letters.  Here\rquote s a detailed breakdown of the color table for a simple button, in the same order you see them in Listing 13-4.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Button Outline}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Button Outline\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The first word contains the button outline color, which controls the color of the oval or box around the outside of the button.  This includes the double outline of a default button and the drop shadow that appears under a square button.  The color itself is in bits 7-4.  They are generally set to $0, which gives a black outline.  All other bits are unused, and should be set to 0.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Unhighlighted Button Interior}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Unhighlighted Button Interior\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This word controls the color of the interior of the button when it\rquote s just sitting there on the screen.  The button looks different when you are pressing it with the mouse.\par Bits 7-4 control the background color.  They are generally set to $F, which gives a white background.  All of the other bits are unused, and should be set to 0.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Highlighted Button Interior}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Highlighted Button Interior\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This word controls the color of the interior of the button when you are pressing on the button with the mouse.  The toolbox reference manuals call this the highlighted state or the selected state.  Once again, only bits 7-4 are used.  These bits are normally set to $0 for black; in the example, you see them set to $3, for blue.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Unhighlighted Button Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Unhighlighted Button Text\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The fourth word controls the color of the text when the button is not selected.  The most significant 8 bits are unused, and should be set to 0.  The next four bits, bits 7-4, control the background color for the text.  These bits should almost always match the background color for the button itself, so they are usually set to $F.  Bits 3-0 control the foreground color for the text.  For the standard black text, the value would be $0.  For our blue button, these bits are $3.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Highlighted Button Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 Highlighted Button Text\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last word controls the highlighted color for the text.  The bits are used the same way as for unhighlighted text, but since the button normally inverts when you highlight it, the \ldblquote black\rdblquote  part becomes \ldblquote white\rdblquote , and the \ldblquote white\rdblquote  part becomes \ldblquote black.\rdblquote \par \par I\rquote ve included this section mostly for your information.  If I were ever inclined towards bad puns, I might mention that it\rquote s here for local color.  This section tells you enough about control colors and how they are used for you to be able to find and read the color table definitions for the various controls in the toolbox reference manual, but I won\rquote t spend a lot of time going over all of the color tables for each and every control.\par There are three reasons for skipping over the color table information.  The first I\rquote ve mentioned: once you know basically how to use them, it\rquote s pretty simple to get the information you need to color a particular control from the toolbox reference manuals.  The second is that I have a fair amount of respect for the number of trees the paper would consume, not to mention the boredom factor for making you skip over all of those detailed bit maps of color tables you may never use.  The most important, though, is that color tables are rarely used in most applications.  Black buttons on a white background are the default for a reason: they are easy to see on any screen, color or black and white.  They can be seen by people who are color blind.  Black and white are rarely changed in the color palette, so they are rarely messed up by changing the color palette.  Even on a color screen with a normally sighted person, getting carried away with colors can lead to a very distracting program.  In fact, about the only group of programmers who regularly use colored buttons are game programmers, and they have such particular requirements for things like shadowed toggle switches or 3-D buttons that they often create custom controls instead of using simple color tables, anyway.\par That\rquote s not to say colors are not useful.  The odd program here or there that uses blue or green buttons can be enough of a subtle change to make the program interesting without being garish.  You might want to use colored buttons in a simple children\rquote s game, too.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Static Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Static Text\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par {\*\bkmkstart bk68}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rTextForLETextBox2 resource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The next control we\rquote ll look at is the static text control.  Static text controls just write some text on the screen.  It\rquote s possible to have the program do something when the user clicks on a static text control, but most of the time, static text controls are just used for labels in a complicated window or dialog.  A typical resource definition for a static text control is shown in Listing 13-5.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{10,10,21,200\},                    /* control Rect */\par    statTextControl \{\{\par       $0000,                          /* flags */\par       $1002,                          /* more flags */\par       0,                              /* refcon */\par       1001                            /* Title Ref */\par       \}\};\par    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rTextForLETextBox2 (1001) \{"Control Test Platform"\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 13-5:  A Typical Static Text Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Here\rquote s how the bits are used in the two flag words:\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 7\tab 0 for a visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 6-2\tab Reserved; set to 0.\par 1\tab Set this bit for text substitution, or clear it if text substitution is not used.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 0\tab Set this bit if the text is a p-string, and clear it for a null terminated string.  This bit isn\rquote t used if the text is in a resource.\par \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-2\tab Reserved; set to 0.\par 1-0\tab Defines the type of reference in the title field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Title reference is a pointer.\par 01\tab Title reference is a handle.\par 10\tab Title reference is a resource ID for an }{\f6\fs20 rTextForLETextBox2}{\f4  resource.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rTextForLETextBox2 resource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In a static text control, the title field is actually the text.  The text is in a new type of resource, }{\f6\fs20 rTextForLETextBox2}{\f4  .  This resource works just like an }{\f6\fs20 rPString}{\f4  resource, but it creates a simple block of text, which can be longer than 255 characters.  The Control Manager figures out how many characters to draw by looking at the size of the resource.\par Setting bit 1 of the flag word tells the Control Manager to perform text substitution.  This lets you substitute text in a static text string, more or less like you did in an alert window.  It\rquote s a useful capability, but I\rquote m not going to go over it in detail here.  I want you to be aware that text substitution is possible, but I\rquote ll leave it up to you to dig the details out of the toolbox reference manual if you need to.\par The only really tricky part of defining a static text control is picking the size of the control rectangle.  Unfortunately, you can\rquote t let the Control Manager do it for you, like we did with simple buttons.  The only foolproof way to do it is to set up the text in a sample program and make the proper QuickDraw II calls to see how big the text actually is.  Even then, you have to make some assumptions.  The basic assumption is that the system font is being used.  In practice, you can allow 11 pixels for each line, then experiment with the width of the control rectangle to make sure it is wide enough that none of the text is chopped off.  For a start, try 10 pixels per character for the width.  This is also a great time to put a program like Design Master to work, since you can just draw and let Design Master tell you how big the rectangle should be.\par There are also two optional fields for the control record.  The first is the length of the text; it\rquote s used when you use a pointer to the text.  Since we\rquote re using resources, it isn\rquote t an issue.  The other is a text justification flag.  Using it, you can have the Control Manager left justify (0, }{\f6\fs20 leftJust}{\f4 ), fill justify (2, }{\f6\fs20 fullJust}{\f4 ), right justify (-1, }{\f6\fs20 rightJust}{\f4 ) or center the text (1, }{\f6\fs20 centerJust}{\f4 ) in the control rectangle.  Here\rquote s what the static text resource would look like for centered text:\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{10,10,21,200\},                    /* control Rect */\par    statTextControl \{\{\par       $0000,                          /* flags */\par       $1002,                          /* more flags */\par       0,                              /* refcon */\par       1001,                           /* Title Ref */\par       0,                              /* text length; not used */\par       centerJust                      /* center the text */\par       \}\};\par    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 13-2:  Start with the solution to Problem 13-1, and add a title to the window using a static text control.  The title should say \ldblquote Control Test Platform,\rdblquote  just like the sample resource definition.\par Make sure you can detect hits on the control by calling }{\f6\fs20 SysBeep}{\f4  3 times when the control is selected, but take the calls to }{\f6\fs20 SysBeep}{\f4  out afterwards.  It\rquote s generally not a good idea to have the program do something when the user clicks on static text.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1080{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag-1001365508\blipupi72{\*\blipuid c4505ffce5d57a64034620b69076f1b0}14b400000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00b003cbd000030f7000103c00b003cbd000030f7000103c00b003cbd00003cf7000103c00b003cbd00003cf7000103c00b003cbd00003ff7000103c00b003cbd00003ff7000103c00c003cbd00013fc0f8000103c00c003cbd00013fc0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffff8000103c00c003cbd00013ffff8000103c00c003cbd00013cf0f8000103c00c003cbd00013cf0f8000103c00b003cbc00003cf8000103c00b003cbc00003cf8000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c02e033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000103c0ec000103c02e033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000103c0ec000103c02a033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000103c0ec000103c02a033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000103c0ec000103c040033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000103c0ec000103c040033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000103c0ec000103c034033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec304c0000003c0ec000103c034033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec304c0000003c0ec000103c03e033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef00e000f03cf3c0f03c003ffc0000003c0ec000103c03e033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef00e000f03cf3c0f03c003ffc0000003c0ec000103c038033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000103c0ec000103c038033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000103c0ec000103c040033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000103c0ec000103c040033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000103c0ec000103c01f033c00003cf800003cf400003cfd0000f0f80000f0f3000103c0ec000103c01f033c00003cf800003cf400003cfd0000f0f80000f0f3000103c0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-3:  Control Sampler with Static Text Title\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par {\*\bkmkend bk68}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 static text control}{\rxe bk68}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Radio Buttons}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Radio Buttons\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 {\*\bkmkstart bk69}Radio buttons are used when you want to present a choice, and the user is supposed to pick exactly one of the alternatives.  For example, PRIZM\rquote s link dialog lets you pick one of four executable file types: EXE, S16, NDA or CDA.  Figure 13-4 shows the link dialog that contains the radio buttons that let you pick the file format.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1081{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw518\pich284\picwgoal10360\pichgoal5680\macpict\bliptag-990732306\blipupi72{\*\blipuid c4f29fee640537d951f46bfeef57cbb2}1cca00000000011c02061101a00082a0008e01000a0000000002d0024098004200000000009e020800000000009e020600000000009e0206000102bf0002bf0007003fc2ff01f00007003fc2ff01f000070030c200013000070030c200013000070030c200013000070030c2000130000901307fc4ff02f830000901307fc4ff02f830000901307fc4ff02f830000901307fc4ff02f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000f01307cf3000001d5ff04fc00f830000f01307cf3000001d5ff04fc00f830001001307cf300010180d600040c00f830001001307cf300010180d600040c00f830001a05307c003c600cfe00020f8c38fd00010180d600040c00f830001a05307c003c600cfe00020f8c38fd00010180d600040c00f830001a04307c006660fe0003600c0018fd00010180d600040c00f830001a04307c006660fe0003600c0018fd00010180d600040c00f830001b11307c00667c1c7878f80c1c183c6000000180d600040c00f830001b11307c00667c1c7878f80c1c183c6000000180d600040c00f830001b0c307c0066660ccccc600f0c1866fe00010180d600040c00f830001b0c307c0066660ccccc600f0c1866fe00010180d600040c00f830001b0c307c0066660cfcc0600c0c187efe00010180d600040c00f830001b0c307c0066660cfcc0600c0c187efe00010180d600040c00f830001b0c307c0066660cc0cc6c0c0c1860fe00010180d600040c00f830001b0c307c0066660cc0cc6c0c0c1860fe00010180d600040c00f830001b11307c003c7c6c7878380c1e3c3c6000000180d600040c00f830001b11307c003c7c6c7878380c1e3c3c6000000180d600040c00f830001401307cfe000038f700010180d600040c00f830001401307cfe000038f700010180d600040c00f830001001307cf300010180d600040c00f830001001307cf300010180d600040c00f830000f01307cf3000001d5ff04fc00f830000f01307cf3000001d5ff04fc00f830000901307cc40002f830000901307cc40002f830000f01307cf3000001d5ff04fc00f830000f01307cf3000001d5ff04fc00f830001001307cf300010180d600040c00f830001001307cf300010180d600040c00f830001703307c0063fe00010230fa00010180d600040c00f830001703307c0063fe00010230fa00010180d600040c00f830001703307c0066fe00010330fa00010180d600040c00f830001703307c0066fe00010330fa00010180d600040c00f830001b0c307c006c1e1e3e03b1f7f0f180fe00010180d600040c00f830001b0c307c006c1e1e3e03b1f7f0f180fe00010180d600040c00f830001a03307c0078fe330403f336d998fd00010180d600040c00f830001a03307c0078fe330403f336d998fd00010180d600040c00f830001a0b307c006c3f3f33037336d9f8fd00010180d600040c00f830001a0b307c006c3f3f33037336d9f8fd00010180d600040c00f830001a0b307c0066303033033336d980fd00010180d600040c00f830001a0b307c0066303033033336d980fd00010180d600040c00f830001b0c307c00631e1e3e0311f6d8f180fe00010180d600040c00f830001b0c307c00631e1e3e0311f6d8f180fe00010180d600040c00f830001401307cfd000030f800010180d600040c00f830001401307cfd000030f800010180d600040c00f830001001307cf300010180d600040c00f830001001307cf300010180d600040c00f830000f01307cf3000001d5ff04fc00f830000f01307cf3000001d5ff04fc00f830000901307cc40002f830000901307cc40002f830000f01307cf3000001d5ff04fc00f830000f01307cf3000001d5ff04fc00f830001001307cf300010180d600040c00f830001001307cf300010180d600040c00f830002e05307c00603180fd001b7c000038c000018033003031e3e1e1e01e03301e3e3e1e3e1e3e3c06ea00040c00f830002e05307c00603180fd001b7c000038c000018033003031e3e1e1e01e03301e3e3e1e3e1e3e3c06ea00040c00f830002d05307c00600180fd000b660000600000018063003063fe3304303306300cfd33030c30660cea00040c00f830002d05307c00600180fd000b660000600000018063003063fe3304303306300cfd33030c30660cea00040c00f830002e1d307c006071f1b1f36660666c78f9c6660180c3e1f0c333330330030c300cfd33030c306018ea00040c00f830002e1d307c006071f1b1f36660666c78f9c6660180c3e1f0c333330330030c300cfd33030c306018ea00040c00f830002f25307c00603199c33386607c70cc60c3c001818333318333e303300618300c3e3e333e0c3c3c30ea00040c00f830002f25307c00603199c33386607c70cc60c3c001818333318333e303300618300c3e3e333e0c3c3c30ea00040c00f830002f25307c00603199833306e06060fc60c180018303333303336303f00c30300c33363f360c300660ea00040c00f830002f25307c00603199833306e06060fc60c180018303333303336303f00c30300c33363f360c300660ea00040c00f830002e08307c00603199833303fe6009c060c3c0018603333603fe3304301860300cfd33030c3066c0ea00040c00f830002e08307c00603199833303fe6009c060c3c0018603333603fe3304301860300cfd33030c3066c0ea00040c00f830002f08307c007e79f181f304fe60127861e66601840331f401e331e3333f403f1e3efe33031e3e3c80ea00040c00f830002f08307c007e79f181f304fe60127861e66601840331f401e331e3333f403f1e3efe33031e3e3c80ea00040c00f830001501307cfb000103c0fb00010180d600040c00f830001501307cfb000103c0fb00010180d600040c00f830001001307cf300010180d600040c00f830001001307cf300010180d600040c00f830000f01307cf3000001d5ff04fc00f830000f01307cf3000001d5ff04fc00f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000d05307c00fffffec80002f830000d05307c00fffffec80002f830001707307c00c000060780f5000401c1800006db0002f830001707307c00c000060780f5000401c1800006db0002f83000180a307c00c000060cc000000cf70002c00006da0002f83000180a307c00c000060cc000000cf70002c00006da0002f83000221a307c00c000060c0d8f0f9f0f00f80f0f199b1e1e00c3878f8e3e1fdd0002f83000221a307c00c000060c0d8f0f9f0f00f80f0f199b1e1e00c3878f8e3e1fdd0002f83000221a307c00c000060c0e19998c1981981819999c333300c18c06063333dd0002f83000221a307c00c000060c0e19998c1981981819999c333300c18c06063333dd0002f83000221a307c00c000060c0c1f998c1f81980f199998303f00c18786063333dd0002f83000221a307c00c000060c0c1f998c1f81980f199998303f00c18786063333dd0002f83000221a307c00c000060ccc18198d98019801999998333000c180c6c6331fdd0002f83000221a307c00c000060ccc18198d98019801999998333000c180c6c6331fdd0002f83000230d307c00c00006078c0f0f870f00f8fe0f0a981e1e01e3c7838f332330de0002f83000230d307c00c00006078c0f0f870f00f8fe0f0a981e1e01e3c7838f332330de0002f830001105307c00fffffeed00001edd0002f830001105307c00fffffeed00001edd0002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000d05307c00fffffec80002f830000d05307c00fffffec80002f830001a07307c00c000060780f800020c0007fe0001c070db0002f830001a07307c00c000060780f800020c0007fe0001c070db0002f830001d0a307c00c000060cc000000cfb00070c0003006000c030db0002f830001d0a307c00c000060cc000000cfb00070c0003006000c030db0002f830002119307c00c000060c0d8f0f9f0f00f80f19bf8f878300f87cf83078dc0002f830002119307c00c000060c0d8f0f9f0f00f80f19bf8f878300f87cf83078dc0002f830002119307c00c000060c0e19998c1981981819b6ccccc30060cccc30ccdc0002f830002119307c00c000060c0e19998c1981981819b6ccccc30060cccc30ccdc0002f830002119307c00c000060c0c1f998c1f81980f1bb6ccccc30060cccc30fcdc0002f830002119307c00c000060c0c1f998c1f81980f1bb6ccccc30060cccc30fcdc0002f830002119307c00c000060ccc18198d980198018db6ccccc3006ccccc30c0dc0002f830002119307c00c000060ccc18198d980198018db6ccccc3006ccccc30c0dc0002f83000221a307c00c00006078c0f0f870f00f80f11b6cf878780387cf87878c0dd0002f83000221a307c00c00006078c0f0f870f00f80f11b6cf878780387cf87878c0dd0002f830001105307c00fffffef800000fd20002f830001105307c00fffffef800000fd20002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000d05307c00fffffec80002f830000d05307c00fffffec80002f830001b07307c00f0001e0f80fa000070fe000438300180c0da0002f830001b07307c00f0001e0f80fa000070fe000438300180c0da0002f830001d06307c00ce00e60cfd00000cfe0007c180000018000180d90002f830001d06307c00ce00e60cfd00000cfe0007c180000018000180d90002f830002119307c00c1c7060c198f0f199f0f00f9f3e1e3601871f199c7c3e0dc0002f830002119307c00c1c7060c198f0f199f0f00f9f3e1e3601871f199c7c3e0dc0002f830002119307c00c038060f0f1999998c198198c1833380183199b0c66660dc0002f830002119307c00c038060f0f1999998c198198c1833380183199b0c66660dc0002f83000980042009e0000011c0208009e0000011c0206009e0000011c020600012119307c00c1c7060c061f98198c1f8198c183f300183199e0c66660dc0002f830002119307c00c1c7060c061f98198c1f8198c183f300183199e0c66660dc0002f830002119307c00ce00e60c0f1819998d980198c1b30300183199b0c663e0dc0002f830002119307c00ce00e60c0f1819998d980198c1b30300183199b0c663e0dc0002f830002119307c00f0001e0f998f0f0f870f00f8c0e1e3003c799999e66466dc0002f830002119307c00f0001e0f998f0f0f870f00f8c0e1e3003c799999e66466dc0002f830001205307c00fffffeef000103c0dc0002f830001205307c00fffffeef000103c0dc0002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000d05307c00fffffec80002f830000d05307c00fffffec80002f830001f07307c00f0001e0780f6000560380001c61cfd0003031800c0e30002f830001f07307c00f0001e0780f6000560380001c61cfd0003031800c0e30002f830002307307c00ce00e60cc0f9001030000060180003000c00018000030000c0e30002f830002307307c00ce00e60cc0f9001030000060180003000c00018000030000c0e30002f830002820307c00c1c7060c07cc63c03c663c3c667c3c3e7c183c07ce0c1e03e1e01f3878cce30002f830002820307c00c1c7060c07cc63c03c663c3c667c3c3e7c183c07ce0c1e03e1e01f3878cce30002f83000280c307c00c03806078ccc6660663cfe660030fe660c186603060c330183303318c0d8e30002f83000280c307c00c03806078ccc6660663cfe660030fe660c186603060c330183303318c0d8e30002f830002820307c00c1c70600ccc6c7e07e187e6066307e6666187e03060c3f018330331878f0e30002f830002820307c00c1c70600ccc6c7e07e187e6066307e6666187e03060c3f018330331878f0e30002f830002820307c00ce00e60cccc6c600603c60666636606666186003060c3001b33033180cd8e30002f830002820307c00ce00e60cccc6c600603c60666636606666186003060c3001b33033180cd8e30002f830002921307c00f0001e0787c383c03c663c3c3e1c3c3e7c3c3c030f1e1e00e1e01f3c78ccc0e40002f830002921307c00f0001e0787c383c03c663c3c3e1c3c3e7c3c3c030f1e1e00e1e01f3c78ccc0e40002f830000d05307c00fffffec80002f830000d05307c00fffffec80002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830001b04307c0003fef900017fc0fa00010ff8fa000101ffe30002f830001b04307c0003fef900017fc0fa00010ff8fa000101ffe30002f830002c08307c001c01c03e667cfe000603803803c183c0fe000570070078f878fe00050e00e0119f0fe70002f830002c08307c001c01c03e667cfe000603803803c183c0fe000570070078f878fe00050e00e0119f0fe70002f830002c08307c0061fc30306660fe00050c0006066786fe0003018000c0feccfe000630001819999980e80002f830002c08307c0061fc30306660fe00050c0006066786fe0003018000c0feccfe000630001819999980e80002f830002d08307c00c7ff18303c60fe000f180003060187c0000003000060c0ccccfe000660000c1d999980e80002f830002d08307c00c7ff18303c60fe000f180003060187c0000003000060c0ccccfe000660000c1d999980e80002f830002d08307c00cfff983c1878fe000f18000303c18660000003000060c0ccccfe000660000c1f999980e80002f830002d08307c00cfff983c1878fe000f18000303c18660000003000060c0ccccfe000660000c1f999980e80002f830002d08307c00c7ff18303c60fe000f18000300618660000003000060c0ccfcfe000660000c1b999f80e80002f830002d08307c00c7ff18303c60fe000f18000300618660000003000060c0ccfcfe000660000c1b999f80e80002f830002c08307c0061fc30306660fe000c0c0006066186600000018000c0feccfe000630001819999980e80002f830002c08307c0061fc30306660fe000c0c0006066186600000018000c0feccfe000630001819999980e80002f830002d08307c001c01c03e667cfe000603803803c7e3c0fe000570070078f8ccfe00060e00e0189f1980e80002f830002d08307c001c01c03e667cfe000603803803c7e3c0fe000570070078f8ccfe00060e00e0189f1980e80002f830001b04307c0003fef900017fc0fa00010ff8fa000101ffe30002f830001b04307c0003fef900017fc0fa00010ff8fa000101ffe30002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830001101307cf400007ff6ff00e0de0002f830001101307cf400007ff6ff00e0de0002f830001201307cf500010f80f600001fde0002f830001201307cf500010f80f600001fde0002f830002704307c00003ffcff00c0fe000078f5ff04f1e000003ffaff03f000000ff4ff0080fb0002f830002704307c00003ffcff00c0fe000078f5ff04f1e000003ffaff03f000000ff4ff0080fb0002f830002804307c0001e0fc000078fe0001e780f600041e700001e0fa00031e000078f40000f0fb0002f830002804307c0001e0fc000078fe0001e780f600041e700001e0fa00031e000078f40000f0fb0002f830002503307c0007fb00040e000001dcf5000303b80007f90003038001c0f400001cfb0002f830002503307c0007fb00040e000001dcf5000303b80007f90003038001c0f400001cfb0002f830004017307c000e000c0600300007000003b8001e000001e0000180fe000601dc000e000780fe000f070001c0038001e000003e000e000038fe00000efb0002f830004017307c000e000c0600300007000003b8001e000001e0000180fe000601dc000e000780fe000f070001c0038001e000003e000e000038fe00000efb0002f830003f16307c000e000c0000300007000003b80033001803300180fd000601dc000e000cc0fe0013030001c00380033001803300180000183000000efb0002f830003f16307c000e000c0000300007000003b80033001803300180fd000601dc000e000cc0fe0013030001c00380033001803300180000183000000efb0002f830004038307c000e000c0e3e330007000003b800301e3e0333e3e3878f878001dc000e000c07cf8787830001c003800301e3e0331e3e3e66187c3c000efb0002f830004038307c000e000c0e3e330007000003b800301e3e0333e3e3878f878001dc000e000c07cf8787830001c003800301e3e0331e3e3e66187c3c000efb0002f830004021307c000e000c0633360007000003b8001e3318033331818ccccc0001dc000e000c0cfecc13c30001c0038001e331803333186666183060000efb0002f830004021307c000e000c0633360007000003b8001e3318033331818ccccc0001dc000e000c0cfecc13c30001c0038001e331803333186666183060000efb0002f830004038307c000e000c06333c0007000003b800033f18033331818cccc78001dc000e000c0ccccc0fc30001c003800033f180333f18666618303c000efb0002f830004038307c000e000c06333c0007000003b800033f18033331818cccc78001dc000e000c0ccccc0fc30001c003800033f180333f18666618303c000efb0002f830003f20307c000e000c0633360007000003b80033301b033331b18cccc0c001dc000e000cfdcc13030001c00380033301b03330186666183606000efb0002f830003f20307c000e000c0633360007000003b80033301b033331b18cccc0c001dc000e000cfdcc13030001c00380033301b03330186666183606000efb0002f830004038307c000e000fcf33330007000003b8001e1e0e01e3e0e3c78cc78001dc000e000787ccc787878001c0038001e1e0e03e1e183e3e3c1c3c000efb0002f830004038307c000e000fcf33330007000003b8001e1e0e01e3e0e3c78cc78001dc000e000787ccc787878001c0038001e1e0e03e1e183e3e3c1c3c000efb0002f830002903307c000efb000407000003b8fc000003fb000301dc000ef9000301c00380f400000efb0002f830002903307c000efb000407000003b8fc000003fb000301dc000ef9000301c00380f400000efb0002f830002503307c0007fb00040e000001dcf5000303b80007f90003038001c0f400001cfb0002f830002503307c0007fb00040e000001dcf5000303b80007f90003038001c0f400001cfb0002f830002804307c0001e0fc000078fe0001e780f600041e700001e0fa00031e000078f40000f0fb0002f830002804307c0001e0fc000078fe0001e780f600041e700001e0fa00031e000078f40000f0fb0002f830002704307c00003ffcff00c0fe000078f5ff04f1e000003ffaff03f000000ff4ff0080fb0002f830002704307c00003ffcff00c0fe000078f5ff04f1e000003ffaff03f000000ff4ff0080fb0002f830001201307cf500010f80f600001fde0002f830001201307cf500010f80f600001fde0002f830001101307cf400007ff6ff00e0de0002f830001101307cf400007ff6ff00e0de0002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307cc40002f830000901307fc4ff02f830000901307fc4ff02f830000901307fc4ff02f830000901307fc4ff02f83000070030c200013000070030c200013000070030c200013000070030c20001300007003fc2ff01f00007003fc2ff01f00002bf0002bf00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-4:  PRIZM\rquote s Link Dialog Shows Some Typical Radio Buttons\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Radio buttons are grouped in families.  Only one of the radio buttons in any particular family can be selected at any one time.  You don\rquote t really have to do any work to make this happed; the Control Manager automatically deselects one radio button when the user clicks on one of the other radio buttons in the same family, and }{\f6\fs20 TaskMaster}{\f4  selects a radio button when the user clicks on it.  The active radio button is the one with the dot in the middle of the circle.  The others have a circle with nothing inside.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{10,20,0,0\},                       /* control Rect */\par    RadioControl \{\{\par       $0001,                          /* flags */\par       $3002,                          /* more flags */\par       0,                              /* refcon */\par       1001,                           /* Title Ref */\par       0,                              /* initial value */\par       0,                              /* color table */\par       \{"G","g",0,0\}                   /* key equivalents */\par       \}\};\par    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rPString (1001) \{"Green"\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 13-6:  A Typical Radio Button Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Like simple buttons, the Control Manager will be happy to figure out the size for the control, so you can (and usually should) set the last two entries in the control rectangle to 0.\par Also like the simple button, you can use key equivalents for radio button controls.  The last two fields are optional, though.  If you aren\rquote t using color tables or key equivalents, you can safely leave the entries off entirely.  If you are using key equivalents, though, you do have to put in something for the color table, even if you aren\rquote t using one.\par The initial value field should be 0 if the control is not supposed to be the one that is selected with the window is created, and 1 if it should be selected.  Exactly one of the controls in a particular family should be selected.\par The flags for the radio button control are:\par \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\widctlpar\adjustright {\f4 7\tab 0 for a visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 6-0\tab This is the family number for the radio button.\par \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 15-14\tab Reserved; set to 0.\par 13\tab Set this bit to 1 if the button has a keystroke equivalent.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-4\tab Reserved; set to 0.\par 3-2\tab Defines the type of reference in the color table field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 1-0\tab Defines the type of reference in the title field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Title reference is a pointer.\par 01\tab Title reference is a handle.\par 10\tab Title reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 13-3:  Start with the program from Problem 13-2.  Add a family of three radio buttons, labeled Red, Green and Blue.  Group these controls to the right of a rectangle that is outlined in black and filled with the color whose radio button is active.\par Use key equivalents for the various colors, assigning the first letter of the color as the key equivalent.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1082{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag-256008421\blipupi72{\*\blipuid f0bd9f1b3226febea472c72a6bfd2441}17a800000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00b003cbd000030f7000103c00b003cbd000030f7000103c00b003cbd00003cf7000103c00b003cbd00003cf7000103c00b003cbd00003ff7000103c00b003cbd00003ff7000103c00c003cbd00013fc0f8000103c00c003cbd00013fc0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffff8000103c00c003cbd00013ffff8000103c00c003cbd00013cf0f8000103c00c003cbd00013cf0f8000103c00b003cbc00003cf8000103c00b003cbc00003cf8000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c02e033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000103c0ec000103c02e033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000103c0ec000103c02a033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000103c0ec000103c02a033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000103c0ec000103c040033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000103c0ec000103c040033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000103c0ec000103c034033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec304c0000003c0ec000103c034033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec304c0000003c0ec000103c03e033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef00e000f03cf3c0f03c003ffc0000003c0ec000103c03e033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef00e000f03cf3c0f03c003ffc0000003c0ec000103c038033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000103c0ec000103c038033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000103c0ec000103c040033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000103c0ec000103c040033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000103c0ec000103c01f033c00003cf800003cf400003cfd0000f0f80000f0f3000103c0ec000103c01f033c00003cf800003cf400003cfd0000f0f80000f0f3000103c0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-5:  Control Sampler with Radio Buttons\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk69}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 radio button control}{\rxe bk69}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Check Boxes}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Check Boxes\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 {\*\bkmkstart bk70}Check boxes are used for yes/no choices.  It\rquote s pretty common to have a series of related yes/no choices grouped together, but unlike radio buttons, check boxes don\rquote t have families.  Any grouping you see is there for organization, not because the Control Manager attaches any special significance to more than one check box.\par Figure 13-6 shows a typical use of check boxes.  It\rquote s the Find dialog from PRIZM, which uses check boxes to let you select some options for the string search.  If the option is on (selected) the box will have an X.  If the option is off (not selected) the box is empty.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1083{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley48\piccropl0\piccropr0\piccropt0\piccropb0\picw328\pich180\picwgoal6560\pichgoal3600\macpict\bliptag1694747234\blipupi72{\*\blipuid 6503ca6293b682b70a3dbf896eedd9b2}0ca10000000000b401481101a00082a0008e01000a0000000002d0024098002a0000000000b401480000000000b401480000000000b40148000102d70002d70007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0012033ffc0007f3ff04fc1cfffe7ff0ff01fc0012033ffc0007f3ff04fc1cfffe7ff0ff01fc0012033ffcffe7f3ff04fcfffffe7ff0ff01fc0012033ffcffe7f3ff04fcfffffe7ff0ff01fc0012033ffcffe7f3ff04fcf8e0f07ff0ff01fc0012033ffcffe7f3ff04fcf8e0f07ff0ff01fc0012033ffcffe7f3ff04fc3ce6667ff0ff01fc0012033ffcffe7f3ff04fc3ce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffc0007f3ff04fcf866707ff0ff01fc0012033ffc0007f3ff04fcf866707ff0ff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc00070030da00010c00070030da00010c00070030da00010c00070030da00010c000c0030fc00003fe1ff02c00c000c0030fc00003fe1ff02c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000e063001f18000c030e10002c00c000e063001f18000c030e10002c00c000e063001800000c030e10002c00c000e063001800000c030e10002c00c000e063001838f87cc30e10002c00c000e063001838f87cc30e10002c00c000e063001e18cccc030e10002c00c000e063001e18cccc030e10002c00c000e063001818cccc030e10002c00c000e063001818cccc030e10002c00c000e063001818cccc030e10002c00c000e063001818cccc030e10002c00c000e06300183ccc7cc30e10002c00c000e06300183ccc7cc30e10002c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000c0030fc00003fe1ff02c00c000c0030fc00003fe1ff02c00c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000b043003fffff8de00010c000b043003fffff8de00010c00150e30030000186198000e00030c000018e800010c00150e30030000186198000e00030c000018e800010c00150e30030000186198000600030c000018e800010c00150e30030000186198000600030c000018e800010c00150e30030000186d9f0f060f036c78d8f8e800010c00150e30030000186d9f0f060f036c78d8f8e800010c00150e30030000186d99998619836ccce198e800010c00150e30030000186d99998619836ccce198e800010c00150e30030000186d9999861f836cccc198e800010c00150e30030000186d9999861f836cccc198e800010c00150e300300001833199986180198ccc198e800010c00150e300300001833199986180198ccc198e800010c00160f300300001833198f0f0f019878c0f980e900010c00160f300300001833198f0f0f019878c0f980e900010c000b043003fffff8de00010c000b043003fffff8de00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000b043003fffff8de00010c000b043003fffff8de00010c00120530030000181efa0002018006e900010c00120530030000181efa0002018006e900010c001005300300001833f9000006e800010c001005300300001833f9000006e800010c0018113003000018301f1e1e01e1e3e1e38f8e318feb00010c0018113003000018301f1e1e01e1e3e1e38f8e318feb00010c00191230030000183033303303033333018606319980ec00010c00191230030000183033303303033333018606319980ec00010c001912300300001830331e3f01e3f331e186061b1f80ec00010c001912300300001830331e3f01e3f331e186061b1f80ec00010c001811300300001833330330003303303186c61b18eb00010c001811300300001833330330003303303186c61b18eb00010c00191230030000181e1f1e1e01e1e331e3c38f0e0f18ec00010c00191230030000181e1f1e1e01e1e331e3c38f0e0f18ec00010c000b043003fffff8de00010c000b043003fffff8de00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000b043003fffff8de00010c000b043003fffff8de00010c001207300300001861980ced000038f600010c001207300300001861980ced000038f600010c001308300300001861980030ee000018f600010c001308300300001861980030ee000018f600010c00231c30030000186d9f1c7c3c3c7c3e3c3c03c3cfe3e1f363c3c03c3e663e18f600010c00231c30030000186d9f1c7c3c3c7c3e3c3c03c3cfe3e1f363c3c03c3e663e18f600010c00210a30030000186d998c306660fd660806666db33333866600fd660018f600010c00210a30030000186d998c306660fd660806666db33333866600fd660018f600010c00231830030000186d998c307e3c6666607e06066db3333307e3c07efe660018f600010c00231830030000186d998c307e3c6666607e06066db3333307e3c07efe660018f600010c00230a300300001833198c366006fe660a6006666db3333306006060fe660018f600010c00230a300300001833198c366006fe660a6006666db3333306006060fe660018f600010c002418300300001833199e1c3c3c7c3e3c3c03c3cdb3e1f303c3c03cfe3e013c60f700010c002418300300001833199e1c3c3c7c3e3c3c03c3cdb3e1f303c3c03cfe3e013c60f700010c0017043003fffff8fb000060fb000003fb000006f300010c0017043003fffff8fb000060fb000003fb000006f300010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000e033000007ff8ff00c0e700010c000e033000007ff8ff00c0e700010c000e0330000f80f800003ee700010c000e0330000f80f800003ee700010c001402300078f7ff01e3c0fc00f9ff00c0f600010c001402300078f7ff01e3c0fc00f9ff00c0f600010c0018033000e780f800013ce0fd00010780fa000078f600010c0018033000e780f800013ce0fd00010780fa000078f600010c0016023001dcf700010770fd00001cf900000ef600010c0016023001dcf700010770fd00001cf900000ef600010c0021093003b8003e3000181180fe000103b8fd000238001efd00021c0007f600010c0021093003b8003e3000181180fe000103b8fd000238001efd00021c0007f600010c00210e3003b800300000181980000c0003b8fd0002380033fd00020c0007f600010c00210e3003b800300000181980000c0003b8fd0002380033fd00020c0007f600010c00220e3003b8003071f0f81d8f199f0003b8fd00093800301f3e1e1e0c0007f600010c00220e3003b8003071f0f81d8f199f0003b8fd00093800301f3e1e1e0c0007f600010c00210e3003b8003c3199981f998f0c0003b8fd0002380030fd33020c0007f600010c00210e3003b8003c3199981f998f0c0003b8fd0002380030fd33020c0007f600010c00220e3003b800303199981b9f860c0003b8fd00093800303333303f0c0007f600010c00220e3003b800303199981b9f860c0003b8fd00093800303333303f0c0007f600010c00210e3003b8003031999819980f0d8003b8fd00013800fd3303300c0007f600010c00210e3003b8003031999819980f0d8003b8fd00013800fd3303300c0007f600010c00220e3003b800307998f8188f19870003b8fd000438001e1f33fe1e010007f600010c00220e3003b800307998f8188f19870003b8fd000438001e1f33fe1e010007f600010c0016023003b8f7000103b8fd000038f9000007f600010c0016023003b8f7000103b8fd000038f9000007f600010c0016023001dcf700010770fd00001cf900000ef600010c0016023001dcf700010770fd00001cf900000ef600010c0018033000e780f800013ce0fd00010780fa000078f600010c0018033000e780f800013ce0fd00010780fa000078f600010c001402300078f7ff01e3c0fc00f9ff00c0f600010c001402300078f7ff01e3c0fc00f9ff00c0f600010c000e0330000f80f800003ee700010c000e0330000f80f800003ee700010c000e033000007ff8ff00c0e700010c000e033000007ff8ff00c0e700010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c0007003fdaff01fc0007003fdaff01fc0002d70002d700a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-6:  A Typical Use of Check Box Controls\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Listing 13-7 shows a typical resources for a check box control.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{10,20,0,0\},                       /* control Rect */\par    CheckControl \{\{\par       $0000,                          /* flags */\par       $3002,                          /* more flags */\par       0,                              /* refcon */\par       1001,                           /* Title Ref */\par       0,                              /* initial value */\par       0,                              /* color table */\par       \{'3','#',0,0\}                   /* key equivalents */\par       \}\};\par    \};\par \par resource rPString (1001) \{"Check Here"\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 13-7:  A Typical Check Box Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This looks a lot like the the resource for a radio button, and it is.  The only difference, other than the fact that you specify }{\f6\fs20 CheckControl}{\f4  instead of }{\f6\fs20 RadioControl}{\f4 , is that there is no family number.  Here\rquote s the official list of flags, just for completeness, though:\par \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\widctlpar\adjustright {\f4 7\tab 0 for a visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 6-0\tab Reserved; set to 0.\par \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 15-14\tab Reserved; set to 0.\par 13\tab Set this bit to 1 if the button has a keystroke equivalent.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-4\tab Reserved; set to 0.\par 3-2\tab Defines the type of reference in the color table field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 1-0\tab Defines the type of reference in the title field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Title reference is a pointer.\par 01\tab Title reference is a handle.\par 10\tab Title reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 13-4:  Start with the solution to Problem 13-3.  Add a check box labeled \ldblquote Sound On.\rdblquote   When the program starts, the control should be selected (i.e. there should be an X in the box).  When this control is not selected, the simple buttons that call }{\f6\fs20 SysBeep}{\f4  shouldn\rquote t make any sound.\par This control should not have a key equivalent, so the last two parameters (the color table and key equivalents parameters) should be left off.  Be sure you check the flag words, too \endash  bit 13 of }{\f6\fs20 moreFlags}{\f4  should be clear!\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1084{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag1592869429\blipupi72{\*\blipuid 5ef14235c144b854b247d2e1b85ed6e7}187a00000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00b003cbd000030f7000103c00b003cbd000030f7000103c00b003cbd00003cf7000103c00b003cbd00003cf7000103c00b003cbd00003ff7000103c00b003cbd00003ff7000103c00c003cbd00013fc0f8000103c00c003cbd00013fc0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffff8000103c00c003cbd00013ffff8000103c00c003cbd00013cf0f8000103c00c003cbd00013cf0f8000103c00b003cbc00003cf8000103c00b003cbc00003cf8000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-7:  Control Sampler with Check Box\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk70}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 check box control}{\rxe bk70}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Scroll Bars}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Scroll Bars\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk71}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Scroll bars are most commonly used to scroll through a document, but that\rquote s not their only use.  You can use a scroll bar any time you want to allow a smooth range of choices.  The position of the window in a document is one case where you have a smooth range of choices, but so is selecting the intensity of a color or picking a scrap from a bunch of choices in a scrap book.\par Setting up a scroll bar isn\rquote t that much different from setting up any other control.  Here\rquote s the resource and flags for a typical scroll bar control:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{10,10,20,100\},                    /* control Rect */\par    scrollControl \{\{\par       $001C,                          /* flags */\par       $1000,                          /* more flags */\par       0,                              /* refcon */\par       16,                             /* document size */\par       1,                              /* view size */\par       0,                              /* initial value */\par       0                               /* color table */\par       \}\};\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 13-8:  A Typical Scroll Bar Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 7\tab 0 for a visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 6-5\tab Reserved; set to 0.\par 4\tab 0 for a vertical scroll bar, 1 for a horizontal scroll bar.\par 3\tab Set to 1 if the scroll bar should have a right arrow, or zero if there is no right arrow.  The Control Manager ignores this flag for vertical scroll bars.\par 2\tab Set to 1 if the scroll bar should have a left arrow, or zero if there is no left arrow.  The Control Manager ignores this flag for vertical scroll bars.\par 1\tab Set to 1 if the scroll bar should have a down arrow, or zero if there is no down arrow.  The Control Manager ignores this flag for horizontal scroll bars.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 0\tab Set to 1 if the scroll bar should have an up arrow, or zero if there is no up arrow.  The Control Manager ignores this flag for horizontal scroll bars.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-4\tab Reserved; set to 0.\par 3-2\tab Defines the type of reference in the color table field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 1-0\tab Reserved; set to 0.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The color table is optional, so you can leave that parameter off if you like.\par As you can see, you can define a scroll bar with or without arrows, and the size of the scroll bar is completely under your control.  It\rquote s possible, for example, to create a short, fat vertical scroll bar, rather than the tall thin one you are used to.\par There are three new parameters in this control that you haven\rquote t seen before; they are used to control the value, or position, of the scroll bar.  To understand how the scroll bar handles positions, let\rquote s think of it as it\rquote s used to scroll through a document.  There are three parameters that control what the scroll bar looks like.  The first is the size of the document, which is set to 16 in Listing 13-8.  That tells us that the scroll bar can represent up to 16 different values.  You might use the number of lines in a document, the number of pages, or even some fixed value that\rquote s used like a percentage.  There are tool calls to read and write this value, so you can change the value as the size of the document changes.  We\rquote ll look at those a bit later.\par The initial value tells the Control Manager where the thumb is at.  As the scroll bar is used, or as the program scrolls a document for some other reason, this value is updated.  As you\rquote ll see when we start looking at the calls that deal with the scroll bar, this value can be changed either by your program or by the Control Manager, so you will need to be able to read and write the value after the control exists.\par Finally, scroll bars on the Apple II}{\f4\fs20 GS}{\f4  change size based on the relative size of the document and the display area.  If the window can show half of a document, the scroll bar\rquote s thumb fills half of the space between the scroll bar arrows.  If the window can only display a quarter of the document, the thumb only fills a quarter of the scroll bar.  At some point, the thumb reaches its smallest size and doesn\rquote t shrink any more, but for a lot of applications, the variable size thumb is pretty cool.  The view size is used to set the thumb size.  The ratio of the view size to the document size should be the same as the ratio between the amount of information the window can display and the size of the entire document.\par Creating a scroll bar is a lot like creating any other control, but using one is a very different.  The reason for the difference is that scroll bars need to do five different things, depending on where the mouse is pressed.  There are several ways to handle a scroll bar control, but the easiest is to set up a scroll bar action procedure, then tell the Control Manager to call your scroll bar action procedure whenever the user presses on the scroll bar.  The }{\f6\fs20 SetCtlAction}{\f4  call is used to tell the Control Manager (in conjunction with }{\f6\fs20 TaskMaster}{\f4 ) to call your action procedure; a typical call looks like this:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlHandleFromID}}}{\v\f4 \par }{\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetCtlAction}}}{\v\f4 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SetCtlAction((LongProcPtr) ScrollAction, GetCtlHandleFromID(wPtr, ctlID));\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first parameter is the address of the action procedure; we\rquote ll talk more about the action procedure in a moment.  The second parameter is the handle for the control.  Since you know the control ID, not the control handle, you need to call }{\f6\fs20 GetCtlHandleFromID}{\f4  to get the handle.  You\rquote ve seen that call once before, but to refresh your memory, you pass a pointer to the window containing the control and the control ID, and }{\f6\fs20 GetCtlHandleFromID}{\f4  returns the control handle.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Your action procedure looks and works a lot like a window update procedure.  It\rquote s called from the tools, so you need to use the databank pragma to switch to the program\rquote s data bank.  The scroll bar action procedure has two parameters.  The first is an integer part number, and the second is the control handle.  You\rquote ll need to do different things based on what part of the scroll is being used; here\rquote s the part codes that can be returned for a scroll bar control.  These definitions are straight out of the Control Manager interface files for ORCA/C, so you can (and should) use the names instead of the numbers.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 #define upArrow 0x0005\par #define downArrow 0x0006\par #define pageUp 0x0007\par #define pageDown 0x0008\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define thumb 0x0081\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If you look at the part codes, you can see that there\rquote s a clear definition for up and down arrows.  Of course, not all scroll bars are vertical.  For horizontal scroll bars, \ldblquote up\rdblquote  means left, and \ldblquote down\rdblquote  means right.\par Listing 13-9 shows a sample action procedure.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * ScrollAction\par *\par * Scroll bar action procedure\par *\par * Parameters:\par *    part - scroll bar part code\par *    ctlHandle - scroll bar handle\par *\par ***************************************************************/\par \par #pragma databank 0\par \par pascal void ScrollAction (int part, CtlRecHndl ctlHandle)\par \par \{\par #define pageSize 4                  /* size of a page */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #define maxPos 15                   /* max position for the scroll bar */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 int value, oldValue;                /* control value */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 unsigned long ctlID;                /* control ID */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 value = GetCtlValue(ctlHandle);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 oldValue = value;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 switch (part) \{\par    case upArrow:        --value;                                      break;\par    case downArrow:      ++value;                                      break;\par    case pageUp:         value -= pageSize;                            break;\par    case pageDown:       value += pageSize;                            break;\par    case thumb:          value = oldValue; oldValue = value-1;         break;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 if (value < 0)\par    value = 0;\par else if (value > maxPos)\par    value = maxPos;\par if (value != oldValue) \{\par    SetCtlValue(value, ctlHandle);\par    /* do any action to update the thing being scrolled here */\par    \}\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 13-9:  A Sample Scroll Bar Action Procedure\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetCtlValue}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As you can see, it\rquote s up to the action procedure to decide how far the scroll bar should be moved, and then to actually call }{\f6\fs20 SetCtlValue}{\f4  to move the scroll bar.  You can (and should) also do anything you need to to update the document, or whatever it is you are scrolling, from inside of the action procedure.  You should not just invalidate the effected rectangle, since the scroll bar can be used to scroll continuously by pressing the mouse button on an arrow or in the page area, and when that happens, your scroll action procedure is called continuously, too, without ever returning to the event loop.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In general, you\rquote ll use a single }{\f6\fs20 ScrollAction}{\f4  function to handle several different scroll bars.  Since you get the control handle, but no the control ID, you need some way of switching between the two.  }{\f6\fs20 GetCtlID}{\f4  takes the control handle as a parameter and returns the control ID.  It\rquote s the inverse of a call you\rquote ve already seen, }{\f6\fs20 GetCtlHandleFromID}{\f4 , which takes the control ID as a parameter and returns the control handle.\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 id = GetCtlID(ctlHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Scroll bar controls have one other problem to deal with on occasion, too: they change size.  If you are looking at the middle of a text document, then paste in a chunk of text that is half the size of the whole document, you\rquote re not at the middle anymore \endash  you\rquote re 1/3 of the way down.  The position of the thumb needs to change to reflect that.  The size of the thumb may change, too, since the size of the page relative to the whole document has changed, and the thumb\rquote s size reflects that proportion until the document is so large that the thumb would have to shrink too much to stay in the correct proportion.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SetCtlParams}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GetCtlParams}}}{\v\f6\fs20 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Changing the scroll bar control\rquote s value changes the position of the thumb.  To change the size of a page or the size of the document, you need to use }{\f6\fs20 SetCtlParams}{\f4 .  This call takes the document size (or data size) as the first parameter and the page size as the second.  If you only want to change one of the values, you can pass -1 for the other.  Here\rquote s a typical call, setting the view size to 10 and the data size to 100:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 SetCtlParams(100, 10, ctlHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If you need to read the value for some reason, use }{\f6\fs20 GetCtlParams}{\f4 .\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 parms = GetCtlParams(ctlHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The two values are returned in a long integer, so you have to pull them apart, but you\rquote re probably getting pretty used to that by now.  The view size is in the most significant word; the least significant word holds the data size.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 13-5:  In this problem, you\rquote ll add a color mixer to the control sampler we\rquote ve been creating in this lesson.\par Start with the solution to Problem 13-4.  Add three horizontal scroll bars, and use static text controls to label them Red, Green and Blue.  Set a document size of 16 for each scroll bar and a view size of 1.  The Control Manager allows the scroll bar to scroll from a position of 0 to the data size minus the page size, so this gives positions ranging from 0 to 15.  Assume a page has a size of 1, too.  That\rquote s unusual, but since our \ldblquote document\rdblquote  is basically the 16 possible values for the red, green, and blue color guns of the CRT, it doesn\rquote t make much sense to move by anything larger than 1.\par Just to the left of the scroll bars, which should be stacked on top of each other, create a rectangle with a black outline and an interior that is filled with some unused color.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetCtlValue}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As part of initializing the program, set the color table entry for the color you\rquote ve used to fill the rectangle to black \endash  that would be $0 for all three colors.  Set the position for the scroll bars to 0 using }{\f6\fs20 SetCtlValue}{\f4 , too.\par Whenever the value of one of the scroll bars changes, adjust the color table entry appropriately.  The result is a simple but effective color mixer.\par \par }\pard \fi-1800\li1800\ri1080\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1085{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\b\f4 \tab Tip}{\f4 \tab You can use }{\f6\fs20 SetColorTable}{\f4  and }{\f6\fs20 GetColorTable}{\f4  to change the color table, but it would be easier to use }{\f6\fs20 SetColorEntry}{\f4  and }{\f6\fs20 GetColorEntry}{\f4 .  We haven\rquote t discuss those calls in the course, and won\rquote t \endash  but it would be good practice to find out about the calls by looking in the toolbox reference manuals, figuring out how to use them on your own.  They are also documented in Appendix A.\~\~}{{\pict{\*\picprop\shplid1086{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\b\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1087{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag1156045208\blipupi72{\*\blipuid 44e7d9986538e56ae48d123a9bbbd572}1f7800000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c012033c00003ff9ff00c0f300e8ffe5000103c012033c00003ff9ff00c0f300e8ffe5000103c025033c00003af9aa02c00ffcfe00000ff90003c000c000f333063ffffc000c0003e5000103c025033c00003af9aa02c00ffcfe00000ff90003c000c000f333063ffffc000c0003e5000103c025033c00003af9aa02c00f0ffe00000ff90004c003c0003cf3cc05003c000f0003e5000103c025033c00003af9aa02c00f0ffe00000ff90004c003c0003cf3cc05003c000f0003e5000103c025033c00003af9aa06c00f0f03fc03fff90003c00cffc0f333063c003c0ffcc003e5000103c025033c00003af9aa06c00f0f03fc03fff90003c00cffc0f333063c003c0ffcc003e5000103c023033c00003af9aa02c00ffcfd0ff90004c03000c03cf3cc05003c0c003003e5000103c023033c00003af9aa02c00ffcfd0ff90004c03000c03cf3cc05003c0c003003e5000103c025033c00003af9aa06c00f3c0fff0f0ff90003c0c000c0f333063c003c0c000c03e5000103c025033c00003af9aa06c00f3c0fff0f0ff90003c0c000c0f333063c003c0c000c03e5000103c025033c00003af9aa00c0fe0f02000f0ff90004c03000c03cf3cc05003c0c003003e5000103c025033c00003af9aa00c0fe0f02000f0ff90004c03000c03cf3cc05003c0c003003e5000103c025033c00003af9aa06c00f0f03fc03fff90003c00cffc0f333063c003c0ffcc003e5000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000125033c00003af9aa06c00f0f03fc03fff90003c00cffc0f333063c003c0ffcc003e5000103c01f033c00003af9aa00c0f30004c003c0003cf3cc05003c000f0003e5000103c01f033c00003af9aa00c0f30004c003c0003cf3cc05003c000f0003e5000103c01f033c00003af9aa00c0f30003c000c000f333063ffffc000c0003e5000103c01f033c00003af9aa00c0f30003c000c000f333063ffffc000c0003e5000103c012033c00003af9aa00c0f300e8ffe5000103c012033c00003af9aa00c0f300e8ffe5000103c00e033c00003af9aa00c0be000103c00e033c00003af9aa00c0be000103c012033c00003af9aa00c0f300e8ffe5000103c012033c00003af9aa00c0f300e8ffe5000103c024033c00003af9aa02c003fcf50003c000c000f73301fffffd33043c000c0003e5000103c024033c00003af9aa02c003fcf50003c000c000f73301fffffd33043c000c0003e5000103c025033c00003af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc03000f0003e5000103c025033c00003af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc03000f0003e5000103c02c033c00003af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33043c0ffcc003e5000103c02c033c00003af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33043c0ffcc003e5000103c029033c00003af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc030c003003e5000103c029033c00003af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc030c003003e5000103c02c033c00003af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33043c0c000c03e5000103c02c033c00003af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33043c0c000c03e5000103c02d033c00003af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc030c003003e5000103c02d033c00003af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc030c003003e5000103c02c033c00003af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33043c0ffcc003e5000103c02c033c00003af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33043c0ffcc003e5000103c023033c00003af9aa00c0f30004c003c0003cf9cc02cf000cfccc03000f0003e5000103c023033c00003af9aa00c0f30004c003c0003cf9cc02cf000cfccc03000f0003e5000103c022033c00003af9aa00c0f30003c000c000f73301fffffd33043c000c0003e5000103c022033c00003af9aa00c0f30003c000c000f73301fffffd33043c000c0003e5000103c012033c00003af9aa00c0f300e8ffe5000103c012033c00003af9aa00c0f300e8ffe5000103c00e033c00003af9aa00c0be000103c00e033c00003af9aa00c0be000103c012033c00003af9aa00c0f300e8ffe5000103c012033c00003af9aa00c0f300e8ffe5000103c024033c00003af9aa04c00ffc03f0f70006c000c0003ffff3f433043c000c0003e5000103c024033c00003af9aa04c00ffc03f0f70006c000c0003ffff3f433043c000c0003e5000103c023033c00003af9aa04c00f0f00f0f70006c003c0003c003cf3cc03000f0003e5000103c023033c00003af9aa04c00f0f00f0f70006c003c0003c003cf3cc03000f0003e5000103c027033c00003af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333043c0ffcc003e5000103c027033c00003af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333043c0ffcc003e5000103c025033c00003af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc030c003003e5000103c025033c00003af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc030c003003e5000103c027033c00003af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333043c0c000c03e5000103c027033c00003af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333043c0c000c03e5000103c025033c00003af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc030c003003e5000103c025033c00003af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc030c003003e5000103c027033c00003af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333043c0ffcc003e5000103c027033c00003af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333043c0ffcc003e5000103c01f033c00003af9aa00c0f30006c003c0003c003cf3cc03000f0003e5000103c01f033c00003af9aa00c0f30006c003c0003c003cf3cc03000f0003e5000103c020033c00003af9aa00c0f30006c000c0003ffff3f433043c000c0003e5000103c020033c00003af9aa00c0f30006c000c0003ffff3f433043c000c0003e5000103c012033c00003ff9ff00c0f300e8ffe5000103c012033c00003ff9ff00c0f300e8ffe5000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00b003cbd000030f7000103c00b003cbd000030f7000103c00b003cbd00003cf7000103c00b003cbd00003cf7000103c00b003cbd00003ff7000103c00b003cbd00003ff7000103c00c003cbd00013fc0f8000103c00c003cbd00013fc0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffff8000103c00c003cbd00013ffff8000103c00c003cbd00013cf0f8000103c00c003cbd00013cf0f8000103c00b003cbc00003cf8000103c00b003cbc00003cf8000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-8:  Control Sampler with Scroll Bars\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 13-6:  In Problem 12-2 you created a scrapbook that used two menu items to scroll back and forth through a list of scraps.  Get rid of the menu and add a scroll bar near the bottom of the window, using the scroll bar to move among the various scraps.  Use }{\f6\fs20 FrameRect}{\f4  to draw a box in the window, and draw the scrap inside of the box.\par Make sure your program keeps track of the data size and view size, setting the scroll bar\rquote s parameters accordingly.  You should see the thumb size change as you cut or paste scraps, and you should be able to scroll through all of the scraps.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1088{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw408\pich252\picwgoal8160\pichgoal5040\macpict\bliptag1768272642\blipupi72{\*\blipuid 6965b302afb32d0939e3aac5961d560c}0c4a0000000000fc01981101a00082a0008e01000a0000000002d002409800340000000000c801980000000000c801980000000000c80198000102cd0002cd0007003fd0ff01fc0007003fd0ff01fc00070030d000010c00070030d000010c00070030d000010c00070030d000010c001c0333f3fff9f3ff02f003c0fe00080f80000c003003c01ff0ff01cc001c0333f3fff9f3ff02f003c0fe00080f80000c003003c01ff0ff01cc001a0330030018f200010660fe00070cc0000c00f004c0ef00010c001a0330030018f200010660fe00070cc0000c00f004c0ef00010c001c0333f30019f3ff0ef00603c6c7cf8cc7878cc0300cc01ff0ff01cc001c0333f30019f3ff0ef00603c6c7cf8cc7878cc0300cc01ff0ff01cc001a0330030018f2000c03c6670ccccf8ccccd80300cc0ef00010c001a0330030018f2000c03c6670ccccf8ccccd80300cc0ef00010c001b0333f30019f3ff04f00066060cfdcc05cf00300cc01ff0ff01cc001b0333f30019f3ff04f00066060cfdcc05cf00300cc01ff0ff01cc00190330030018f200030666660cfdcc04cd80300c80ef00010c00190330030018f200030666660cfdcc04cd80300c80ef00010c001c0333f3fff9f3ff0ef003c3c607cf8f87878cc0fccf001ff0ff01cc001c0333f3fff9f3ff0ef003c3c607cf8f87878cc0fccf001ff0ff01cc000b0030eb00000ce700010c000b0030eb00000ce700010c00070030d000010c00070030d000010c0007003fd0ff01fc0007003fd0ff01fc00070030d000010c00070030d000010c00070030d000010c00070030d000010c000901303fd2ff02fc0c000901303fd2ff02fc0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c000f07303001f980c00030d800020c0c000f07303001f980c00030d800020c0c0013043030006180fb0003c00000c0df00020c0c0013043030006180fb0003c00000c0df00020c0c00160e30300061f1c3c070f00f81f0f0f1f0df00020c0c00160e30300061f1c3c070f00f81f0f0f1f0df00020c0c00160e3030006198c60031801980c19980c0df00020c0c00160e3030006198c60031801980c19980c0df00020c0c00160e3030006198c3c030f01980c1f8f0c0df00020c0c00160e3030006198c3c030f01980c1f8f0c0df00020c0c00160e3030006198c06030181980d98018d8df00020c0c00160e3030006198c06030181980d98018d8df00020c0c00170f3030006199e3c078f00f8070f0f07180e000020c0c00170f3030006199e3c078f00f8070f0f07180e000020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0098003400c8000000fc019800c8000000fc019800c8000000fc0198000109013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c0009013030d200020c0c000901303fd2ff02fc0c000901303fd2ff02fc0c00070030d000010c00070030d000010c00070030d000010c00070030d000010c000901300fd2ff02f00c000901300fd2ff02f00c001304300c00e007edff00f5ed5505e00e00300c001304300c00e007edff00f5ed5505e00e00300c001405300c036007c0ee000035ed5505e00d80300c001405300c036007c0ee000035ed5505e00d80300c001405300c0c7fc7c0ee000035ed5505e7fc60300c001405300c0c7fc7c0ee000035ed5505e7fc60300c001405300c3000c7c0ee000035ed5505e60018300c001405300c3000c7c0ee000035ed5505e60018300c001405300cc000c7c0ee000035ed5505e60006300c001405300cc000c7c0ee000035ed5505e60006300c001405300c3000c7c0ee000035ed5505e60018300c001405300c3000c7c0ee000035ed5505e60018300c001405300c0c7fc7c0ee000035ed5505e7fc60300c001405300c0c7fc7c0ee000035ed5505e7fc60300c001405300c036007c0ee000035ed5505e00d80300c001405300c036007c0ee000035ed5505e00d80300c001304300c00e007edff00f5ed5505e00e00300c001304300c00e007edff00f5ed5505e00e00300c000901300fd2ff02f00c000901300fd2ff02f00c00070030d000010c00070030d000010c00070030d000010c00070030d000010c00070030d000010c00070030d000010c0007003fd0ff01fc0007003fd0ff01fc0002cd0002cd00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 13-9:  Scrapbook With Scroll Bar\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk71}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar control}{\rxe bk71}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Grow Box}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Grow Box\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk72}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The grow box control is almost always used to change the size of a window, although it is technically possible to use it inside a window, just like any other control.  Defining a grow box is very similar to defining the other simple controls.  Here\rquote s a typical resource, followed by the definitions for the flag words:\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{90,90,10,10\},                     /* control Rect */\par    growControl \{\{\par       $0001,                          /* flags */\par       $1000,                          /* more flags */\par       0,                              /* refcon */\par       0                               /* color table */\par       \}\};\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 Listing 13-10:  A Typical Scroll Bar Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 7\tab 0 for a visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 6-1\tab Reserved; set to 0.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 0\tab Set this bit to 1 if the grow control is being used to resize a window.  This tells the Control Manager to draw a window outline as the user drags the control around, and to change the size of the window when the control is released.  Set this bit to 0 if you will do all of the tracking manually.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-4\tab Reserved; set to 0.\par 3-2\tab Defines the type of reference in the color table field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 1-0\tab Reserved; set to 0.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Setting bit 0 of the flags word tells the Control Manager to make all of the appropriate calls to handle changing the size of a window.  An outline of the window with the new size is shown, and changes as the mouse moves.  When the mouse is released, the size of the window is changed.\par I\rquote m not going to assign a problem involving the grow box, since it\rquote s not that different from other controls, and it\rquote s generally created and handled for you as a part of something else \endash  like a set of }{\f6\fs20 TaskMaster}{\f4  controlled scroll bars and grow box, or as part of a TextEdit control.  If you would like to experiment with the control, I\rquote d suggest using a program with a single window, placing the control at the bottom right of the window and using it to change the window\rquote s size.\par {\*\bkmkend bk72}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 grow box control}{\rxe bk72}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson introduced controls, showing how to use some of the basic control types.  You learned about simple buttons, radio buttons, check boxes, static text, scroll bars, and grow boxes.  In addition to using the controls individually, you also learned how to set up and use your own scroll bars and grow box for a document window.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 GetColorEntry\tab GetCtlID\tab GetCtlParams\tab GetCtlValue\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 SetColorEntry\tab SetCtlAction\tab SetCtlParams\tab SetCtlValue\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rControlList\tab rTextForLETextBox2\par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 14 - Controls, Part 2}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 14 \endash  Controls, Part 2}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 14 \endash  Controls, Part 2\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson is a continuation of the last one.  In this lesson you will learn how to create and use several kinds of controls, including rectangles, thermometers, icon buttons, pictures, pop-up menus, lists, and edit line controls.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Rectangles}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Rectangles\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk73}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Rectangle controls are usually used as dividers or boxes in a complicated dialog.  A thin rectangle can be used as a dividing line.  You can also make it look like a control or text item is \ldblquote poked through\rdblquote  the edge of the rectangle by putting the rectangle after the other controls in the control list.  This takes advantage of the fact that controls are drawn in the opposite order of their appearance in the control list to draw some other control over the top of the rectangle control.\par Here\rquote s a typical resource for a rectangle control, followed by the definitions for the flag words:\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{8,8,22,102\},                      /* control Rect */\par    rectangleControl \{\{\par       $0002,                          /* flags */\par       $1000,                          /* more flags */\par       0,                              /* refcon */\par       1;                              /* pen height */\par       2;                              /* pen width */\par       "FFFFFFFFFFFFFFFF",             /* penmask */\par       "FFFFFFFFFFFFFFFF",             /* penpattern */\par       "FFFFFFFFFFFFFFFF",\par       "FFFFFFFFFFFFFFFF",\par       "FFFFFFFFFFFFFFFF",\par       \}\};\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-1:  A Typical Rectangle Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 7\tab 0 for a visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 6-2\tab Reserved; set to 0.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 1-0\tab Control pattern.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Transparent control.  Nothing is drawn, but you can still test for hits in the rectangle.\par 01\tab Gray pattern.\par 10\tab Black pattern\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-0\tab Reserved; set to 0.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The last four parameters in the resource are optional.  If you leave them out, you will get a pen that is one pixel high and two pixels wide.  The pen width you specify is always divided by two if you are using 320 mode.  While the pen width and pen height are both optional, you have to put both in or leave both out \endash  you can\rquote t code the pen height and leave off the pen width.\par The last two bits of the first flag word control the pen pattern.  You can get a transparent control, which draws nothing but can be used to test for a mouse hit; a solid black outline, or a gray outline.  You can also specify the pen pattern and pen mask, which gives you complete control over picking colored edges or complicated patterns.  If you do include a pen pattern and pen mask, you should set the last two bits of the flag word to 10.\par \par Problem 14-1:  Start with your solution to Problem 13-5.  Add a rectangle control around the three scroll bars and colored rectangle to group the color picker controls together, separating them from the other controls.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1089{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag1651800578\blipupi72{\*\blipuid 62747a0274c6ad4eaa3ac5e244a913df}200600000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa000503c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c02d053c00003aaaabfa00050c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0e4000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c038053c00003aaaabfa001930fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd000b300000c00f0f00f00f0f03fce8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c034053c00003aaaabfa000533fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0fe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c039053c00003aaaabfa001030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f00ffe8000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c037053c00003aaaabfa00030c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0fe7000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c039053c00003aaaabfa000903c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe000b03c03c000ffc03fc03ff03fce8000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c01b053c00003aaaabf900013fc0f7000103fcf100013fc0df000103c00c053c00003aaaabb7000103c00c053c00003aaaabb7000103c00c053c00003fffffb7000103c00c053c00003fffffb7000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000126033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c012033c00033af9aa00c0da000030e6000103c012033c00033af9aa00c0da000030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c025033c00033af9aa02c003fcf50003c000c000f73301fffffd33053c000c000330e6000103c025033c00033af9aa02c003fcf50003c000c000f73301fffffd33053c000c000330e6000103c026033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc04000f000330e6000103c026033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc04000f000330e6000103c02d033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33053c0ffcc00330e6000103c02d033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33053c0ffcc00330e6000103c02a033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc040c00300330e6000103c02a033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc040c00300330e6000103c02d033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33053c0c000c0330e6000103c02d033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33053c0c000c0330e6000103c02e033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc040c00300330e6000103c02e033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc040c00300330e6000103c02d033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33053c0ffcc00330e6000103c02d033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33053c0ffcc00330e6000103c024033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc04000f000330e6000103c024033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc04000f000330e6000103c023033c00033af9aa00c0f30003c000c000f73301fffffd33053c000c000330e6000103c023033c00033af9aa00c0f30003c000c000f73301fffffd33053c000c000330e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c012033c00033af9aa00c0da000030e6000103c012033c00033af9aa00c0da000030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00b003cbd000030f7000103c00b003cbd000030f7000103c00b003cbd00003cf7000103c00b003cbd00003cf7000103c00b003cbd00003ff7000103c00b003cbd00003ff7000103c00c003cbd00013fc0f8000103c00c003cbd00013fc0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffff8000103c00c003cbd00013ffff8000103c00c003cbd00013cf0f8000103c00c003cbd00013cf0f8000103c00b003cbc00003cf8000103c00b003cbc00003cf8000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-1:  Rectangle Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par {\*\bkmkend bk73}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangle control}{\rxe bk73}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Thermometers}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Thermometers\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk74}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Thermometers are used to show how far something has progressed.  The most familiar example of a thermometer is the one you see each time you boot your computer.  It\rquote s on the boot screen, and fills up gradually as the computer boots.  Here\rquote s a preview of the thermometer you\rquote ll create in Problem 14-2.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1090{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley48\piccropl0\piccropr0\piccropt0\piccropb0\picw336\pich86\picwgoal6720\pichgoal1720\macpict\bliptag-116674404\blipupi72{\*\blipuid f90bb09ce866bfed0beab4aeb0fec1ed}051f00000000005601501101a00082a0008e01000a0000000002d002d098002a000000000056015000000000005601500000000000560150000102d70002d70006003fd9ff00fc06003fd9ff00fc06003cd900003c06003cd900003c06003cd900003c06003cd900003c08013c0fdbff01f03c08013c0fdbff01f03c08013c0fdbff01f03c08013c0fdbff01f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c18043c0fc000fffe0000fcfc0000fcfc0000f0ef000203f03c18043c0fc000fffe0000fcfc0000fcfc0000f0ef000203f03c18083c0fc003c3c000003cfc00003cfe0000f0ed000203f03c18083c0fc003c3c000003cfc00003cfe0000f0ed000203f03c20183c0fc003c000ffc03c00ff03c3c03c00ffc3ff03f03ff00ffcf3000203f03c20183c0fc003c000ffc03c00ff03c3c03c00ffc3ff03f03ff00ffcf3000203f03c1e093c0fc003c003c3c03c03fec307c03c03c3c0f000f0fd3cf3000203f03c1e093c0fc003c003c3c03c03fec307c03c03c3c0f000f0fd3cf3000203f03c1e143c0fc003c003c3c03c03c003c3c03c03c3c0f000f0fd3cf3000203f03c1e143c0fc003c003c3c03c03c003c3c03c03c3c0f000f0fd3cf3000203f03c20033c0fc003fec302c03c03fec30bc03c03c3c0f3c0f03c3c0ffcf3000203f03c20033c0fc003fec302c03c03fec30bc03c03c3c0f3c0f03c3c0ffcf3000203f03c21173c0fc000ff00ffc0ff00ff00ffc0ff00ffc03f03fc3c3c30fd3cf6000203f03c21173c0fc000ff00ffc0ff00ff00ffc0ff00ffc03f03fc3c3c30fd3cf6000203f03c0f023c0fc0ed00010ff0f3000203f03c0f023c0fc0ed00010ff0f3000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0c033c0fc00fdfff03f003f03c0c033c0fc00fdfff03f003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c10033c0fc00ffaff00c0e700033003f03c0c033c0fc00fdfff03f003f03c0c033c0fc00fdfff03f003f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c0a023c0fc0dd000203f03c08013c0fdbff01f03c08013c0fdbff01f03c08013c0fdbff01f03c08013c0fdbff01f03c06003cd900003c06003cd900003c06003cd900003c06003cd900003c06003fd9ff00fc06003fd9ff00fc02d70002d700a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-2:  A Thermometer Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The resource definition and flags words look like this:\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{8,8,200,16\},                      /* control Rect */\par    thermometerControl \{\{\par       $0001,                          /* flags */\par       $1000,                          /* more flags */\par       0,                              /* refcon */\par       1,                              /* value for pos of mercury */\par       2,                              /* scale for mercury */\par       $00000000,                      /* color table reference */\par       \}\};\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-2:  A Typical Thermometer Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-1\tab Reserved; set to 0.\par }\pard \fi-1800\li2160\ri360\widctlpar\adjustright {\f4 0\tab 0 for a vertical control, 1 for a horizontal control.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-2\tab Reserved; set to 0.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 1-0\tab Defines the type of reference in the color table field.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par As usual, the color table is optional.  The thermometer control is the only one that uses color by default, though.  By default, the control is outlined with a black rectangle, and the \ldblquote mercury\rdblquote  fills in with red in 640 mode, and blue in 320 mode.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetCtlValue}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The thermometer itself is controlled by two fields, labeled }{\f6\fs20 /* value for pos of mercury */}{\f4  and }{\f6\fs20 /* scale for mercury */}{\f4 .  The last of these tells the Control Manager what scale to use, starting at 0.  For example, to show a thermometer based on percent completion, you could use a scale value of 100.  The first value sets the original position of the thermometer, so it is almost always set to 0.  As you complete a task, your program should make calls to }{\f6\fs20 SetCtlValue}{\f4  to change the thermometer setting.\par Let\rquote s look at how this would work in a simple example.  We\rquote ll run the Savage floating-point benchmark, using a thermometer to show how far we\rquote ve progressed.  The Savage benchmark repeatedly adds one to a value, using one of the most complicated ways to increment a number around \endash  but then, the purpose is to do a quick check of how fast floating-point calculations are performed.  The main loop looks like this:\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 sum = 1.0;\par for (i = 1; i <= 250; ++i)\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20    sum = tan(atan(exp(ln(sqrt(sum*sum)))))+1.0;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par To use a thermometer to show the progress, we\rquote d start by drawing a window with a static text item that said something like \ldblquote Calculating...\rdblquote  and a thermometer control.  Since the loop will go from 1 to 250, it makes sense to set the scale to 250, and just use the loop variable }{\f6\fs20 i}{\f4  to set the control value.  Assuming the thermometer control has a control ID of 2, here\rquote s how to modify the loop to show the progress.  (Setting up and removing the window is left as an exercise for the reader \endash  literally.  See Problem 14-2.)\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlHandleFromID}}}{\v\f4 \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 ctlThermo = GetCtlHandleFromID(wPtr, 2);\par sum = 1.0;\par for (i = 1; i <= 250; ++i) \{\par    SetCtlValue(i, ctlHandle);\par    sum = tan(atan(exp(log(sqrt(sum*sum)))))+1.0;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are some things to keep in mind when you are using a thermometer.  The biggest is that updating the control takes time, too, and you don\rquote t want to add significantly to the time it takes to complete an operation by updating the thermometer too often.  The other is that some tasks don\rquote t like to be interrupted.  You may have to be a little creative in some circumstances.  For example, there is no convenient way for the boot code to know how long it will take you to boot your computer, since you can customize the operating system, use a variety of disk drives, and even add accelerator cards, and all of these effect the boot time.  Apple\rquote s programmer\rquote s took a rather pragmatic approach:  the boot code times itself, and writes the time to the disk after you boot.  Since you don\rquote t change the operating system very often, the boot time doesn\rquote t change often, either.  The thermometer itself is updated with an interrupt handler that simply watches the system clock to see how much time has elapsed.\par \par Problem 14-2:  Start with the solution to Problem 14-1.  Add a simple button called Savage.  When this button is pressed, bring up a new window with two controls, a static text control with a title of \ldblquote Calculating...\rdblquote  and a thermometer control, as described in the text.  Update the thermometer as the benchmark runs.\par Try running the benchmark with and without updating the thermometer.  How much of the time is spent calculating, and how much time is spent showing the user how far things have progressed?  Is it worth it?\par You might immediately say, \ldblquote No!\rdblquote   Keep in mind, though, that in a real program the actual wait isn\rquote t nearly as important as the psychological wait.  An interesting example is the amount of time it takes to use the mouse as opposed to the keyboard.  Apple did a study which compared the two, but also asked the people who were being timed which took longer.  The result was interesting:  the people being tested said the keyboard was faster, but the stopwatch disagreed.\par {\*\bkmkend bk74}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 thermometer control}{\rxe bk74}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Icon Buttons}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Icon Buttons\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk75}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 An icon button is basically a simple button control with a picture inside the button instead of the text you are used to for a simple button.  You can also put text under the icon, more or less like a title.\par Icon controls really aren\rquote t very hard to create or use, but there are lots of options.  You can change the type of border, or eliminate it altogether; use text or leave it out; and you have a lot of control over how the icon is drawn.  Icons themselves are not just a picture, and there are a lot of little things you need to know about icons to use them effectively.  We\rquote ll cover all of these options and concepts in this section, but I want to start with a typical resource definition for an icon button, and the bit-by-bit breakdown of the flag words in an icon control.  It\rquote s a little complicated, but don\rquote t get bogged down in the details, yet.  Just skim through the definitions to see where things are, and refer back to this example and the flag words as you read the rest of the section.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{8,8,42,64\},                       /* control Rect */\par    IconButtonControl \{\{\par       $0000,                          /* flags */\par       $1022,                          /* more flags */\par       0,                              /* refcon */\par       1001,                           /* Icon Ref */\par       1001,                           /* Title Ref */\par       0,                              /* color table ref */\par       $0F00,                          /* Display mode */\par       \{"P","p",0,0\}                   /* key equivalents */\par       \}\};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 rIcon resource}}}{\v\f6\fs20 \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rIcon (1001) \{\par    $8000,                        /* Icon Type bit 15  1 = color, 0 = mono */\par    10,                                /* height of icon in pixels */\par    16,                                /* width of icon in pixels */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"AAAAAAAAAAAAAAAA"                /* icon image */\par    $"AAAAAAAAAAAAAAAA"\par    $"AAAAAAAAAAAAAAAA"\par    $"AAAAAAAAAAAAAAAA"\par    $"AAAAAAAAAAAAAAAA"\par    $"AAAAAAAAAAAAAAAA"\par    $"AAAAAAAAAAAAAAAA"\par    $"AAAAAAAAAAAAAAAA"\par    $"AAAAAAAAAAAAAAAA"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"AAAAAAAAAAAAAAAA",\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"FFFFFFFFFFFFFFFF"                /* icon mask */\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"FFFFFFFFFFFFFFFF";\par    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rPString (1001) \{"Icon"\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-3:  A Typical Icon Button Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab These bits set the }{\f6\fs20 ctlHilite}{\f4  field for the control.\par 7\tab 0 for a normal, visible control, 1 for an invisible control.\par 6-3\tab Reserved; set to 0.\par 2\tab 0 for a border, 1 for no border.  The border is an outline around the edge of the button, like the rounded rectangle used on standard simple button controls.\par }\pard \fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 1-0\tab Assuming bit 2 is set, these bits determine the type of border that will be drawn.\par }\pard \fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Normal rounded rectangle.\par 01\tab A bold rounded rectangle.  As with simple buttons, this is a double outline with the outer line a little thicker than the inner line.\par 10\tab Normal square outline.\par }\pard \fi-360\li2880\ri360\widctlpar\adjustright {\f4 11\tab Square outline with a drop shadow.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-6\tab Reserved; set to 0.\par 5-4\tab Defines the type of reference for the field labeled }{\f6\fs20 /* Icon Ref */}{\f4 .\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Icon reference is a pointer.\par 01\tab Icon reference is a handle.\par 10\tab Icon reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 3-2\tab Defines the type of reference in the color table field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 1-0\tab Defines the type of reference for the field labeled }{\f6\fs20 /* Title Ref */}{\f4 .\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Title reference is a pointer.\par 01\tab Title reference is a handle.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 10\tab Title reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 displayMode}{\f4  bits use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-12\tab This is the background color; it is used instead of black for black and white icons.\par 11-8\tab This is the foreground color; it replaces white in black and white icons.\par 7-3\tab Reserved; set to 0.\par 2\tab If this bit is set, the icon image is anded with a gray pattern as it is drawn, giving an \ldblquote unselected\rdblquote  look.  If the bit is clear, the image is not changed.\par 1\tab If this bit is set, a light gray pattern is used instead of the icon image.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 0\tab If this bit is set, the icon image is inverted.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 A Typical Icon Button}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 A Typical Icon Button\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 We\rquote ll start with a fairly typical, general case of the icon button.  Our starting case is a picture with text underneath, surrounded by a rounded rectangle border.  This is actually the same icon button that is defined in Listing 14-3; it\rquote s shown below in Figure 14-3.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1091{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex49\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw104\pich64\picwgoal2080\pichgoal1280\macpict\bliptag-1804719190\blipupi72{\*\blipuid 946e2baaad84a43cd2fc4afa64c35be0}031b00000000004000681101a00082a0008e01000a0000000002d0024098000e000000000040006800000000004000680000000000400068000102f30002f300060000f6ffff00060000f6ffff0009010fc0f8000203f00009010fc0f8000203f00007003ff60001fc0007003ff60001fc0007003cf600013c0007003cf600013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c000d003cfe00000ffdfffe00013c0007003cf600013c000a033c0000fff900013c000a033c0000fff900013c000a033c00003cf900013c000a033c00003cf900013c000f0d3c00003c00ff00ff03ff00003c000f0d3c00003c00ff00ff03ff00003c000d043c00003c03fcc303c0003c000d043c00003c03fcc303c0003c000f063c00003c03c003fec303c0003c000f063c00003c03c003fec303c0003c000d043c00003c03fcc303c0003c000d043c00003c03fcc303c0003c000f0d3c0000ff00ff00ff03c3c0003c000f0d3c0000ff00ff00ff03c3c0003c0007003cf600013c0007003cf600013c0007003cf600013c0007003cf600013c0007003cf600013c0007003cf600013c0007003ff60001fc0007003ff60001fc0009010fc0f8000203f00009010fc0f8000203f000060000f6ffff00060000f6ffff0002f30002f300a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-3:  A Typical Icon Button\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This icon button shows the three parts of an icon button: the border, the icon, and the text.  Two of these parts are optional; you can leave out the border or the text.  When the user clicks inside the icon rectangle, the icon button switches to a highlighted state, then switches back when the mouse is released, just like a simple button control.  The hit is reported the same way as a simple button control, too.\par Besides the three visible parts of the icon, you also need to specify the icon rectangle.  If you are using a border, the border will be drawn right inside of the rectangle.  The rectangle is important even if you aren\rquote t using a border, though, since it is used to position the icon and text.  To do that, the Control Manager starts by positioning the text right below the icon, forming a \ldblquote super icon.\rdblquote   The resulting picture is centered in the rectangle.  Of course, the icon and text can be larger than the rectangle, and in that case they will overflow.  That causes all sorts of unsightly things to happen, though.  The three most severe are that the entire control isn\rquote t erased if you hide the control, only the part inside the rectangle; if the user clicks on a part of the icon that is outside of the rectangle, the button doesn\rquote t work; and when the button is inverted, only the part inside the rectangle is changed.  In short, it pays to make sure the control rectangle is large enough to hold the icon and text, even if you aren\rquote t using a border.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Controlling the Outline}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Controlling the Outline\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The least significant three bits of the flags word controls the border.  If bit 2 is clear (i.e. set to 0) there won\rquote t be a border at all, and bits 0 and 1 are ignored.  If bit 2 is set, bits 0 and 1 control the style of the border.  You get the same four styles that were available for a simple button, namely a rounded rectangle (the bits would be 100), a bold rounded rectangle (bits 101), a square button (bits 110) or a square button with a drop shadow (bits 111).\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Title}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Title\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The title for the icon button is specified as a p-string.  Using resources, the easiest way to create a title is with an }{\f6\fs20 rPString}{\f4  resource, like the one you saw in the icon button example at the start of this section.\par The title becomes a part of the icon button, centered just below the icon itself.  That\rquote s not always what you want, since text inside of the icon button can ruin the effect of a picture used as a button.  To get rid of the title entirely, use 00 for bits 4 and 5 of the }{\f6\fs20 moreFlags}{\f4  field, then use 0 for the }{\f6\fs20 /* Title Ref */}{\f4  field.  This tells the Control Manager that the title reference is a pointer, then passes }{\f6\fs20 NULL}{\f4  as the pointer.  The title itself will vanish, and the icon will be centered in the control rectangle.  You can use a static text control right below the icon for a title-like effect where the text doesn\rquote t become a part of the button itself.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Icons and Icon Masks}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Icons and Icon Masks\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 icon mask}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you look closely at Listing 14-3, you will see that there are actually two versions of the little picture that is drawn as the icon.  The first is the actual picture that will be drawn, and that\rquote s the part that is called the icon.  The second version of the picture is called the icon mask.  The icon mask tells QuickDraw II Auxiliary (which is the tool that actually ends up drawing the icons) what bits actually make up an icon.  The mask lets you create irregularly shaped pictures and drop them onto a background without wiping out the background itself.  That\rquote s why icons in the Finder don\rquote t have to be square, and why the blue desktop shows around the edges of even the most complicated icon.\par You can also create hollow icons using a hollow mask.  For example, here\rquote s a doughnut shaped icon.  The center is literally hollow, since the mask for the center is set to 0.  Whatever was on the screen before this icon is drawn will show up in the middle of the doughnut.\par \par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 rIcon resource}}}{\v\f6\fs20 \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rIcon (1001) \{\par    $8000,                        /* Icon Type bit 15  1 = color, 0 = mono */\par    10,                                /* height of icon in pixels */\par    16,                                /* width of icon in pixels */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"0000000AA0000000"                /* icon image */\par    $"000AAAAAAAAAA000"\par    $"00AAAAAAAAAAAA00"\par    $"0AAAAA0000AAAAA0"\par    $"AAAAA000000AAAAA"\par    $"AAAAA000000AAAAA"\par    $"0AAAAA0000AAAAA0"\par    $"00AAAAAAAAAAAA00"\par    $"000AAAAAAAAAA000"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"0000000AA0000000",\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"0000000FF0000000"                /* icon mask */\par    $"000FFFFFFFFFF000"\par    $"00FFFFFFFFFFFF00"\par    $"0FFFFF0000FFFFF0"\par    $"FFFFF000000FFFFF"\par    $"FFFFF000000FFFFF"\par    $"0FFFFF0000FFFFF0"\par    $"00FFFFFFFFFFFF00"\par    $"000FFFFFFFFFF000"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"0000000FF0000000";\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-4:  A Doughnut Shaped Icon\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There is also one restrictions on the size of the icon: all icons must be a multiple of eight pixels wide.  The icon you see here, for example, is 16 pixels wide.  Since icons can be irregularly shaped, though, this isn\rquote t really a severe limitation.  If you need an icon that is 14 pixels wide, create it with 16 pixels in the definition and use the icon mask to mask out the left and right pixel on each side.  The icon will end up being 16 pixels wide, but the figure drawn on the screen will be 14 pixels.  Since the Control Manager centers the icon in the icon button control, you won\rquote t even be able to tell that the icon is a little wider than the button.\par The mechanics of typing the icon definition are also sort of interesting.  The resource compiler has a mechanism for creating long hexadecimal fields using strings, which is what we\rquote re doing with this icon definition.  The icon itself is variable length, so the resource compiler needs some way of knowing where the end of the icon and the start of the icon mask is.  That\rquote s what the lone comma you see on the last line of the icon is for; it marks the end of one hexadecimal field.  The other lines must not have any punctuation after them at all \endash  no comma and no semicolon.  The resource compiler combines all of these lines into a single, long chunk, and fills in the values in the resource file with the appropriate hexadecimal values.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Display Mode Bits}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Display Mode Bits\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 displayMode}{\f4  field is a flags word that the Control Manager passes along to QuickDraw II Auxiliary when the icon is drawn.  It controls several obscure icon drawing options.  The first is that icons can be either colored or black and white.  The choice is actually made in the }{\f6\fs20 rIcon}{\f4  resource by setting or clearing the most significant bit of the first entry; setting the bit gives a colored icon, while clearing it gives a black and white icon.  While you\rquote ll probably use colored icons more often than black and white icons, there are some interesting things you can do with a black and white icon.  The most significant four bits of the }{\f6\fs20 displayMode}{\f4  field is a color; it replaces any white pixels in the icon.  The next four bits are also a color, controlling the black bits.  By setting these bits, you can quickly change the color of an icon without changing the icon image itself.  For a good example of how this capability can be used, try setting the color of a folder in the Finder.\par The last three bits if the }{\f6\fs20 displayMode}{\f4  field control some masking options.  You can use these three bits in combination to get a variety of masks, or you can set just one of the bits.  Most of the time, you\rquote ll leave all three bits clear, though.\par Bit 2 ands a light gray pattern with the image, giving a deselected look.  The Finder uses this mask when it draws the icon for a folder that is open.  You can use it for an icon button that is inactive.  Bit 1 copies a light gray pattern instead of drawing the picture; the Finder uses this for devices that are offline.  Finally, bit 0 inverts the image before drawing it.  The Finder uses this bit for icons that are selected.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Inactive Icon Buttons}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Inactive Icon Buttons\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Bits 15-8 of the }{\f6\fs20 flags}{\f4  word are passed on to the Control Manager as the }{\f6\fs20 ctlHilite}{\f4  field.  }{\f6\fs20 ctlHilite}{\f4  is used to make a control inactive.  For example, there may be situations when a control can\rquote t be used until something is selected in the dialog.  In that case, you would draw the icon in its inactive state, and the Control Manager would not report hits on the control.\par I really have no idea why this field is available for an icon button but not for any of the other controls we\rquote ve seen so far.  There is another way to set the active state for a control if you need to, using Control Manager calls.  I\rquote d recommend setting these bits to 0 all of the time, creating active controls, then using Control Manager calls to activate and deactivate controls if you need to.  That way, all of the Controls are handled the same way, and there is less chance that you will make a mistake writing a program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Creating Icons in the Real World}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Creating Icons in the Real World\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It\rquote s certainly possible to create an icon by hand coding bit maps in a resource compiler source file, but it\rquote s very time consuming and pretty close to extremely boring.  In real life, if you want to use icon buttons, you really need some sort of a tool to draw the pictures.  A program like Design Master, which is very handy for laying out dialogs, is a good choice, since it can write the finished icon as an }{\f6\fs20 rIcon}{\f4  resource, and you can paste the result into your resource file for the program.  In a pinch, you can also use an icon editor or paint program, then write a quick program to dump the result as hexadecimal strings.  It\rquote s not hard to do, but of course a real programmer\rquote s CAD tool like Design Master saves you the trouble.\par \par Problem 14-3:  Start with the solution to Problem 14-2.  Add two arrow-shaped icons, one to the left of the three color radio buttons, and one to the right, as shown below.  Hook up the left arrow so clicking on it finds the current color radio button and sets the one to the left.  The right arrow button should select the radio button to the right on the one that is selected when the button is pressed.\par \par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 rIcon resource}}}{\v\f6\fs20 \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rIcon (1001) \{\par    $8000,                        /* Icon Type bit 15  1 = color, 0 = mono */\par    9,                                 /* height of icon in pixels */\par    8,                                 /* width of icon in pixels */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"FFFF0FFF"                        /* icon image */\par    $"FFF00FFF"\par    $"FF0F0000"\par    $"F0FFFFF0"\par    $"0FFFFFF0"\par    $"F0FFFFF0"\par    $"FF0F0000"\par    $"FFF00FFF"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"FFFF0FFF",\par    $"0000F000"                        /* icon mask */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"000FF000"\par    $"00FFFFFF"\par    $"0FFFFFFF"\par    $"FFFFFFFF"\par    $"0FFFFFFF"\par    $"00FFFFFF"\par    $"000FF000"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"0000F000";\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-5:  Left Arrow Icon\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1092{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex48\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag-64507173\blipupi72{\*\blipuid fc27b2db0a87c80ae8a6845009b88d4b}226a00000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000126033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0da00033000003fed000503f0000003c019033c00033af9aa00c0da00033000003fed000503f0000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c017033c00033af9aa00c0da000330000003ecfffe000103c017033c00033af9aa00c0da000330000003ecfffe000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00b003cbd000030f7000103c00b003cbd000030f7000103c00b003cbd00003cf7000103c00b003cbd00003cf7000103c00b003cbd00003ff7000103c00b003cbd00003ff7000103c00c003cbd00013fc0f8000103c00c003cbd00013fc0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ff0f8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffcf8000103c00c003cbd00013ffff8000103c00c003cbd00013ffff8000103c00c003cbd00013cf0f8000103c00c003cbd00013cf0f8000103c00b003cbc00003cf8000103c00b003cbc00003cf8000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-4:  Control Sampler Window\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk75}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 icon button control}{\rxe bk75}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Pictures}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Pictures\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk76}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Picture controls are used to put large, rectangular pictures into a window.  They are usually disabled, since they really aren\rquote t much good as buttons, and icon buttons do the job of creating a pictorial button better, anyway.  The reason picture controls don\rquote t make good buttons is that they just sit there.  Nothing visibly changes when you click on the picture.  In addition, you can\rquote t have a border and you can\rquote t create text titles.\par It\rquote s fair to ask why there is even such a thing as a picture control, since you could just draw whatever you wanted into the window with QuickDraw II commands.  Using a picture, though, you can create a background for the controls, drawing the picture before the controls are drawn.  (Controls are drawn in the reverse of the order in which they appear in the list of controls.)  You can also use the picture control to draw pictures automatically, at the same time the controls are drawn, avoiding any chance of flicker if there happens to be a lot of time between when the controls are drawn and when the picture is drawn.\par Here\rquote s a very simple picture control.  It creates a small gray square on the screen.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{23,43,40,64\},                     /* control Rect */\par    PictureControl \{\{\par       $FF00,                          /* flags */\par       $1002,                          /* more flags */\par       0,                              /* refcon */\par       1001                            /* Picture Ref */\par       \}\};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 data rPicture (1001) \{\par    $"00000200020013001700118201000A0001C001C0FF3FFF3F9000000000000C00"\par    $"2A003C003B0054002A003D003B00540002000200130019000000EEEEEEEEEEEE"\par    $"EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"\par    $"EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"\par    $"EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"\par    $"EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"\par    $"EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"\par    $"EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"\par    $"EEEEEEEEEEEE"\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-6:  Typical Picture Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab These bits set the }{\f6\fs20 ctlHilite}{\f4  field for the control.  For a picture control, this will normally be $FFxx, giving an inactive control.\par 7\tab 0 for a normal, visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 6-0\tab Reserved; set to 0.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab This bit tells the Control Manager that you are using a standard control.  It must be set to 1.\par 11-2\tab Reserved; set to 0.\par 1-0\tab Defines the type of reference for the field labeled }{\f6\fs20 /* Picture Ref */}{\f4 .\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Picture reference is a pointer.\par 01\tab Picture reference is a handle.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 10\tab Picture reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The various fields in the resource for the control and the various flag bits are all things you\rquote ve seen several times by now, so I won\rquote t go over them point by point.  The only unusual feature of a picture control is the control rectangle.  Pictures can start out as any size, although they do fit into a rectangle.  If the control rectangle is not the same size as the picture, though, the picture is automatically scaled to fit into the rectangle, shrinking or enlarging the picture as necessary.  If you want the tools to figure out how big the picture is on the fly, just leave the bottom right coordinates for the rectangle at 0.  The Control Manager will fill in the proper values for a \ldblquote normal\rdblquote  size picture before drawing the picture.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Creating Pictures}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Creating Pictures\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You might think that a picture would be a bit map, but that isn\rquote t actually true.  Pictures are a recording of various QuickDraw drawing commands.  In fact, one way to create the original data for a picture is to ask QuickDraw to start recording a picture, then draw something, and finally ask QuickDraw for the binary version of the picture.\par It\rquote s probably obvious, but this isn\rquote t something you\rquote re likely to do by hand.  By far the easiest and best way to create an }{\f6\fs20 rPicture}{\f4  resource definition is to use a program like Design Master, which can, among other things, read in a bit mapped drawing and convert it to a picture resource.\par If you would like to learn more about pictures, or even take a crack at creating some by hand, you\rquote ll need to do some reading outside of this course.  QuickDraw II Auxiliary is used to create and manipulate pictures; you can find a description of this tool in the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 2}{\f4 .  The format for a picture is outlined in }{\f4\ul Apple II Technical Notes, Apple II}{\f4\fs20\ul GS}{\f4\ul  #46: DrawPicture Data Format}{\f4 .  Appendix C tells you more about the technical notes and where to get them.\par Since creating pictures by hand isn\rquote t really a viable option I won\rquote t be assigning a problem that deals with pictures.  The picture control shown in Listing 14-6 will work, so if you want to try creating a picture control and don\rquote t have a program that will do it for you, you can give the control in Listing 14-6 a try.\par {\*\bkmkend bk76}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 picture controls}{\rxe bk76}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 LineEdit Items}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 LineEdit Items\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk77}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Edit line controls are the ones that let you enter a single line of text.  A common example is a string search dialog, like the one shown here from PRIZM.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1093{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley48\piccropl0\piccropr0\piccropt0\piccropb0\picw328\pich180\picwgoal6560\pichgoal3600\macpict\bliptag1694747234\blipupi72{\*\blipuid 6503ca6293b682b70a3dbf896eedd9b2}0ca10000000000b401481101a00082a0008e01000a0000000002d0024098002a0000000000b401480000000000b401480000000000b40148000102d70002d70007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0012033ffc0007f3ff04fc1cfffe7ff0ff01fc0012033ffc0007f3ff04fc1cfffe7ff0ff01fc0012033ffcffe7f3ff04fcfffffe7ff0ff01fc0012033ffcffe7f3ff04fcfffffe7ff0ff01fc0012033ffcffe7f3ff04fcf8e0f07ff0ff01fc0012033ffcffe7f3ff04fcf8e0f07ff0ff01fc0012033ffcffe7f3ff04fc3ce6667ff0ff01fc0012033ffcffe7f3ff04fc3ce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffcffe7f3ff04fcfce6667ff0ff01fc0012033ffc0007f3ff04fcf866707ff0ff01fc0012033ffc0007f3ff04fcf866707ff0ff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc0007003fdaff01fc00070030da00010c00070030da00010c00070030da00010c00070030da00010c000c0030fc00003fe1ff02c00c000c0030fc00003fe1ff02c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000e063001f18000c030e10002c00c000e063001f18000c030e10002c00c000e063001800000c030e10002c00c000e063001800000c030e10002c00c000e063001838f87cc30e10002c00c000e063001838f87cc30e10002c00c000e063001e18cccc030e10002c00c000e063001e18cccc030e10002c00c000e063001818cccc030e10002c00c000e063001818cccc030e10002c00c000e063001818cccc030e10002c00c000e063001818cccc030e10002c00c000e06300183ccc7cc30e10002c00c000e06300183ccc7cc30e10002c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000c0030fc000030e10002c00c000c0030fc00003fe1ff02c00c000c0030fc00003fe1ff02c00c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000b043003fffff8de00010c000b043003fffff8de00010c00150e30030000186198000e00030c000018e800010c00150e30030000186198000e00030c000018e800010c00150e30030000186198000600030c000018e800010c00150e30030000186198000600030c000018e800010c00150e30030000186d9f0f060f036c78d8f8e800010c00150e30030000186d9f0f060f036c78d8f8e800010c00150e30030000186d99998619836ccce198e800010c00150e30030000186d99998619836ccce198e800010c00150e30030000186d9999861f836cccc198e800010c00150e30030000186d9999861f836cccc198e800010c00150e300300001833199986180198ccc198e800010c00150e300300001833199986180198ccc198e800010c00160f300300001833198f0f0f019878c0f980e900010c00160f300300001833198f0f0f019878c0f980e900010c000b043003fffff8de00010c000b043003fffff8de00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000b043003fffff8de00010c000b043003fffff8de00010c00120530030000181efa0002018006e900010c00120530030000181efa0002018006e900010c001005300300001833f9000006e800010c001005300300001833f9000006e800010c0018113003000018301f1e1e01e1e3e1e38f8e318feb00010c0018113003000018301f1e1e01e1e3e1e38f8e318feb00010c00191230030000183033303303033333018606319980ec00010c00191230030000183033303303033333018606319980ec00010c001912300300001830331e3f01e3f331e186061b1f80ec00010c001912300300001830331e3f01e3f331e186061b1f80ec00010c001811300300001833330330003303303186c61b18eb00010c001811300300001833330330003303303186c61b18eb00010c00191230030000181e1f1e1e01e1e331e3c38f0e0f18ec00010c00191230030000181e1f1e1e01e1e331e3c38f0e0f18ec00010c000b043003fffff8de00010c000b043003fffff8de00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000b043003fffff8de00010c000b043003fffff8de00010c001207300300001861980ced000038f600010c001207300300001861980ced000038f600010c001308300300001861980030ee000018f600010c001308300300001861980030ee000018f600010c00231c30030000186d9f1c7c3c3c7c3e3c3c03c3cfe3e1f363c3c03c3e663e18f600010c00231c30030000186d9f1c7c3c3c7c3e3c3c03c3cfe3e1f363c3c03c3e663e18f600010c00210a30030000186d998c306660fd660806666db33333866600fd660018f600010c00210a30030000186d998c306660fd660806666db33333866600fd660018f600010c00231830030000186d998c307e3c6666607e06066db3333307e3c07efe660018f600010c00231830030000186d998c307e3c6666607e06066db3333307e3c07efe660018f600010c00230a300300001833198c366006fe660a6006666db3333306006060fe660018f600010c00230a300300001833198c366006fe660a6006666db3333306006060fe660018f600010c002418300300001833199e1c3c3c7c3e3c3c03c3cdb3e1f303c3c03cfe3e013c60f700010c002418300300001833199e1c3c3c7c3e3c3c03c3cdb3e1f303c3c03cfe3e013c60f700010c0017043003fffff8fb000060fb000003fb000006f300010c0017043003fffff8fb000060fb000003fb000006f300010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c000e033000007ff8ff00c0e700010c000e033000007ff8ff00c0e700010c000e0330000f80f800003ee700010c000e0330000f80f800003ee700010c001402300078f7ff01e3c0fc00f9ff00c0f600010c001402300078f7ff01e3c0fc00f9ff00c0f600010c0018033000e780f800013ce0fd00010780fa000078f600010c0018033000e780f800013ce0fd00010780fa000078f600010c0016023001dcf700010770fd00001cf900000ef600010c0016023001dcf700010770fd00001cf900000ef600010c0021093003b8003e3000181180fe000103b8fd000238001efd00021c0007f600010c0021093003b8003e3000181180fe000103b8fd000238001efd00021c0007f600010c00210e3003b800300000181980000c0003b8fd0002380033fd00020c0007f600010c00210e3003b800300000181980000c0003b8fd0002380033fd00020c0007f600010c00220e3003b8003071f0f81d8f199f0003b8fd00093800301f3e1e1e0c0007f600010c00220e3003b8003071f0f81d8f199f0003b8fd00093800301f3e1e1e0c0007f600010c00210e3003b8003c3199981f998f0c0003b8fd0002380030fd33020c0007f600010c00210e3003b8003c3199981f998f0c0003b8fd0002380030fd33020c0007f600010c00220e3003b800303199981b9f860c0003b8fd00093800303333303f0c0007f600010c00220e3003b800303199981b9f860c0003b8fd00093800303333303f0c0007f600010c00210e3003b8003031999819980f0d8003b8fd00013800fd3303300c0007f600010c00210e3003b8003031999819980f0d8003b8fd00013800fd3303300c0007f600010c00220e3003b800307998f8188f19870003b8fd000438001e1f33fe1e010007f600010c00220e3003b800307998f8188f19870003b8fd000438001e1f33fe1e010007f600010c0016023003b8f7000103b8fd000038f9000007f600010c0016023003b8f7000103b8fd000038f9000007f600010c0016023001dcf700010770fd00001cf900000ef600010c0016023001dcf700010770fd00001cf900000ef600010c0018033000e780f800013ce0fd00010780fa000078f600010c0018033000e780f800013ce0fd00010780fa000078f600010c001402300078f7ff01e3c0fc00f9ff00c0f600010c001402300078f7ff01e3c0fc00f9ff00c0f600010c000e0330000f80f800003ee700010c000e0330000f80f800003ee700010c000e033000007ff8ff00c0e700010c000e033000007ff8ff00c0e700010c00070030da00010c00070030da00010c00070030da00010c00070030da00010c0007003fdaff01fc0007003fdaff01fc0002d70002d700a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-5:  PRIZM\rquote s Find Dialog\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Edit line controls are fairly straight-forward to define and use.  In fact, probably the most complicated thing about this type of control is that it has two names.  There seems to have been a subtle argument over whether this is an edit line control or a line edit control.  Being strictly neutral, I use both terms.\par Here\rquote s a typical edit line control, followed by the definition for the flags.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{8,8,19,208\},                      /* control Rect */\par    editLineControl \{\{\par       $0000,                          /* flags */\par       $7000,                          /* more flags */\par       0,                              /* refcon */\par       20,                             /* Max Size */\par       0,                              /* text Ref */\par       $D7,                            /* password character - 6.0 */\par       \}\};\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-7:  A Typical LineEdit Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par 7\tab 0 for a normal, visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 6-0\tab Reserved; set to 0.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15\tab Reserved; set to 0.\par 14-12\tab Must be set to 1.\par 11-2\tab Reserved; set to 0.\par 1-0\tab Defines the type of reference for the text field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Text reference is a pointer.\par 01\tab Text reference is a handle.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 10\tab Text reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par When the control is drawn, the control rectangle will be surrounded by a box, and the editable text appears inside of this box.  Assuming you aren\rquote t doing anything really tricky, you\rquote ll be using the system font.  In that case, make sure the rectangle is at least 11 pixels high \endash  if it is any shorter, the Control Manager won\rquote t draw the text.  The width of the rectangle doesn\rquote t matter a whole lot, since the text will scroll sideways to accommodate text that is too long for the rectangle.\par You have the option of showing some default text in an edit line item when it is first drawn.  For example, SFO shows the default name for a file in an edit line item that lets the user enter a file name.  If you want to create some default text, set bits 0 and 1 of the }{\f6\fs20 moreFlags}{\f4  field to 10, then add an }{\f6\fs20 rPString}{\f4  resource with the default text, putting the resource ID for the text in the text reference field.  If you don\rquote t want default text, set bits 0 and 1 to 00 and use 0 for the text reference field.  Most of the time, any default text will change as the program runs (the search string will be the last one used, the file name will be the last one saved, and so on) so you\rquote ll set the default string in the resource to }{\f6\fs20 nil}{\f4  and set up any default string in from the program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Accessing Text}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Accessing Text\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Creating a line edit control is no harder than creating any other control.  Using one is pretty easy, too, since the Control Manager and }{\f6\fs20 TaskMaster}{\f4  handle all of the details of flashing the cursor and selecting text.  The major thing you have to do manually is read the text to see what the user typed.  That\rquote s done with }{\f6\fs20 GetLETextByID}{\f4 :\par \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\pard\plain \qj\fi180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GetLETextByID}}}{\v\f6\fs20 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 GetLETextByID(wPtr, editLineID, textBuffer);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The three parameters are a pointer to the window containing the control, the control ID, and a buffer to put the text in.  The buffer itself has to be two characters longer than the longest possible string the user can type.  That maximum length is a value you set when the control is defined; it\rquote s the value in the field labeled }{\f6\fs20 /* Max Size */}{\f4 .  If the maximum size is 255 characters or less, you can use the string as a p-string.  That second extra character you had to allow for in the buffer, though, is a null character that will be stuffed at the end of the string.  If you create a pointer to the byte right past the length byte at the start of the string, you have a pointer to a valid null-terminated string.  That\rquote s generally what you want in C, since that\rquote s the sort of string C\rquote s standard library routines know how to deal with.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetLETextByID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You can also put text into a text edit control, generally to create a default.  That\rquote s done with }{\f6\fs20 SetLETextByID}{\f4 :\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 SetLETextByID(wPtr, editLineID, str);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first two parameters are the same as for }{\f6\fs20 GetLETextByID}{\f4 ; the third is a p-string containing the default text.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Cut, Copy, Paste and Clear}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Cut, Copy, Paste and Clear\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Cut command}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Copy command}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Paste command}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Clear command}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Back when we created a TextEdit control, you saw that the Control Manager, }{\f6\fs20 TaskMaster}{\f4  and the TextEdit Tool Set worked together to handle the editing commands (Cut, Copy, Paste and Clear) for you.  }{\f6\fs20 TaskMaster}{\f4  does so much, in fact, that you may be starting to expect it to do everything.  Well, almost.  As it turns out, the editing commands don\rquote t get handled automatically for edit line controls.  If you want to support the editing commands in a window (and you should) you need to do a little extra work.\par Actually handling the editing commands is pretty straight forward.  When the user uses one of the menu editing commands, and your window has an edit line control, you just make a single call, passing the handle for the edit line item.  The LineEdit Tool Set takes things from there, deleting or adding text and redrawing the edit line control.\par \par }\pard \qj\li360\ri4320\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx2520\adjustright {\f4 Menu Command\tab LineEdit Call\par }\pard \qj\li360\ri4320\keepn\widctlpar\tx2520\adjustright {\pard\plain \qj\li360\ri4320\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LECopy}}}{\v\f4 \par }{\f4 Copy\tab }{\f6\fs20 LECopy(leHandle);}{\f4 \par }{\pard\plain \qj\li360\ri4320\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEDelete}}}{\v\f4 \par }{\f4 Clear\tab }{\f6\fs20 LEDelete(leHandle);}{\f4 \par }{\pard\plain \qj\li360\ri4320\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LECut}}}{\v\f4 \par }{\f4 Cut\tab }{\f6\fs20 LECut(leHandle);}{\f4 \par }{\pard\plain \qj\li360\ri4320\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEPaste}}}{\v\f4 \par }\pard \qj\li360\ri4320\widctlpar\tx2520\adjustright {\f4 Paste\tab }{\f6\fs20 LEPaste(leHandle);}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 So far, the hardest part is remembering that the LineEdit Tool Set calls Clear Delete.\par }\pard \qj\li360\keepn\widctlpar\tx2520\adjustright {\pard\plain \qj\li360\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEToScrap}}}{\pard\plain \qj\li360\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEFromScrap}}}{\pard\plain \qj\li360\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scraps}}}{\pard\plain \qj\li360\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Scrap Manager}}}{\pard\plain \qj\li360\keepn\widctlpar\tx2520\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LineEdit Tool Set}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The LineEdit Tool Set uses a private scrap to store the stuff it copies, and pastes from the private scrap, too.  Sometimes that\rquote s what you want.  For example, you might want to allow copying and pasting between two edit line items in a search and replace dialog without effecting the scrap being used by the text editor.  In other cases, you do want to use the Scrap Manager.  In general, unless there is a good reason for not using the Scrap Manager, you should tell the LineEdit Tool Set to use the Scrap Manager.  To to that, call }{\f6\fs20 LEToScrap}{\f4  right after any Copy or Cut operation to move the LineEdit Tool Set scrap to the Scrap Manager, and call }{\f6\fs20 LEFromScrap}{\f4  just before calling }{\f6\fs20 LEPaste}{\f4  to copy the Scrap Manager\rquote s scrap into the LineEdit Tool Set\rquote s scrap.  Neither call has any parameters.  The only issue, and it\rquote s a minor one, is }{\f6\fs20 LEFromScrap}{\f4  will ignore the Scrap Manager\rquote s scrap if it has more than 255 characters.  No harm is done, it just won\rquote t use a scrap that is longer than 255 characters.\par So far, this looks pretty easy \endash  and it is.  The problem is figuring out just what the handle for the line edit item actually is, so you can pass it to the appropriate call.  There are two parts to this problem.  The first is figuring out which LineEdit control an editing command applies to (if any) and the second is figuring out what the line edit handle is \endash  unfortunately, it\rquote s not the same as the control handle for the line edit control!\par }{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 target control}}}{\v\f4 \par }{\f4 Multiple controls are handled using the idea of the target control.  In loose terms, the target control is the one the user is typing in.  Unless you prevent it, the user can use the tab key to move from one target control to another.  (You would block the use of the tab key by, for example, allowing the user to use the tab key in a TextEdit control.)  The user can also pick the target control by clicking on the control, something they might do naturally to place the insertion point at a specific spot or select text.  You should only call the LineEdit Tool Set for an editing command if a line edit control is the target control.  To find out which control is the target control, call }{\f6\fs20 FindTargetCtl}{\f4 .  It works on the active window, returning a control handle.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FindTargetCtl}}}{\v\f4 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 ctl = FindTargetCtl();\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 You can pass the control handle to }{\f6\fs20 GetCtlID}{\f4  to find the control ID, then check to see if it matches the control IDs for any of your line edit controls.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you dig through the toolbox reference manuals, you will find out that the LineEdit Tool Set is completely independent of the Control Manager.  The Control Manager knows about the LineEdit Tool Set, and can set up a control that uses LineEdit Tool Set calls to function, but the LineEdit Tool Set has no idea what a control is.  The reason this is important is that the calls you just learned about (}{\f6\fs20 LECut}{\f4  and its palls) are LineEdit Tool Set calls, so you can\rquote t just pass the control handle to them.  The line edit handle the LineEdit Tool Set calls expect is buried inside of the control record itself.  You can get the value using }{\f6\fs20 GetCtlTitle}{\f4 .  Heres an example, showing the proper type cast to feed the control record to the LineEdit Tool Set\rquote s }{\f6\fs20 LEDelete}{\f4  call:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 LEDelete((LERecHndl) GetCtlTitle(ctl));}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Here\rquote s a sample DoCut subroutine that implements all of the ideas discussed in this section.  }{\f6\fs20 DoCut}{\f4  should be called when the user picks Cut from the Edit menu.  You can use this subroutine as a model to build subroutines to handle the other three editing commands.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DoCut\par *\par * Handle a cut command\par *\par ***************************************************************/\par \par void DoCut (void)\par \par \{\par CtlRecHndl ctl;                         /* target control handle */\par unsigned long id;                       /* control ID */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 GrafPortPtr port;                       /* caller's GrafPort */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 port = GetPort();\par SetPort(wPtr);\par ctl = FindTargetCtl();\par id = GetCtlID(ctl);\par if ((id == ctlLine1) || (id == ctlLine2)) \{\par    LECut((LERecHndl) GetCtlTitle(ctl));\par    LEToScrap();\par    \}\par SetPort(port);\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-8:  Sample }{\f6\fs20 DoCut}{\f4  Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Passwords}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Passwords\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 passwords}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Text edit controls are sometimes used to enter a password for online services or data encryption programs.  One of the customary things to do when a user types a password is to hide the actual characters typed, displaying some bogus character.  The last parameter in the text edit control resource definition is the character to display instead of the characters that are actually typed.  If you leave the parameter off, the text edit control works like you would normally expect, displaying the characters the user actually types.  If you put in a character, that is the character displayed.\par 0xD7 is the traditional password character on Apple computers.  This shows up as a hollow diamond character.\par \par Problem 14-4:  Start with the solution to Problem 14-3.  Add two edit line items with a maximum allowed length of 20 characters.\par Make sure your controls support the Cut, Copy, Paste and Clear commands.  In particular, you should be able to cut or copy text from one control and paste it into another.\par The radio button controls in your program have key equivalents of R, G and B.  Try typing these characters in your line edit control.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1094{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag-1970966741\blipupi72{\*\blipuid 8a856f2b22512bbd29129bc051da5ccd}25a400000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000126033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0da00033000003fed000503f0000003c019033c00033af9aa00c0da00033000003fed000503f0000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c017033c00033af9aa00c0da000330000003ecfffe000103c017033c00033af9aa00c0da000330000003ecfffe000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c010033c00003fd1fff0000030f7000103c010033c00003fd1fff0000030f7000103c012033c000030d2000003f000003cf7000103c012033c000030d2000003f000003cf7000103c01d093c00003000fff0f0003cfe000103c0dd000003f000003ff7000103c01d093c00003000fff0f0003cfe000103c0dd000003f000003ff7000103c01f073c000030000f00f0f400003cfc00003cea000003f000013fc0f8000103c01f073c000030000f00f0f400003cfc00003cea000003f000013fc0f8000103c02c1c3c000030000f00ffc0fc03fc000fc03fc0003ff000ffc03fc03fc0ffc0eb000003f000013ff0f8000103c02c1c3c000030000f00ffc0fc03fc000fc03fc0003ff000ffc03fc03fc0ffc0eb000003f000013ff0f8000103c02b163c000030000f00f0f03c0f000003c0f00000f0f0003c00fef001003cea000003f000013ffcf8000103c02b163c000030000f00f0f03c0f000003c0f00000f0f0003c00fef001003cea000003f000013ffcf8000103c02b1b3c000030000f00f0f03c03fc0003c03fc000f0f0003c00fff03fc03cea000003f000013ffff8000103c02b1b3c000030000f00f0f03c03fc0003c03fc000f0f0003c00fff03fc03cea000003f000013ffff8000103c02c1c3c000030000f00f0f03c000f0003c000f000f0f0003cf0f00000f03cf0eb000003f000013cf0f8000103c02c1c3c000030000f00f0f03c000f0003c000f000f0f0003cf0f00000f03cf0eb000003f000013cf0f8000103c02b1c3c000030000f00f0f0ff03fc000ff03fc0003ff0000fc03fc03fc00fc0eb000003ef00003cf8000103c02b1c3c000030000f00f0f0ff03fc000ff03fc0003ff0000fc03fc03fc00fc0eb000003ef00003cf8000103c00e033c000030d2000003e5000103c00e033c000030d2000003e5000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c007003cb2000103c007003cb2000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c00e033c000030d2000003e5000103c00e033c000030d2000003e5000103c019093c00003000fff0f0003cfe000103c0dd000003e5000103c019093c00003000fff0f0003cfe000103c0dd000003e5000103c016073c000030000f00f0f600000fe2000003e5000103c016073c000030000f00f0f600000fe2000003e5000103c023183c000030000f00ffc0fc03fc000fc03fc000003ff00ff00ff0e7000003e5000103c023183c000030000f00ffc0fc03fc000fc03fc000003ff00ff00ff0e7000003e5000103c0210f3c000030000f00f0f03c0f000003c0f0fe00010f00fd3ce7000003e5000103c0210f3c000030000f00f0f03c0f000003c0f0fe00010f00fd3ce7000003e5000103c021143c000030000f00f0f03c03fc0003c03fc000000f00fd3ce7000003e5000103c021143c000030000f00f0f03c03fc0003c03fc000000f00fd3ce7000003e5000103c020133c000030000f00f0f03c000f0003c000f000000ffc3ce7000003e5000103c020133c000030000f00f0f03c000f0003c000f000000ffc3ce7000003e5000103c023183c000030000f00f0f0ff03fc000ff03fc03c0003f00ff00ff0e7000003e5000103c023183c000030000f00f0f0ff03fc000ff03fc03c0003f00ff00ff0e7000003e5000103c012033c000030f40000f0e0000003e5000103c012033c000030f40000f0e0000003e5000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-6:  Control Sampler with Edit Line Controls\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk77}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}{\rxe bk77}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 List Controls}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 List Controls\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk78}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 List controls are used to display more than one choice in a box.  It\rquote s possible, and even common, to have more things in the list than can be displayed in the box, so list controls come complete with their own scroll bars.  The most common examples of list controls are the lists of file names in the SFO dialogs.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1095{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex49\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw348\pich264\picwgoal6960\pichgoal5280\macpict\bliptag1379873753\blipupi72{\*\blipuid 523f33d930829dfac94898c196c28b6e}1b82000000000108015c1101a00082a0008e01000a0000000002d0024098002c0000000000eb01600000000000eb015c0000000000eb015c000102d50002d50006003fd7ff00c006003fd7ff00c0060030d70000c0060030d70000c0060030d70000c0060030d70000c00801307fd9ff01e0c00801307fd9ff01e0c00801307fd9ff01e0c00801307fd9ff01e0c00901307cda000203e0c00901307cda000203e0c00901307cda000203e0c00901307cda000203e0c00901307cda000203e0c00901307cda000203e0c00e06307c000ffffff0df000203e0c00e06307c000ffffff0df000203e0c01e0a307c000c00003c00fc0018fb0008f0033e00007c3c3c60f2000203e0c01e0a307c000c00003c00fc0018fb0008f0033e00007c3c3c60f2000203e0c01f0a307c000cffff3c0303fc18fc000501800c330000fe660018f2000203e0c01f0a307c000cffff3c0303fc18fc000501800c330000fe660018f2000203e0c0200a307c000c3ffc3c03000318fd0f0a1f01f01833363c6666600cf2000203e0c0200a307c000c3ffc3c03000318fd0f0a1f01f01833363c6666600cf2000203e0c02114307c000c0ff03cffffc31819981819998198183e38fe66013c0cf2000203e0c02114307c000c0ff03cffffc31819981819998198183e38fe66013c0cf2000203e0c02114307c000c03c03c300033181f8f0f19998198183030fe6601060cf2000203e0c02114307c000c03c03c300033181f8f0f19998198183030fe6601060cf2000203e0c02014307c000c00003c0c000f1818018199998198183030fd66000cf2000203e0c02014307c000c00003c0c000f1818018199998198183030fd66000cf2000203e0c0210b307c000ffffffc03ffff1f8ffe0f0a1998f00c30303c7c3c3c18f2000203e0c0210b307c000ffffffc03ffff1f8ffe0f0a1998f00c30303c7c3c3c18f2000203e0c01606307c0003fffffcf6000003fb000060f2000203e0c01606307c0003fffffcf6000003fb000060f2000203e0c00901307cda000203e0c00901307cda000203e0c01a08307c003c3c187c01c0fd0006701e3f1e1e3180ec000203e0c01a08307c003c3c187c01c0fd0006701e3f1e1e3180ec000203e0c01707307c006660786003fc0002c03303fe33eb000203e0c01707307c006660786003fc0002c03303fe33eb000203e0c01e12307c00067c187c07cd8f0f00f1f03306033336f800f6ff04fc0003e0c01e12307c00067c187c07cd8f0f00f1f03306033336f800f6ff04fc0003e0c02112307c001c661806030e19998198c0330c0e1e3cf900010780f70004078003e0c02112307c001c661806030e19998198c0330c0e1e3cf900010780f70004078003e0c02412307c0006661806030c1f9f8198c01f0c033336f900051c000018c007fa0003e003e0c02412307c0006661806030c1f9f8198c01f0c033336f900051c000018c007fa0003e003e0c0230f307c0066661866030c18180198c00318fe33f9000538000018c003fa00037003e0c0230f307c0066661866030c18180198c00318fe33f9000538000018c003fa00037003e0c02913307c003c3c7e3c030c0f0f00f0c01e181e1e3198fa001038000018c7830cdfc3c3c000007003e0c02913307c003c3c7e3c030c0f0f00f0c01e181e1e3198fa001038000018c7830cdfc3c3c000007003e0c01701307ce800093800000d8cc30cdb6666fe00037003e0c01701307ce800093800000d8cc30cdb6666fe00037003e0c01701307ce800103800000d8cc30cdb67e3c000007003e0c01701307ce800103800000d8cc30cdb67e3c000007003e0c01701307ce80010380000070cc30cdb66006000007003e0c01701307ce80010380000070cc30cdb66006000007003e0c01701307ce8001038000007078787db63c3c000007003e0c01701307ce8001038000007078787db63c3c000007003e0c00e01307ce800001cf50003e003e0c00e01307ce800001cf50003e003e0c01202307c00eaff02000780f70004078003e0c01202307c00eaff02000780f70004078003e0c01603307c00c0ef0005030000030000f6ff04fc0003e0c01603307c00c0ef0005030000030000f6ff04fc0003e0c01c03307c00c0fe000615000010014004f9000303003003f2000203e0c01c03307c00c0fe000615000010014004f9000303003003f2000203e0c01c0d307c00c02aaa0008800020020028f900030300cc03f2000203e0c01c0d307c00c02aaa0008800020020028f900030300cc03f2000203e0c02211307c00c01004401111141401400401415140fd00fd03010000f6ff04fc0003e0c02211307c00c01004401111141401400401415140fd00fd03010000f6ff04fc0003e0c02410307c00c0200a800a082222022008022222fc0006030c00c3000680f70004038003e0c02410307c00c0200a800a082222022008022222fc0006030c00c3000680f70004038003e0c02c11307c00c01000401010111101100401111140fd000e033f03f3001c000100000150014010fe0003e003e0c02c11307c00c01000401010111101100401111140fd000e033f03f3001c000100000150014010fe0003e003e0c02a11307c00c02000800808222202200802222020fd00fd030300380022fe000380008020fe00037003e0c02a11307c00c02000800808222202200802222020fd00fd030300380022fe000380008020fe00037003e0c02a11307c00c01000401010141411411511415140fd00fd031100300011144101014041514140007003e0c02a11307c00c01000401010141411411511415140fd00fd031100300011144101014041514140007003e0c02306307c00c02aaa80fa000002fa00fd03110038002a222880a22082222280003003e0c02306307c00c02aaa80fa000002fa00fd03110038002a222880a22082222280003003e0c01e03307c00c0ef00150303ff0300300015154501011041115100007003e0c01e03307c00c0ef00150303ff0300300015154501011041115100007003e0c01e03307c00c0ef00150300000300380022202200822082220200003003e0c01e03307c00c0ef00150300000300380022202200822082220200003003e0c02803307c00c0fe000615000010014004f9000003feff1100380011141101014141514100007003e0c02803307c00c0fe000615000010014004f9000003feff1100380011141101014141514100007003e0c01f0d307c00c02aaa0008800020020028f9000003feff01001cf50003e003e0c01f0d307c00c02aaa0008800020020028f9000003feff01001cf50003e003e0c02411307c00c01004401111141401400401414540fd000503c0000f0007f60004058003e0c02411307c00c01004401111141401400401414540fd000503c0000f0007f60004058003e0c02411307c00c0200a800a08222202200802822080fd000503c0000f0000f6ff04fc0003e0c02411307c00c0200a800a08222202200802822080fd000503c0000f0000f6ff04fc0003e0c01f10307c00c010004010101111011004010541fc000303c0000ff2000203e0c01f10307c00c010004010101111011004010541fc000303c0000ff2000203e0c01e0d307c00c020008008082222022008fe02fc000303c0000ff2000203e0c01e0d307c00c020008008082222022008fe02fc000303c0000ff2000203e0c02011307c00c01000401010141411411511014540fd000303c0000ff2000203e0c02011307c00c01000401010141411411511014540fd000303c0000ff2000203e0c01506307c00c02aaa80f2000303c0000ff2000203e0c01506307c00c02aaa80f2000303c0000ff2000203e0c01203307c00c0ef000303c0000ff2000203e0c01203307c00c0ef000303c0000ff2000203e0c01203307c00c0ef000303c0000ff2000203e0c01203307c00c0ef000303c0000ff2000203e0c01c03307c00c0fe000615000010014014f9000303c0000ff2000203e0c01c03307c00c0fe000615000010014014f9000303c0000ff2000203e0c01c0d307c00c02aaa0008800020020022f9000303c0000ff2000203e0c01c0d307c00c02aaa0008800020020022f9000303c0000ff2000203e0c02411307c00c01004401111141401400101415140fd000503c0000f0000f6ff04fc0003e0c02411307c00c01004401111141401400101415140fd000503c0000f0000f6ff04fc0003e0c02410307c00c0200a800a082222022002022222fc000603c0000f000680f70004038003e0c02410307c00c0200a800a082222022002022222fc000603c0000f000680f70004038003e0c02711307c00c01000401010111101100401111140fd000503c0000f001cfd000050fa0003e003e0c02711307c00c01000401010111101100401111140fd000503c0000f001cfd000050fa0003e003e0c02711307c00c02000800808222202200802222020fd000503c0000f0038fd000088fa00037003e0c02711307c00c02000800808222202200802222020fd000503c0000f0038fd000088fa00037003e0c02911307c00c01000401010141411411511415140fd000503c0000f0030fd000044fe50fd00037003e0c02911307c00c01000401010141411411511415140fd000503c0000f0030fd000044fe50fd00037003e0c02006307c00c02aaa80fa000002fa000503c0000f0038fd00fd88fd00033003e0c02006307c00c02aaa80fa000002fa000503c0000f0038fd00fd88fd00033003e0c01c03307c00c0ef000503c0000f0030fd000344445444fd00037003e0c01c03307c00c0ef000503c0000f0030fd000344445444fd00037003e0c01c03307c00c0ef000503c0000f0038fd000388888088fd00033003e0c01c03307c00c0ef000503c0000f0038fd000388888088fd00033003e0c02503307c00c0fe000615000010014014f9000503c0000f0038fd00fe500044fd00037003e0c02503307c00c0fe000615000010014014f9000503c0000f0038fd00fe500044fd00037003e0c0230d307c00c02aaa0008800020020022f9000503c0000f001cfc000080fb0003e003e0c0230d307c00c02aaa0008800020020022f9000503c0000f001cfc000080fb0003e003e0c02411307c00c01004401111141401400101414540fd000503c0000f0007f60004058003e0c02411307c00c01004401111141401400101414540fd000503c0000f0007f60004058003e0c02411307c00c0200a800a08222202200202822080fd000503c0000f0000f6ff04fc0003e0c02411307c00c0200a800a08222202200202822080fd000503c0000f0000f6ff04fc0003e0c01e10307c00c010004010101111011004010541fc000003fefff2000203e0c01e10307c00c010004010101111011004010541fc000003fefff2000203e0c01e0d307c00c020008008082222022008fe02fc000303555557f2000203e0c01e0d307c00c020008008082222022008fe02fc000303555557f2000203e0c02011307c00c01000401010141411411511014540fd000303555557f2000203e0c02011307c00c01000401010141411411511014540fd000303555557f2000203e0c01906307c00c02aaa80f20005035555570000f6ff04fc0003e0c01906307c00c02aaa80f20005035555570000f6ff04fc0003e0c01703307c00c0ef000603555557000780f70004078003e0c01703307c00c0ef000603555557000780f70004078003e0c01a03307c00c0ef000503555557001cfe00010787fa0003e003e0c01a03307c00c0ef000503555557001cfe00010787fa0003e003e0c02403307c00c0fe000615000010014014f90005035555570038fe00010cc3fa00037003e0c02403307c00c0fe000615000010014014f90005035555570038fe00010cc3fa00037003e0c0280d307c00c02aaa0008800020020022f90005035555570038fe00050c0307878780fe00037003e0c0280d307c00c02aaa0008800020020022f90005035555570038fe00050c0307878780fe00037003e0c02c11307c00c01004401111141401400101415140fd0005035555570038fe00050c030ccc0cc0fe00037003e0c02c11307c00c01004401111141401400101415140fd0005035555570038fe00050c030ccc0cc0fe00037003e0c02b10307c00c0200a800a08222202200a022222fc0005035555570038fe00050c030cc78fc0fe00037003e0c02b10307c00c0200a800a08222202200a022222fc0005035555570038fe00050c030cc78fc0fe00037003e0c02b11307c00c01000401010111101100101111140fd0005035555570038fe00040cc30cc0ccfd00037003e0c02b11307c00c01000401010111101100101111140fd0005035555570038fe00040cc30cc0ccfd00037003e0c02b11307c00c02000800808222202202202222020fd0005035555570038fe000007fd870080fe00037003e0c02b11307c00c02000800808222202202202222020fd0005035555570038fe000007fd870080fe00037003e0c02311307c00c01000401010141411411411415140fd000503555557001cf50003e003e0c02311307c00c01000401010141411411411415140fd000503555557001cf50003e003e0c01e06307c00c02aaa80fa000002fa000003feff02000780f70004078003e0c01e06307c00c02aaa80fa000002fa000003feff02000780f70004078003e0c01603307c00c0ef0005030000030000f6ff04fc0003e0c01603307c00c0ef0005030000030000f6ff04fc0003e0c01203307c00c0ef00030303ff03f2000203e0c01203307c00c0ef00030303ff03f2000203e0c01903307c00c0fe000615000010014014f900fd03f2000203e0c01903307c00c0fe000615000010014014f900fd03f2000203e0c0190d307c00c02aaa0008800020020022f900fd03f2000203e0c0190d307c00c02aaa0008800020020022f900fd03f2000203e0c01d11307c00c01004401111141401400101414540fd00fd03f2000203e0c01d11307c00c01004401111141401400101414540fd00fd03f2000203e0c02011307c00c0200a800a08222202200a02822080fd0003033f03f3f2000203e0c02011307c00c0200a800a08222202200a02822080fd0003033f03f3f2000203e0c01f10307c00c010004010101111011001010541fc0003030c00c3f2000203e0c01f10307c00c010004010101111011001010541fc0003030c00c3f2000203e0c01b0d307c00c020008008082222022022fe02fc00fd03f2000203e0c01b0d307c00c020008008082222022022fe02fc00fd03f2000203e0c02011307c00c01000401010141411411411014540fd00030300cc03f2000203e0c02011307c00c01000401010141411411411014540fd00030300cc03f2000203e0c01506307c00c02aaa80f2000303003003f2000203e0c01506307c00c02aaa80f2000303003003f2000203e0c01703307c00c0ef00060300000300007ff7ff04f80003e0c01703307c00c0ef00060300000300007ff7ff04f80003e0c01202307c00eaff02000f80f7000407c003e0c01202307c00eaff02000f80f7000407c003e0c00f01307ce8000078f6ff04fc7803e0c00f01307ce8000078f6ff04fc7803e0c01001307ce80001e680f70004039c03e0c01001307ce80001e680f70004039c03e0c01a03307c003cfd0001e30ef1000101dcfd000050fa0003ee03e0c01a03307c003cfd0001e30ef1000101dcfd000050fa0003ee03e0c01b03307c0066fe0002018006f1000103b8fd000088fa00037703e0c01b03307c0066fe0002018006f1000103b8fd000088fa00037703e0c0230d307c00603e631e03e7060f00f8f0f5000103b0fe00040100510450fd00037703e0c0230d307c00603e631e03e7060f00f8f0f5000103b0fe00040100510450fd00037703e0c0210d307c003c66633301830619819980f5000103b8fd0000a0fe88fd00033703e0c0210d307c003c66633301830619819980f5000103b8fd0000a0fe88fd00033703e0c0220d307c000666363f0183061f8198f0f5000103b0fd000311105054fd00037703e0c0220d307c000666363f0183061f8198f0f5000103b0fd000311105054fd00037703e0c0210d307c006666363001830618019818f5000103b8fd00fe880080fd00033703e0c0210d307c006666363001830618019818f5000103b8fd00fe880080fd00033703e0c0210f307c003c3e1c1e01878f0f00f8f19980f7000103b8fd00fd50fd00037703e0c0210f307c003c3e1c1e01878f0f00f8f19980f7000103b8fd00fd50fd00037703e0c00f01307ce9000101dcf50003ee03e0c00f01307ce9000101dcf50003ee03e0c00f01307ce80000e7f60004059c03e0c00f01307ce80000e7f60004059c03e0c00f01307ce8000078f6ff04fc7803e0c00f01307ce8000078f6ff04fc7803e0c01001307ce800010f80f7000407c003e0c01001307ce800010f80f7000407c003e0c01202307c00eaff0200007ff7ff04f80003e0c01202307c00eaff0200007ff7ff04f80003e0c00f03307c00c0ec000003f2000203e0c00f03307c00c0ec000003f2000203e0c00f03307c00c0ec000003f2000203e0c00f03307c00c0ec000003f2000203e0c00f03307c00c0ec000003f2000203e0c00f03307c00c0ec000003f2000203e0c01303307c00c2ec0002030000f6ff04fc0003e0c01303307c00c2ec0002030000f6ff04fc0003e0c01403307c00c2ec000303000780f70004078003e0c01403307c00c2ec000303000780f70004078003e0c01a03307c00c2ec000203001cfe000078fd000070fe0003e003e0c01a03307c00c2ec000203001cfe000078fd000070fe0003e003e0c01a03307c00c2ec0002030038fe0000ccfd000030fe00037003e0c01a03307c00c2ec0002030038fe0000ccfd000030fe00037003e0c01b03307c00c2ec0002030038fe0005c07cf8787830fe00037003e0c01b03307c00c2ec0002030038fe0005c07cf8787830fe00037003e0c01a03307c00c2ec0002030038fe0000c0fdcc0030fe00037003e0c01a03307c00c2ec0002030038fe0000c0fdcc0030fe00037003e0c01b03307c00c2ec0002030038fe0005c0ccccc0fc30fe00037003e0c01b03307c00c2ec0002030038fe0005c0ccccc0fc30fe00037003e0c01903307c00c2ec0002030038fe00fdcc01c030fe00037003e0c098002c00eb00000108016000eb00000108015c00eb00000108015c00011903307c00c2ec0002030038fe00fdcc01c030fe00037003e0c01a03307c00c2ec0002030038fe0002787cccfe78fe00037003e0c01a03307c00c2ec0002030038fe0002787cccfe78fe00037003e0c01203307c00c0ec000203001cf50003e003e0c01203307c00c0ec000203001cf50003e003e0c01403307c00c0ec000303000780f70004078003e0c01403307c00c0ec000303000780f70004078003e0c01303307c00c0ec0002030000f6ff04fc0003e0c01303307c00c0ec0002030000f6ff04fc0003e0c00f03307c00c0ec000003f2000203e0c00f03307c00c0ec000003f2000203e0c00c02307c00eafff2000203e0c00c02307c00eafff2000203e0c00901307cda000203e0c00901307cda000203e0c00901307cda000203e0c00901307cda000203e0c00801307fd9ff01e0c00801307fd9ff01e0c00801307fd9ff01e0c00801307fd9ff01e0c0060030d70000c0060030d70000c0060030d70000c0060030d70000c006003fd7ff00c006003fd7ff00c002d50002d500a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-7:  The SFO Save As Dialog Uses a List for Files\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par I\rquote ve assumed throughout this course that you know how to }{\i\f4 use}{\f4  desktop programs, but list controls have a lot of options that you may not be aware of.  I\rquote m going to mention them briefly here; if you want to know more about the options, you can look up lists in either the user documentation that comes with the computer and system software, or you can dig the same information out of the toolbox reference manuals.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 target control}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Most lists let you select more than one member by holding down the shift key or option key and clicking.  You can tab from one control to another \endash  if a list control is the target control, you can type a character key, and the List Manager will select the first element of the list that starts with the character you type.  The arrow keys can also be used to move through a list, or you can use the old standby and click on the scroll bar, then click on the list member you want to select.\par As usual, we\rquote ll start with a typical resource for a list control and the flags, then go over the details.  As with the icon control, there are a lot of options, so don\rquote t get too bogged down in the details, yet.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                /* control ID */\par    \{8,8,60,128\},                      /* control Rect */\par    ListControl \{\{\par       $0000,                          /* flags */\par       $1400,                          /* more flags */\par       0,                              /* refcon */\par       0,                              /* list size */\par       5,                              /* List View */\par       $0000,                          /* List Type */\par       0,                              /* List Start */\par       10,                             /* ListMemHeight */\par       5,                              /* List Mem Size */\par       0,                              /* List Ref */\par       0.                              /* Color Ref */\par       \}\};\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-9:  A Typical Icon Button Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab Reserved; set to 0.\par 7\tab 0 for a normal, visible control, 1 for an invisible control.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 6-0\tab Reserved; set to 0.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-13\tab Reserved; set to 0.\par 12\tab Must be set to 1.\par 11\tab Reserved; set to 0.\par 10\tab Must be set to 1.\par 9-4\tab Reserved; set to 0.\par 3-2\tab Defines the type of reference for the color table field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 1-0\tab Defines the type of reference for the list field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab List reference is a pointer.\par 01\tab List reference is a handle.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 10\tab List reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Creating the List Control}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Creating the List Control\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The list control itself is made up of a rectangle and a scroll bar.  The scroll bar appears just to the right of the rectangle, and is always the same height as the rectangle.\par The items in the list are displayed inside the rectangle.  You have control over how many items are visible, and how high each line is, but you cannot control the width (it always matches the width of the rectangle), create sideways lists, or create scattered lists.  In other words, lists are line oriented.\par The fact that lists are line oriented doesn\rquote t mean they can only use text, though.  While we won\rquote t go into details here, it\rquote s possible to create a list of pictures, or anything else you\rquote d like to draw.  The only restriction is that each item in the list must be the same height, and as I mentioned, one entire line will always be set aside for each member of the list.\par With this in mind, it\rquote s pretty easy to understand the various flag settings and the fields in the list resource.  Here\rquote s a field by field breakdown of the parts of the resource that are specific to the list control, along with the values from our example:\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       0,                              /* list size */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You can create a list with nothing in it and fill in the list under program control, or you can create a list with some items already there.  Frankly, it\rquote s pretty tough to create the list from a resource, since the format for a list actually changes, and some lists need a custom drawing routine.  In most cases, you\rquote ll want to create an empty list and fill it in from the program.  That\rquote s how we\rquote ll do it in this section.  For an empty list, the list size field is set to 0.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       5,                              /* List View */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field gives the number of items you can see at any one time.  This has nothing to do with the number of items that are actually in the list; this is the number of lines that the user can see.\par The height of the list is set in a separate field labeled }{\f6\fs20 ListMemHeight}{\f4 .  The height of the control rectangle should be }{\f6\fs20 ListMemHeight*ListView+2}{\f4 ; the extra two pixels give a small border at the top and bottom of the list.\par The width is up to you.  If something in the list is too long to display, the right side will be chopped off.  The user can\rquote t scroll a list horizontally, so it\rquote s a good idea to make lists wide enough to see the entire line.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       $0000,                          /* List Type */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The list type field is another flags word.  Something happened here that would be convenient if it were done throughout the toolbox: to get the default list control, you set all of the bits to 0.\par Bits 15 to 3 are reserved, and must be set to 0.\par Bit 2 controls how the scroll bar is drawn.  Normally, the scroll bar is drawn to the right of the control rectangle, so the area covered by the control is a little wider than the rectangle you code in the resource.  If you set this bit, the size of the list area is reduced enough so the scroll bar lies entirely inside of the control rectangle.  This hacks a little off of the end of each line, but it gives you better control over the space in the window, allowing very precise alignment of the right edge with other controls.\par Bit 1 controls the type of selections allowed.  Normally the user can select any number of items in the list by shift clicking or one of the other selection shortcuts.  If this bit is set, only one item can be selected at a time.\par Bit 0 controls the type of strings used in the list.  Setting the bit to 0 gives the normal p-strings, with a leading length byte.  If the bit is set to 1, the strings should be null terminated strings.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       0,                              /* List Start */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When the list is first drawn, you can set things up so a particular item in the list appears at the top.  Normally this value is set to 1 to show the first item in the list, or to 0 when you aren\rquote t supplying a default list in the resource.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       10,                             /* ListMemHeight */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This value gives the height of one line of the list, in pixels.  A value of 10 works well when the list contains text strings using the system font.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       5,                              /* List Mem Size */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The list itself is defined as an array of list items, but strangely enough, the elements of the array don\rquote t have a fixed size.  We\rquote ll go into this in gory detail in a moment, but for now, this is the field you use to specify the length of each element of the list array.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       0,                              /* List Ref */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field points to a list resource.  Using the list resource, you can set up a default list, but there are a number of dicey technical issues related to doing so, especially if your list needs a special list drawing routine.  If you want to try setting up a default list, refer to the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , pages 28-57 and E-51 to get started.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Building a List}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Building a List\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 With a list control in place, the next step is to create the list.  The list itself is an array with two fixed fields in front, and any number of other fields afterward.  As a general rule, it\rquote s best to define your own list type instead of using the one from the interface file.  After all, the size of each element in the list and the size of the list itself need to be customized for each list.\par In the simplest, and normal, case, each list element is a five byte long structure.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f6\fs20 typedef struct listElement \{\par    char *memPtr;\par    Byte memFlag;\par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20    \}  listElement;\par }{\f4 \par }{\f6\fs20 memPtr}{\f4  is a pointer to a p-string; this is the text the List Manager will draw on each line.  If the first thing in your list isn\rquote t a p-string, you have to supply your own custom drawing routine to draw the list elements.  }{\f6\fs20 memFlag}{\f4  is a flag byte.  (Since it is a byte, not a word, there are only eight bits, not the sixteen bits you are used to in flag words.)  Bits 6 and 7, in combination, let you tell the List Manager if the list member can be selected, and let the List Manager tell you if the memory actually has been selected.  This flag byte has to be in this location for the List Manager to work correctly with your list.\par \par }\pard \qj\li360\ri1440\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1440\adjustright {\f4 Bits 7-6\tab Meaning\par }\pard \qj\li360\ri1440\keepn\widctlpar\tx1440\adjustright {\f4 00\tab The list member can be selected, but it isn\rquote t currently selected.\par 01\tab The list member is disabled, and always shows up as dimmed.\par 10\tab The list member can be selected, and at the moment, it is selected.\par }\pard \qj\li360\ri1440\widctlpar\tx1440\adjustright {\f4 11\tab The list member is disabled, but it is currently selected.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The list itself is an array of these records.  You can create the list dynamically if it will change size, or you can just use a fixed size array.  Using a fixed size array, you might have something like this:\par \par }{\f6\fs20 listElement list[8];}{\f4 \par \par The list itself should be filled in before you pass the list to the List Manager.  Be sure and fill in both the pointer to the string and the flag byte.  (The flag byte is normally initialized to 0.)\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewList2}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once you have a list and a control, the next step is to connect the two.  That\rquote s done with the List Manager\rquote s }{\f6\fs20 NewList2}{\f4  tool call:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 NewList2(NULL, 1, (Ref) list, 0, 10, cHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are several parameters, most of which are actually overriding values from the resource definition.  The first parameter is the address of the subroutine that draws lines in the list.  Passing }{\f6\fs20 NULL}{\f4 , as we\rquote re doing here, tells the List Manager to do that for us.  Passing }{\f6\fs20 (Pointer) -1}{\f4  tells the List Manager to keep on using whatever drawing routine it was using before.  You can also pass the address of a custom drawing routine; that\rquote s something we\rquote ll talk about a little later.\par The second parameter, which is a 1 in our sample call, is the element in the list to put at the top.  The first element in the list is numbered 1.\par The next two parameters are the list itself.  The first is a pointer to the first element of the list.  The parameter right after, which is a 0 in our sample call, tells the List Manager what sort of value we are passing for the list.  The 0 we are passing tells the List Manager to expect a pointer, 1 is used for a handle, and 2 is used if the list is given as a resource number.\par The next element is the size of the list; that\rquote s the number of elements that are actually in the list at the current time.  In this example, we\rquote re passing the size of the array, so each element of the array needs to point to a valid string, and needs to have the flag byte initialized.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlHandleFromID}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last parameter is the control handle, which you can get by calling }{\f6\fs20 GetCtlHandleFromID}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Sorting Lists}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Sorting Lists\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sometimes it makes sense to sort a list, say alphabetically, before you display the list, but it\rquote s easier to build the list out of order.  The most common list of all, a list of file names, is a good example.  Making calls to GS/OS, it\rquote s pretty easy to get all of the file names, but GS/OS passes them back in the order that the files appear on disk, which isn\rquote t usually alphabetical order.  People are used to seeing the file names in alphabetical order, though, and some of the keyboard shortcuts the List Manager supports only work when the list is sorted alphabetically.\par The List Manager can sort the list for you.  In fact, it\rquote s pretty easy to sort the list:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SortList2(NULL, cHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 This call sorts the list, doing all sorts of intelligent things, like ignoring the case of letters and handling foreign characters, like \u252\'9f, in a reasonable way.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 You can get tricky with this call, passing a custom sort function for the first parameter.  If you would like to see the details, refer to the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 1}{\f4 , page 11-24.\par The last parameter, of course, is the list control handle.\par If you sort the list after it has already been displayed, or if you add, remove, or change a member of the list, you need to tell the List Manager to redraw all or part of the list.  After all, the List Manager really doesn\rquote t know what you are doing to the list while your program has control.  To redraw the list, make a call to }{\f6\fs20 DrawMember2}{\f4 , like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 DrawMember2(item, cHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f6\fs20 DrawMember2}{\f4  draws the entire list if you pass 0, and a specific item from the list if you pass some other value.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Custom Draw Procedures}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Custom Draw Procedures\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Here\rquote s a framework for a custom list draw procedure:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 #pragma databank 1\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * CustomDraw\par *\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 * Custom List Drawing Procedure\par *\par * Parameters:\par *    r - rectangle enclosing the area where the list element is\par *        to be drawn\par *    member - pointer to the list element to draw\par *    ctlHandle - scroll bar handle\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 *\par ***************************************************************/\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 \par void CustomDraw (Rect r, ListElementPtr member, CtlRecHndl cHandle)\par \par \{\par \}\par \par #pragma databank 0\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-10:  Custom Draw Function Framework\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par To use this function, pass the address of the subroutine (}{\f6\fs20 CustomDraw}{\f4 ) as the first parameter to }{\f6\fs20 NewList2}{\f4 .  As with any subroutine that will be called by the tools, you must remember to tell the compiler to reset the data bank register with the }{\f6\fs20 databank}{\f4  pragma.\par The first of the parameters is a rectangle enclosing the area where the list element is to be drawn.  You\rquote re on the honor system \endash  drawing outside of the lines leads to a messy window.  The next parameter is a pointer to the list element to draw.  If you need to know the relative position, you can count it off by scanning your array, or calculate it based on the address of the array.  Be sure to check the flag byte to see if the list member is disabled; you generally need to draw the item in a dimmed state if it is.  You also need to check to see if the item is selected; selected items are generally drawn in inverse.\par \par Problem 14-5:  Start with the solution to Problem 14-4.  Add a list control that is tall enough for 4 items and 130 pixels wide, as seen in Figure 14-8.  From your program, create a list with ten states:\par \par }\pard \qj\li720\widctlpar\tx2520\tx4320\tx6120\tx7920\adjustright {\f4 California\tab Colorado\tab Connecticut\tab New Hampshire\tab New York\par New Mexico\tab New Jersey\tab Alaska\tab Alabama\tab Arkansas\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Create the list with the states in this order, then call }{\f6\fs20 SortList2}{\f4  to sort the items before calling }{\f6\fs20 NewList2}{\f4  to display the list.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 You should be able to select any of the states, or even a range of states, and you should be able to use keyboard characters to select a particular member.  Make sure all of that works for your list.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1096{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag444637227\blipupi72{\*\blipuid 1a80a02ba5f3f5199dad26d2e12fad92}2d0600000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000126033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0da00033000003fed000503f0000003c019033c00033af9aa00c0da00033000003fed000503f0000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c017033c00033af9aa00c0da000330000003ecfffe000103c017033c00033af9aa00c0da000330000003ecfffe000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c010033c00003fd1fff0000030f7000103c010033c00003fd1fff0000030f7000103c012033c000030d2000003f000003cf7000103c012033c000030d2000003f000003cf7000103c01d093c00003000fff0f0003cfe000103c0dd000003f000003ff7000103c01d093c00003000fff0f0003cfe000103c0dd000003f000003ff7000103c01f073c000030000f00f0f400003cfc00003cea000003f000013fc0f8000103c01f073c000030000f00f0f400003cfc00003cea000003f000013fc0f8000103c02c1c3c000030000f00ffc0fc03fc000fc03fc0003ff000ffc03fc03fc0ffc0eb000003f000013ff0f8000103c02c1c3c000030000f00ffc0fc03fc000fc03fc0003ff000ffc03fc03fc0ffc0eb000003f000013ff0f8000103c02b163c000030000f00f0f03c0f000003c0f00000f0f0003c00fef001003cea000003f000013ffcf8000103c02b163c000030000f00f0f03c0f000003c0f00000f0f0003c00fef001003cea000003f000013ffcf8000103c02b1b3c000030000f00f0f03c03fc0003c03fc000f0f0003c00fff03fc03cea000003f000013ffff8000103c02b1b3c000030000f00f0f03c03fc0003c03fc000f0f0003c00fff03fc03cea000003f000013ffff8000103c02c1c3c000030000f00f0f03c000f0003c000f000f0f0003cf0f00000f03cf0eb000003f000013cf0f8000103c02c1c3c000030000f00f0f03c000f0003c000f000f0f0003cf0f00000f03cf0eb000003f000013cf0f8000103c02b1c3c000030000f00f0f0ff03fc000ff03fc0003ff0000fc03fc03fc00fc0eb000003ef00003cf8000103c02b1c3c000030000f00f0f0ff03fc000ff03fc0003ff0000fc03fc03fc00fc0eb000003ef00003cf8000103c00e033c000030d2000003e5000103c00e033c000030d2000003e5000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c007003cb2000103c007003cb2000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c00e033c000030d2000003e5000103c00e033c000030d2000003e5000103c019093c00003000fff0f0003cfe000103c0dd000003e5000103c019093c00003000fff0f0003cfe000103c0dd000003e5000103c016073c000030000f00f0f600000fe2000003e5000103c016073c000030000f00f0f600000fe2000003e5000103c023183c000030000f00ffc0fc03fc000fc03fc000003ff00ff00ff0e7000003e5000103c023183c000030000f00ffc0fc03fc000fc03fc000003ff00ff00ff0e7000003e5000103c0210f3c000030000f00f0f03c0f000003c0f0fe00010f00fd3ce7000003e5000103c0210f3c000030000f00f0f03c0f000003c0f0fe00010f00fd3ce7000003e5000103c021143c000030000f00f0f03c03fc0003c03fc000000f00fd3ce7000003e5000103c021143c000030000f00f0f03c03fc0003c03fc000000f00fd3ce7000003e5000103c020133c000030000f00f0f03c000f0003c000f000000ffc3ce7000003e5000103c020133c000030000f00f0f03c000f0003c000f000000ffc3ce7000003e5000103c023183c000030000f00f0f0ff03fc000ff03fc03c0003f00ff00ff0e7000003e5000103c023183c000030000f00f0f0ff03fc000ff03fc03c0003f00ff00ff0e7000003e5000103c012033c000030f40000f0e0000003e5000103c012033c000030f40000f0e0000003e5000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c00c033c00000fdbffdb000103c00c033c00000fdbffdb000103c012033c00000ce0000003fe000003db000103c012033c00000ce0000003fe000003db000103c022073c00000c00000c0ffc000203c3c0f90002f0003cf700040300030003db000103c022073c00000c00000c0ffc000203c3c0f90002f0003cf700040300030003db000103c020073c00000c00000f0ffc000203c3c0f90000f0f5000403000cc003db000103c020073c00000c00000f0ffc000203c3c0f90000f0f5000403000cc003db000103c02d1e3c00000c00000fcf03fc3c03c003c3c0ffcfffc0ffc03fc0ffc0fc0f3c0ff0fb00040300303003db000103c02d1e3c00000c00000fcf03fc3c03c003c3c0ffcfffc0ffc03fc0ffc0fc0f3c0ff0fb00040300303003db000103c02c123c00000c00000fff0f0f3cf3c003ffc3c3cf3cfdf00700f0f03c0fc03c3cfb00040300c00c03db000103c02c123c00000c00000fff0f0f3cf3c003ffc3c3cf3cfdf00700f0f03c0fc03c3cfb00040300c00c03db000103c02d0d3c00000c00000f3f0fff3cf3c003fec301cf3cfef0083fc0f0f03c0f003ffcfb00040303f03f03db000103c02d0d3c00000c00000f3f0fff3cf3c003fec301cf3cfef0083fc0f0f03c0f003ffcfb00040303f03f03db000103c02c053c00000c0000fe0f04000f0f0003fec301cf3cfef00000fef0033c0f003cfa00040300303003db000103c02c053c00000c0000fe0f04000f0f0003fec301cf3cfef00000fef0033c0f003cfa00040300303003db000103c02d1e3c00000c00000f0303fc0f0f0003c3c0ffcf3cf0ffc03fc0f0f0ff0f000ff0fb00040300303003db000103c02d1e3c00000c00000f0303fc0f0f0003c3c0ffcf3cf0ffc03fc0f0f0ff0f000ff0fb00040300303003db000103c016033c00000cf10000f0f100040300303003db000103c016033c00000cf10000f0f100040300303003db000103c012033c00000ce0000403003ff003db000103c012033c00000ce0000403003ff003db000103c012033c00000ce0000003fe000003db000103c012033c00000ce0000003fe000003db000103c019073c00000c00000c0ffb000103c0ec000003fdffdb000103c019073c00000c00000c0ffb000103c0ec000003fdffdb000103c01b073c00000c00000f0ffb000103c0ec000003fecc00cfdb000103c01b073c00000c00000f0ffb000103c0ec000003fecc00cfdb000103c025183c00000c00000fcf03fc3c03c00003c0ff03cf03fc03fc0f0ff5000003fd33db000103c025183c00000c00000fcf03fc3c03c00003c0ff03cf03fc03fc0f0ff5000003fd33db000103c0250e3c00000c00000fff0f0f3cf3c00003fec302f00f00fd0ff5000003fecc00cfdb000103c0250e3c00000c00000fff0f0f3cf3c00003fec302f00f00fd0ff5000003fecc00cfdb000103c025183c00000c00000f3f0fff3cf3c00003c3ffc3c003fc0fff0f3ff5000003fd33db000103c025183c00000c00000f3f0fff3cf3c00003c3ffc3c003fc0fff0f3ff5000003fd33db000103c027053c00000c0000fe0f0f000f0f0003c3c3c003c0000f0f0003cff5000003fecc00cfdb000103c027053c00000c0000fe0f0f000f0f0003c3c3c003c0000f0f0003cff5000003fecc00cfdb000103c025183c00000c00000f0303fc0f0f0000ff00ff03c003fc03fc0c0ff5000003fd33db000103c025183c00000c00000f0303fc0f0f0000ff00ff03c003fc03fc0c0ff5000003fd33db000103c017033c00000cee000103fcf5000003fecc00cfdb000103c017033c00000cee000103fcf5000003fecc00cfdb000103c010033c00000ce0000003fd33db000103c010033c00000ce0000003fd33db000103c00c033c00000fdbffdb000103c00c033c00000fdbffdb000103c01f073c00000ffffff3f0fcff02fcffcffdff00c3f0ff03c000000fdb000103c01f073c00000ffffff3f0fcff02fcffcffdff00c3f0ff03c000000fdb000103c01b073c00000ffffff0f0fcff02fc3f0febff03c000000fdb000103c01b073c00000ffffff0f0fcff02fc3f0febff03c000000fdb000103c026183c00000ffffff030fc03c3fc3ffc0c0fc03f0f0f03fc03fc03f4ff03c000000fdb000103c026183c00000ffffff030fc03c3fc3ffc0c0fc03f0f0f03fc03fc03f4ff03c000000fdb000103c0240e3c00000ffffff000f0f0c30c3ffc00fe0f02c03fc3fdf0f4ff03c000000fdb000103c0240e3c00000ffffff000f0f0c30c3ffc00fe0f02c03fc3fdf0f4ff03c000000fdb000103c026183c00000ffffff0c0f000c30c3ffc330f000ff0ffc3f0fff0f0f4ff03c000000fdb000103c026183c00000ffffff0c0f000c30c3ffc330f000ff0ffc3f0fff0f0f4ff03c000000fdb000103c024053c00000ffffffef00bfff0f0fffc3f0f0fffc03fc3fdf0f4ff03c000000fdb000103c024053c00000ffffffef00bfff0f0fffc3f0f0fffc03fc3fdf0f4ff03c000000fdb000103c021183c00000ffffff0fcfc03f0f0fffc3f0fc03f0f0f00fc03fc03f0ffdb000103c021183c00000ffffff0fcfc03f0f0fffc3f0fc03f0f0f00fc03fc03f0ffdb000103c00c033c00000fdbffdb000103c00c033c00000fdbffdb000103c010033c00000fdffffe000003db000103c010033c00000fdffffe000003db000103c012033c00000ce0000403003ff003db000103c012033c00000ce0000403003ff003db000103c020073c00000c00000c0ffc000203c3c0fe00000ff000040300303003db000103c020073c00000c00000c0ffc000203c3c0fe00000ff000040300303003db000103c020073c00000c00000f0ffc000203c3c0fe00000ff000040300303003db000103c020073c00000c00000f0ffc000203c3c0fe00000ff000040300303003db000103c023143c00000c00000fcf03fc3c03c003c3c0ff03cf0f0ff100040300303003db000103c023143c00000c00000fcf03fc3c03c003c3c0ff03cf0f0ff100040300303003db000103c023143c00000c00000fff0f0f3cf3c000ff03c3c3f00f3cf100040303f03f03db000103c023143c00000c00000fff0f0f3cf3c000ff03c3c3f00f3cf100040303f03f03db000103c023143c00000c00000f3f0fff3cf3c0003c03c3c3c00ff0f100040300c00c03db000103c023143c00000c00000f3f0fff3cf3c0003c03c3c3c00ff0f100040300c00c03db000103c023053c00000c0000fe0f0b000f0f00003c03c3c3c00f3cf100040300303003db000103c023053c00000c0000fe0f0b000f0f00003c03c3c3c00f3cf100040300303003db000103c023143c00000c00000f0303fc0f0f00003c00ff03c00f0ff1000403000cc003db000103c023143c00000c00000f0303fc0f0f00003c00ff03c00f0ff1000403000cc003db000103c012033c00000ce000040300030003db000103c012033c00000ce000040300030003db000103c012033c00000ce0000003fe000003db000103c012033c00000ce0000003fe000003db000103c00c033c00000fdbffdb000103c00c033c00000fdbffdb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-8:  Control Sampler with List Control\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk78}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 list controls}{\rxe bk78}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Pop-up Menus}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Pop-up Menus\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk79}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Pop-up menus are a cross between the concept of a radio button and the user interface of a menu.  The control itself has two parts, a title (on the left in Figure 14-9) and the result, or pop-up rectangle (on the right).  Figure 14-9 shows a window with a typical pop-up control; this one is from Design Master.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1097{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw197\pich154\picwgoal3940\pichgoal3080\macpict\bliptag1467382658\blipupi72{\*\blipuid 57767b82449ce3ce579bdecb11935e82}09c300000000009a00c51101a00082a0008e01000a0000000002d0024098001a00000000009a00c800000000009a00c500000000009a00c5000102e70002e7000af800003ff4ff00fcff000af800003ff4ff00fcff000af8000030f400000cff000af8000030f400000cff000af8000030f400000cff000af8000030f400000cff0010f8000030fd00021800f0fb00000cff0010f8000030fd00021800f0fb00000cff0010f8000030fd0002180198fb00020fc00010f8000030fd0002180198fb00020fc00014f8000a300007f0f0f8f180f1f198fe00020fc00014f8000a300007f0f0f8f180f1f198fe00020fc00014f80003300006d9fe990381999998fe00020fc00014f80003300006d9fe990381999998fe00020fc00014f8000a300006d99999f9819999b8fe00020fc00014f8000a300006d99999f9819999b8fe00020fc00014f8000a300006d9999981999998d8fe00020fc00014f8000a300006d9999981999998d8fe00020fc00014f8000a300006d8f0f8f0f0f1f118fe00020fc00014f8000a300006d8f0f8f0f0f1f118fe00020fc00010f8000030fa00020180f0fe00020fc00010f8000030fa00020180f0fe00020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000c001ff9ff00f0f400020fc0000c001ff9ff00f0f400020fc0000c001ff9ff00f0f400020fc0000c001ff9ff00f0f400020fc00013001ff9ff00f0fd00031800f1f0fc00020fc00013001ff9ff00f0fd00031800f1f0fc00020fc00015011f07fbff019ff0fd000318019998fc00020fc00015011f07fbff019ff0fd000318019998fc00020fc00016011f33fbff099ff00007f0f0f8f19998fc00020fc00016011f33fbff099ff00007f0f0f8f19998fc00020fc000180c1f332704f3e03c3c1c300006d9fd9900f0fc00020fc000180c1f332704f3e03c3c1c300006d9fd9900f0fc00020fc00019051f331e6493e4fe9908b00006d99999f999b0fc00020fc00019051f331e6493e4fe9908b00006d99999f999b0fc00020fc00019111f333e6493e4999998300006d99999819998fc00020fc00019111f333e6493e4999998300006d99999819998fc00020fc00019051f333e6667e4fe9908f00006d8f0f8f0f198fc00020fc00019051f333e6667e4fe9908f00006d8f0f8f0f198fc00020fc00011091f073f0667e49c3c1c30f400020fc00011091f073f0667e49c3c1c30f400020fc0000c001ff9ff00f0f400020fc0000c001ff9ff00f0f400020fc0000c001ff9ff00f0f400020fc0000c001ff9ff00f0f400020fc00009f800003ff3ff01c00009f800003ff3ff01c00009f800003ff3ff01c00009f800003ff3ff01c00011f800003ffdff04e7fe670e0ffcff01c00011f800003ffdff04e7fe670e0ffcff01c00011f800003ffdff04e7fe666667fcff01c00011f800003ffdff04e7fe666667fcff01c00012f800093ffff80f0f070f0e6667fcff01c00012f800093ffff80f0f070f0e6667fcff01c00014f800103ffff9266666679e660ffffff3ffffc00014f800103ffff9266666679e660ffffff3ffffc00014f800103ffff9266666070e664ffffff5ffffc00014f800103ffff9266666070e664ffffff5ffffc00014f800103ffff92666667e666667fffff6ffffc00014f800103ffff92666667e666667fffff6ffffc00014f800103ffff9270f070e670e67fffff77fffc00014f800103ffff9270f070e670e67fffff77fffc0000cf800003ff6ff04f7bfffc0000cf800003ff6ff04f7bfffc0000cf800003ff6ff04f7dfffc0000cf800003ff6ff04f7dfffc0000cf800003ff6ff04f7efffc0000cf800003ff6ff04f7efffc0000cf8000030f6000407f00fc0000cf8000030f6000407f00fc0000cf8000030f6000406c00fc0000cf8000030f6000406c00fc00012f8000030fd00011801fef0fe0003600fc00012f8000030fd00011801fef0fe0003600fc00012f8000030fd00041801986198fd00020fc00012f8000030fd00041801986198fd00020fc00013f80009300007f0f0f8f1986180fd00020fc00013f80009300007f0f0f8f1986180fd00020fc00013f80003300006d9fe9902f06180fd00020fc00013f80003300006d9fe9902f06180fd00020fc00013f80009300006d99999f9986180fd00020fc00013f80009300006d99999f9986180fd00020fc00013f80009300006d9999981986198fd00020fc00013f80009300006d9999981986198fd00020fc00012f80006300006d8f0f8f1fef0fd00020fc00012f80006300006d8f0f8f1fef0fd00020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc00013f8000030fd00051801180000f0fe00020fc00013f8000030fd00051801180000f0fe00020fc00013f8000030fd000518019800c198fe00020fc00013f8000030fd000518019800c198fe00020fc00014f80010300007f0f0f8f1d8f1f180f1f1980fc00014f80010300007f0f0f8f1d8f1f180f1f1980fc00014f80003300006d9fe9909f998c1819999980fc00014f80003300006d9fe9909f998c1819999980fc00014f80010300006d99999f9b998c1819999b80fc00014f80010300006d99999f9b998c1819999b80fc00014f80010300006d99999819998d9999998d80fc00014f80010300006d99999819998d9999998d80fc00014f80010300006d8f0f8f188f070f0f1f1180fc00014f80010300006d8f0f8f188f070f0f1f1180fc0000df8000030f700050180f00fc0000df8000030f700050180f00fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000ef8000430007fff80f800020fc0000ef8000430007fff80f800020fc0000df8000330001ffef700020fc0000df8000330001ffef700020fc0000df80003300007f8f700020fc0000df80003300007f8f700020fc0000df80003300001e0f700020fc0000df80003300001e0f700020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc0000af8000030f400020fc00009f800003ff3ff01c00009f800003ff3ff01c00009f800003ff3ff01c00009f800003ff3ff01c00002e70002e700a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-9:  A Typical Pop-up Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Figure 14-9 shows the control in its \ldblquote popped\rdblquote  state, when the user is pressing on the control.  In this state, the menu associated with the control is visible.  If there are more menu items than will fit in the available space, the uppermost or bottom-most menu item will be a scroll arrow, so there is no theoretical limit to the number of choices you can offer, other than the number of menu items you can specify.  In the \ldblquote unpopped\rdblquote  state, the menu vanishes, and the currently selected choice is shown in the pop-up rectangle.  The title is just there for information, but if you click on the title, the menu pops up.\par I mentioned that the pop-up control implements the concept of a radio button, and that\rquote s perfectly true.  In both cases, the idea is to offer the user one choice out of a lot of possible choices.  The advantage of pop-up controls over radio buttons is that they don\rquote t use much space, even when you need to offer a lot of choices.  The advantage of radio buttons is that the user can see all of the available choices easily, without popping the control.\par Technically, you can use a pop-up control to select multiple choices from a list by checking the active choices, but from a user interface viewpoint, this stinks.  A pop-up menu can only show one choice, not all of the ones that are selected.  You could also do the same thing with radio buttons by putting each radio button in a separate family.  That\rquote s bad, too.  If you need to offer multiple on-off choices, use check boxes.\par While pop-up controls are pretty complicated, there isn\rquote t nearly as much to learn before you can use them as you might think.  The reason is that a pop-up control really is a pop-up menu; the menu itself looks just like any other menu you might create for your main menu bar.  You still have all of the same options and choices, and you even use the same resource types to define the menu.  In fact, most of this section deals with the choices you can make that effect the way the control itself is drawn.\par Here\rquote s a typical pop-up control resource, along with its associated menu and menu item resources.  The flags are defined below, and the various fields and flags are discussed in detail below the flag definitions.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rControlTemplate (1001) \{\par    10,                                  /* control ID */\par    \{8,8,20,108\},                        /* control Rect */\par    PopUpControl \{\{\par       $0000,                            /* flags */\par       $3002,                            /* more flags */\par       0,                                /* refcon */\par       50,                               /* Title Width */\par       1001,                             /* menu Ref */\par       300,                              /* Initial Value */\par       0,                                /* Color Ref */\par       \}\};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (1001) \{                 /* the Color menu */\par    1001,                                /* menu ID */\par    refIsResource*menuTitleRefShift      /* flags */\par       + refIsResource*itemRefShift\par       + fAllowCache,\par    1001,                                /* menu title resource ID */\par    \{300,301,302\};                       /* menu item resource IDs */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (300) \{\par    300,                                 /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    300                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (301) \{\par    301,                                 /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    301                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (302) \{\par    302,                                 /* menu item ID */\par    "","",                               /* key equivalents */\par    0,                                   /* check character */\par    refIsResource*itemTitleRefShift,     /* flags */\par    302                                  /* menu item title resource ID */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rPString (1001, noCrossBank) \{"Color"\};\par resource rPString (300, noCrossBank) \{"Red"\};\par resource rPString (301, noCrossBank) \{"Green"\};\par resource rPString (302, noCrossBank) \{"Blue"\};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 14-11:  A Typical Pop-up Control\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 flag}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-8\tab These bits set the }{\f6\fs20 ctlHilite}{\f4  field for the control.  For a pop-up control, this will normally be $00xx, giving an active control.  If you want to create an inactive control, use $FFxx.  (You can change the control from active to inactive using Control Manager calls, but they aren\rquote t covered in this course.)\par 7\tab 0 for a normal, visible control, 1 for an invisible control.\par 6\tab If this bit is set, the pop-up control will have extra white space for scrolling.  In the examples we\rquote ll use here, the bit will always be clear.  Refer back to the toolbox reference manual if you want to explore this option.\par 5\tab Setting this bit highlights the menu title; clearing it draws the title in the normal way.\par 4\tab This bit is used to get rid of the title.  (For a pop-up control, the title is the name that appears in the rectangle at the left of the pop-up part of the control.)  If this bit is set, no title will be shown.  Even if you don\rquote t want a title, though, you still have to put something valid in the title field, and the title width field is still used.\par 3\tab The current selection is generally shown in the box that pops up when the control is selected.  If this bit is set, the box is left empty.\par 2\tab Pop-up controls can be quite long, expanding well beyond the edge of a window.  Setting this bit tells the Control Manager not to allow the pop-up control to extend beyond the edge of the window, even if there are enough menu items that all of the choices can\rquote t be shown.\par 1\tab The title is normally left justified.  If this bit is set, the title is right justified, and the left edge of the title rectangle and the title width field are adjusted to eliminate unused pixels on the left side of the control.  (See the description of the title width field for some pictures that explain this better.)\par 0\tab The selection rectangle normally extends from title width pixels past the left edge of the control rectangle to the right edge of the control rectangle, with the selected text left justified in the available space.  Setting this bit right justifies the selected item, adjusting the size of the selection rectangle to fit near the left edge of the text.\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 moreFlags}{\f4  bits\tab use\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 15-14\tab Reserved; set to 0.\par 13-12\tab Must be set to 1.\par 11-5\tab Reserved; set to 0.\par 4-3\tab Defines the type of reference for the color table field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Color table reference is a pointer.\par 01\tab Color table reference is a handle.\par 10\tab Color table reference is a resource ID.\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f4 2\tab Defines the type of reference in the menu reference field.  A value of zero tells the Control Manager that the menu is given as a menu template, just like you are used to laying out menus for the program.  A value of one tells the Control Manager to expect a menu string.  We\rquote ll use a value of zero, since it matches what you are already used to doing, and works just as well as the other method.  For details about menu text strings, see the toolbox reference manual.\par 1-0\tab Defines the type of reference for the menu field.\par }\pard \qj\fi-360\li2880\ri360\keepn\widctlpar\adjustright {\f4 00\tab Menu reference is a pointer.\par 01\tab Menu reference is a handle.\par }\pard \qj\fi-360\li2880\ri360\widctlpar\adjustright {\f4 10\tab Menu reference is a resource ID.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Size of the Control and Text Justification}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Size of the Control and Text Justification\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The size of the pop-up control is determined by two things: the control rectangle and the title width field.  The control rectangle sets the overall size of the control, extending from the left edge of the title to the right edge of the pop-up rectangle, and from the top to bottom of both fields.  The text you use in the title and in the various menu items will govern the width of the control.  The height should generally be 12 pixels, which gives enough room to display text in the system font, but doesn\rquote t take up any extra screen space.\par The title width field determines where the boundary is between the title and the pop-up rectangle.  It\rquote s measured from the left edge of the control.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1098{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw156\pich90\picwgoal3120\pichgoal1800\macpict\bliptag1609621694\blipupi72{\*\blipuid 5ff0e0be0d1cdbaa205e20b99f816b9c}02d0ffffffff0059009b1101a0008201000affffffff0059009b31002e00010041009b3809000000000000000031001c0052002f009b09ffffffffffffffff3809000000000000000031001f006a002c0082a10096000c01000000020000000000000001000a001f006a002b00812c000c00150948656c7665746963610300150d000a2b6b2803526564a00097a10096000c0100000002000000000000000e0000001e01000a00310012003d009105000328003a001320436f6c6f72202020202020202020202020202020202020202020202020202020a000970e0000002101000affffffff0059009b09ffffffffffffffff310031006a003e0094a10096000c0100000002000000000000000e0000001e01000a0031006a003d0093295805477265656ea000970e0000002101000affffffff0059009b09000000000000000031004000520053009b09ffffffffffffffff38090000000000000000310043006a00500082a10096000c01000000020000000000000001000a0043006a004f00810500012a1204426c7565a0009701000affffffff0059009b09ffffffffffffffff220025000100dc220013009a00eea10096000c02000000020000000000000001000a000400200010007b28000d002911636f6e74726f6c2072656374616e676c65a0009701000affffffff0059009b71001e00070001000d000d000a00010007000d000a000d000d000d000a000122000a000d180071001e0007008e000d009a000a009a000d008e000a008e0007008e000a009a22000a00761800220058000100eea10096000c02000000020000000000000001000a004c00100058004428005500150b7469746c65207769647468a0009701000affffffff0059009b71001e004e00010054000d00510001004e000d0051000d0054000d00510001220051000d060071001e004e004400540050005100500054004400510044004e00440051005022005100410300a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-10:  The Rectangle and Title Width Fields\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The title text is normally left justified in the part of the control rectangle to the left of title width.  If you set bit 1 of the }{\f6\fs20 flag}{\f4  word, the title text is right justified.  The rectangle itself also shrinks, pulling even with the left edge of the title text (with a small margin to make things look  neat).  This doesn\rquote t change the overall width of the control, it just doesn\rquote t use all of the available space.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1099{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw156\pich90\picwgoal3120\pichgoal1800\macpict\bliptag-1166432805\blipupi72{\*\blipuid ba79a5db520d769603c870db611d0ed1}04f8ffffffff0059009b1101a0008201000affffffff0059009b09882288228822882230002e00010041003809000000000000000031001c0052002f009b09ffffffffffffffff3809000000000000000031001e0069002c0082a10096000c01000000020000000000000001000a001e006a002a007d2c000c00150948656c7665746963610300150d000a2b6b2703526564a0009701000affffffff0059009b09ffffffffffffffff31002e00320041009b38a10096000c0100000002000000000000000e0000001e01000a00300036003c005a05000328003900371b436f6c6f7220202020202020202020202020202020202020202020a000970e0000002101000affffffff0059009b3100300069003e0094a10096000c0100000002000000000000000e0000001e01000a0030006a003c0086293405477265656ea000970e0000002101000affffffff0059009b09000000000000000031004000520053009b09ffffffffffffffff38090000000000000000310042006900500082a10096000c01000000020000000000000001000a0042006a004e007f0500012a1204426c7565a0009701000affffffff0059009b09ffffffffffffffff220025000100dc220013009a00eea10096000c02000000020000000000000001000a00030028000f007228000c002911636f6e74726f6c2072656374616e676c65a0009701000affffffff0059009b070000000022e0c0e0c00000a000a0a100a40002060001000a0000000000000000070001000122000900000cfd23000023000323000023000323000023f4fd23000084000a0000000000000000a000a301000affffffff0059009b84004400060002000c000c0006000b000c7fff00070007000b7fff0008000300077fff0009000200037fff000a000200067fff000b0006000a7fff000c000a000c7fff7fffa000a122000a000d1800070000000022e0c0e0c00000a000a0a100a40002060001000a000000000000000007000100012200090099f4032300002300fd2300002300fd230000230c0323000084000a0000000000000000a000a301000affffffff0059009b8400440006008d000c00980006008d008f7fff0007008f00937fff0008009300977fff0009009700987fff000a009400987fff000b009000947fff000c008d00907fff7fffa000a122000a00761800220058000100eea10096000c02000000020000000000000001000a004b00140057003e28005400150b7469746c65207769647468a0009701000affffffff0059009b070000000022e0c0e0c00000a000a0a100a40002060001000a0000000000000000070001000122005000000cfd23000023000323000023000323000023f4fd23000084000a0000000000000000a000a301000affffffff0059009b840044004d00020053000c004d000b000c7fff004e0007000b7fff004f000300077fff0050000200037fff0051000200067fff00520006000a7fff0053000a000c7fff7fffa000a1220051000d0500070000000022e0c0e0c00000a000a0a100a40002060001000a00000000000000000700010001220050004ff4032300002300fd2300002300fd230000230c0323000084000a0000000000000000a000a301000affffffff0059009b840044004d00430053004e004d004300457fff004e004500497fff004f0049004d7fff0050004d004e7fff0051004a004e7fff00520046004a7fff0053004300467fff7fffa000a122005100410300a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-11:  Right Justified Title\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The selection is normally left justified, too.  You can right-justify the text in the pop-up rectangle by setting bit 0 of the flag word.  The box still gets shrunk, so the net effect is to shrink the visible part of the pop-up rectangle so it is even with the right edge of the text.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Display Options}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Display Options\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 flag}{\f4  word has a number of options to control the overall appearance of the pop-up control.  You can tell the Control Manager to print the title normally or in a highlighted state, to skip printing either the control title or the currently selected value, to add some extra whitespace to make scrolling easier, or to restrict the control\rquote s popped state so it doesn\rquote t draw past the edge of the window.  Once you finish Problem 14-6 you can experiment with these flags to see exactly what they do.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Detecting the Control State}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Detecting the Control State\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GetCtlValue}}}{\v\f6\fs20 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When the user selects something from a pop-up menu, the Control Manager will report a hit on the control.  Once you know something has happened to the control, you can use }{\f6\fs20 GetCtlValue}{\f4  to read the state of the control.  The value returned will be the menu item id for the menu item the user selected.\par As far as when you look at the menu item, you have two choices.  In most dialogs, you really don\rquote t care what the user picks until the dialog is closed.  In that case, you can ignore hits on the control, and just wait until the dialog is closed and read the control value once.  If you need to do something in the window or dialog as soon as the user picks a new value, though, you will need to track the hits on the control a little more carefully, reading the control value after each hit.\par \par Problem 14-6:  Add the color picker pop-up control we used as an example in this section to the solution to Problem 14-5.  Add a colored rectangle above the pop-up control, coloring it appropriately as the user picks colors using the control.\par This completes the control sampler, which now has one example of nearly every control type available in System 6.0.  (We left out TextEdit and Picture controls.)\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1100{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw652\pich414\picwgoal13040\pichgoal8280\macpict\bliptag-545256223\blipupi72{\*\blipuid df800ce1a7a924be85474718ecaa371b}2fde00000000019e028c1101a00082a0008e01000a0000000002d002d098005200000000007d029000000000007d028c00000000007d028c000102af0002af0006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c007003fb200010fc007003fb200010fc00b003ffd00003cb700010fc00b003ffd00003cb700010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01c003ffd0000f0fd00040ffc0f00fcfb000503ff000f03c0cc00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc01f003ffe0002ff3fc0fe00000ffe00003cfb000603c0000f00003ccd00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00060f003f003c00fffd000703c003ff0fc0ffc0ce00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc021053f000003fffffd00070ff00f003c03c3c0fe000603fc0f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022063f000003fffff0fe00070f000f003c03ffc0fe000603c00f0f03c03ccd00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc022003ffe0002ffffc0fe00060f000f003c03c0fd000703c00f0f03c03cf0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc021003ffe00013f3ffd00060f003fc0ff00fffd000703ff03ff0ff00fc0ce00010fc007003fb200010fc007003fb200010fc007003fb200010fc007003fb200010fc006003fb1ff00c006003fb1ff00c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c01f043c000003fcf700040fc0003ffcfa00033ff00fc0fd000103f0d6000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c027043c00000f0ffd000103c0fd000403c00003c0fd000b0f00003c3c03c000000f000fd5000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c0312a3c00000f0003fc0ffc0ffc0f3c0ff003c00003c00ff00ff03ff0003c3c03c00ffc3ff03ff03fc0f3cfffc0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f0a03c00fc03c3c03c00003c0fe3c13000f00003ff003c03c3c0f000f00f0f0fc0f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c030043c00000f00fd0f1b03c00f003c3c03c00003c03ffc0ff00f00003c0003c03c3c0f000f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c02e023c0000fb0f1b03cf0f003c3c03c00003c03c00003c0f3c003c0003c03c3c0f3c0f00fef0020f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c0312a3c000003fc03fc0f0f00fc0f000ff00ff00003c00ff00ff003f0003c000ff00ffc03f00f003fc0f00f3cf0dc000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f00f00f00003c03c000ffcfe00000ffe00053c03c0003fc0f6000703c03c000ffc03f0fc00030f00f00fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c038123c00003aaaab0000f033fcf0000c3fc3000f0ffe00000ffe0005c0003000f0f0f600070c0003000f0f00f0fc00030f3fcc0fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c041263c00003aaaab0000f0c00cf00030fff0c00f0f03fc03ff00000300000c00f000f3c0ff00ff03fffd0010300000c00f0f00f00f0f03fc000f30030fed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c03e123c00003aaaab0000f3000cf00033fffcc00ffcfd0f0a00000300000c00f3f0fc03fcc300c0fe0007300000c00ffc00f0fd0f04000f3000cfed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c0421d3c00003aaaab0000f0c00cf00030fff0c00f3c0fff0f0f00000300000c00fef00603ffc3ffc3c3c0fe0007300000c00f0f00f0fe0f05ff000f30030fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042103c00003aaaab0000f033fcf0000c3fc300fe0f02000f0ffe0003c0003000fef00603c003c003c3c0fe00070c0003000f0f00f0fe0f0500000f3fcc0fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c042163c00003aaaab0000f00f00f00003c03c000f0f03fc03fffe000d3c03c0003fc0f000ff00ff03c3c0fe001003c03c000ffc03fc03ff03fc000f00f00fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0270f3c00003aaaab0000fc0303f000003fc0f7000103fcf100013fc0f700030fc0c03fed000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0190b3c00003aaaab00003f000fc0d5000303f000fced000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c0170a3c00003fffff000003fffcd300023fffc0ed000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00ffcfe00000ff90003c000c000f333073ffffc000c000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa02c00f0ffe00000ff90004c003c0003cf3cc06003c000f000330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c024033c00033af9aa02c00ffcfd0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa06c00f3c0fff0f0ff90003c0c000c0f333073c003c0c000c0330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa00c0fe0f02000f0ff90004c03000c03cf3cc06003c0c00300330e6000103c026033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c0980052007d000000fa0290007d000000fa028c007d000000fa028c000126033c00033af9aa06c00f0f03fc03fff90003c00cffc0f333073c003c0ffcc00330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30004c003c0003cf3cc06003c000f000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c020033c00033af9aa00c0f30003c000c000f333073ffffc000c000330e6000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0f300e8ff0330000003ecfffe000103c019033c00033af9aa00c0da00033000003fed000503f0000003c019033c00033af9aa00c0da00033000003fed000503f0000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c01a033c00033af9aa00c0f300e8ff03300000fcec0004fc000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c030033c00033af9aa02c003fcf50003c000c000f73301fffffd33083c000c0003300000f0fe00013fc0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c031033c00033af9aa02c00f0ff50004c003c0003cf9cc02cf000cfccc07000f0003300000f0fe0001f0f0f100043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c042033c00033af9aa0ac00f000f3c0ff00ff03ff0fd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000bf0003ff0f03c0ffc0ffc0ff0fb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c039033c00033af9aa04c00f3f0fc0fb3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00013fc0fef0fa3cfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c03f033c00033af9aa00c0fe0f06003ffc3ffc3c3cfd0003c0c000c0f73301000ffd33083c0c000c03300000f0fd00fef0013cf0fd3c013ffcfb00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c040033c00033af9aa00c0fe0f06003c003c003c3cfd0004c03000c03cf9cc02cf000cfccc070c003003300000f0fe00fdf0063cf03c3c0ffc3cfa00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c044033c00033af9aa0ac003fc0f000ff00ff03c3cfd0003c00cffc0f73301000ffd33083c0ffcc003300000f0fe000b3fc03ff00fc00ffc303c0ff0fe3cfe00043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c02f033c00033af9aa00c0f30004c003c0003cf9cc02cf000cfccc07000f0003300000f0f600010ff0f900043c000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c029033c00033af9aa00c0f30003c000c000f73301fffffd33083c000c0003300000fcec0004fc000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c01b033c00033af9aa00c0f300e8ff033000003fed000503f0000003c017033c00033af9aa00c0da000330000003ecfffe000103c017033c00033af9aa00c0da000330000003ecfffe000103c014033c00033af9aa00c0f300e8ff0030e6000103c014033c00033af9aa00c0f300e8ff0030e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c025033c00033af9aa04c00ffc03f0f70006c000c0003ffff3f433053c000c000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c024033c00033af9aa04c00f0f00f0f70006c003c0003c003cf3cc04000f000330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00f0f00f00f0f03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00ffc00f0fd0ffb0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c028033c00033af9aa04c00f0f00f0fe0f00fffb0005c0c000c03c00f333053c0c000c0330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c026033c00033af9aa04c00f0f00f0fe0ffa0006c03000c03c003cf3cc040c00300330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c028033c00033af9aa08c00ffc03fc03ff03fcfb0005c00cffc03c00f333053c0ffcc00330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c020033c00033af9aa00c0f30006c003c0003c003cf3cc04000f000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c021033c00033af9aa00c0f30006c000c0003ffff3f433053c000c000330e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c014033c00033ff9ff00c0f300e8ff0030e6000103c00d023c0003d0000030e6000103c00d023c0003d0000030e6000103c00d023c0003d0ff00f0e6000103c00d023c0003d0ff00f0e6000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c010033c00003fd1fff0000030f7000103c010033c00003fd1fff0000030f7000103c012033c000030d2000003f000003cf7000103c012033c000030d2000003f000003cf7000103c01d093c00003000fff0f0003cfe000103c0dd000003f000003ff7000103c01d093c00003000fff0f0003cfe000103c0dd000003f000003ff7000103c01f073c000030000f00f0f400003cfc00003cea000003f000013fc0f8000103c01f073c000030000f00f0f400003cfc00003cea000003f000013fc0f8000103c02c1c3c000030000f00ffc0fc03fc000fc03fc0003ff000ffc03fc03fc0ffc0eb000003f000013ff0f8000103c02c1c3c000030000f00ffc0fc03fc000fc03fc0003ff000ffc03fc03fc0ffc0eb000003f000013ff0f8000103c02b163c000030000f00f0f03c0f000003c0f00000f0f0003c00fef001003cea000003f000013ffcf8000103c02b163c000030000f00f0f03c0f000003c0f00000f0f0003c00fef001003cea000003f000013ffcf8000103c02b1b3c000030000f00f0f03c03fc0003c03fc000f0f0003c00fff03fc03cea000003f000013ffff8000103c02b1b3c000030000f00f0f03c03fc0003c03fc000f0f0003c00fff03fc03cea000003f000013ffff8000103c02c1c3c000030000f00f0f03c000f0003c000f000f0f0003cf0f00000f03cf0eb000003f000013cf0f8000103c02c1c3c000030000f00f0f03c000f0003c000f000f0f0003cf0f00000f03cf0eb000003f000013cf0f8000103c02b1c3c000030000f00f0f0ff03fc000ff03fc0003ff0000fc03fc03fc00fc0eb000003ef00003cf8000103c02b1c3c000030000f00f0f0ff03fc000ff03fc0003ff0000fc03fc03fc00fc0eb000003ef00003cf8000103c00e033c000030d2000003e5000103c00e033c000030d2000003e5000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c007003cb2000103c007003cb2000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c00e033c000030d2000003e5000103c00e033c000030d2000003e5000103c019093c00003000fff0f0003cfe000103c0dd000003e5000103c019093c00003000fff0f0003cfe000103c0dd000003e5000103c016073c000030000f00f0f600000fe2000003e5000103c016073c000030000f00f0f600000fe2000003e5000103c023183c000030000f00ffc0fc03fc000fc03fc000003ff00ff00ff0e7000003e5000103c023183c000030000f00ffc0fc03fc000fc03fc000003ff00ff00ff0e7000003e5000103c0210f3c000030000f00f0f03c0f000003c0f0fe00010f00fd3ce7000003e5000103c0210f3c000030000f00f0f03c0f000003c0f0fe00010f00fd3ce7000003e5000103c021143c000030000f00f0f03c03fc0003c03fc000000f00fd3ce7000003e5000103c021143c000030000f00f0f03c03fc0003c03fc000000f00fd3ce7000003e5000103c020133c000030000f00f0f03c000f0003c000f000000ffc3ce7000003e5000103c020133c000030000f00f0f03c000f0003c000f000000ffc3ce7000003e5000103c023183c000030000f00f0f0ff03fc000ff03fc03c0003f00ff00ff0e7000003e5000103c023183c000030000f00f0f0ff03fc000ff03fc03c0003f00ff00ff0e7000003e5000103c012033c000030f40000f0e0000003e5000103c012033c000030f40000f0e0000003e5000103c00c033c00003fd1ffe5000103c00c033c00003fd1ffe5000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c098005200fa00000177029000fa00000177028c00fa00000177028c000107003cb2000103c007003cb2000103c012033c00000fdbfff9000003e6ff03c00003c012033c00000fdbfff9000003e6ff03c00003c018033c00000ce0000003fe000003f9000003e65503c00003c018033c00000ce0000003fe000003f9000003e65503c00003c028073c00000c00000c0ffc000203c3c0f90002f0003cf700040300030003f9000003e65503c00003c028073c00000c00000c0ffc000203c3c0f90002f0003cf700040300030003f9000003e65503c00003c026073c00000c00000f0ffc000203c3c0f90000f0f5000403000cc003f9000003e65503c00003c026073c00000c00000f0ffc000203c3c0f90000f0f5000403000cc003f9000003e65503c00003c0331e3c00000c00000fcf03fc3c03c003c3c0ffcfffc0ffc03fc0ffc0fc0f3c0ff0fb00040300303003f9000003e65503c00003c0331e3c00000c00000fcf03fc3c03c003c3c0ffcfffc0ffc03fc0ffc0fc0f3c0ff0fb00040300303003f9000003e65503c00003c032123c00000c00000fff0f0f3cf3c003ffc3c3cf3cfdf00700f0f03c0fc03c3cfb00040300c00c03f9000003e65503c00003c032123c00000c00000fff0f0f3cf3c003ffc3c3cf3cfdf00700f0f03c0fc03c3cfb00040300c00c03f9000003e65503c00003c0330d3c00000c00000f3f0fff3cf3c003fec301cf3cfef0083fc0f0f03c0f003ffcfb00040303f03f03f9000003e65503c00003c0330d3c00000c00000f3f0fff3cf3c003fec301cf3cfef0083fc0f0f03c0f003ffcfb00040303f03f03f9000003e65503c00003c032053c00000c0000fe0f04000f0f0003fec301cf3cfef00000fef0033c0f003cfa00040300303003f9000003e65503c00003c032053c00000c0000fe0f04000f0f0003fec301cf3cfef00000fef0033c0f003cfa00040300303003f9000003e65503c00003c0331e3c00000c00000f0303fc0f0f0003c3c0ffcf3cf0ffc03fc0f0f0ff0f000ff0fb00040300303003f9000003e65503c00003c0331e3c00000c00000f0303fc0f0f0003c3c0ffcf3cf0ffc03fc0f0f0ff0f000ff0fb00040300303003f9000003e65503c00003c01c033c00000cf10000f0f100040300303003f9000003e65503c00003c01c033c00000cf10000f0f100040300303003f9000003e65503c00003c018033c00000ce0000403003ff003f9000003e65503c00003c018033c00000ce0000403003ff003f9000003e65503c00003c018033c00000ce0000003fe000003f9000003e65503c00003c018033c00000ce0000003fe000003f9000003e65503c00003c01f073c00000c00000c0ffb000103c0ec000003fdfff9000003e65503c00003c01f073c00000c00000c0ffb000103c0ec000003fdfff9000003e65503c00003c021073c00000c00000f0ffb000103c0ec000003fecc00cff9000003e65503c00003c021073c00000c00000f0ffb000103c0ec000003fecc00cff9000003e65503c00003c02b183c00000c00000fcf03fc3c03c00003c0ff03cf03fc03fc0f0ff5000003fd33f9000003e65503c00003c02b183c00000c00000fcf03fc3c03c00003c0ff03cf03fc03fc0f0ff5000003fd33f9000003e65503c00003c02b0e3c00000c00000fff0f0f3cf3c00003fec302f00f00fd0ff5000003fecc00cff9000003e65503c00003c02b0e3c00000c00000fff0f0f3cf3c00003fec302f00f00fd0ff5000003fecc00cff9000003e65503c00003c02b183c00000c00000f3f0fff3cf3c00003c3ffc3c003fc0fff0f3ff5000003fd33f9000003e65503c00003c02b183c00000c00000f3f0fff3cf3c00003c3ffc3c003fc0fff0f3ff5000003fd33f9000003e65503c00003c02d053c00000c0000fe0f0f000f0f0003c3c3c003c0000f0f0003cff5000003fecc00cff9000003e65503c00003c02d053c00000c0000fe0f0f000f0f0003c3c3c003c0000f0f0003cff5000003fecc00cff9000003e65503c00003c02b183c00000c00000f0303fc0f0f0000ff00ff03c003fc03fc0c0ff5000003fd33f9000003e65503c00003c02b183c00000c00000f0303fc0f0f0000ff00ff03c003fc03fc0c0ff5000003fd33f9000003e65503c00003c01d033c00000cee000103fcf5000003fecc00cff9000003e65503c00003c01d033c00000cee000103fcf5000003fecc00cff9000003e65503c00003c016033c00000ce0000003fd33f9000003e65503c00003c016033c00000ce0000003fd33f9000003e65503c00003c012033c00000fdbfff9000003e65503c00003c012033c00000fdbfff9000003e65503c00003c025073c00000ffffff3f0fcff02fcffcffdff00c3f0ff03c000000ff9000003e65503c00003c025073c00000ffffff3f0fcff02fcffcffdff00c3f0ff03c000000ff9000003e65503c00003c021073c00000ffffff0f0fcff02fc3f0febff03c000000ff9000003e65503c00003c021073c00000ffffff0f0fcff02fc3f0febff03c000000ff9000003e65503c00003c02c183c00000ffffff030fc03c3fc3ffc0c0fc03f0f0f03fc03fc03f4ff03c000000ff9000003e6ff03c00003c02c183c00000ffffff030fc03c3fc3ffc0c0fc03f0f0f03fc03fc03f4ff03c000000ff9000003e6ff03c00003c0240e3c00000ffffff000f0f0c30c3ffc00fe0f02c03fc3fdf0f4ff03c000000fdb000103c0240e3c00000ffffff000f0f0c30c3ffc00fe0f02c03fc3fdf0f4ff03c000000fdb000103c026183c00000ffffff0c0f000c30c3ffc330f000ff0ffc3f0fff0f0f4ff03c000000fdb000103c026183c00000ffffff0c0f000c30c3ffc330f000ff0ffc3f0fff0f0f4ff03c000000fdb000103c024053c00000ffffffef00bfff0f0fffc3f0f0fffc03fc3fdf0f4ff03c000000fdb000103c024053c00000ffffffef00bfff0f0fffc3f0f0fffc03fc3fdf0f4ff03c000000fdb000103c021183c00000ffffff0fcfc03f0f0fffc3f0fc03f0f0f00fc03fc03f0ffdb000103c021183c00000ffffff0fcfc03f0f0fffc3f0fc03f0f0f00fc03fc03f0ffdb000103c00c033c00000fdbffdb000103c00c033c00000fdbffdb000103c017033c00000fdffffe000003ef000003f1ff04fc000003c017033c00000fdffffe000003ef000003f1ff04fc000003c019033c00000ce0000403003ff003ef000003f100040c000003c019033c00000ce0000403003ff003ef000003f100040c000003c02c073c00000c00000c0ffc000203c3c0fe00000ff000040300303003ef000003fe00010ff0f600040c000003c02c073c00000c00000c0ffc000203c3c0fe00000ff000040300303003ef000003fe00010ff0f600040c000003c034073c00000c00000f0ffc000203c3c0fe00000ff000040300303003f800043fc000003ffd000003fe00013c3cf600040c000003c034073c00000c00000f0ffc000203c3c0fe00000ff000040300303003f800043fc000003ffd000003fe00013c3cf600040c000003c03f143c00000c00000fcf03fc3c03c003c3c0ff03cf0f0ff100040300303003f80004f0f000000ffd000003fe00093c003cf03fc03fc0ffc0fe00040fc00003c03f143c00000c00000fcf03fc3c03c003c3c0ff03cf0f0ff100040300303003f80004f0f000000ffd000003fe00093c003cf03fc03fc0ffc0fe00040fc00003c03c143c00000c00000fff0f0f3cf3c000ff03c3c3f00f3cf100040303f03f03f80009f0003fc00f003fc0f3c3fe00033cfc3f00fbf0fe00040fc00003c03c143c00000c00000fff0f0f3cf3c000ff03c3c3f00f3cf100040303f03f03f80009f0003fc00f003fc0f3c3fe00033cfc3f00fbf0fe00040fc00003c03e143c00000c00000f3f0fff3cf3c0003c03c3c3c00ff0f100040300c00c03f80009f000f0f00f00f0f0fc03fe00fe3c0300fff0fffef0fe00040fc00003c03e143c00000c00000f3f0fff3cf3c0003c03c3c3c00ff0f100040300c00c03f80009f000f0f00f00f0f0fc03fe00fe3c0300fff0fffef0fe00040fc00003c03f053c00000c0000fe0f0b000f0f00003c03c3c3c00f3cf100040300303003f80005f000f0f00f00fef00003fe00fe3c0600f000f000f0f0fe00040fc00003c03f053c00000c0000fe0f0b000f0f00003c03c3c3c00f3cf100040300303003f80005f000f0f00f00fef00003fe00fe3c0600f000f000f0f0fe00040fc00003c03e143c00000c00000f0303fc0f0f00003c00ff03c00f0ff1000403000cc003f800fdf0010f00fef00003fe00090ff03c003fc03fc0f0f0fe00040fc00003c03e143c00000c00000f0303fc0f0f00003c00ff03c00f0ff1000403000cc003f800fdf0010f00fef00003fe00090ff03c003fc03fc0f0f0fe00040fc00003c022033c00000ce000040300030003f800093fc03fc03fc03fc0f003f100040fc00003c022033c00000ce000040300030003f800093fc03fc03fc03fc0f003f100040fc00003c019033c00000ce0000003fe000003ef000003f100040fc00003c019033c00000ce0000003fe000003ef000003f100040fc00003c012033c00000fdbffef000003f0ff03c00003c012033c00000fdbffef000003f0ff03c00003c00b003cc400f1ff03c00003c00b003cc400f1ff03c00003c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c098005201770000019e029001770000019e028c01770000019e028c000118043c00000fc0ec000103f0fd00003fe900003feb000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c017033c00003fea0000fcfd0000fce900010fc0ec000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c032033c00003cfe00013ff0fa00010ff0f800003cfd0000f0fe0001ffc0fa0004fff000000ffa000303c00003fefff1000103c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c038033c00003cfe00013c3cfa00013c3cf800003cfd0000f0fe0001f0f0fa00000ff6000903c00003c0000f000ff0fa00073c000ff0000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c04e033c00003cfe00103c3c0ff00ff03ff0003c3c3ff00ff00ff0fe00003cfd0000f0fe0011f0f03fc03fc0ffc0000f03c03c3f00ff00fffe000903c000033c00f3003c3cfa00073c003c3c000003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c046033c00003cfe00013ff0fb3c0000f93cfe00003cfd0000f0fe0001ffc0fbf006000f03cf3c0f03fec31bc0000003c0000303cf03003c000ff03c3c3ff00ffc003c3c3ff003c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c04a033c00003cfe00083c3c3ffc3ffc3c3c00fc3c02003ffcfe00003cfd0000f0fe0004f0f0fff0fffef016000f03cf3c0f03c003ffc0000003c00003003003000ff0f93c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c043033c00003cfe00fe3c05003c003c3c00fa3cfd00003cfd0000f0fe00fef00e00f000f0f0000f00f0f00f03c3c3c0fe000803c0000303cf030000f83c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c04a033c00003cfe00103ff00ff00ff03ff0000ff03c3c0ff00ff0fe00003cfd0000f0fe0011ffc03fc03fc0ffc0000f00f0f03fc0ff00fffe000703c000033c00f300f73c0000fd3c0103c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c031033c00003cf800003cf400003cfd0000f0f80000f0f3001803c00003c0000f000ff00ff00ffc3c3c0ffc000ff03c3c03c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c01b033c00003fea0000fcfd0000fce900030fc00003fefff1000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c018043c00000fc0ec000103f0fd00003fe900003feb000103c013003cfe00eafffc000003e9ff00f0eb000103c013003cfe00eafffc000003e9ff00f0eb000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c007003cb2000103c006003fb1ff00c006003fb1ff00c006003fb1ff00c006003fb1ff00c002af0002af00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 14-12:  The Completed Control Sampler Window\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk79}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pop-up menu control}{\rxe bk79}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson and the last one have covered all of the controls available as of Apple II}{\f4\fs20 GS}{\f4  System Disk 6.0 except for the TextEdit control, which was covered separately in Lesson 11.  In each case, you learned how to create the control, how to track the control manually in a window, and how to read the setting of the control.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 DrawMember2\tab GetLETextByID\tab FindTargetCtl\tab LECopy\par LECut\tab LEDelete\tab LEFromScrap\tab LEPaste\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 LEToScrap\tab NewList2\tab SetLETextByID\tab SortList2\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rIcon\tab rPicture\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk80}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rControlTemplate resource}{\rxe bk80}}}{\*\bkmkend bk81}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 controls}{\rxe bk81}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 15 \endash  Meaningful Dialogs}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 {\*\bkmkstart bk87}Lesson 15 \endash  Meaningful Dialogs}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 15 \endash  Meaningful Dialogs\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson covers dialogs.  By the end of the lesson, you will know the difference between modal and modeless dialogs, and how to create and use each kind of dialog.  You will learn when to use a modal dialog and when to use a modeless dialog, and you\rquote ll find out about some of the human interface issues that apply to dialogs and menu commands that bring up dialogs.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Death of a Tool}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Death of a Tool\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Before you flip open your toolbox reference manual to the chapter on the Dialog Manager, I want to take a moment to warn you that the Dialog Manager is obsolete.  Back when the Apple II}{\f4\fs20 GS}{\f4  was first released, the Dialog Manager was a great tool.  It handled alerts, modal dialogs and modeless dialogs, making it a lot easier to handle the various controls.  In a very real sense, the Dialog Manager did for control events what }{\f6\fs20 TaskMaster}{\f4  does for the main event loop: it packaged the process in a few neat tool calls so you didn\rquote t have to reinvent the wheel every time you used a dialog.\par As time moved on, though, Apple\rquote s engineers extended the controls available and added resources, both of which strained the design of the original Dialog Manager.  Today, the Window Manager call }{\f6\fs20 AlertWindow}{\f4  has replaced the original Dialog Manager calls to handle alerts, and resources and the Window Manager\rquote s }{\f6\fs20 DoModalWindow}{\f4  have replaced the old Dialog Manager calls that handled modal dialogs and modeless dialogs.\par If you troll the online services for source code samples, you will run into a lot of old programs (and a few new ones written by programmers that haven\rquote t caught up with the new tool calls) that use the Dialog Manager.  After reading this lesson, you shouldn\rquote t have any trouble figuring out what those calls do by reading the descriptions in the toolbox reference manual.  The concepts haven\rquote t changed, just the calls and which tool the calls are found in.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Dialogs are Simple Windows with Controls}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Dialogs are Simple Windows with Controls\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last two lessons spent a lot of time covering controls, but if you think about it, most programs don\rquote t use many controls in their document window.  Whether you are using a text editor, spread sheet, CAD program, or whatever, most of the windows that show data have scroll bars, a size box, and not much else in the way of controls.  (The big exceptions are the hyper-environments, like HyperCard GS and HyperStudio.)  Most of the controls appear in supplementary windows that pop up in response to picking a menu command.  These supplementary windows are, of course, dialogs.\par From a user\rquote s viewpoint, dialogs are special windows that let the user pick options, conduct searches, and so forth.  From the programmer\rquote s standpoint, dialogs are windows with controls.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modal dialogs}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs\:modal}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are two major kinds of dialogs.  Modal dialogs lock the user in a mode \endash  all the user can do is operate the various controls in the dialog.  An alert is actually a special, restricted form of modal dialog.  Another common example of modal dialogs are the various dialogs in SFO.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modeless dialogs}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs\:modeless}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Modeless dialogs work pretty much the same way as a modal dialog, but they are true windows.  The user can click on a document window or another modeless dialog to bring the other window to front and work on it, and the modeless dialog is still available.  String search and string search and replace dialogs are usually modeless dialogs.\par Visually, a modal dialog should generally use an alert frame, while a modeless dialog generally looks like any other window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Creating a Dialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Creating a Dialog\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modal dialogs}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs\:modal}}}{\v\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modeless dialogs}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs\:modeless}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Whether you are creating a modal dialog or a modeless dialog, you create the window the same way you created the control sampler window in lessons 13 and 14.  In short, you use an }{\f6\fs20 rWindParam1}{\f4  resource, with all of the controls attached via an }{\f6\fs20 rControlList}{\f4  resource.  About the only difference between a standard window with controls and a dialog window is that it\rquote s customary to use an alert frame for a modal dialog window.  You do that by setting bit 13 of the }{\f6\fs20 wFrameBits}{\f4  flag word in the }{\f6\fs20 rWindParam1}{\f4  resource.  Some modal dialogs can be moved.  In that case, you need the title bar.  That does cause some problems, since the Window Manager doesn\rquote t like to create windows with alert frames and title bars, so you\rquote ll have to draw the alert frame for yourself \endash  or use another tool call that will.  (Stay tuned!  We\rquote ll get back to this point later.)\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Handling Events in a Modal Dialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Handling Events in a Modal Dialog\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk83}{\*\bkmkstart bk84}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are a lot of problems with modal dialogs that aren\rquote t very apparent at first glance.  Here are a few of the major ones:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \bullet \tab Modal dialogs have to be the front-most window from the time they first appear until the user does something to make the dialog go away.  You\rquote ve seen this with alert windows, which don\rquote t let the user select any other window until one of the alert window buttons is clicked.  Our main event loop has always been set up to allow the user to select any window at any time.  While there are ways to prevent this, it messes up the main event loop, making the program more complicated.\par \par \bullet \tab A modal dialog should grab the user\rquote s attention for the program they are running, preventing them from selecting some other program window, but it\rquote s handy to be able to use desk accessories while a modal dialog is in use.  After all, the user may want to do some calculating with a calculator desk accessory, or scan a disk with some disk utilities, to figure out what to do about the dialog.  This is possible from the main event loop, but it is very messy.\par \par \bullet \tab Inside your program, you usually use a modal dialog in a situation where you need to get some information, then move on to process it, finally returning to the main event loop.  Ideally, your subroutine would consist of three main parts:\par \par }\pard \qj\fi-360\li1440\widctlpar\adjustright {\f4 1.\tab Draw the dialog.\par 2.\tab Handle any user events to set the various controls.\par 3.\tab Act on the user\rquote s choices.\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par \tab To see what I mean, think about this ruler dialog from Quick Click Draw:\par \par }\pard \qc\fi-360\li720\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1101{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw481\pich358\picwgoal9620\pichgoal7160\macpict\bliptag-463714358\blipupi72{\*\blipuid e45c47caa9daf990c96509ab39b433a4}26c300000000016601e11101a00082a0008e01000a0000000002d0024098003e0000000000aa01e80000000000aa01e10000000000aa01e1000102c30002c30008003fc7ff00feff0008003fc7ff00feff00080030c7000006ff00080030c7000006ff00080030c7000006ff00080030c7000006ff000901307fc8ff0006ff000901307fc8ff0006ff000901307fc8ff0006ff000901307fc8ff0006ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff001001307cd5000001fdfffa00011f06ff001001307cd5000001fdfffa00011f06ff001201307cd500003efd0000f8fb00011f06ff001201307cd500003efd0000f8fb00011f06ff001e0c307c0007c00380000078000060e1000101e3fdff008ffb00011f06ff001e0c307c0007c00380000078000060e1000101e3fdff008ffb00011f06ff001e0b307c00066001800000cc0060e00001039efd0001f380fc00011f06ff001e0b307c00066001800000cc0060e00001039efd0001f380fc00011f06ff00220f307c0006666183c6c0ccf8f8e1e3e1e3e400010770fd00011dc0fc00011f06ff00220f307c0006666183c6c0ccf8f8e1e3e1e3e400010770fd00011dc0fc00011f06ff00220e307c0007c661866700cccc60633333e300070ee00078c6000ee0fc00011f06ff00220e307c0007c661866700cccc60633333e300070ee00078c6000ee0fc00011f06ff00230f307c0006c66187e600cccc60633331e0e400070ee000cccc000ee0fc00011f06ff00230f307c0006c66187e600cccc60633331e0e400070ee000cccc000ee0fc00011f06ff00230f307c00066661860600cccc6c63333030e400070ee000ccd8000ee0fc00011f06ff00230f307c00066661860600cccc6c63333030e400070ee000ccd8000ee0fc00011f06ff00230f307c000663e3c3c60078f838f1e331e3e400070ee000ccf0000ee0fc00011f06ff00230f307c000663e3c3c60078f838f1e331e3e400070ee000ccf0000ee0fc00011f06ff001901307cf90000c0df00070ee000ccd8000ee0fc00011f06ff001901307cf90000c0df00070ee000ccd8000ee0fc00011f06ff001501307cd600070ee000cccc000ee0fc00011f06ff001501307cd600070ee000cccc000ee0fc00011f06ff001501307cd600070ee00078c6000ee0fc00011f06ff001501307cd600070ee00078c6000ee0fc00011f06ff001401307cd600010ee0fd00010ee0fc00011f06ff001401307cd600010ee0fd00010ee0fc00011f06ff001401307cd600010770fd00011dc0fc00011f06ff001401307cd600010770fd00011dc0fc00011f06ff002401307cfe0008f00180c0c06000001efe000018e60001039efd0001f380fc00011f06ff002401307cfe0008f00180c0c06000001efe000018e60001039efd0001f380fc00011f06ff001f09307c000001980000c0c0fe000033e2000101e3fdff008ffb00011f06ff001f09307c000001980000c0c0fe000033e2000101e3fdff008ffb00011f06ff002514307c00000181b387c0c0e3e1e0303e1f1e38f87cc0e800003efd0000f8fb00011f06ff002514307c00000181b387c0c0e3e1e0303e1f1e38f87cc0e800003efd0000f8fb00011f06ff00220d307c000001b9c18cc0c06333301efe330218cccce7000001fdfffa00011f06ff00220d307c000001b9c18cc0c06333301efe330218cccce7000001fdfffa00011f06ff001c13307c00000199818cc0c06333f00333333018ccccdb00011f06ff001c13307c00000199818cc0c06333f00333333018ccccdb00011f06ff001b0c307c00000199818cc0c0633300fd330218cc7cdb00011f06ff001b0c307c00000199818cc0c0633300fd330218cc7cdb00011f06ff001d01307cfe000ff183c7c0fcf331e01e3e1f1e3ccc8cc0dc00011f06ff001d01307cfe000ff183c7c0fcf331e01e3e1f1e3ccc8cc0dc00011f06ff001201307cf5000030fd000078db00011f06ff001201307cf5000030fd000078db00011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff002401307cfd000103fef9000103fefb00013fe0f900013fe0f7000003f9fffe00011f06ff002401307cfd000103fef9000103fefb00013fe0f900013fe0f7000003f9fffe00011f06ff003401307cfd00051c01c00c031efd00031c01c00cfe000e01c01c00c00c031e000001c01c01e0f900001efa000501e000001f06ff003401307cfd00051c01c00c031efd00031c01c00cfe000e01c01c00c00c031e000001c01c01e0f900001efa000501e000001f06ff003301307cfd00056000303c0633fd000361fc303cfe000e06000303c03c063300000600030330f9000070f900043800001f06ff003301307cfd00056000303c0633fd000361fc303cfe000e06000303c03c063300000600030330f9000070f900043800001f06ff003701307cfd0005c000180c0c03fd0003c7ff180cfe000e0c000180c00c0c0300000c00018030f90002e00078fd000670001c00001f06ff003701307cfd0005c000180c0c03fd0003c7ff180cfe000e0c000180c00c0c0300000c00018030f90002e00078fd000670001c00001f06ff003701307cfd0005c000180c1806fd0003cfff980cfe000e0c000180c00c180600000c00018060f90002e000ccfd000630001c00001f06ff003701307cfd0005c000180c1806fd0003cfff980cfe000e0c000180c00c180600000c00018060f90002e000ccfd000630001c00001f06ff003801307cfd0005c000180c300cfd0003c7ff180cfe000e0c000180c00c300c00000c000180c0f9000de000c07cf8787830001c00001f06ff003801307cfd0005c000180c300cfd0003c7ff180cfe000e0c000180c00c300c00000c000180c0f9000de000c07cf8787830001c00001f06ff003701307cfd00056000300c6018fd000361fc300cfe000e06000300c00c601800000600030180f90002e000c0fdcc0630001c00001f06ff003701307cfd00056000300c6018fd000361fc300cfe000e06000300c00c601800000600030180f90002e000c0fdcc0630001c00001f06ff003801307cfd00051c01c03f403ffd00031c01c03ffe000e01c01c03f03f403f000001c01c03f0f9000de000c0ccccc0fc30001c00001f06ff003801307cfd00051c01c03f403ffd00031c01c03ffe000e01c01c03f03f403f000001c01c03f0f9000de000c0ccccc0fc30001c00001f06ff002901307cfd000103fef9000103fefb00013fe0f900013fe0f70001e000fdcc07c030001c00001f06ff002901307cfd000103fef9000103fefb00013fe0f900013fe0f70001e000fdcc07c030001c00001f06ff001601307cd50004e000787cccfe7805001c00001f06ff001601307cd50004e000787cccfe7805001c00001f06ff001101307cd50000e0f900041c00001f06ff001101307cd50000e0f900041c00001f06ff001101307cd5000070f900043800001f06ff001101307cd5000070f900043800001f06ff001201307cd500001efa000501e000001f06ff001201307cd500001efa000501e000001f06ff001001307cd5000003f9fffe00011f06ff001001307cd5000003f9fffe00011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff001007307c0000019800c0cf00011f06ff001007307c0000019800c0cf00011f06ff001007307c000001980003cf00011f06ff001007307c000001980003cf00011f06ff001209307c00000199f1c7c3c6d100011f06ff001209307c00000199f1c7c3c6d100011f06ff001108307c0000019998c306d000011f06ff001108307c0000019998c306d000011f06ff001209307c0000019998c303c0d100011f06ff001209307c0000019998c303c0d100011f06ff001209307c0000019998c36060d100011f06ff001209307c0000019998c36060d100011f06ff001201307cfe0004f199e1c3c6d100011f06ff001201307cfe0004f199e1c3c6d100011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff001901307cfd000103fef70001ff80f300013fe0eb00011f06ff001901307cfd000103fef70001ff80f300013fe0eb00011f06ff002901307cfd00061c01c0180000c0fd0002070070fd000006f9000701c01c0001800007f000011f06ff002901307cfd00061c01c0180000c0fd0002070070fd000006f9000701c01c0001800007f000011f06ff002c01307cfd000261fc30fe0000c0fd000218000cfe000006fe00000cfc0002060003fd000003f000011f06ff002c01307cfd000261fc30fe0000c0fd000218000cfe000006fe00000cfc0002060003fd000003f000011f06ff003201307cfd0024c7ff1838f878f87878000030000607878f8f8e7f0f1f0f1b1e00000c000183e38cc7830780f200011f06ff003201307cfd0024c7ff1838f878f87878000030000607878f8f8e7f0f1f0f1b1e00000c000183e38cc7830780f200011f06ff003001307cfd0003cfff9818fdcc1bc000003000060cccccc6066d998c199c3000000c00018331878cc30cf100011f06ff003001307cfd0003cfff9818fdcc1bc000003000060cccccc6066d998c199c3000000c00018331878cc30cf100011f06ff003201307cfd0024c7ff1818ccc0ccfc7800003000060c0fccc6066d9f8c1f981e00000c00018331830fc30780f200011f06ff003201307cfd0024c7ff1818ccc0ccfc7800003000060c0fccc6066d9f8c1f981e00000c00018331830fc30780f200011f06ff003201307cfd000361fc3018fecc1dc00c000018000c0ccc0cc6c66d980d98180300000600030331878c0300c0f200011f06ff003201307cfd000361fc3018fecc1dc00c000018000c0ccc0cc6c66d980d98180300000600030331878c0300c0f200011f06ff003201307cfd00241c01c03ccc78cc7878000007007007878cc38f6d8f070f181e000001c01c03e3ccc7878780f200011f06ff003201307cfd00241c01c03ccc78cc7878000007007007878cc38f6d8f070f181e000001c01c03e3ccc7878780f200011f06ff001a01307cfd000103fef70001ff80f300023fe003ec00011f06ff001a01307cfd000103fef70001ff80f300023fe003ec00011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff0098003e00aa0000015401e800aa0000015401e100aa0000015401e100010a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff002008307c000001180000c0fe0003070208c0fe0004f86000c003df00011f06ff002008307c000001180000c0fe0003070208c0fe0004f86000c003df00011f06ff001b08307c000001980000c0fe00020c0318fd0000ccdb00011f06ff001b08307c000001980000c0fe00020c0318fd0000ccdb00011f06ff00241b307c000001d99bf8f878d80f1f03b9c7c3c6c0cce319c3c70f1f0f18e300011f06ff00241b307c000001d99bf8f878d80f1f03b9c7c3c6c0cce319c3c70f1f0f18e300011f06ff00231a307c000001f99b6ccccce0198c03f8c6666700cc6318c603199998e200011f06ff00231a307c000001f99b6ccccce0198c03f8c6666700cc6318c603199998e200011f06ff00231a307c000001b99b6cccfcc0198c0358c6666600cc61b0c3c319998fe200011f06ff00231a307c000001b99b6cccfcc0198c0358c6666600cc61b0c3c319998fe200011f06ff00241b307c000001999b6cccc0c0198c0318c6666600cc61b0c06319998180e300011f06ff00241b307c000001999b6cccc0c0198c0318c6666600cc61b0c06319998180e300011f06ff00241b307c00000188fb6cf878c00f0c0319e663c600f8f0e1e3c78f198f18e300011f06ff00241b307c00000188fb6cf878c00f0c0319e663c600f8f0e1e3c78f198f18e300011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff003601307cfd00031c01c00cfe000401c01c01e0fe00031c01c01efe000301c01c03fd00031c01c03efe000401c01c01e0f700011f06ff003601307cfd00031c01c00cfe000401c01c01e0fe00031c01c01efe000301c01c03fd00031c01c03efe000401c01c01e0f700011f06ff003601307cfd00036000303cfe00040600030330fe000360003033fe00040600030330fe000360003030fe000306000303f600011f06ff003601307cfd00036000303cfe00040600030330fe000360003033fe00040600030330fe000360003030fe000306000303f600011f06ff003701307cfd0003c000180cfe00040c00018030fe0003c0001803fe00040c00018330fe0003c000183efe00040c000183e0f700011f06ff003701307cfd0003c000180cfe00040c00018030fe0003c0001803fe00040c00018330fe0003c000183efe00040c000183e0f700011f06ff003701307cfd0003c000180cfe00040c00018060fe0003c000180efe00040c00018330fe0003c0001803fe00040c00018330f700011f06ff003701307cfd0003c000180cfe00040c00018060fe0003c000180efe00040c00018330fe0003c0001803fe00040c00018330f700011f06ff003701307cfd0003c000180cfe00040c000180c0fe0003c0001803fe00040c000183f0fe0003c0001803fe00040c00018330f700011f06ff003701307cfd0003c000180cfe00040c000180c0fe0003c0001803fe00040c000183f0fe0003c0001803fe00040c00018330f700011f06ff003701307cfd00036000300cfe00040600030180fe000360003033fe00040600030030fe000360003033fe00040600030330f700011f06ff003701307cfd00036000300cfe00040600030180fe000360003033fe00040600030030fe000360003033fe00040600030330f700011f06ff003701307cfd00031c01c03ffe000401c01c03f0fe00031c01c01efe000401c01c0030fe00031c01c01efe000401c01c01e0f700011f06ff003701307cfd00031c01c03ffe000401c01c03f0fe00031c01c01efe000401c01c0030fe00031c01c01efe000401c01c01e0f700011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff003801307cfd00031c01c01efe002301c01c00c0f000001c01c00c1e000001c01c00c1e000001c01c01e30000001c01c01e1e0f800011f06ff003801307cfd00031c01c01efe002301c01c00c0f000001c01c00c1e000001c01c00c1e000001c01c01e30000001c01c01e1e0f800011f06ff003801307cfd000361fc3033fe001306000303c13000006000303c33000006000303c3fe000c60003033330000060003033330f800011f06ff003801307cfd000361fc3033fe001306000303c13000006000303c33000006000303c3fe000c60003033330000060003033330f800011f06ff003801307cfd0003c7ff1833fe00230c000180c3300000c000180c0300000c000180c3e00000c00018033300000c0001803030f800011f06ff003801307cfd0003c7ff1833fe00230c000180c3300000c000180c0300000c000180c3e00000c00018033300000c0001803030f800011f06ff003801307cfd0003cfff981efe00230c000180c3300000c000180c0600000c000180c3300000c00018063300000c000180e060f800011f06ff003801307cfd0003cfff981efe00230c000180c3300000c000180c0600000c000180c3300000c00018063300000c000180e060f800011f06ff003801307cfd0003c7ff1833fe00230c000180c3300000c000180c0c00000c000180c3300000c000180c3f00000c00018030c0f800011f06ff003801307cfd0003c7ff1833fe00230c000180c3300000c000180c0c00000c000180c3300000c000180c3f00000c00018030c0f800011f06ff003801307cfd000361fc3033fe002306000300c32000006000300c18000006000300c330000060003018030000060003033180f800011f06ff003801307cfd000361fc3033fe002306000300c32000006000300c18000006000300c330000060003018030000060003033180f800011f06ff003801307cfd00031c01c01efe002301c01c03f3c000001c01c03f3f000001c01c03f1e000001c01c03f03000001c01c01e3f0f800011f06ff003801307cfd00031c01c01efe002301c01c03f3c000001c01c03f3f000001c01c03f1e000001c01c03f03000001c01c01e3f0f800011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff00170e307c000001180000c00000c000003cd600011f06ff00170e307c000001180000c00000c000003cd600011f06ff001908307c000001980000c0fc000018fa000030de00011f06ff001908307c000001980000c0fc000018fa000030de00011f06ff002017307c000001d99bf8f878d9c7c3e0187c3c6c79fc3c7c7c60df00011f06ff002017307c000001d99bf8f878d9c7c3e0187c3c6c79fc3c7c7c60df00011f06ff001f16307c000001f99b6ccccce0c6666018666670cdb6666630de00011f06ff001f16307c000001f99b6ccccce0c6666018666670cdb6666630de00011f06ff001f16307c000001b99b6cccfcc0c6666018666060fdb67e6630de00011f06ff001f16307c000001b99b6cccfcc0c6666018666060fdb67e6630de00011f06ff001f16307c000001999b6cccc0c0c663e018666660c1b6606636de00011f06ff001f16307c000001999b6cccc0c0c663e018666660c1b6606636de00011f06ff002017307c00000188fb6cf878c1e664603c663c6079b63c661c60df00011f06ff002017307c00000188fb6cf878c1e664603c663c6079b63c661c60df00011f06ff000f01307cf7000103c0d500011f06ff000f01307cf7000103c0d500011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff003601307cfd00031c01c00cfe000401c01c01e0fe00031c01c01efe000301c01c03fd00031c01c03efe000401c01c01e0f700011f06ff003601307cfd00031c01c00cfe000401c01c01e0fe00031c01c01efe000301c01c03fd00031c01c03efe000401c01c01e0f700011f06ff003601307cfd000361fc303cfe00040600030330fe000360003033fe00040600030330fe000360003030fe000306000303f600011f06ff003601307cfd000361fc303cfe00040600030330fe000360003033fe00040600030330fe000360003030fe000306000303f600011f06ff003701307cfd0003c7ff180cfe00040c00018030fe0003c0001803fe00040c00018330fe0003c000183efe00040c000183e0f700011f06ff003701307cfd0003c7ff180cfe00040c00018030fe0003c0001803fe00040c00018330fe0003c000183efe00040c000183e0f700011f06ff003701307cfd0003cfff980cfe00040c00018060fe0003c000180efe00040c00018330fe0003c0001803fe00040c00018330f700011f06ff003701307cfd0003cfff980cfe00040c00018060fe0003c000180efe00040c00018330fe0003c0001803fe00040c00018330f700011f06ff003701307cfd0003c7ff180cfe00040c000180c0fe0003c0001803fe00040c000183f0fe0003c0001803fe00040c00018330f700011f06ff003701307cfd0003c7ff180cfe00040c000180c0fe0003c0001803fe00040c000183f0fe0003c0001803fe00040c00018330f700011f06ff003701307cfd000361fc300cfe00040600030180fe000360003033fe00040600030030fe000360003033fe00040600030330f700011f06ff003701307cfd000361fc300cfe00040600030180fe000360003033fe00040600030030fe000360003033fe00040600030330f700011f06ff003701307cfd00031c01c03ffe000401c01c03f0fe00031c01c01efe000401c01c0030fe00031c01c01efe000401c01c01e0f700011f06ff003701307cfd00031c01c03ffe000401c01c03f0fe00031c01c01efe000401c01c0030fe00031c01c01efe000401c01c01e0f700011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff003801307cfd00031c01c01efe002301c01c00c0f000001c01c00c1e000001c01c00c1e000001c01c01e30000001c01c01e1e0f800011f06ff003801307cfd00031c01c01efe002301c01c00c0f000001c01c00c1e000001c01c00c1e000001c01c01e30000001c01c01e1e0f800011f06ff003801307cfd000360003033fe001306000303c13000006000303c33000006000303c3fe000c60003033330000060003033330f800011f06ff003801307cfd000360003033fe001306000303c13000006000303c33000006000303c3fe000c60003033330000060003033330f800011f06ff003801307cfd0003c0001833fe00230c000180c3300000c000180c0300000c000180c3e00000c00018033300000c0001803030f800011f06ff003801307cfd0003c0001833fe00230c000180c3300000c000180c0300000c000180c3e00000c00018033300000c0001803030f800011f06ff003801307cfd0003c000181efe00230c000180c3300000c000180c0600000c000180c3300000c00018063300000c000180e060f800011f06ff003801307cfd0003c000181efe00230c000180c3300000c000180c0600000c000180c3300000c00018063300000c000180e060f800011f06ff003801307cfd0003c0001833fe00230c000180c3300000c000180c0c00000c000180c3300000c000180c3f00000c00018030c0f800011f06ff003801307cfd0003c0001833fe00230c000180c3300000c000180c0c00000c000180c3300000c000180c3f00000c00018030c0f800011f06ff003801307cfd000360003033fe002306000300c32000006000300c18000006000300c330000060003018030000060003033180f800011f06ff003801307cfd000360003033fe002306000300c32000006000300c18000006000300c330000060003018030000060003033180f800011f06ff003801307cfd00031c01c01efe002301c01c03f3c000001c01c03f3f000001c01c03f1e000001c01c03f03000001c01c01e3f0f800011f06ff003801307cfd00031c01c01efe002301c01c03f3c000001c01c03f3f000001c01c03f1e000001c01c03f03000001c01c01e3f0f800011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff002801307cfd000103fefb00013fe0fc000103fefb00013fe0fc000103fefb00013fe0f500011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff0098003e01540000016601e801540000016601e101540000016601e100010a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000a01307cc900011f06ff000901307fc8ff0006ff000901307fc8ff0006ff000901307fc8ff0006ff000901307fc8ff0006ff00080030c7000006ff00080030c7000006ff00080030c7000006ff00080030c7000006ff0008003fc7ff00feff0008003fc7ff00feff0002c30002c300a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi-360\li720\widctlpar\adjustright {\f4 Figure 15-1:  Ruler Dialog from Quick Click Draw\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par \tab This dialog appears when the user picks the \ldblquote Custom Rulers...\rdblquote  command from the Layout menu.  The natural way to write the program is:\par \par }\pard \qj\fi-360\li1440\widctlpar\adjustright {\f4 1.\tab Draw the dialog.\par 2.\tab Handle any user events.\par 3.\tab Make the appropriate changes to the internal tables that control the ruler in a drawing.\par 4.\tab Redraw the front-most user window with the new ruler settings.\par 5.\tab Return control to the main event loop.\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par \tab This leaves you between a rock and a hard place concerning the program design, though.  The first choice is to mess up this clean subroutine design (and your main program loop) by bailing out to the main program loop after drawing the dialog, letting the main event loop handle user events, then call some other subroutine to handle the ruler changes.  The other choice is to create a second event loop to handle the dialog.  That is bad for two reasons: it makes the program larger, and it creates a second event loop, making the program harder to modify and making errors more likely.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par {\*\bkmkstart bk82}Well, I wouldn\rquote t have spent all that time telling you about all of these problems if there wasn\rquote t a solution, and there is.  The Window Manager has a call called }{\f6\fs20 DoModalWindow}{\f4 .  It\rquote s sort of like }{\f6\fs20 TaskMaster}{\f4  for modal dialogs.  You call }{\f6\fs20 DoModalWindow}{\f4  repeatedly, just like you call }{\f6\fs20 TaskMaster}{\f4  in your main event loop.  }{\f6\fs20 DoModalWindow}{\f4  returns the control that was hit (if any), just like }{\f6\fs20 TaskMaster}{\f4  returns the event code, and even returns 0 if no control was hit, just as }{\f6\fs20 TaskMaster}{\f4  returns null events.  You just call this subroutine until you see a hit on one of the buttons that gets rid of the dialog, like an OK button or a Cancel button, then drop out of your loop and do whatever else you need to do.\par }{\f6\fs20 DoModalWindow}{\f4  is defined like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 LongWord DoModalWindow(EventRecordPtr event, VoidProcPtr updateProc,\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    VoidProcPtr eventHook, VoidProcPtr beepProc, Word flags);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Using the call isn\rquote t very complicated, but there are a lot of options.  I\rquote m going to go into detail on a couple, and gloss over some others.  The reason is to keep this discussion simple, and concentrate on the concepts rather than getting bogged down in details.\par The first parameter is an event record; }{\f6\fs20 DoModalWindow}{\f4  uses this event record for calls to }{\f6\fs20 GetNextEvent}{\f4 .  You can pass the same event record that you use in your main event loop, but I\rquote d recommend against it.  A local event record will keep the two loops separate, and just might prevent some hard to track down bugs.  Keeping separate code separate is one of the fundamental principles of modularized coding, and that\rquote s really what you are doing when you use a local event record.\par The next three parameters are addresses to functions that will replace standard functions inside }{\f6\fs20 DoModalWindow}{\f4 , or that give you a chance to get into the act, doing something while }{\f6\fs20 DoModalWindow}{\f4  processes an event.  The ideas behind writing these functions are the same as the ideas behind other functions you have already learned about.  I\rquote m not going to go into details about these functions here.  If you are curious, you can refer to }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4  for details.  All of these functions have defaults; you can pass }{\f6\fs20 NULL}{\f4  for all three parameters to get the defaults.\par The last parameter is a flag word.  Here\rquote s a bit-by-bit breakdown:\par \par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 bit 15\tab If this bit is set, the dialog can be moved.  If the bit is clear, the dialog can\rquote t be moved.\par \par \tab Setting this bit is a start, but you still have to have something to click on with the mouse.  If you want a moveable dialog, you have to set this bit }{\i\f4 and}{\f4  make sure the dialog has a title bar.\par \par bit 14\tab Some windows may need to be updated while }{\f6\fs20 DoModalWindow}{\f4  has control.  If the dialog is moveable, just moving it might uncover part of another window.  Even if the dialog can\rquote t be moved, a desk accessory or interrupt handler (like a message from the AppleTalk network software) could wipe out part of a window.  If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  will try to call the update procedure for any window that needs to be updated; that will work fine the way we\rquote ve defined windows and update procedures in this course.  If this bit is not set, windows other than the dialog itself and desk accessory windows won\rquote t get updated unless you do it manually in the loop that calls }{\f6\fs20 DoModalWindow}{\f4 .\par \par bits 13-6\tab These bits are reserved, and must be set to 0.\par \par bit 5\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  returns any time it handles an activate event, giving your program a chance to do any clean-up tasks it might want to do after a system window appears or vanishes.  If this bit is clear, }{\f6\fs20 DoModalWindow}{\f4  doesn\rquote t return after an activate event; instead, it loops and checks for another event.\par \par bit 4\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  allows desk accessories to operate, and does everything appropriate to handle them.\par \par bit 3\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  will switch the cursor from the normal arrow to an I-beam cursor when the cursor is over an edit line or text edit control.  That\rquote s what you would normally want.  Be careful, though \endash  if this bit is set, and if your dialog actually has an edit line or text edit control, the cursor might still be an I-beam cursor when the dialog closes.  It\rquote s up to you to call }{\f6\fs20 InitCursor}{\f4  to make sure the cursor is reset to an arrow.\par \par bit 2\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  calls }{\f6\fs20 MenuKey}{\f4  to see if keys pressed while the open-apple key is pressed are menu command equivalents.  If this bit is clear, }{\f6\fs20 DoModalWindow}{\f4  returns all key events except the standard keyboard equivalents for Cut (}{\outl\f4\fs20 \u-3\'f0}{\f4 X), Copy (}{\outl\f4\fs20 \u-3\'f0}{\f4 C), Paste (}{\outl\f4\fs20 \u-3\'f0}{\f4 V), and Undo (}{\outl\f4\fs20 \u-3\'f0}{\f4 Z).  Those four key equivalents are always handled by }{\f6\fs20 DoModalWindow}{\f4 .\par \par bit 1\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  will allow the user to pull down menus and use menu commands.  }{\f6\fs20 DoModalWindow}{\f4  will handle any of the standard editing commands, but your program will have to handle any other menu commands.  Of course, you could disable all of the menu commands except the ones you want to handle while you are in the dialog.\par \par bit 0\tab If this bit is clear, }{\f6\fs20 DoModalWindow}{\f4  uses the Scrap Manager for cut, copy and paste.  If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  doesn\rquote t use the Scrap Manager.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Since }{\f6\fs20 DoModalWindow}{\f4  returns the part control for any controls that are hit, you can handle the controls the way you did in lessons 13 and 14.\par Putting these ideas together, here\rquote s how you would use }{\f6\fs20 DoModalWindow}{\f4  in a typical loop:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 dlgPtr = NewWindow2("\\p  Test  ", 0, NULL, NULL, 0x02,\par    1001, rWindParam1);\par if (dPtr != NULL) \{\par    do\par       part = DoModalWindow(&dEvent, NULL, NULL, NULL, 0xC01E);\par       switch (part) \{\par          /* handle control hits here */\par          \}\par    while (/* part is not one of the exit buttons */);\par    InitCursor();\par    /* take action based on control settings here */\par    CloseWindow(dlgPtr);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 15-1:  Start with the solution to Problem 12-1; that\rquote s the latest version of your text editor.  In this problem, you\rquote ll add margin adjustment.\par Create a menu command called \ldblquote Margins...\rdblquote , adding it to the Style menu.  (The \ldblquote ...\rdblquote  after the menu command name is a convention \endash  all menu commands that bring up a dialog end with \ldblquote ...\rdblquote )  When this menu command is used, bring up a modal dialog like the one shown below.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1102{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw216\pich212\picwgoal4320\pichgoal4240\macpict\bliptag918589739\blipupi72{\*\blipuid 36c0912bbbbf787820744470632e492a}0fd10000000000d400d81101a00082a0008e01000a0000000002d0024098001c0000000000d400d80000000000d400d80000000000d400d8000102e50002e50007003fe8ff01fc0007003fe8ff01fc00070030e800010c00070030e800010c00070030e800010c00070030e800010c00130033f9ff08802080000018000001f9ff01cc00130033f9ff08802080000018000001f9ff01cc000c0030f800013180f300010c000c0030f800013180f300010c00130033f9ff08803b8f9b1f38f87801f9ff01cc00130033f9ff08803b8f9b1f38f87801f9ff01cc00110030f800063f999c3318ccc0f800010c00110030f800063f999c3318ccc0f800010c00130033f9ff08803599983318cc7801f9ff01cc00130033f9ff08803599983318cc7801f9ff01cc00110030f800063199981f18cc0cf800010c00110030f800063199981f18cc0cf800010c00130033f9ff0880318f98233ccc7801f9ff01cc00130033f9ff0880318f98233ccc7801f9ff01cc000b0030f500001ef500010c000b0030f500001ef500010c00070030e800010c00070030e800010c0007003fe8ff01fc0007003fe8ff01fc00070030e800010c00070030e800010c00070030e800010c00070030e800010c000901307feaff02fe0c000901307feaff02fe0c000901307feaff02fe0c000901307feaff02fe0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c001505307c03c00380fe000041fe000030f600023e0c001505307c03c00380fe000041fe000030f600023e0c001109307c0660018000030063f200023e0c001109307c0660018000030063f200023e0c00170f307c0603c183c3c7c0771f363e71f0f0f800023e0c00170f307c0603c183c3c7c0771f363e71f0f0f800023e0c00170f307c03c661866663007f333866319980f800023e0c00170f307c03c661866663007f333866319980f800023e0c00170f307c0067e187e603006b3330663198f0f800023e0c00170f307c0067e187e603006b3330663198f0f800023e0c00170f307c066601860663606333303e319818f800023e0c00170f307c066601860663606333303e319818f800023e0c001802307c03fdc30ac1c0631f30467998f19980fa00023e0c001802307c03fdc30ac1c0631f30467998f19980fa00023e0c000d01307cf700003cf500023e0c000d01307cf700003cf500023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000f01307cf400fbff0080fe00023e0c000f01307cf400fbff0080fe00023e0c001201307cf40000c0fd00010180fe00023e0c001201307cf40000c0fd00010180fe00023e0c001d07307c060001c00082fe000060fe0001c078fe00010180fe00023e0c001d07307c060001c00082fe000060fe0001c078fe00010180fe00023e0c001907307c0600030600c6fa0001c098fe00010180fe00023e0c001907307c0600030600c6fa0001c098fe00010180fe00023e0c001d10307c0603c7cf80ee3e6c7ce3e00000c198fe00010180fe00023e0c001d10307c0603c7cf80ee3e6c7ce3e00000c198fe00010180fe00023e0c001d10307c0606630600fe6670cc63300000c198fe00010180fe00023e0c001d10307c0606630600fe6670cc63300000c198fe00010180fe00023e0c001d10307c0607e30600d66660cc63300000c198fe00010180fe00023e0c001d10307c0607e30600d66660cc63300000c198fe00010180fe00023e0c001d10307c06060306c0c666607c63300000c190fe00010180fe00023e0c001d10307c06060306c0c666607c63300000c190fe00010180fe00023e0c001d10307c07e3c30380c63e608cf3300000c1e0fe00010180fe00023e0c001d10307c07e3c30380c63e608cf3300000c1e0fe00010180fe00023e0c001601307cf9000078fd0000c0fd00010180fe00023e0c001601307cf9000078fd0000c0fd00010180fe00023e0c001201307cf40000c0fd00010180fe00023e0c001201307cf40000c0fd00010180fe00023e0c000f01307cf400fbff0080fe00023e0c000f01307cf400fbff0080fe00023e0c000901307cea00023e0c000901307cea00023e0c000f01307cf400fbff0080fe00023e0c000f01307cf400fbff0080fe00023e0c001301307cf40006c3fffffc000180fe00023e0c001301307cf40006c3fffffc000180fe00023e0c001d08307c07c30018000104fe0009c00000c20f0e0c000180fe00023e0c001d08307c07c30018000104fe0009c00000c20f0e0c000180fe00023e0c001a08307c066000180c018cfb0006c27e667c000180fe00023e0c001a08307c066000180c018cfb0006c27e667c000180fe00023e0c001d15307c06670f9f1f01dc7cd8f9c7c000c20e660c000180fe00023e0c001d15307c06670f9f1f01dc7cd8f9c7c000c20e660c000180fe00023e0c001d15307c07c319998c01fccce198c66000c3e70fe4000180fe00023e0c001d15307c07c319998c01fccce198c66000c3e70fe4000180fe00023e0c001d15307c06c319998c01acccc198c66000c3e667e4000180fe00023e0c001d15307c06c319998c01acccc198c66000c3e667e4000180fe00023e0c001d15307c06630f998d818cccc0f8c66000c2666664000180fe00023e0c001d15307c06630f998d818cccc0f8c66000c2666664000180fe00023e0c001d15307c0667919987018c7cc119e66000c30f0f0c000180fe00023e0c001d15307c0667919987018c7cc119e66000c30f0f0c000180fe00023e0c001a04307c00000ffb0000f0fe0006c3fffffc000180fe00023e0c001a04307c00000ffb0000f0fe0006c3fffffc000180fe00023e0c001201307cf40000c0fd00010180fe00023e0c001201307cf40000c0fd00010180fe00023e0c000f01307cf400fbff0080fe00023e0c000f01307cf400fbff0080fe00023e0c000901307cea00023e0c000901307cea00023e0c000f01307cf400fbff0080fe00023e0c000f01307cf400fbff0080fe00023e0c001201307cf40000c0fd00010180fe00023e0c001201307cf40000c0fd00010180fe00023e0c001903307c07c0fb000018fd0001c078fe00010180fe00023e0c001903307c07c0fb000018fd0001c078fe00010180fe00023e0c001903307c0660fb000018fd0001c098fe00010180fe00023e0c001903307c0660fb000018fd0001c098fe00010180fe00023e0c001d0b307c0663e6c7c7cd8f9f1f0ffe0001c198fe00010180fe00023e0c001d0b307c0663e6c7c7cd8f9f1f0ffe0001c198fe00010180fe00023e0c001d0b307c07c6670cccce19999998fe0001c198fe00010180fe00023e0c001d0b307c07c6670cccce19999998fe0001c198fe00010180fe00023e0c001d0b307c0606660ccccc1999998ffe0001c198fe00010180fe00023e0c001d0b307c0606660ccccc1999998ffe0001c198fe00010180fe00023e0c001d10307c0606660cc7cc19999981800000c190fe00010180fe00023e0c001d10307c0606660cc7cc19999981800000c190fe00010180fe00023e0c001d0b307c0603e607c8cc0f9f198ffe0001c1e0fe00010180fe00023e0c001d0b307c0603e607c8cc0f9f198ffe0001c1e0fe00010180fe00023e0c001901307cfd000307800018fc0000c0fd00010180fe00023e0c001901307cfd000307800018fc0000c0fd00010180fe00023e0c001201307cf40000c0fd00010180fe00023e0c001201307cf40000c0fd00010180fe00023e0c000f01307cf400fbff0080fe00023e0c000f01307cf400fbff0080fe00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000901307cea00023e0c000f03307c001ffeff00f0f000023e0c000f03307c001ffeff00f0f000023e0c001003307c03e0fe00010f80f100023e0c001003307c03e0fe00010f80f100023e0c001803307c1e3ffeff01f8f0fd00003ffaff00f0fe00023e0c001803307c1e3ffeff01f8f0fd00003ffaff00f0fe00023e0c001903307c39e0fe00010f38fe000101e0fa00001efe00023e0c001903307c39e0fe00010f38fe000101e0fa00001efe00023e0c001702307c77fd000101dcfe000007f90006038000003e0c001702307c77fd000101dcfe000007f90006038000003e0c001d08307cee00078c6000eefe00030e000780fe0008070001c000003e0c001d08307cee00078c6000eefe00030e000780fe0008070001c000003e0c001d08307cee000cccc000eefe00030e000cc0fe0008030001c000003e0c001d08307cee000cccc000eefe00030e000cc0fe0008030001c000003e0c001d08307cee000ccd8000eefe000f0e000c07cf8787830001c000003e0c001d08307cee000ccd8000eefe000f0e000c07cf8787830001c000003e0c001d08307cee000ccf0000eefe00030e000c0cfecc08c30001c000003e0c001d08307cee000ccf0000eefe00030e000c0cfecc08c30001c000003e0c001d08307cee000ccd8000eefe000f0e000c0ccccc0fc30001c000003e0c001d08307cee000ccd8000eefe000f0e000c0ccccc0fc30001c000003e0c001c08307cee000cccc000eefe00020e000cfdcc08030001c000003e0c001c08307cee000cccc000eefe00020e000cfdcc08030001c000003e0c001d08307cee00078c6000eefe000f0e000787ccc787878001c000003e0c001d08307cee00078c6000eefe000f0e000787ccc787878001c000003e0c001602307ceefc0000eefe00000ef9000601c000003e0c001602307ceefc0000eefe00000ef9000601c000003e0c001702307c77fd000101dcfe000007f90006038000003e0c001702307c77fd000101dcfe000007f90006038000003e0c001903307c39e0fe00010f38fe000101e0fa00001efe00023e0c001903307c39e0fe00010f38fe000101e0fa00001efe00023e0c001803307c1e3ffeff01f8f0fd00003ffaff00f0fe00023e0c001803307c1e3ffeff01f8f0fd00003ffaff00f0fe00023e0c001003307c03e0fe00010f80f100023e0c001003307c03e0fe00010f80f100023e0c000f03307c001ffeff00f0f000023e0c000f03307c001ffeff00f0f000023e0c000901307cea00023e0c000901307cea00023e0c000901307feaff02fe0c000901307feaff02fe0c000901307feaff02fe0c000901307feaff02fe0c00070030e800010c00070030e800010c00070030e800010c00070030e800010c0007003fe8ff01fc0007003fe8ff01fc0002e50002e500a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 15-2:  Margin Adjustment Dialog\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The user should be able to move this dialog, use desk accessories, and use menu commands.\par Once the OK or Cancel button is selected, drop out of the }{\f6\fs20 DoModalWindow}{\f4  loop.  If the Cancel button was hit, don\rquote t do anything.  If the OK button was hit, change the ruler and redraw the window.\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1103{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \tab }{\b\f4 Hint}{\f4 \tab You will need to call }{\f6\fs20 TESetRuler}{\f4  to implement this command, but you\rquote re also dealing with more then one window.  That makes it tough to use }{\f6\fs20 NULL}{\f4  for the last parameter, telling TextEdit to use the current text record.  The program will be a lot easier to write if you use }{\f6\fs20 GetCtlHandleFromID}{\f4  to fetch the actual TextEdit control handle, and pass the result as the last parameter to }{\f6\fs20 TESetRuler}{\f4 .\~\~}{{\pict{\*\picprop\shplid1104{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk82}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DoModalWindow}{\rxe bk82}}}{\*\bkmkend bk83}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modal dialogs}{\rxe bk83}}}{\*\bkmkend bk84}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs\:modal}{\rxe bk84}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Modeless Dialogs}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Modeless Dialogs\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk85}{\*\bkmkstart bk86}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 A modeless dialog is just another window with a lot of controls instead of data.  Since modeless dialogs are just windows, you need to handle them from the main event loop.  One way to handle this situation is to implement two subroutines, one to see if the front window is a dialog, and the other to actually handle any event that might occur in the dialog.  The possible events are usually limited to control events, so you don\rquote t usually have to make the check in every position in the event loop.  Here\rquote s a typical event loop, modified to check for modeless dialog events:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 done = FALSE;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 myEvent.wmTaskMask = 0x001F7FFF;\par while (!done) \{\par    event = TaskMaster(everyEvent, &myEvent);\par    switch (event) \{\par       case wInSpecial:\par       case wInMenuBar:          HandleMenu();\par                                 break;\par \par       case wInGoAway:           DoClose((GrafPortPtr) myEvent.wmTaskData);\par                                 break;\par \par       case wInControl:          if (IsDialog(FrontWindow()))\par                                    HandleDialog(FrontWindow());\par                                 break;\par       \}\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If there is more than one dialog, }{\f6\fs20 HandleDialog}{\f4  should probably call a separate subroutine for each one.  Any duplication of effort this creates will be well paid for with a program that is easy to modify and debug.\par When you actually use a modeless dialog, it\rquote s quite common to select a document window, bringing it to front, and covering up the dialog in the process.  The natural reaction when you want the dialog and don\rquote t see it is to pull down the menu and use the command to bring up the dialog.  The best way to handle this in your program is to check to see if the dialog is already open before you call }{\f6\fs20 NewWindow2}{\f4 .  If the dialog is already open, just bring the dialog window to front by calling }{\f6\fs20 BringToFront}{\f4 , like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 BringToFront}}}{\v\f4 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 BringToFront(dialogWPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 15-2:  Start with the solution to Problem 15-1, and add a new menu called Find.  This menu should have one menu item, \ldblquote Find...\rdblquote   (In a complete editor, it would also have a search and replace dialog, and perhaps some other movement commands.)  Use a dialog like this for the command:\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1105{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw208\pich110\picwgoal4160\pichgoal2200\macpict\bliptag-2022885052\blipupi72{\*\blipuid 876d39441439f65d291cd1d2cea834fa}06b100000000006e00d01101a00082a0008e01000a0000000002d0024098001a00000000006e00d000000000006e00d000000000006e00d0000102e70002e70006003fe9ff00fc06003fe9ff00fc060030e900000c060030e900000c060030e900000c060030e900000c120333f3fff9fbff05803e30001803f8ff00cc120333f3fff9fbff05803e30001803f8ff00cc100330030018fa000330000018f700000c100330030018fa000330000018f700000c120333f30019fbff05803071f0f803f8ff00cc120333f30019fbff05803071f0f803f8ff00cc100330030018fa00033c319998f700000c100330030018fa00033c319998f700000c120333f30019fbff05803031999803f8ff00cc120333f30019fbff05803031999803f8ff00cc100330030018fa000330319998f700000c100330030018fa000330319998f700000c120333f3fff9fbff0580307998f803f8ff00cc120333f3fff9fbff0580307998f803f8ff00cc060030e900000c060030e900000c060030e900000c060030e900000c06003fe9ff00fc06003fe9ff00fc060030e900000c060030e900000c060030e900000c060030e900000c060030e900000c060030e900000c090030fa00f1ff01c00c090030fa00f1ff01c00c0f0030fa0000c0fe000002f60001c00c0f0030fa0000c0fe000002f60001c00c13083001f18000c00000c0fe000002f60001c00c13083001f18000c00000c0fe000002f60001c00c130c3001800000c00000c0c00000c2f60001c00c130c3001800000c00000c0c00000c2f60001c00c130c3001838f87cc0000c1f0f199f2f60001c00c130c3001838f87cc0000c1f0f199f2f60001c00c130c3001e18cccc00000c0c198f0c2f60001c00c130c3001e18cccc00000c0c198f0c2f60001c00c130c3001818cccc00000c0c1f860c2f60001c00c130c3001818cccc00000c0c1f860c2f60001c00c130c3001818cccc00000c0d980f0daf60001c00c130c3001818cccc00000c0d980f0daf60001c00c130c300183ccc7cc0000c070f19872f60001c00c130c300183ccc7cc0000c070f19872f60001c00c0f0030fa0000c0fe000002f60001c00c0f0030fa0000c0fe000002f60001c00c0b0030fa0000c0f20001c00c0b0030fa0000c0f20001c00c090030fa00f1ff01c00c090030fa00f1ff01c00c060030e900000c060030e900000c060030e900000c060030e900000c060030e900000c060030e900000c0c02300007fcff00c0f100000c0c02300007fcff00c0f100000c0c023000f8fc00003ef100000c0c023000f8fc00003ef100000c110230078ffcff01e3c0fc00f9ff02c0000c110230078ffcff01e3c0fc00f9ff02c0000c1402300e78fc00013ce0fd00010780fa000278000c1402300e78fc00013ce0fd00010780fa000278000c1302301dc0fc00010770fd00001cf900020e000c1302301dc0fc00010770fd00001cf900020e000c1909303b8003e300018003b8fd000238001efd00041c0007000c1909303b8003e300018003b8fd000238001efd00041c0007000c1909303b80030000018003b8fd0002380033fd00040c0007000c1909303b80030000018003b8fd0002380033fd00040c0007000c1a09303b8003071f0f8003b8fd000b3800301f3e1e1e0c0007000c1a09303b8003071f0f8003b8fd000b3800301f3e1e1e0c0007000c1909303b8003c319998003b8fd0002380030fd33040c0007000c1909303b8003c319998003b8fd0002380030fd33040c0007000c1a09303b80030319998003b8fd000b3800303333303f0c0007000c1a09303b80030319998003b8fd000b3800303333303f0c0007000c1909303b80030319998003b8fd00013800fd3305300c0007000c1909303b80030319998003b8fd00013800fd3305300c0007000c1a09303b800307998f8003b8fd000438001e1f33fe1e030007000c1a09303b800307998f8003b8fd000438001e1f33fe1e030007000c1302303b80fc000103b8fd000038f9000207000c1302303b80fc000103b8fd000038f9000207000c1302301dc0fc00010770fd00001cf900020e000c1302301dc0fc00010770fd00001cf900020e000c1402300e78fc00013ce0fd00010780fa000278000c1402300e78fc00013ce0fd00010780fa000278000c110230078ffcff01e3c0fc00f9ff02c0000c110230078ffcff01e3c0fc00f9ff02c0000c0c023000f8fc00003ef100000c0c023000f8fc00003ef100000c0c02300007fcff00c0f100000c0c02300007fcff00c0f100000c060030e900000c060030e900000c060030e900000c060030e900000c060030e900000c060030e900000c06003fe9ff00fc06003fe9ff00fc02e70002e700a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 15-3:  Sample Find Dialog\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Add appropriate subroutines to create this dialog, detect and handle hits in the dialog from the main event loop, and to make the dialog go away when the appropriate button is hit.  Use a close box with the dialog, and support closing the dialog when the cancel button is hit, when the close box is hit, or when Close is selected from the File menu and the dialog is the front window.\par The point of this problem is to handle a modeless dialog, not to delve into the data structures and algorithms for searching a text edit buffer.  If you would like to actually handle the Find command, go for it: it\rquote s a great programming exercise, but it won\rquote t teach you much about using dialogs.  The solution does implement the command, though.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f6\fs20 GetNextWindow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f6\fs20 TEGetSelection}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f6\fs20 TESetSelection}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you do decide to implement the Find command, there are two problems you\rquote ll have to deal with.  The first is finding the window to search \endash  it\rquote s not the front window, since the Find dialog is active.  You can use }{\f6\fs20 GetNextWindow}{\f4  to scan the open windows, starting with the Find window, to find the topmost document.  The other problem is that you\rquote ll have to find the current selection point (so you know where to start the search) and set the selection point (to select the string, if you find it).  }{\f6\fs20 TEGetSelection}{\f4  and }{\f6\fs20 TESetSelection}{\f4  will find and set the selection point.  See Appendix A or the toolbox reference manuals for details about these calls.\par {\*\bkmkend bk85}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modeless dialogs}{\rxe bk85}}}{\*\bkmkend bk86}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs\:modeless}{\rxe bk86}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson introduced dialogs, which are the main kind of window used with controls.  The lesson covered the difference between modal and modeless dialogs.  It showed you that creating a dialog is no different than creating a standard window with controls.  The lesson also covered the calls and ideas needed to handle events in both modal and modeless dialogs without destroying the structure of your program\rquote s main event loop.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 BringToFront\tab DoModalWindow\tab GetNextWindow\tab TEGetSelection\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 TESetSelection\par }\pard \qj\widctlpar\adjustright {\*\bkmkend bk87}{\pard\plain \qj\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 dialogs}{\rxe bk87}}}{\v\f4 \par }{\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 16 \endash  Sound Off!}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 16 \endash  Sound Off!}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 16 \endash  Sound Off!\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk92}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The \ldblquote S\rdblquote  in Apple II}{\f4\fs20 GS}{\f4  stands for sound.  This lesson introduces the various sound tools.  It would be easy to fill a book this size with nothing but information about sound, and still not cover everything completely, so this lesson doesn\rquote t even attempt to cover all of the things you can do with sound on the Apple II}{\f4\fs20 GS}{\f4 .  Instead, this lesson shows you how to handle two of the most common and useful kinds of sound on the Apple II}{\f4\fs20 GS}{\f4 : playback of digitally recorded sound and using the Apple II}{\f4\fs20 GS}{\f4  to play notes using an instrument.\par Along the way, the lesson tells you enough about what sound is for you to understand what the sound tools are doing.  It also reviews the various tools, hardware devices, and software packages that you can explore to create and play back various kinds of sound.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Physics of Sound}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Physics of Sound\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 It\rquote s easier to see how the sound tools work, and a lot easier to design instrument files, if you have some idea what sound really is.  You\rquote ve probably heard that sound is a wave, but what does that mean?  Most people think of a wave of water crashing onto a beach, or ripples in a pond.  That\rquote s certainly one kind of wave, and there are a lot of similarities between ripples in a pond and sound waves.  There are a lot of differences, too, though.\par You see, there are three kinds of waves.  Ripples on a pond are transverse waves; they happen when something moves back and forth (or up and down; in this case, the surface of the water).  Sound waves are a compression wave, or longitudinal wave; sound is a compression of the air.  The third kind of wave is a torsional wave, like a kid twisting the ropes on a swing, turning first to the left, and then to the right.  Each of these waves behaves a little differently.\par Sound gets started when something vibrates in the air.  A really simple example is a guitar string.  When you pluck the string, the string vibrates back and forth (a transverse wave).  As it vibrates, the string moves air back and forth, too, first compressing it and then pulling back, forming a mild vacuum, which pulls on the air.  All of those little air molecules get busy, banging into each other.  As they do, a wave forms, which spreads out at the speed of sound.  Imagining sound at the molecular level, with all of those little molecules bumping into each other, you can see why the speed of sound depends on a lot of things, like what those air molecules are made of (generally how much moisture is in the air), how many of them there are in a given amount of space (the density, measured as barometric pressure) and how fast the molecules were moving on their own (the temperature).  In any case, the sound moves out from the string.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1106{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw231\pich126\picwgoal4620\pichgoal2520\macpict\bliptag1018443322\blipupi72{\*\blipuid 3cb4363a8be8d2c5c82c5ef06d66334e}0720ffffffff007d00e61101a0008201000affffffff007d00e698001e00000000006800e800000000006800e500110000007a00e6000002e30002e30002e30007fe00011ffce8000905000003e003c0e900090500001c0ff838e9000905000021f00786e9000a060000ce00007180ea000a0600031000000c60ea000a0600046000000330ea000a02000980fe00008cea0009010012fd000066ea0009010024fd000013ea000a010048fd00010880eb000a010090fd00010640eb000a0100a0fd00010120eb000d010120fc0004b000000ff0ef000d010140fc0004980000f00eef000e010240fc00054c000787e180f0000e010280fc000526003c381c60f0000e010480fc00051380e1c00310f0000d0005fb000508c38e0000c8f0000d0009fb0005063c30000024f0000d000afb00050181c0000012f0000c000afa00007efe00000af000080012f6000009f000080014f6000005f000080014f6000005f000090014f600010480f100090024f600010280f100090028f600010280f100090028f600010280f100090028f600010240f100090048f600010140f100090050f600010140f1000f0050f600010140f700021e38f8fe000f0050f600010140f70002122888fe00130050fc000078fc00010140f70002122888fe00150050fc00074800001fc0000140f700021c3870fe00150050fc00074800007ff0000120f70002142850fe00150090fc0007480001fffc0000a0f8000001fefffe001600a0fc0007480003fffe0000a0f8000302000001fe001300a0fc0004480007fffff50003041c3871fe001300a0fd000501fffffc0003f4ff02f42851fe001b00a0fc000b48000fffffd5492492445a08fc1006281ff8f08000001400a0fd000501fffff00000f4ff05f0ff008000001d00a0fc001748001fffffd5492492445a081450145014a87f00004000001500a0fd000601fffff000007ff5ff058000004000001d00a0fc001148001fffffd5492492445a081450145014a8fe00024000001400a0fd000601fffff000007ff5fffe00024000001d00a0fc001748001fffffd5492492445a081450145014a8fc00004000001500a0fd000601fffff000007ff5ff05fbe0004000001d00a0fc001748003fffffd5492492445a0817d017d017a807ff808000001400a0fd000501fffff80001f4ff05fc38708000001600a0fc0007480007ffff8000a0f8000308142851fe001600a0fc0007480007ffff0000a0f80003041c3871fe001600a0fc0007480003fffe0000a0f8000302000001fe00150090fc0007480001fffc0000a0f8000001fefffe00150050fc00074800007ff0000120f70002142850fe00150050fc00074800001fc0000140f700021c3870fe00130050fc000078fc00010140f70002244450fe000f0050f600010140f70002244450fe000f0050f600010140f700023c7c70fe00090050f600010140f100090048f600010140f100090028f600010240f100090028f600010280f100090028f600010280f100090024f600010280f100090014f600010480f100080014f6000005f000080014f6000005f0000c0012fa0000fcfe000009f0000d000afb00010307fe00000af0000d000afb00050478f0000012f0000d0009fb000508c784000024f0000d0005fb00050b00730000c8f0000e010480fc0005120018c00310f0000e010280fc0005240006381c60f0000e010240fc000548000387e180f0000d010140fc0004900000700eef000d010120fc0004b000000ff0ef000a0100a0fd00010120eb000a010090fd00010660eb000a010048fd000108c0eb0009010024fd000013ea0009010013fd000066ea000a02000880fe00008cea000a0600066000000330ea000a0600011800000c60ea000a060000c700007180ea000905000030f00786e900090500000e0ff838e9000905000001e003c0e90007fe00011ffce80002e30002e30002e30002e30002e30002e30002e30002e30002e3000988002200880022005000290037005700655000170025006800765000010010007d008c070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000109ffffffffffffffff220041003406ff2305022305012305fe2309022308fd230b042308fb230d042309fc2308042309fd230900230603230afd2307032306fe230302a000a301000affffffff007d00e6220041003401002303002302002303002300002301012302002301002302012302002301ff2301002304002303002301002302002302002302002301ff2301002302002303002302012301002302012302002303002302002301ff2301ff2303ff2302002303012301002302012303002303002302002301ff2301002303ff2302002302012301002301012302002302002302002302ff2302002305ff2302002302002304012301002301012302002302002301002302ff230200230400230200230101230100230200230300230000230000230200230200230201230000a000a1a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 16-1:  A Vibrating Guitar String Causes Sound\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par One of the big differences between a transverse wave, like ripples in a pond, and a longitudinal wave, like sound, is what happens when the wave hits something.  When a water wave hits the side of a pool, for example, the water rises, then sinks, and the wave bounces back towards the middle of the pool.  Sound does that, too; that\rquote s what causes an echo.  The water doesn\rquote t jerk the side of the pool up and down, though, sending the wave through the surrounding concrete, soil, and so forth.  On the other hand, sound does keep right on going.  When sound hits a window, for example, it vibrates the window back and forth.  Some of the energy in the sound wave is wasted, bouncing back towards the source.  Some of the energy gets absorbed by the molecules in the glass, heating them up a bit.  Some of the sound reappears on the other side, though, as the glass vibrates the air and sends the sound on its way on the other side.  With all of the energy that gets absorbed, it\rquote s easy to see why it\rquote s hard to hear someone on the other side of a window \endash  but you can certainly hear them.\par Eventually, sound arrives at your ear.  The sound waves vibrate your eardrum, just like they vibrated the window.  Your eardrum separates out the various frequencies of sound in a tuba shaped organ called the cochlea \endash  each frequency ends up vibrating a little better in one part of the tube compared to the other parts.  Nerves in the tube determine whether there is any vibration at a particular frequency, and how loud it is.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1107{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw254\pich148\picwgoal5080\pichgoal2960\macpict\bliptag-955598201\blipupi72{\*\blipuid c70aba872ff5eabbf93b461259cc962c}18bfffffffff009300fd1101a0008201000affffffff009300fd070000000022e0c0e0c00000a000a0a100a40002030001000a000000000000000007000100010911224488112244882200490097f801230602230c06230907230a062300ff2300ee23f80323f8fe23f2fc0a112244881122448884000a0000000000000000a000a301000affffffff009300fd8400d800490092005e00b40049009500967fff004a009200950097009c7fff004b00920094009c009f7fff004c00940096009f00a27fff004d0096009800a200a600b000b37fff004e0098009a00a600b07fff004f009a009c00b300b47fff0050009c009d7fff0051009d009f7fff0052009f00a07fff005300a000a27fff005400a200a47fff005500a400a67fff005600a600a77fff005700a700a97fff005800a900aa7fff005900aa00ab7fff005a00ab00ac7fff005b00ac00ae7fff005c00ae00b07fff005d00b000b27fff005e00b200b47fff7fff2200490097ff0023ff0023fe0123ff0023000023000023ff002301012300002300002303012302012302012302012303022305032302012303022305042302012302012302012300002301002300002300f72300ff2300fe2300ff23fffe2300ff23ffff23000023ff0023ff0023ff0123fe0023fe0023fe0023ff0023000023ff0023fdff23ff0023feff23fcff23fdff23fe0023feffa000a1070000000022e0c0e0c00000a000a0a100a40002030001000a00000000000000000700010001220072004500032302062300062303fe2305fb2303fe2302fb2308f92304fb2305f92305fb2306fd2301fc2303fc2301fe23fd0023fa0423fc0223fa0323fd0323fa0323f80823fc0323fd0423fb0323ff0384000a0000000000000000a000a301000affffffff009300fd8401fc004e004400800074004e007300747fff004f007100737fff0050006f00717fff0051006e006f007300747fff0052006d006e007200737fff0053006a006d7fff00540069006a007100727fff0055006500697fff0056006400657fff0057006300647fff005800600063007000717fff0059006f00707fff005a005f0060006d006f7fff005b005c005f006b006d7fff005c005b005c006a006b7fff005d005a005b0068006a7fff005e0059005a006700687fff005f00570059006600677fff006000560057006500667fff006100550056006400657fff0062005400557fff006300530054006300647fff006400520053006200637fff006500510052006100627fff0066005000517fff0067004f0050006000617fff0068004e004f005f00607fff0069004c004e7fff006a004b004c005e005f7fff006b005d005e7fff006c004a004b005c005d7fff006d0048004a005b005c7fff006e00470048005a005b7fff006f004600470059005a7fff007000450046005800597fff007100440045005700587fff0072005600577fff0073005500567fff0074005400557fff007500450046005300547fff0077005200537fff007800460047005100527fff0079005000517fff007a004f00507fff007b004e004f7fff007d004d004e7fff007e004c004d7fff007f004b004c7fff00800047004b7fff7fff220072004500022301032300012301022300032300012300012300002300012302002300002300002303fe2301ff2301ff2302fd2300002301002302fd2300ff2300002301ff2302fe2301ff2301ff2302fe2303fd2301ff2301ff2302fd2301fe2302fe2302fd2301ff2301ff2303fe2302ff2302ff2302fe2300ff2300ff2301fe2300ff2301ff2301ff2300ff2300002300002300ff23000023ff0023000023fe0123fe0123ff0123fd0223ff0023ff0123fd0123ff0023ff0123fd0223ff0023000123fd0223ff0023ff0123fc0323fe0223fe0223fd0323ff0123ff0123fe0123ff0123000123fe0223ff0023ff0123fe0223ff02a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000109ffffffffffffffff22002d00b50ee12313f4231202230f1423052423fb1723ee1c23f91223f81123f2ff23f8f8a000a301000affffffff009300fd22002d00b502fc2303fa2303f92303fb2303fb2303fc2302fe2302fd2302ff2302ff2306fd2305ff23030023030023010023030123010023030223020123020223010123020223010223020323030523030823020823000423010523010823000623ff0723ff0323000323fe0623fd0623fc0823fe0323fe0323fc0623fd0623fd0623ff0223ff0423fc0923fe0423000123fe0323ff0123ff0123ff0123fe0123ff0023fe0023ff0023fe0023fdff23fcfe23fcfd23fefea000a1070000000022e0c0e0c00000a000a0a100a40002030001000a0000000000000000070001000122003c00bdfe142305172307ee230bf523faeb23f70023fa0984000a0000000000000000a000a301000affffffff009300fd840104003500bc006200d0003500c600c97fff003600c400c600c900cb7fff003700c300c400cb00cc7fff003800c100c300cc00cd7fff003a00c000c100cd00ce7fff003b00bf00c07fff003c00be00bf00ce00cf7fff003d00bd00be7fff004100bc00bd00cf00d07fff004a00cf00d07fff004c00ce00cf7fff004d00cd00ce7fff004f00cc00cd7fff005000cb00cc7fff005100ca00cb7fff005200c900ca7fff005300c800c97fff005500c700c87fff005700bc00bd00c600c77fff005900c500c67fff005b00c400c57fff005c00bd00be7fff005d00c300c47fff005f00be00bf7fff006000c200c37fff006100bf00c000c100c27fff006200c000c17fff7fff22003c00bd000223ff062300042300042300042300032300032301042300012300012301022301032301012301002300002301fe2301ff2300ff2301fe2302fc2302fc2303fc2301ff2301ff2301fe2301ff2301fe2300fe2300ff2300fd23fffd2300ff2300ff23fffe23fffe23fffe23ffff23ffff23feff23000023ff0023000023ff0023fe0123ff0123fe0123000123fe0223ff0123ff02a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122003f00bc03f32311e02312fea000a301000affffffff009300fd22003f00bc01fc2302f92303f92303f92302fc2301fe2303fc2302fe2303fd2304fd2303ff2305fe2304ff230200a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122001200db0c0523061223061f23fc06a000a301000affffffff009300fd22001200db020123020123030223010123030223010123020323010223000123010323010423020723010623010423000223010423000323000323000323000223ff0323000123ff01a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122002000e1021123061423fa1223f613a000a301000affffffff009300fd22002000e1010523010723010723010523010323010323010523000423ff0423ff0323000123ff0223fe0423ff0323fe0423ff0323fe0423fd0523ff02a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122008900c0fdf02302f623f7f423fff1a000a301000affffffff009300fd22008900c000fe23fffc2300fe23fffc2300fe2300fe2300fe2300fd2300002300ff2300fd23fffd23fefd23ffff23000023fffe23fffe23fffd23fffd2300fe23fffc2300fc2300ffa000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122007f00bef70023faf023e7f423e0fd23ef0c23f90923f80c23f707a000a301000affffffff009300fd22007f00befe0023fcff23fdfe23fefd23fffe2300ff23ffff23fefd23ffff23fefe23fefe23fcfe23feff23feff23fdff23fafd23f9fe23f8ff23fcff23fc0023f90023fa0123fa0323fe0123fe0223fd0223fc0323fe0223ff0123ff0223fc0623fe0323ff0223fd0323fd0323fd0323fd02a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220070004618e6230dfca000a301000affffffff009300fd220070004603fd2306f92304fc2306fb2304fd2304fd2305fd2303ff2302ffa000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122000400b6ff1823fe0f23031023000c23f90923f5fd23f9fd23000023f6fea000a301000affffffff009300fd22000400b6000323000523ff0623000423000323000423ff0323000323000023000423000823000423010423010723000323000223000223ff0223fe0323ff0123ff0223fe0123fe0123fe0023feff23fe0023fbfe23feff23fdff23f6fea000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200300071faf82303f82308fd230507a000a301000affffffff009300fd2200300071fffe23fdfc23fffd2300fe2300ff2301ff2301fe2302ff2301ff230100230000230100230200230100230101230000230302230001230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220031006dfcf92300f62308fb23070223070b230c0323030823ff0823f805230902230402a000a301000affffffff009300fd220031006dfffe23fffd23fffd23fffd2300ff2300ff2301fd2301fe2301002301ff2301ff2302ff23010023020023010023010023010123030223010123010223010223020123030323030123010023020123020123010123020223000123010123000223000223000223000123000123000123ff0223fe0223ff0023ff0123ff01230001230101230100230301230401230201a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220031007108032308fb23080023020823f90623fe00a000a301000affffffff009300fd220031007102012304012302002303ff2301ff2302ff2304ff23020023010023020123010123010123000123000123000223ff0223ff0123ff0123ff0123fe0123ff0123000023ff00a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200330085f90223fe052304fe2307fc23fdffa000a301000affffffff009300fd2200330085fe0123fd0123fe0123ff012300002300002300012300022301ff2300002301002303fe2301ff2301002301ff2300ff23ffff230000a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220024007b0407230c0423010823f90523fe01a000a301000affffffff009300fd220024007b010223020223030323030223010023020123020123010123010223000123000123000223ff0223ff0123ff0023fe0223fe0223ff00a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122003e006ffbff2305072306ff2302fa23fbf923f7ff23f90423ff082307092307042309fb2304f82300ffa000a301000affffffff009300fd22003e006fff0023fe002300002300022301012301012301012301012301002301002301002302fe2301fe2300002300fe2300fe2300ff23ffff23ffff23fefe23feff23ffff23ff0023fe0023fc0123fe0123ff0123fe0123000123ff022300012300012300022300022301022301012301012302032301012303022300002301012302002302002302ff2301ff2301002303fe2301ff2302fe2300ff2301ff2300ff2301fe2300ff230000a000a1070000000022e0c0e0c00000a000a0a100a40002030001000a00000000000000000700010001091122448811224488220056007df906230aff230dff230d05230704230904230e0a23050023fcf923f2f923f4f823f0fb23efff84000a0000000000000000a000a301000affffffff009300fd84015400550079007100bc0055007e00867fff00560086008d7fff0057007c007d008d00937fff0058007b007c009300957fff0059007a007b009500997fff005a0079007a0099009c7fff005b00790091009c009e7fff005c00910094009e00a17fff005d0094009600a100a37fff005e0096009900a300a47fff005f0099009b00a400a67fff0060009b009c00a600a77fff0061009c009e00a700a97fff0062009e00a000a900ab7fff006300a000a200ab00ac7fff006400a200a400ac00ae7fff006500a400a600ae00b17fff006600a600a800b100b37fff006700a800aa00b300b57fff006800aa00ab00b500b67fff006900ab00ad00b600b87fff006a00ad00af00b800b97fff006b00af00b100b900ba7fff006c00b100b200ba00bb7fff006d00b200b300bb00bc7fff006e00b300b47fff006f00b400b67fff007000b600b900bb00bc7fff007100b900bb7fff7fff220056007dff0123ff0123ff0123ff012300002300012300002302002300002303002306002303002301002303002304002303012301002302012302012303012303022300002302012304022302012302012302012303022304022301012301012303022302012303012300002301002300002301fe2300ff23ffff23000023fefe23fefe23fdfe23feff23fdff23f9fc23fdfe23fdfe23f9fd23fcff23ff0023feff23fdff23fe0023fcff23fd0023fcff23fc0023fe00a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000109ffffffffffffffff22006a00b9f8fd23f4f723f6fb23f2fc23f40023fe00a000a301000affffffff009300fd22006a00b9fcff23f9fc23fdfd23fdfe23fbfd23fdfe23feff23fafe23fcff23fdff23f9ff23fd0023ff0023fd0023fe0023ff0023ff00a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220055007efa0323fa0923fa05a000a301000affffffff009300fd220055007efe0123fd0223fe0223ff0123ff0223ff0123fe0323ff0123fc0323ff01a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220040007c0400230903230302a000a301000affffffff009300fd220040007c0200230401230201230301230401230101a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122003d006f01032303002301fd23fefd23fdfe23fa0023fd032301052304042303022306fe2303fd2300fd23ffffa000a301000affffffff009300fd22003d006f00002301022300002301012300002301002301ff2300ff2300002301fe23ffff23000023feff23ffff23000023feff23fe0023ff0023fd0123000023ff012300002300012300022300002300022301022301012301012302022300002301012302002302ff2301002302ff2301ff2301ff2301fe2300ff2300002300ff23ffffa000a1070000000022e0c0e0c00000a000a0a100a40002010001000a00000000000000000700010001220036006ffefba000a301000affffffff009300fd220036006ffefba000a1a10096000c01000000020000000000000001000a007e007b008a00ac2c000c00150948656c7665746963610300150d000a2b7c8707436f63686c6561a0009701000affffffff009300fd71001e003800430044004d0044004d003c0043003a0046003800480044004d22003a0046f0ea71001e0022004f0028005b0026005b0028004f0025004f0022004f0026005b220025004fe7fea10096000c02000000020000000000000001000a001c000000280039280025000809496e6e657220656172a0009701000affffffff009300fd070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122005a005cf5ff23f6f923f8fc2302fc230cfb2308fa230902230402a000a301000affffffff009300fd22005a005cfe0023fbff23fcff23fcfe23ffff23feff23fbfd23feff23ff0023ffff23ffff2300ff2300ff2300002301ff2302ff2302ff2302ff2303ff2305fd2302fe2301ff2303ff230100230200230200230201230401230201a000a171001e003f006d004b0075003f006d0048007500490072004b0070003f006d22004900721933070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122003d0061f8fd23f6ff2301fd2304fb23040323080223030223ff0023ff05a000a301000affffffff009300fd23feff23fcff23fdff23fdff23ff0023ff0023fe0023feff2300002300ff2300002302fe2301fe2300002301ff23010023020023000023010123030223020023020123030123010023010123000023ff0123000023ff03230001a000a1070000000022e0c0e0c00000a000a0a100a40002010001000a000000000000000007000100012200350068f9f723fbf72301f52300f92303fa230cfe230bff230efb2305fea000a301000affffffff009300fd2200350068fefd23fdfc23fefd23fffe23fffe23ffff23fffd2300ff2300fd2300fe2300fe2300fb2300fe2300ff2301fc2300ff2301ff2301ff2302ff2303ff2301002303002305ff2303ff2302002302002303ff2304ff2302ff2304ff2306fe2302ffa000a1a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 16-2:  The Inner Ear\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Your brain has a lot more to do with sound than most people think (pun intended).  Sound doesn\rquote t stop at the cochlea, to be replaced by some nerve impulse that says, \ldblquote That\rquote s just Mildred, again.\rdblquote   The neural network of your brain starts filtering the sound right away, ignoring some parts and \ldblquote paying more attention\rdblquote  to others.  That\rquote s why you can \ldblquote hear\rdblquote  someone talking from across the room, when a dozen other people\rquote s voices are at least as loud.  As you turn your attention from one person to the next, you hear the one you are listening to, but the others are just a distraction.\par To see how all of this impacts computerized sound, let\rquote s put the computer in the middle.  This time, the sound hits a microphone.  While there are a lot of different kinds of microphones, the original, and still one of the simplest, uses a cone to catch the sound.  As sound waves hit the cone, the cone vibrates, and this in turn compresses a pack of carbon powder, a crystal, or something else that will change its electrical properties when it\rquote s compressed..  Current running through the carbon, for example, goes through easier when the carbon is compressed (less resistance) and has a harder time when the carbon is not compressed (higher resistance).  The microphone, then, turns the sound into a changing electric current.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1108{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw253\pich183\picwgoal5060\pichgoal3660\macpict\bliptag-440654454\blipupi72{\*\blipuid e5bc258ad827e275cbda37ecdd1457ce}0178ffffffff00b600fc1101a0008201000affffffff00b600fc0980100220010840043100400059007700750900000000000000003809ffffffffffffffff2200400074e500230036231b00220049007436b809000000000000000051000100a600b600b009ffffffffffffffff5822006d0074364822004900740024a10096000c02000000020000000000000001000a004f00000067003d2c000c00150948656c7665746963610300150d000a2b0e58077061636b6564202b010c06636172626f6ea0009701000affffffff00b600fc71001e00580056005e0062005b0062005e0056005b005600580056005b006222005b00352100a10096000c02000000020000000000000001000a004f00be006700fb28005800c20b6d6963726f70686f6e65202b100c04636f6e65a0009701000affffffff00b600fc71001e005800ab005e00b7005b00ab005800b7005b00b7005e00b7005b00ab22005b00c6f100220040006b00ee23dc00220076006b001223dc00a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 16-3:  A Simple Microphone\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are a lot of ways to record the electric impulses created by the microphone.  With a few intervening steps, though, the computer ends up converting the electric impulses into digital data.  Ignoring all of the problems that might distort the sound, ideally the resulting digital data, when plotted, should be a plot of the pressure from the original sound wave.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1109{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw319\pich118\picwgoal6380\pichgoal2360\macpict\bliptag-792232729\blipupi72{\*\blipuid d0c77ce77170dafa225ca8df30da5994}03bbffffffff0075013e1101a0008201000affffffff0075013e070000000022e0c0e0c00000a000a0a100a40002010001000a0000000000000000070001000122004900010de2230bea230cf0230ffc230f0a23091c2309202313112319022312fc2310f9230df1230b0123141d2306fd230cee2312e02313e72308f523150d230b0ba000a301000affffffff0075013e220049000102fc2303f92302fb2303f92302fc2302fb2302fb2301fe2301fe2302fd2303fb2303fb2303fc2301fe2302fe2303fc2303fe2303ff2302ff2302002304ff23030123050223010123010123010123030223010223020323010223010323020423000123030723040f2302082301042303072304062304052302022302022306042305022306022303002303002306002306002304002303ff2305ff2308fd2304fe2302ff2304fe2304fd2303fd2301fe2302fe2303fe2303fe2303ff2301002300002303012302012301012302022302022302032303042301012301012303052302022301012303032301012300002301002301002300002303fe2302fd2303fd2301fe2302fd2303fb2304fa2304f92302fc2302fc2305f82304fa2305f82302fd2303fd2304fa2303fd2303fc2301fe2301ff2301ff230100230100230300230100230201230201230201230302230604230404230605230303a000a1a10096000c01000000020000000000000001000a00640003007400142c000900030647656e6576610300030d000c2b0470023033a00097a10096000c01000000020000000000000001000a0064001e0074002f291b023036a00097a10096000c01000000020000000000000001000a006400390074004a291b023037a00097a10096000c01000000020000000000000001000a0064005400740065291b023033a00097a10096000c01000000020000000000000001000a0064006f00740080291b023032a00097a10096000c01000000020000000000000001000a0064008a0074009b291b023032a00097a10096000c01000000020000000000000001000a006400a5007400b6291b023033a00097a10096000c01000000020000000000000001000a006400c0007400d1291b023034a00097a10096000c01000000020000000000000001000a006400db007400ec291b023032a00097a10096000c01000000020000000000000001000a006400f600740107291b023034a00097a10096000c01000000020000000000000001000a0064011100740122291b023037a00097a10096000c01000000020000000000000001000a0064012c0074013d291b023035a00097a00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 16-4:  Sound Becomes Digital Data\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par What you see in Figure 16-4 is a digital recording of sound.  This is the idea behind Compact Disc (CD) players, and it is also the idea behind the Sound Tool Set.  While there are some details, the Sound Tool Set\rquote s basic function is to take a recorded stream of bytes and convert them back into sound.  Through some very sophisticated electronic wizardry, the bytes of data are used to vibrate the cone of a speaker, which in turn vibrates the air, sending out a pretty good copy of the original sound wave.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 speaker}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As a quick aside, pop the cover off of your computer some time and take a look at the speaker that\rquote s built into the Apple II}{\f4\fs20 GS}{\f4 .  First off, it\rquote s not a particularly good speaker.  Second, no speaker, no matter how good it is, is going to give very good sound sitting underneath a metal power supply box and sending the sound straight onto your table top.  If you want good sound, take a few dollars down to Radio Shack and buy a really cheap external speaker with the proper cables to hook it into your Apple II}{\f4\fs20 GS}{\f4 .  Even with the cheapest speaker, the difference is amazing.  In fact, you\rquote ll get quite an improvement if you just take your speaker out of the computer and lay it on a paper towel or thick pad of paper in front of the computer.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Digitally Recorded Sound}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Digitally Recorded Sound\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk88}{\*\bkmkstart bk89}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The type of sound we talked about in the last section is digitally recorded sound.  Disregarding distortion, it\rquote s an exact copy of the original sound wave, converted to digital data.  Even with sound values stored in a single byte and the rather unsophisticated speaker built into the Apple II}{\f4\fs20 GS}{\f4 , you get some pretty amazing sound.  It\rquote s also easy to play with the sound in this form \endash  making certain parts louder, cutting and pasting sounds, blending one sound into another, playing old Beetles records backwards, and so forth.  The disadvantage of digitally recorded sound is the amount of space it takes.  Think about it this way: the CD ROM format was invented to hold the sound from a single music album, which is generally about 45 minutes long.  A single CD ROM holds about 250M of data.  Even a decked out Apple II}{\f4\fs20 GS}{\f4  rarely has more than 5M of memory, and most hard disks range from 40M to 100M.\par Another way to think about the amount of information is to figure out the number of bytes it takes to hold one second of sound.  It\rquote s important to realize that the more bytes you use for each second of sound, the better the reproduction will be.  After all, more samples let you create a better copy of the original sound wave.  Of course, it also takes more memory to hold all of that sound.\par Let\rquote s assume you want to get about the same sound quality as an AM radio station.  That means you need to record at a rate of 16KHz, or 16,000 samples per second.  That\rquote s about 16K of memory per second of sound.  A little time with a calculator shows you can hold 4 seconds of sound in 64K of memory, or about one minute of sound per megabyte.\par This also tells you a little about the sound quality of a CD!  AM radio station quality is fine for speech, but is a bit on the light side for high quality music.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Sound Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Sound Tool Set\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Ensoniq chip}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Sound Tool Set is designed to give you more or less direct access to the Ensoniq synthesizer chip that is built into the Apple II}{\f4\fs20 GS}{\f4 .  This chip is literally a small music synthesizer, with 64K of its own memory and up to 16 channels of sound.  These sound channels are used in pairs, and one is reserved, but you can still play up to 7 distinct tracks of sound simultaneously.  And, because the sound chip is really a separate sound-specific CPU, playing sound has very little or no impact on the main 65816 CPU.  (For longer sound sequences, there is some impact as the sound data is moved back and forth from main memory.  Some features of the sound tool also use the CPU, as you\rquote ll see.  For a short, digitally recorded sound played over and over, the CPU isn\rquote t effected at all.)\par We\rquote re going to use a few of the Sound Tool Set calls to play a digitally recorded sound.  As you write the sample program, though, keep in mind that there\rquote s a lot more you can do with the Sound Tool Set.  Not only that, but if the Sound Tool Set is getting in your way, it\rquote s even possible to bypass the tools entirely and program the Ensoniq chip directly.  You\rquote ll need to drop into assembly language to do some things, of course.  If you want to program the Ensoniq chip directly, you\rquote ll also need the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Hardware Reference}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Basic Sound Calls}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Basic Sound Calls\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FFStartSound}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The basic tool call for playing a digitally recorded sound in }{\f6\fs20 FFStartSound}{\f4 .  Here\rquote s a typical call:\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 FFStartSound(0x0201, &soundBlock);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par That looks simple enough.  The first parameter controls the channel and synthesizer we\rquote ll be using, as well as identifying what sort of sound we\rquote re playing.  I\rquote ll let you refer to the detailed description of the }{\f6\fs20 FFStartSound}{\f4  call to see how this parameter is used to play multiple sounds, but the 0x0201 value will work find for playing a single sound at a time.  The second parameter is a pointer to a structure, and it\rquote s a pretty complicated one.  Here\rquote s the structure declaration, from the Sound.h file in the ORCA/C header files:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 struct SoundParamBlock \{\par    Pointer waveStart;           /* starting address of wave */\par    Word waveSize;               /* waveform size in pages */\par    Word freqOffset;             /* ? formula to be provided */\par    Word docBuffer;              /* DOC buffer start address, low byte = 0 */\par    Word bufferSize;             /* DOC buffer start address, low byte = 0 */\par                        /* Pointer to start of next wave's parameter block */\par    struct SoundParamBlock *nextWavePtr;\par    Word volSetting;             /* DOC volume setting. High byte = 0 */\par    \};\par typedef struct SoundParamBlock SoundParamBlock, *SoundPBPtr, **SoundPBHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The various fields contain very specific information, and we\rquote ll need to step through them carefully.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\tx2520\adjustright {\f6\fs20 waveStart}{\f4 \tab Pointer to the first byte of the digitally recorded sound wave.  The wave itself consists of a series of bytes.\par \par \tab The sound bytes themselves range from 1 to 255 for each byte.  A zero byte marks the end of the sound wave, so you can stop the sound before the end of a page boundary.\par \par }{\f6\fs20 waveSize}{\f4 \tab Size of the wave buffer, in pages.  For a 32K sound (128 pages) the value is 128.  If you need to calculate this value on the fly, use the equation\par \par }{\f6\fs20 \tab \tab (size_in_bytes + 255) div 256\par }{\f4 \par }{\f6\fs20 freqOffset}{\f4 \tab This value is related to the playing frequency for the sound.  Basically, you have to tell the Sound Manager what the sampling rate for the sound is, in hertz.  (As used here, hertz is samples per second, not the normal cycles per second.)\par \par \tab The relationship isn\rquote t straight-forward, though.  This parameter should be\par \par }{\f6\fs20 \tab \tab round(32.0*hertz/1645.0)\par }{\f4 \par \tab where hertz is the frequency of the sample.\par \par \tab This simplification will work fine for our introduction, but I\rquote m skipping over some details.  You should refer to the complete documentation for the }{\f6\fs20 FFStartSound}{\f4  call before trying anything beyond playing back a prerecorded sound.\par \par }{\f6\fs20 docBuffer}{\f4 \tab The Ensoniq sound chip has 64K of its own memory.  The sound memory isn\rquote t handled by the Memory Manager, so it\rquote s up to you to make sure your sounds don\rquote t step on each other.  This parameter is the location in that 64K of memory where the sound data will be placed.  It should always be a multiple of 256 (0x100), since the sound data is assumed to be in one-page chunks.  For a single sound, you can use 0.\par \par }{\f6\fs20 bufferSize}{\f4 \tab The smallest sound buffer is one page, or 256 bytes.  Each higher size is twice the size of the next smallest buffer.  This parameter represents the sound buffer size; it ranges from 0 to 7:\par \par }\pard \qj\fi-1440\li3960\ri3600\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 parameter\tab sound buffer size\par }\pard \qj\fi-1440\li3960\keepn\widctlpar\adjustright {\f4 0\tab 256\par 1\tab 512\par 2\tab 1024\par 3\tab 2048\par 4\tab 4096\par 5\tab 8192\par 6\tab 16384\par }\pard \qj\fi-1440\li3960\widctlpar\adjustright {\f4 7\tab 32768\par }\pard \qj\fi-1800\li2160\widctlpar\tx2520\adjustright {\f4 \par }{\f6\fs20 nextWavePtr}{\f4 \tab This is a pointer to the next waveform to be played.  By pointing one record to another, you can set up a sequence of sounds that will automatically be played one after the other.  If the value is }{\f6\fs20 NULL}{\f4 , nothing else is played.  To play a single sound over and over, set this pointer to point to the current sound record.\par \par }{\f6\fs20 volSetting}{\f4 \tab This is the volume for the sound.  You can use any value from 0 (no sound) to 255 (the loudest).\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FFSoundDoneStatus}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Besides starting a sound, there are two other basic operations you may need to perform.  The first is checking to see if a sound has finished playing.  You do that by checking a specific sound generator; we\rquote re using generator 2, so the check would look like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 while (!FFSoundDoneStatus(2)) /* do nothing */;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The parameter for }{\f6\fs20 FFSoundDoneStatus}{\f4  is the generator you want to check; the call returns }{\f6\fs20 TRUE}{\f4  if the sound has finished, and }{\f6\fs20 FALSE}{\f4  if it hasn\rquote t.  The example will wait until the sound has finished; that\rquote s something we\rquote ll use in one of the sample programs a little later in the lesson.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The other thing you might want to do is to stop a sound.  That\rquote s particularly useful if you\rquote ve looped a sound back on itself by setting the }{\f6\fs20 nextWAddr}{\f4  parameter of the record to point back to the original record.  That gives you a continuous background sound without taking up any CPU time, so your program runs just as fast as it would without sound.  Before your program finishes, though, it should turn off the sound.  }{\f6\fs20 FFStopSound}{\f4  does the job.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FFStopSound}}}{\v\f4 \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 FFStopSound(0x7FFF);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 With the parameter set to 0x7FFF, as it is in the example, }{\f6\fs20 FFStopSound}{\f4  turns off all sound, not just the sound for generator 2.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The only other thing to keep in mind is that you\rquote re using a new tool, so you need to add it to your tool start up table.  The Sound Tool Set is tool 8.  For System 6.0, you should use a version number of 3.3, coding $0303 in your }{\f6\fs20 rToolStartup}{\f4  resource.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Creating and Playing a Sound}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Creating and Playing a Sound\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 For our first sound example, we\rquote ll create a sound from scratch.  A \ldblquote pure\rdblquote  sound, created by a perfect oscillator, would just be a sine wave.  Middle C is 256 hertz.  (For those of you who are about as musically knowledgeable as I am, Middle C is a musical note.)  We can create a digitized sound that will play a pure middle C by creating a single sine wave as a series of bytes, then playing the sound over and over by pointing the sound packed back on itself.  Rather than creating a full desktop program to do something this simple, we\rquote ll just use a simple text program that plays the sound until a key is pressed.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * Sine Wave Generator\par *\par ***************************************************************/\par \par #pragma lint -1\par \par #include <stdio.h>\par #include <math.h>\par #include <orca.h>\par #include <Sound.h>\par #include <Resources.h>\par #include <Memory.h>\par #include <Locator.h>\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #include <MiscTool.h>\par \par #define twoPi 6.28318531                /* 2*pi */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 int main (void)\par \par \{\par unsigned i;                             /* loop/index variable */\par SoundParamBlock soundBlock;             /* sound parameter block */\par unsigned char sound[256];               /* sound block */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 Ref startStopParm;                      /* tool start/shutdown parameter */\par \par startStopParm =                         /* start up the tools */\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    StartUpTools(userid(), 2, 1);\par if (toolerror() != 0)\par }\pard \fi180\widctlpar\adjustright {\f6\fs20    SysFailMgr(toolerror(), "\\pCould not start tools: ");\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 printf("Setting up the sound...\\n");    /* put a sine wave in the buffer */\par for (i = 0; i < 256; ++i) \par }\pard \fi180\widctlpar\adjustright {\f6\fs20    sound[i] = sin(i/256.0*twoPi)*120.0 + 128.0;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 soundBlock.waveStart = sound;         /* set up the sound parameter block */\par soundBlock.waveSize = 1;\par soundBlock.freqOffset = 32.0 * 65536.0 / 1645.0;\par soundBlock.docBuffer = 0;\par soundBlock.bufferSize = 0;\par soundBlock.nextWavePtr = &soundBlock;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 soundBlock.volSetting = 250;\par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 printf("Playing the sound...\\n");       /* start the sound */\par FFStartSound(0x0201, (Pointer) &soundBlock);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 printf("Press return to stop the sound.\\n");\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 while (getchar() != '\\n') ;             /* wait for a return key */\par FFStopSound(0x7FFF);                    /* stop the sound */\par ShutDownTools(1, startStopParm);        /* shut down the tools */\par \}\par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 16-1A:  A Program to Play Pure Middle C\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /*--------------------------------------------------------------*/\par /*                                                              */\par /*  Resources for Sine Wave                                     */\par /*                                                              */\par /*--------------------------------------------------------------*/\par \par #include "types.rez"\par \par resource rToolStartup(1) \{\par    mode640,\par    \{\par        3, $0302,                        /* Misc Tool */\par        8, $0303,                        /* Sound Tools */\par       \}\par    \};\par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 16-1B:  Resource Description File for the Sound Program\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 16-1:  Games often use a ray-gun blast as a sound effect.  One way to create a simple sound that will do is to create a series of sine waves that gradually diminish in volume, then repeat the sound several times.\par Create a program that makes a sound like this, repeating the sound ten times.  After the sound stops, the program should quit.  The entire sound cycle should last for one second, and should be based on a 4096 hertz sine wave.  Each 1/10 second sound burst should start at full volume and decrease evenly to zero volume.\par \par }\pard \qj\fi-2160\li2160\ri360\widctlpar\tx440\adjustright {{\pict{\*\picprop\shplid1110{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley86\piccropl0\piccropr0\piccropt-19\piccropb-19\picw15\pich12\picwgoal300\pichgoal240\macpict\bliptag-1801394586\blipupi72{\*\blipuid 94a0e666f0b409cfbf5fc6b8a42dc802}419900000000000c000f11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a00000000000c000f3c90000200000000000c000f00000000000c000f00000000000c000f00030000008005c007e00fe01ff01ff03ff83ffc7fe07fe0000090000200000000000c000f00000000000c000f00000000000c000f00010000008005c007600f201e301e103c183ffc7fe07fe0000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a00000000000c000f3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3236342034303320323739203431350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3236342034313520323739203430335d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000123236352e323738203430342e363834206d0da100c000113236392e373835203431322e3133204c0da100c000123237342e323931203430342e363834204c0da100c000123236352e323738203430342e363834204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c000123236382e343337203430362e313837206d0da100c000113237322e3735203431332e333132204c0da100c000123237372e303632203430362e313837204c0da100c000123236382e343337203430362e313837204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \tab }{\b\f4 Hint}{\f4 \tab Create ten separate sound records, each pointing to the same 1/10 second sound buffer.\~\~}{{\pict{\*\picprop\shplid1111{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0\picw10\pich8\picwgoal200\pichgoal160\macpict\bliptag101738056\blipupi72{\*\blipuid 061066488a53a5f184dcaf6c03ed13ea}418f000000000008000a11010a000000000000000034ffffffff00000000a000bea000c22900010da100c000122f2c2031323820737472696e67206465660da100c000357b63757272656e7466696c65202c2072656164737472696e67207b282c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c29207365617263680da100c0004b7b706f7020706f7020706f70207b63757272656e7466696c652072656164207b3436206571207b657869747d2069667d207b657869747d206966656c73657d206c6f6f7020657869747d0da100c0002b7b706f707d206966656c73657d207b706f7020657869747d206966656c73657d2062696e64206c6f6f700da000bf01000a000000000008000a3c900002000000000008000a000000000008000a000000000008000a0003000006001e001f003f003f807e000000900002000000000008000a000000000008000a000000000008000a0001000006001e001f0039003f807e00000001000a00000000000000003ca000bea000c22900010da100c000922c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2c2e0da000bf01000a000000000008000a3ca000bea000c22900010da100c0002e2525426567696e446f63756d656e743a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c00018252150532d41646f62652d322e3020455053462d312e320da100c00028252543726561746f723a2041646f626520496c6c7573747261746f7220383828544d2920312e360da100c0001b2525466f723a202853616e6465652920284d616e75616c2033290da100c0002425254372656174696f6e446174653a2028342f31322f3839292028383a343720504d290da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f7061636b65646172726179203020300da100c000282525446f63756d656e7450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000302525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f636d796b636f6c6f72203020300da100c000242525446f63756d656e7450726f63536574733a2041646f62655f6373686f77203020300da100c0002c2525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f6373686f77203020300da100c0002a2525446f63756d656e7450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c000322525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f637573746f6d636f6c6f72203020300da100c0002e2525446f63756d656e7450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c000362525446f63756d656e74537570706c69656450726f63536574733a2041646f62655f496c6c7573747261746f725f383831203020300da100c0001a2525436f6c6f7255736167653a20426c61636b2657686974650da100c0001f2525446f63756d656e7450726f63657373436f6c6f72733a20426c61636b0da100c0001e2525426f756e64696e67426f783a3237302033353720323830203336350da100c0001e252554656d706c617465426f783a3238382033363020323838203336300da100c0001a252554696c65426f783a2d35353220373330203020313436300da100c0000e2525456e64436f6d6d656e74730da100c0000f2f73686f77706167657b7d6465660da100c0000f2f636f7079706167657b7d6465660da100c000125b3237302033363520323830203335375d0da100c0001c5b6e65777061746820636c697070617468207061746862626f785d0da100c0000d32206469637420626567696e0da100c0000c2f642065786368206465660da100c0000c2f732065786368206465660da100c0001a642030206765742064203120676574207472616e736c6174650da100c0002c642032206765742064203020676574207375622073203220676574207320302067657420737562206469760da100c0002c642033206765742064203120676574207375622073203320676574207320312067657420737562206469760da100c000067363616c650da100c0002273203020676574206e65672073203120676574206e6567207472616e736c6174650da100c00004656e640da100c000262525426567696e50726f635365743a2041646f62655f7061636b65646172726179203020300da100c0001825207061636b65646172726179204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c000317573657264696374202f41646f62655f7061636b65646172726179203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000132f7061636b656461727261792077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f7061636b6564617272617920626567696e0da100c000130941646f62655f7061636b656461727261790da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000322f7061636b6564617272617909092520617267756d656e747320636f756e74207061636b656461727261792061727261790da100c000027b0da100c000166172726179206173746f726520726561646f6e6c790da100c000067d206465660da100c000252f7365747061636b696e670909092520626f6f6c65616e207365747061636b696e67202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c000282f63757272656e747061636b696e67090925202d207365747061636b696e6720626f6f6c65616e0da100c000027b0da100c0000666616c73650da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000d2525456e6450726f635365740da100c0002741646f62655f7061636b65646172726179202f696e697469616c697a652067657420657865630da100c000232525426567696e50726f635365743a41646f62655f636d796b636f6c6f72203020300da100c000162520636d796b636f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002f7573657264696374202f41646f62655f636d796b636f6c6f72203420646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000142f736574636d796b636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00035097573657264696374202f41646f62655f636d796b636f6c6f725f76617273203220646963742064757020626567696e207075740da100c0000f092f5f736574726762636f6c6f720da100c0001809092f736574726762636f6c6f72206c6f6164206465660da100c00013092f5f63757272656e74726762636f6c6f720da100c0001c09092f63757272656e74726762636f6c6f72206c6f6164206465660da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c000110941646f62655f636d796b636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c000170941646f62655f636d796b636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0001f63757272656e74646963742041646f62655f636d796b636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c0003a2f736574636d796b636f6c6f72090925206379616e206d6167656e74612079656c6c6f7720626c61636b20736574636d796b636f6c6f72202d0da100c000027b0da100c0000f31207375622034203120726f6c6c0da100c00002330da100c00003097b0da100c0001a093320696e64657820616464206e6567206475702030206c740da100c0000409097b0da100c000080909706f7020300da100c0000709097d2069660da100c0000a0933203120726f6c6c0da100c0000a097d207265706561740da100c0002c41646f62655f636d796b636f6c6f725f76617273202f5f736574726762636f6c6f722067657420657865630da100c00004706f700da100c000077d20646566200da100c000412f63757272656e74636d796b636f6c6f720925202d2063757272656e74636d796b636f6c6f72206379616e206d6167656e74612079656c6c6f7720626c61636b0da100c000027b0da100c0003041646f62655f636d796b636f6c6f725f76617273202f5f63757272656e74726762636f6c6f722067657420657865630da100c00002330da100c00003097b0da100c00014093120737562206e65672033203120726f6c6c0da100c0000a097d207265706561740da100c00002300da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000202525426567696e50726f635365743a2041646f62655f6373686f77203020300da100c0001125206373686f77204f70657261746f720da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c0002b7573657264696374202f41646f62655f6373686f77203320646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c0000d2f6373686f772077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c00031097573657264696374202f41646f62655f6373686f775f76617273203120646963742064757020626567696e207075740da100c0001a092f5f6373686f77090925202d205f6373686f772070726f630da100c0000909097b7d206465660da100c000130941646f62655f6373686f7720626567696e0da100c0000d0941646f62655f6373686f770da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c00018090975736572646963742033203120726f6c6c207075740da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c0000509656e640da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c000067d206465660da100c000202f6373686f77090909092520737472696e672070726f63206373686f77202d0da100c000027b0da100c0001141646f62655f6373686f775f766172730da100c0000e0965786368202f5f6373686f770da100c0000a0965786368207075740da100c00003097b0da100c00027093020302041646f62655f6373686f775f76617273202f5f6373686f772067657420657865630da100c0000a097d20666f72616c6c0da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000262525426567696e50726f635365743a2041646f62655f637573746f6d636f6c6f72203020300da100c000192520437573746f6d20436f6c6f72204f70657261746f72730da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000317573657264696374202f41646f62655f637573746f6d636f6c6f72203520646963742064757020626567696e207075740da100c0001f2f696e697469616c697a6509090925202d20696e697469616c697a65202d0da100c000027b0da100c000162f736574637573746f6d636f6c6f722077686572650da100c00003097b0da100c0000509706f700da100c00003097d0da100c00003097b0da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c000130941646f62655f637573746f6d636f6c6f720da100c0000409097b0da100c0000d09096475702078636865636b0da100c000050909097b0da100c0000809090962696e640da100c000080909097d2069660da100c0000a0909706f7020706f700da100c0000b09097d20666f72616c6c0da100c0000509656e640da100c000190941646f62655f637573746f6d636f6c6f7220626567696e0da100c0000a097d206966656c73650da100c000067d206465660da100c0001d2f7465726d696e61746509090925202d207465726d696e617465202d0da100c000027b0da100c0002163757272656e74646963742041646f62655f637573746f6d636f6c6f722065710da100c00003097b0da100c0000509656e640da100c00006097d2069660da100c000067d206465660da100c000512f66696e64636d796b637573746f6d636f6c6f720925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d652066696e64636d796b637573746f6d636f6c6f72206f626a6563740da100c000027b0da100c0000e35207061636b656461727261790da100c000077d20206465660da100c000302f736574637573746f6d636f6c6f72090925206f626a6563742074696e7420736574637573746f6d636f6c6f72202d0da100c000027b0da100c00005657863680da100c0000e616c6f616420706f7020706f700da100c00002340da100c00003097b0da100c00016093420696e646578206d756c2034203120726f6c6c0da100c0000a097d207265706561740da100c0000e35202d3120726f6c6c20706f700da100c0000d736574636d796b636f6c6f720da100c000067d206465660da100c000282f7365746f7665727072696e7409092520626f6f6c65616e207365746f7665727072696e74202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c000292525426567696e50726f635365743a2041646f62655f496c6c7573747261746f72383831203020300da100c00020252041646f626520496c6c7573747261746f722028544d292050726f6c6f670da100c00017252056657273696f6e20312e3020352f392f313938380da100c0001b2520436f707972696768742028432920313938372c20313938380da100c0001d252041646f62652053797374656d7320496e636f72706f72617465640da100c000162520416c6c205269676874732052657365727665640da100c0001f63757272656e747061636b696e672074727565207365747061636b696e670da100c000357573657264696374202f41646f62655f496c6c7573747261746f7238383120373220646963742064757020626567696e207075740da100c000112520696e697469616c697a6174696f6e0da100c000202f696e697469616c697a650909090925202d20696e697469616c697a65202d0da100c000027b0da100c0003a7573657264696374202f41646f62655f496c6c7573747261746f723838315f7661727320323920646963742064757020626567696e207075740da100c0001125207061696e74206f706572616e64730da100c0000f2f5f6c70202f6e6f6e65206465660da100c0000c2f5f7066207b7d206465660da100c0000c2f5f7073207b7d206465660da100c0000d2f5f707366207b7d206465660da100c0000d2f5f707373207b7d206465660da100c00010252074657874206f706572616e64730da100c0000d2f5f61206e756c6c206465660da100c0000e2f5f6173206e756c6c206465660da100c000112f5f74742032206172726179206465660da100c000112f5f746c2032206172726179206465660da100c000102f5f746d206d6174726978206465660da100c0000a2f74207b7d206465660da100c000112520636f6c6f72206f706572616e64730da100c0000e2f5f6766206e756c6c206465660da100c000112f5f63662034206172726179206465660da100c0000e2f5f6966206e756c6c206465660da100c0000f2f5f6f662066616c7365206465660da100c0000c2f5f6663207b7d206465660da100c0000e2f5f6773206e756c6c206465660da100c000112f5f63732034206172726179206465660da100c0000e2f5f6973206e756c6c206465660da100c0000f2f5f6f732066616c7365206465660da100c0000c2f5f7363207b7d206465660da100c0000d2f5f69206e756c6c206465660da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0001541646f62655f496c6c7573747261746f723838310da100c00003097b0da100c0000c096475702078636865636b0da100c0000409097b0da100c00007090962696e640da100c0000709097d2069660da100c0000909706f7020706f700da100c0000a097d20666f72616c6c0da100c00004656e640da100c00004656e640da100c0001b41646f62655f496c6c7573747261746f7238383120626567696e0da100c0002041646f62655f496c6c7573747261746f723838315f7661727320626567696e0da100c000086e6577706174680da100c000067d206465660da100c0001e2f7465726d696e6174650909090925202d207465726d696e617465202d0da100c000027b0da100c00004656e640da100c00004656e640da100c000067d206465660da100c000172520646566696e6974696f6e206f70657261746f72730da100c000122f5f090909090925202d205f206e756c6c0da100c000096e756c6c206465660da100c0001c2f646465660909090925206b65792076616c75652064646566202d0da100c000027b0da100c0002741646f62655f496c6c7573747261746f723838315f766172732033203120726f6c6c207075740da100c000067d206465660da100c000242f787075740909090925206b65792076616c7565206c69746572616c2078707574202d0da100c000027b0da100c00026647570206c6f616420647570206c656e6774682065786368206d61786c656e6774682065710da100c00003097b0da100c000120964757020647570206c6f6164206475700da100c0001c096c656e6774682032206d756c206469637420636f7079206465660da100c00006097d2069660da100c000136c6f616420626567696e2064656620656e640da100c000067d206465660da100c0001a2f6e706f70090909092520696e7465676572206e706f70202d0da100c000027b0da100c00003097b0da100c0000509706f700da100c0000a097d207265706561740da100c000067d206465660da100c0001425206d61726b696e67206f70657261746f72730da100c000252f7377090909090925206178206179206c656e67746820737472696e67207377207820790da100c000027b0da100c0000c737472696e6777696474680da100c00025657863682035202d3120726f6c6c203320696e646578203120737562206d756c206164640da100c0002034203120726f6c6c2033203120726f6c6c203120737562206d756c206164640da100c000067d206465660da100c0002a2f7373090909090925206178206179206c656e67746820737472696e67206d6174726978207373202d0da100c000027b0da100c0000e33202d3120726f6c6c20706f700da100c0000934203120726f6c6c0da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000070967736176650da100c000100966616c73652063686172706174680da100c0000e0963757272656e74706f696e740da100c00013093420696e646578207365746d61747269780da100c00008097374726f6b650da100c0000a0967726573746f72650da100c00008096d6f7665746f0da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000733206e706f700da100c000067d206465660da100c00011252070617468206f70657261746f72730da100c000232f7370090909090925206178206179206c656e67746820737472696e67207370202d0da100c000027b0da100c000096578636820706f700da100c00003097b0da100c000110932206e706f702028302920657863680da100c00017093220636f7079203020657863682070757420706f700da100c000100966616c73652063686172706174680da100c00010093220636f707920726d6f7665746f0da100c00009097d206373686f770da100c0000732206e706f700da100c000067d206465660da100c0001e25207061746820636f6e737472756374696f6e206f70657261746f72730da100c000152f706c0909090909252078207920706c207820790da100c000027b0da100c0000a7472616e73666f726d0da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0001d302e32352073756220726f756e6420302e32352061646420657863680da100c0000b697472616e73666f726d0da100c000067d206465660da100c000172f7365747374726f6b6561646a7573742077686572650da100c000027b0da100c00019706f702074727565207365747374726f6b6561646a7573740da100c0001e2f6309090909252078312079312078322079322078332079332063202d0da100c000027b0da100c000086375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000182f7609090909252078322079322078332079332076202d0da100c000027b0da100c0001e63757272656e74706f696e742036203220726f6c6c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000182f7909090909252078312079312078322079322079202d0da100c000027b0da100c0000f3220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000102f6c090909092520782079206c202d0da100c000027b0da100c000076c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000102f6d090909092520782079206d202d0da100c000027b0da100c000076d6f7665746f0da100c000067d206465660da100c000027d0da100c000027b0da100c000032f630da100c000027b0da100c0000b706c206375727665746f0da100c000067d206465660da100c000032f430da100c0000c2f63206c6f6164206465660da100c000032f760da100c000027b0da100c0002163757272656e74706f696e742036203220726f6c6c20706c206375727665746f0da100c000067d206465660da100c000032f560da100c0000c2f76206c6f6164206465660da100c000032f790da100c000027b0da100c00012706c203220636f7079206375727665746f0da100c000067d206465660da100c000032f590da100c0000c2f79206c6f6164206465660da100c000032f6c0da100c000027b0da100c0000a706c206c696e65746f0da100c000067d206465660da100c000032f4c0da100c0000c2f6c206c6f6164206465660da100c000032f6d0da100c000027b0da100c0000a706c206d6f7665746f0da100c000067d206465660da100c000097d206966656c73650da100c0001a252067726170686963207374617465206f70657261746f72730da100c000192f640909090909252061727261792070686173652064202d0da100c000027b0da100c00008736574646173680da100c000067d206465660da100c000182f6366090909090925202d20636620666c61746e6573730da100c0001063757272656e74666c6174206465660da100c000162f6909090909092520666c61746e6573732069202d0da100c000027b0da100c0000964757020302065710da100c00003097b0da100c0000809706f702063660da100c00006097d2069660da100c00008736574666c61740da100c000067d206465660da100c000162f6a090909090925206c696e656a6f696e206a202d0da100c000027b0da100c0000c7365746c696e656a6f696e0da100c000067d206465660da100c000152f4a090909090925206c696e65636170204a202d0da100c000027b0da100c0000b7365746c696e656361700da100c000067d206465660da100c000182f4d090909090925206d697465726c696d6974204d202d0da100c000027b0da100c0000e7365746d697465726c696d69740da100c000067d206465660da100c000172f77090909090925206c696e6577696474682077202d0da100c000027b0da100c0000d7365746c696e6577696474680da100c000067d206465660da100c0001a252070617468207061696e74696e67206f70657261746f72730da100c0000f2f48090909090925202d2048202d0da100c000077b7d206465660da100c0000f2f68090909090925202d2068202d0da100c000027b0da100c0000a636c6f7365706174680da100c000067d206465660da100c0000f2f4e090909090925202d204e202d0da100c000027b0da100c000086e6577706174680da100c000067d206465660da100c0000f2f6e090909090925202d206e202d0da100c0000c2f4e206c6f6164206465660da100c0000f2f46090909090925202d2046202d0da100c000027b0da100c000045f70660da100c000067d206465660da100c0000f2f66090909090925202d2066202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002460da100c000067d206465660da100c0000f2f53090909090925202d2053202d0da100c000027b0da100c000045f70730da100c000067d206465660da100c0000f2f73090909090925202d2073202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002530da100c000067d206465660da100c0000f2f42090909090925202d2042202d0da100c000027b0da100c00011677361766520462067726573746f72650da100c00002530da100c000067d206465660da100c0000f2f62090909090925202d2062202d0da100c000027b0da100c0000a636c6f7365706174680da100c00002420da100c000067d206465660da100c0000f2f57090909090925202d2057202d0da100c000027b0da100c00005636c69700da100c000067d206465660da100c0001a252074657874207061696e74696e67206f70657261746f72730da100c0002f2f7461090909090925206c656e67746820737472696e67207461206178206179206c656e67746820737472696e670da100c000027b0da100c0000b5f6173206d6f7665746f0da100c000185f747420616c6f616420706f702034202d3220726f6c6c0da100c000067d206465660da100c000112f746c090909090925202d20746c202d0da100c000027b0da100c000185f746c20616c6f616420706f70207472616e736c6174650da100c000067d206465660da100c000152f6173090909090925202d2061732061727261790da100c000027b0da100c000027b0da100c000043020300da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001e65786368206e65672032206469762065786368206e65672032206469760da100c000027d0da100c000027b0da100c000223220636f7079205f747420616c6f616420706f702034202d3220726f6c6c2073770da100c0001265786368206e65672065786368206e65670da100c000027d0da100c000027b0da100c000043020300da100c000027d0da100c0000c7d2063766c6974206465660da100c000312f7a090909090925206c69746572616c2073697a65206c656164696e6720747261636b696e6720616c69676e207a202d0da100c000027b0da100c0000e2f5f61206578636820646465660da100c000142f5f6173206173205f612067657420646465660da100c000085f612032206c650da100c00003097b0da100c000120930205f7474206173746f726520706f700da100c0001b09302065786368206e6567205f746c206173746f726520706f700da100c00003097d0da100c00003097b0da100c0001b09302065786368206e6567205f7474206173746f726520706f700da100c00016096e65672030205f746c206173746f726520706f700da100c0000a097d206966656c73650da100c00025657863682066696e64666f6e742065786368207363616c65666f6e7420736574666f6e740da100c000067d206465660da100c000162f746d090909090925206d617472697820746d202d0da100c000027b0da100c000165f746d2063757272656e746d617472697820706f700da100c00007636f6e6361740da100c000067d206465660da100c000142f49090909090925206d61747269782049202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c000070974612073700da100c0000409746c0da100c00008097d20646465660da100c000067d206465660da100c000142f6f090909090925206d6174726978206f202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000b0974612034206e706f700da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f65090909090925206d61747269782065202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00009097461205f7073660da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f72090909090925206d61747269782072202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c000142f61090909090925206d61747269782061202d0da100c000027b0da100c00003746d0da100c000032f740da100c00003097b0da100c00008093220636f70790da100c00009097461205f7073660da100c00009096e6577706174680da100c0000d097461205f746d205f7073730da100c0000409746c0da100c00009096e6577706174680da100c00008097d20646465660da100c000067d206465660da100c0000f2f54090909090925202d2054202d0da100c000027b0da100c0000e5f746d207365746d61747269780da100c000067d206465660da100c000112520666f6e74206f70657261746f72730da100c0002d2f5a090909090925206172726179206c69746572616c206c69746572616c20646972656374696f6e205a202d0da100c000027b0da100c00004706f700da100c0000f66696e64666f6e7420626567696e0da100c0002863757272656e746469637420647570206c656e677468203120616464206469637420626567696e0da100c00003097b0da100c00011093120696e646578202f464944206e650da100c0000409097b0da100c0000609096465660da100c0000409097d0da100c0000409097b0da100c00009090932206e706f700da100c0000b09097d206966656c73650da100c0000a097d20666f72616c6c0da100c000232f466f6e744e616d6520657863682064656620647570206c656e6774682030206e650da100c00003097b0da100c00027092f456e636f64696e6720456e636f64696e672032353620617272617920636f7079206465660da100c00008093020657863680da100c0000409097b0da100c0001809096475702074797065202f6e616d65747970652065710da100c000050909097b0da100c00024090909456e636f64696e67203220696e646578203220696e6465782070757420706f700da100c0000909090931206164640da100c000050909097d0da100c000050909097b0da100c0000c0909096578636820706f700da100c0000c0909097d206966656c73650da100c0000b09097d20666f72616c6c0da100c0000a097d20696620706f700da100c0001863757272656e74646963742064757020656e6420656e640da100c000222f466f6e744e616d6520676574206578636820646566696e65666f6e7420706f700da100c000067d206465660da100c00012252067726f7570206f70657261746f72730da100c0000f2f75090909090925202d2075202d0da100c000077b7d206465660da100c0000f2f55090909090925202d2055202d0da100c000077b7d206465660da100c0000f2f71090909090925202d2071202d0da100c000027b0da100c0000667736176650da100c000067d206465660da100c0000f2f51090909090925202d2051202d0da100c000027b0da100c0000967726573746f72650da100c000067d206465660da100c000122520706c616365206f70657261746f72730da100c0002b2f60090909090925206d6174726978206c6c78206c6c79207572782075727920737472696e672060202d0da100c000027b0da100c0000e2f5f69207361766520646465660da100c0001036203120726f6c6c2034206e706f700da100c00007636f6e6361740da100c0000f757365726469637420626567696e0da100c000112f73686f7770616765207b7d206465660da100c0001366616c7365207365746f7665727072696e740da100c00004706f700da100c000067d206465660da100c0000f2f7e090909090925202d207e202d0da100c000027b0da100c00004656e640da100c0000b5f6920726573746f72650da100c000067d206465660da100c000122520636f6c6f72206f70657261746f72730da100c000122f4f09090909092520666c6167204f202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f66206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f5209090909092520666c61672052202d0da100c000027b0da100c0000530206e650da100c0000f2f5f6f73206578636820646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f6709090909092520677261792067202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0000d095f676620736574677261790da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000122f4709090909092520677261792047202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0000d095f677320736574677261790da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f6b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206b202d0da100c000027b0da100c0000f5f6366206173746f726520706f700da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c0001c095f636620616c6f616420706f7020736574636d796b636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000272f4b090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b204b202d0da100c000027b0da100c0000f5f6373206173746f726520706f700da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c0001c095f637320616c6f616420706f7020736574636d796b636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f78090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792078202d0da100c000027b0da100c0000f2f5f6766206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6966206578636820646465660da100c000052f5f66630da100c000027b0da100c0000d5f6c70202f66696c6c206e650da100c00003097b0da100c00012095f6f66207365746f7665727072696e740da100c00023095f6966205f6766203120657863682073756220736574637573746f6d636f6c6f720da100c00011092f5f6c70202f66696c6c20646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70660da100c000027b0da100c000045f66630da100c0000566696c6c0da100c000077d20646465660da100c000062f5f7073660da100c000027b0da100c000045f66630da100c000096578636820706f700da100c000066173686f770da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c000312f58090909090925206379616e206d6167656e74612079656c6c6f7720626c61636b206e616d6520677261792058202d0da100c000027b0da100c0000f2f5f6773206578636820646465660da100c0001466696e64636d796b637573746f6d636f6c6f720da100c0000f2f5f6973206578636820646465660da100c000052f5f73630da100c000027b0da100c0000f5f6c70202f7374726f6b65206e650da100c00003097b0da100c00012095f6f73207365746f7665727072696e740da100c00023095f6973205f6773203120657863682073756220736574637573746f6d636f6c6f720da100c00013092f5f6c70202f7374726f6b6520646465660da100c00006097d2069660da100c000077d20646465660da100c000052f5f70730da100c000027b0da100c000045f73630da100c000077374726f6b650da100c000077d20646465660da100c000062f5f7073730da100c000027b0da100c000045f73630da100c0000373730da100c000077d20646465660da100c000102f5f6c70202f6e6f6e6520646465660da100c000067d206465660da100c0001a25206c6f636b6564206f626a656374206f70657261746f72730da100c000132f410909090909252076616c75652041202d0da100c000027b0da100c00004706f700da100c000067d206465660da100c0001d63757272656e746469637420726561646f6e6c7920706f7020656e640da100c0000b7365747061636b696e670da100c0000d2525456e6450726f635365740da100c0000c2525456e6450726f6c6f670da100c0000d2525426567696e53657475700da100c000010da100c0002541646f62655f636d796b636f6c6f72202f696e697469616c697a652067657420657865630da100c0002141646f62655f6373686f77202f696e697469616c697a652067657420657865630da100c0002741646f62655f637573746f6d636f6c6f72202f696e697469616c697a652067657420657865630da100c0002a41646f62655f496c6c7573747261746f72383831202f696e697469616c697a652067657420657865630da100c0000b2525456e6453657475700da100c0000430204f0da100c000043020670da100c000043020520da100c000043020470da100c00003302069a100c0000120a100c0000330204aa100c0000120a100c0000330206aa100c0000120a100c00005302e352077a100c0000120a100c0000334204da100c00002205ba100c000045d302064a100c000010da100c0000825254e6f74653a0da100c000143237312e37323331203335382e34303436206d0da100c000143237342e32353833203336322e35393239204c0da100c000143237362e37393239203335382e34303436204c0da100c000143237312e37323331203335382e34303436204c0da100c00002660da100c000043120670da100c00005302e312077a100c000010da100c0000f3237332e35203335392e3235206d0da100c000143237352e39323631203336332e32353738204c0da100c000123237382e33353136203335392e3235204c0da100c0000f3237332e35203335392e3235204c0da100c00002620da100c0000a2525547261696c65720da100c0002941646f62655f496c6c7573747261746f72383831202f7465726d696e6174652067657420657865630da100c0002641646f62655f637573746f6d636f6c6f72202f7465726d696e6174652067657420657865630da100c0002041646f62655f6373686f77202f7465726d696e6174652067657420657865630da100c0002441646f62655f636d796b636f6c6f72202f7465726d696e6174652067657420657865630da100c000010da100c0000e2525456e64446f63756d656e740da100c000010da000bfff}}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Loading Sounds from Disk}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Loading Sounds from Disk\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In most cases, you won\rquote t create a sound from scratch.  Instead, you\rquote ll load a prerecorded sound from disk, and play the recording.  There are a lot of formats used for sound, mostly depending on how the sound was created.  Apple\rquote s file type notes (see Appendix C) list several formats, and the documentation for various sound cards list even more.\par You\rquote ll find a file called Hello.Sound on the disk that comes with this course.  It\rquote s a recording of Fred greeting a guest.  The sound was recorded on an Applied Engineering Sonic Blaster card using a microphone from Radio Shack.  The software that comes with the Sonic Blaster records the sound as a header file followed by the actual sound bytes.  Here\rquote s the format for the header:\par \par }\pard \qj\fi-1080\li1440\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 bytes\tab information\par }\pard \qj\fi-1080\li1440\ri360\widctlpar\adjustright {\f4 0-3\tab The characters \ldblquote AEPM\rdblquote , as an identifier.  The actual values are 0x41 0x45 0x50 0x4D.  You can skip over these bytes.\par 4-5\tab This is the kind of sound information.  The Hello.Sound file has a value of 0, which means that the sound data is just a sequence of bytes.  A value of 1 is used for sound that has been compressed to half its original size by the ACE Tool Set, while 2 means the sound has been compressed to 5/8 of its original size using ACE.\par 6-7\tab This word will be 0 for mono, and 1 for stereo.  It\rquote s zero in the Hello.Sound file.\par 8-11\tab This is the length of the sound sample, in bytes.\par 12-13\tab This is the sampling frequency, in hertz.  You need to set the }{\f6\fs20 freqOffset}{\f4  field of the sound record based on this value.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are two differences between playing a prerecorded sound as opposed to playing a synthesized sound, like we did in the last section.  First, the sound bytes are read from disk rather than being created by an equation.  Reading the file should not be a big problem.  C\rquote s standard file library will handle reading the file just fine.\par The second difference is that you don\rquote t really know what frequency the sound was recorded at, so you need to read the frequency from the sound header and calculate a value for the }{\f6\fs20 freqOffset}{\f4  field of the sound record.\par \par Problem 16-2:  Write a program that loads the Hello.Sound file, plays the sound once, and exits.  You can find the file in the Lesson.16 folder on the course disks.  Be sure to wait until the sound finishes playing before exiting!\par {\*\bkmkend bk88}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 sound\:digitized}{\rxe bk88}}}{\*\bkmkend bk89}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 digitized sound}{\rxe bk89}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Note Synthesizer}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Note Synthesizer\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk90}{\*\bkmkstart bk91}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Recorded sound has its place, but when it comes to musical instruments, you expect something a little more flexible.  If you want to play middle C with an oboe, it doesn\rquote t make much sense to load a prerecorded sound!  That\rquote s when the Note Synthesizer tool comes in.  With this tool, you can actually say (in effect) that you want to play middle C on an oboe, and the computer takes over and creates the sound.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Instruments}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Instruments\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The obvious problem, of course, is that the Apple II}{\f4\fs20 GS}{\f4  has even less of an idea as to what an oboe sounds like than I do.  Instrument files are used to teach the computer what a particular instrument should sound like.\par There are two issues to deal with with instruments, and once those are out of the way, using the instrument is pretty easy.  The first is what the Apple II}{\f4\fs20 GS}{\f4  thinks an instrument is.  The second issue is where you get one.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Instrument Record}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Instrument Record\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Note Synthesizer calls that play a note ask for a pointer to an instrument record.  Here\rquote s the definition for an instrument record, straight from ORCA/C\rquote s header files:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct Envelope \{\par    Byte st1BkPt;\par    Word st1Increment;\par    Byte st2BkPt;\par    Word st2Increment;\par    Byte st3BkPt;\par    Word st3Increment;\par    Byte st4BkPt;\par    Word st4Increment;\par    Byte st5BkPt;\par    Word st5Increment;\par    Byte st6BkPt;\par    Word st6Increment;\par    Byte st7BkPt;\par    Word st7Increment;\par    Byte st8BkPt;\par    Word st8Increment;\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct Envelope Envelope, *EnvelopePtr, **EnvelopeHndl;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct Instrument \{\par    Envelope theEnvelope;\par    Byte releaseSegment;\par    Byte priorityIncrement;\par    Byte pitchBendRange;\par    Byte vibratoDepth;\par    Byte vibratoSpeed;\par    Byte inSpare;\par    Byte aWaveCount;\par    Byte bWaveCount;\par    WaveForm aWaveList[1];\par    WaveForm bWaveList[1];\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct Instrument Instrument, *InstrumentPtr, **InstrumentHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are actually two parts to an instrument definition.  The instrument record is the first part; it deals with things like how quickly an instrument starts making sound (a drum starts pretty quickly, while a flute builds up gradually), how the sound dies off, and so forth.  These facts are stored in the envelope, and to a lesser extent, the various other fields.  There\rquote s a lot more that\rquote s different between two instruments than the way the sound builds up and dies, though.  Let\rquote s think about another familiar source of sound to see what I mean: your voice.  Even if you do your very best to say something just like another person, it\rquote s usually pretty easy to tell the two of you apart.  That\rquote s because the actual sound waves have a different shape.  The same thing is true with instruments.  The second part of the instrument definition deals with this issue; it\rquote s essentially a recording of the shape of the sound wave produced by an instrument.  These wave forms are actually placed in the 64K of sound memory.  The instrument record has some pointers which point to the start of the waves, and a field that tells how long the wave is.  This information is stored in }{\f6\fs20 WaveForm}{\f4  structures:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 struct WaveForm \{\par    Byte wfTopKey;\par    Byte wfWaveAddress;\par    Byte wfWaveSize;\par    Byte wfDocMode;\par    Word wfRelPitch;\par    \};\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef struct WaveForm WaveForm, *WaveFormPtr, **WaveFormHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The critical field is the }{\f6\fs20 wfWaveAddress}{\f4  field; this changes depending on where you put the wave in the sound RAM.  You won\rquote t have to worry about these fields for the sample programs in this lesson, since the samples will only use one instrument.  Because of that, we can load the wave forms for the instruments right at the start of the sound RAM.  Since the address field in the }{\f6\fs20 WaveForm}{\f4  record in an instrument file is a displacement from 0, the }{\f6\fs20 waveAddress}{\f4  values will be correct.  If you are using more than one instrument, though, you would have to figure out where to put each wave form, and adjust the }{\f6\fs20 waveAddress}{\f4  fields appropriately.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ASIF Instrument Files}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ASIF Instrument Files\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ASIF files}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are a lot of different ways to store instruments on a disk file.  Apple recommends one particular file format for people using the Note Synthesizer.  The files are called ASIF files; they have a file type of 0xD8, with an auxiliary file type of 0x0002.  The most popular program that uses this file format is Sound Smith.  You can find lots of ASIF instrument files by using key words instrument, Sound Smith, or ASIF in the music special interest forums on national online services.  In fact, the ones you\rquote ll be using in a moment were downloaded from America Online.\par The ASIF file format is very flexible, with lots of optional fields.  We\rquote re not going to go into all of the possibilities here, nor are we going to go into technical details on what all of the fields mean.  This is a very nuts and bolts section.  All the theory will be tossed to the wind, and we\rquote ll concentrate on the mechanics of actually loading an instrument from an ASIF file.  If you want to design your own instruments, deal with ASIF files, or write programs that use multiple instruments, you\rquote ll need to learn a few more details than we\rquote ll cover here.  In that case, you should get a copy of the Apple II}{\f4\fs20 GS}{\f4  File Type Notes, particularly the one for file type 0xD8, auxiliary file type 0x0002.  There\rquote s also a lot of good information about the fields in the description of the Note Synthesizer tool, which you\rquote ll find in Chapter 41 of the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 .  And now, back to our regularly scheduled nuts and bolts section...\par ASIF files are made up of a series of data blocks called chunks, all imbedded in a super-chunk.  There are a lot of different kinds of chunks with different kinds of information and different lengths, but all of the chunks start the same way: a four-character block-type identifier and a four byte length.  There\rquote s nothing special about the four-character type; it\rquote s just four ASCII characters.  The length is a little odd, though \endash  the bytes are in the opposite order of what they would normally be in a file.  (The first byte is the most significant byte, instead of the least significant byte.)\par Because of the regular structure of the chunks, you don\rquote t have to know what all of them are to use an ASIF instrument file.  In fact, the file is designed that way on purpose, so new kinds of chunks can be added without breaking old programs.  When you come across a chunk in the file, you check the four-character type.  If it\rquote s a chunk you need, you process the information.  If it\rquote s not a chunk that you need, you add the length in the second four bytes plus 8 to the address of the start of the chunk, and the result is a pointer to the start of the next chunk.\par Let\rquote s assume you already have a pointer to the first of the normal chunks, and you know what four-character type you are looking for.  In addition, you know the total length of all of the chunks (that\rquote s the key piece of information imbedded in the super-chunk, which we\rquote ll talk about in a moment).  Here\rquote s a set of subroutines that will scan the chunks, returning either a pointer to the first byte of data in the correct chunk, or }{\f6\fs20 NULL}{\f4  if the chunk you are looking for doesn\rquote t exist.\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 typedef char chunkType[5];              /* chunk ID type */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * GetByte\par *\par * Read a byte from the file buffer\par *\par * Parameters:\par *    p - pointer to the byte (updated)\par *\par * Returns: Byte from the file\par *\par ***************************************************************/\par \par unsigned GetByte (unsigned char **p)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 unsigned val;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 val = **p;\par ++(*p);\par return val;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * GetLong2\par *\par * Read a reverse order longint from the file\par *\par * Parameters:\par *    p - pointer to the value (updated)\par *\par * Returns: value\par *\par ***************************************************************/\par \par long GetLong2 (unsigned char **p)\par \par \{\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 long value;                             /* value */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 value = GetByte(p);\par value = (value << 8) | GetByte(p);\par value = (value << 8) | GetByte(p);\par value = (value << 8) | GetByte(p);\par return value;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * GetType\par *\par * Read a type from the file buffer\par *\par * Parameters:\par *    p - pointer to the byte (updated)\par *    id - (output) type read\par *\par ***************************************************************/\par \par void GetType (unsigned char **p, chunkType id)\par \par \{\par id[0] = (char) GetByte(p);\par id[1] = (char) GetByte(p);\par id[2] = (char) GetByte(p);\par id[3] = (char) GetByte(p);\par id[4] = 0;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * FindChunk\par *\par * Locate a chunk in an ASIF file\par *\par * Parameters:\par *    p - pointer to the start of the first chunk\par *    chunk - character type for the chunk to find\par *    len - number of bytes left in the file\par *\par * Returns: Pointer to the chunk; NULL if not found.\par *\par ***************************************************************/\par \par unsigned char *FindChunk (unsigned char *p, chunkType chunk,\par    unsigned long len)\par \par \{\par chunkType id;                         /* chunk type for the current chunk */\par unsigned char *ptr;                   /* pointer to return */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 unsigned long disp;                   /* length of the data in the chunk */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 do \{\par    GetType(&p, id);\par    disp = GetLong2(&p);\par    ptr = p;\par    p += disp;\par    len -= disp;\par    if (len <= 0)\par       if (id != chunk) \{\par          p = NULL;\par          ptr = NULL;\par          \}\par    \}\par while ((p != NULL) && (strcmp(chunk, id) != 0));\par return ptr;\par \}\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 16-2:  Function for Locating ASIF Chunks\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par I\rquote ve mentioned the super-chunk a couple of times.  Basically, the entire ASIF file is one huge chunk, and the data for the chunk is a series of smaller chunks.  Each ASIF file is only supposed to have one of these super-chunks, but it\rquote s probably a good idea to allow for other information after the super-chunks.  That way, if someone starts creating files with multiple super-chunks, your program will still work.\par The super-chunk itself starts off with a type of \ldblquote FORM\rdblquote .  The next four bytes are the length.  The length works just like the length for the regular chunks, so adding 8 to the length should give the length of the entire file.  The next four bytes are the type of the file, and should be \ldblquote ASIF\rdblquote .  This is followed by the various normal chunks in the file.\par Let\rquote s put all of this together, now, and sketch the overall form for handling these files.  The program should read the entire file into memory, using the same ideas we used in Lesson 6.  Next, check the two four-character type fields in the super-chunk to make sure the file is the right type of file.  Finally, the pointer to the first normal chunk is formed by adding 12 to the pointer to the start of the file, and the length of all of the normal chunks is formed by reading the four-byte length field and subtracting 4 from the length.  These two values are the values we need to pass to the }{\f6\fs20 FindChunk}{\f4  subroutine to locate a particular chunk in the file.\par While an ASIF file can have all sorts of chunks, there are only two we need to worry about, and both of them are supposed to be in any ASIF file.  The two chunks we need to find are the \ldblquote WAVE\rdblquote  chunk, which contains the wave form we need to copy into the sound RAM, and the \ldblquote INST\rdblquote  chunk, which contains the instrument record.  (Actually, an ASIF file can have more than one \ldblquote INST\rdblquote  chunk.  The way we\rquote ll write our program, well use the first instrument, and ignore any others, if there are any.)\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The \ldblquote WAVE\rdblquote  Chunk}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The WAVE Chunk\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Let\rquote s start of with the \ldblquote WAVE\rdblquote  chunk.  There\rquote s a lot of information in this chunk, but all we really need for our program is the waveform itself, which comes at the very end.  I\rquote ll summarize the various fields we skip over, but the only part of the information you really need to use the instrument is how to skip the various fields.  The names of the fields are taken straight from the file type notes, so you can cross reference what I\rquote m telling you here with the more detailed information in the file type notes, if you like.\par \par }\pard \qj\fi-2880\li3240\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1800\adjustright {\f4 name\tab length\tab use\par }\pard \qj\fi-2880\li3240\widctlpar\tx1800\adjustright {\f6\fs20 ckID}{\f4 \tab 4 bytes\tab This is the chunk type, \ldblquote WAVE\rdblquote .  }{\f6\fs20 FindChunk}{\f4  skips this field for you.\par }{\f6\fs20 chSize}{\f4 \tab 4 bytes\tab This is the length of the chunk, minus the 8 bytes used by the name and this field.  }{\f6\fs20 FindChunk}{\f4  also skips this field.\par }{\f6\fs20 waveName}{\f4 \tab variable\tab This is a name field for the wave itself.  It\rquote s a p-string, so you can skip this field by reading the first byte, which is a length byte, and adding the length plus one (the one is for the length byte itself) to the pointer.\par }{\f6\fs20 waveSize}{\f4 \tab 2 bytes\tab This is the size of the wave form.  You need to read this value and save it so you know how many bytes have to be copied into the sound RAM.  Unlike the length field in the header, this value is in the normal number order for the 65816, so the actual value is the value of the first byte plus 256 times the value of the second byte.\par }{\f6\fs20 numSamples}{\f4 \tab 2 bytes\tab This is the number of samples imbedded in the wave form.  This isn\rquote t important when we\rquote re using the wave, but you still need to read the value, since there are }{\f6\fs20 numSamples}{\f4  copies of the next field.\par }{\f6\fs20 sampleTable}{\f4 \tab 12 bytes\tab These sample tables give some information about the way the wave form was originally sampled.  Each of the sample tables is 12 bytes long, but there can be more than one of them.  To skip these fields, add }{\f6\fs20 12*numSamples}{\f4  to the pointer.\par }{\f6\fs20 waveData}{\f4 \tab }{\f6\fs20 waveSize}{\f4 +1\tab Finally!  Here are the actual bytes in the wave form.  These are the bytes that need to be moved to the sound RAM.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The documentation for the ASIF file format says that }{\f6\fs20 waveSize}{\f4  is a zero based counter, so a value of 0 means the wave contains one byte, and so forth.  In all of the files I downloaded and looked at, though, the size of the wave was exactly }{\f6\fs20 waveSize}{\f4  bytes.  I\rquote d suggest treating the wave form as if it is exactly }{\f6\fs20 waveSize}{\f4  bytes long.  If that turns out to be wrong, you loose a single byte \endash  and that isn\rquote t likely to be something you\rquote ll miss when the wave form is used.  If you want to be extra careful, though, you could calculate the actual wave form size on the fly by subtracting the location of the chunk after the \ldblquote WAVE\rdblquote  chunk from the start of the }{\f6\fs20 waveData}{\f4  field.  Either way, the program won\rquote t loose track of the data, since the program keeps track of things based on the original chunk length.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 WriteRamBlock}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Now that you know how to find the wave, the next step is copying it into the sound RAM.  You do that with the Sound Tool Set call }{\f6\fs20 WriteRamBlock}{\f4 :\par \par }{\f6\fs20 WriteRamBlock(cPtr, 0, waveSize);\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first parameter is a pointer to the first byte of the wave itself.  The next parameter is the starting location in the sound RAM; we want to put the wave form right at the start of the sound RAM, so we pass a 0.  The next parameter is the number of bytes in the wave, which we read from the chunk.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 interrupts}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This particular call has two very strange requirements.  The fist is that the wave itself can\rquote t be in banks 0x00, 0x01, 0xE0 or 0xE1.  As it turns out, all four of those banks have some memory that is reserved by the Memory Manager, so one cheap way to fulfil this requirement is to make sure you allocate at least 64K of memory when you read the instrument file.  The second requirement is that you have to disable interrupts before you make the call.  The only way to enable and disable interrupts is from assembly language, but you can use C\rquote s built-in mini-assembler to do the job, like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 asm \{sei\};\par WriteRamBlock(cPtr, 0, waveSize);\par asm \{cli\};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The \ldblquote INST\rdblquote  Chunk}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The INST Chunk\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The instrument record is the main component of the \ldblquote INST\rdblquote  chunk.  Like I mentioned earlier, there has to be at least one \ldblquote INST\rdblquote  chunk, but it\rquote s possible to have more than one, too.  As long as we\rquote re just trying to use a single instrument from a file, it will work fine to just scan for the first \ldblquote INST\rdblquote  chunk and use it.\par The \ldblquote INST\rdblquote  chunk starts off with the characters \ldblquote INST\rdblquote  and a four-byte length, just like all of the other chunks.  These eight bytes are skipped by }{\f6\fs20 FindChunk}{\f4 .  There are two more fields we need to skip before we get to the instrument record itself.  The first is the name of the instrument; this is a p-string, so you can skip this field by adding the one-byte length of the string plus one to the pointer.  The next field is a sample number; this is a bookkeeping field that helps keep track of waves in \ldblquote WAVE\rdblquote  chunks that have several sub-waves imbedded in a single wave packet.  The field is two bytes long.  We don\rquote t need it for anything, so just add two to the pointer.\par At this point, you have a pointer to the start of the instrument record.  Since we\rquote re only copying one wave into the sound RAM at a time, the pointer is all you need.  Save the pointer for later, when we actually play some notes.\par {\*\bkmkend bk90}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 instruments}{\rxe bk90}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Some Practical Comments About Instrument Files}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Some Practical Comments About Instrument Files\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Now that you\rquote ve seen the file format for an instrument, you can see that there are two distinct parts for an instrument definition.  The \ldblquote WAVE\rdblquote  chunk is literally a digital recording of the instrument, playing a note at a constant volume.  When you download an instrument file, this is the important part that you\rquote re after \endash  this recording of the instrument is something you can\rquote t fake easily.\par The other part of the instrument definition is all of the entries in the instrument record itself.  If you think about it for a moment, instruments don\rquote t really play a single note at a constant volume.  The process of converting a sound into another note is something the Note Synthesizer does pretty well, but there is another issue we have to be concerned with, and it\rquote s one that the Note Synthesizer can\rquote t face, and that the folks who upload instruments don\rquote t worry much about.  That\rquote s the issue of how the volume of a note changes over time.\par Let\rquote s start looking at this issue with a couple of examples.  Let\rquote s say you hit a tight drum head with a drumstick.  The sound you hear starts very quickly, and stops almost as quickly as it starts.  Now compare that to a gentle note on a violin.  The note starts slowly, builds up to a maximum volume, then fades away slowly, too.  The point is that the shape of the sound wave as a function of volume verses time is very different for these two instruments.  Other instruments are different, too.  Plucked string and percussion instruments, as a general rule, build up volume very quickly, then the volume drops off.  In some instruments, like a guitar or loose base drum, the sound may hang in there for quite a while.  Wind instruments and stroked string instruments vary a lot, but as a group, they hold their maximum volume longer than the plucked string instruments or percussion instruments.\par The Note Synthesizer has a pretty good way of handling this situation, as well as another we\rquote ll talk about in a moment.  You literally define the wave form as volume verses time.  The problem is that all of the instrument files I found used a constant wave envelope that built up and dropped off very quickly \endash  so quickly that even the percussion instruments were hard to recognize.  As a result, you can\rquote t just load a sound file and play it if you expect to get good results.  You also have to modify the instrument definition.\par In the next two sections, I\rquote m going to do two things.  First, I\rquote m going to tell you how the }{\f6\fs20 envelope}{\f4 , }{\f6\fs20 releaseSegment}{\f4 , }{\f6\fs20 vibratoDepth}{\f4  and }{\f6\fs20 vibratoSpeed}{\f4  fields of the instrument file work, so you can create your own sound profiles for your instruments.  Next, I\rquote m going to give you a canned set of parameters that will make most of the instruments on the disks that comes with this course sound pretty good.  If you\rquote re interested in getting the program to work, but don\rquote t care about the details, skip the next section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Changing the Sound Quality for an Instrument}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Changing the Sound Quality for an Instrument\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The major task in creating an instrument profile is to tell the Note Synthesizer how the volume should vary over a period of time.  The }{\f6\fs20 envelope}{\f4  parameter in the instrument record is basically just a plot of volume verses time, coded in a rather obscure way.  In the instrument record, you see that the envelope is a series of eight fields.  In each field, the first byte is a volume, and the next two bytes are an integer telling the Note Synthesizer how fast it should change from the old volume to the new one.  Let\rquote s work through an example to see how these fields are used.\par When the note starts, it starts at a volume level of zero.  The highest volume for the note is 127, and for the most part, we want to jump up to that peak volume fairly quickly.  Let\rquote s say we want to get there in 0.01 seconds.  To figure out the second parameter, we use this formula:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 rise = deltaVolume*0.128/time;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 where }{\f6\fs20 deltaVolume}{\f4  is the difference between the original volume and the new one (127 in this case) and }{\f6\fs20 time}{\f4  is the amount of time it should take to make the change, in seconds (0.01).  If this is what we want to do for the first part of the note envelope, we would set the first byte of envelope to 127, and the next word to }{\f6\fs20 rise}{\f4 , like this:\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi180\keepn\widctlpar\adjustright {\f6\fs20 theEnvelope.st1BkPt = 127;\par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 theEnvelope.st1Increment = rise;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This rise time parameter works in either direction.  The Note Synthesizer looks at the two volumes to figure out if it should move up or down; you always put the rise time in as a positive integer.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 volume}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 decibels}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The units for time are pretty obvious, but the units for volume are something you may not be as familiar with as the units for time.  Volume is measured in decibels, which is a logarithmic scale.  Changing the volume by 16 is equivalent to changing the sound level by 6 decibels.  Increasing the volume parameter by 37 roughly doubles the actual sound, while cutting the volume parameter by 37 cuts the volume in half.\par You may not need all eight parts of the volume profile.  Later on, in fact, we\rquote ll only use four entries for our canned waveform.  If you don\rquote t need all of the entries, set the extra ones to zero.  The last entry should always have a volume of zero, too.\par Obviously I\rquote m skipping over some background here, like where the equation comes from, what a decibel really is, and so forth.  Most of that theory is covered in the toolbox reference manuals.  (The definition for a decibel isn\rquote t \endash  one decibel is a ratio between two sound intensities such that  }{\f6\fs20 20*ln(volume1/volume2)}{\f4  is one, if you\rquote re curious.)  It\rquote s also not important when it comes to designing the instrument profile.  What you really need to do is sketch the waveform out as volume verses time, then use this equation to generate the numbers for the waveform table.  As you create the table, keep in mind that changing the volume parameter by one unit has a much bigger effect when the volume is high than when the volume is low.  There\rquote s a lot of art in defining the instrument profile, and you\rquote re going to have to play with it a bit to get one right.  The details I\rquote m skipping over wouldn\rquote t help design the instrument envelope any better.\par For a lot of instruments, you can start to play, then hold a note for quite a long time.  That\rquote s something the Note Synthesizer can do, too.  Once you start a note, you can either wait until it fades out, or you can stop the note early.  If you stop the note early, the Note Synthesizer skips from wherever it is in the note sequence to the release segment, and picks up from there.  The }{\f6\fs20 releaseSegment}{\f4  parameter in the instrument record is an index into the envelope array, from 0 to 7.  Generally you point it to the last entry you used \endash  the one that finally decays to a volume of 0.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 vibrato}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Stop ant try to imagine what it really sounds like as a violin, trumpet, or even a human voice tries to hold a constant note.  It usually isn\rquote t quite constant, and isn\rquote t supposed to be.  Instead, it wobbles back and forth.  That\rquote s called vibrato; it\rquote s a little volume shift that\rquote s in almost every sound.  You can use the }{\f6\fs20 vibratoDepth}{\f4  and }{\f6\fs20 vibratoSpeed}{\f4  fields to create vibrato in an instrument.  The }{\f6\fs20 vibratoDepth}{\f4  field varies from 0 to 127; it\rquote s the amount of change you\rquote re introducing.  The }{\f6\fs20 vibratoSpeed}{\f4  field is the speed of the change, which ranges from 0 to 255.  The units aren\rquote t outlined exactly in the toolbox reference manuals, but it wouldn\rquote t help much even if they were.  In practice, you have to play with these numbers until you get something that sounds good.\par Unlike most of the other sound effects, vibrato is implemented in software.  If you use anything but 0 for }{\f6\fs20 vibratoDepth}{\f4 , you will have some effect on the speed of the program you\rquote re running while the sound is played.  If you\rquote re writing a game, you might want to be sure }{\f6\fs20 vibratoDepth}{\f4  is set to zero, even though vibrato adds a lot to the quality of the sound.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Canned Parameters}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Canned Parameters\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In the last section, I went into enough of the details about how the instrument record is used for you to customize the volume envelope for an instrument.  That\rquote s something you need to do for all of the instruments I\rquote ve found on the online services, since the authors seemed to spend more time collecting good sound samples than developing a proper volume envelope.  There is no single proper volume envelope, but here\rquote s one that will get you close enough to recognize most of the instruments on the solutions disk.  (They\rquote re in the Instruments folder, by the way.)  This sample code fragment assumes you are working from a pointer to the instrument record, which is what you\rquote ll have if you follow the outline for loading the files from a few pages back.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 inst.theEnvelope.st1BkPt = 127;\par inst.theEnvelope.st1Increment = 0x3F80;\par inst.theEnvelope.st2BkPt = 100;\par inst.theEnvelope.st2Increment = 0x00B3;\par inst.theEnvelope.st3BkPt = 90;\par inst.theEnvelope.st3Increment = 0x0006;\par inst.theEnvelope.st4BkPt = 0;\par inst.theEnvelope.st4Increment = 0x0126;\par inst.releaseSegment = 3;\par inst.vibratoDepth = 80;\par inst.vibratoSpeed = 40;\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 16-3:  A General Purpose Volume Envelope\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Using the Note Synthesizer}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Using the Note Synthesizer\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 With a little work, you can turn the information in the last few sections into a program that can load an ASIF sound file and install the first instrument from that file.  I\rquote ll let you put that information to use in a problem in a moment, but first we need to cover what to }{\i\f4 do}{\f4  with the instrument!  Fortunately, loading and installing the instrument is the hard part.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AllNotesOff}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Note Synthesizer has a number of calls that let you play notes.  The first one you should call, though, is }{\f6\fs20 AllNotesOff}{\f4 .  It doesn\rquote t take any parameters.  }{\f6\fs20 AllNotesOff}{\f4  will turn off any notes that were already playing; there shouldn\rquote t be any, but this makes sure.  You should call }{\f6\fs20 AllNotesOff}{\f4  again before you quit.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AllocGen}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Before you can play a note, you need to allocate a generator.  That\rquote s done with }{\f6\fs20 AllocGen}{\f4 , like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 generator = AllocGen(100);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Earlier in this lesson, I mentioned that the Ensoniq sound chip could play more than one sound at a time.  The Note Sequencer makes use of this fact to let you play more than one note at a time.  If there is more than one instrument in the sound RAM, you can even play notes from different instruments; that\rquote s something that is very important for playing real songs.  The }{\f6\fs20 AllocGen}{\f4  call is the mechanism that lets all of this happen smoothly.  Before playing a note, you ask for one of the available generators, and get back a number from 0 to 13.  That\rquote s your generator number, and you use it for the rest of the calls associated with playing the note.\par Of course, you might need to play more than 14 notes at the same time.  In that case, only 14 can be played, so you need some way of telling the Note Synthesizer which notes are most important.  The parameter to }{\f6\fs20 AllocGen}{\f4  is a priority; if it\rquote s higher than the priority for some note that\rquote s already playing, the Note Synthesizer will stop that note and give you its generator.  If all of the notes that are playing have a higher priority than the new note, }{\f6\fs20 AllocGen}{\f4  returns an error, and you should skip playing the note.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NoteOn}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once you have a generator, the next step is to start playing a note.  That\rquote s done with the }{\f6\fs20 NoteOn}{\f4  call:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 NoteOn(generator, note, volume, (Pointer) instrumentPtr);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f6\fs20 generator}{\f4  is the generator number returned by }{\f6\fs20 AllocGen}{\f4 .  }{\f6\fs20 note}{\f4  is a note number.  Note numbers are assigned sequentially, starting with 1, which is a low note, and ranging up to 127, which is a high frequency note.  Middle C is 60.  There are 12 notes (7 major notes and 5 sharps) per octave, so 72 and 48 are also C notes.  }{\f6\fs20 volume}{\f4  is the volume for the note, which can vary from note to note; in general, you can also think of this as the force or speed for the note, like how hard a piano key is struck.  This parameter can also range from 1 to 127.  A good starting value is 64.  The final parameter is a pointer to the instrument record; that\rquote s the value we spent so much time getting ready when the instrument file was loaded.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The next step is a little touchy; you need to wait for a while.  The problem is that the right amount of time to wait is different for different instruments.  What you\rquote re waiting for is the proper time for the note to start fading away.  For a piano, that\rquote s right away \endash  the note starts to fade as soon as the piano wire is struck.  For a flute, the note doesn\rquote t start to fade until the flutist stops playing the note.\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 NoteOff(generator, note);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Once the note fades away to nothingness, the Note Synthesizer shuts off the generator and makes it available for other notes.  If the user stops the program before a note is quite finished, the }{\f6\fs20 AllNotesOff}{\f4  call I mentioned at the start of the section will shut things down properly.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Problem 16-3:  This problem puts the Note Synthesizer to work, creating a simple test bed program that lets you try out ASIF instruments.  There are two main parts to the program.\par The first part is the user interface.  Start with the Frame program, setting it up so there is always one open window.  Use the 640 mode version of frame, and set the window size to 377 by 50 pixels.  This is divided into 21 equal piano keys with vertical black lines, with sharp keys formed with black rectangles, as in the picture.  You\rquote re main event loop should check for mouse presses on the key; set it up so it starts the note when the mouse is pressed, and calls }{\f6\fs20 NoteOff}{\f4  when the mouse is released.  While you\rquote re waiting for the mouse up event, check to see if the mouse moves to another key; if it does, turn off the current note and start the new one.  That lets the user \ldblquote strum\rdblquote  the keys.\par \par }\pard \qc\fi360\widctlpar\adjustright {{\pict{\*\picprop\shplid1112{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw385\pich132\picwgoal7700\pichgoal2640\macpict\bliptag1537030326\blipupi72{\*\blipuid 5b9d38b65561501373a16354aeee3fca}16eb00000000008401811101a00082a0008e01000a0000000002d00240980032000000000084018800000000008401810000000000840181000102cf0002cf0008003fd3ff00feff0008003fd3ff00feff00080030d3000006ff00080030d3000006ff00080030d3000006ff00080030d3000006ff001b0333f3fff9f7ff01c00ff70000f0fe000370000003f4ff00e6ff001b0333f3fff9f7ff01c00ff70000f0fe000370000003f4ff00e6ff001c0330030018f600030600000cfc00020c0198fe000030f1000006ff001c0330030018f600030600000cfc00020c0198fe000030f1000006ff00220333f30019f7ff13c0061f0f1f1b337f0f1f1f0180fbf8f83078d803f4ff00e6ff00220333f30019f7ff13c0061f0f1f1b337f0f1f1f0180fbf8f83078d803f4ff00e6ff00200330030018f600110619980c1c336d99998c00f19b6ccc30cce0f3000006ff00200330030018f600110619980c1c336d99998c00f19b6ccc30cce0f3000006ff00220333f30019f7ff13c006198f0c18336d9f998c00199b6ccc30fcc003f4ff00e6ff00220333f30019f7ff13c006198f0c18336d9f998c00199b6ccc30fcc003f4ff00e6ff00200330030018f600110619818d98336d98198d81999b6ccc30c0c0f3000006ff00200330030018f600110619818d98336d98198d81999b6ccc30c0c0f3000006ff00220333f3fff9f7ff13c00f198f07181f6d8f198700f0fb6cf87878c003f4ff00e6ff00220333f3fff9f7ff13c00f198f07181f6d8f198700f0fb6cf87878c003f4ff00e6ff000c0030e50000c0f0000006ff000c0030e50000c0f0000006ff00080030d3000006ff00080030d3000006ff0008003fd3ff00feff0008003fd3ff00feff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f30003ff00ffc003000ffc03ff00ffc003000ffc03ff000c003ff00ffc03ff000c003ff00ffc003000ffc03ff000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff00332f3000030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c00030000c0006ff0008003fd3ff00feff0008003fd3ff00feff0002cf0002cf00a0008fa00083ff}}{\f4 \par \par Figure 16-5:  The Keyboard\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Start with a volume value of 120, and set the keyboard up so the leftmost note has a note number of 36.  You can change those values if you like, but they\rquote re good starting places.\par Your program should include an Open call in the File menu, but New, Close, Save and Save As should all be missing.  Naturally, you can\rquote t play a note until an instrument is loaded, so if the user plays a note right away, display an appropriate dialog.\par The second main part of the program is the part that loads an instrument.  We covered loading the file in the text of the session.  Besides implementing those mechanics, you also need to hook up an SFO Open dialog that only allows the user to open files with a file type of 0xD8 and auxiliary file type of 0x0002.  Once the ASIF file has been loaded, patch the instrument file with the code from Listing 16-3.\par Your program will be using calls from both the Sound Tool Set and the Note Sequencer, so be sure both tools are started in your }{\f6\fs20 StartUpTools}{\f4  call.\par {\*\bkmkend bk91}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Note Synthesizer}{\rxe bk91}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Getting the Most from Instruments}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Getting the Most from Instruments\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 At first blush, you might think that all of the talk about the Note Synthesizer is only useful if you want to write a music program.  Wrong!\par Try your instrument sampler on some of the instruments from the solutions disk.  Play a single note from the instrument, trying them at various notes.  I\rquote d particularly recommend listening carefully to the instruments Again, Parrot, Phasor and Pistola \endash  none of which are an instrument in the traditional, musical sense.  With the proper instruments and a little imagination, you can use the Note Synthesizer for almost all of the sound effects in a typical game or education program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Sound Tools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Sound Tools\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Ultimately, all sounds produced by the computer end up as vibrations of a speaker cone, but there are a lot of ways to get that final result.  Depending on what you are trying to do, you have a wide variety of sound tools available, too.  And, of course, there\rquote s the whole topic of getting sounds into the computer in the first place!\par You\rquote ve seen a little of what the Apple II}{\f4\fs20 GS}{\f4  can do with the Sound Tool Set and the Note Synthesizer.  In the rest of this section, we\rquote ll take a look at some of the other sound related tools.  Some of these are true tool sets, either built into the Apple II}{\f4\fs20 GS}{\f4  or in the Tools folder of your system disk, but I\rquote m not going to limit the information to just the things that come with the system.  After all, that wouldn\rquote t give you any way to get sound into the computer!\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Audio Compression and Expansion Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Audio Compression and Expansion Tool Set\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 sound\:compression}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ACE Tool Set}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In most cases, the biggest drawback to digitally recorded sound is the sheer size of the sound files.  The Audio Compression and Expansion Tool Set (ACE) is used to compress some of those huge chunks of data.  ACE uses a clever technique of compression that doesn\rquote t always give you back exactly what you put in.  That sounds like it would cause problems (sorry about the pun!) but in practice the results are very impressive.  ACE can compress a sound to either 1/2 or 5/8 of its original size, then expand the sound back out to something that is close enough to the original sound that you generally can\rquote t hear the difference.\par ACE is a RAM based tool.  It\rquote s on your System Disk (Tool029 in the Tools folder).  ACE is documented in Chapter 27 of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Note Sequencer}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Note Sequencer\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Note Sequencer}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 synthesized sound}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 sound\:synthesized}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 We used the Note Synthesizer to play individual notes using a variety of instruments.  The Note Synthesizer is designed to string those notes together into multi-instrument songs.  Once you get a song going, it can even play the song in the background while the main CPU of the Apple II}{\f4\fs20 GS}{\f4  keeps right on working.  That\rquote s real handy in a game, for example.  You could even create a desk accessory to play background music while you use other programs.\par The Note Sequencer is a RAM based tool.  It\rquote s on your System Disk (Tool026 in the Tools folder).  The Note Sequencer is documented in Chapter 40 of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The MIDI Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The MIDI Tool Set\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MIDI}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you walk into a store that sells musical instruments mumbling \ldblquote MIDI,\rdblquote  they will know exactly what you\rquote re talking about.  The Musical Instrument Digital Interface (MIDI) is a common hardware and software interface that lets musical devices talk to each other.  You\rquote ll need a MIDI card and one or more MIDI compatible musical instruments to get going, but with those installed, you can turn your Apple II}{\f4\fs20 GS}{\f4  into an awesome music box.  For a very simple example, you could record what you play on a MIDI keyboard (most MIDI keyboards look more or less like a piano or organ keyboard), edit the results in the computer to clean up timing, and play the edited song back through the MIDI device.\par The MIDI Tool Set was created to make it easier for you to deal with all of the different MIDI instruments and cards.  It gives you a standard interface with a well defined set of tool calls that let you talk to virtually any MIDI instrument.\par The MIDI Tool Set is a RAM based tool.  It\rquote s on your System Disk (Tool032 in the Tools folder).  The MIDI Tool Set is documented in Chapter 38 of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 .  Several commercially available music programs can use the MIDI tools to talk to MIDI instruments, too.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 synthLAB}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 synthLAB\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MIDI}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 synthLAB is actually an application, created by Apple Computer and distributed with System 6.0.  synthLAB is designed as a MIDI editing tool, but it\rquote s also a great way to play with the instrument and music capabilities of the Apple II}{\f4\fs20 GS}{\f4 .\par synthLAB is a self contained package, with documentation right on the disk.  Just catalog the synthLAB disk from System 6.0 and start exploring!\par synthLAB also makes use of a new tool set, the MIDI Synth Tool Set.  This is another take on the MIDI Tool Set, basically doing the same thing, but with a different perspective.  Depending on what you are doing, you might find that the MIDI Synth Tool Set is a better choice than the MIDI Tool Set.\par The MIDI Synth Tool Set is new with System Disk 6.0.  It is documented in }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The Media Control Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The Media Control Tool Set\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 multi-media}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Media Control Tool Set does for stereo systems what the MIDI Tool Set does for MIDI instruments: it gives you a single, well defined tool that can talk to virtually any modern stereo component.  You can control CDs, Laser Discs and VCRs, all with a single tool.  In theory, you can turn your Apple II}{\f4\fs20 GS}{\f4  into a rather powerful computerized video or sound DJ.\par The Media Control Tool Set is new with System Disk 6.0.  It is documented in }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Talking Tools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Talking Tools\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 speech}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When we looked at the Note Synthesizer, you saw how the computer could take an instrument file and a computerized version of sheet music and play a song.  The computer can also take some computerized knowledge of the English language and straight ASCII text and create sound from the text.  The Talking Tools package does exactly that.\par In practice, the rules for speaking are a lot more complicated than the rules for playing an instrument.  You would never mistake the computer for a real person.  The voice is easy to understand, though, and you do have some control over it \endash  like picking a male or female voice, controlling the speed, and controlling the volume.\par There are two big reasons for picking text to speech conversion over a digitally recorded voice.  The first, of course, is space.  You can easily store an entire novel on an 800K floppy disk using ASCII text, then read the novel with Talking Tools.  There\rquote s no way you could get a digital recording of an entire book on a floppy disk, though.\par The other reason for picking text to speech conversion is flexibility.  With a digitally recorded voice, you\rquote re stuck with a specific sequence of words.  With text to speech conversion, you can have the computer say anything you like \endash  even, for example, asking for the name of the user and fitting it into future spoken sentences.\par The Talking Tools package comes with the tools themselves, demonstration programs, documentation for the tools, and interfaces for a variety of languages, including ORCA/C.  It is published by the Byte Works.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Sound Input}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Sound Input\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 sound input}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Apple II}{\f4\fs20 GS}{\f4  doesn\rquote t have a built-in microphone or any other sound input device, so if you want to create digital recordings of your own, you\rquote ll need some sort of sound input device.  There are a lot of them out there, ranging in price from about $30 to a couple of hundred dollars.  The cheaper devices plug right into your motherboard, and usually include a small card.  These are pretty good for playing around, but electrical interference from the computer itself limits the quality of the sound.  The more expensive cards can approach CD quality sound.\par All of the various cards have standard jacks, so you can plug a lot of different things into the card.  Of course, the obvious choice is a microphone, but you can also connect the computer to a VCR or stereo to record songs or sound effects.  Some of the cards also have stereo output \endash  the built-in output on the Apple II}{\f4\fs20 GS}{\f4  can only play one channel, even thought the sound chip can easily handle stereo.\par One of the inexpensive sound input systems comes bundled with HyperStudio, published by Roger Wagner Publishing.  For the more expensive systems, get a recent catalog from a mail order house, or check out the cards offered by Applied Engineering.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This lesson has reviewed the major tools, hardware, and software used to make sounds on the Apple II}{\f4\fs20 GS}{\f4 .  You learned to use some of the features of two of these tools: the Sound Tool Set for playing digitally recorded sound, and the Note Sequencer for creating musical notes using instruments.  You also learned to load instruments from ASIF instrument files.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 AllNotesOff\tab AllocGen\tab FFSoundDoneStatus\tab FFStartSound\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 FFStopSound\tab NoteOff\tab NoteOn\tab WriteRamBlock\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk92}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 sound}{\rxe bk92}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 17 \endash  Professional Polish}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 17 \endash  Professional Polish}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 17 \endash  Professional Polish\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk98}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 At this point, you can crank out a pretty complete desktop program, but it still doesn\rquote t have that polished look of a professional program.  One of the big differences between your programs and the professional programs is that the professional programs interact with the operating system through icons and messages.  This lesson shows you how to make your own programs work smoothly with the Apple II}{\f4\fs20 GS}{\f4  operating system, and especially with the Finder.  Topics covered include icons, Finder information, and using the message center.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Finder Resources}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Finder Resources\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk93}\par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The }{\b\f6 rComment(1)}{\b\f4  Resource}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The }{\b\v\f6 rComment(1)}{\b\v\f4  Resource\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you\rquote re in the Finder, you can ask for information about a program.  When the Finder is asked for information, it looks in the resource fork of the file for an }{\f6\fs20 rComment}{\f4  resource with a resource ID of 1.  If it finds one, it displays the text in the resource.  This comment resource is generally reserved for the user, who can write comments about the program or data files, but you can also use the }{\f6\fs20 rComment}{\f4  resource to imbed information you think the user might need, like the amount of memory and minimum hardware or software your program needs.  There\rquote s another place for you to record copyright information, so you normally won\rquote t put that here.\par Listing 17-1 shows a sample resource for an }{\f6\fs20 rComment}{\f4  resource.  Figure 17-1 shows the information as it\rquote s displayed by the Finder when you use the Icon Info command under the Finder\rquote s Special menu.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rComment (1) \{\par    "Finder comments look like this."\par    \};\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 17-1:  }{\f6\fs20 rComment}{\f4  Resource for a Typical Program\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1113{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw408\pich258\picwgoal8160\pichgoal5160\macpict\bliptag1700203808\blipupi72{\*\blipuid 65570d20fbd92177dcbffccf1e9f734b}0d5000000000010201981101a00082a0008e01000a0000000002d002409800340000000000c801980000000000c801980000000000c80198000102cd0002cd0007003fd0ff01fc0007003fd0ff01fc00070030d000010c00070030d000010c00070030d000010c00070030d000010c001f0333f3fff9f5ff03003c001cfd000a6cf8f878f8030fc0306c01f2ff01cc001f0333f3fff9f5ff03003c001cfd000a6cf8f878f8030fc0306c01f2ff01cc001c0330030018f40002180030fd0000d8fdcc040f00c0f06cf100010c001c0330030018f40002180030fd0000d8fdcc040f00c0f06cf100010c001f0333f30019f5ff0800187c7c78078f80d8fdcc0503018030d801f2ff01cc001f0333f30019f5ff0800187c7c78078f80d8fdcc0503018030d801f2ff01cc001d0330030018f4000f186630cc0cccc000f8f8ccf803030030f000010c001d0330030018f4000f186630cc0cccc000f8f8ccf803030030f000010c00200333f30019f5ff1200186630cc0cccc000c0d8cccc030300300001f2ff01cc00200333f30019f5ff1200186630cc0cccc000c0d8cccc030300300001f2ff01cc001d0330030018f40008186630cc0cccc000c0fecc0303060030f000010c001d0330030018f40008186630cc0cccc000c0fecc0303060030f000010c00200333f3fff9f5ff12003c663078078cc000c0cc78f8cfc60cfc0001f2ff01cc00200333f3fff9f5ff12003c663078078cc000c0cc78f8cfc60cfc0001f2ff01cc00070030d000010c00070030d000010c00070030d000010c00070030d000010c0007003fd0ff01fc0007003fd0ff01fc00070030d000010c00070030d000010c00070030d008010c00070030d008010c00070030d022010c00070030d022010c00070033d0ef01cc00070033d0ef01cc00070033d020014c00070033d020014c00070033d0ec01cc00070033d0ec01cc00070033d0ec01cc00070033d0ec01cc00070033d0fc01cc00070033d0fc01cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc001b05330007c60003f600060e00001800e0c6fe00016030ec0001cc001b05330007c60003f600060e00001800e0c6fe00016030ec0001cc001c05330006000003f8000cc0000600001800600600003060eb0001cc001c05330006000003f8000cc0000600001800600600003060eb0001cc00241d3300060e3e1f1e3603c3cfe7f0f1f1f0f0060f0f198061c663c07c7c70f0ed0001cc00241d3300060e3e1f1e3603c3cfe7f0f1f1f0f0060f0f198061c663c07c7c70f0ed0001cc00240333000786fe33163806666db6d99998c1800619999b0060c6c66030663180ed0001cc00240333000786fe33163806666db6d99998c1800619999b0060c6c66030663180ed0001cc00241d3300060633333f3006066db6d9f998c0f00619999e0060c787e0306630f0ed0001cc00241d3300060633333f3006066db6d9f998c0f00619999e0060c787e0306630f0ed0001cc00241d330006063333303006666db6d98198d8180619999b0060c6c60036663018ed0001cc00241d330006063333303006666db6d98198d8180619999b0060c6c60036663018ed0001cc0025103300060f331f1e3003c3cdb6d8f19870f0fe0f0a1980f1e663c01c6678f180ee0001cc0025103300060f331f1e3003c3cdb6d8f19870f0fe0f0a1980f1e663c01c6678f180ee0001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc0098003400c800000102019800c800000102019800c80000010201980001070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc000d0033ebfff700007ff1ff01cc000d0033ebfff700007ff1ff01cc001601300cf800010c30f8000130c0f80000c0f100010c001601300cf800010c30f8000130c0f80000c0f100010c002003300c000ffc00071c000c300000c330fc000330c001e0fa0000c0f100010c002003300c000ffc00071c000c300000c330fc000330c001e0fa0000c0f100010c002304300c001980fd00070c000c300000c330fc000330c00330fc00026000c0f100010c002304300c001980fd00070c000c300000c330fc000330c00330fc00026000c0f100010c002821300c00180f1f0f1b1f0c000c300000db3e1e363c000030c00301e7f3f878f8f800c0f100010c002821300c00180f1f0f1b1f0c000c300000db3e1e363c000030c00301e7f3f878f8f800c0f100010c002803300c001bfe991a9c330c000c300000db33333866000030c0030336db6ccccc6000c0f100010c002803300c001bfe991a9c330c000c300000db33333866000030c0030336db6ccccc6000c0f100010c002821300c00199f999f98330c000c300000db333f307e000030c0030336db6cfccc6000c0f100010c002821300c00199f999f98330c000c300000db333f307e000030c0030336db6cfccc6000c0f100010c002821300c001998199818330c000c3000006633303060000030c0033336db6cc0cc6c00c0f100010c002821300c001998199818330c000c3000006633303060000030c0033336db6cc0cc6c00c0f100010c002821300c000f0f198f181f1e000c30000066331e303c000030c001e1e6db6c78cc3800c0f100010c002821300c000f0f198f181f1e000c30000066331e303c000030c001e1e6db6c78cc3800c0f100010c001601300cf800010c30f8000130c0f80000c0f100010c001601300cf800010c30f8000130c0f80000c0f100010c0017013007f80001381cf80001e070f900010380f100010c0017013007f80001381cf80001e070f900010380f100010c0016013001f8ff01e007f8ff01801ff9ff00fef000010c0016013001f8ff01e007f8ff01801ff9ff00fef000010c00070030d000010c00070030d000010c0007003fd0ff01fc0007003fd0ff01fc0002cd0002cd00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 17-1:  The Finder\rquote s Comment Box\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The }{\b\f6 rComment(2)}{\b\f4  Resource}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The }{\b\v\f6 rComment(2)}{\b\v\f4  Resource\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Another resource the Finder recognizes is an }{\f6\fs20 rComment}{\f4  resource with a resource ID of 2.  The Finder shows the text from this resource whenever the user clicks on the icon for a file that can\rquote t be opened.  That might happen if your program is used to create a data file, but someone is trying to open the data file on another computer.  This resource is a good place to put some information about your program, like the name and where to get a copy!  To do that, though, you need to create a resource under program control.  Creating a resource fork and adding a resource is a lot like writing data to a file, but there are some differences, especially in the particular calls used.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenResourceFile}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The first step is to open the resource fork on the data file.  }{\f6\fs20 OpenResourceFile}{\f4  does that; here\rquote s a sample call:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 id = OpenResourceFile(2, NULL, fileName);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The first parameter tells the Resource Manager whether you want have read access (use a value of 1) write access (use a value of 2) or both (use a value of 3).  In this case, we\rquote re supposedly creating a new resource fork and adding a new resource, so all we want is write access.  The next parameter is a pointer to the resource map for the file; this is almost always }{\f6\fs20 NULL}{\f4 , especially for a new resource file.  The last parameter is a GS/OS path name (the parameter type is }{\f6\fs20 GSString255}{\f4 ), just like the one you use to open the data fork for the file.  }{\f6\fs20 OpenResourceFile}{\f4  returns a file ID for the resource fork and makes the resource fork the current one.  In practical terms, this means you could cause problems by doing anything with resources before the file is closed, so keep this section of code tight!  You will need the file ID to close the resource fork.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AddResource}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The next step is to add the new resource.  That\rquote s done with an }{\f6\fs20 AddResource}{\f4  call:\par \par }\pard \qj\li180\widctlpar\adjustright {\f6\fs20 AddResource(dataHandle, 0x0300, 0x802A, 2);}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 This call adds the resource to the current resource file.  }{\f6\fs20 OpenResourceFile}{\f4  made your new resource file the current resource file, so the resource will get added to the resource fork of your data file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 dataHandle}{\f4  parameter is a handle containing the information you actually want to put in the resource.  The handle needs to be the right size, so you need to allocate the handle specifically for this resource.  Once you make this call, the memory belongs to the Resource Manager, and will be disposed of at the proper time by the Resource manager.  In short, after this call, forget the handle exists!  The information you stuff in this particular resource should be straight ASCII text.\par The 0x0300 parameter is a flags word with attributes for the resource.  The ones I\rquote m giving here work fine for our purpose, but if you want to do anything else with }{\f6\fs20 AddResource}{\f4 , be sure to read the complete description of the attributes.\par The next parameter is the type number for an }{\f6\fs20 rComment}{\f4  resource.  It would be good style to create a constant called }{\f6\fs20 rComment}{\f4 , and use }{\f6\fs20 rComment}{\f4  as the parameter, in any real program.\par The last parameter is the resource ID.  We\rquote re defining an }{\f6\fs20 rComment(2)}{\f4  resource, so this parameter should be 2.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseResourceFile}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Finally, you need to close the resource file.\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 CloseResourceFile(id);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 The }{\f6\fs20 id}{\f4  parameter is the same one returned by }{\f6\fs20 OpenResourceFile}{\f4 .  By now, I\rquote m assuming you\rquote re tuned in to details of error handling, and wouldn\rquote t even thing of making the }{\f6\fs20 AddResource}{\f4  or }{\f6\fs20 CloseResourceFile}{\f4  calls unless the }{\f6\fs20 OpenResourceFile}{\f4  call succeeded.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the side effects of the }{\f6\fs20 CloseResourceFile}{\f4  call is that it will change the current resource fork back to its setting before the }{\f6\fs20 OpenResourceFile}{\f4  call.  (This is a simplification, but it\rquote s true the way we\rquote ve used the calls here.)  That means that after this call is made, any resource file activity will point back to your program\rquote s resource fork, which is where it should be.\par {\*\bkmkend bk93}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rComment resource}{\rxe bk93}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The }{\b\f6 rVersion}{\b\f4  Resource}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The }{\b\v\f6 rVersion}{\b\v\f4  Resource\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk94}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 rComment}{\f4  resource is optional, but your program must have an }{\f6\fs20 rVersion}{\f4  resource and an }{\f6\fs20 rBundle}{\f4  resource to work properly with the Finder.  These two resources are used by the Finder to identify your program and decide how some advanced features should be handled.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rVersion(1) \{\par    \{\par       1,                                    /* Major revision */\par       0,                                    /* Minor revision */\par       0,                                    /* Bug version */\par       final,                                /* Release stage */\par       0,                                    /* Non-final release # */\par       \},\par    verUS,                                   /* Region code */\par    "My Program",                            /* Short version number */\par    "Copyright 1992, John Doe",              /* Long version number */\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 17-2:  A Sample }{\f6\fs20 rVersion}{\f4  Resource\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par As you can see, the }{\f6\fs20 rVersion}{\f4  resource contains version information.  The Finder shows the user some of this information when the user uses the Icon Info command.\par \par }\pard \qc\fi360\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1114{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex50\picscaley50\piccropl0\piccropr0\piccropt0\piccropb0\picw408\pich258\picwgoal8160\pichgoal5160\macpict\bliptag1485798939\blipupi72{\*\blipuid 588f7e1b801f9420d7bf742567b1d32f}17d200000000010201981101a00082a0008e01000a0000000002d002409800340000000000c801980000000000c801980000000000c80198000102cd0002cd0007003fd0ff01fc0007003fd0ff01fc00070030d000010c00070030d000010c00070030d000010c00070030d000010c001f0333f3fff9f5ff03003c001cfd000a6cf8f878f8030fc0306c01f2ff01cc001f0333f3fff9f5ff03003c001cfd000a6cf8f878f8030fc0306c01f2ff01cc001c0330030018f40002180030fd0000d8fdcc040f00c0f06cf100010c001c0330030018f40002180030fd0000d8fdcc040f00c0f06cf100010c001f0333f30019f5ff0800187c7c78078f80d8fdcc0503018030d801f2ff01cc001f0333f30019f5ff0800187c7c78078f80d8fdcc0503018030d801f2ff01cc001d0330030018f4000f186630cc0cccc000f8f8ccf803030030f000010c001d0330030018f4000f186630cc0cccc000f8f8ccf803030030f000010c00200333f30019f5ff1200186630cc0cccc000c0d8cccc030300300001f2ff01cc00200333f30019f5ff1200186630cc0cccc000c0d8cccc030300300001f2ff01cc001d0330030018f40008186630cc0cccc000c0fecc0303060030f000010c001d0330030018f40008186630cc0cccc000c0fecc0303060030f000010c00200333f3fff9f5ff12003c663078078cc000c0cc78f8cfc60cfc0001f2ff01cc00200333f3fff9f5ff12003c663078078cc000c0cc78f8cfc60cfc0001f2ff01cc00070030d000010c00070030d000010c00070030d000010c00070030d000010c0007003fd0ff01fc0007003fd0ff01fc00070030d000010c00070030d000010c00070030d008010c00070030d008010c00070030d022010c00070030d022010c00070033d0ef01cc00070033d0ef01cc00070033d020014c00070033d020014c00070033d0ec01cc00070033d0ec01cc00070033d0ec01cc00070033d0ec01cc00070033d0fc01cc00070033d0fc01cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00100033fb00003cdc00063fffff8000cc00100033fb00003cdc00063fffff8000cc00230033fb0000c3fc000807c7c3c7c0187e0180f1000d180000180001803000018000cc00230033fb0000c3fc000807c7c3c7c0187e0180f1000d180000180001803000018000cc00250033fc00020300c0fd000006fe66046078060780f1000d180000180001803000018000cc00250033fc00020300c0fd000006fe66046078060780f1000d180000180001803000018000cc00250033fc00020c0030fd000006fe660460180c0180f1000d180f0f198f0f803000018000cc00250033fc00020c0030fd000006fe660460180c0180f1000d180f0f198f0f803000018000cc00250033fc000230000cfd000807c7c667c018180180f1000d1819999b1999803000018000cc00250033fc000230000cfd000807c7c667c018180180f1000d1819999b1999803000018000cc00250033fc0002c00003fd00080606c6666018180180f1000d1819981e1f99803000018000cc00250033fc0002c00003fd00080606c6666018180180f1000d1819981e1f99803000018000cc00270033fd000003fe0000c0fe0008060666666018300180f1000d1819999b1819803000018000cc00270033fd000003fe0000c0fe0008060666666018300180f1000d1819999b1819803000018000cc00270033fd00000cfe000030fe0008060663c7c67e3067e0f1000d1f8f0f198f0f803000018000cc00270033fd00000cfe000030fe0008060663c7c67e3067e0f1000d1f8f0f198f0f803000018000cc00140033fd00043000003c0cde00063fffff8000cc00140033fd00043000003c0cde00063fffff8000cc000f0033fd0004c00000c3c3d90001cc000f0033fd0004c00000c3c3d90001cc00110033fe0006030000033030c0da0001cc00110033fe0006030000033030c0da0001cc000f0033fd0004c0000ccc0fd90001cc000f0033fd0004c0000ccc0fd90001cc00100033fd00053003fffc03fcda0001cc00100033fd00053003fffc03fcda0001cc001e0033fd000b0c000cf000fc00000410003efb000401801e001eeb0001cc001e0033fd000b0c000cf000fc00000410003efb000401801e001eeb0001cc001e0033fd000b0300030000fc000006300033fb00040780260026eb0001cc001e0033fd000b0300030000fc000006300033fb00040780260026eb0001cc00200033fc0015c000fffffc000007733033363c3e6c7dfc0180663e66eb0001cc00200033fc0015c000fffffc000007733033363c3e6c7dfc0180663e66eb0001cc001f0033fc001230000c00fc000007f3303e38666670cdb60180fe66eb0001cc001f0033fc001230000c00fc000007f3303e38666670cdb60180fe66eb0001cc001e0033fc00020c0030fd000b06b3703030666660cdb60180fe66eb0001cc001e0033fc00020c0030fd000b06b3703030666660cdb60180fe66eb0001cc001f0033fc00020300c0fd000e0631b03030663e60cdb60180646664eb0001cc001f0033fc00020300c0fd000e0631b03030663e60cdb60180646664eb0001cc001d0033fb0000c3fc00010632fe30093c46607db607e6783e78eb0001cc001d0033fb0000c3fc00010632fe30093c46607db607e6783e78eb0001cc00140033fb00003cfb000101e0fe00003ce30001cc00140033fb00003cfb000101e0fe00003ce30001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc001f0033fb000b318c0006000003c3c063c3c0fe00013830fe0000c0eb0001cc001f0033fb000b318c0006000003c3c063c3c0fe00013830fe0000c0eb0001cc001e0033fb000b330000060000066660c66660fe000018fe0000c0ea0001cc001e0033fb000b330000060000066660c66660fe000018fe0000c0ea0001cc00210033fb0016361c7c3e60000606018666003e7c7c1870f0f9f1c3c7c0ed0001cc00210033fb0016361c7c3e60000606018666003e7c7c1870f0f9f1c3c7c0ed0001cc00210033fb000b3c0c6666000006e3c30663c0fe660718319998c0c66660ed0001cc00210033fb000b3c0c6666000006e3c30663c0fe660718319998c0c66660ed0001cc00210033fb000b360c66660000066066066060fe660718318198c0c66660ed0001cc00210033fb000b360c66660000066066066060fe660718318198c0c66660ed0001cc00210033fb000b330c6666000006666c066660fe660718319998d8c66660ed0001cc00210033fb000b330c6666000006666c066660fe660718319998d8c66660ed0001cc00210033fb0016319e663e600003c3c803c3c03e7c7c3c78f0f871e3c660ed0001cc00210033fb0016319e663e600003c3c803c3c03e7c7c3c78f0f871e3c660ed0001cc000c0033ee00016060e50001cc000c0033ee00016060e50001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00230033fb00010f0cfd00060183c01e303e03fb0003061818c0fe0002c60030f30001cc00230033fb00010f0cfd00060183c01e303e03fb0003061818c0fe0002c60030f30001cc00260033fb00011980fd000907866033333003000180fe00031e199980fe0002c00030f30001cc00260033fb00011980fd000907866033333003000180fe00031e199980fe0002c00030f30001cc00270033fb001c181c7e3c600001806033333e03e333e1e1e00006199b0078f807ce1e33f30001cc00270033fb001c181c7e3c600001806033333e03e333e1e1e00006199b0078f807ce1e33f30001cc00270033fb001c0f0c0c6600000180c01e33030333318333000006199e00cccc0cc63036f30001cc00270033fb001c0f0c0c6600000180c01e33030333318333000006199e00cccc0cc63036f30001cc00270033fb001c018c187e0000018180333f0303337183f1e000061f9b00cccc0cc61e3cf30001cc00270033fb001c018c187e0000018180333f0303337183f1e000061f9b00cccc0cc61e3cf30001cc00270033fb001c198c306000000183003303330331b1b300300006019980cccc0cc60336f30001cc00270033fb001c198c306000000183003303330331b1b300300006019980cccc0cc60336f30001cc00270033fb000e0f1e7e3c600007e7e31e031e03e230fee10a801f8198c078cc07cf1e33f30001cc00270033fb000e0f1e7e3c600007e7e31e031e03e230fee10a801f8198c078cc07cf1e33f30001cc00130033f3000006fd000401e0000003e80001cc00130033f3000006fd000401e0000003e80001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc001e0033f5000103c0fe000e0600300000c1e1e1e000180180001ff00001cc001e0033f5000103c0fe000e0600300000c1e1e1e000180180001ff00001cc001d0033f500010660fc000d301803c333333000180180001980f10001cc001d0033f500010660fc000d301803c333333000180180001980f10001cc00200033f500150603c7c666ce1f3e3e00c33330300018f1f1f0198f0ff20001cc00200033f500150603c7c666ce1f3e3e00c33330300018f1f1f0198f0ff20001cc00210033f5001606066666670633331800c3333060001999999819999980f30001cc00210033f5001606066666670633331800c3333060001999999819999980f30001cc00210033f5001606066666e60633331800c1f1f0c0001999999819999f80f30001cc00210033f5001606066666e60633331800c1f1f0c0001999999819999f80f30001cc00200033f5000e0666666366061f331b00c030318001fe990398199998f20001cc00200033f5000e0666666366061f331b00c030318001fe990398199998f20001cc00200033f5001503c3c7c4660f23330e03f1e1e3f180f0f199981f0f0ff20001cc00200033f5001503c3c7c4660f23330e03f1e1e3f180f0f199981f0f0ff20001cc00130033f300040603c0001efb000003ea0001cc00130033f300040603c0001efb000003ea0001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00270033fe00001efc00040600000410fe000060fef00c01800000060000780f8c00f882f20001cc00270033fe00001efc00040600000410fe000060fef00c01800000060000780f8c00f882f20001cc00290033fe000033fe001a30000600000630000001e1999998018000001e0000cc0c0cc0ccc6f20001cc00290033fe000033fe001a30000600000630000001e1999998018000001e0000cc0c0cc0ccc6f20001cc00290033fe001e30363c3e7c3c3e60000771e3e0006199981801999f000600000ccf8cc0cceef20001cc00290033fe001e30363c3e7c3c3e60000771e3e0006199981801999f000600000ccf8cc0cceef20001cc00290033fe001e30386666306666000007f333300061999830019999800600001800ccc0f8fef20001cc00290033fe001e30386666306666000007f333300061999830019999800600001800ccc0f8fef20001cc00290033fe001e30307e66307e66000006b333300060f8f860019999800600003000cfc0c0d6f20001cc00290033fe001e30307e66307e66000006b333300060f8f860019999800600003000cfc0c0d6f20001cc00290033fe001a3330606636606600000633333000601818c019999980060000600cfec000c6f20001cc00290033fe001a3330606636606600000633333000601818c019999980060000600cfec000c6f20001cc00290033fe001e1e303c3e1c3c3e60000631e33181f8f0f1f80f0f99801f8c00fcc780c0c0c6f20001cc00290033fe001e1e303c3e1c3c3e60000631e33181f8f0f1f80f0f99801f8c00fcc780c0c0c6f20001cc000f0033f2000003f7000018eb0001cc000f0033f2000003f7000018eb0001cc00070033d00001cc00070033d00001cc0098003400c800000102019800c800000102019800c80000010201980001070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00290e33000004100031838c000600000410fe000060fef00c01800000060000780c0780f882f20001cc00290e33000004100031838c000600000410fe000060fef00c01800000060000780c0780f882f20001cc002922330000063000300600000600000630000001e1999998018000001e0000c00ccc00ccc6f20001cc002922330000063000300600000600000630000001e1999998018000001e0000c00ccc00ccc6f20001cc0029223300000771e1f38f9c3c3e60000771e3e0006199981801999f00060000f8cccf80cceef20001cc0029223300000771e1f38f9c3c3e60000771e3e0006199981801999f00060000f8cccf80cceef20001cc00292233000007f33331860c6666000007f33330006199983001999980060000cc0cccc0f8fef20001cc00292233000007f33331860c6666000007f33330006199983001999980060000cc0cccc0f8fef20001cc00292233000006b33331860c7e66000006b333300060f8f86001999980060000cc0fccc0c0d6f20001cc00292233000006b33331860c7e66000006b333300060f8f86001999980060000cc0fccc0c0d6f20001cc00292233000006333331860c606600000633333000601818c019999980060000cc00ccc0c0c6f20001cc00292233000006333331860c606600000633333000601818c019999980060000cc00ccc0c0c6f20001cc0029223300000631e1f3c61e3c3e60000631e33181f8f0f1f80f0f99801f8c0078c0c780c0c6f20001cc0029223300000631e1f3c61e3c3e60000631e33181f8f0f1f80f0f99801f8c0078c0c780c0c6f20001cc000f0033f2000003f7000018eb0001cc000f0033f2000003f7000018eb0001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc00070033d00001cc000c0133f0f8000007dbff01cc000c0133f0f8000007dbff01cc001601300cf800010c30f8000130c0f80000c0f100010c001601300cf800010c30f8000130c0f80000c0f100010c002003300c000ffc00071c000c300000c330fc000330c001e0fa0000c0f100010c002003300c000ffc00071c000c300000c330fc000330c001e0fa0000c0f100010c002304300c001980fd00070c000c300000c330fc000330c00330fc00026000c0f100010c002304300c001980fd00070c000c300000c330fc000330c00330fc00026000c0f100010c002821300c00180f1f0f1b1f0c000c300000db3e1e363c000030c00301e7f3f878f8f800c0f100010c002821300c00180f1f0f1b1f0c000c300000db3e1e363c000030c00301e7f3f878f8f800c0f100010c002803300c001bfe991a9c330c000c300000db33333866000030c0030336db6ccccc6000c0f100010c002803300c001bfe991a9c330c000c300000db33333866000030c0030336db6ccccc6000c0f100010c002821300c00199f999f98330c000c300000db333f307e000030c0030336db6cfccc6000c0f100010c002821300c00199f999f98330c000c300000db333f307e000030c0030336db6cfccc6000c0f100010c002821300c001998199818330c000c3000006633303060000030c0033336db6cc0cc6c00c0f100010c002821300c001998199818330c000c3000006633303060000030c0033336db6cc0cc6c00c0f100010c002821300c000f0f198f181f1e000c30000066331e303c000030c001e1e6db6c78cc3800c0f100010c002821300c000f0f198f181f1e000c30000066331e303c000030c001e1e6db6c78cc3800c0f100010c001601300cf800010c30f8000130c0f80000c0f100010c001601300cf800010c30f8000130c0f80000c0f100010c0017013007f80001381cf80001e070f900010380f100010c0017013007f80001381cf80001e070f900010380f100010c0016013001f8ff01e007f8ff01801ff9ff00fef000010c0016013001f8ff01e007f8ff01801ff9ff00fef000010c00070030d000010c00070030d000010c0007003fd0ff01fc0007003fd0ff01fc0002cd0002cd00a0008fa00083ff}}{\f4 \par \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure 17-2:  What the Finder Shows\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The Finder also uses this resource to keep track of some icon information.  For example, if you change the icons and release a new version of your program, and keep track of the version numbers properly, the Finder automatically updates some internal files containing your icons.\par As for the resource itself, the first number is the major release number.  From the time you start working on your program until the first release of the program, this should be 1.  Technically, it\rquote s up to you when you change this to a 2.  Personally, I only change the major revision number when a program changes so much that it writes data in a way that older versions cannot handle, or when I feel like I have to release a whole new book to describe all of the changes.  A lot of other people are pretty free with major version numbers, though, changing them for almost any new release.\par The second number is the minor release number.  This should be 0 up until the first release.  I generally change this number whenever the program changes in any way the user can see.  For example, when I added support for CDevs in ORCA/C, the version number went from 1.2 to 1.3.\par The next number is the bug fix level.  This number should start at 0 and be increased for any release that changes anything, unless the version number or minor version number is changed.  For example, ORCA/C 1.3 had some bug fixes, but since I was changing the version number from 1.2, this bug fix digit stayed at 0.  (The full version number for 1.3 would be 1.3.0, but I don\rquote t usually type the bug fix digit if it is zero.)\par The next field tells the Finder what release stage you\rquote re at.  I\rquote ll go over the various legal values, and give you one interpretation of how to use them.\par \par }\pard \qj\fi-1980\li2340\widctlpar\adjustright {\f6\fs20 development}{\f4 \tab The development stage is the point when you\rquote re writing the program.\par }{\f6\fs20 alpha}{\f4 \tab The alpha stage starts when the program is far enough along in the development cycle to be useful.  By this point, all of the features you planned to put in should be there, and most or all of the bugs should be gone.  In a large company, a good way to think about alpha is that it\rquote s when the programmer thinks he\rquote s done.  This is when testers and upper management starts getting involved in a big way.  (Some testers are generally involved from the very beginning, but this is the point when the testing starts getting serious.  On a large project, this is when more testers are added.)\par }{\f6\fs20 beta}{\f4 \tab Beta is the stage when the managers agree with the programmer.  By this time, some changes have been made based on the comments from people inside the company, and a few trusted outside testers have also tried the program and made some comments.  The beta release is generally sent to quite a few testers outside the company.  This is when the program is put through its paces by some carefully selected \ldblquote real users.\rdblquote   There should be no known bugs by the time this stage is released.  The documentation should be finished.  If the development team has done its job well, there won\rquote t be many bugs found, and the beta testers won\rquote t ask for many changes to the program.\par }{\f6\fs20 final}{\f4  or }{\f6\fs20 release}{\f4 \tab Either of these values are used for the final, commercial release of the program.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Of course, you might not need all of these stages.  If you\rquote re writing a freeware game, for example, you might use the development stage until you finish, then bump the designation to final when you post the program online.\par During the development cycle, the main version number should be 1.0.0.  The field after the release stage is used to keep track of the release number for a particular stage.  It goes up by one each time you release a new version of the program at the same stage, and is set back to zero when the stage advances.  This field gets set back to 0 permanently when the program is released.\par The region code tells the Finder which country or area the program is intended for.  This helps keep track of special versions that are used with special character sets, languages, or keyboards.  Here are the values that are available as of System Disk 6.0:\par \par }\pard \qj\widctlpar\tx360\tx2520\tx4680\tx6840\adjustright {\f6\fs20 \tab verUS\tab verFrance\tab verBritain\tab verGermany\tab verItaly\tab verNetherlands\tab verBelgiumLux\tab verFrBelgiumLux\tab verSweden\tab verSpain\tab verDenmark\tab verPortugal\tab verFrCanada\tab verNorway\tab verIsrael\tab verJapan\tab verAustralia\tab verArabia\tab verArabic\tab verFinland\tab verFrSwiss\tab verGrSwiss\tab verGreece\tab verIceland\tab verMalta\tab verCyprus\tab verTurkey\tab verYugoslavia\tab verYugoCroatian\tab verIndia\tab verIndiaHindi\tab verPakistan\tab verLithuania\tab verPoland\tab verHungary\tab verEstonia\tab verLatvia\tab verLapland\tab verFaeroeIsl\tab verIran\tab \tab verRussia\tab verIreland\tab verKorea\tab verChina\tab \tab verTaiwan\tab verThailand}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 Frankly, I doubt if some of those places even have an Apple II}{\f4\fs20 GS}{\f4 , but you never know!\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The last two fields are text strings.  You can put anything you want there, or even leave them blank.  The Finder itself uses these fields for the name of the program and the copyright for the program.\par {\*\bkmkend bk94}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rVersion resource}{\rxe bk94}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 The }{\b\f6 rBundle}{\b\f4  Resource}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 The }{\b\v\f6 rBundle}{\b\v\f4  Resource\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\*\bkmkstart bk95}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 icons}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Finder icons}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Finder also looks for an }{\f6\fs20 rBundle}{\f4  resource in your application\rquote s resource fork.  The }{\f6\fs20 rBundle}{\f4  resource serves two different purposes.  First, it tells the Finder what icon to show then the user sees the application itself in a folder or on the desktop.  Second, it tells the Finder what kind of application files the program can handle, and exactly how they are handled.\par When the Finder runs your application for the first time, it looks for this resource.  Assuming it finds one, it collects the }{\f6\fs20 rBundle}{\f4  resource and puts it in a local data table.  This local data table is in a file, so the Finder doesn\rquote t normal ever look at the }{\f6\fs20 rBundle}{\f4  resource again \endash  it uses its own, internal copy.  That\rquote s why the }{\f6\fs20 rVersion}{\f4  resource is so important: it tells the Finder that the application has changed, so the Finder will reread your }{\f6\fs20 rBundle}{\f4  resource.\par Once the Finder has read the }{\f6\fs20 rBundle}{\f4  resource, it uses the icon you give it when it displays your program in a folder or on the desktop.\par The other thing that\rquote s in the }{\f6\fs20 rBundle}{\f4  resource is one or more structures called }{\f6\fs20 oneDoc}{\f4  structures.  Each }{\f6\fs20 oneDoc}{\f4  structure tells the Finder about one kind of data file your program can handle.  You can get pretty detailed here, right down to telling the Finder that you can handle a specific file type, auxiliary file type, file name, a specific creation date and so forth.  You can also tell the Finder whether your program created the document, or is just able to handle it.  Finally, you can give the Finder an icon to use when the document is displayed on the desktop.  The Finder uses all of this information for two things.  The first, obviously, is when it shows the file on the desktop, and uses the icon you give it.  The other use is when the user double-clicks on a document.  When that happens, the Finder scans all of the }{\f6\fs20 oneDoc}{\f4  structures it knows about, trying to find some application that can deal with the document.  If it finds one, it runs the application and passes a message.  (We\rquote ll see how your program can use that message later in the lesson.)  If there aren\rquote t any applications that can deal with the document, the Finder lets the user look for one.\par Listing 17-3 shows a sample }{\f6\fs20 rBundle}{\f4  resource.  We\rquote ll spend the rest of this section going over this sample in detail, talking about the various options and how the information is actually used by the Finder.\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rBundle (1, preload, nospecialmemory) \{\par    1001,                          /* rIcon ID for application or NIL */\par    1,                             /* rBundle ID of this rBundle */\par    \{                              /* first oneDoc structure */\par       \{\par          $0081,                   /* bit 0 = launch this = boolean */\par                                   /* bits 4-7 = voting clout */\par          \{0\},                     /* rFinderPath ID for this document */\par          \{1002\},                  /* rIcon ID for large icon for document */\par          \{1003\},                  /* rIcon ID for small icon for document */\par          "",                  /* string to describe this type of document */\par          \},\par       $00000003,                  /* match field bits*/\par       MatchFileType \{\{$D8\}\},      /* file type to match */\par       MatchAuxType \{              /* auxiliary file type to match */\par          \{$FFFFFFFF,$00000002\}\par          \},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\}\par       \}\par    \{                              /* second oneDoc structure */\par       \{\par          $0021                    /* bit 0 = launch this = boolean */\par                                   /* bits 4-7 = voting clout */\par          \{0\},                     /* rFinderPath ID for this document */\par          \{1004\},                  /* rIcon ID for large icon for document */\par          \{1005\},                  /* rIcon ID for small icon for document */\par          "",                  /* string to describe this type of document */\par          \},\par       $00000001,                  /* match field bits*/\par       MatchFileType \{\{$D6\}\},      /* file type to match */\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\}\par       \}\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 17-3:  A Sample }{\f6\fs20 rBundle}{\f4  Resource\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There\rquote s a lot to talk about in this resource, so we\rquote ll go over everything through the first }{\f6\fs20 oneDoc}{\f4  structure line by line.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 1001,                       /* rIcon ID for application or NIL */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This is the resource ID for an }{\f6\fs20 rIcon}{\f4  resource.  The Finder will use this icon when it shows your application.  You can use a 0 instead of a resource ID for an icon; in that case, the Finder uses the default application icon.\par There\rquote s nothing special about the }{\f6\fs20 rIcon}{\f4  resource itself.  It\rquote s defined and used just like the icon in an icon button control.  The only thing to keep in mind is that the Finder can align icons on a grid, and if you make your program\rquote s icon too big, it can hang off of the edge of the window or overlap with other icons.  To avoid that, make sure the icon is no more than 22 pixels high.  The width isn\rquote t usually a problem.\par As I write this course, there aren\rquote t any icon editors around that are designed specifically for creating icons for }{\f6\fs20 rBundle}{\f4  resources.  On the other hand, you can always create an icon button with a program like Design Master, have it write out the result as a Rez source file, and use just the }{\f6\fs20 rIcon}{\f4  part for your program\rquote s icon.\par As of Finder 6.0, this field is ignored.  You can use a oneDoc structure to create a program icon, but Apple recommends coding this icon, too, since future versions of the Finder will hopefully use this field.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 1,                             /* rBundle ID of this rBundle */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This is the resource id for this resource.  The Finder uses this field for its own purposes.  You should always set it to 1.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20 \{                              /* first oneDoc structure */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As I said earlier, the }{\f6\fs20 oneDoc}{\f4  structures tell the Finder what sort of document files your program can deal with.  You can have as many of these as you want, and may need more than one.  For example, if you are adding a }{\f6\fs20 oneDoc}{\f4  structure to your text editor, it\rquote s pretty obvious that it can handle your own file type, with a minor change or two,  it can handle standard text files,and source code files.  To tell the Finder about both possibilities, you need two }{\f6\fs20 oneDoc}{\f4  structures.  To create two }{\f6\fs20 oneDoc}{\f4  structures, you just pop in another one right after the first, just like you see in the sample.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20    \{\par       $0081                   /* bit 0 = launch this = boolean */\par                               /* bits 4-7 = voting clout */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The first entry in the }{\f6\fs20 oneDoc}{\f4  structure is a flag word.  The least significant bit is 1 if the Finder should launch your program when the user double-clicks on the document, and 0 if you are just creating an icon.  For example, you might want to create an icon for a preferences file, but not actually launch the program if the user picks the file.  In that case, the least significant bit should be 0.\par Bits 4-7 are the voting clout for the program.  This is where you tell the Finder what you can do with the file.\par \par }\pard \qj\fi-1080\li1440\ri360\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 bit\tab use\par }\pard \qj\fi-1080\li1440\ri360\widctlpar\adjustright {\f4 7\tab This is the highest priority of all.  If you set bit 7, you are telling the Finder that you are the owner of the file type.  Normally you would only set this bit if you reserve a specific file type for the files for your program.  For example, AppleWorks GS should lay claim to all of the AppleWorks GS specific file types.\par 6\tab This bit says your program knows exactly what to do with the file, and can read and write the file.  When the user double-clicks on a document, the Finder will try to run the program that claims ownership with bit 7, but failing that, the Finder will try to find some program that sets bit 6, claiming that it can read and write the file.  For example, if you updated your word processor to handle text files, it should set this bit for text files and source files.\par 5\tab This bit says you can read the file, and may be able to write it \endash  but not necessarily using the same format.  The Finder will pick you in a pinch.\par 4\tab Setting this bit says you can read the file, but that\rquote s about it.  If the Finder is really desperate, and can\rquote t find anyone else to deal with the file, it will use your program.  You might use this bit, for example, with your instrument player from the last lesson, telling the Finder you can play the file.  If a music editor is around, though, it will have a higher priority, since it can read and write the file, and the Finder will pick it first.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par (Voting isn\rquote t actually implemented in Finder 6.0, but the voting bits should be set anyway, since voting may be implemented at some point in the future.)\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       \{0\},                 /* rFinderPath ID for this document */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Finder uses this field to keep track of your program once the }{\f6\fs20 rBundle}{\f4  resource is moved to the Finder\rquote s internal table.  You should set it to 0 in your resource definition.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       \{1002\},          /* rIcon ID for large icon for document */\par       \{\{1003\}\},        /* rIcon ID for small icon for document */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You can define a resource for the document here, giving the Finder two }{\f6\fs20 rIcon}{\f4  resource numbers.  The first is used when the document is shown using a full-size icon, and the second is used when the Finder is displaying small icons.  You can also use 0 for either or both entries, telling the Finder to use the default icon.\par Normally you will only set up an icon if you own the file, letting the real owner define the icon if you have a voting priority less than 7.  If you do define the icons, the large icon should generally be 22 pixels high or less, while the small icon should be 8 pixels high and 16 to 80 pixels wide.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       "",          /* string to describe this type of document */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Finder has a file it can read to find a short text description for various file types; the result is displayed in the Kind entry when you ask for information about the icon.  If you can give a better description than the one the Finder will normally use, put it here.  If you can\rquote t use a null string, like you see in this example.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20    $00000003,                  /* match field bits*/\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 So far, all of the fields in the }{\f6\fs20 oneDoc}{\f4  structure have been used to tell the Finder what to do with a particular file.  The rest of the }{\f6\fs20 oneDoc}{\f4  structure tells the Finder what file we\rquote re talking about.\par There are a lot of different ways you can tell the Finder what files you are referring to, and I\rquote m not going to go over all of them here.  After all, it\rquote s not likely that most of you are going to try to match a particular creation date right away.  Instead, I\rquote ll show you how to use the two most common file selectors, then I\rquote ll list the others that are available as of Finder 6.0.  If you want to use one of the other file selectors you can find all of the technical information you need in }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par The first of the file matching fields is the flag long word you see above.  Each of the bits is used to tell the Finder that you will use one particular kind of file selector.  In this case, bits 0 and 1 are set.  Bit 0 is set when you are telling the Finder to pick a particular file type, and bit 1 is set to tell the Finder you will also be selecting the file based on the auxiliary file type.  The Finder will only consider a file a match to this }{\f6\fs20 oneDoc}{\f4  structure if both the file type and auxiliary file type match.\par Of course, all you\rquote ve done here is to tell the Finder what to expect next.  The actual values to use come right after this flag long word.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20    MatchFileType \{\{$D8\}\},      /* file type to match */\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field tells the Finder which file type the current }{\f6\fs20 oneDoc}{\f4  record refers to.  You don\rquote t actually have to select the file by the file type, but in practice the file type is almost always used.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20    MatchAuxType \{              /* auxiliary file type to match */\par       \{$FFFFFFFF,$00000002\}\par       \},\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This field matches an auxiliary file type, but it does it in sort of an odd way.  You might want to handle some, but not all, auxiliary file types, so the Finder lets you mask out certain bits.  When the Finder is trying to decide if this }{\f6\fs20 oneDoc}{\f4  structure refers to a file that is being opened, it starts by anding the file\rquote s auxiliary file type with the first value in this entry.  In this case, the mask has all of the bits set, so the result is just the original value.  The Finder compares the result to the second entry; if they match, the Finder passes the file.  Assuming all of the other tests pass, too, the Finder applies this }{\f6\fs20 oneDoc}{\f4  structure to the file.\par \par }\pard \li180\keepn\widctlpar\adjustright {\b\f6\fs20       empty \{\}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 These lines tell the resource compiler that you aren\rquote t defining the rest of the tests.  You do have to have the right number of entries, so for each test you leave out, there must be one line like this one.\par Here\rquote s a short summary of the other tests that are available in Finder 6.0.  Again, for details, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par \par }\pard \qj\fi-2520\li2880\widctlpar\adjustright {\f6\fs20 matchFilename}{\f4 \tab Match a particular file name.  You can use wild cards.\par }{\f6\fs20 matchCreateDateTime}{\f4 \tab Match a particular creation date.  This doesn\rquote t have to be an exact match; you can match files that are more recent than a certain date, or files that are older than a certain date.\par }{\f6\fs20 matchModDateTime}{\f4 \tab Match a particular modification date.  Again, you can check for files that are more recent than a certain date, or files that are older than a certain date.\par }{\f6\fs20 matchLocalAccess}{\f4 \tab Match files with specific access bits set.  For example, you could match only files that need to be backed up.\par }{\f6\fs20 matchNetworkAccess}{\f4 \tab Files on a network can have different access bits set.  This field lets you match the access bits for the network, as opposed to the local access bits.\par }{\f6\fs20 matchExtended}{\f4 \tab Match files that have a resource fork.\par }{\f6\fs20 matchHFSFileType}{\f4 \tab Match files based on the HFS file type.\par }{\f6\fs20 matchHFSCreator}{\f4 \tab Match files based on the HFS creator.  (This is sort of like the ProDOS FST\rquote s auxiliary file type.)\par }{\f6\fs20 matchOptionList}{\f4 \tab Match based on fields in the option list for a file.\par }{\f6\fs20 matchEOF}{\f4 \tab Match files of a certain size.  As with dates, you can do comparisons.  For example, you can pick all files that are longer than some value, or all files that are shorter than some value.\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk95}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rBundle resource}{\rxe bk95}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Desktop File}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Desktop File\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 desktop file}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 icons}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 As of System 6.0, when the Finder runs a program with an }{\f6\fs20 rBundle}{\f4  and }{\f6\fs20 rVersion}{\f4  resource, it actually saves some information about the program in a file named DeskTop, located in a folder called Icons on the same disk as the application.  As you develop, delete, and change applications, this file will eventually fill up with old information, not all of which you need.  Especially on your development disks or partitions, you should delete this folder from time to time to free up all of the old stuff.  (Hopefully someday some utilities will be available to clean up this file \endash  that\rquote s a hint!)  You might also want to delete this file if you\rquote ve made some changes that just don\rquote t seem to be registering when you use your program.\par Deleting the DeskTop file wipes out all of the things the Finder knows about programs on the disk or partition, so you will have to run all applications again before the Finder will realize they exist and save the appropriate information in a new desktop file.\par \par Problem 17-1:  Add an }{\f6\fs20 rBundle}{\f4  and }{\f6\fs20 rVersion}{\f4  resource to the instrument sampler you created in Problem 16-3.  Tell the Finder your program can handle files with a file type of 0xD8 and an auxiliary file type of 0x0002, but set your voting status to 4.\par Use the following icons.  Icon 1001 is for your program, icon 1002 is the large icon for file type 0xD8, and icon 1003 is the small icon for file type 0xD8.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rIcon (1001, preload, nospecialmemory) \{\par    $8000,                        /* Icon Type bit 15  1 = color, 0 = mono */\par    21,                                /* height of icon in pixels */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    24,                                /* width of icon in pixels */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"FFFFFFFFFF00FFFFF0000FFF"        /* icon image */\par    $"FFFFFFFFF0FF00000FFFFFFF"\par    $"FFFFFFFF0FFF00FFFFFFFFFF"\par    $"FFFFFFF0FFFF000FFF0000FF"\par    $"FFFFFF0FFFFF000000FFFFFF"\par    $"FFFFF0FFFFFF00FF0FFFFFFF"\par    $"FFFF0FFFFFFF00FFF0FFFFFF"\par    $"FFF0FFFFFFFF00FFFF0FFFFF"\par    $"FF0FFFFFFFFF00FFFFF0FFFF"\par    $"F0FFFFFFFFFF00FFFFFF0FFF"\par    $"0FFFFFFFFFFF00FFFFFFF0FF"\par    $"F0FFFFFFFFFF00FFFFFF0FFF"\par    $"FF0FFFFFFFFF00FFFFF0FFFF"\par    $"FFF0FFFF000000FFFF0FFFFF"\par    $"FFFF0FF0000000FFF0FFFFFF"\par    $"FFFFF0FF00000FFF0FFFFFFF"\par    $"FFFFFF0FFFFFFFF0FFFFFFFF"\par    $"FFFFFFF0FFFFFF0FFFFFFFFF"\par    $"FFFFFFFF0FFFF0FFFFFFFFFF"\par    $"FFFFFFFFF0FF0FFFFFFFFFFF"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"FFFFFFFFFF00FFFFFFFFFFFF",\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"0000000000FF00000FFFF000"          /* icon mask */\par    $"000000000FFFFFFFF0000000"\par    $"00000000FFFFFF0000000000"\par    $"0000000FFFFFFFF000FFFF00"\par    $"000000FFFFFFFFFFFF000000"\par    $"00000FFFFFFFFFFFF0000000"\par    $"0000FFFFFFFFFFFFFF000000"\par    $"000FFFFFFFFFFFFFFFF00000"\par    $"00FFFFFFFFFFFFFFFFFF0000"\par    $"0FFFFFFFFFFFFFFFFFFFF000"\par    $"FFFFFFFFFFFFFFFFFFFFFF00"\par    $"0FFFFFFFFFFFFFFFFFFFF000"\par    $"00FFFFFFFFFFFFFFFFFF0000"\par    $"000FFFFFFFFFFFFFFFF00000"\par    $"0000FFFFFFFFFFFFFF000000"\par    $"00000FFFFFFFFFFFF0000000"\par    $"000000FFFFFFFFFF00000000"\par    $"0000000FFFFFFFF000000000"\par    $"00000000FFFFFF0000000000"\par    $"000000000FFFF00000000000"\par    $"0000000000FF000000000000"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rIcon (1002, preload, nospecialmemory) \{\par    $8000,                        /* Icon Type bit 15  1 = color, 0 = mono */\par    16,                                /* height of icon in pixels */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    16,                                /* width of icon in pixels */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"00000000000000FF"                /* icon image */\par    $"0FFFFFFFFFFF0F0F"\par    $"0FFFFFFFFFFF0FF0"\par    $"0FFFFFFF000F0000"\par    $"0FFFFF000FFFFFF0"\par    $"0FFFFF00F000FFF0"\par    $"0FFFFF0000FFFFF0"\par    $"0FFFFF00FFFFFFF0"\par    $"0FFFFF00FFFFFFF0"\par    $"0FFFFF00FFFFFFF0"\par    $"0FFFFF00FFFFFFF0"\par    $"0FFF0000FFFFFFF0"\par    $"0FF00000FFFFFFF0"\par    $"0FFF000FFFFFFFF0"\par    $"0FFFFFFFFFFFFFF0"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"0000000000000000",\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"FFFFFFFFFFFFFF00"                  /* icon mask */\par    $"FFFFFFFFFFFFFFF0"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par    $"FFFFFFFFFFFFFFFF"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rIcon (1003, preload, nospecialmemory) \{\par    $8000,                        /* Icon Type bit 15  1 = color, 0 = mono */\par    8,                                 /* height of icon in pixels */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    8,                                 /* width of icon in pixels */\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"0000000F"                        /* icon image */\par    $"0FFF00F0"\par    $"0FFF0000"\par    $"0FFF0FF0"\par    $"0F000FF0"\par    $"0FF00FF0"\par    $"0FFFFFF0"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    $"00000000",\par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    $"FFFFFFF0"                          /* icon mask */\par    $"FFFFFFFF"\par    $"FFFFFFFF"\par    $"FFFFFFFF"\par    $"FFFFFFFF"\par    $"FFFFFFFF"\par    $"FFFFFFFF"\par    $"FFFFFFFF"\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 17-4:  }{\f6\fs20 rIcon}{\f4  Resources for Problem 17-1\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 GS/OS Aware Bits}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 GS/OS Aware Bits\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GS/OS aware bits}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are a lot of programs around for the Apple II}{\f4\fs20 GS}{\f4  that were written before System Disk 4.0, when Apple introduced GS/OS.  GS/OS handles prefixes differently than the older ProDOS 16 file system, and allows much longer path names.  Your programs can handle the longer prefixes, but so far don\rquote t \endash  that\rquote s because you haven\rquote t told GS/OS that you are a modern program.  You do that by setting the auxiliary file type for your program.  The auxiliary file type is a flag long word; here are the bit definitions:\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 bits 31-16\tab Reserved; set to 0.\par bits 15-8\tab These bits should be set to 0xDB, telling GS/OS that the next 7 bits are valid.\par bits 7-3\tab Reserved; set to 0.\par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 message center}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 bit 2\tab Set this bit if your program handles message center messages.  It doesn\rquote t, yet, but will in a moment!\par bit 1\tab Set this bit to 1 for all desktop applications.  This bit should be clear for text applications.\par bit 0\tab Set this bit if your program handles the long, GS/OS style path names.  All of the programs from this course do.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You can set the auxiliary file type several different ways, but the method varies with the various versions of the programming languages.  See your reference manual for details.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Formatting Disks}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Formatting Disks\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 initializing disks}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 formatting disks}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HandleDiskInsert}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Let\rquote s say you\rquote re using a program, and run out of space on your work disk.  The natural thing to do is to pop in a new disk, right?  Of course, that doesn\rquote t do much good unless the program will recognize the disk and give you a chance to format the new disk.  That\rquote s what }{\f6\fs20 HandleDiskInsert}{\f4  is for.  If you put this call:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 device = HandleDiskInsert(0xC000, 0);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 in your main event loop, the Window Manager will check the various disk drives for new disks, letting the user format any that need to be formatted.  }{\f6\fs20 device}{\f4  is a long integer; we don\rquote t need this result for anything, so you can put it in a junk variable and ignore the value.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are some other options for this call, but they aren\rquote t used in most programs.  For details, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Opening and Printing Files on Entry}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Opening and Printing Files on Entry\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk96}{\*\bkmkstart bk97}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Assuming you\rquote ve set bit 2 of the auxiliary file type for your program, like we talked about in the last section, the Finder will pass a message to your program when the user runs the program by opening a document.  If the user just runs your program, there won\rquote t be a message.  The message itself is a series of path names, along with a flag telling you if you should open the documents or print them.\par To get this message, create a handle for a moveable chunk of memory (it doesn\rquote t matter how big it is, so just create one with one byte) and call }{\f6\fs20 MessageCenter}{\f4 , like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 MessageCenter(getMessage, 1, msgHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The Tool Locator scans the message center to see if the Finder posted a message with a message type of 1.  If so, }{\f6\fs20 MessageCenter}{\f4  expands the handle you passed to the proper size and stuffs the message into the handle.  If there is no message, }{\f6\fs20 MessageCenter}{\f4  returns an error code of 0x0111.\par Assuming }{\f6\fs20 MessageCenter}{\f4  returns with no error, the next step is to get rid of the message, like this:\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 MessageCenter(deleteMessage, 1, msgHandle);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f4 This removes the message from the messages in the message center, so the message won\rquote t pop up again later.  The last parameter isn\rquote t actually used when you ask }{\f6\fs20 MessageCenter}{\f4  to delete a message, so the message you just read isn\rquote t damaged.  Incidentally, even through }{\f6\fs20 MessageCenter}{\f4  changed the size of this handle, it belongs to your program, so you need to dispose of it when you\rquote ve finished.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 The message you get back looks like this:\par \par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1800\adjustright {\f4 displacement\tab length (bytes)\tab use\par }\pard \qj\fi-2880\li3240\ri360\widctlpar\tx1800\adjustright {\f4 0\tab 4\tab Handle of the next message.  This is used by the message center; you should ignore it.\par 4\tab 2\tab Message type.  This will be 1, since you asked for message type 1.\par 6\tab 2\tab This value will be 0 if you are supposed to open the files, and 1 if the files should be printed.\par 8\tab varies\tab This is a string with a leading length byte.  The string is a full or partial path name for the file you are supposed to open or print.  There can be more than one of these strings!  Right after the last one, there will be a zero byte.  You can take this to mean a string of length 0, and that\rquote s a convenient way of dealing with it in the program, or you can take this to mean a separate field, which is how it\rquote s defined in the toolbox reference manual.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are two issues we need to discuss about this record: the mechanics of using it, and what you\rquote re actually supposed to do with the information.\par First, the mechanics.  The easiest way to deal with the record is to create two pointers, one defined as a pointer to a boolean, and the other defined as a pointer to a string, like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 BOOLEAN *bPtr;                          /* pointer to print flag */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 char *sPtr;                             /* pointer to file name */\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Start by locking the handle, then use pointer math to set the boolean pointer to point to the print flag, and the string pointer to the first path name, like this:\par \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 HLock(msgHandle);\par bPtr = (BOOLEAN *) (((unsigned long) (*msgHandle)) + 6);\par sPtr = (char *) (((unsigned long) bPtr) + 2);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Now you have a convenient way to use the information in the message.  To see if you are supposed to print the file, just dereference the first pointer.  When it comes time to open or print a file, check the length of the string pointed to by the second pointer.  If it\rquote s 0, you\rquote re done.  If it isn\rquote t, do whatever you are supposed to do with the file, then advance the string pointer to point to the next string by adding the length of the current string plus one to the pointer.\par If you are supposed to open the files, you should treat each of the file names as if the user had launched the program and immediately used the Open command to open the files.  There is one big difference you need to keep in mind, though: the message center is giving you a p-string, while SFO gives you a GS/OS path name.  You\rquote ll probably want to convert the p-string into a GS/OS string to handle this difference.  Once all of the files are open, drop into your main event loop.\par Printing files is a little different.  It\rquote s probably easiest to do a normal start-up on your program, the do an open-print-close sequence on each of the files that you are supposed to print.  You should not leave a file open after it is printed, for two reasons.  The first is that you could run out of memory trying to open all of the files.  The second is that you\rquote re program is supposed to quit as soon as all of the files are printed anyway, so there\rquote s no reason to run the risk of running out of memory.\par Whether you are supposed to open the files or print the files, don\rquote t forget to dispose of the message when you finish!\par {\*\bkmkend bk96}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 printing}{\rxe bk96}}}{\*\bkmkend bk97}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 message center}{\rxe bk97}}}{\v\f4 \par }{\f4 \par Problem 17-2:  Start with the result of Problem 17-1, and add message center support.  Your instrument sampler can only load one instrument at a time, so if there is more than one file in the message, warn the user.  It doesn\rquote t make much sense to print an instrument, either, so if the Finder asks you to print an instrument, put up an appropriate error dialog.\par Be sure to set the proper GS/OS aware bits so the Finder knows your program can use the message center.\par Also, add a call to }{\f6\fs20 HandleDiskInsert}{\f4  so your program will recognize new disks and give the user a chance to format them.\par {\*\bkmkend bk98}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Finder}{\rxe bk98}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In this lesson, you\rquote ve learned to put a professional touch on your programs.  You\rquote ve learned how to tell the Finder what documents your program can deal with, and you\rquote ve learned how to create programs that will open or print documents when the user picks those options from the Finder.  Your programs will recognize new disks and give the user a chance to format one.  You can also create icons, both for your program and for the document files it handles.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 AddResource\tab CloseResourceFile\tab HandleDiskInsert\tab MessageCenter\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 OpenResourceFile\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Resource types used for the first time in this lesson:\par \par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 rBundle\tab rComment\tab rVersion\par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Lesson 18 \endash  New Desk Accessories}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Lesson 18 \endash  New Desk Accessories}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Lesson 18 \endash  New Desk Accessories\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Goals for This Lesson}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Goals for This Lesson\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 {\*\bkmkstart bk99}{\*\bkmkstart bk100}{\*\bkmkstart bk101}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 New desk accessories are the mini-programs that show up under the Apple menu in most desktop programs.  This lesson shows you how to write a new desk accessory.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Anatomy of an NDA}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Anatomy of an NDA\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 New Desk Accessories are a rather interesting hybrid: they are sort of an application, and sort of not an application.  Desk accessories are available from any desktop program that is written in the normal way and doesn\rquote t go out of its way to keep you from using them.  Your program doesn\rquote t have to shut down when you use a desk accessory, either.\par There\rquote s really nothing to stop you from writing full-fledged applications that are desk accessories, but generally, desk accessories are small utility programs that are used while some other main application is running.\par The desk accessory itself isn\rquote t handled like a normal application at all.  The operating system knows about desk accessories right away, letting them do things as the computer boots.  Desk accessories get called as your program starts, too, so they can do things almost right away.  They also have to be able to shut down when the user picks Quit from the main application, and they get called then, too.\par There are a lot of ways that these different calls could have been handled, but as it turns out, the Apple II}{\f4\fs20 GS}{\f4  handles them by making desk accessories a lot different from standard applications.  Instead of a single entry point at the main body of the program, desk accessories have several entry points, one for each purpose.  The C compiler has to do several things behind your back to make all of that work, so you need to tell it right up front that you want to create a desk accessory, and not a standard application.  You do that using the }{\f6\fs20 nda}{\f4  pragma.  It looks like this:\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 nda pragma}}}{\v\f6\fs20 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 #pragma nda NDAOpen NDAClose NDAAction NDAInit 60 0x03FF "  Clock\\\\H**"\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This pragma goes before the first function or variable declaration, right at the top of your program.  The first four parameters are the various entry points; each of these will end up being a function in the program.  Unlike standard C applications, there is no }{\f6\fs20 main}{\f4  function; just leave it out altogether.  We\rquote ll talk about all four of these entry points in detail in a moment, but I\rquote d like to mention that there is nothing special about the names you see here.  You can pick any four names you like; I picked these because the names are pretty close to the names used in the toolbox reference manual.\par Right after the names of the four entry points for the NDA are three other parameters.  The first, 60, is the update period.  One of the things the Desk Manager can do is call your NDA every so often.  That makes it easy to implement something like a clock NDA.  If you use a value of -1, the Desk Manager will only call you if an event occurs while your desk accessory has control.  Use a 0, and the Desk Manager will call your NDA as often as possible.  That\rquote s generally a bad idea, though, since your NDA could slow down the main application if it gets called too often.  Any other value is the number of ticks to wait between calls.  Since one tick is 1/60th of a second, the value of 60 you see in the sample tells the Desk Manager to call the NDA once every second \endash  a good value for a clock.\par The next parameter is an event mask.  It works just like the one you pass to }{\f6\fs20 TaskMaster}{\f4 , telling the Desk Manager what events the NDA will handle.\par The last parameter is a menu string; it\rquote s used to form the menu item that the user will see in the Apple menu.  It must start with two spaces and end with the characters "\\H**".  (Remember to use a double \\ in the actual string, though, since \\ starts an escape sequence.)  The rest of the name is what the user will see.\par Before we get bogged down in the details, let\rquote s step back and get an overview of how the various subroutines in the NDA are used.  While there are some ways to get around it, an NDA should have exactly one window \endash  no more and no less.  When the user picks your NDA from the Apple menu, the Desk Manager calls your open routine.  The open routine is a function.  You are supposed to open your one window, returning a pointer to the window to the Desk Manager as the function result, or }{\f6\fs20 NULL}{\f4  if there is some problem and you can\rquote t start.  When the user clicks on the close box of your NDA, or picks close from the File menu while your NDA is active, the Desk Manager calls your close routine.  That, of course, is your cue to close your window.  The action routine gets called based on what events are posted and how you\rquote ve set the period in the }{\f6\fs20 nda}{\f4  pragma, but it will only be called while your window is open.  Finally, the Init routine is called both when the tools are started and when they are shut down.\par As we go through the four entry points, I\rquote ll give you an example of a simple but complete desk accessory, a Clock NDA.  In fact, the }{\f6\fs20 nda}{\f4  sample pragma from a few paragraphs back is the first part of the Clock NDA.  Assembling the pieces will be left for a problem.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Init Routine}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Init Routine\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DeskStartup}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DeskShutDown}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 startdesk}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 A moment ago, I mentioned that the Init routine is called as the tools are started and shut down.  Actually, to be precise, the Init routine is called when }{\f6\fs20 DeskStartUp}{\f4  and }{\f6\fs20 DeskShutDown}{\f4  are called.  }{\f6\fs20 DeskStartUp}{\f4  is the actual tool call made by }{\f6\fs20 startdesk}{\f4  or }{\f6\fs20 StartUpTools}{\f4  when the Desk Manager is started, and }{\f6\fs20 DeskShutDown}{\f4  is called when the Desk Manager is shut down.  Of course, it\rquote s sort of important to know whether the tools are being started or shut down!  That\rquote s why the Init routine has a parameter.  It\rquote s a single integer, set to 1 if the tools are being started, and 0 if they are being shut down.\par Naturally, you can do any sort of initialization or clean-up you like in your Init routine, but there are two things you should always do.  The first is to close your window if it is open, and the second is to close any tools you started.  Of course, you have to know if the window is open and whether you actually did start any tools, so you should create some global variables to tell you whether you did either of these things, and set them to }{\f6\fs20 FALSE}{\f4  at start up time.\par We\rquote ll talk more about the issue of tools later.  Here\rquote s a sample Init routine that deals with the issue of whether the window has been opened or not, though:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * NDAInit\par *\par * Init entry point\par *\par * Parameters:\par *    code - 1 for tool start up time, 0 for tool shut down time\par *\par ***************************************************************/\par \par void NDAInit (int code)\par \par \{\par if (code == 1)\par    clockActive = FALSE;\par else\par    if (clockActive)\par       NDAClose();\par \}\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 18-1:  }{\f6\fs20 NDAInit}{\f4  Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Of course, the open and close routines will have to get in the act, too, setting and clearing the }{\f6\fs20 clockActive}{\f4  variable as the window is opened and closed.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Open Routine}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Open Routine\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The main job for the open routine is to open the main NDA window.  This subroutine is actually a function returning a window pointer to the newly opened window.  You can create and open the window itself using a resource, just like you normally do, but there is one housekeeping chore you have to take care of that\rquote s done automatically in a standard application: you have to open your own resource fork.  We\rquote ll talk about that in the next section.  In Listing 18-2A, the problem is swept under the rug by calling subroutines to do the work \endash  which isn\rquote t a bad idea anyway.\par Here\rquote s the }{\f6\fs20 NDAOpen}{\f4  subroutine for the Clock NDA.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * NDAOpen\par *\par * Open entry point\par *\par * Returns: Pointer to the new NDA window\par *\par ***************************************************************/\par \par GrafPortPtr NDAOpen (void)\par \par \{\par #define wrNum 1001                      /* window resource number */\par \par GrafPortPtr wPtr;                       /* new window pointer */\par \par wPtr = NULL;\par if (!clockActive)\par    if (OpenResourceFork()) \{\par       clockWinPtr =\par          NewWindow2("\\p Clock ", 0, NULL, NULL, 0x02, wrNum, rWindParam1);\par       if (toolerror() == 0) \{\par          SetSysWindow(clockWinPtr);\par          clockActive = TRUE;\par          wPtr = clockWinPtr;\par          \}\par       CloseResourceFork();\par       \}\par return wPtr;\par \par #undef wrNum\par \}\par }\pard \qc\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 18-2A:  }{\f6\fs20 NDAOpen}{\f4  Function\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindParam1 (1001) \{\par    $C0A5,                      /* wFrameBits */\par    nil,                        /* wTitle */\par    0,                          /* wRefCon */\par    \{0,0,0,0\},                  /* ZoomRect */\par    linedColors,                /* wColor ID */\par    \{0,0\},                      /* Origin */\par    \{0,0\},                      /* data size */\par    \{0,0\},                      /* max height-width */\par    \{0,0\},                      /* scroll ver hors */\par    \{0,0\},                      /* page ver horiz */\par    0,                          /* winfoRefcon */\par    0,                          /* wInfoHeight */\par    \{50,50,62,200\},               /* wposition */\par    infront,                    /* wPlane */\par    nil,                        /* wStorage */\par    $0800                       /* wInVerb */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindColor (linedColors) \{\par    0x0000,                     /* frameColor */\par    0x0F00,                     /* titleColor */\par    0x020F,                     /* tbarColor */\par    0xF0F0,                     /* growColor */\par    0x00F0,                     /* infoColor */\par    \};\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 18-2B:  Resources for the Clock Window\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There\rquote s one extra step in }{\f6\fs20 NDAOpen}{\f4  besides the housekeeping you were probably expecting.  The extra step is the call to }{\f6\fs20 SetSysWindow}{\f4 , which tells the Window Manager that the window you just created belongs to an NDA, and not to an application.  This is a very important step!  Without it, the toolbox won\rquote t realize when it should give control to your NDA instead of the main program.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using Resources in an NDA}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using Resources in an NDA\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In all of your programs up to this point, the resource fork for your program is opened and made the current resource fork automatically.  This isn\rquote t done for you in an NDA, so you need to open your resource fork manually before you use any tool calls that will need to load a resource from your resource fork.  You also have to remember to close your resource fork before you return to the Desk Manager, since leaving it open can interfere with the application.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenResourceFork}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseResourceFork}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Opening and closing the resource fork isn\rquote t really that hard.  In fact, you\rquote ve already seen how to do it \endash  in the last lesson, you learned how to use }{\f6\fs20 OpenResourceFile}{\f4  and }{\f6\fs20 CloseResourceFile}{\f4  to write an }{\f6\fs20 rComment}{\f4  resource.  The only difference between what you saw then and what you need to do now is that you open the resource fork for input, not for output.\par Strangely enough, the real problem is figuring out what file name to use.  After all, an NDA will be moved to any number of disks, all of which have a different name.  The user might rename the program, too, so your program can\rquote t even count on knowing its own file name, let alone its full path name.  Fortunately, your program can call the System Loader and ask what its name is, like this:\par \par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 LGetPathname2}}}{\v\f6\fs20 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 fPtr = (GSString255Ptr) LGetPathname2(id, 1);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f6\fs20 LGetPathname2}{\f4  returns a pointer to a GS/OS input string, which is exactly what you want to pass to }{\f6\fs20 OpenResourceFile}{\f4 .  The first parameter is the user ID for your program.  The second parameter is your program\rquote s file number, which is always 1.\par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 LGetPathname2}}}{\v\f6\fs20 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you pass the user ID to }{\f6\fs20 LGetPathname2}{\f4 , you need to pass the unmodified user ID, not the one returned by C\rquote s }{\f6\fs20 userid}{\f4  function..  You can get the original user ID with a couple of new Memory Manager calls:\par \par }\pard \li180\keepn\widctlpar\adjustright {\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SetHandleID}}}{\pard\plain \li180\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FindHandle}}}{\v\f6\fs20 \par }\pard \fi180\widctlpar\adjustright {\f6\fs20 id = SetHandleID(0, FindHandle((Pointer) OpenResourceFork));\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\widctlpar\adjustright {\f6\fs20 FindHandle}{\f4  takes a pointer to any location in memory and returns the handle for the location.  In this case, we\rquote re giving }{\f6\fs20 FindHandle}{\f4  the address of a subroutine in the program.  }{\f6\fs20 SetHandleID}{\f4  is generally used to change the user ID of a handle, changing the owner.  In this case, though, we\rquote re passing 0 for the new user ID, which tells }{\f6\fs20 SetHandleID}{\f4  not to change the user ID.  }{\f6\fs20 SetHandleID}{\f4  always returns the user ID for the handle, so we get what we need.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Here\rquote s a pair of subroutines that implement these ideas.  These are the same ones called by }{\f6\fs20 NDAOpen}{\f4  in Listing 18-2B.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * OpenResourceFork\par *\par * Open the resource fork for this DA\par *\par * Returns: TRUE if successful, else FALSE\par *\par ***************************************************************/\par \par BOOLEAN OpenResourceFork (void)\par \par \{\par GSString255Ptr fPtr;                  /* GS/OS file name pointer */\par unsigned id;                          /* user ID for our executable chunk */\par \par id = SetHandleID(0, FindHandle((Pointer) OpenResourceFork));\par fPtr = (GSString255Ptr) LGetPathname2(id, 1);\par if (toolerror() == 0)\par    rID = OpenResourceFile(1, NULL, (Pointer) fPtr);\par return toolerror() == 0;\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 \}\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * CloseResourceFork\par *\par * Close the resource fork opened by OpenResourceFork\par *\par ***************************************************************/\par \par void CloseResourceFork (void)\par \par \{\par CloseResourceFile(rID);\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 18-3:  Opening and Closing Our Resource Fork\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Close Routine}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Close Routine\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The close routine doesn\rquote t have any parameters.  It is called when the user wants to close the window, so naturally, that\rquote s what you should do.  Since the window pointer isn\rquote t passed, though, you have to get it from the global variable, which is why the open subroutine saved the window pointer.  (One of the reasons, anyway.)\par There is one subtle point you have to be careful of in your close routine.  It can be called even if the open routine is never called at all, and it can be called more than once.  Because of that, you have to write it carefully so you don\rquote t try to close a window that doesn\rquote t exist.  If you forget, the best thing you can expect is for the Window Manager to crash.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * NDAClose\par *\par * Close entry point\par *\par ***************************************************************/\par \par void NDAClose (void)\par \par \{\par if (clockActive) \{\par    CloseWindow(clockWinPtr);\par    clockActive = FALSE;\par    \}\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 18-4:  }{\f6\fs20 NDAClose}{\f4  Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 The Action Routine}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 The Action Routine\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The action routine is the one that gets called when your NDA is actually supposed to do something.  There are two parameters.  The first is a code that tells the action routine why the call is being made.  The second parameter is only used for one of the action codes: for }{\f6\fs20 eventAction}{\f4 , the second parameter is the event record for the event your program is supposed to handle.  For all other action codes, the second parameter is not used, and should be ignored.  The action routine is also a function, but only a few of the action codes need to return a value.\par Here\rquote s the various action codes, along with what they mean and what the second parameter is.  The names you see here are declared as constants in the ORCA/C header files, and are also listed in the toolbox reference manual and Appendix A with the numeric values for the names.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 code\tab use\par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f6\fs20 eventAction}{\f4 \tab This code is used when your NDA needs to handle an event.  in this case, the second parameter is a pointer to an event record containing the event you are supposed to handle.\par \par \tab Some events aren\rquote t passed to NDAs.  If the event mask in the }{\f6\fs20 nda}{\f4  pragma has the proper bits enabled, the NDA will get button down events, button up events, and key down events.  No matter how the bits are set, the NDA will always get its own activate events and update events.  All other events are always passed to the application.\par \par }{\f6\fs20 runAction}{\f4 \tab This is the code used when the time period you set up in the }{\f6\fs20 nda}{\f4  pragma expires.\par \par }{\f6\fs20 cursorAction}{\f4 \tab This action code is used when the NDA window is the front window when }{\f6\fs20 SystemTask}{\f4  is called.  (}{\f6\fs20 SystemTask}{\f4  is called by }{\f6\fs20 TaskMaster}{\f4 ; you don\rquote t have to worry about calling it in your program if you use }{\f6\fs20 TaskMaster}{\f4 .)  The intent is to give you a chance to change the cursor if it\rquote s over the NDA window.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f6\fs20 undoAction}{\f4 , }{\f6\fs20 cutAction}{\f4 , }{\f6\fs20 copyAction}{\f4 , }{\f6\fs20 pasteAction}{\f4 , }{\f6\fs20 clearAction}{\f4 \tab \par }\pard \qj\fi-1800\li2160\ri360\widctlpar\adjustright {\f4 \tab These five action codes are used when the user uses one of these standard editing operations.  If your NDA handles the editing operation, you should return }{\f6\fs20 TRUE}{\f4 ; if your NDA did not handle the operation, you should return }{\f6\fs20 FALSE}{\f4 .\par \par \tab While the action routine is always a function, you only have to return a value for these five action codes.  Returning a value for one of the other action codes doesn\rquote t hurt, but it isn\rquote t required, either.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMasterDA}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Handling an event in an NDA isn\rquote t really any harder than handling an event in an application, but it isn\rquote t any easier, either.  There\rquote s a }{\f6\fs20 TaskMasterDA}{\f4  call that\rquote s designed for NDAs.  It looks and works just like }{\f6\fs20 TaskMaster}{\f4 , except that the event mask (the first parameter) isn\rquote t really used for anything; it\rquote s just there to make }{\f6\fs20 TaskMasterDA}{\f4  look like }{\f6\fs20 TaskMaster}{\f4 .  The second parameter is the extended event record, but there\rquote s a catch: }{\f6\fs20 TaskMasterDA}{\f4  doesn\rquote t call }{\f6\fs20 GetNextEvent}{\f4 ; that\rquote s already been called, and the event is being passed in as a parameter.  You have to fill in your own, local event record with the original five fields filled in by }{\f6\fs20 GetNextEvent}{\f4 , then pass your local event record to }{\f6\fs20 TaskMasterDA}{\f4 .\par Here\rquote s the action routine for the Clock.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * NDAAction\par *\par * Action entry point\par *\par * Parameters:\par *    code - action code; tells why the call is being made\par *    sysEvent - if the code is eventAction, this is an event\par *       record; the parameter is unused for all other codes\par *\par * Returns: TRUE if one of the five editing codes is handled,\par *    FALSE if not.\par *\par ***************************************************************/\par \par BOOLEAN NDAAction (int code, EventRecord *sysEvent)\par \par \{\par GrafPortPtr port;                       /* caller's GrafPort */\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 int event;                              /* TaskMaster event code */\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 switch (code) \{\par    case eventAction:\par       myEvent.what = sysEvent->what;\par       myEvent.message = sysEvent->message;\par       myEvent.when = sysEvent->when;\par       myEvent.where = sysEvent->where;\par       myEvent.modifiers = sysEvent->modifiers;\par       event = TaskMasterDA(0, &myEvent);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20       break;\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20    case runAction:\par       port = GetPort();\par       SetPort(clockWinPtr);\par       DrawTime();\par       SetPort(port);\par       break;\par    \}\par return FALSE;\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 18-5:  }{\f6\fs20 NDAAction}{\f4  Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par For completeness sake, here\rquote s the }{\f6\fs20 DrawTime}{\f4  subroutine used by the Clock NDA to actually read the time and draw it in the window.\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 /***************************************************************\par *\par * DrawTime\par *\par * Draw the time in the window\par *\par ***************************************************************/\par \par void DrawTime (void)\par \par \{\par unsigned i;                             /* loop variable */\par char timeString[21];                    /* string to hold time */\par \par ReadAsciiTime(timeString);\par for (i = 0; i < 20; ++i)\par    timeString[i] = (char) (((unsigned) timeString[i]) & 0x7F);\par timeString[20] = (char) 0;\par MoveTo(7, 10);\par DrawCString(timeString);\par \}\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Listing 18-6:  }{\f6\fs20 DrawTime}{\f4  Subroutine\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReadAsciiTime}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 time}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 clock}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There is one new call here, }{\f6\fs20 ReadAsciiTime}{\f4 .  This call gets the current time from the Miscellaneous Tool Set, returning the time more or less as a 20 character ASCII string.  In the }{\f6\fs20 DrawTime}{\f4  subroutine the characters are turned into a true ASCII string by anding out the extra bit }{\f6\fs20 ReadAsciiTime}{\f4  sets in each character.  After that, it\rquote s a simple matter to add a terminating null character and draw the string in the window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Starting and Shutting Down Tools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Starting and Shutting Down Tools\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 One of the points I glossed over and said I would come back to is the issue of starting and stopping tools.  This is a really touchy point in an NDA, and there really isn\rquote t any completely safe solution.\par Let\rquote s start by looking at the tools that are always started when an NDA is running.  They are:\par \par }\pard \qj\li360\keepn\widctlpar\tx3240\tx6120\adjustright {\f4 Tool Locator\tab Memory Manager\tab Resource Manager\par Loader\tab Miscellaneous Tool Set\tab QuickDraw II\par Event Manager\tab Window Manager\tab Menu Manager\par Control Manager\tab LineEdit Tool Set\tab Dialog Manager\par }\pard \qj\li360\widctlpar\tx3240\tx6120\adjustright {\f4 Scrap Manager\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par So how do you know that these tools are started?  Believe it or not, you have to trust the application.  An application isn\rquote t supposed to allow NDAs unless all of these tools are started.  Fortunately, with the exception of the last three tools, you really can\rquote t write much of a program unless all of these tools are started.\par If your NDA needs some tool other that one of the ones listed here, there\rquote s a chance it won\rquote t be started.  The natural reaction is to start the tools you need in your Init function, then shut them down in the same place.  Unfortunately, that doesn\rquote t work.  The application will be starting the Desk Manager, and thus calling your NDA, pretty early in the tool start up sequence, and you don\rquote t want to interfere with the application by starting a tool before it does!  The next possibility is to start any tools you need in your open routine, and that works, to a point.  You just need to be sure the tool hasn\rquote t already been started before you try, and be sure you can handle the situation gracefully (i.e. without interfering with the application!) if you fail.\par The next problem is shutting the tools down.  Since you started your tools in the open routine, the natural solution would be to shut the tools down in the close routine.  That can cause problems, though.  Think about this sequence of events:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Your NDA is opened, and needs the Print Manager.  The application didn\rquote t start the Print Manager, so you do.\par 2.\tab The user opens another NDA, which also uses the Print Manager.  This NDA sees that the Print Manager has been started, so it doesn\rquote t start the Print Manager.\par 3.\tab The user closes your NDA, so you shut down the Print Manager.\par 4.\tab The user then tries to print something with the second NDA, which promptly crashes because the Print Manager isn\rquote t active.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Well, that\rquote s a problem, all right.  The best you can do is to take two other steps.  First, always check to be sure a tool is started just before you use it, and start the tool if it hasn\rquote t been started already.  Do that even if you think you\rquote ve already started the tool.  Second, shut down tools when the Init routine is called at tool shutdown time, and not before.  In addition, always check to make sure a tool is still active before you shut it down.\par This system still isn\rquote t perfect.  Most applications start all of the tools they need at start up time, and shut down all of the tools they started just before exiting, but it\rquote s possible for the application itself to start a tool and shut it down at any time.  You can protect yourself from the application by always double checking to be sure all of the tools you need are going, but the application may get upset if it tries to start a tool and it\rquote s already going.  You can\rquote t do anything practical to avoid this situation, so it\rquote s fortunate that it doesn\rquote t come up very often.\par I\rquote ve talked a lot about checking to see if a tool is active in this section.  While I\rquote m not going to go into details on how to do that, you can follow up on the idea if you like.  Every tool has a status call, and that status call will tell you if the tool is installed and active.  The status call works even if the tool is a RAM based tool and hasn\rquote t been loaded, so it\rquote s always safe.  It\rquote s this status call that lets you check to see if the tool is active so you can decide if you need to start the tool.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Installing an NDA}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Installing an NDA\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 There are two other steps you have to take to create an NDA.  The first is to be sure and set the file type to 0xB8 (NDA) instead of leaving it as 0xB5 (EXE) or setting it to 0xB3 (S16) like you\rquote ve done for your other programs.  After all, the NDA isn\rquote t called like other programs.  Trying to call an NDA like any other application would cause a crash.\par The other step is to put the NDA in the right place.  All desk accessories have to be in the System:Desk.Accs folder on your boot disk; that\rquote s the only place the Desk Manager will look.  There are several utilities around that can bypass this restriction, including PRIZM, but in general you need to copy your NDA to the desk accessories folder, then reboot the computer.\par \par Problem 18-1:  Put all of the pieces together to create a Clock NDA.  Install the NDA and test it.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Summary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Summary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This final lesson of the course covered NDAs \endash  how to create them and how to install them.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Tool calls used for the first time in this lesson:\par \par }\pard \qj\li720\keepn\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 FindHandle\tab LGetPathname2\tab ReadAsciiTime\tab SetHandleID\par }\pard \qj\li720\widctlpar\tx2880\tx5040\tx7200\adjustright {\f6\fs20 SetSysWindow\tab TaskMasterDA\par }\pard \qj\fi360\widctlpar\adjustright {\*\bkmkend bk99}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 desk accessories}{\rxe bk99}}}{\*\bkmkend bk100}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 New Desk Accessories}{\rxe bk100}}}{\*\bkmkend bk101}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA}{\rxe bk101}}}{\v\f4 \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Appendix A \endash  Abridged Toolbox Reference Manual}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Appendix A \endash  Abridged Toolbox Reference Manual}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Appendix A \endash  Abridged Toolbox Reference Manual\tcl1}}}{\b\f4\fs36 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Control Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Control Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Control Manager}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named Control.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawControls}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawControls\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawControls\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 update procedure}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawControls(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Draws all of the controls in a window.  If your window defines controls other than the scroll bars and grow box used by }{\f6\fs20 TaskMaster}{\f4 , you should include a call to }{\f6\fs20 DrawControls}{\f4  in your update procedure.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FindTargetCtl}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FindTargetCtl\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FindTargetCtl\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 target control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 CtlRecHndl FindTargetCtl(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1004\tab noCtlError}{\f4 \tab No controls in the window\par \tab }{\f6\fs20 0x1005\tab noExtendedCtlError}{\f4 \tab No extended controls in the window\par \tab }{\f6\fs20 0x1006\tab noCtlTargetError}{\f4 \tab No extended control is currently the target control\par \tab }{\f6\fs20 0x100C\tab noFrontWindowError}{\f4 \tab There is no front window\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the control handle for the current target control.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetCtlHandleFromID}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetCtlHandleFromID\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlHandleFromID\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 CtlRecHndl GetCtlHandleFromID(WindowPtr theWindow, Long ctlID);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1004\tab noCtlError}{\f4 \tab No controls in the window\par \tab }{\f6\fs20 0x1005\tab noExtendedCtlError}{\f4 \tab No extended controls in the window\par \tab }{\f6\fs20 0x1009\tab noSuchIDError}{\f4 \tab The specified control ID cannot be found\par \tab }{\f6\fs20 0x100C\tab noFrontWindowError}{\f4 \tab There is no front window\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 GetCtlHandleFromID}{\f4  returns the control handle for a control, given the window containing the control and the control ID.\par }{\f6\fs20 GetCtlHandleFromID}{\f4  only works with extended controls.  All of the controls we\rquote ve defined and used in this course are extended controls, so you can always used }{\f6\fs20 GetCtlHandleFromID}{\f4  safely for solutions to the problems.  If you are defining controls without resources, though, you should check the detailed description of this command in }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 , page 28-27 to make sure it will work.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetCtlID}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetCtlID\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlID\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord GetCtlID(CtlRecHndl theControl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1004\tab noCtlError}{\f4 \tab No controls in the window\par \tab }{\f6\fs20 0x1007\tab notExtendedCtlError}{\f4 \tab The action is valid only for extended controls\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the control ID for the given control handle.\par }{\f6\fs20 GetCtlID}{\f4  only works with extended controls.  All of the controls we\rquote ve defined and used in this course are extended controls, so you can always used }{\f6\fs20 GetCtlID}{\f4  safely for solutions to the problems.  If you are defining controls without resources, though, you should check the detailed description of this command in }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 , page 28-28 to make sure it will work.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetCtlParams}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetCtlParams\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlParams\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord GetCtlParams(CtlRecHndl theControl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 GetCtlParams}{\f4  returns the control parameters.\par In one place in this course }{\f6\fs20 GetCtlParams}{\f4  is used to fetch the current document size and page size for a scroll bar control.  The data size is returned in the least significant word of the long result, while the view size is returned in the most significant word.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetCtlValue}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetCtlValue\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetCtlValue\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar control}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 radio button control}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 check box control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word GetCtlValue(CtlRecHndl theControl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the current value for a control.  For a scroll bar control, this will be the position of the thumb.  For a radio button or check box, the value will be zero if the button is off, and some non-zero value if the button is on.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetLETextByID}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetLETextByID\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetLETextByID\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void GetLETextByID(WindowPtr theWindow, Long controlID, StringPtr text);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Control Manager errors are returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 GetLETextByID}{\f4  returns the text from a line edit control.\par The text returned starts with a length byte, which is set to 0 if the text is longer than 255 characters.  This is followed by the text itself, then by a terminating null character.\par Because of this format, you must make sure the string buffer the text is placed in is at least two characters longer than the longest allowed string for the line edit control.  You can use the result directly as a p-string, or skip the first byte and use the remainder of the entry as a normal C string.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetCtlAction}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetCtlAction\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetCtlAction\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar controls}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetCtlAction(LongProcPtr newAction, CtlRecHndl theControl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Changes the action procedure for the given control to }{\f6\fs20 newAction}{\f4 .  In this course, }{\f6\fs20 SetCtlAction}{\f4  is used to define a function to handle continuous scrolling for scroll bar controls.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetCtlParams}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetCtlParams\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetCtlParams\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar controls}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetCtlParams(Word param2, Word param1, CtlRecHndl theControl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the parameters for the control.\par In this course, this call is used to change the document size and data size for a scroll bar.  For a scroll bar control, the first parameter (}{\f6\fs20 param2}{\f4 ) is the document size, while the next parameter (}{\f6\fs20 param1}{\f4 ) is the view size.\par You can pass a -1 for either parameter to tell the Control Manager to leave that value alone.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetLETextByID}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetLETextByID\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetLETextByID\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetLETextByID(WindowPtr windPtr, Long leCtlID, StringPtr text);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Control Manager errors are returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 SetLETextByID}{\f4  sets the text in a line edit control to the contents of the given string.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetCtlValue}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetCtlValue\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetCtlValue\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar control}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 radio button control}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 check box control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetCtlValue(Word curValue, CtlRecHndl theControl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the current value for a control and redraws the control with the new value.  For a scroll bar control, changing the value changes the position of the thumb.  For a radio button or check box, setting the value will to zero turns the button is off, while setting the value to 1 turns the button on (and, for radio buttons, turns off any other buttons in the same family).\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Control Manager Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Control Manager Definitions\tcl3}}}{\b\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* PartCode Numbers */\par #define noPart 0x0000\par #define simpleButton 0x0002\par #define checkBox 0x0003\par #define radioButton 0x0004\par #define upArrow 0x0005\par #define downArrow 0x0006\par #define pageUp 0x0007\par #define pageDown 0x0008\par #define growBox 0x000A\par }\pard \widctlpar\adjustright {\f6\fs20 #define thumb 0x0081\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Desk Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Desk Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Desk Manager}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named Desk.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FixAppleMenu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FixAppleMenu\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixAppleMenu\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 apple menu}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FixAppleMenu(Word menuID);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The names of all of the currently installed NDAs are added to the menu specified by }{\f6\fs20 menuID}{\f4 .  NDAs are traditionally added to the Apple menu, which should already contain an About menu item.  The menu items added by this call will appear after any items that are already in the menu.\par The menu items are given menu ID numbers numbered sequentially, starting with a menu ID of 1.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Event Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Event Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Event Manager}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named Event.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetMouse}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetMouse\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetMouse\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 mouse}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void GetMouse(Point *mouseLocPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the current location of the mouse using the local coordinates of the current }{\f6\fs20 GrafPort}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetNextEvent}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetNextEvent\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextEvent\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 event record}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean GetNextEvent(Word eventMask, EventRecordPtr eventPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 GetNextEvent}{\f4  checks to see if any events have occurred, returning }{\f6\fs20 TRUE}{\f4  if there are events the program needs to handle and }{\f6\fs20 FALSE}{\f4  if there are no pending events.\par It\rquote s possible for more than one event to occur before the program has time to call }{\f6\fs20 GetNextEvent}{\f4 .  To handle this situation, the Event Manager places events in an event queue, which is a prioritized first in, first out list.  (Some kinds of events have a higher priority than others, and are always reported first, but events with the same priority are treated in a true first in, first out basis.)    The length of the list is specified when you start the Event Manager, and is normally set to 20.  When you call }{\f6\fs20 GetNextEvent}{\f4 , it removes the next event from the queue and returns the information about that event.\par You can use the }{\f6\fs20 eventMask}{\f4  parameter to tell }{\f6\fs20 GetNextEvent}{\f4  what kind of events you would like to see.  If you ask for a certain kind of event, say a keyboard event, but only mouse events are in the event queue, }{\f6\fs20 GetNextEvent}{\f4  returns }{\f6\fs20 FALSE}{\f4 , and the unwanted events remain in the event queue.  The }{\f6\fs20 eventMask}{\f4  parameter is a series of bit fields telling what events to report.  Figure A-1 shows the bit fields and what they are used for.  See the definitions section for a series of predefined names that can be added together to get various bit mask combinations.\par \par }\pard \qc\fi360\widctlpar\adjustright {{\pict{\*\picprop\shplid1115{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex49\picscaley48\piccropl0\piccropr0\piccropt0\piccropb0\picw404\pich308\picwgoal8080\pichgoal6160\macpict\bliptag1663197894\blipupi72{\*\blipuid 632262c63806e0f0c994245f7f580123}075000070007013b019b1101a00082a0008ca0008c01000a00070007013b019b0a000000000000000034000a000b001d001e38a100960006060000000226a1009a0008fffd000000070000a000980300150d000c2b0d16023135a00099a00097a0008da0008c34000a002f001d004238a100960006060000000226a1009a0008fffd000000070000a000982924023133a00099a00097a0008da0008c34000a0053001d006638a100960006060000000226a1009a0008fffd000000070000a000982924023131a00099a00097a0008da0008c34000a0077001d008a38a100960006060000000226a1009a0008fffd000000030000a0009829280139a00099a00097a0008da0008c34000a009b001d00ae38a100960006060000000226a1009a0008fffd000000030000a0009829240137a00099a00097a0008da0008c34000a00bf001d00d238a100960006060000000226a1009a0008fffd000000030000a0009829240135a00099a00097a0008da0008c34000a00e3001d00f638a100960006060000000226a1009a0008fffd000000030000a0009829240133a00099a00097a0008da0008c34000a0107001d011a38a100960006060000000226a1009a0008fffd000000030000a0009829240131a00099a00097a0008da0008c34000a001d001d003038a100960006060000000226a1009a0008fffd000000070000a00098280016001f023134a00099a00097a0008da0008c34000a0041001d005438a100960006060000000226a1009a0008fffd000000070000a000982924023132a00099a00097a0008da0008c34000a0065001d007838a100960006060000000226a1009a0008fffd000000070000a000982924023130a00099a00097a0008da0008c34000a0089001d009c38a100960006060000000226a1009a0008fffd000000030000a0009829280138a00099a00097a0008da0008c34000a00ad001d00c038a100960006060000000226a1009a0008fffd000000030000a0009829240136a00099a00097a0008da0008c34000a00d1001d00e438a100960006060000000226a1009a0008fffd000000030000a0009829240134a00099a00097a0008da0008c34000a00f5001d010838a100960006060000000226a1009a0008fffd000000030000a0009829240132a00099a00097a0008da0008c34000a0119001d012c38a100960006060000000226a1009a0008fffd000000030000a0009829240130a00099a00097a0008da0008d22001c01220009231200a100960006050000000208a1009a0008fffd0000001a0000a000982b1f12087265736572766564a00099a000972200370134dc0022001c0110001ba100960006050000000208a1009a0008fffd0000002d0000a000982a120c6d6f757365446f776e457674a00099a00097a100960006050000000208a1009a0008fffd000000250000a000982a120a6d6f7573655570457674a00099a0009722001c00fe002d2200490134ca0022001c00b60075237e0020001c00a400a300a42100a3013420001c009200b5009220001c008000c7008020001c006e00d9006e20001c005c00eb005c20001c004a00fd004a20001c0038010f003820001c0026012100262000b5009200b501342000c7013400c700802000d9013400d9006e2000eb013400eb005c2000fd013400fd004a20010f0134010f0038200121013401210026a100960006050000000208a1009a0008fffd000000250000a000982a120a6d6f7573655570457674a00099a0009722001c00ec003f23480022006d00da5a00a100960006050000000208a1009a0008fffd0000001a0000a000982a12087265736572766564a00099a0009722001c00da005122007f00c86c00a100960006050000000208a1009a0008fffd000000210000a000982a100a6175746f4b6579457674a00099a0009722007f00c8009da100960006050000000208a1009a0008fffd0000001d0000a000982a1209757064617465457674a00099a0009720001c001401330014200133013401330014a100960006050000000208a1009a0008fffd0000001a0000a000982a12087265736572766564a00099a00097a100960006050000000208a1009a0008fffd0000001f0000a000982a120b6163746976617465457674a00099a00097a100960006050000000208a1009a0008fffd0000001b0000a000982a1209737769746368457674a00099a00097a100960006050000000208a1009a0008fffd000000210000a000982a120a6465736b416363457674a00099a00097a100960006050000000208a1009a0008fffd0000001a0000a000982a1209647269766572457674a00099a00097a100960006050000000208a1009a0008fffd000000180000a000982a120761707031457674a00099a00097a100960006050000000208a1009a0008fffd000000180000a000982a120761707032457674a00099a00097a100960006050000000208a1009a0008fffd000000180000a000982a120761707033457674a00099a00097a100960006050000000208a1009a0008fffd000000180000a000982a120761707034457674a00099a00097a00083ff}}{\par \par }{\f4 Figure A-1: Event Masks\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Information is returned in the event record any time a call is made to }{\f6\fs20 GetNextEvent}{\f4 , whether or not an event needs to be handled.  There are five fields in the event record:\par \par }\pard \qj\fi-1800\li2160\keep\keepn\widctlpar\adjustright {\f6\fs20 what}{\f4 \tab The event that occurred.\par }{\f6\fs20 message}{\f4 \tab Information about the specific event.\par }{\f6\fs20 when}{\f4 \tab When the event occurred.  When the tools are started, an internal clock begins counting 1/60ths of a second; this time is the number of 1/60ths of a second that have elapsed from when the tools were started and when the event was detected.\par }{\f6\fs20 where}{\f4 \tab Position of the cursor (mouse) when the event was detected.\par }{\f6\fs20 modifiers}{\f4 \tab Extra information about the state of the computer when the event was detected.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The }{\f6\fs20 message}{\f4  field contains a variety of information based on the kind of event that occurred.  Table A-1 shows the kinds of events by the name used in the C toolbox header files, along with what the }{\f6\fs20 message}{\f4  field contains.  For the numeric value of the events, see the definitions section for the Event Manager.\par \par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f6\fs20 what\tab message\par }\pard \qj\fi-1800\li2160\ri360\keepn\widctlpar\adjustright {\f6\fs20 nullEvt}{\f4 \tab Undefined.\par }{\f6\fs20 mouseDownEvt}{\f4 \tab Button number (1 or 0) in low-order word, high-order word undefined.\par }{\f6\fs20 mouseUpEvt}{\f4 \tab Button number (1 or 0) in low-order word, high-order word undefined.\par }{\f6\fs20 keyDownEvt}{\f4 \tab ASCII character code in low-order byte, other bytes undefined.\par }{\f6\fs20 autoKeyEvt}{\f4 \tab ASCII character code in low-order byte, other bytes undefined.\par }{\f6\fs20 updateEvt}{\f4 \tab Pointer to the window to update.\par }{\f6\fs20 activateEvt}{\f4 \tab Pointer to the window that was activated.\par }{\f6\fs20 switchEvt}{\f4 \tab Undefined.\par }{\f6\fs20 deskAccEvt}{\f4 \tab Undefined.\par }{\f6\fs20 driverEvt}{\f4 \tab Defined by the device driver.\par }{\f6\fs20 app1Evt}{\f4 \tab Defined by the application.\par }{\f6\fs20 app2Evt}{\f4 \tab Defined by the application.\par }{\f6\fs20 app3Evt}{\f4 \tab Defined by the application.\par }{\f6\fs20 app4Evt}{\f4 \tab Defined by the application.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table A-1: Event Messages by Event Type\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The }{\f6\fs20 modifiers}{\f4  field is a series of bit flags that give specific information about the state of the computer when the event was detected.  Figure A-2 shows the bit fields and what they are used for.  See the definitions section for a set of predefined constants that can be used to form bit masks for the event modifiers field.\par \par }\pard \qc\keepn\widctlpar\adjustright {{\pict{\*\picprop\shplid1116{\sp{\sn shapeType}{\sv 75}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn fLine}{\sv 0}}}\picscalex49\picscaley49\piccropl0\piccropr0\piccropt0\piccropb0\picw491\pich589\picwgoal9820\pichgoal11780\macpict\bliptag79371263\blipupi72{\*\blipuid 04bb1bff1e88a1580e20ef8ce6409dbb}0a7000070007025401f21101a00082a0008c01000a00070007025401f20a00000000000000000b001b001b44001c000a002f002f4834001c000a0025002ea0008da0008c44001c00be002f01074834001c00be00250106a0008da0008ca0008c34000a000a001d001d38a100960006060000000219a1009a0008fffd000000070000a000980300150d000c2b0d16023135a00099a00097a0008da0008c34000a002e001d004138a100960006060000000219a1009a0008fffd000000070000a000982924023133a00099a00097a0008da0008c34000a0052001d006538a100960006060000000219a1009a0008fffd000000070000a000982924023131a00099a00097a0008da0008c34000a0076001d008938a100960006060000000219a1009a0008fffd000000040000a0009829270139a00099a00097a0008da0008c34000a009a001d00ad38a100960006060000000219a1009a0008fffd000000040000a0009829240137a00099a00097a0008da0008c34000a00be001d00d138a100960006060000000219a1009a0008fffd000000040000a0009829240135a00099a00097a0008da0008c34000a00e2001d00f538a100960006060000000219a1009a0008fffd000000040000a0009829240133a00099a00097a0008da0008c34000a0106001d011938a100960006060000000219a1009a0008fffd000000040000a0009829240131a00099a00097a0008da0008c34000a001c001d002f38a100960006060000000219a1009a0008fffd000000070000a00098280016001f023134a00099a00097a0008da0008c34000a0040001d005338a100960006060000000219a1009a0008fffd000000070000a000982924023132a00099a00097a0008da0008c34000a0064001d007738a100960006060000000219a1009a0008fffd000000070000a000982924023130a00099a00097a0008da0008c34000a0088001d009b38a100960006060000000219a1009a0008fffd000000040000a0009829270138a00099a00097a0008da0008c34000a00ac001d00bf38a100960006060000000219a1009a0008fffd000000040000a0009829240136a00099a00097a0008da0008c34000a00d0001d00e338a100960006060000000219a1009a0008fffd000000040000a0009829240134a00099a00097a0008da0008c34000a00f4001d010738a100960006060000000219a1009a0008fffd000000040000a0009829240132a00099a00097a0008da0008c34000a0118001d012b38a100960006060000000219a1009a0008fffd000000040000a0009829240130a00099a00097a0008da0008d22001c01210009231200a100960006050000000274a1009a0008000b0000004f0000a000982b1f120b616374697665466c61670da00099a1009a0008fffd0000004f0000a000982a0e1b31202d2077696e646f77206265696e67206163746976617465640da00099a1009a0008ffef0000004f0000a000982a0e1c30202d2077696e646f77206265696e67206465616374697661746564a00099a000972200520133dc0022001c010f0036a100960006050000000274a1009a000800120000004d0000a000982a110b6368616e6765466c61670da00099a1009a000800040000004d0000a000982a0e1c31202d206368616e67696e672066726f6d2073797374656d20746f0da00099a1009a0008fff60000004d0000a000982a0e202020202020206170706c69636174696f6e206f7220766963652076657273610da00099a1009a0008ffe80000004d0000a000982a0e0d30202d206e6f206368616e6765a00099a00097a100960006050000000274a1009a0008fffd0000001a0000a000982a15087265736572766564a00099a0009722002e00e200632200910133af00a100960006050000000274a1009a0008000b000000450000a000982a120a62746e3153746174650da00099a1009a0008fffd000000450000a000982a0e1831202d206d6f75736520627574746f6e203120646f776e0da00099a1009a0008ffef000000450000a000982a0e1730202d206d6f75736520627574746f6e203020646f776ea00099a00097a100960006050000000274a1009a0008000b000000450000a000982a1a0a62746e3053746174650da00099a1009a0008fffd000000450000a000982a0e1831202d206d6f75736520627574746f6e203020646f776e0da00099a1009a0008ffef000000450000a000982a0e1730202d206d6f75736520627574746f6e203120646f776ea00099a0009722002500b5007e237e0020002500a300d900a32100d901332000250091010f0091200025007f0145007f200025006d017b006d200025005b01b1005b200025004901e7004920002500370214003720002e001c024a001ca100960006050000000274a1009a0008000b000000420000a000982a1a096170706c654b65790da00099a1009a0008fffd000000420000a000982a0e1731202d206170706c65206b65792077617320646f776e0da00099a1009a0008ffef000000420000a000982a0e1430202d206170706c65206b657920776173207570a00099a0009720010f0091010f0133a100960006050000000201a1009a0008000b0000003f0000a000982a1a0973686966744b65790da00099a1009a0008fffd0000003f0000a000982a0e1731202d207368696674206b65792077617320646f776e0da00099a1009a0008ffef0000003f0000a000982a0e1430202d207368696674206b657920776173207570a00099a0009720014501330145007fa100960006050000000201a1009a0008000b0000004c0000a000982a1a09636170734c6f636b0da00099a1009a0008fffd0000004c0000a000982a0e1b31202d2063617073206c6f636b206b65792077617320646f776e0da00099a1009a0008ffef0000004c0000a000982a0e1830202d2063617073206c6f636b206b657920776173207570a00099a0009720017b0133017b006da100960006050000000201a1009a0008000b000000430000a000982a1a0a6f7074696f6e4b65790da00099a1009a0008fffd000000430000a000982a0e1831202d206f7074696f6e206b65792077617320646f776e0da00099a1009a0008ffef000000430000a000982a0e1530202d206f7074696f6e206b657920776173207570a00099a000972001b1013301b1005ba100960006050000000201a1009a0008000b000000450000a000982a1a0b636f6e74726f6c4b65790da00099a1009a0008fffd000000450000a000982a0e1931202d20636f6e74726f6c206b65792077617320646f776e0da00099a1009a0008ffef000000450000a000982a0e1630202d20636f6e74726f6c206b657920776173207570a00099a000972001e7013301e70049a100960006050000000201a1009a0008000b000000590000a000982a11076b65795061640da00099a1009a0008fffd000000590000a000982a0e1e31202d206b65792070726573736564206f6e20746865206b65797061640da00099a1009a0008ffef000000590000a000982a0e1f30202d206b65792070726573736564206f6e20746865206b6579626f617264a00099a00097200214013302140037a100960006050000000201a1009a0008fffd0000001a0000a000982a1a087265736572766564a00099a0009720024a0133024a001ca00083ff}}{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Figure A-2:  Modifier Flags\par }\pard \qj\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 StillDown}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 StillDown\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StillDown\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 mouse}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 button}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean StillDown(Word buttonNumber);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0605\tab emBadBttnNoErr}{\f4 \tab The button number given was not 0 or 1\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This call is used after the Event Manager detects and returns a mouse down event.  }{\f6\fs20 StillDown}{\f4  will return }{\f6\fs20 TRUE}{\f4  until a mouse up event occurs; it will then return }{\f6\fs20 FALSE}{\f4 , whether or not the application has made a call to see the event.  }{\f6\fs20 StillDown}{\f4  also handles multiple presses correctly; if the mouse button has been released since the last time the application detected a mouse down event, }{\f6\fs20 StillDown}{\f4  will return }{\f6\fs20 FALSE}{\f4 , even if the mouse has been pressed again.\par The button number for a single button mouse is 0.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Event Manager Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Event Manager Definitions\tcl3}}}{\b\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* Event Codes */\par #define nullEvt 0x0000\par #define mouseDownEvt 0x0001\par #define mouseUpEvt 0x0002\par #define keyDownEvt 0x0003\par #define autoKeyEvt 0x0005\par #define updateEvt 0x0006\par #define activateEvt 0x0008\par #define switchEvt 0x0009\par #define deskAccEvt 0x000A\par #define driverEvt 0x000B\par #define app1Evt 0x000C\par #define app2Evt 0x000D\par #define app3Evt 0x000E\par }\pard \widctlpar\adjustright {\f6\fs20 #define app4Evt 0x000F\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* Event Masks */\par #define mDownMask 0x0002\par #define mUpMask 0x0004\par #define keyDownMask 0x0008\par #define autoKeyMask 0x0020\par #define updateMask 0x0040\par #define activeMask 0x0100\par #define switchMask 0x0200\par #define deskAccMask 0x0400\par #define driverMask 0x0800\par #define app1Mask 0x1000\par #define app2Mask 0x2000\par #define app3Mask 0x4000\par #define app4Mask 0x8000\par }\pard \widctlpar\adjustright {\f6\fs20 #define everyEvent 0xFFFF\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* Modifiers Flags */\par #define activeFlag 0x0001              /* set if window being activated */\par #define changeFlag 0x0002              /* set if active wind. changed state */\par #define btn1State 0x0040               /* set if button 1 up */\par #define btn0State 0x0080               /* set if button 0 up */\par #define appleKey 0x0100                /* set if Apple key down */\par #define shiftKey 0x0200                /* set if shift key down */\par #define capsLock 0x0400                /* set if caps lock key down */\par #define optionKey 0x0800               /* set if option key down */\par #define controlKey 0x1000              /* set if Control key down */\par }\pard \widctlpar\adjustright {\f6\fs20 #define keyPad 0x2000                  /* set if keypress from key pad */\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EventRecord}}}{\v\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct EventRecord \{\par    Word what;                          /* event code */\par    LongWord message;                   /* event message */\par    LongWord when;                      /* ticks since startup */\par    Point where;                        /* mouse location */\par    Word modifiers;                     /* modifier flags */\par    LongWord wmTaskData;\par    LongWord wmTaskMask;\par    LongWord wmLastClickTick;\par    Word wmClickCount;\par    LongWord wmTaskData2;\par    LongWord wmTaskData3;\par    LongWord wmTaskData4;\par    Point wmLastClickPt;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct EventRecord EventRecord, *EventRecordPtr, **EventRecordHndl;\par }\pard \qj\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Font Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Font Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Font Manager}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named Font.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ChooseFont}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ChooseFont\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ChooseFont\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord ChooseFont(FontID fontID, Word famSpecs);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1B08\tab fmBadFamNumErr}{\f4 \tab Illegal family number\par \tab }{\f6\fs20 0x1B09\tab fmBadSizeErr}{\f4 \tab Illegal font size\par \tab Memory Manager errors are returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 ChooseFont}{\f4  brings up a dialog that allows the user to choose a font family, font size, and font style, then returns the values selected in a }{\f6\fs20 LongWord}{\f4  with the same format as a }{\f6\fs20 fontID}{\f4  structure.  The result can be type cast to }{\f6\fs20 fontID}{\f4  and stored in a }{\f6\fs20 fontID}{\f4  variable.\par }{\f6\fs20 fontID}{\f4  is a starting font ID; it is used to create defaults for the font family, font size, and font style.\par }{\f6\fs20 famSpecs}{\f4  is a flags word.  If bit 5 (}{\f6\fs20 baseOnlyBit}{\f4 ) is set, }{\f6\fs20 ChooseFont}{\f4  will only display base font families.  (Roughly, that means it will only display the fonts that actually exist as bit maps.)  If the bit is clear, the user can pick any combination of font families, sizes and styles.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CountFonts}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CountFonts\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CountFonts\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word CountFonts(FontID desiredID, Word specs);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1B08\tab fmBadFamNumErr}{\f4 \tab Illegal family number\par \tab }{\f6\fs20 0x1B09\tab fmBadSizeErr}{\f4 \tab Illegal font size\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 CountFonts}{\f4  returns the number of fonts that fit a given specification.  While there are many uses for this call, in this course we use it to find out if a given font size exists as a bit mapped font, or if the Font Manager will have to scale the font; this information is used to highlight appropriate font sizes in the font size menu.  For this purpose, pass the }{\f6\fs20 fontID}{\f4  for the font with the font style byte set to 0xFF, and the font family and size set normally.  The }{\f6\fs20 specs}{\f4  flags word should be 0x0A.\par For other ways to use this call, and a complete description of the various bit flags, see the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 1}{\f4 , page 8-29.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FamNum2ItemID}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FamNum2ItemID\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FamNum2ItemID\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixFontMenu}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word FamNum2ItemID(Word familyNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1B04\tab fmFamNotFndErr}{\f4 \tab Family not found\par \tab }{\f6\fs20 0x1B0B\tab fmMenuErr}{\f4 \tab }{\f6\fs20 FixFontMenu}{\f4  never called\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 FamNum2ItemID}{\f4  takes a font family number as input and returns the menu item ID used by }{\f6\fs20 FixFontMenu}{\f4  when the font family was placed in the menu bar.  An error is generated if the font family is not in the menu, or if }{\f6\fs20 FixFontMenu}{\f4  was never called.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FixFontMenu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FixFontMenu\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixFontMenu\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixMenuBar}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FixFontMenu(Word menuID, Word startingID, Word famSpecs);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors are returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Attaches the names of all of the font families to a specified menu.\par }{\f6\fs20 menuID}{\f4  is the menu number to attach the menu items to.  }{\f6\fs20 startingID}{\f4  is the first menu item ID to use; the remaining menu item IDs are assigned sequentially until all of the font families have been added to the menu.  }{\f6\fs20 famSpecs}{\f4  is a flags word.  In this course, the }{\f6\fs20 famSpecs}{\f4  parameter set to 0; see the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 1}{\f4 , page 8-36 for other possibilities.\par You must call }{\f6\fs20 FixMenuBar}{\f4  before the menu is actually displayed.  In most programs, the call to }{\f6\fs20 FixFontMenu}{\f4  and }{\f6\fs20 FixAppleMenu}{\f4  will be made in the same place that the menu bar is set up.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FMGetCurFID}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FMGetCurFID\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FMGetCurFID\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord FMGetCurFID(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the font ID for the current font.  Functions cannot return structures, so the value is returned as a long integer.  Font ID structures, though, are four bytes long, so you can use type casting to store the result in a font ID variable.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InstallFont}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InstallFont\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InstallFont\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InstallFont(FontID desiredID, Word scaleWord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1B08\tab fmBadFamNumErr}{\f4 \tab Illegal family number\par \tab }{\f6\fs20 0x1B09\tab fmBadSizeErr}{\f4 \tab Illegal font size\par \tab }{\f6\fs20 0x1B0C\tab fmScaleSizeErr}{\f4 \tab Scaled size font exceeds limits\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 InstallFont}{\f4  makes a font the current font, so QuickDraw\rquote s drawing commands will use the new font int the port the font is installed in.  Specifically, }{\f6\fs20 InstallFont}{\f4  takes these actions:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \bullet \tab Finds the font that best fits the specified font.  Naturally, if an exact math is available, is it used.\par \bullet \tab If the font is not in memory, it is loaded.\par \bullet \tab If an exact match was not found, and scaling has not been disabled by setting the least significant bit of }{\f6\fs20 scaleWord}{\f4 , a new font is created by scaling the old font to the proper size.\par \bullet \tab The new font is made the current font for the current GrafPort, and is marked as unpurgeable.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par See Lesson 10 for a description of how to use this call.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 1}{\f4 , page 8-43 for a complete description of this call, including several options not discussed in this course.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ItemID2FamNum}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ItemID2FamNum\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ItemID2FamNum\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixFontMenu}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word ItemID2FamNum(Word itemID);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1B04\tab fmFamNotFndErr}{\f4 \tab Family not found\par \tab }{\f6\fs20 0x1B0B\tab fmMenuErr}{\f4 \tab }{\f6\fs20 FixFontMenu}{\f4  never called\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Takes a menu item ID for a menu item created by }{\f6\fs20 FixFontMenu}{\f4  and returns the corresponding font family number.  An error is generated if the menu ID was not created by }{\f6\fs20 FixFontMenu}{\f4 , or if }{\f6\fs20 FixFontMenu}{\f4  was never called.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Font Manager Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Font Manager Definitions\tcl3}}}{\b\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* Font Family Numbers */\par #define chicago 0xFFFD\par }\pard \widctlpar\adjustright {\f6\fs20 #define shaston 0xFFFE\par #define systemFont0 0x0000\par #define systemFont1 0x0001\par #define newYork 0x0002\par #define geneva 0x0003\par #define monaco 0x0004\par #define venice 0x0005\par #define london 0x0006\par #define athens 0x0007\par #define sanFrancisco 0x0008\par #define toronto 0x0009\par #define cairo 0x000B\par #define losAngeles 0x000C\par #define zapfDingbats 0x000D\par #define bookman 0x000E\par #define helveticaNarrow 0x000F\par #define palatino 0x0010\par #define zapfChancery 0x0012\par #define times 0x0014\par #define helvetica 0x0015\par #define courier 0x0016\par #define symbol 0x0017\par #define taliesin 0x0018\par #define avanteGarde 0x0021\par #define newCenturySchoolbook 0x0022\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 union FontID}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FontID}}}{\f6\fs20  \{\par    struct \{\par       Word famNum;\par       Byte fontStyle;\par       Byte fontSize;\par       \} fidRec;\par    Long fidLong;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef union FontID FontID, *FontIDPtr, **FontIDHndl;\par }\pard \qj\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 GS/OS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 GS/OS\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GS/OS}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for GS/OS is named GSOS.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Path Names}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Path Names\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 path names}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Path names are used to uniquely identify files on a disk.  (They are also used for other things; see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4  for details.)  The full path name consists of the name of the diskette, followed by the names of any folders you would have to open to get to the file using the Finer, followed by the name of the file itself.  These names are separated from each other with either : characters or / characters.\par For example, let\rquote s say you are trying to identify a file named MyFile.  This file is located on a disk called MyDisk, inside a folder called MyFolder.  The full path name for the file is\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 :MyDisk:MyFolder:MyFile\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par When you are writing toolbox programs, you generally don\rquote t have to worry about issued like partial path names, device names, or just what the rules are for creating a path name, since SFO makes sure the path names are legal before it returns the name to your program.  The only special situation you should be aware of is that * is used for the boot disk.  So, for example, if you want to store a file called ScrapBook in the System folder of the boot disk, you could use the name\par \par }\pard \qj\fi180\widctlpar\adjustright {\f6\fs20 *:System:ScrapBook\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 File Types}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 File Types\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 auxiliary file type}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 File Type Notes}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Table A-2 shows the file types and auxiliary file types used in this course, as well as a few of the other common file types you will see as you program.  For a complete list of the file types and auxiliary file types (and in many cases, descriptions of the file formats) see the Apple II}{\f4\fs20 GS}{\f4  File Type Notes.\par In the table, Code refers to the three letter file type abbreviation you see when you use a text shell to catalog a disk.  If the Auxiliary file type is not listed, it generally means that it can vary without effecting the internal format for the file.  In those cases, you will have to refer to Apple\rquote s file type notes for details.\par \par }\pard \qj\fi-3240\li3600\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1440\tx2520\adjustright {\f4 File\tab Auxiliary\par Type\tab File Type\tab Code\tab Description\par }\pard \qj\fi-3240\li3600\widctlpar\tx1440\tx2520\adjustright {\f4 0x04\tab \tab TXT\tab ASCII text file\par 0x06\tab \tab BIN\tab General-purpose binary file\par 0x0F\tab \tab DIR\tab Folder (directory)\par 0xB0\tab 0x0005\tab SRC\tab ORCA/Pascal source code\par 0xB0\tab 0x0006\tab SRC\tab Script (exec) file source code\par 0xB0\tab 0x0008\tab SRC\tab ORCA/C source code\par 0xB0\tab 0x0015\tab SRC\tab Rez source code\par 0xB1\tab \tab OBJ\tab Object file (compiler output, linker input)\par 0xB2\tab \tab LIB\tab Object code library\par 0xB3\tab \tab S16\tab GS/OS application\par 0xB5\tab \tab EXE\tab Shell application\par 0xB8\tab \tab NDA\tab New Desk Accessory\par 0xBA\tab \tab TOL\tab Tool file\par 0xC0\tab 0x0000\tab PNT\tab Paintworks packed picture\par 0xC0\tab 0x0001\tab PNT\tab Packed super high resolution screen\par 0xC0\tab 0x0002\tab PNT\tab Apple preferred format image\par 0xC1\tab 0x0000\tab PIC\tab Super high resolution screen dump\par 0xC1\tab 0x0001\tab PIC\tab QuickDraw II Pic file\par 0xC8\tab 0x0000\tab FON\tab Standard font\par }\pard \qj\fi-3240\li3600\keepn\widctlpar\tx1440\tx2520\adjustright {\f4 0xD8\tab 0x0002\tab SND\tab ASIF instrument\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table A-2:  Some Common File Types\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CloseGS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CloseGS\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseGS\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct RefNumRecGS \{\par    Word pCount;\par    Word refNum;\par    \} RefNumRecGS, *RefnumRecPtrGS;\par \par void CloseGS(void *pBlockPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x27\tab drvrIOError}{\f4 \tab I/O error\par \tab }{\f6\fs20 0x2B\tab drvrWrtProt}{\f4 \tab Device is write protected\par \tab }{\f6\fs20 0x2E\tab drvrDiskSwitch}{\f4 \tab The disk has been switched\par \tab }{\f6\fs20 0x43\tab invalidRefNum}{\f4 \tab Invalid reference number\par \tab }{\f6\fs20 0x48\tab volumeFull}{\f4 \tab The volume is full\par \tab }{\f6\fs20 0x5A\tab damagedBitMap}{\f4 \tab Block number too large\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This call closes an open file.  Any information GS/OS has buffered in memory will be written to the disk in the process.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 pCount}{\f4 \tab Must be 1.\par \par }{\f6\fs20 refNum}{\f4 \tab This is the reference number (returned by }{\f6\fs20 OpenGS}{\f4 ) for the file to close.  A }{\f6\fs20 refNum}{\f4  of 0 tells GS/OS to close all open files.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CreateGS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CreateGS\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CreateGS\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct CreateRecGS \{\par    Word pCount;\par    GSString255Ptr pathname;\par    Word access;\par    Word fileType;\par    LongWord auxType;\par    Word storageType;\par    LongWord eof;\par    LongWord resourceEOF;\par    \} CreateRecGS, *CreateRecPtrGS;\par \par void CreateGS(void *pBlockPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x10\tab devNotFound}{\f4 \tab Device not found\par \tab }{\f6\fs20 0x27\tab drvrIOError}{\f4 \tab I/O error\par \tab }{\f6\fs20 0x2B\tab drvrWrtProt}{\f4 \tab Device is write protected\par \tab }{\f6\fs20 0x2F\tab drvrOffLine}{\f4 \tab Device offline or no media present\par \tab }{\f6\fs20 0x40\tab badPathSyntax}{\f4 \tab Invalid path name syntax\par \tab }{\f6\fs20 0x44\tab pathNotFound}{\f4 \tab Subdirectory does not exist\par \tab }{\f6\fs20 0x45\tab volNotFound}{\f4 \tab Volume not found\par \tab }{\f6\fs20 0x46\tab fileNotFound}{\f4 \tab File not found\par \tab }{\f6\fs20 0x47\tab dupPathname}{\f4 \tab Create or rename attempted with a name that already exists\par \tab }{\f6\fs20 0x48\tab volumeFull}{\f4 \tab The volume is full\par \tab }{\f6\fs20 0x49\tab volDirFull}{\f4 \tab The volume directory is full\par \tab }{\f6\fs20 0x4B\tab badStoreType}{\f4 \tab Unsupported or incorrect storage type\par \tab }{\f6\fs20 0x52\tab unknownVol}{\f4 \tab Unknown volume type\par \tab }{\f6\fs20 0x58\tab notBlockDev}{\f4 \tab Not a block device\par \tab }{\f6\fs20 0x5A\tab damagedBitMap}{\f4 \tab Block number too large\par \tab }{\f6\fs20 0x70\tab resExistsErr}{\f4 \tab Cannot expand file; resource already exists\par \tab }{\f6\fs20 0x71\tab resAddErr}{\f4 \tab Cannot add a resource fork to this kind of file\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Creates a new file.  For the purpose of this call, a directory is also a file; it\rquote s just a file with a file type of 0x0F.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 pCount}{\f4 \tab Any value from 1 to 7.  This tells how many of the following parameters to use.  In most cases, you should use a value of 5.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 pathname}{\f4 \tab Pointer to a GS/OS input string of type }{\f6\fs20 GSString255}{\f4 .  This parameter is the name of the file to create.  See \ldblquote Path Names\rdblquote  at the start of this section for details about the names.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 access}{\f4 \tab This flag word determines how the file can be accessed.  These are the bits you can set or clear from shells and the Finder to lock and unlock files.  This parameter is normally set to 0xC3.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ProDOS}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FST}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \tab While all of these bits are available with the ProDOS FST, some of the bits will be unavailable with other FSTs.\par \par }\pard \qj\fi-1080\li3240\keepn\widctlpar\adjustright {\f4 bits 15-8\tab Reserved; set to 0.\par bit 7\tab Set this bit if the file can be deleted.\par bit 6\tab Set this bit if the file can be renamed.\par bit 5\tab Set this bit if the file needs to be backed up.  (GS/OS sets this bit anytime the file is changed.)\par bits 4-3\tab Reserved; set to 0.\par bit 2\tab Set this bit if the file should be invisible.  Invisible files normally can\rquote t be seen with shells or the Finder unless you specifically ask to see them.\par bit 1\tab Set this bit if the file can be written to.\par }\pard \qj\fi-1080\li3240\widctlpar\adjustright {\f4 bit 0\tab Set this bit if the file can be read from.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 file type}}}{\v\f6\fs20 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 fileType}{\f4 \tab This is the file type for the file.  See \ldblquote File Types\rdblquote  at the start of this section for some common file types.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 auxiliary file type}}}{\v\f6\fs20 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 auxType}{\f4 \tab This is the auxiliary file type for the file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 storageType}{\f4 \tab This entry determines what sort of file you are creating.\par \par }\pard \qj\fi-900\li3060\widctlpar\adjustright {\f4 0-3\tab Creates a normal data file with a data fork.  Some of these values were used for special purposes in older versions of the operating system; they are all converted to 1 in GS/OS, so that\rquote s what you would normally use.\par \par }\pard \qj\fi-900\li3060\keepn\widctlpar\adjustright {\pard\plain \qj\fi-900\li3060\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 extended file}}}{\pard\plain \qj\fi-900\li3060\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 data fork}}}{\pard\plain \qj\fi-900\li3060\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource fork}}}{\v\f4 \par }\pard \qj\fi-900\li3060\widctlpar\adjustright {\f4 5\tab Creates a file with both a data fork and a resource fork.  These files are also called extended files.\par \par 13\tab Create a directory.  If you use this parameter, make sure the file type is 0x0F.\par \par 0x8005\tab Adds a resource fork to an existing file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 eof}{\f4 \tab This value is used to allocate a specific amount of disk space for the data fork of the file.  As a general rule, don\rquote t use it.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4  for details.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\tx9800\adjustright {\f6\fs20 resourceEOF}{\f4 \tab This value is used to allocate a specific amount of disk space for the resource fork of the file.  As a general rule, don\rquote t use it.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4  for details.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DestroyGS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DestroyGS\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DestroyGS\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct NameRecGS \{\par    Word pCount;\par    GSString255Ptr pathname;\par    \} NameRecGS, *NameRecPtrGS;\par \par void DestroyGS(void *pBlockPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x10\tab devNotFound}{\f4 \tab Device not found\par \tab }{\f6\fs20 0x27\tab drvrIOError}{\f4 \tab I/O error\par \tab }{\f6\fs20 0x2B\tab drvrWrtProt}{\f4 \tab Device is write protected\par \tab }{\f6\fs20 0x40\tab badPathSyntax}{\f4 \tab Invalid path name syntax\par \tab }{\f6\fs20 0x44\tab pathNotFound}{\f4 \tab Subdirectory does not exist\par \tab }{\f6\fs20 0x45\tab volNotFound}{\f4 \tab Volume not found\par \tab }{\f6\fs20 0x46\tab fileNotFound}{\f4 \tab File not found\par \tab }{\f6\fs20 0x4B\tab badStoreType}{\f4 \tab Unsupported or incorrect storage type\par \tab }{\f6\fs20 0x4E\tab invalidAccess}{\f4 \tab Access not allowed\par \tab }{\f6\fs20 0x50\tab fileBusy}{\f4 \tab File is already open\par \tab }{\f6\fs20 0x52\tab unknownVol}{\f4 \tab Unknown volume type\par \tab }{\f6\fs20 0x58\tab notBlockDev}{\f4 \tab Not a block device\par \tab }{\f6\fs20 0x5A\tab damagedBitMap}{\f4 \tab Block number too large\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This command deletes a file.  If the file is an extended file, both the resource fork and the data fork are deleted.\par It is possible to delete directories with this command, but only if all of the files in the directory have already been deleted.\par This command will fail if the disk is write protected or if the delete access bit for the file is not enabled.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 pCount}{\f4 \tab Must be 1.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 pathname}{\f4 \tab Pointer to a GS/OS input string of type }{\f6\fs20 GSString255}{\f4 .  This parameter is the name of the file to create.  See \ldblquote Path Names\rdblquote  at the start of this section for details about the names.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 OpenGS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 OpenGS\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenGS\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct OpenRecGS \{\par    Word pCount;\par    Word refNum;\par    GSString255Ptr pathname;\par    Word requestAccess;\par    Word resourceNumber;\par    Word access;\par    Word fileType;\par    LongWord auxType;\par    Word storageType;\par    TimeRec createDateTime;\par    TimeRec modDateTime;\par    ResultBuf255Ptr optionList;\par    LongWord eof;\par    LongWord blocksUsed;\par    LongWord resourceEOF;\par    LongWord resourceBlocks;\par    \} OpenRecGS, *OpenRecPtrGS;\par \par void OpenGS(void *pBlockPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x27\tab drvrIOError}{\f4 \tab I/O error\par \tab }{\f6\fs20 0x28\tab drvrNoDevice}{\f4 \tab No device connected\par \tab }{\f6\fs20 0x2E\tab drvrDiskSwitch}{\f4 \tab The disk has been switched\par \tab }{\f6\fs20 0x40\tab badPathSyntax}{\f4 \tab Invalid path name syntax\par \tab }{\f6\fs20 0x44\tab pathNotFound}{\f4 \tab Subdirectory does not exist\par \tab }{\f6\fs20 0x45\tab volNotFound}{\f4 \tab Volume not found\par \tab }{\f6\fs20 0x46\tab fileNotFound}{\f4 \tab File not found\par \tab }{\f6\fs20 0x4A\tab badFileFormat}{\f4 \tab Version error (incompatible file type)\par \tab }{\f6\fs20 0x4E\tab invalidAccess}{\f4 \tab Access not allowed\par \tab }{\f6\fs20 0x4F\tab buffTooSmall}{\f4 \tab Buffer too small\par \tab }{\f6\fs20 0x50\tab fileBusy}{\f4 \tab File is already open\par \tab }{\f6\fs20 0x52\tab unknownVol}{\f4 \tab Unknown volume type\par \tab }{\f6\fs20 0x58\tab notBlockDev}{\f4 \tab Not a block device\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This command opens a file.  The open command returns a file reference number (}{\f6\fs20 refNum}{\f4 ) which is used with many of the other GS/OS commands.  You must open a file using this command and get a valid }{\f6\fs20 refNum}{\f4  before using any of the commands that require a }{\f6\fs20 refNum}{\f4  instead of a path name.  In general, that\rquote s the commands that manipulate the file itself, like }{\f6\fs20 ReadGS}{\f4  and }{\f6\fs20 WriteGS}{\f4 .\par In the process of opening the file, }{\f6\fs20 OpenGS}{\f4  can tell you a great deal about the file itself.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 pCount}{\f4 \tab Any value from 2 to 15.  This tells how many of the following parameters to use.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 refNum}{\f4 \tab This value is returned; it is set to the reference number to use with subsequent GS/OS calls.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 pathname}{\f4 \tab Pointer to a GS/OS input string of type }{\f6\fs20 GSString255}{\f4 .  This parameter is the name of the file to open.  See \ldblquote Path Names\rdblquote  at the start of this section for details about the names.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 requestAccess}{\f4 \tab This value must be set to 1, 2 or 3 before the call.  A value of 1 opens the file with read only access.  A value of 2 opens the file with write only access.  A value of 3 opens the file for both reading and writing.  If }{\f6\fs20 pCount}{\f4  is 2, GS/OS opens the file for both input and output.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 resourceNumber}{\f4 \tab If the file is an extended file and this parameter is set to 1, GS/OS opens the resource fork instead of the data fork.  If the file is not an extended file or if this value is set to 0, the data fork is opened.\par \par \tab Resource forks should only be manipulated with Resource Manager calls, so this parameter should always be set to 0.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 access}{\f4 \tab This value is returned; it is the current setting for the access bits.  See }{\f6\fs20 CreateGS}{\f4  for a description of these bits.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 file type}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 fileType}{\f4 \tab This value is returned; it is the file type for the file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 auxiliary file type}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 auxType}{\f4 \tab This value is returned; it is the auxiliary file type for the file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 data fork}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource fork}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 storageType}{\f4 \tab This value is returned; it is the storage type for the file.  For a standard file (a file with just a data fork) this will be 1; for an extended file (a file with a resource fork, whether or not the data fork is empty) this will be 5; for a directory, this will be 13.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 creation time}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 createDateTime}{\f4 \tab This value is returned; it is the creation date and time for the file.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4  for details.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 modification time}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 modDateTime}{\f4 \tab This value is returned; it is the date and time when the file was last modified.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4  for details.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FST}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 optionList}{\f4 \tab You can pass a pointer to a GS/OS output string buffer or }{\f6\fs20 NULL}{\f4  for this parameter.  If you pass the address of a GS/OS output string, }{\f6\fs20 OpenGS}{\f4  returns some FST specific information in the buffer.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4  for details.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EOF}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 data fork}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 eof}{\f4 \tab This value is returned; it is the number of bytes of information stored in the data fork.  GS/OS can do some rudimentary file compression (it doesn\rquote t actually store blocks of zeros on the disk), so this value should not be used to see how much space is used on the disk.  Instead, this is the amount of memory you need to reserve to load the entire data fork into memory.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 disk space}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 data fork}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 blocksUsed}{\f4 \tab This value is returned; it is the number of blocks of disk space needed to store the data fork of the file.  This includes the data fork and blocks used to keep track of the file.  On most devices used on the Apple II}{\f4\fs20 GS}{\f4 , one block is 512 bytes.\par \par \tab Add this value to }{\f6\fs20 resourceBlocks}{\f4  to get the total number of disk blocks used by the file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EOF}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource fork}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 resourceEOF}{\f4 \tab This value is returned; it is the number of bytes of information stored in the resource fork.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 disk space}}}{\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource fork}}}{\v\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 resourceBlocks}{\f4 \tab This value is returned; it is the number of disk blocks needed to store the resource fork of the file.\par \par \tab Add this value to }{\f6\fs20 blocksUsed}{\f4  to get the total number of disk blocks used by the file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ReadGS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ReadGS\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReadGS\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct IORecGS \{\par    Word pCount;\par    Word refNum;\par    Pointer dataBuffer;\par    LongWord requestCount;\par    LongWord transferCount;\par    Word cachePriority;\par    \} IORecGS, *IORecPtrGS;\par \par void ReadGS(void *pBlockPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x27\tab drvrIOError}{\f4 \tab I/O error\par \tab }{\f6\fs20 0x2E\tab drvrDiskSwitch}{\f4 \tab The disk has been switched\par \tab }{\f6\fs20 0x43\tab invalidRefNum}{\f4 \tab Invalid reference number\par \tab }{\f6\fs20 0x4C\tab eofEncountered}{\f4 \tab End of file encountered\par \tab }{\f6\fs20 0x4E\tab invalidAccess}{\f4 \tab Access not allowed\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 ReadGS}{\f4  reads bytes from a file opened by }{\f6\fs20 OpenGS}{\f4 .\par There are a number of options and strange ways you can use this command that are not covered here; see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference Manual}{\f4  for details.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 pCount}{\f4 \tab This can be 4 or 5.\par \par }{\f6\fs20 refNum}{\f4 \tab Set this value to the }{\f6\fs20 refNum}{\f4  returned by the }{\f6\fs20 OpenGS}{\f4  call.\par \par }{\f6\fs20 dataBuffer}{\f4 \tab The bytes read from disk are placed in memory starting at this address.\par \par }{\f6\fs20 requestCount}{\f4 \tab Set this parameter to the number of bytes you wish to read.\par \par \tab It is possible to read the file in pieces.  Opening the file sets things up so you start reading from the start of the file.  If you only read part of the file, the next read command will pick up where the previous read command left off.  There are also GS/OS commands (not covered in this appendix) that will let you start reading from a specific spot in the file.\par \par }{\f6\fs20 transferCount}{\f4 \tab This value is returned; it is the number of bytes actually read.  It can be smaller than }{\f6\fs20 requestCount}{\f4  if the end of file was reached, if a disk error occurs, or when some GS/OS options not discussed here are in effect.  If you are reading disk files as described in this course, though, and being careful not to ask for more bytes than are in the file, }{\f6\fs20 transferCount}{\f4  will always equal }{\f6\fs20 requestCount}{\f4  unless an error occurs.\par \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1800\li2160\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 cache}}}{\v\f6\fs20 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 cachePriority}{\f4 \tab If you will be reading a file several times, you can use this parameter to speed up the process.  If this value is 1, it instructs GS/OS to try to cache blocks from the file.  Assuming there is enough memory available in the GS/OS cache buffer, the blocks from the file will still be in memory when you read them the next time.  Use a value of 0 to tell GS/OS not to cache the file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 WriteGS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 WriteGS\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 WriteGS\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct IORecGS \{\par    Word pCount;\par    Word refNum;\par    Pointer dataBuffer;\par    LongWord requestCount;\par    LongWord transferCount;\par    Word cachePriority;\par    \} IORecGS, *IORecPtrGS;\par \par void WriteGS(void *pBlockPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x27\tab drvrIOError}{\f4 \tab I/O error\par \tab }{\f6\fs20 0x28\tab drvrNoDevice}{\f4 \tab No device connected\par \tab }{\f6\fs20 0x2E\tab drvrDiskSwitch}{\f4 \tab The disk has been switched\par \tab }{\f6\fs20 0x40\tab badPathSyntax}{\f4 \tab Invalid path name syntax\par \tab }{\f6\fs20 0x43\tab invalidRefNum}{\f4 \tab Invalid reference number\par \tab }{\f6\fs20 0x48\tab volumeFull}{\f4 \tab The volume is full\par \tab }{\f6\fs20 0x4E\tab invalidAccess}{\f4 \tab Access not allowed\par \tab }{\f6\fs20 0x5A\tab damagedBitMap}{\f4 \tab Block number too large\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 WriteGS}{\f4  writes to a file, transferring bytes from memory to the disk file.  The parameters \endash  and in fact, the type of the record passed \endash  are identical to those used for the }{\f6\fs20 ReadGS}{\f4  call; see }{\f6\fs20 ReadGS}{\f4  for a complete description.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GS/OS Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GS/OS Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct GSString255 \{\par    Word length;                         /* Number of Chars in text field  */\par    char text[255];\par    \} GSString255}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GSString255}}}{\f6\fs20 , *GSString255Ptr}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GSString255Ptr}}}{\f6\fs20 , **GSString255Hndl}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GSString255Hndl}}}{\f6\fs20 ;\par }\pard \widctlpar\adjustright {\f6\fs20 typedef GSString255Hndl *GSString255HndlPtr;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct ResultBuf255 \{\par    Word bufSize;\par    GSString255 bufString;\par    \} ResultBuf255}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 ResultBuf255}}}{\f6\fs20 , *ResultBuf255Ptr}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 ResultBuf255Ptr}}}{\f6\fs20 , **ResultBuf255Hndl}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 ResultBuf255Hndl}}}{\f6\fs20 ;\par }\pard \widctlpar\adjustright {\f6\fs20 typedef ResultBuf255Hndl *ResultBuf255HndlPtr ;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 LineEdit Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 LineEdit Tool Set\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LineEdit Tool Set}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named LineEdit.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LECopy}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LECopy\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LECopy\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LECopy(LERecHndl LEHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab QuickDraw II errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Copies the selected text from the given line edit record into the line edit scrap.  If no text is selected, the line edit scrap is emptied.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LECut}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LECut\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LECut\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LECut(LERecHndl LEHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab QuickDraw II errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Copies the selected text from the given line edit record into the line edit scrap, then deletes the characters from the line edit record and redraws the contents.  If no text is selected, the line edit scrap is emptied, but the text in the control is not changed.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LEDelete}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LEDelete\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEDelete\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LEDelete(LERecHndl LEHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab QuickDraw II errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Removes any selected characters from the given line edit record.  If no text is selected, the call does nothing.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LEFromScrap}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LEFromScrap\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEFromScrap\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LEFromScrap(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1404\tab leScrapErr}{\f4 \tab The desk scrap is too big to copy\par \tab Scrap Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Copies the text scrap from the Scrap Manager into the line edit scrap buffer.\par The text edit scrap is not changed if the text scrap in the Scrap Manager\rquote s scrap is longer than 255 characters.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LEPaste}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LEPaste\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEPaste\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LEPaste(LERecHndl LEHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab QuickDraw II errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If any text is selected, it is deleted.  The text in the line edit scrap is then inserted at the insertion point.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LEToScrap}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LEToScrap\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LEToScrap\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 line edit control}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LEToScrap(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Scrap Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The text in the line edit scrap is copied into the Scrap Manager\rquote s scrap.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LineEdit Tool Set Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LineEdit Tool Set Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct LERec \{\par    Handle leLineHandle;\par    Word leLength;\par    Word leMaxLength;\par    Rect leDestRect;\par    Rect leViewRect;\par    GrafPortPtr lePort;\par    Word leLineHite;\par    Word leBaseHite;\par    Word leSelStart;\par    Word leSelEnd;\par    Word leActFlg;\par    Word leCarAct;\par    Word leCarOn;\par    LongWord leCarTime;\par    VoidProcPtr leHiliteHook;\par    VoidProcPtr leCaretHook;\par    Word leJust;\par    Word lePWChar;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct LERec LERec, *LERecPtr, **LERecHndl}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 LERecHndl}}}{\f6\fs20 ;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 List Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 List Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 List Manager}}}{\f4 {\*\bkmkstart bk102}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named List.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawMember2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawMember2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawMember2\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawMember2(Word itemnum, Handle theListCtl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 After your application changes a list that is being displayed in a list control, you should call }{\f6\fs20 DrawMember2}{\f4 .  To draw a single list entry, pass the relative number of the entry (i.e., the first item in the list is 1, the next item is 2, and so on) for }{\f6\fs20 itemnum}{\f4 .  To redraw the entire list, pass 0 for }{\f6\fs20 itemnum}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NewList2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NewList2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewList2\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void NewList2(Pointer drawRtn, Word listStart, Ref listRef, Word listRefDesc,\par    Word listSize, Handle theListCtl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 NewList2}{\f4  changes the list in a given list control.  If there was already a list being displayed, the control forgets about the original list.  It is up to the application to dispose of the original list, if that is appropriate.\par For details about how to use resources for the list itself, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , page 35-7.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 drawRtn}{\f4 \tab This is the address of a subroutine that will draw the list.  This subroutine can be defined in C, so long as the databank pragma is used to reset the data bank register.  The function should be declared with three parameters:\par \par }\pard \qj\li2160\widctlpar\adjustright {\f6\fs20 void DrawListEntry (Rect *r, Ptr entry, Handle h);\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par \tab The first parameter is a rectangle surrounding the area where the list element should be drawn.  }{\f6\fs20 entry}{\f4  is a pointer to the list element to redraw.  }{\f6\fs20 h}{\f4  is the control handle for the list control.\par \par \tab The draw routine should take the highlight and selection state for the list entry into account.\par \par \tab Pass }{\f6\fs20 NULL}{\f4  to use the default list draw subroutine.  Pass -1 to use the drawing routine that is already in place.\par \par }{\f6\fs20 listStart}{\f4 \tab This is the number of the list element to display at the top of the list.  Pass 1 to display the first member of the list, 2 to place the second list item at the top, and so forth.\par \par }{\f6\fs20 listRef}{\f4 \tab A pointer, handle, or resource ID for the list to display.\par \par }{\f6\fs20 listRefDesc}{\f4 \tab Controls the type of parameter passed for }{\f6\fs20 listRef}{\f4 .  Pass 0 for a pointer, 1 for a handle, 2 for a resource ID, and -1 to leave the current list in place.\par \par }{\f6\fs20 listSize}{\f4 \tab Number of elements in the list.\par \par }{\f6\fs20 theListCtl}{\f4 \tab Control handle for the list control.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SortList2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SortList2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SortList2\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SortList2(Pointer compareRtn, Handle theListCtl);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sorts the elements in a list.  Call }{\f6\fs20 DrawMember2}{\f4  after making this call to redraw the list.\par }{\f6\fs20 compareRtn}{\f4  is a pointer to a compare function.  Pass }{\f6\fs20 NULL}{\f4  to use the default compare function, which sorts the list based on the leading string in each list element.  For details about how to write your own compare subroutine, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 1}{\f4 , page 11-24.  For information about exactly how characters are compared, see }{\i\f4 Programmer\rquote s Reference to System 6.0}{\f4 .\par {\*\bkmkend bk102}}{\pard\plain \qj\fi360\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 list controls}{\rxe bk102}}}{\v\f4 \par }{\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Loader}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Loader\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Loader}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named Loader.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LGetPathname2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LGetPathname2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LGetPathname2\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Pointer LGetPathname2(Word userID, Word fileNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1101\tab }{\f4 Entry not found\par \tab }{\f6\fs20 0x1103\tab }{\f4 Path name error\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 LGetPathname2}{\f4  returns a pointer to the full path name for an executing program.  The path name is an internal name in a loader table, so it should not be modified in any way.\par }{\f6\fs20 userID}{\f4  is the user ID for the program.\par }{\f6\fs20 fileNum}{\f4  is the load file number for the program.  This will always be 1 for an application running from a single executable file.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Memory Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Memory Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Memory Manager}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In ORCA/C the header file for this tool is named Memory.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DisposeHandle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DisposeHandle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DisposeHandle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DisposeHandle(Handle theHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0206\tab handleErr}{\f4 \tab Invalid handle\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Deallocates the memory associated with the handle, allowing the memory to be reused.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FindHandle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FindHandle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FindHandle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Handle FindHandle(Pointer memLocation);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 FindHandle}{\f4  returns the handle for the block of memory that contains the byte pointed to by }{\f6\fs20 memLocation}{\f4 .  }{\f6\fs20 FindHandle}{\f4  returns }{\f6\fs20 NULL}{\f4  if the byte isn\rquote t in an allocated memory handle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FreeMem}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FreeMem\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FreeMem\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord FreeMem(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the total amount of free memory, in bytes.  This does not include memory that could be made free by purging.\par The fact that this call says a certain number of bytes are free does not indicate that all of the memory can be allocated with a single }{\f6\fs20 NewHandle}{\f4  call, since the free memory is not all at one location.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 HLock}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 HLock\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HLock\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void HLock(Handle theHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0206\tab handleErr}{\f4 \tab Invalid handle\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Locks the handle.  Once locked, the memory pointed to by the handle cannot be moved or purged.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 HUnlock}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 HUnlock\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HUnlock\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void HUnlock(Handle theHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0206\tab handleErr}{\f4 \tab Invalid handle\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Unlocks the handle.  If the handle is moveable, unlocking the handle allows it to be moved.  If the purge level for the handle is greater than zero, unlocking the handle allows the memory to be purged.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 MaxBlock}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 MaxBlock\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MaxBlock\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord MaxBlock(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the size, in bytes, of the largest block of free memory.  Purging or compacting memory could increase this value.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NewHandle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NewHandle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewHandle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Handle NewHandle(LongWord blockSize, Word userID, Word memAttributes,\par    Pointer memLocation);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0201\tab memErr}{\f4 \tab Unable to allocate memory\par \tab }{\f6\fs20 0x0204\tab lockErr}{\f4 \tab Illegal operation on a locked or immovable block\par \tab }{\f6\fs20 0x0207\tab idErr}{\f4 \tab Invalid user ID\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Allocates a blocks of memory and returns a handle to that block of memory.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 blockSize}{\f4 \tab This is the amount of memory to set aside, in bytes.\par \par }{\f6\fs20 userID}{\f4 \tab This is the user ID for the memory.  In most cases, this is the program\rquote s memory ID, as returned by C\rquote s }{\f6\fs20 userid}{\f4  function.\par \par }{\f6\fs20 memAttributes}{\f4 \tab This flags word controls the way the memory is allocated \endash  where it comes from, whether it can be moved, and whether it can be purged.\par \par }\pard \qj\fi-2160\li4680\widctlpar\tx3240\adjustright {\f4 15\tab }{\f6\fs20 attrLocked}{\f4 \tab If this bit is set, the handle will be initially locked; if this bit is clear, the handle will be unlocked.\par \par 14\tab }{\f6\fs20 attrFixed}{\f4 \tab This bit is set for fixed memory, and clear for moveable memory.  Both bits 14 and 15 must be clear before the Memory Manager will actually move the memory.\par \par 13-10\tab \tab Reserved; set to 0.\par \par 9-8\tab }{\f6\fs20 attrPurge}{\f4 \tab These two bits define the initial purge level, which can be 0 (00), 1 (01), 2 (10) or 3 (11).\par \par 7-5\tab \tab Reserved; set to 0.\par \par 4\tab }{\f6\fs20 attrNoCross}{\f4 \tab If this bit is set, the Memory Manager will make sure that all of the memory is in a single bank of memory.\par \par 3\tab }{\f6\fs20 attrNoSpec}{\f4 \tab If this bit is set, the Memory Manager won\rquote t give you any special memory.  Special memory includes most of the memory in banks 0x00, 0x01, 0xE0 and 0xE1.\par \par 2\tab }{\f6\fs20 attrPage}{\f4 \tab If this bit is set, the Memory Manager will make sure the chunk of memory it returns starts on a page boundary.\par \par 1\tab }{\f6\fs20 attrAddr}{\f4 \tab This flag forces the memory to be allocated at a particular location; specifically, wherever the last parameter, }{\f6\fs20 location}{\f4 , points.\par \par 0\tab }{\f6\fs20 attrBank}{\f4 \tab If this flag is set, the memory will come from a specific bank, but it can come from anywhere in the bank.\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f4 \par }{\f6\fs20 memLocation}{\f4 \tab If the }{\f6\fs20 attrAddr}{\f4  bit is set, this location is the address of the first byte of memory to be allocated; the Memory Manager will return an out of memory error if the memory is not available.  If the }{\f6\fs20 attrBank}{\f4  bit is set, the memory will be allocated from the same bank as this location, but can be allocated from any position within that bank.\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 RealFreeMem}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 RealFreeMem\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 RealFreeMem\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord RealFreeMem(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the total amount of memory that is currently free, plus the amount of memory that could be freed by purging.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetHandleID}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetHandleID\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetHandleID\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word SetHandleID(Word newID, Handle theHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 SetHandleID}{\f4  changes the user ID for the specified handle to }{\f6\fs20 newID}{\f4 , returning the old user ID in the process.  Pass 0 for }{\f6\fs20 newID}{\f4  to read the user ID for a handle without changing the handle\rquote s current user ID.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetPurge}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetPurge\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPurge\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetPurge(Word purgeLevel, Handle theHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0206\tab handleErr}{\f4 \tab Invalid handle\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Set the purge level for the given handle.  The purge level should be a value from 0 to 3.  Handles with a purge level of 0 cannot be purged.  Handles with any other purge level may be deallocated if the handle is unlocked and the Memory Manager can\rquote t allocate enough memory for a }{\f6\fs20 NewHandle}{\f4  call without purging.\par If memory is purged, handles with a purge level of 3 are purged first, then handles with a purge level of 2, and finally those with a purge level of 1.\par A purge level of 3 is reserved for use by the System Loader.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Menu Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Menu Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Menu Manager}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named Menu.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CheckMItem}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CheckMItem\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:checked}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CheckMItem\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void CheckMItem(Boolean checkedFlag, Word itemNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If }{\f6\fs20 checkedFlag}{\f4  is }{\f6\fs20 TRUE}{\f4 , a check mark is placed beside the menu item specified by }{\f6\fs20 itemNum}{\f4 .  If }{\f6\fs20 checkedFlag}{\f4  is }{\f6\fs20 FALSE}{\f4 , any character to the left of menu item }{\f6\fs20 itemNum}{\f4  is erased.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DisableMItem}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DisableMItem\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:disabled}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DisableMItem\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DisableMItem(Word itemNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Menu item }{\f6\fs20 itemNum}{\f4  is dimmed.  The item can\rquote t be selected from the menu until it has been enabled by a call to }{\f6\fs20 EnableMItem}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawMenuBar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawMenuBar\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawMenuBar\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawMenuBar(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Draws the current menu bar, along with the titles for any menus in the menu bar.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 EnableMItem}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 EnableMItem\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EnableMItem\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:disabled}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void EnableMItem(Word itemNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Menu item }{\f6\fs20 itemNum}{\f4  is enabled.  The menu item is drawn normally the next time the menu is pulled down, and the menu item can be selected.\par See also }{\f6\fs20 DisableMItem}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FixMenuBar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FixMenuBar\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FixMenuBar\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word FixMenuBar (void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Computes the sizes of the menu bar and the menus in the menu bar.  The height of the menu bar depends on the fonts used in the titles of the various menus in the menu bar.  The widths of each menu title are also calculated.  Finally, }{\f6\fs20 CalcMenuSize}{\f4  is called for each of the menus in the menu bar.\par If you don\rquote t make this call, it is quite possible that your program will crash the first time you use the menu bar.\par }{\f6\fs20 FixMenuBar}{\f4  returns the height of the menu bar in pixels.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 HiliteMenu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 HiliteMenu\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HiliteMenu\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void HiliteMenu(Boolean hiliteFlag, Word menuNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Highlights or unhighlights menu }{\f6\fs20 menuNum}{\f4 .  Set }{\f6\fs20 hiliteFlag}{\f4  to }{\f6\fs20 TRUE}{\f4  to highlight the menu, or to }{\f6\fs20 FALSE}{\f4  to unhighlight the menu.\par When a menu item is selected by the user, either though a keyboard command identified by }{\f6\fs20 MenuKey}{\f4  or through a mouse down handled by }{\f6\fs20 MenuSelect}{\f4 , the Menu Manager highlights the menu containing the selected command.  According to the Apple human interface guidelines, the menu should stay highlighted until your program finishes executing the command.  Once your program finishes executing the command, you should call }{\f6\fs20 HiliteMenu}{\f4  with the appropriate menu number and with }{\f6\fs20 hiliteFlag}{\f4  set to }{\f6\fs20 FALSE}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InsertMenu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InsertMenu\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InsertMenu\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InsertMenu(MenuRecHndl addMenu, Word insertAfter);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Inserts the menu }{\f6\fs20 addMenu}{\f4  into the current menu bar.  If }{\f6\fs20 insertAfter}{\f4  is 0, the menu is placed to the left of all of the menus currently in the menu bar.  If }{\f6\fs20 insertAfter}{\f4  is not zero, the new menu is inserted to the right of the menu whose ID is specified by }{\f6\fs20 insertAfter}{\f4 .\par After making this call, you need to call }{\f6\fs20 FixMenuBar}{\f4  and }{\f6\fs20 DrawMenuBar}{\f4  before you enter your event loop.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 MenuKey}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 MenuKey\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MenuKey\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 keyboard equivalent}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void MenuKey(WmTaskRecPtr theTask, MenuRecHndl theMenuBar);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you find a key down event in your event loop and the command key is being held down, make a call to }{\f6\fs20 MenuKey}{\f4  to see if the keypress is a menu command key equivalent.  When you call }{\f6\fs20 MenuKey}{\f4 , you pass an event record; this is generally the same event record you used when you called }{\f6\fs20 GetNextEvent}{\f4 .  You also pass the handle of the menu bar you want }{\f6\fs20 MenuKey}{\f4  to check; in general, you pass }{\f6\fs20 NULL}{\f4  to indicate the system menu bar.\par If the keystroke is a menu command key equivalent, the menu bar containing the correct menu item becomes the current menu bar, the menu containing the menu item selected is highlighted, and the task record is modified.  The }{\f6\fs20 wmTaskData}{\f4  field of the event record is set so the least significant word is menu item ID, while the most significant word holds the menu ID for the menu containing the selected menu item.\par If the keystroke is not a menu command key equivalent, the least significant word of the }{\f6\fs20 wmTaskData}{\f4  field is set to 0.\par If there is more than one menu item with the same keyboard equivalent, }{\f6\fs20 MenuKey}{\f4  returns the menu item for the first one it finds.  Of course, you shouldn\rquote t have two menu items with the same keyboard equivalent.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 MenuSelect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 MenuSelect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MenuSelect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus\:events}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void MenuSelect(WmTaskRecPtr theTask, MenuRecHndl theMenuBar);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When you detect a mouse down event in the menu bar, you should call }{\f6\fs20 MenuSelect}{\f4  to handle the event.  (Mouse down events in the menu bar are generally detected by a call to }{\f6\fs20 FindWindow}{\f4 .)  }{\f6\fs20 MenuSelect}{\f4  tracks the mouse\rquote s movements, pulling down menus and highlighting menus and menu items as appropriate.  When the mouse is released, }{\f6\fs20 MenuSelect}{\f4  figures out if a menu command has been selected.  If so, the menu item number for the selected menu command is returned in the least significant word of the }{\f6\fs20 wmTaskData}{\f4  field of }{\f6\fs20 theTask}{\f4 , and the menu number for the menu that contains the menu item is returned in the most significant word of the }{\f6\fs20 wmTaskData}{\f4  field.  If no command was selected, the least significant word of the }{\f6\fs20 wmTaskData}{\f4  field is set to zero.\par When you call }{\f6\fs20 MenuSelect}{\f4 , you pass an event record and a menu bar handle.  To track a mouse down in the system menu bar, pass }{\f6\fs20 NULL}{\f4  for }{\f6\fs20 theMenuBar}{\f4 .  The event record you pass should generally be the same one returned by }{\f6\fs20 GetNextEvent}{\f4 .  }{\f6\fs20 MenuSelect}{\f4  uses some of the fields in the record as inputs, and returns information to you in the }{\f6\fs20 wmTaskData}{\f4  field.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NewMenu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NewMenu\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewMenu\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 MenuRecHndl NewMenu(Pointer newMenuString);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 You pass a string defining a menu and the items in a menu, and }{\f6\fs20 NewMenu}{\f4  returns a handle to a menu that you can then use as an input to }{\f6\fs20 InsertMenu}{\f4 .\par The menu string consists of a series of lines, separated from one another by null characters (}{\f6\fs20 '\\x00'}{\f4 ) or return characters (}{\f6\fs20 '\\r'}{\f4 ).  The first line defines the menu title.  This is followed by one or more lines defining menu items.  The last line is used solely to mark the end of the menu string.\par Each line starts with one or two control characters.  The initial menu line starts with two characters, generally }{\f6\fs20 ">>"}{\f4 .  While both of these characters must be the same, you can use any character you like.  Menu items also start with two characters, generally }{\f6\fs20 "--"}{\f4 .  Once again, you can pick any character you like, so long as you use the same two characters before each menu item.  The last line consists of a single character, generally }{\f6\fs20 '.'}{\f4 .  This character cannot be the same character used to start the menu title line or the menu item lines.  This single character is the only character on the last line of the menu string.\par For menu items and menus, the initial two characters are followed by the characters making up the title of the menu or menu item.  All characters up to the end of the line or the first }{\f6\fs20 '\\'}{\f4  character become a part of the menu title or item string.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 apple menu}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 A menu name of }{\f6\fs20 '@'}{\f4  has a special meaning.  When this character is the only character in a menu title, the Menu Manager draws a rainbow apple instead of printing the @ character.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items\:separators}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 A menu item with a title of }{\f6\fs20 '-'}{\f4  has special meaning.  Instead of writing the \endash  character as the name of the menu item, the Menu Manager draws a line across the entire menu.  Lines of this type are generally disabled, and are used as separators to visually divide the commands in a complex menu into logical groups.\par The menu title or menu item title can be followed by a backslash character (\\, coded as }{\f6\fs20 "\\\\"}{\f4 ), which is followed by one or more control codes.  The allowed control codes are shown in Table A-3.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu string}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu control characters}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Menu string must remain in a fixed memory location, and must not be changed by the application after the call to }{\f6\fs20 NewMenu}{\f4 .\par \par }\pard \qj\fi-1440\li2160\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 Character\tab Description\par }\pard \qj\fi-1440\li2160\ri360\widctlpar\adjustright {\f4 *\tab The two characters that follow this one are used as keyboard equivalents.  The first of the characters is shown in the menu when you pull the menu down.  Most of the time, the first letter will be an uppercase letter or an unshifted keyboard key, while the second letter will be the lowercase equivalent of the uppercase letter or the shifted equivalent of the unshifted key.\par B\tab Use bold text for the menu item.\par C\tab Mark the menu item with the character that follows this one.  This is generally a check mark, which is }{\f6\fs20 '\\x12'}{\f4 .\par D\tab Dim (disable) the menu item.\par H\tab This character is used before a two-byte sequence which defines the menu number or menu item number.  From C, it\rquote s generally best to use N, instead.\par I\tab Use italicized text for the menu item.\par N\tab This character is followed by one or more decimal digits.  The resulting number is used as the menu number or menu item number, depending on whether you are defining a menu or a menu item.\par U\tab Underline the text for the menu item.\par V\tab Place a dividing line under the item.\par }\pard \qj\fi-1440\li2160\ri360\keepn\widctlpar\adjustright {\f4 X\tab Use color replace mode to avoid green-apple menu sickness.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table A-3:  Menu String Control Characters\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NewMenuBar2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NewMenuBar2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewMenuBar2\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetMenuBar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSysBar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 MenuBarRecHndl NewMenuBar2(Word refDesc, Ref menuBarTRef, Pointer windowPtr);}{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 NewMenuBar2}{\f4  creates a menu bar in a single step using a menu template.\par }{\f6\fs20 refDesc}{\f4  defines the type of parameter that will be used for }{\f6\fs20 menuBarTRef}{\f4 .  The possible values for }{\f6\fs20 refDesc}{\f4  are:\par \par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1260\adjustright {\f4 value\tab name\tab meaning\par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\tx1260\adjustright {\f4 0\tab }{\f6\fs20 refIsPointer}{\f4 \tab }{\f6\fs20 menuBarTRef}{\f4  is a pointer to a menu bar template.  In this course, we always create the menu bar template using resources, so the format for the template is not covered.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4  for complete information about menu templates.\par 1\tab }{\f6\fs20 refIsHandle}{\f4 \tab }{\f6\fs20 menuBarTRef}{\f4  is a handle to a menu bar template.\par }\pard \qj\fi-2880\li3240\ri360\widctlpar\tx1260\adjustright {\f4 2\tab }{\f6\fs20 refIsResource}{\f4 \tab }{\f6\fs20 menuBarTRef}{\f4  is the resource ID for an }{\f6\fs20 rMenuBar}{\f4  resource.  See Appendix B for a description of the }{\f6\fs20 rMenuBar}{\f4  resource.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }{\f6\fs20 windowPtr}{\f4  is a pointer to the window containing the menu bar.  }{\f6\fs20 windowPtr}{\f4  should be NULL for the system menu bar, which is the only one we have used in this course.\par While this call can create a new system menu bar, it doesn\rquote t make the menu bar the current system menu bar.  To create a new system menu bar, follow this call with calls to }{\f6\fs20 SetSysBar}{\f4  and }{\f6\fs20 SetMenuBar}{\f4 , like this:\par \par }\pard \fi180\keepn\widctlpar\adjustright {\f6\fs20 menuBarHand = NewMenuBar2(refIsResource, menuID, NULL);\par SetSysBar(menuBarHand);\par }\pard \fi180\widctlpar\adjustright {\f6\fs20 SetMenuBar(NULL);\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetMenuBar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetMenuBar\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetMenuBar\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }{\f6\fs20 void SetMenuBar(MenuBarRecHndl theBarHandle);}{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 SetMenuBar}{\f4  makes the menu bar whose handle is }{\f6\fs20 theBarHandle}{\f4  the current menu bar.  If you want to make the system menu bar the current menu bar, pass }{\f6\fs20 NULL}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetMenuFlag}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetMenuFlag\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetMenuFlag\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetMenuFlag(Word newValue, Word menuNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the flags that control the state of the menu title.  Call }{\f6\fs20 DrawMenuBar}{\f4  after this call to redraw the menu bar in the new state.\par Table A-4 shows the predefined flag words you can use for the }{\f6\fs20 newValue}{\f4  parameter, along with the names for the flags.  To change the status of a menu, call }{\f6\fs20 SetMenuFlag}{\f4  with one of the flag words from the table.\par The }{\f6\fs20 menuNum}{\f4  parameter is the menu ID number of the menu you want to change.\par \par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx2160\tx3240\adjustright {\f4 Name\tab Value\tab Description\par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\tx2160\tx3240\adjustright {\f6\fs20 enableMenu}{\f4 \tab }{\f6\fs20 0xFF7F}{\f4 \tab The menu will be selectable, and will not be dimmed.\par }{\f6\fs20 disableMenu}{\f4 \tab }{\f6\fs20 0x0080}{\f4 \tab The menu and all items in the menu will be dimmed and cannot be selected.\par }{\f6\fs20 colorReplace}{\f4 \tab }{\f6\fs20 0xFFDF}{\f4 \tab Draw the title and background in the normal highlighted state.\par }{\f6\fs20 xorTitleHilite}{\f4 \tab }{\f6\fs20 0x0020}{\f4 \tab Highlight the title and background using XOR color replace.\par }{\f6\fs20 standardMenu}{\f4 \tab }{\f6\fs20 0xFFEF}{\f4 \tab The menu is a standard menu.\par }{\f6\fs20 customMenu}{\f4 \tab }{\f6\fs20 0x0010}{\f4 \tab The menu is a custom menu.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table A-4: Menu Flags\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetMItem}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetMItem\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetMItem\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items\:changing text}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetMItem(Pointer newItem, Word itemNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Change the title of menu item }{\f6\fs20 itemNum}{\f4  to the title string }{\f6\fs20 newItem}{\f4 .  The title string must remain in a fixed location in memory.  Like a menu item string as passed to }{\f6\fs20 NewMenu}{\f4 , this menu string must start with two characters that are not a part of the menu item title, and the string must end in either a null character (}{\f6\fs20 '\\x00'}{\f4 ) or a return character (}{\f6\fs20 '\\r'}{\f4 ).  Unlike the menu item string passed to }{\f6\fs20 NewMenu}{\f4 , the new name of the menu item is not followed by control characters.  All of the information normally set by control characters is copied from the existing menu item.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetMItemStyle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetMItemStyle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetMItemStyle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetMItemStyle(TextStyle textStyle, Word itemNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the text style for a menu item.  The }{\f6\fs20 textStyle}{\f4  parameter is a flags word with the font styles laid out as follows:\par \par }\pard \qj\li720\keepn\widctlpar\tx1800\adjustright {\f4 bits 15-5\tab Reserved; set to 0.\par bit 4\tab Set for shadowed text.\par bit 3\tab Set for outlined text.\par bit 2\tab Set for underlined text.\par bit 1\tab Set for italicized text.\par }\pard \qj\li720\widctlpar\tx1800\adjustright {\f4 bit 0\tab Set for bold text.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetSysBar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetSysBar\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSysBar\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }{\f6\fs20 void SetSysBar(MenuBarRecHndl theBarHandle);}{\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 SetSysBar}{\f4  makes the menu bar whose handle is }{\f6\fs20 theBarHandle}{\f4  the current, system menu bar.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Menu Manager Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Menu Manager Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* MenuFlag Masks */\par #define menuCacheMask 0x0008\par #define customMenu 0x0010\par #define xorMItemHilite 0x0020\par #define xorTitleHilite 0x0020\par #define underMItem 0x0040\par #define disableItem 0x0080\par #define disableMenu 0x0080\par #define enableItem 0xFF7F\par #define enableMenu 0xFF7F\par #define noUnderMItem 0xFFBF\par #define colorMItemHilite 0xFFDF\par #define colorTitleHilite 0xFFDF\par #define colorReplace 0xFFDF\par }\pard \widctlpar\adjustright {\f6\fs20 #define standardMenu 0xFFEF\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct MenuRec \{\par    Word menuID;                         /* Menu's ID number */\par    Word menuWidth;                      /* Width of menu */\par    Word menuHeight;                     /* Height of menu */\par    WordProcPtr menuProc;                /* Menu's definition procedure */\par    Word menuFlag;                       /* Bit flags */\par    Word numOfItems;\par    Word titleWidth;                     /* Width of menu's title */\par    Pointer titleName;\par    Handle menuCache;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct MenuRec MenuRec, *MenuRecPtr, **MenuRecHndl}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 MenuRecHndl}}}{\f6\fs20 ;\par \par typedef Integer TextStyle}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TextStyle}}}{\f6\fs20 ;\par \par typedef CtlRec MenuBarRec, *MenuBarRecPtr, **MenuBarRecHndl}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 MenuBarRecHndl}}}{\f6\fs20 ;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Miscellaneous Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Miscellaneous Tool Set\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par In ORCA/C the header file for this tool is named MiscTool.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ReadAsciiTime}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ReadAsciiTime\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReadAsciiTime\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ReadAsciiTime(Pointer bufferAddress);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The current time is returned in the buffer, which should be at least 20 characters long.  The time is returned as a series of 20 characters with the most significant bit set.  There is no length word or trailing null character.\par In most cases, you will have }{\f6\fs20 ReadAsciiTime}{\f4  stuff the characters into a string, then set a length byte (for a p-string) or a trailing null character (for a C-string) manually.  Anding all 20 characters with 0x7F will clear the most significant bit.  These steps, combined, create a true ASCII string.\par There are several time formats available.  The various time formats are selected from the control panel, so they aren\rquote t under the control of this call.  For details, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 1}{\f4 , page 14-16.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SysBeep}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SysBeep\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SysBeep\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SysBeep(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Beeps the speaker.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SysFailMgr}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SysFailMgr\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SysFailMgr\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SysFailMgr(Word errorCode, Pointer failString);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Stops the computer cold, forcing a reboot.  The screen switches to a text display with a sliding apple.  The first parameter is printed as a four digit hexadecimal value; this error number follows the error message.  The second parameter is either }{\f6\fs20 NULL}{\f4 , which displays a default message (\ldblquote FATAL SYSTEM ERROR\rdblquote ) or a pointer to a p-string; this string is displayed on the screen.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Note Synthesizer}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Note Synthesizer\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Note Synthesizer}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named NoteSyn.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 AllNotesOff}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 AllNotesOff\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AllNotesOff\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void AllNotesOff(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Turns off all notes started using the Note Synthesizer.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 AllocGen}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 AllocGen\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AllocGen\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word AllocGen(Word requestPriority);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1921\tab nsNotAvail}{\f4 \tab No generators are available\par \tab }{\f6\fs20 0x1923\tab nsNotInit}{\f4 \tab The Note Synthesizer has not been started\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 AllocGen}{\f4  looks for an available sound generator, or, of all sound generators are in used, one with a lower priority than }{\f6\fs20 requestPriority}{\f4 .  If it finds a sound generator, it returns the generator number, which will be in the range 0 to 13.  If no generators are available, }{\f6\fs20 AllocGen}{\f4  returns an error.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NoteOff}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NoteOff\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NoteOff\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void NoteOff(Word genNum, Word semitone);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Switches a note started with }{\f6\fs20 NoteOn}{\f4  to its release mode, where it will decay quickly to a zero volume.  At that point, the priority for the generator is set to zero so the generator can be reallocated by }{\f6\fs20 AllocGen}{\f4 .\par The }{\f6\fs20 genNum}{\f4  and }{\f6\fs20 semitone}{\f4  parameters should be the same ones passed earlier to }{\f6\fs20 NoteOn}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NoteOn}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NoteOn\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NoteOn\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void NoteOn(Word genNum, Word semitone, Word volume, Pointer theInstrument);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1924\tab nsGenAlreadyOn}{\f4 \tab The specified note is already being played\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Starts playing a note.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 genNum}{\f4 \tab This is the sound generator number to use.  It should be allocated by a call to }{\f6\fs20 AllocGen}{\f4  before calling }{\f6\fs20 NoteOn}{\f4 .\par \par }{\f6\fs20 semitone}{\f4 \tab This is the note number, ranging from 0 to 127.  Middle C is 60.  Increasing or decreasing the note by 12 changes it by a full octave.  (Physically, that changes the frequency by a factor of two.)\par \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1800\li2160\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 volume}}}{\pard\plain \qj\fi-1800\li2160\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 decibels}}}{\v\f6\fs20 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 volume}{\f4 \tab The volume, which can range from 0 to 127.  Changing the volume by 16 is equivalent to a change in the sound level of 6 decibels.\par \par }{\f6\fs20 theInstrument}{\f4 \tab This is the instrument record.  See Lesson 16 for a complete description of this record and its use.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Note Synthesizer Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Note Synthesizer Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct Envelope \{\par    Byte st1BkPt;\par    Word st1Increment;\par    Byte st2BkPt;\par    Word st2Increment;\par    Byte st3BkPt;\par    Word st3Increment;\par    Byte st4BkPt;\par    Word st4Increment;\par    Byte st5BkPt;\par    Word st5Increment;\par    Byte st6BkPt;\par    Word st6Increment;\par    Byte st7BkPt;\par    Word st7Increment;\par    Byte st8BkPt;\par    Word st8Increment;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct Envelope}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 Envelope}}}{\f6\fs20  Envelope, *EnvelopePtr, **EnvelopeHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct WaveForm \{\par    Byte wfTopKey;\par    Byte wfWaveAddress;\par    Byte wfWaveSize;\par    Byte wfDocMode;\par    Word wfRelPitch;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct WaveForm}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 WaveForm}}}{\f6\fs20  WaveForm, *WaveFormPtr, **WaveFormHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct Instrument \{\par    Envelope theEnvelope;\par    Byte releaseSegment;\par    Byte priorityIncrement;\par    Byte pitchBendRange;\par    Byte vibratoDepth;\par    Byte vibratoSpeed;\par    Byte inSpare;\par    Byte aWaveCount;\par    Byte bWaveCount;\par    WaveForm aWaveList[1];\par    WaveForm bWaveList[1];\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct Instrument}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 Instrument}}}{\f6\fs20  Instrument, *InstrumentPtr, **InstrumentHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Print Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Print Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Print Manager}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named Print.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrCloseDoc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrCloseDoc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrCloseDoc\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PrCloseDoc(GrafPortPtr printerPort);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1302\tab portNotOn}{\f4 \tab The specified port is not selected in the control panel\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Closes the printer\rquote s }{\f6\fs20 GrafPort}{\f4 .  This call is normally used at the end of a print loop.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrClosePage}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrClosePage\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrClosePage\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PrClosePage(GrafPortPtr printerPort);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1302\tab portNotOn}{\f4 \tab The specified port is not selected in the control panel\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Closes the printing of the current page.  This call is normally used after every page is printed.  }{\f6\fs20 PrClosePage}{\f4  and }{\f6\fs20 PrOpenPage}{\f4  are used in pairs inside the print loop.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrDefault}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrDefault\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrDefault\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PrDefault(PrRecHndl thePrintRecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1303\tab noPrintRecord}{\f4 \tab No print record was specified\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills in the print record with default information for the current printer.  The current printer is selected by the user using the printer chooser control panel device.  This call is normally used to fill in a new print record.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrError}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrError\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrError\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word PrError(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Checks for errors flagged during the print loop.  This call is normally made right after a print loop, and just before spooled printing.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrJobDialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrJobDialog\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrJobDialog\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean PrJobDialog(PrRecHndl thePrintRecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Brings up a dialog that lets the user pick options related to a single printing of a document, like the number of copies to print and the print quality to use.  This call is normally made when the user selects the Print command, just before entering the print loop.\par The value returned will be 0 if the user canceled the print operation, and 1 if the user confirmed the print operation.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrOpenDoc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrOpenDoc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrOpenDoc\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 GrafPortPtr PrOpenDoc(PrRecHndl thePrintRecord, GrafPortPtr printerPort);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1302\tab portNotOn}{\f4 \tab The specified port is not selected in the control panel\par \tab }{\f6\fs20 0x1304\tab badLaserPrep}{\f4 \tab The version of LaserPrep in the drivers folder is not compatible with this version of the Print Manager\par \tab }{\f6\fs20 0x1305\tab badLPFile}{\f4 \tab The version of LaserPrep in the drivers folder is not compatible with this version of the Print Manager\par \tab }{\f6\fs20 0x1306\tab papConnNotOpen}{\f4 \tab Connection can\rquote t be established with the LaserWriter\par \tab }{\f6\fs20 0x1307\tab papReadWriteErr}{\f4 \tab Read-write error on the LaserWriter\par \tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This call is used at the start of a print loop to allocate a }{\f6\fs20 GrafPort}{\f4  for use by the Print Manager.  The first parameter is the print record, and the second is normally set to }{\f6\fs20 NULL}{\f4 , telling the Print Manager to create a new }{\f6\fs20 GrafPort}{\f4 .  For other possibilities, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 1}{\f4 , page 15-36.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrOpenPage}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrOpenPage\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrOpenPage\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PrOpenPage(GrafPortPtr printerPort, Rect *pageFrame);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1302\tab portNotOn}{\f4 \tab The specified port is not selected in the control panel\par \tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This call is used in the print loop to set up a new output page.  The first parameter is the }{\f6\fs20 GrafPort}{\f4  set up by }{\f6\fs20 PrOpenDoc}{\f4 ; the second is normally }{\f6\fs20 NULL}{\f4 , but can be used as a scaling rectangle.  For details on scaling rectangles, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 1}{\f4 , page 15-38.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrPicFile}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrPicFile\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrPicFile\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PrPicFile(PrRecHndl thePrintRecord, GrafPortPtr prHandle,\par    PrStatusRecPtr statusRecPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1302\tab portNotOn}{\f4 \tab The specified port is not selected in the control panel\par \tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Prints a spooled document.  This call is made after the print loop.  The call does not cause problems, even if the document is not spooled, so it is normally used routinely, without actually checking to see if the document is spooled.\par The first parameter is the print record used throughout the print loop.\par The second parameter is a }{\f6\fs20 GrafPort}{\f4  to use while doing the spooled printing.  This is not the same }{\f6\fs20 GrafPort}{\f4  that was allocated by }{\f6\fs20 PrOpenDoc}{\f4 ; that }{\f6\fs20 GrafPort}{\f4  was disposed of when }{\f6\fs20 PrCloseDoc}{\f4  was called to finish the print loop.  Normally, you will pass }{\f6\fs20 NULL}{\f4 , telling the Print Manager to allocate a }{\f6\fs20 GrafPort}{\f4  specifically for this call.  For other possibilities, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 1}{\f4 , page 15-40.\par The last parameter is a status record that is constantly updated to reflect the print loop status.  Other than creating a variable and passing it to }{\f6\fs20 PrPicFile}{\f4 , you can ignore this record.  For details on the format and use of the record, see see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 1}{\f4 , page 15-40.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrStlDialog}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrStlDialog\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrStlDialog\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean PrStlDialog(PrRecHndl thePrintRecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 PrStlDialog}{\f4  brings up a dialog that lets the user pick document-related printer options, like the page layout.  This call is normally made when the user picks the Page Setup command from the File menu.  You should pass a print record that has already been filled in by either }{\f6\fs20 PrDefault}{\f4  or }{\f6\fs20 PrValidate}{\f4 .  If possible, the print record should be saved with the document, and each document should have its own private copy of the print record.\par If the user confirms the dialog, }{\f6\fs20 PrStlDialog}{\f4  returns }{\f6\fs20 TRUE}{\f4 ; if the user picks cancel, }{\f6\fs20 PrStlDialog}{\f4  returns }{\f6\fs20 FALSE}{\f4  and does not modify the print record in any way.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PrValidate}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PrValidate\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PrValidate\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean PrValidate(PrRecHndl thePrintRecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 PrValidate}{\f4  checks an existing print record to make sure it is consistent with the current printer, making appropriate changes if not.  This call is normally used to validate a print record that is loaded with a document.  It returns }{\f6\fs20 TRUE}{\f4  if changes were made to the print record, and }{\f6\fs20 FALSE}{\f4  if no change was needed.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Print Manager Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Print Manager Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct PrInfoRec \{\par    Word iDev;                         /* reserved for internal use */\par    Word iVRes;                        /* vertical resolution of printer */\par    Word iHRes;                        /* horizontal resolution of printer */\par    Rect rPage;                        /* defining page rectangle */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct PrInfoRec}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PrInfoRec}}}{\f6\fs20  PrInfoRec, *PrInfoRecPtr, **PrInfoRecHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct PrJobRec \{\par    Word iFstPage;                     /* first page to print */\par    Word iLstPage;                     /* last page to print */\par    Word iCopies;                      /* number of copies */\par    Byte bJDocLoop;                    /* printing method */\par    Byte fFromUser;                    /* used internally */\par    WordProcPtr pIdleProc;             /* background procedure */\par    Pointer pFileName;                 /* spool file name */\par    Word iFileVol;                     /* spool file volume reference number */\par    Byte bFileVers;                    /* spool file version number */\par    Byte bJobX;                        /* used internally */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct PrJobRec}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PrJobRec}}}{\f6\fs20  PrJobRec, *PrJobRecPtr;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct PrStyleRec \{\par    Word wDev;                         /* output quality information */\par    Word internA[3];                   /* for internal use */\par    Word feed;                         /* paper feed type */\par    Word paperType;                    /* paper type */\par    Word crWidth;                      /* carriage Width for image writer or */\par                                       /*  vertical sizing for laser writer  */\par    Word reduction;                    /* % reduction, laser writer only */\par    Word internB;                      /* for internal use */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct PrStyleRec}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PrStyleRec}}}{\f6\fs20  PrStyleRec, *PrStyleRecPtr, **PrStyleRecHndl;\par \par #define vSizing crWidth               /* PrStyleRec - alternate field name */\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct PrRec \{\par    Word prVersion;                    /* print manager version */\par    PrInfoRec prInfo;                  /* printer information subrecord */\par    Rect rPaper;                       /* Defining paper rectangle */\par    PrStyleRec prStl;                  /* style subrecord */\par    Byte prInfoPT[14];                 /* reserved for internal use */\par    Byte prXInfo[24];                  /* reserved for internal use */\par    PrJobRec prJob;                    /* job subrecord */\par    Byte printX[38];                   /* reserved for future use */\par    Word iReserved;                    /* reserved for internal use */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct PrRec}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PrRec}}}{\f6\fs20  PrRec, *PrRecPtr, **PrRecHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct PrStatusRec \{\par    Word iTotPages;                    /* number of pages in spool file */\par    Word iCurPage;                     /* page being printed */\par    Word iTotCopies;                   /* number of copies requested */\par    Word iCurCopy;                     /* copy being printed */\par    Word iTotBands;                    /* reserved for internal use */\par    Word iCurBand;                     /* reserved for internal use */\par    Boolean fPgDirty;                  /* TRUE if started printing page */\par    Word fImaging;                     /* reserved for internal use */\par    PrRecHndl hPrint;                  /* handle of print record */\par    GrafPortPtr pPrPort;               /* pointer to GrafPort for printing */\par    LongWord hPic;                     /* reserved for internal use */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct PrStatusRec}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PrStatusRec}}}{\f6\fs20  PrStatusRec, *PrStatusRecPtr, **PrStatusRecHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 QuickDraw II}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 QuickDraw II\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 QuickDraw II}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named QuickDraw.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LocInfo Records}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LocInfo Records\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LocInfo}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LocInfoPtr}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct LocInfo \{\par    Word portSCB;                        /* SCBByte in low byte */\par    Pointer ptrToPixImage;               /* ImageRef */\par    Word width;                          /* Width */\par    Rect boundsRect;                     /* BoundsRect */\par    \};\par typedef struct LocInfo LocInfo, *LocInfoPtr, **LocInfoHndl;\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 LocInfo}{\f4  record contains information about a bit mapped drawing area.  In this course, this record is used for drawing pictures with the }{\f6\fs20 PPToPort}{\f4  call, but the record is used widely in the toolbox and window manager for other purposes, too.\par \par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f6\fs20 portSCB}{\f4 \tab The scan line control byte for the image.\par }{\f6\fs20 ptrToPixelImage}{\f4 \tab Points to the picture.  The picture is organized as a series of lines, each line being made up of 2 bit pixels or 4 bit pixels, depending on }{\f6\fs20 portSCB}{\f4 .\par }{\f6\fs20 width}{\f4 \tab Width in bytes of each line in the image.  The number of pixels in the image must be an even multiple of 8.\par }{\f6\fs20 boundsRect}{\f4 \tab A rectangle enclosing the entire image.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Scan Line Control Byte}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Scan Line Control Byte\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SCB}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scan line control byte}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The scan line control byte (SCB) defines the screen resolution for a scan line or pixel image.  Only one bit is used in this course.  If the most significant bit is set, the SCB refers to 640 mode graphics; if the bit is clear, the SCB refers to 320 mode graphics.  All other bits should be set to 0.\par For information about the other bits in the SCB, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 2}{\f4 , page 16-34.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CharBounds}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CharBounds\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CharBounds\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void CharBounds(Word theChar, Rect *result);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 CharBounds}{\f4  sets the rectangle }{\f6\fs20 result}{\f4  to the character bounds rectangle for the character }{\f6\fs20 theChar}{\f4 .\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 bounds rectangle}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The character bounds rectangle is basically the rectangle that extends from the ascent to descent lines, and from the character origin on the left to the new character origin on the right.  If kerning is used, though, the pixels in the character could extend past the character origin on either the left or right, and in that case, the bounds rectangle is extended to include all of the pixels in the character.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CharWidth}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CharWidth\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CharWidth\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word CharWidth(Word theChar);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 CharWidth}{\f4  returns with width of the character in pixels.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ClipRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ClipRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ClipRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ClipRect(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the clip region for the current }{\f6\fs20 GrafPort}{\f4  to the rectangle given.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ClosePoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ClosePoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ClosePoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ClosePoly(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0441\tab polyNotOpen}{\f4 \tab No polygon is open\par \tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Finishes the definition of the polygon started with }{\f6\fs20 OpenPoly}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CStringBounds}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CStringBounds\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CStringBounds\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void CStringBounds(Pointer theCString, Rect *result);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the bounds rectangle for the given string of characters.  See }{\f6\fs20 CharBounds}{\f4  for a definition of the bounds rectangle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CStringWidth}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CStringWidth\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CStringWidth\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word CStringWidth(Pointer theCString);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the width of the string in pixels.  This is equivalent to the pen displacement if the string is drawn.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawChar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawChar\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawChar\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawChar(Word theChar);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Draws the character, using the current font, text mode, foreground color and background color.  The character is drawn to the current }{\f6\fs20 GrafPort}{\f4  at the current pen location; the pen is then moved to the right by the width of the character.\par See }{\f6\fs20 CharWidth}{\f4  for one way to find the distance the pen will be advanced.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawCString}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawCString\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawCString\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawCString(Pointer theString);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Draws the string, using the current font, text mode, foreground color and background color.  The string is drawn to the current }{\f6\fs20 GrafPort}{\f4  at the current pen location; the pen is then moved to the right by the width of the string.\par See }{\f6\fs20 CStringWidth}{\f4  for one way to find the distance the pen will be advanced.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawString}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawString\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawString\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawString(Pointer theString);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Draws the string, using the current font, text mode, foreground color and background color.  The string is drawn to the current }{\f6\fs20 GrafPort}{\f4  at the current pen location; the pen is then moved to the right by the width of the string.\par See }{\f6\fs20 StringWidth}{\f4  for one way to find the distance the pen will be advanced.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawText}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawText\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawText\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawText(Pointer theText, Word textLen);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Draws the block of text, using the current font, text mode, foreground color and background color.  The text is drawn to the current }{\f6\fs20 GrafPort}{\f4  at the current pen location; the pen is then moved to the right by the width of the text.\par See }{\f6\fs20 TextWidth}{\f4  for one way to find the distance the pen will be advanced.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 EraseArc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 EraseArc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EraseArc\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 arcs}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void EraseArc(Rect *theRect, Integer startAngle, Integer arcAngle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Erases the interior of the arc, painting the area with the background pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 EraseOval}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 EraseOval\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EraseOval\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ovals}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void EraseOval(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Erases the interior of the oval, painting the area with the background pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ErasePoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ErasePoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ErasePoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ErasePoly(Handle thePolyHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Erases the interior of the polygon, painting the area with the background pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 EraseRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 EraseRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EraseRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void EraseRect(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Erases the interior of the rectangle, painting the area with the background pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 EraseRRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 EraseRRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EraseRRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rounded rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void EraseRRect(Rect *theRect, Word ovalWidth, Word ovalHeight);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Erases the interior of the rounded rectangle, painting the area with the background pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FillArc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FillArc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FillArc\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 arcs}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FillArc(Rect *theRect, Integer startAngle, Integer arcAngle,\par    Pattern thePattern);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills the interior of the arc with the given pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FillOval}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FillOval\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FillOval\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ovals}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FillOval(Rect *theRect, Pattern thePattern);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills the interior of the oval with the given pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FillPoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FillPoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FillPoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FillPoly(Handle thePolyHandle, Pattern thePattern);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills the interior of the polygon with the given pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FillRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FillRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FillRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FillRect(Rect *theRect, Pattern thePattern);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills the interior of the rectangle with the given pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FillRRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FillRRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FillRRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rounded rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FillRRect(Rect *theRect, Word ovalWidth, Word ovalHeight,\par    Pattern thePattern);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills the interior of the rounded rectangle with the given pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FrameArc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FrameArc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FrameArc\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 arcs}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FrameArc(Rect *theRect, Integer startAngle, Integer arcAngle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Outlines the rounded portion of the given arc using the current pen mode, pattern and size.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FrameOval}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FrameOval\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FrameOval\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ovals}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FrameOval(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Outlines the given oval using the current pen mode, pattern and size.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FramePoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FramePoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FramePoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FramePoly(Handle thePolyHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Outlines the given polygon using the current pen mode, pattern and size.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FrameRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FrameRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FrameRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FrameRect(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Outlines the given rectangle using the current pen mode, pattern and size.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FrameRRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FrameRRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FrameRRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rounded rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FrameRRect(Rect *theRect, Word ovalWidth, Word ovalHeight);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Outlines the given rounded rectangle using the current pen mode, pattern and size.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetColorEntry}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetColorEntry\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetColorEntry\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word GetColorEntry(Word tableNumber, Word entryNumber);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0450\tab badTableNum}{\f4 \tab Invalid color table number\par \tab }{\f6\fs20 0x0451\tab badColorNum}{\f4 \tab Invalid color number\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the color table entry for the specified color table number and color table entry number.  There are 16 color tables, numbered 0 to 15, and 16 color entries in each color table, also numbered 0 to 15.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetColorTable}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetColorTable\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetColorTable\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void GetColorTable(Word tableNumber, ColorTable saveTable);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0450\tab badTableNum}{\f4 \tab Invalid color table number\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills in the color table with the colors in one of the screen color tables.  There are 16 screen color tables, numbered 0 to 15.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetFontInfo}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetFontInfo\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetFontInfo\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void GetFontInfo(FontInfoRecPtr theFIRec);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns information about the current font in the given font information record.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetPort}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetPort\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetPort\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 GrafPortPtr GetPort(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns a pointer to the current }{\f6\fs20 GrafPort}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetPortRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetPortRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetPortRect\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void GetPortRect(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the current }{\f6\fs20 GrafPort\rquote s}{\f4  port rectangle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetVisHandle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetVisHandle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetVisHandle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 RegionHndl GetVisHandle(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the handle for the visible region of the current }{\f6\fs20 GrafPort}{\f4 .  The handle belongs to the system, and should not be modified in any way.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GlobalToLocal}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GlobalToLocal\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GlobalToLocal\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void GlobalToLocal(Point *thePoint);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Converts the specified point from global coordinates to local coordinates.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InitCursor}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InitCursor\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InitCursor\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InitCursor(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the mouse cursor to an arrow and makes the cursor visible.  This call is used at the start of a program to make the mouse cursor visible, and to change back to the arrow cursor in a program after you have switched to some other cursor.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InvertArc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InvertArc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InvertArc\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 arcs}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InvertArc(Rect *theRect, Integer startAngle, Integer arcAngle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Inverts the interior of the specified arc.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InvertOval}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InvertOval\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InvertOval\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ovals}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InvertOval(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Inverts the interior of the specified oval.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InvertPoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InvertPoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InvertPoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InvertPoly(Handle thePolyHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Inverts the interior of the specified polygon.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InvertRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InvertRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InvertRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InvertRect(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Inverts the interior of the specified rectangle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InvertRRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InvertRRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InvertRRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rounded rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InvertRRect(Rect *theRect, Word ovalWidth, Word ovalHeight);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Inverts the interior of the specified rounded rectangle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 KillPoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 KillPoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 KillPoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void KillPoly(Handle thePolyHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Destroys the given polygon, disposing of all memory associated with the polygon.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LineTo}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LineTo\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LineTo\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LineTo(Integer h, Integer v);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Draws a line from the current pen location to the point passed as parameters to }{\f6\fs20 LineTo}{\f4 .  The line is drawn with the current pen pattern, mode and size.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LocalToGlobal}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LocalToGlobal\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LocalToGlobal\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LocalToGlobal(Point *thePoint);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Converts the specified point from local coordinates to global coordinates.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 MoveTo}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 MoveTo\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MoveTo\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void MoveTo(Integer h, Integer v);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Moves the drawing pen to the specified point.  Nothing is drawn on the screen.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 OffsetPoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 OffsetPoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OffsetPoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void OffsetPoly(Handle thePolyHandle, Integer dH, Integer dV);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Offsets a polygon, effectively moving the entire shape.  }{\f6\fs20 dH}{\f4  is the distance to move in the horizontal direction, while }{\f6\fs20 dV}{\f4  is the distance to move in the vertical direction.  Positive values move the polygon down and to the right, while negative values shift the polygon up and to the left.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 OpenPoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 OpenPoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenPoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LineTo}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ClosePoly}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 KillPoly}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 handle OpenPoly(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0440\tab polyAlreadyOpen}{\f4 \tab Polygon is already open\par \tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 OpenPoly}{\f4  starts the process of defining a polygon.  It returns the handle for a new polygon.  All subsequent calls to }{\f6\fs20 LineTo}{\f4  will add a line to the edge of the polygon, up until the matching }{\f6\fs20 ClosePoly}{\f4  call, which ends the definition of the polygon.\par If the last point in the polygon does not match the original starting point, an extra line is automatically added to close the shape.\par When you are finished with a polygon, call }{\f6\fs20 KillPoly}{\f4  to dispose of the memory associated with this structure.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PaintArc}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PaintArc\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PaintArc\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 arcs}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PaintArc(Rect *theRect, Integer startAngle, Integer arcAngle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Paints all points inside the specified arc using the current pen pattern and pen mode.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PaintOval}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PaintOval\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PaintOval\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ovals}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PaintOval(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Paints all points inside the specified oval using the current pen pattern and pen mode.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PaintPoly}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PaintPoly\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PaintPoly\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 polygons}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PaintPoly(Handle thePolyHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Paints all points inside the specified polygon using the current pen pattern and pen mode.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PaintRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PaintRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PaintRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PaintRect(Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Paints all points inside the specified rectangle using the current pen pattern and pen mode.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PaintRRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PaintRRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PaintRRect\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rounded rectangles}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PaintRRect(Rect *theRect, Word ovalWidth, Word ovalHeight);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Paints all points inside the specified rounded rectangle using the current pen pattern and pen mode.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PenNormal}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PenNormal\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PenNormal\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PenNormal(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the current drawing pen do \ldblquote normal\rdblquote  mode.  Specifically:\par \par 1.\tab The pen size is set to 1 pixel wide and 1 pixel high.\par 2.\tab The pen mode is set to }{\f6\fs20 modeCopy}{\f4 .\par 3.\tab The pen pattern is set to solid black.\par 4.\tab The pen mask is set to allow all bits to be drawn.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PPToPort}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PPToPort\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PPToPort\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PPToPort(LocInfoPtr srcLoc, Rect * srcRect, Integer destX, Integer destY,\par    Word transferMode);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0420\tab notEqualChunkiness}{\f4 \tab Chunkiness is not equal\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 PPToPort}{\f4  transfers a bit map to a port.\par \par }\pard \qj\fi-1620\li1980\widctlpar\adjustright {\f6\fs20 srcLoc}{\f4 \tab This is a pointer to a }{\f6\fs20 LocInfo}{\f4  record that defines the image to draw.  See \ldblquote }{\f6\fs20 LocInfo}{\f4  Records\rdblquote  at the start of this section for more information about the }{\f6\fs20 LocInfo}{\f4  record.\par }{\f6\fs20 srcRect}{\f4 \tab This is the source rectangle.  Using this parameter, you can clip a specific part of the image from the source image.  The most common option, though, is to pass the rectangle that is imbedded in the }{\f6\fs20 LocInfo}{\f4  record for the image.  Doing so paints the entire source image.\par }{\f6\fs20 destX}{\f4 \tab Horizontal location for the destination image.  The left edge of the rectangle will be aligned to this coordinate.\par }{\f6\fs20 destY}{\f4 \tab Vertical location for the destination image.  The top edge of the rectangle will be aligned to this coordinate.\par }{\f6\fs20 transferMode}{\f4 \tab This is the pen mode that will be used to draw the picture.  Any of the pen modes that are valid for }{\f6\fs20 SetPenMode}{\f4  can be used.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PtInRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PtInRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PtInRect\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean PtInRect(Point *thePoint, Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This function tests to see if }{\f6\fs20 thePoint}{\f4  lies inside of }{\f6\fs20 theRect}{\f4 .  If so, the function returns }{\f6\fs20 TRUE}{\f4 ; otherwise, it returns }{\f6\fs20 FALSE}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 RectInRgn}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 RectInRgn\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 RectInRgn\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean RectInRgn(Rect *theRect, RegionHndl theRgnHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 RectInRgn}{\f4  tests to see if any part of the given rectangle intersects the given region.  If so, }{\f6\fs20 RectInRgn}{\f4  returns }{\f6\fs20 TRUE}{\f4 ; if not, it returns }{\f6\fs20 FALSE}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetAllSCBs}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetAllSCBs\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetAllSCBs\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetAllSCBs(Word newSCB);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets all scan line control bytes to the specified value.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetBackColor}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetBackColor\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetBackColor\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetBackColor(Word backColor);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the background color for the current port to }{\f6\fs20 backColor}{\f4 .  The background color should be in the range 0 to 3 if the 640 graphics mode is in use, and 0 to 15 if the 320 graphics mode is in use.  If the value is outside of the allowed range, the value is reduced to the correct range automatically.\par The background color is used when text is painted on the screen.  The region behind the text is filled in with the background color.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetColorEntry}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetColorEntry\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetColorEntry\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetColorEntry(Word tableNumber, Word entryNumber, ColorValue newColor);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0450\tab badTableNum}{\f4 \tab Invalid color table number\par \tab }{\f6\fs20 0x0451\tab badColorNum}{\f4 \tab Invalid color number\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the color table entry for the specified color table number and color table entry number to the given color value.  There are 16 color tables, numbered 0 to 15, and 16 color entries in each color table, also numbered 0 to 15.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetColorTable}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetColorTable\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetColorTable\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 color tables}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetColorTable(Word tableNumber, ColorTable newTable);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0450\tab badTableNum}{\f4 \tab Invalid color table number\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Fills in one of the active color tables with the colors from the given color table array.  There are 16 active color tables, numbered 0 to 15.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetForeColor}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetForeColor\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetForeColor\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetForeColor(Word foreColor);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the foreground color for the current port to }{\f6\fs20 foreColor}{\f4 .  The foreground color should be in the range 0 to 3 if the 640 graphics mode is in use, and 0 to 15 if the 320 graphics mode is in use.  If the value is outside of the allowed range, the value is reduced to the correct range automatically.\par When text is drawn to the screen, the foreground color is used to draw the text.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetPenMask}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetPenMask\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPenMask\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen masks}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetPenMask(Mask theMask);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the pen mask for the current }{\f6\fs20 GrafPort}{\f4  to the given mask.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetPenMode}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetPenMode\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPenMode\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen modes}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetPenMode(Word penMode);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the pen mode.  The pen mode controls how pixels are drawn on the screen.\par Table A-5 shows the various pen modes and what they do.  For the numeric equivalent of the constants, see the QuickDraw II definitions section.\par Most of the pen modes perform some binary logic operation between the source and destination pixels.  This is a bitwise operation.  For example, }{\f6\fs20 modeXOR}{\f4  is frequently used in rubber-banding routines to draw an image, then erase it by drawing the same image in the same spot.  When color 2 is drawn across a color 3 background in 640 mode, each pixel is drawn using an exclusive or operation.  The source pixel in binary is 10, while the destination pixel is 11.  The exclusive or operation results in a value of 01.  When the line is drawn a second time, the source is again 10, while the destination is 01, and the screen is set to 11.\par \par }\pard \qj\fi-1440\li1800\ri360\keep\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 Mode\tab Description\par }\pard \qj\fi-1440\li1800\ri360\keep\keepn\widctlpar\adjustright {\f6\fs20 modeCopy}{\f4 \tab Copy each source pixel exactly.  For lines or pictures, the pen pattern is copied to the screen, while for text, each letter is painted using the foreground color, and the background is filled in using the background color.  This is the typical drawing mode for most operations.\par }{\f6\fs20 notCopy}{\f4 \tab Each source pixel is reversed in value, changing all 0 bits to 1 and all 1 bits to 0.  The resulting image is drawn to the screen.\par }{\f6\fs20 modeOR}{\f4 \tab The source bits are ored with the destination bits.\par }{\f6\fs20 notOR}{\f4 \tab The source bits are reversed, and the result is ored with the destination bits.\par }{\f6\fs20 modeXOR}{\f4 \tab The source bits are exclusive ored with the destination bits.  If the bit is on in both the source and destination, or if it is off in both the source and destination, the result will be a bit that is off.  If either the source or destination bit is on, but not both, the bit will be on in the final drawing.\par }{\f6\fs20 notXOR}{\f4 \tab This mode works like }{\f6\fs20 modeXOR}{\f4 , but the bits are reversed in the final drawing.\par }{\f6\fs20 modeBIC}{\f4 \tab Pixels in the source are reversed, then anded with the destination pixels.  This mode is generally used to turn off pixels in an area in preparation for drawing a new image in the same area.\par }{\f6\fs20 notBIC}{\f4 \tab The source bits are anded with the destination bits.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table A-5:  Pen Modes\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetPenPat}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetPenPat\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPenPat\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen patterns}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetPenPat(Pattern thePattern);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the pen pattern for the current }{\f6\fs20 GrafPort}{\f4  to the given pattern.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetPenSize}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetPenSize\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPenSize\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 pen size}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetPenSize(Word width, Word height);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the pen size for the current }{\f6\fs20 GrafPort}{\f4  to the given size.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetPort}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetPort\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPort\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetPort(GrafPortPtr thePort);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Makes the specified port the current }{\f6\fs20 GrafPort}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetSCB}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetSCB\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSCB\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SCB}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scan lines}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetSCB(Word scanLine, Word newSCB);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0452\tab badScanLine}{\f4 \tab Invalid scan line number\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the scan line control byte for scan line }{\f6\fs20 scanLine}{\f4  to }{\f6\fs20 newSCB}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetSolidPenPat}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetSolidPenPat\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSolidPenPat\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetSolidPenPat(Word colorNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The current pen pattern is set to the solid color passed as a parameter.  In 320 mode, the pen color can be any number from 0 to 15, while in 640 mode, the pen color can be any color from 0 to 3.  If you pass a number outside of the allowed range, the value is reduced to the correct range using a mod operation.  In 640 mode, the operation is }{\f6\fs20 colorNum mod 4}{\f4 , while in 320 mode, the operation is }{\f6\fs20 colorNum mod 16}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetTextMode}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetTextMode\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetTextMode\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetTextMode(Word textMode);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 text mode}}}{\v\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the text mode to the specified value.  The text mode is equivalent to the pen mode (see }{\f6\fs20 SetPenMode}{\f4 ), but the text mode applies only to text, while the pen mode applied to all drawing except text.\par All of the pen modes that are valid for }{\f6\fs20 SetPenMode}{\f4  are also valid for }{\f6\fs20 SetTextMode}{\f4 , and all do exactly the same thing.\par In addition, there are eight new pen modes.  The reason for these modes is that a character normally prints as a full rectangle, with the part normally though of as the character drawn in the foreground color, and the rest of the rectangle filled in with the background color.  The additional eight pen modes match the normal eight pen modes, but they only draw the text itself.  The background of the rectangle is not filled in.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Here are the eight foreground only modes, along with the standard modes they correspond to.\par \par }\pard \qj\li720\ri5400\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx2520\adjustright {\f4 standard\tab foreground\par mode\tab mode\par }\pard \qj\li720\ri5400\keepn\widctlpar\tx2520\adjustright {\f6\fs20 modeCopy\tab modeForeCOPY\par notCopy\tab notForeCopy\par modeOR\tab modeForeOR\par notOR\tab notForeOR\par modeXOR\tab modeForeXOR\par notXOR\tab notForeXOR\par modeBIC\tab modeForeBIC\par }\pard \qj\li720\ri5400\widctlpar\tx2520\adjustright {\f6\fs20 notBIC\tab notForeBIC\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 StringBounds}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 StringBounds\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StringBounds\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void StringBounds(Pointer theString, Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the bounds rectangle for the given string of characters.  See }{\f6\fs20 CharBounds}{\f4  for a definition of the bounds rectangle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 StringWidth}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 StringWidth\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StringWidth\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word StringWidth(Pointer theString);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the width of the string in pixels.  This is equivalent to the pen displacement if the string is drawn.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TextBounds}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TextBounds\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TextBounds\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void TextBounds(Pointer theText, Word textLen, Rect *theRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the bounds rectangle for the given block of characters.  See }{\f6\fs20 CharBounds}{\f4  for a definition of the bounds rectangle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TextWidth}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TextWidth\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TextWidth\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word TextWidth(Pointer theText, Word textLen);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the width of the block of text in pixels.  This is equivalent to the pen displacement if the text is drawn.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 QuickDraw II Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 QuickDraw II Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct Point \{\par    short v;\par    short h;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct Point}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 Point}}}{\f6\fs20  Point, *PointPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PointPtr}}}{\f6\fs20 ;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct Rect \{\par    short v1;\par    short h1;\par    short v2;\par    short h2;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct Rect Rect}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 Rect}}}{\f6\fs20 , *RectPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 RectPtr}}}{\f6\fs20 , **RectHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct LocInfo \{\par    Word portSCB;                        /* SCBByte in low byte */\par    Pointer ptrToPixImage;               /* ImageRef */\par    Word width;                          /* Width */\par    Rect boundsRect;                     /* BoundsRect */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct LocInfo LocInfo}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 LocInfo}}}{\f6\fs20 , *LocInfoPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 LocInfoPtr}}}{\f6\fs20 , **LocInfoHndl;\par }\pard \li180\widctlpar\adjustright {\f6\fs20 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct FontInfoRecord \{\par    Word ascent; \par    Word descent; \par    Word widMax; \par    Word leading; \par    \};\par typedef struct FontInfoRecord}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FontInfoRecord}}}{\f6\fs20  FontInfoRecord, *FontInfoRecPtr}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 FontInfoRecPtr}}}{\f6\fs20 ,\par }\pard \widctlpar\adjustright {\f6\fs20    **FontInfoRecHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct Region \{\par }\pard \widctlpar\adjustright {\f6\fs20    Word rgnSize;                        /* size in bytes */\par    Rect rgnBBox;                        /* enclosing rectangle */\par    \};\par typedef struct Region Region}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 Region}}}{\f6\fs20 , *RegionPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 RegionPtr}}}{\f6\fs20 , **RegionHndl}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 RegionHndl}}}{\f6\fs20 ;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct GrafPort \{\par    LocInfo portInfo;\par    Rect portRect;                       /* PortRect */\par    RegionHndl clipRgn;                  /* Clip Rgn. Pointer */\par    RegionHndl visRgn;                   /* Vis. Rgn. Pointer */\par    Pattern bkPat;                       /* BackGround Pattern */\par    Point pnLoc;                         /* Pen Location */\par    Point pnSize;                        /* Pen Size */\par    Word pnMode;                         /* Pen Mode */\par    Pattern pnPat;                       /* Pen Pattern */\par    Mask pnMask;                         /* Pen Mask */\par    Word pnVis;                          /* Pen Visible */\par    FontHndl fontHandle;\par    FontID fontID;                       /* Font ID */\par    Word fontFlags;                      /* FontFlags */\par    Word txSize;                         /* Text Size */\par    TextStyle txFace;                    /* Text Face */\par    Word txMode;                         /* Text Mode */\par    Fixed spExtra;                       /* Fixed Point Value */\par    Fixed chExtra;                       /* Fixed Point Value */\par    Word fgColor;                        /* ForeGround Color */\par    Word bgColor;                        /* BackGround Color */\par    Handle picSave;                      /* PicSave */\par    Handle rgnSave;                      /* RgnSave */\par    Handle polySave;                     /* PolySave */\par    QDProcsPtr grafProcs;\par    Word arcRot;                         /* ArcRot */\par    Longint userField;                   /* UserField */\par    Longint sysField;                    /* SysField */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct GrafPort}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GrafPort}}}{\f6\fs20  GrafPort, *GrafPortPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 GrafPortPtr}}}{\f6\fs20 , **GrafPortHndl;\par \par typedef unsigned char Pattern}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 Pattern}}}{\f6\fs20 [32], *PatternPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 PatternPtr}}}{\f6\fs20 ;\par \par typedef Word ColorTable}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 ColorTable}}}{\f6\fs20 [16], *ColorTablePtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 ColorTablePtr}}}{\f6\fs20 , **ColorTableHndl;\par \par typedef unsigned char Mask}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 Mask}}}{\f6\fs20 [8];\par \par typedef Integer ColorValue;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 QuickDraw II Auxiliary}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 QuickDraw II Auxiliary\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 QuickDraw II Auxiliary}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named QDAux.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DrawPicture}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DrawPicture\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DrawPicture\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void DrawPicture(Handle picHandle, Rect *destRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 DrawPicture}{\f4  draws a picture.  }{\f6\fs20 picHandle}{\f4  is the handle of a picture created by QuickDraw II Auxiliary.  In this course, it comes into the program from a scrap.  }{\f6\fs20 destRect}{\f4  is the destination rectangle for the picture; the picture is expanded or shrunk to fit into the available space.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Resource Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Resource Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Resource Manager}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named Resources.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 AddResource}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 AddResource\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AddResource\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void AddResource(Handle resourceHandle, Word resourceAttr, Word resourceType,\par    Long resourceID);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1E03\tab resNoConverter}{\f4 \tab No converter routine for the resource type\par \tab }{\f6\fs20 0x1E04\tab resNoCurFile}{\f4 \tab No current resource file\par \tab }{\f6\fs20 0x1E05\tab resDupID}{\f4 \tab The specified resource ID is already in use\par \tab }{\f6\fs20 0x1E06\tab resNotFound}{\f4 \tab The specified resource was not found\par \tab }{\f6\fs20 0x1E0E\tab resDiskFull}{\f4 \tab Volume full\par \tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Adds a new resource to a resource fork.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 resourceHandle}{\f4 \tab This is the handle for the new resource.  Once you call }{\f6\fs20 AddResource}{\f4 , the handle belongs to the Resource Manager.\par \par }{\f6\fs20 resourceAttr}{\f4 \tab This is a resource attributes flag word.  In this course, this flags word should be set to 0x0300.  For a complete discussion of this parameter, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , page 45-35.\par \par }{\f6\fs20 resourceType}{\f4 \tab This is the resource type for the new resource.\par \par }{\f6\fs20 resourceID}{\f4 \tab This is the resource ID for the new resource.  The resource must not already exist.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CloseResourceFile}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CloseResourceFile\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseResourceFile\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void CloseResourceFile(Word fileID);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1E03\tab resNoConverter}{\f4 \tab No converter routine for the resource type\par \tab }{\f6\fs20 0x1E06\tab resNotFound}{\f4 \tab The specified resource was not found\par \tab }{\f6\fs20 0x1E0E\tab resDiskFull}{\f4 \tab Volume full\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Closes a resource fork previously opened by }{\f6\fs20 OpenResourceFile}{\f4 .  The }{\f6\fs20 fileID}{\f4  parameter should be the same one returned by }{\f6\fs20 OpenResourceFile}{\f4 .\par If the resource file being closed is the current resource file, the next most current resource file becomes the new current resource file.\par For further details about this call, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , page 45-37.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LoadResource}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LoadResource\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LoadResource\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReleaseResource}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Handle LoadResource(Word resourceType, Long resourceID);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1E03\tab resNoConverter}{\f4 \tab No converter routine for the resource type\par \tab }{\f6\fs20 0x1E06\tab resNotFound}{\f4 \tab The specified resource was not found\par \tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 LoadResource}{\f4  loads a resource based on a resource type and resource ID and returns a handle to the resource.\par }{\f6\fs20 LoadResource}{\f4  works with }{\f6\fs20 ReleaseResource}{\f4  to manage the memory used by the various resources.  In some cases, you may want to load a resource and keep it in memory from that time on, but in most cases, you will load a resource, use it for a while, then call }{\f6\fs20 ReleaseResource}{\f4  to release the resource.  If you need the resource again, you call }{\f6\fs20 LoadResource}{\f4  again.  In many cases, the resource is still in memory, since it is simply marked purgeable by }{\f6\fs20 ReleaseResource}{\f4 .  The effect is that }{\f6\fs20 LoadResource}{\f4  can grab the resource from memory without reading it in from disk again, so long as the memory wasn\rquote t needed for anything else between uses.\par You should never dispose of a handle returned by }{\f6\fs20 LoadResource}{\f4 .\par There are some capabilities of }{\f6\fs20 LoadResource}{\f4  that are not used in this course.  For a complete description, see page 45-56 of }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 OpenResourceFile}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 OpenResourceFile\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 OpenResourceFile\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word OpenResourceFile(Word openAccess, Pointer mapAddress, Pointer fileName);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1E06\tab resNotFound}{\f4 \tab The specified resource was not found\par \tab }{\f6\fs20 0x1E09\tab resNoUniqueID}{\f4 \tab No more resource IDs are available\par \tab }{\f6\fs20 0x1E0B\tab resSysIsOpen}{\f4 \tab The system resource file is already open\par \tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Opens a resource file, making it the current resource file.  }{\f6\fs20 OpenResourceFile}{\f4  returns a resource file ID; this should be passed to }{\f6\fs20 CloseResourceFile}{\f4  when it is time to close the resource fork.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 openAccess}{\f4 \tab This parameter tells }{\f6\fs20 OpenResourceFile}{\f4  whether you want read-only access (1), write-only access (2), or access to both read and write resources (3).\par \par }{\f6\fs20 mapAddress}{\f4 \tab This is a pointer to a resource map in memory, or }{\f6\fs20 NULL}{\f4  to retrieve the resource map from disk.  In this course, the parameter should always be }{\f6\fs20 NULL}{\f4 .  For other possibilities, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , page 45-61.\par \par }{\f6\fs20 fileName}{\f4 \tab This is the GS/OS path name for the file to open.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ReleaseResource}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ReleaseResource\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ReleaseResource\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LoadResource}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ReleaseResource(Word purgeLevel, Word resourceType, Long resourceID);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1E06\tab resNotFound}{\f4 \tab The specified resource was not found\par \tab }{\f6\fs20 0x1E0C\tab resHasChanged}{\f4 \tab The resource has been changed and has not been updated\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 ReleaseResource}{\f4  sets the purge level for the handle used by a resource.  You pass the purge level (0-3), the resource type, and the resource ID of a resource that has been loaded (usually by }{\f6\fs20 LoadResource}{\f4 ) and }{\f6\fs20 ReleaseResource}{\f4  sets the purge level to the value you specify.\par Purge levels range from 0-3, and exist for all handles.  A handle with a purge level of 1, 2 or 3 is purgeable.  When a program asks the Memory Manager for memory, the Memory Manager checks to see if enough memory is available.  If not, the Memory Manager will (among other things) dispose of enough purgeable memory to allocate the new memory block.  If the handle has not been purged before the contents are needed again, the purge level can be set back to 0 and the information in the handle will still be valid.\par If the Memory Manager needs to dispose of some purgeable handles, it will start with handles with a purge level of 3, then take handles with a purge level of 2, and finally take handles with a purge level of 1.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Scrap Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Scrap Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Scrap Manager}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named Scrap.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetIndScrap}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetIndScrap\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetIndScrap\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void GetIndScrap(Word index, Ptr buffer);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1610\tab basCrapType}{\f4 \tab No scrap of this type\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Gets a scrap by scrap index.  This call is used to read the current scrap when you don\rquote t know the scrap type for the scrap, something that is generally only necessary in a scrapbook program.  The first call is made with }{\f6\fs20 index}{\f4  set to 1, and information about the first scrap is returned in }{\f6\fs20 buffer}{\f4 .  For each subsequent call, }{\f6\fs20 index}{\f4  is incremented by 1, until }{\f6\fs20 GetIndScrap}{\f4  returns with an error.\par The scrap buffer has this format:\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct scrapInfo \{\par    Word scrapType;\par    LongWord scrapSize;\par    Handle scrapHandle;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct scrapInfo scrapInfo}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 scrapInfo}}}{\f6\fs20 , *scrapInfoPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 scrapInfoPtr}}}{\f6\fs20 , **scrapInfoHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The handle is a copy of the handle owned by the Scrap Manager.  Your program can copy the information, but should not delete the handle or change the contents of the handle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetScrapHandle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetScrapHandle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetScrapHandle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 handle GetScrapHandle(Word scrapType);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1610\tab basCrapType}{\f4 \tab No scrap of this type\par \tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the handle for the current scrap with the given scrap type.  The handle is a copy of the handle owned by the Scrap Manager.  Your program can copy the information, but should not delete the handle or change the contents of the handle.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetScrapSize}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetScrapSize\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetScrapSize\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord GetScrapSize(Word scrapType);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1610\tab basCrapType}{\f4 \tab No scrap of this type\par \tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns the size of the scrap for the given scrap type.  The size is given in bytes.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 LoadScrap}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 LoadScrap\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 LoadScrap\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void LoadScrap(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This call should be made by any program that uses the Scrap Manager.  The call is made right after initializing the tools.  It tells the Scrap Manager to look for a scrap file, reading the scrap and making it the current scrap if a scrap file is found.  See also }{\f6\fs20 UnloadScrap}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 PutScrap}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 PutScrap\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 PutScrap\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void PutScrap(unsigned Longint numBytes, Word scrapType, Pointer srcPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Adds }{\f6\fs20 numBytes}{\f4  of information to the current scrap with a scrap type of }{\f6\fs20 scrapType}{\f4 .  The bytes are copied from memory starting at }{\f6\fs20 srcPtr}{\f4 .\par This call will not effect the contents of scraps with a scrap type other than the one given.  If more that one call is made to }{\f6\fs20 PutScrap}{\f4  with the same scrap type, the new information is appended to the old information.\par See also }{\f6\fs20 ZeroScrap}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 UnloadScrap}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 UnloadScrap\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 UnloadScrap\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void UnloadScrap(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This call should be made by any program that supports the Scrap Manager.  The call should be made just before the program shuts down the tools.  It tells the Scrap Manager to write the current scrap to a private, system scrap file.  The scrap file is loaded with }{\f6\fs20 LoadScrap}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ZeroScrap}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ZeroScrap\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ZeroScrap\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ZeroScrap(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 ZeroScrap}{\f4  deletes all of the information for all scrap types in the current scrap.  }{\f6\fs20 ZeroScrap}{\f4  is generally called just before creating a new scrap with calls to }{\f6\fs20 PutScrap}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Sound Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Sound Tool Set\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Sound Tool Set}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named Sound.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FFSoundDoneStatus}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FFSoundDoneStatus\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FFSoundDoneStatus\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Boolean FFSoundDoneStatus(Word genNumber);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0813\tab invalGenNumErr}{\f4 \tab Invalid generator number\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns }{\f6\fs20 TRUE}{\f4  if the specified generator is busy playing a sound, and }{\f6\fs20 FALSE}{\f4  if it is free.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FFStartSound}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FFStartSound\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FFStartSound\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FFStartSound(Word genNumFFSynth, Pointer PBlockPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0812\tab noSAddrInitErr}{\f4 \tab The Sound Tool Set is not active\par \tab }{\f6\fs20 0x0813\tab invalGenNumErr}{\f4 \tab Invalid generator number\par \tab }{\f6\fs20 0x0814\tab synthModeErr}{\f4 \tab Synthesizer mode error\par \tab }{\f6\fs20 0x0815\tab genBusyErr}{\f4 \tab The generator is already in use\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Starts playing a sound.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 genNumFFSynth}{\f4 \tab This value is broken down into several individual fields, as follows:\par \par }\pard \qj\fi-1080\li3600\widctlpar\adjustright {\f4 bits 15-12\tab DOC channel number, from 0 to 15.  This value is always zero in this course; for a complete description, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , page 47-13.\par \par bits 11-8\tab The sound generator to use, in the range 0 to 14.\par \par bits 7-4\tab Reserved; set to 0.\par \par bits 3-0\tab In this course, this call is used to play a digitized sound; for that use, these bits should be set to 0001.  For other uses, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 2}{\f4 , page 21-16.\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f4 \par }{\f6\fs20 PBlockPtr}{\f4 \tab Sound parameter block.  See Lesson 16 for a simple description of this record and its parameters, or }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , page 47-3 for a detailed description.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FFStopSound}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FFStopSound\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FFStopSound\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void FFStopSound(Word genMask);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Stops the sound in one or more of the sound generators.  Each bit corresponds to one of the 15 available sound generators, with the generator number matching the bit.  Setting a bit in }{\f6\fs20 genMask}{\f4  turns off the sound in the corresponding sound generator.\par For example, setting }{\f6\fs20 genMask}{\f4  to 0x7FFF turns off all of the user sound generators, while setting }{\f6\fs20 genMask}{\f4  to 0x0004 would turn off generator 2.\par Generator 15 should never be turned off.  It is used by the operating system as a timer; turning it off can cause all sorts of problems.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 WriteRamBlock}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 WriteRamBlock\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 WriteRamBlock\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void WriteRamBlock(Pointer srcPtr, Word DOCStart, Word byteCount);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0810\tab noDOCFndErr}{\f4 \tab The DOC or RAM was not found\par \tab }{\f6\fs20 0x0811\tab docAddrRngErr}{\f4 \tab DOC address range error\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 WriteRamBlock}{\f4  transfers a series of bytes from main memory to the sound memory.  (The 64K sound memory is called DOC RAM in the toolbox reference manuals.)\par The bytes to move must not lie in banks 0x00, 0x01, 0xE0 or 0xE1.  Interrupts must be disabled while the bytes are moved.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 srcPtr}{\f4 \tab Points to the first byte to transfer.\par \par }{\f6\fs20 DOCStart}{\f4 \tab Location in DOC RAM to place the bytes.\par \par }{\f6\fs20 byteCount}{\f4 \tab Number of bytes to transfer.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Sound Tool Set Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Sound Tool Set Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct SoundParamBlock \{\par    Pointer waveStart;             /* starting address of wave */\par    Word waveSize;                 /* waveform size in pages */\par    Word freqOffset;               /* ? formula to be provided */\par    Word docBuffer;                /* DOC buffer start address, low byte = 0 */\par    Word bufferSize;               /* DOC buffer start address, low byte = 0 */\par                          /* Pointer to start of next wave's parameter block */\par    struct SoundParamBlock *nextWavePtr;\par    Word volSetting;               /* DOC volume setting. High byte = 0 */\par    \};\par typedef struct SoundParamBlock SoundParamBlock}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SoundParamBlock}}}{\f6\fs20 , *SoundPBPtr,\par }\pard \widctlpar\adjustright {\f6\fs20    **SoundPBHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Standard File Operations Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Standard File Operations Tool Set\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Standard File Operations Tool Set}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SFO}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named STDFile.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Reply Records}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Reply Records\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 reply record}}}{\v\f4 \par }{\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct SFReplyRec2 \{\par    Boolean good;\par    Word fileType;\par    LongWord auxType;\par    RefDescriptor nameRefDesc;\par    Ref nameRef;\par    RefDescriptor pathRefDesc;\par    Ref pathRef;\par    \};\par typedef struct SFReplyRec2 SFReplyRec2}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SFReplyRec2}}}{\f6\fs20 , *SFReplyRec2Ptr, **SFReplyRec2Hndl;\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Standard File Manager calls described here pass back a reply record to tell you what file the user picked.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 good}{\f4 \tab This value will be }{\f6\fs20 FALSE}{\f4  if the user canceled the operation, and }{\f6\fs20 TRUE}{\f4  if the user picked a file.\par }{\f6\fs20 fileType}{\f4 \tab For }{\f6\fs20 SFGetFile2}{\f4 , this is the file type of the file the user picked.  This field is not used for }{\f6\fs20 SFPutFile2}{\f4 .\par }{\f6\fs20 auxType}{\f4 \tab For }{\f6\fs20 SFGetFile2}{\f4 , this is the auxiliary file type of the file the user picked.  This field is not used for }{\f6\fs20 SFPutFile2}{\f4 .\par }{\f6\fs20 nameRefDesc}{\f4 \tab You fill this parameter in before the call.  It tells SFO what format to use when it returns }{\f6\fs20 nameRef}{\f4 .  This parameter should almost always be 3, telling SFO to allocate an appropriate amount of memory and return a handle to the file name.  For other possibilities, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 , page 48-7.\par }{\f6\fs20 nameRef}{\f4 \tab This is the name of the file selected by the user.  It is a pointer to a GS/OS output string of type }{\f6\fs20 ResultBuf255}{\f4 .\par }{\f6\fs20 pathRefDesc}{\f4 \tab You fill this parameter in before the call.  It tells SFO what format to use when it returns }{\f6\fs20 pathRef}{\f4 .  This parameter should almost always be 3, telling SFO to allocate an appropriate amount of memory and return a handle to the path name.  For other possibilities, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 , page 48-7.\par }{\f6\fs20 pathRef}{\f4 \tab This is the full path name of the file selected by the user.  It is a pointer to a GS/OS output string of type }{\f6\fs20 ResultBuf255}{\f4 .\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SFGetFile2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SFGetFile2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SFGetFile2\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SFGetFile2(Integer whereX, Integer whereY, Word promptRefDesc,\par    Ref promptRef, WordProcPtr filterProcPtr, SFTypeList2Ptr theTypeList,\par    SFReplyRec2Ptr theReply);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1701\tab badPromptDesc}{\f4 \tab Invalid }{\f6\fs20 promptRefDesc}{\f4  value\par \tab }{\f6\fs20 0x1704\tab badReplyNameDesc}{\f4 \tab Invalid }{\f6\fs20 nameRefDesc}{\f4  value in the reply record\par \tab }{\f6\fs20 0x1705\tab badReplyPathDesc}{\f4 \tab Invalid }{\f6\fs20 pathRefDesc}{\f4  value in the reply record\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 SFGetFile2}{\f4  displays a standard dialog used to open files.  All interaction with the user is handled by }{\f6\fs20 SFGetFile2}{\f4 , which returns a reply record indicating what file, if any, the user selected.\par See \ldblquote Reply Records\rdblquote  at the start of this section for details about the reply record.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 whereX}{\f4 \tab The horizontal position for the top left corner of the dialog.\par }{\f6\fs20 whereY}{\f4 \tab The vertical position for the top left corner of the dialog.\par }{\f6\fs20 promptRefDesc}{\f4 \tab This is the type of reference for }{\f6\fs20 promptRef}{\f4 .\par }\pard \qj\fi-360\li2880\widctlpar\adjustright {\f4 0\tab }{\f6\fs20 promptRef}{\f4  is a pointer to a p-string.\par 1\tab }{\f6\fs20 promptRef}{\f4  is the handle of a p-string.\par 2\tab }{\f6\fs20 promptRef}{\f4  is the resource ID for an }{\f6\fs20 rPString}{\f4  resource.\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 promptRef}{\f4 \tab This is a p-string used as a prompt at the top of the dialog.\par }{\f6\fs20 filterProcPtr}{\f4 \tab This is a pointer to a filter function.  In this course, this parameter is always }{\f6\fs20 NULL}{\f4 , telling }{\f6\fs20 SFGetFile2}{\f4  to use the standard filter function.  For alternatives, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 , page 48-4.\par }{\f6\fs20 theTypeList}{\f4 \tab This is a structure containing the types of files to show in the file list.  This is described fully below.\par }{\f6\fs20 theReply}{\f4 \tab This is the reply record.  See \ldblquote Reply Records\rdblquote  at the start of this section for details.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The dialog shows a list of the files a user can open.  This list always includes folders, allowing the user to navigate through the tree structured directories on a typical disk.  In general, your application will also want to display all of the files the program can open, but not any files that the user really can\rquote t select.  The }{\f6\fs20 theTypeList}{\f4  record is used to tell }{\f6\fs20 SFGetFile2}{\f4  which file types (other than directories) it should show the user.\par The structure itself is a count followed by one or more file type entries:\par \par }\pard \widctlpar\adjustright {\f6\fs20 #ifndef sfFileTypeEntriesLength\par #define sfFileTypeEntriesLength 0x0005\par #endif\par \par struct SFTypeList2 \{\par    Word numEntries;\par    TypeSelector2 fileTypeEntries[sfFileTypeEntriesLength];\par    \};\par typedef struct SFTypeList2 SFTypeList2}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SFTypeList2}}}{\f6\fs20 , *SFTypeList2Ptr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SFTypeList2Ptr}}}{\f6\fs20 , **SFTypeList2Hndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par While the ORCA/C header file puts a limit of 5 on the number of array entries, this is simply an artificial limit imposed by the need to pick some value.  You can change this value by declaring }{\f6\fs20 sfFileTypeEntriesLength}{\f4  with some other value before the }{\f6\fs20 #include}{\f4  that includes this header file.\par Each type list entry is a }{\f6\fs20 TypeSelector2}{\f4  structure:\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct TypeSelector2 \{\par    Word flags;\par    Word fileType;\par    LongWord auxType;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct TypeSelector2 TypeSelector2}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TypeSelector2}}}{\f6\fs20 ;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The }{\f6\fs20 fileType}{\f4  and }{\f6\fs20 auxType}{\f4  entries specify one particular file type and auxiliary file type combination to allow.  If a file\rquote s file type and auxiliary file type match one of these entries it will show up in the list of files the user can select.  The }{\f6\fs20 flags}{\f4  word controls how the }{\f6\fs20 fileType}{\f4  and }{\f6\fs20 auxType}{\f4  entries are used.  The bit flags are:\par \par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 bit 15\tab If this bit is clear, a file must match the auxiliary file type exactly to show up in the list of files.  If this bit is set, the }{\f6\fs20 auxType}{\f4  field is ignored.\par bit 14\tab If this bit is clear, a file must match the file type exactly to show up in the list of files.  If this bit is set, the }{\f6\fs20 fileType}{\f4  field is ignored.\par bit 13\tab If this bit is set, matching files will be displayed in the file list, but they will be dimmed and unselectable.\par bits 12-0\tab Reserved; set to 0.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SFPutFile2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SFPutFile2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SFPutFile2\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SFPutFile2(Integer whereX, Integer whereY, Word promptRefDesc,\par    Ref promptRef, Word origRefDesc, Ref origNameRef,\par    SFReplyRec2Ptr theReply);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x1701\tab badPromptDesc}{\f4 \tab Invalid }{\f6\fs20 promptRefDesc}{\f4  value\par \tab }{\f6\fs20 0x1702\tab badOrigNameDesc}{\f4 \tab Invalid }{\f6\fs20 origNameRefDesc}{\f4  value\par \tab }{\f6\fs20 0x1704\tab badReplyNameDesc}{\f4 \tab Invalid }{\f6\fs20 nameRefDesc}{\f4  value in the reply record\par \tab }{\f6\fs20 0x1705\tab badReplyPathDesc}{\f4 \tab Invalid }{\f6\fs20 pathRefDesc}{\f4  value in the reply record\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 SFPutFile2}{\f4  displays a standard dialog used to pick a new file name.  This is generally used by a program\rquote s Save As command to select a new file name, or by the Save command for a file that has never been saved to disk.  All interaction with the user is handled by }{\f6\fs20 SFPutFile2}{\f4 , which returns a reply record indicating what file name, if any, the user selected.\par See \ldblquote Reply Records\rdblquote  at the start of this section for details about the reply record.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 whereX}{\f4 \tab The horizontal position for the top left corner of the dialog.\par }{\f6\fs20 whereY}{\f4 \tab The vertical position for the top left corner of the dialog.\par }{\f6\fs20 promptRefDesc}{\f4 \tab This is the type of reference for }{\f6\fs20 promptRef}{\f4 .\par }\pard \qj\fi-360\li2880\widctlpar\adjustright {\f4 0\tab }{\f6\fs20 promptRef}{\f4  is a pointer to a p-string.\par 1\tab }{\f6\fs20 promptRef}{\f4  is the handle of a p-string.\par 2\tab }{\f6\fs20 promptRef}{\f4  is the resource ID for an }{\f6\fs20 rPString}{\f4  resource.\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 promptRef}{\f4 \tab This is a p-string used as a prompt above the file name entry box.\par }{\f6\fs20 origRefDesc}{\f4 \tab This is the type of reference for }{\f6\fs20 origNameRef}{\f4 .\par }\pard \qj\fi-360\li2880\widctlpar\adjustright {\f4 0\tab }{\f6\fs20 origNameRef}{\f4  is a pointer to a GS/OS input string.\par 1\tab }{\f6\fs20 origNameRef}{\f4  is the handle of a GS/OS input string.\par 2\tab }{\f6\fs20 origNameRef}{\f4  is the resource ID for an }{\f6\fs20 rC1InputString}{\f4  resource.  (This resource type is not used in this course.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 , page E-4 for details.)\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 origNameRef}{\f4 \tab This is a pointer to a GS/OS input string (type }{\f6\fs20 GSString255}{\f4 ).  It is used as a default file name in the file name entry box.\par }{\f6\fs20 theReply}{\f4 \tab This is the reply record.  See \ldblquote Reply Records\rdblquote  at the start of this section for details.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Standard File Operations Tool Set Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Standard File Operations Tool Set Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct SFReplyRec2 \{\par    Boolean good;\par    Word fileType;\par    LongWord auxType;\par    RefDescriptor nameRefDesc;\par    Ref nameRef;\par    RefDescriptor pathRefDesc;\par    Ref pathRef;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct SFReplyRec2 SFReplyRec2}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SFReplyRec2}}}{\f6\fs20 , *SFReplyRec2Ptr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SFReplyRec2Ptr}}}{\f6\fs20 , **SFReplyRec2Hndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct TypeSelector2 \{\par    Word flags;\par    Word fileType;\par    LongWord auxType;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct TypeSelector2 TypeSelector2}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TypeSelector2}}}{\f6\fs20 ;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct SFTypeList2 \{\par    Word numEntries;\par    TypeSelector2 fileTypeEntries[sfFileTypeEntriesLength];\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct SFTypeList2 SFTypeList2}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SFTypeList2}}}{\f6\fs20 , *SFTypeList2Ptr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 SFTypeList2Ptr}}}{\f6\fs20 , **SFTypeList2Hndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 TextEdit Tool Set}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 TextEdit Tool Set\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TextEdit Tool Set}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named TextEdit.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TEGetRuler}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TEGetRuler\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEGetRuler\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void TEGetRuler(Word rulerDescriptor, Ref rulerRef, Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par \tab }{\f4 Resource Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TEGetRuler}{\f4  returns the ruler for a TextEdit control.\par In this course, }{\f6\fs20 rulerDescriptor}{\f4  is always 3, which tells }{\f6\fs20 TEGetRuler}{\f4  to create a handle for the ruler and store the handle at the location passed as }{\f6\fs20 rulerRef}{\f4 .  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Programming: Volume 3}{\f4 , page 49-80 for other possibilities.\par }{\f6\fs20 theTERecord}{\f4  is the handle for the text edit control, or }{\f6\fs20 NULL}{\f4  for the current control in the current window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TEGetSelection}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TEGetSelection\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEGetSelection\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void TEGetSelection(Pointer selectionStart, Pointer selectionEnd,\par    Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TEGetSelection}{\f4  reads the location of the current selection point, returning it as a character displacement from the start of the text.  If no text is selected, both }{\f6\fs20 selectionStart}{\f4  and }{\f6\fs20 selectionEnd}{\f4  are set to the location of the insertion point.  Both }{\f6\fs20 selectionStart}{\f4  and }{\f6\fs20 selectionEnd}{\f4  are pointers to long integers.\par Pass }{\f6\fs20 NULL}{\f4  for }{\f6\fs20 theTERecord}{\f4  to update the active TextEdit control.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TEGetSelectionStyle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TEGetSelectionStyle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEGetSelectionStyle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word TEGetSelectionStyle(TEStylePtr commonStyle, Handle styleHandle,\par    Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TEGetSelectionStyle}{\f4  returns information about the style of the currently selected text.  If no text is selected, the null style is returned; the null style is the style that will be applied to newly typed text.\par }{\f6\fs20 commonStyle}{\f4  is a style record; all of the style information that applies to all of the selected text will be placed in this style record.  The integer returned as the function result is a flags word that tells which of the style record entries are valid:\par \par bits 15-6\tab Reserved; these will be 0.\par bit 5\tab If this bit is set, the font family is valid.\par bit 4\tab If this bit is set, the font size is valid.\par bit 3\tab If this bit is set, the foreground color is valid.\par bit 2\tab If this bit is set, the background color is valid.\par bit 1\tab If this bit is set, the user data field is valid.\par bit 0\tab If this bit is set, the attributes valid.\par \par }{\f6\fs20 TEGetSelectionStyle}{\f4  places all of the style records that pertain to the selection in the handle passed as }{\f6\fs20 styleHandle}{\f4 , resizing the handle if necessary.  We did not use this ability in this course.  For more information on the style records returned, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Programming: Volume 3}{\f4 , page 49-84.\par }{\f6\fs20 theTERecord}{\f4  is the handle for the text edit control, or }{\f6\fs20 NULL}{\f4  for the current control in the current window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TEGetText}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TEGetText\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEGetText\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord TEGetText(Word bufferDescriptor, Ref bufferRef, Long bufferLength,\par    Word styleDescriptor, Ref styleRef, Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par \tab 0x2204\tab teInvalidDescriptor}{\f4 \tab Invalid descriptor value specified\par \tab }{\f6\fs20 0x2208\tab teBufferOverflow}{\f4 \tab The output buffer was too small to accept all data\par \tab Memory Manager errors returned unchanged\par }{\f6\fs20 \tab }{\f4 Resource Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TEGetText}{\f4  returns the text in a TextEdit control.\par }{\f6\fs20 bufferDescriptor}{\f4  tells what kind of parameter is passed for }{\f6\fs20 bufferRef}{\f4 ; in this course we use 0x0019, telling }{\f6\fs20 TEGetText}{\f4  to create a handle for the text, saving the handle at the location passed as the }{\f6\fs20 bufferRef}{\f4  parameter.  The function returns the length of the text in bytes as the function result.\par For the purposes of this course, }{\f6\fs20 bufferLength}{\f4  is always set to 0.\par }{\f6\fs20 styleDescriptor}{\f4  tells }{\f6\fs20 TEGetText}{\f4  what sort of parameter to expect in }{\f6\fs20 styleRef}{\f4 ; in this course, we used 3, telling }{\f6\fs20 TEGetText}{\f4  to return a handle.  }{\f6\fs20 styleRef}{\f4  is the address of the handle variable.  The information returned is a }{\f6\fs20 TEFormat}{\f4  record; the length can be calculated by adding several values together from the record.  (This is described in Lesson 11.)\par }{\f6\fs20 theTERecord}{\f4  is the handle for the text edit control, or }{\f6\fs20 NULL}{\f4  for the current control in the current window.\par For information about other options available with this call see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Programming: Volume 3}{\f4 , page 49-86.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TEPaintText}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TEPaintText\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEPaintText\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord TEPaintText(GrafPortPtr thePort, Long startingLine, Rect *destRect,\par    Word flags, Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par \tab 0x2209\tab teInvalidLine}{\f4 \tab The starting line value is greater than the number of lines in the text (can be interpreted as an end of file indication in some cases)\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TEPaintText}{\f4  draws text in a }{\f6\fs20 GrafPort}{\f4 .  This is generally used to print text.\par }{\f6\fs20 thePort}{\f4  is the }{\f6\fs20 GrafPort}{\f4  where the text will be drawn.  }{\f6\fs20 destRect}{\f4  is the size of one page in the }{\f6\fs20 GrafPort}{\f4 .\par }{\f6\fs20 startingLine}{\f4  is the line number at which to start printing.  After filling one page, }{\f6\fs20 TEPaintText}{\f4  returns, returning the value to pass for }{\f6\fs20 startingLine}{\f4  on the next call.  If the entire document has been printed, }{\f6\fs20 TEPaintText}{\f4  returns -1.\par If }{\f6\fs20 flags}{\f4  is 0x4000, }{\f6\fs20 TEPaintText}{\f4  doesn\rquote t actually draw the text; instead, it calculates the correct line number for the next page and returns.  This capability can be used to rapidly skip pages.  Pass 0 for }{\f6\fs20 flags}{\f4  for normal printing.\par }{\f6\fs20 theTERecord}{\f4  is the handle for the text edit control, or }{\f6\fs20 NULL}{\f4  for the current control in the current window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TESetRuler}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TESetRuler\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TESetRuler\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void TESetRuler(Word rulerDescriptor, Ref rulerRef, Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TESetRuler}{\f4  changes the ruler information for a TextEdit control, then forces a screen update by calling }{\f6\fs20 InvalRect}{\f4 .\par }{\f6\fs20 rulerDescriptor}{\f4  tells }{\f6\fs20 TESetRuler}{\f4  what sort of parameter to expect for }{\f6\fs20 rulerRef}{\f4 ; in this course, we use 1 for }{\f6\fs20 rulerDescriptor}{\f4  and pass a ruler handle for }{\f6\fs20 rulerRef}{\f4 .  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Programming: Volume 3}{\f4 , page 49-115 for other possibilities.\par }{\f6\fs20 theTERecord}{\f4  is the handle for the text edit control, or }{\f6\fs20 NULL}{\f4  for the current control in the current window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TESetSelection}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TESetSelection\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TESetSelection\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void TESetSelection(Pointer selectionStart, Pointer selectionEnd,\par    Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TESetSelection}{\f4  sets the selection point to the values given, updating the control as appropriate.  If }{\f6\fs20 selectionStart}{\f4  is the same as }{\f6\fs20 selectionEnd}{\f4 , the insertion point is placed }{\f6\fs20 selectionEnd}{\f4  characters into the document.  If }{\f6\fs20 selectionStart}{\f4  is greater than }{\f6\fs20 selectionEnd}{\f4 , the values are reversed.  If }{\f6\fs20 selectionEnd}{\f4  is past the end of the document, it is automatically reduced to a valid value.\par Pass }{\f6\fs20 NULL}{\f4  for }{\f6\fs20 theTERecord}{\f4  to update the active TextEdit control.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TESetText}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TESetText\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TESetText\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void TESetText(Word textDescriptor, Ref textRef, Long textLength,\par    Word styleDescriptor, Ref styleRef, Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par \tab 0x2204\tab teInvalidDescriptor}{\f4 \tab Invalid descriptor value specified\par \tab Memory Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TESetText}{\f4  adds text and style information to a TextEdit control.\par }{\f6\fs20 textDescriptor}{\f4  tells }{\f6\fs20 TESetText}{\f4  what sort of parameter to expect for }{\f6\fs20 textRef}{\f4 .  In this course, we always pass 5 for }{\f6\fs20 textDescriptor}{\f4  and a pointer to a text buffer for }{\f6\fs20 textRef}{\f4 .  }{\f6\fs20 textLength}{\f4  is the number of characters in the text buffer.\par }{\f6\fs20 styleDescriptor}{\f4  tells }{\f6\fs20 TESetText}{\f4  what sort of parameter to expect for }{\f6\fs20 styleRef}{\f4 .  In this course, we always pass 0, indicating that }{\f6\fs20 styleRef}{\f4  is a pointer to a style record.\par }{\f6\fs20 theTERecord}{\f4  is the handle for the text edit control, or }{\f6\fs20 NULL}{\f4  for the current control in the current window.\par For information about other options available with this call see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Programming: Volume 3}{\f4 , page 49-117.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TEStyleChange}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TEStyleChange\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TEStyleChange\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void TEStyleChange(Word flags, TEStylePtr newStyle, Handle theTERecord);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par \tab }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The }{\f6\fs20 theTERecord }{\f4 does not refer to a valid }{\f6\fs20 TERecord\par \tab 0x2205\tab teInvalidFlag}{\f4 \tab The specified flag word is invalid\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TEStyleChange}{\f4  changes the style information for the current text selection.  If there is no current selection, the style is applied to the null style record; the null style record is the style that will be used if new text is typed.\par }{\f6\fs20 flags}{\f4  is a set of bit flags indicating what style information should actually be changed.\par \par }\pard \qj\fi-1080\li1800\widctlpar\adjustright {\f4 bits 15-7\tab Reserved; set to 0.\par 6\tab If this bit is set, the font family will be changed.\par 5\tab If this bit is set, the font size will be changed.\par 4\tab If this bit is set, the foreground color will be changed.\par 3\tab If this bit is set, the background color will be changed.\par 2\tab If this bit is set, the user data field will be changed.\par 1\tab If this bit is set, the style attributes will be changed.  You should not set this bit and bit 0.\par 0\tab If this bit is set, the style attributes will be updated, but the style isn\rquote t just blindly applied.  Instead, TextEdit checks to see if the style is the current style for the entire selection.  If so, the style is turned off.  If not, the style is added to the style information already selected for the text.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }{\f6\fs20 newStyle}{\f4  is a style record containing the new style information.\par }{\f6\fs20 theTERecord}{\f4  is the handle for the text edit control, or }{\f6\fs20 NULL}{\f4  for the current control in the current window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TextEdit Tool Set Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TextEdit Tool Set Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* Justification Values */\par #define leftJust 0x0000\par #define rightJust 0xFFFF\par #define centerJust 0x0001\par }\pard \widctlpar\adjustright {\f6\fs20 #define fullJust 0x0002\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct TERuler \{\par    Word leftMargin;\par    Word leftIndent;\par    Word rightMargin;\par    Word just;\par    Word extraLS;\par    Word flags;\par    LongWord userData;\par    Word tabType;\par    TabItem theTabs[1];\par    Word tabTerminator;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct TERuler TERuler}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TERuler}}}{\f6\fs20 , *TERulerPtr, **TERulerHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct TEStyle \{\par    FontID styleFontID;\par    Word foreColor;\par    Word backColor;\par    LongWord userData;\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct TEStyle TEStyle}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TEStyle}}}{\f6\fs20 , *TEStylePtr, **TEStyleHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct TEStyleGroup \{\par    Word count;\par    TEStyle styles[1];\par    \};\par typedef struct TEStyleGroup TEStyleGroup}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TEStyleGroup}}}{\f6\fs20 , *TEStyleGroupPtr,\par }\pard \widctlpar\adjustright {\f6\fs20    **TEStyleGroupHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct StyleItem \{\par    LongWord dataLength;        /* Number of text characters using the style */\par    LongWord dataOffset;        /* Byte offset into theStyleList entry */\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct StyleItem StyleItem}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 StyleItem}}}{\f6\fs20 , *StyleItemPtr, **StyleItemHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 struct TEFormat \{\par    Word version;\par    LongWord rulerListLength;\par    TERuler theRulerList[1];\par    LongWord styleListLength;\par    TEStyle theStyleList[1];\par    LongWord numberOfStyles;\par    StyleItem theStyles[1];\par    \};\par }\pard \widctlpar\adjustright {\f6\fs20 typedef struct TEFormat TEFormat}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 TEFormat}}}{\f6\fs20 , *TEFormatPtr, **TEFormatHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 ToolLocator}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 ToolLocator\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Tool Locator}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named Locator.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 MessageCenter}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 MessageCenter\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MessageCenter\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void MessageCenter(Word action, Word msgID, Handle messageHandle);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0111\tab messNotFoundErr}{\f4 \tab The specified message was not found\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 MessageCenter}{\f4  is used for communications between programs.\par The }{\f6\fs20 msgID}{\f4  parameter tells }{\f6\fs20 MessageCenter}{\f4  what kind of message you are interested in.  These message numbers are assigned by Apple Computer.  The only one used in this course is message 1, which is a message created by the Finder.  It contains lists of documents to open or print.  See Lesson 17 for details on the format and use of this message type.\par You can read, write or delete messages; the action parameter tells }{\f6\fs20 MessageCenter}{\f4  which you want to do.  The table below shows the actions as a named action (the names are in the interface file for the Tool Locator) and as numeric values, along with a description of the action.\par \par }\pard \qj\fi-2160\li2520\widctlpar\tx2160\adjustright {\f6\fs20 addMessage}{\f4 \tab 1\tab Adds a new message.  Any old message with the same message ID is deleted.  }{\f6\fs20 MessageCenter}{\f4  makes a copy of the handle you pass.\par \par }{\f6\fs20 getMessage}{\f4 \tab 2\tab Reads a message.  You must create and pass a handle, which should be moveable.  }{\f6\fs20 MessageCenter}{\f4  will resize the handle and copy the message into the handle.  If there is no message with the given message ID }{\f6\fs20 MessageCenter}{\f4  returns an error and doesn\rquote t change the handle.\par \par }{\f6\fs20 deleteMessage}{\f4 \tab 3\tab Removes a message from the message center.  While you must pass a handle, it isn\rquote t used or modified in any way.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ShutDownTools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ShutDownTools\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ShutDownTools\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ShutDownTools(Word startStopVerb, Ref startStopRecRef);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Shuts down the tools started by }{\f6\fs20 StartUpTools}{\f4 .  The }{\f6\fs20 startStopRecRef}{\f4  is the value returned by }{\f6\fs20 StartUpTools}{\f4 ; }{\f6\fs20 startStopVerb}{\f4  should match the }{\f6\fs20 startStopVerb}{\f4  parameter used in the }{\f6\fs20 StartUpTools}{\f4  call.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 StartUpTools}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 StartUpTools\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Ref StartUpTools(Word myID, Word startStopVerb, Ref startStopRecRef);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0103\tab TLBadRecFlag}{\f4 \tab The StartStop record is invalid\par \tab }{\f6\fs20 0x0104\tab TLCantLoad}{\f4 \tab A tool cannot be loaded\par \tab System Loader errors returned unchanged\par \tab Memory Manager errors returned unchanged\par \tab GS/OS errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Starts one or more tools, doing all of the appropriate things (like reserving memory) and starting the tools in the correct order.\par Some tools require other tools to work properly; it is up to you to make sure that all of the needed tools are actually started.\par }{\f6\fs20 StartUpTools}{\f4  returns a }{\f6\fs20 startStopRecRef}{\f4  value that must be saved and passed to }{\f6\fs20 ShutDownTools}{\f4  when the tools are shut down.\par See Table 7-1 for a list of the tools used in this course, along with their dependencies as of System Disk 6.0.\par \par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f6\fs20 myID}{\f4 \tab The user ID to use for allocating memory.  This is normally the application\rquote s user ID, as returned by C\rquote s }{\f6\fs20 userid}{\f4  function.\par }{\f6\fs20 startStopVerb}{\f4 \tab This parameter tells }{\f6\fs20 StartUpTools}{\f4  what sort of value is being passed for }{\f6\fs20 startStopRecRef}{\f4 .  In this course, we always use a resource to list the tools to start, so this parameter is 2.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4 , page 51-19 for other possibilities.\par }{\f6\fs20 startStopRecRef}{\f4 \tab This parameter is the resource ID for an }{\f6\fs20 rToolStartup}{\f4  resource.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TextEdit Tool Set Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TextEdit Tool Set Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \widctlpar\adjustright {\f6\fs20 /* MessageCenter Codes */\par #define fileInfoType 0x0001       /* Message type parameter */\par #define addMessage 0x0001         /* action parameter */\par #define getMessage 0x0002         /* action parameter */\par #define deleteMessage 0x0003      /* action parameter */\par #define fileInfoTypeGS 0x0011     /* Message type parameter (GS/OS strings) */\par \par struct MessageRec \{\par    struct MessageRec **messageNext;\par    Word messageType;\par    Word messageData;\par    Str255 fileNames[1];\par    \};\par typedef struct MessageRec MessageRec}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 MessageRec}}}{\f6\fs20 , *MessageRecPtr, **MessageRecHndl;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Window Manager}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Window Manager\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Window Manager}}}{\v\f4 \par }{\f4 \par In ORCA/C the header file for this tool is named Window.h.  This header file must be included with a }{\f6\fs20 #include}{\f4  statement to use the tool calls listed in this section.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Window Parameters}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Window Parameters\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindParam1 resource}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 paramList record}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewWindow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewWindow2}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 When a window is defined, there are a number of parameters that are passed to the Window Manager to describe the type of the window.  In this course, the parameters are passed via an }{\f6\fs20 rWindParam1}{\f4  resource or via a }{\f6\fs20 paramList}{\f4  record.  The parameters described below apply to either, although some of the parameters are set to constants in an }{\f6\fs20 rWindParam1}{\f4  resource, and do not appear in the resource description file.\par See \ldblquote Window Manager Definitions,\rdblquote  later in this section, for the definition of a }{\f6\fs20 paramList}{\f4  structure.  See Appendix B for a description of the }{\f6\fs20 rWindParam1}{\f4  resource.\par \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 paramLength}{\f4 \tab The length of a }{\f6\fs20 paramList}{\f4  structure; 78.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wFrameBits}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wFrameBits}{\f4 \tab Flags word, defined as follows:\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 window\:title}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fTitle}{\f4 \tab 15\tab If this bit is set, the window will have a title bar.  If this bit is clear, the window will not have a title bar.\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 close box}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fClose}{\f4 \tab 14\tab If this bit is set, the window will have a close box at the left side of the title bar.  If this bit is clear, there will not be a close box.  You must clear this bit if the window does not have a title bar (i.e. if }{\f6\fs20 fTitle}{\f4  is 0).\par \par }{\f6\fs20 fAlert}{\f4 \tab 13\tab Set this bit to 1 for an alert-style window frame.  An alert style window has a double-lined frame around the content region.  Alert windows don\rquote t have much besides a window frame, so if you set this bit, you should clear }{\f6\fs20 fInfo}{\f4 , }{\f6\fs20 fZoom}{\f4 , }{\f6\fs20 fFlex}{\f4 , }{\f6\fs20 fGrow}{\f4 , }{\f6\fs20 fBScroll}{\f4 , }{\f6\fs20 fRScroll}{\f4 , }{\f6\fs20 fClose}{\f4  and }{\f6\fs20 fTitle}{\f4 .\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fRScroll}{\f4 \tab 12\tab If this bit is set, the Window Manager will create a scroll bar at the right side of the window to scroll up and down in the document.  This scroll bar must be handled by }{\f6\fs20 TaskMaster}{\f4 ; if you want to create your own scroll bar, leave this bit clear and use the Control Manager to create the scroll bar.\par \par \tab \tab If this bit is set, }{\f6\fs20 fBScroll}{\f4  and }{\f6\fs20 fGrow}{\f4  should also be set.\par \par }{\f6\fs20 fBScroll}{\f4 \tab 11\tab If this bit is set, there will be a bottom scroll bar.  As with }{\f6\fs20 fRScroll}{\f4 , you only use this bit if you want }{\f6\fs20 TaskMaster}{\f4  to handle scrolling for you.\par \par \tab \tab If this bit is set, }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fGrow}{\f4  should also be set.\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 grow box}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fGrow}{\f4 \tab 10\tab If this bit is set, there will be a grow box in the corner formed by the scroll bars at the lower right corner of the window.  If the bit is clear, there will not be a grow box.  As with the scroll bars, this grow box must be handled by }{\f6\fs20 TaskMaster}{\f4 ; to handle a grow box manually, you must create it yourself using the Control Manager.\par \par \tab \tab If this bit is set, }{\f6\fs20 fBScroll}{\f4  and }{\f6\fs20 fRScroll}{\f4  should also be set.\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GrowWindow}}}{\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ZoomWindow}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fFlex}{\f4 \tab 9\tab If this bit is set, the data height and width are flexible.  If the bit is clear, }{\f6\fs20 GrowWindow}{\f4  and }{\f6\fs20 ZoomWindow}{\f4  (called by }{\f6\fs20 TaskMaster}{\f4  to resize the window) will change the origin when the window size changes.\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 zoom box}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fZoom}{\f4 \tab 8\tab If this bit is set, there will be a zoom box at the right end of the title bar; if the bit is clear, there won\rquote t be a zoom box.  You must set }{\f6\fs20 fTitle}{\f4  to get a title bar if this bit is set.\par \par }{\f6\fs20 fMove}{\f4 \tab 7\tab In most cases, the title bar for the window is also its drag region.  In other words, you can move the window by dragging the title around.  If you set this bit, things behave as you would expect; if this bit is clear, you can still have a title bar, but the window can\rquote t be moved.\par \par }{\f6\fs20 fQContent}{\f4 \tab 6\tab Most of the time, when you click in the content region of a window, you expect the window to become the front window, but you don\rquote t expect anything else to happen.  If this bit is set, clicking in the content region of a window not only brings it to the front, but it also acts as if you actually clicked in the content region.  If this bit is clear, clicking in the content region of a window that isn\rquote t the front window just brings it to the front.\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ShowWindow}}}{\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HideWindow}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fVis}{\f4 \tab 5\tab If this bit is set, the window is visible; if it is clear, the window exists, but it is invisible.\par \par }\pard \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright {\pard\plain \qj\fi-1800\li4140\keepn\widctlpar\tx3780\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 info bar}}}{\v\f4 \par }\pard \qj\fi-1800\li4140\widctlpar\tx1700\tx3780\adjustright {\f6\fs20 fInfo}{\f4 \tab 4\tab If this bit is set, the window will have an info bar.\par \par \tab \tab If this bit is set, the }{\f6\fs20 wInfoHeight}{\f4  and }{\f6\fs20 wInfoDefProc}{\f4  fields must have values.\par \par }{\f6\fs20 fCtlTie}{\f4 \tab 3\tab In most programs, when a window is not the front window, the controls look different.  Scroll bars and grow boxes, for example, are hollow outlines.  If this bit is set, }{\f6\fs20 TaskMaster}{\f4  will redraw the controls in the proper state to match the window.  If the bit is clear, }{\f6\fs20 TaskMaster}{\f4  leaves the controls alone.\par \par }{\f6\fs20 fAllocated}{\f4 \tab 2\tab This flag is used internally by the Window Manager to determine if it allocated the memory for a window.  It always does for your windows, ignoring whatever value you code.\par \par }{\f6\fs20 fZoomed}{\f4 \tab 1\tab This flag is set if the window is currently in its zoomed state, and clear if not.\par \par }{\f6\fs20 fHilited}{\f4 \tab 0\tab This flag is used internally by the Window Manager.  You can set or clear the bit; the Window Manager ignores what you code.\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wTitle}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 window\:title}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wTitle}{\f4 \tab This field is a pointer to the title of a window.  The title is a p-string, and must be in a fixed memory location.  If there is no title bar, this field can be set to }{\f6\fs20 NULL}{\f4 .\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wRefCon}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wRefCon}{\f4 \tab Reserved for use by the application.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wZoom}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wZoom}{\f4 \tab This field is a rectangle defining the size of the window when it is in its zoomed state.  You can set the coordinates in the rectangle to 0, in which case the Window Manager picks out default values to zoom to the entire visible screen.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wColor}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wColor}{\f4 \tab This is a reference to a color table.  It is a pointer in a }{\f6\fs20 paramList}{\f4  structure, and can be a pointer, handle or resource ID in an }{\f6\fs20 rWindParam1}{\f4  resource.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wYOrigin}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wXOrigin}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\adjustright {\f6\fs20 wYOrigin}{\f4 ,\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wXOrigin}{\f4 \tab These two fields define the starting origin for the window.  Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wDataH}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wDataW}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\adjustright {\f6\fs20 wDataH}{\f4 ,\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wDataW}{\f4 \tab These values define the size of the entire document, in pixels.  Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wMaxH}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wMaxW}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\adjustright {\f6\fs20 wMaxH}{\f4 ,\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wMaxW}{\f4 \tab These values define the maximum size for the window.  If you code 0, the Window Manager will fill in values to let the window grow as big as the visible desktop.  Set these values to 0 if you are not setting the }{\f6\fs20 fGrow}{\f4  bit in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wScrollVer}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wScrollHor}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\adjustright {\f6\fs20 wScrollVer}{\f4 ,\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wScrollHor}{\f4 \tab These fields tell }{\f6\fs20 TaskMaster}{\f4  how many bits to scroll in each direction when the user clicks on a scroll bar arrow.  Because of the way dithered colors are created in 640 mode, you should set }{\f6\fs20 wScrollHor}{\f4  to some multiple of 8.  Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPageVer}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPageHor}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 scroll bar}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\keepn\widctlpar\adjustright {\f6\fs20 wPageVer}{\f4 ,\par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wPageHor}{\f4 \tab These fields tell }{\f6\fs20 TaskMaster}{\f4  how many bits to scroll in each direction when the user clicks in the page area of a scroll bar.  In most cases, you will set these values to 0; this tells the Window Manager to pick an appropriate value.  It will use a value 10 pixels smaller than the size of the window, so that paging will leave a little of the old page on the screen.  Set these values to 0 if you are not setting the }{\f6\fs20 fRScroll}{\f4  and }{\f6\fs20 fBScroll}{\f4  bits in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInfoRefCon}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 info bar}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wInfoRefCon}{\f4 \tab This value can be set to anything you like.  It\rquote s for your use when creating info bars.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInfoHeight}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 info bar}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wInfoHeight}{\f4 \tab This is the height of the info bar, in pixels.  The width of the info bar matches the width of the window itself, so there is no separate parameter for the width.  This value is only used if }{\f6\fs20 fInfo}{\f4  is set in the }{\f6\fs20 wFrameBits}{\f4  parameter.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wFrameDefProc}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wFrameDefProc}{\f4 \tab This pointer points to a subroutine that will be called when the Window Manager needs to draw the window.  For details, see the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual}{\f4 .\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wInfoDefProc}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wInfoDefProc}{\f4 \tab This pointer points to the subroutine to call when the information bar needs to be drawn.  For details, see the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual}{\f4 .\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wContDefProc}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wContDefProc}{\f4 \tab This field points to your update procedure.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPosition}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wPosition}{\f4 \tab This is a }{\f6\fs20 Rect}{\f4  structure.  It determines where the window is and how big it is when the window is first created.  The rectangle, which you specify in global coordinates, defines the size of the content region of the window.\par \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 wPlane}}}{\v\f4 \par }\pard \qj\fi-1800\li2160\widctlpar\adjustright {\f6\fs20 wPlane}{\f4 \tab To make a new window the front most window, set this field to -1.  To create a window that is behind all of the existing ones, use 0.  You can also pass a specific }{\f6\fs20 GrafPortPtr}{\f4  in this parameter, in which case the new window will be right behind the one whose }{\f6\fs20 GrafPortPtr}{\f4  you pass.\par \par }{\f6\fs20 wStorage}{\f4 \tab Used to allocate storage for the window.  This parameter is generally set to }{\f6\fs20 NULL}{\f4 , forcing the Window Manager to allocate the memory for the window record.  For details, see the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual}{\f4 .\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Window Color Tables}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Window Color Tables\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:colors\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindColor resource}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Window color tables are used to define the colors used to draw the various parts of the window, as well as the style for the title bar.  Window color tables can be created with either an }{\f6\fs20 rWindColor}{\f4  resource or a }{\f6\fs20 wColorTbl}{\f4  structure.  In either case, the window colors consist of five flag words, as defined below.\par All of the color entries are displacements into the current color table.  Dithered colors are used in 640 mode, so all four color bits are used in both 320 mode and 640 mode.\par \par }\pard \qj\fi-2520\li2880\keepn\widctlpar\tx1800\adjustright {\f6\fs20 frameColor}{\f4 \tab bits 15-8\tab Reserved; set to 0.\par \tab bits 7-4\tab This is the outline color for the window frame.  It includes the lines around the edge of the window, the lines around the info bar, the lines outlining the close box and grow box, and the lines used to draw the small boxes inside the grow box.\par }\pard \qj\fi-2520\li2880\widctlpar\tx1800\adjustright {\f4 \tab bits 3-0\tab Reserved; set to 0.}{\f6\fs20 \par }\pard \qj\fi-2520\li2880\keepn\widctlpar\tx1800\adjustright {\f6\fs20 titleColor}{\f4 \tab bits 15-12\tab Reserved; set to 0.\par \tab bits 11-8\tab The background color of an inactive title bar.  This is the color behind both the text of the title, and the color used to fill the title bar itself.\par \tab bits 7-4\tab This is the foreground color of the text when the window is inactive.  This is usually the same as the foreground text color for an active window, but you could set this to a different color, say to get gray text when a window is inactive.\par }\pard \qj\fi-2520\li2880\widctlpar\tx1800\adjustright {\f4 \tab bits 3-0\tab This is the color of the text when the window is active.}{\f6\fs20 \par }\pard \qj\fi-2520\li2880\keepn\widctlpar\tx1800\adjustright {\f6\fs20 tBarColor}{\f4 \tab bits 15-8\tab These eight bits define the type of title bar.  There are three types of title bars:\par \par }\pard \qj\fi-720\li3960\keepn\widctlpar\adjustright {\f4 0x00\tab Solid title bars are the normal kind, by default a boring black.  The color is actually set by bits 3-0 of this word.\par \par 0x01\tab Dithered title bars use a checkerboard pattern, alternating between the foreground and background colors set by bits 7-4 and 3-0, respectively.\par \par 0x02\tab Lines title bars are the sort you see most often, with lines running across the title bar.  Bits 7-4 and 3-0 define the two colors used.\par }\pard \qj\fi-2520\li2880\keepn\widctlpar\tx1800\adjustright {\f4 \par \tab bits 7-4\tab This is one of the colors for a dithered title bar, or the color of the lines on a lined title bar.\par }\pard \qj\fi-2520\li2880\widctlpar\tx1800\adjustright {\f4 \tab bits 3-0\tab This is the second color for a dithered title bar, the background color for a lined title bar, or the solid color used for a solid title bar.\par }{\f6\fs20 growColor}{\f4 \tab bits 15-12\tab These bits are only used on alert frames, where they define the color between the outside line around the window and the heavy line just inside the main outline.\par \tab bits 11-8\tab Reserved; set to 0.\par \tab bits 7-4\tab This is the interior color for the grow box when the window is not selected.\par \tab bits 3-0\tab This is the interior color for the grow box when the window is selected.}{\f6\fs20 \par infoColor}{\f4 \tab bits 15-12\tab These bits are only used on alert frames, where they define the color of the heavy box that runs inside of the main window outline.}{\f6\fs20 \par }{\f4 \tab bits 11-8\tab Reserved; set to 0.\par \tab bits 7-4\tab This is the interior color for an info bar.\par \tab bits 3-0\tab Reserved; set to 0.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 AlertWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 AlertWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AlertWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word AlertWindow(Word alertFlags, Pointer subStrPtr, Ref alertStrPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 AlertWindow}{\f4  creates an alert window.  The alert window can display an alert icon, a text message, and one or more buttons; these are all controlled with an alert string.  }{\f6\fs20 AlertWindow}{\f4  maintains control until the user selects a button, then returns the button number.  See \ldblquote Alert Strings,\rdblquote  below, for details on defining the buttons.\par \par }\pard \qj\fi-2160\li2520\keepn\widctlpar\adjustright {\f6\fs20 alertFlags}{\f4 \tab Flags word.\par }\pard \qj\fi-1080\li3960\keepn\widctlpar\adjustright {\f4 bits 15-3\tab Not used in this course; set to 0.  For details, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 , page 286.\par bits 2-1\tab Indicates the type of reference for the }{\f6\fs20 alertStrPtr}{\f4  parameter:\par }\pard \qj\fi-540\li4860\keepn\widctlpar\adjustright {\f4 00\tab }{\f6\fs20 alertStrPtr}{\f4  is a pointer to an alert string.\par 01\tab }{\f6\fs20 alertStrPtr}{\f4  is a handle to an alert string.\par }{\pard\plain \qj\fi-540\li4860\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rAlertString resource}}}{\v\f4 \par }{\f4 10\tab }{\f6\fs20 alertStrPtr}{\f4  is the resource ID of an }{\f6\fs20 rAlertString}{\f4  resource.\par }\pard \qj\fi-1080\li3960\widctlpar\adjustright {\f4 bit 0\tab If this bit is 0, the strings referred to by }{\f6\fs20 subStrPtr}{\f4  must be c-strings.  If this bit is 1, the strings should be p-strings.\par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f6\fs20 subStrPtr}{\f4 \tab This parameter is a pointer to an array of pointers, each of which points to a string.  The strings can be either c-strings or p-strings; this is determined by bit 0 of }{\f6\fs20 alertFlags}{\f4 .  For complete details, see \ldblquote Substitution Strings,\rdblquote  below.\par }{\f6\fs20 alertStrPtr}{\f4 \tab This parameter refers to the alert string used to create the alert window.  It can be a pointer, handle, or resource ID, as controlled by bits 2-1 of }{\f6\fs20 alertFlags}{\f4 .  For complete details, see \ldblquote Alert Strings,\rdblquote  below.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Alert Strings\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 alert strings\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 An alert string consists of a series of characters.  We\rquote ll break these characters down into named fields for convenience, but the actual alert string is still just a simple sequence of characters.\par The fields in the alert string are:\par \par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 size\tab A single character or sequence of characters defining the size of the alert.  The size is generally given by a single character from '1' to '9'.  }{\f6\fs20 AlertWindow}{\f4  creates a window large enough to hold a message with a certain number of characters, adjusting the size for 320 mode or 640 mode screens.\par \par }\pard \qj\li1800\ri720\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx2700\tx3780\tx5040\tx6300\tx7560\adjustright {\f4 size\tab characters\tab 320 height\tab 320 width\tab 640 height\tab 640 width\par }\pard \qj\li1800\keepn\widctlpar\tx2700\tx3780\tx5040\tx6300\tx7560\adjustright {\f4 '1'\tab 30\tab 46\tab 152\tab 46\tab 200\par '2'\tab 60\tab 62\tab 176\tab 54\tab 228\par '3'\tab 110\tab 62\tab 252\tab 62\tab 300\par '4'\tab 175\tab 90\tab 252\tab 72\tab 352\par '5'\tab 110\tab 54\tab 252\tab 46\tab 400\par '6'\tab 150\tab 62\tab 300\tab 54\tab 452\par '7'\tab 200\tab 80\tab 300\tab 62\tab 500\par '8'\tab 250\tab 108\tab 300\tab 72\tab 552\par }\pard \qj\li1800\widctlpar\tx2700\tx3780\tx5040\tx6300\tx7560\adjustright {\f4 '9'\tab 300\tab 134\tab 300\tab 80\tab 600\par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 \par \tab A size of '0' has a special meaning.  In this case, the size character is followed by 8 other bytes, laid out in memory exactly as a }{\f6\fs20 Rect}{\f4  structure would appear in memory.  This }{\f6\fs20 Rect}{\f4  structure gives the exact size and location for the alert window.\par \par }\pard \qj\fi-1080\li1440\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1080\li1440\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 alert icons}}}{\v\f4 \par }{\f4 icon\tab A single character or series of characters that specify what icon will appear at the top left corner of the alert.  The icon is generally given as one of the following single characters:\par \par }\pard \qj\li1800\ri5400\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \adjustright {\f4 character\tab icon\par }\pard \qj\li1800\ri5400\keepn\widctlpar\adjustright {\f4 '0'\tab (no icon)\par '2'\tab stop\par '3'\tab note\par '4'\tab caution\par '5'\tab disk\par }\pard \qj\li1800\ri5400\widctlpar\adjustright {\f4 '6'\tab disk swap\par }\pard \qj\fi-1080\li1440\widctlpar\adjustright {\f4 \par \tab An icon character of '1' has a special meaning.  In this case, the icon is followed in memory by a record consisting of a pointer to an icon image, an integer specifying the width of the icon in bytes, and an integer specifying the height of the icon in pixels.  This facility can be used to create custom icons for }{\f6\fs20 AlertWindow}{\f4 .\par \par separator\tab A separator character.  You can use any character you like for a separator, so long as you use the same character here and in the next separator field.  It is customary to use a / character for the separator character.\par \par message\tab This is the text that will be displayed in the alert.  The message cannot exceed 1000 characters.  If the message is too long to fit on one line in the window, the message will be automatically broken at a word boundary, and the remaining part of the message displayed on a new line.  You can also force a new line by imbedding the characters }{\f6\fs20 \\n}{\f4  in the text.\par \par separator\tab This separator character signals the end of the message and the start of the button definitions.  This character must match the character used for the first separator.\par \par buttons\tab This field contains the titles for up to three buttons.  If more than one button is used, separate the titles with additional separator characters.  The buttons will all be placed at the bottom of the window.  They will be centered, and all of the buttons will have the same width.  The width will be determined by the longest sequence of text in any of the button titles.  The total length of the button text must not exceed 80 characters.\par \par \tab One of the buttons may be preceded with a ^ character.  This character does not appear in the button text; instead, it signals that the button is the default button.  The default button will be bold, and will use the return key as a key equivalent.  Because of this special use, to use a ^ character as an actual character anywhere in the alert string, you must code two ^ characters.\par \par terminator\tab The end of the alert string is marked with a null character; you can code this character by placing \\$00 at the end of the string.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Substitution Strings\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 substitution strings\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Substitution strings let you specify where a string should appear in the alert string without actually coding the string itself as a fixed value.  Substitution strings come in two flavors.\par The first type of substitution string is a # character followed by a numeric character from '0' to '6'.  These two characters will be replaced by one of these standard strings:\par \par }\pard \qj\li720\widctlpar\adjustright {\f4 #0\tab OK\par #1\tab Cancel\par #2\tab Yes\par #3\tab No\par #4\tab Try again\par #5\tab Quit\par #6\tab Continue\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The other type of substitution string is an asterisk (*) followed by a numeric character from '0' to '9'.  In this case, the characters are still replaced by a string, but the string is set using a parameter to the }{\f6\fs20 AlertWindow}{\f4  call.  This lets you set up the strings at run time, rather than compile time.  The strings themselves are taken from the array of strings passed as the }{\f6\fs20 subStrPtr}{\f4  in the call to }{\f6\fs20 AlertWindow}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 BeginUpdate}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 BeginUpdate\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 BeginUpdate\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void BeginUpdate(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 BeginUpdate}{\f4  is used when you find an update event for a window.  At that point, you call }{\f6\fs20 BeginUpdate}{\f4 , which replaces the visible region for the window with the intersection of the visible region and update region \endash  in other words, all of the parts of the window that have to be redrawn.\par The next step is to call the subroutine that draws the contents of the window.  During this update cycle, the origin must not be changed, and }{\f6\fs20 SetPort}{\f4  must not be called.\par Once the window\rquote s contents have been drawn, call }{\f6\fs20 EndUpdate}{\f4 .  Every call to }{\f6\fs20 BeginUpdate}{\f4  must be matched by exactly one call to }{\f6\fs20 EndUpdate}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 BringToFront}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 BringToFront\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 BringToFront\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void BringToFront(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Makes the specified window the front window, bringing it to the front of all other windows and posting appropriate update events to force the windows involved to be updated.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CloseWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 CloseWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 CloseWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void CloseWindow(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 CloseWindow}{\f4  gets rid of a window.  It disposes of all of the controls in the window, disposes of the memory used by the Window Manager for the window\rquote s window record, and erases the window on the desktop.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 DoModalWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 DoModalWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 DoModalWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord DoModalWindow(EventRecordPtr event, VoidProcPtr updateProc,\par    VoidProcPtr eventHook, VoidProcPtr beepProc, Word flags);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 DoModalWindow}{\f4  handles interactions between the user and a modal dialog.  The window representing the modal dialog should be opened before this call.\par The value returns is the control ID for the control selected.\par Normally, you will open a dialog window, then drop into a loop that calls }{\f6\fs20 DoModalWindow}{\f4  repeatedly, stopping when the user selects some control that closes the dialog.  At that time, you would check the controls to see how they are set, taking whatever action is appropriate.  You can, of course, check the controls and take action in the loop that calls }{\f6\fs20 DoModalWindow}{\f4 .\par If the dialog has any controls that allow text to be edited, and if you have set the proper flags bit to allow an I beam cursor, }{\f6\fs20 DoModalWindow}{\f4  may exit with the cursor still set to an I beam.  For that reason, you should always call }{\f6\fs20 InitCursor}{\f4  after leaving the }{\f6\fs20 DoModalWindow}{\f4  loop.\par \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 event}{\f4 \tab An event record that will be used by }{\f6\fs20 DoModalWindow}{\f4  to call the Event Manager.\par }{\f6\fs20 updateProc}{\f4 \tab Address of a custom update procedure.  For the purposes of this course, you should pass }{\f6\fs20 NULL}{\f4 .  For alternatives, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par }{\f6\fs20 eventHook}{\f4 \tab Address of a subroutine that will be called right after the Event Manager.  For the purposes of this course, you can pass }{\f6\fs20 NULL}{\f4 .  For alternatives, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par }{\f6\fs20 beepProc}{\f4 \tab Address of a custom beep procedure, called when the user clicks outside of the dialog.  For the purposes of this course, you can pass }{\f6\fs20 NULL}{\f4 .  For alternatives, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par }{\f6\fs20 flags}{\f4 \tab Flags word, controlling options for }{\f6\fs20 DoModalWindow}{\f4 :\par }\pard \qj\fi-1080\li3240\widctlpar\adjustright {\f4 bit 15\tab If this bit is set, the dialog can be moved.  If the bit is clear, the dialog can\rquote t be moved.\par \par \tab If you want a moveable dialog, you have to set this bit }{\i\f4 and}{\f4  make sure the dialog has a title bar.\par \par bit 14\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  will try to call the update procedure for any window that needs to be updated.  If this bit is not set, windows other than the dialog itself and desk accessory windows won\rquote t get updated unless you do it manually in the loop that calls }{\f6\fs20 DoModalWindow}{\f4 .\par \par bits 13-6\tab These bits are reserved, and must be set to 0.\par \par bit 5\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  returns any time it handles an activate event.  If this bit is clear, }{\f6\fs20 DoModalWindow}{\f4  doesn\rquote t return after an activate event; instead, it loops and checks for another event.\par \par bit 4\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  allows desk accessories to operate, and does everything appropriate to handle them.\par \par bit 3\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  will switch the cursor from the normal arrow to an I-beam cursor when the cursor is over an edit line or text edit control.\par \par bit 2\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  calls }{\f6\fs20 MenuKey}{\f4  to see if keys pressed while the open-apple key is pressed are menu command equivalents.  If this bit is clear, }{\f6\fs20 DoModalWindow}{\f4  returns all key events except the standard keyboard equivalents for Cut (}{\outl\f4\fs20 \u-3\'f0}{\f4 X), Copy (}{\outl\f4\fs20 \u-3\'f0}{\f4 C), Paste (}{\outl\f4\fs20 \u-3\'f0}{\f4 V), and Undo (}{\outl\f4\fs20 \u-3\'f0}{\f4 Z).  Those four key equivalents are always handled by }{\f6\fs20 DoModalWindow}{\f4 .\par \par bit 1\tab If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  will allow the user to pull down menus and use menu commands.  }{\f6\fs20 DoModalWindow}{\f4  will handle any of the standard editing commands, but your program will have to handle any other menu commands.\par \par bit 0\tab If this bit is clear, }{\f6\fs20 DoModalWindow}{\f4  uses the Scrap Manager for Cut, Copy and Paste.  If this bit is set, }{\f6\fs20 DoModalWindow}{\f4  doesn\rquote t use the Scrap Manager.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 EndUpdate}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 EndUpdate\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 EndUpdate\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void EndUpdate(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 EndUpdate}{\f4  restores the visible region for a window.  Use }{\f6\fs20 EndUpdate}{\f4  to balance }{\f6\fs20 BeginUpdate}{\f4  calls.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FindWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FindWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FindWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word FindWindow(GrafPortPtr *whichWindow, Integer pointX, Integer pointY)\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 FindWindow}{\f4  checks the location of the cursor and returns a value indicating where the cursor was located.  If the cursor was located in a window, }{\f6\fs20 whichWindow}{\f4  is set to the window pointer; otherwise, }{\f6\fs20 whichWindow}{\f4  is set to }{\f6\fs20 NULL}{\f4 .\par The various values }{\f6\fs20 FindWindow}{\f4  can return, and what they mean, are shown in Table A-6.\par \par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx1440\adjustright {\f4 number\tab name\tab description\par }\pard \qj\fi-2880\li3240\ri360\keepn\widctlpar\tx1440\adjustright {\f4 0\tab }{\f6\fs20 wNoHit}{\f4 \tab Not in anything.\par 16\tab }{\f6\fs20 wInDesk}{\f4 \tab Somewhere on the desktop.\par 17\tab }{\f6\fs20 wInMenuBar}{\f4 \tab In the system menu bar.\par 19\tab }{\f6\fs20 wInContent}{\f4 \tab In the content area of a window.\par 20\tab }{\f6\fs20 wInDrag}{\f4 \tab In the title bar of a window.\par 21\tab }{\f6\fs20 wInGrow}{\f4 \tab In the grow region of a window.\par 22\tab }{\f6\fs20 wInGoAway}{\f4 \tab In the close box of a window.\par 23\tab }{\f6\fs20 wInZoom}{\f4 \tab In the zoom box of a window.\par 24\tab }{\f6\fs20 wInInfo}{\f4 \tab In the information bar of a window.\par 25\tab }{\f6\fs20 wInSpecial}{\f4 \tab In a special menu item bar.  These are the menus with numbers from 250 to 255.\par 26\tab }{\f6\fs20 wInDeskItem}{\f4 \tab In a desk accessory.\par 27\tab }{\f6\fs20 wInFrame}{\f4 \tab In the window, but not in any specific area defined in this table.\par 28\tab }{\f6\fs20 wInactMenu}{\f4 \tab In an inactive menu item.\par <0\tab }{\f6\fs20 wInSysWindow}{\f4 \tab In a system window.\par }\pard \qj\li360\keepn\widctlpar\tx1440\tx3240\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table A-6:  }{\f6\fs20 FindWindow}{\f4  Return Codes\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 FrontWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 FrontWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 FrontWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 WindowPtr FrontWindow(void);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns a pointer to the first visible window in the window list.  If there are no visible windows, }{\f6\fs20 FrontWindow}{\f4  returns }{\f6\fs20 NULL}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetContentOrigin}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetContentOrigin\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetContentOrigin\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Long GetContentOrigin (GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 GetContentOrigin}{\f4  returns the origin for a window.  The origin is used by }{\f6\fs20 TaskMaster}{\f4  to handle scroll bars.\par The two integers in the origin are returned as a single long integer.  The vertical origin is returned in the least significant word, while the horizontal origin is returned in the most significant word.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GetNextWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 GetNextWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GetNextWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 WindowPtr GetNextWindow(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Returns a pointer to the window that is just behind }{\f6\fs20 theWindow}{\f4 , or }{\f6\fs20 NULL}{\f4  if }{\f6\fs20 theWindow}{\f4  is the rearmost window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 HandleDiskInsert}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 HandleDiskInsert\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HandleDiskInsert\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 LongWord HandleDiskInsert(Word flags, Word devNum);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab GS/OS errors are returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In this course, }{\f6\fs20 HandleDiskInsert}{\f4  is used to check the various disk drives for an unformatted disk.  If an unformatted disk is found, the user is presented with a series of dialogs that will result in either formatting the disk or ejecting the disk.  For this use, }{\f6\fs20 flags}{\f4  should be 0xC000, and }{\f6\fs20 devNum}{\f4  should be 0.  The value returned by }{\f6\fs20 HandleDiskInsert}{\f4  is not used, and should be discarded.\par For details about this call, as well as some other uses you can make of the call, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 HideWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 HideWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 HideWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void HideWindow(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 HideWindow}{\f4  makes a window invisible.  If the window is already invisible, }{\f6\fs20 HideWindow}{\f4  does nothing.  If the window is the front window, }{\f6\fs20 HideWindow}{\f4  brings the next visible window in the window list to front.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 InvalRect}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 InvalRect\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 InvalRect\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void InvalRect(Rect *badRect);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The specified rectangle is added to the update region.  This causes the area to be redrawn on the window\rquote s next update cycle.\par This call has one nasty side effect.  The values in the rectangle will be changed, so you should not use the values in the rectangle after calling }{\f6\fs20 InvalRect}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NewWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NewWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 WindowPtr NewWindow(ParamListPtr paramListPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0E01\tab paramLenErr}{\f4 \tab The first word of the parameter list is the wrong size\par \tab }{\f6\fs20 0x0E02\tab allocateErr}{\f4 \tab Unable to allocate the window record\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Creates and draws a new window.  }{\f6\fs20 NewWindow}{\f4  returns }{\f6\fs20 NULL}{\f4  if an error occurs.\par See \ldblquote Window Manager Definitions,\rdblquote  later in this appendix, for the definition of the parameter list record.  See \ldblquote Window Parameters,\rdblquote  earlier in this section, for a description of the various fields in the record.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 NewWindow2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 NewWindow2\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NewWindow2\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 WindowPtr NewWindow2(Pointer titlePtr, Long refCon,\par    VoidProcPtr contentDrawPtr, LongProcPtr defProcPtr,\par    Word paramTableDescriptor, Ref paramTableRef, Word resourceType);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0E01\tab paramLenErr}{\f4 \tab The first word of the parameter list is the wrong size\par \tab }{\f6\fs20 0x0E02\tab allocateErr}{\f4 \tab Unable to allocate the window record\par \tab Control Manager errors returned unchanged\par \tab Memory Manager errors returned unchanged\par \tab Resource Manager errors returned unchanged\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Creates and draws a new window.  }{\f6\fs20 NewWindow2}{\f4  returns }{\f6\fs20 NULL}{\f4  if an error occurs.\par There are several aspects of }{\f6\fs20 NewWindow2}{\f4  that are not used in this course, and will not be discussed here.  See }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4  for a complete description of }{\f6\fs20 NewWindow2}{\f4 .\par \par }\pard \qj\fi-2520\li2880\widctlpar\adjustright {\f6\fs20 titlePtr}{\f4 \tab This is a pointer to the window title, given as a p-string.  The title must remain in a fixed location in memory.\par \par \tab If a lined or dithered window is used, the pattern runs right up to the edge of the window title.  For that reason, it is customary to pad the window title on the left and right with spaces.\par \par }{\f6\fs20 refCon}{\f4 \tab This value will be used in place of the }{\f6\fs20 wRefCon}{\f4  in the window definition.  The }{\f6\fs20 wRefCon}{\f4  value is for your application\rquote s use; the Window Manager does not use it for any reason.\par \par }{\f6\fs20 contentDrawPtr}{\f4 \tab This is a pointer to a subroutine that will draw the content region of the window.  This subroutine is called when the window needs to be updated.  }{\f6\fs20 BeginUpdate}{\f4  has already been called, and }{\f6\fs20 EndUpdate}{\f4  will be called after return.  Since this subroutine is called during an update, you must not change the origin or call }{\f6\fs20 SetPort}{\f4  in this subroutine.\par \par }\pard \qj\fi-2520\li2880\keepn\widctlpar\adjustright {\v\f4 \tab }{\pard\plain \qj\fi-2520\li2880\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 databank pragma}}}{\v\f4 \par }\pard \qj\fi-2520\li2880\widctlpar\adjustright {\f4 \tab As with all subroutines called from the tools, the data bank register will not be valid.  Use the }{\f6\fs20 databank}{\f4  pragma to correct the data bank register.\par \par }{\f6\fs20 defProcPtr}{\f4 \tab This parameter points to a window definition procedure.  This parameter is always set to }{\f6\fs20 NULL}{\f4  in this course.  See the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual}{\f4  for details.\par \par }{\f6\fs20 paramTableDescriptor}{\f4 \tab This parameter tells }{\f6\fs20 NewWindow2}{\f4  what is being passed in }{\f6\fs20 paramTableRef}{\f4 .  The possibilities are:\par \par }\pard \qj\fi-540\li3780\widctlpar\adjustright {\f4 0\tab }{\f6\fs20 paramTableRef}{\f4  is a pointer to a window template.\par 1\tab }{\f6\fs20 paramTableRef}{\f4  is a handle to a window template.\par 2\tab }{\f6\fs20 paramTableRef}{\f4  is the resource ID of a window template.  (This is the only option used in this course.)\par }\pard \qj\fi-2520\li2880\widctlpar\adjustright {\f4 \par }{\f6\fs20 paramTableRef}{\f4 \tab This is a pointer, handle, or resource ID for a window template.\par \par }{\f6\fs20 resourceType}{\f4 \tab This parameter is the resource type, used when }{\f6\fs20 paramTableRef}{\f4  is a resource ID.  The only resource type used in this course is 0x800E, }{\f6\fs20 rWindParam1}{\f4 .\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetContentOrigin}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetContentOrigin\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetContentOrigin\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetContentOrigin(Word xOrigin, Word yOrigin, GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sets the origin for the window and generates an update event.  If }{\f6\fs20 TaskMaster}{\f4  is handling scrolling in the window, this call has the effect of moving the document under program control.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetDataSize}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetDataSize\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetDataSize\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetDataSize(Word dataWidth, Word dataHeight, GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Changes the height and width of the data area (the size of the entire document).  You still need to change the scroll bars and redraw the window (or force an update with }{\f6\fs20 InvalRect}{\f4 ).\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetPage}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetPage\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetPage\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetPage(Word hPage, Word vPage, GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Assuming }{\f6\fs20 TaskMaster}{\f4  is being used to manage scroll bars, }{\f6\fs20 SetPage}{\f4  sets the number of pixels the window will scroll when the user clicks in the page region of one of the scroll bars.  If this value is set to 0, }{\f6\fs20 TaskMaster}{\f4  will scroll ten pixels less than the size of the window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetScroll}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetScroll\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetScroll\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetScroll(Word hScroll, Word vScroll, GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Assuming }{\f6\fs20 TaskMaster}{\f4  is being used to manage scroll bars, }{\f6\fs20 SetScroll}{\f4  sets the number of pixels the window will scroll when the user clicks on an arrow on one of the scroll bars.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetSysWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetSysWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetSysWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetSysWindow(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Makes the window a system window.  You should do this for any window opened by a desk accessory.  You would not normally make this call for an application window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 SetWTitle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 SetWTitle\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 SetWTitle\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void SetWTitle(Pointer title, GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 title}{\f4  should be a pointer to a p-string.  The title for the window is changed to the one you pass, and the window is redrawn.\par The title string you pass must remain at a fixed location in memory, and must not be changed unless the change is followed by another call to }{\f6\fs20 SetWTitle}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 ShowWindow}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 ShowWindow\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 ShowWindow\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 void ShowWindow(GrafPortPtr theWindow);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 ShowWindow}{\f4  makes an invisible window visible and draws the window.  If the window is already visible, }{\f6\fs20 ShowWindow}{\f4  does nothing.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TaskMaster}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TaskMaster\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMaster\bxe }}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word TaskMaster(Word wmTaskMask, WmTaskRecPtr theTaskRec);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab }{\f6\fs20 0x0E03\tab taskMaskErr}{\f4 \tab Some reserved bits were not clear in the }{\f6\fs20 wmTaskMask}{\f4  field of the }{\f6\fs20 WmTaskRec}{\f4  record\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TaskMaster}{\f4  performs the normal housekeeping functions associated with an event loop.  It gets an event, does some standard processing on the event that must be done in virtually any desktop program, then returns information about the event in an expanded event record.\par The }{\f6\fs20 wmTaskMask}{\f4  parameter is passed to }{\f6\fs20 GetNextEvent}{\f4  as the event mask.  The event record is also passed to }{\f6\fs20 GetNextEvent}{\f4 , but it can be modified by }{\f6\fs20 TaskMaster}{\f4  as }{\f6\fs20 TaskMaster}{\f4  performs the various housekeeping tasks.\par While }{\f6\fs20 TaskMaster}{\f4  can do a great deal, it is possible for the programmer to ask }{\f6\fs20 TaskMaster}{\f4  to do some things but not others.  The exact list of tasks performed by }{\f6\fs20 TaskMaster}{\f4  are controlled by the }{\f6\fs20 wmTaskMask}{\f4  field in the event record, which should be set before }{\f6\fs20 TaskMaster}{\f4  is called.  The bit flags that control task selection are shown in Table A-7.\par \par }\pard \qj\fi-2700\li3060\widctlpar\tx2520\adjustright {\f6\fs20 tmMenuKey}{\f4 \tab 0\tab Call }{\f6\fs20 MenuKey}{\f4  to see if a keypress is a menu keyboard equivalent.\par }{\f6\fs20 tmUpdate}{\f4 \tab 1\tab For window update events, call the window\rquote s default draw routine.\par }{\f6\fs20 tmFindW}{\f4 \tab 2\tab Call }{\f6\fs20 FindWindow}{\f4  for mouse down events.\par }{\f6\fs20 tmMenuSel}{\f4 \tab 3\tab Call }{\f6\fs20 MenuSelect}{\f4  when }{\f6\fs20 FindWindow}{\f4  determines that a mouse down event occurred in a menu bar.\par }{\f6\fs20 tmOpenDA}{\f4 \tab 4\tab Open a desk accessory when }{\f6\fs20 MenuSelect}{\f4  determines that a menu event was a selection of an NDA.\par }{\f6\fs20 tmSysClick}{\f4 \tab 5\tab When }{\f6\fs20 FindWindow}{\f4  returns an event from a system window (an NDA window is a system window), call }{\f6\fs20 SystemClick}{\f4  to handle the event.\par }{\f6\fs20 tmDragW}{\f4 \tab 6\tab If }{\f6\fs20 FindWindow}{\f4  returns }{\f6\fs20 wInDrag}{\f4 , handle moving the window around on the screen.\par }{\f6\fs20 tmContent}{\f4 \tab 7\tab If }{\f6\fs20 FindWindow}{\f4  detects an event in a window\rquote s content region, and the window is not the active window, select the window.\par }{\f6\fs20 tmClose}{\f4 \tab 8\tab If }{\f6\fs20 FindWindow}{\f4  detects a mouse down in a close box, call }{\f6\fs20 TrackGoAway}{\f4 .  If }{\f6\fs20 TrackGoAway}{\f4  returns }{\f6\fs20 TRUE}{\f4 , return }{\f6\fs20 wInGoAway}{\f4 ; otherwise, return }{\f6\fs20 nullEvt}{\f4 .\par }{\f6\fs20 tmZoom}{\f4 \tab 9\tab If }{\f6\fs20 FindWindow}{\f4  detects a mouse down in a zoom box, call }{\f6\fs20 TrackZoom}{\f4 .  If }{\f6\fs20 TrackZoom}{\f4  returns }{\f6\fs20 TRUE}{\f4 , call }{\f6\fs20 ZoomWindow}{\f4  to change the window\rquote s size.\par }{\f6\fs20 tmGrow}{\f4 \tab 10\tab If }{\f6\fs20 FindWindow}{\f4  detects a mouse down in the grow box of a window, call }{\f6\fs20 GrowWindow}{\f4  to allow the window\rquote s size to be changed, then }{\f6\fs20 SizeWindow}{\f4  to actually update the window\rquote s size.\par }{\f6\fs20 tmScroll}{\f4 \tab 11\tab Handle scroll bars.\par }{\f6\fs20 tmSpecial}{\f4 \tab 12\tab Handle special menu items.\par }{\f6\fs20 tmCRedraw}{\f4 \tab 13\tab When a window is activated or deactivated, redraw the controls in the correct state.\par }{\f6\fs20 tmInactive}{\f4 \tab 14\tab If an inactive menu item is selected, return }{\f6\fs20 wInactMenu}{\f4 .  (This is generally used to put up a help dialog telling the user what the menu is for, or what has to happen before it is active.)\par }{\f6\fs20 tmInfo}{\f4 \tab 15\tab Don\rquote t activate inactive windows when a mouse down event occurs inside of the information bar of the window.\par }{\f6\fs20 tmContentControls}{\f4 \tab 16\tab If }{\f6\fs20 FindWindow}{\f4  returns }{\f6\fs20 wInContent}{\f4 , call }{\f6\fs20 FindControl}{\f4  and }{\f6\fs20 TrackControl}{\f4  to handle normal control actions.\par }{\f6\fs20 tmControlKey}{\f4 \tab 17\tab Pass key events to controls for control key equivalents.\par }{\f6\fs20 tmControlMenu}{\f4 \tab 18\tab Pass menu events to controls in the active window.\par }{\f6\fs20 tmMultiClick}{\f4 \tab 19\tab Check for multiple clicks and return information about them.\par }\pard \qj\fi-2700\li3060\keepn\widctlpar\tx2520\adjustright {\f6\fs20 tmIdleEvents}{\f4 \tab 20\tab Send idle events to the controls in the window.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table A-7:  }{\f6\fs20 TaskMaster}{\f4  }{\f6\fs20 wmTaskMask}{\f4  Codes\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 TaskMasterDA}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 TaskMasterDA\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 TaskMasterDA\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 NDA}}}{\v\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 Word TaskMasterDA(Word eventMask, WmTaskRecPtr taskRecPtr);\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi-5220\li5220\keepn\widctlpar\tx1800\tx2700\tx5220\adjustright {\f4 Possible Errors:\tab None\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 TaskMasterDA}{\f4  is an alternate entry point for }{\f6\fs20 TaskMaster}{\f4 ; it is used in New Desk Accessories.\par }{\f6\fs20 eventMask}{\f4  is not used; it is included here to make }{\f6\fs20 TaskMasterDA}{\f4  calls look more like }{\f6\fs20 TaskMaster}{\f4  calls.\par }{\f6\fs20 taskRecPtr}{\f4  is a pointer to an event record.  This is both an input and an output.  The NDA should pass the task record that was passed to the NDA; }{\f6\fs20 TaskMasterDA}{\f4  will act on the event, modifying fields and returning an appropriate event code.  From there, the event is handled exactly as it would be handled in an application.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 Window Manager Definitions}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 }{\b\v\f4 Window Manager Definitions\tcl3}}}{\b\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* SendBehind Values */\par #define toBottom 0xFFFFFFFEL            /* To send window to bottom */\par #define topMost}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 topMost}}}{\f6\fs20  0xFFFFFFFFL             /* To make window top */\par }\pard \widctlpar\adjustright {\f6\fs20 #define bottomMost 0x0000L              /* To make window bottom */\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* constants for AlertWindow alertFlags */\par #define awCString}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 awCString}}}{\f6\fs20  0x0000\par #define awPString 0x0001\par #define awPointer}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 awPointer}}}{\f6\fs20  0x0000\par #define awHandle 0x0002\par #define awResource}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 awResource}}}{\f6\fs20  0x0004\par #define awTextFullWidth 0x0008\par #define awForceBeep 0x0010\par #define awButtonLayout 0x0020\par #define awNoDevScan 0x0040\par #define awNoDisposeRes 0x0080\par #define awWatchForDisk 0x0100\par #define awIconIsResource 0x0200\par }\pard \widctlpar\adjustright {\f6\fs20 #define awFullColor 0x0400\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 /* Other Constants */\par #define wTrackZoom 0x001F\par #define wHitFrame 0x0020\par #define wInControl}{\pard\plain \keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 wInControl}}}{\f6\fs20  0x0021\par }\pard \widctlpar\adjustright {\f6\fs20 #define wInControlMenu 0x0022\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct WindColor \{\par    Word frameColor;                     /* Color of window frame */\par    Word titleColor;                     /* Color of title and bar */\par    Word tBarColor;                      /* Color/pattern of title bar */\par    Word growColor;                      /* Color of grow box */\par    Word infoColor;                      /* Color of information bar */\par }\pard \widctlpar\adjustright {\f6\fs20    \} WindColor}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 WindColor}}}{\f6\fs20 , *WindColorPtr}{\pard\plain \widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 WindColorPtr}}}{\f6\fs20 , **WindColorHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef struct ParamList \{\par    Word paramLength;\par    Word wFrameBits;\par    Pointer wTitle;\par    LongWord wRefCon;\par    Rect wZoom;\par    WindColorPtr wColor;\par    Word wYOrigin;\par    Word wXOrigin;\par    Word wDataH;\par    Word wDataW;\par    Word wMaxH;\par    Word wMaxW;\par    Word wScrollVer;\par    Word wScrollHor;\par    Word wPageVer;\par    Word wPageHor;\par    LongWord wInfoRefCon;\par    Word wInfoHeight;\par    LongProcPtr wFrameDefProc;\par    VoidProcPtr wInfoDefProc;\par    VoidProcPtr wContDefProc;\par    Rect wPosition;\par    WindowPtr wPlane;\par    WindRecPtr wStorage;\par }\pard \widctlpar\adjustright {\f6\fs20    \} ParamList, *ParamListPtr, **ParamListHndl;\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 typedef EventRecord WmTaskRec;\par }\pard \widctlpar\adjustright {\f6\fs20 typedef EventRecordPtr WmTaskRecPtr;\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Tool and GS/OS Errors}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Tool and GS/OS Errors\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 errors}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 tool errors}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 GS/OS errors}}}{\v\f4 \par }{\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 System Failure Errors\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0001\tab pdosUnClmdIntErr}{\f4 \tab Unclaimed interrupt\par }{\f6\fs20 0x0004\tab divByZeroErr}{\f4 \tab Division by zero\par }{\f6\fs20 0x000A\tab pdosVCBErr}{\f4 \tab Volume control block is not useable\par }{\f6\fs20 0x000B\tab pdosFCBErr}{\f4 \tab File control block is not useable\par }{\f6\fs20 0x000C\tab pdosBlk0Err}{\f4 \tab Block zero allocated illegally\par }{\f6\fs20 0x000D\tab pdosIntShdwErr}{\f4 \tab Interrupt with I/O shadowing off\par }{\f6\fs20 0x0015\tab segLoader1Err}{\f4 \tab Segment loader error\par }{\f6\fs20 0x0017\tab sPackage0Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0018\tab package1Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0019\tab package2Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x001A\tab package3Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x001B\tab package4Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x001C\tab package5Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x001D\tab package6Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x001E\tab package7Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0020\tab package8Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0021\tab package9Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0022\tab package10Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0023\tab package11Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0024\tab package12Err}{\f4 \tab Can\rquote t load a package\par }{\f6\fs20 0x0025\tab putOfMemErr}{\f4 \tab Out of memory\par }{\f6\fs20 0x0026\tab segLoader2Err}{\f4 \tab Segment loader error\par }{\f6\fs20 0x0027\tab fMapTrshdErr}{\f4 \tab File map destroyed\par }{\f6\fs20 0x0028\tab stkOvrFlwErr}{\f4 \tab Stack overflow\par }{\f6\fs20 0x0030\tab psInstDiskErr}{\f4 \tab Insert disk alert\par }{\f6\fs20 0x0032-0x0053}{\f4 \tab Memory Manager errors\par }{\f6\fs20 0x0100\tab stupVolMntErr}{\f4 \tab Can\rquote t mount system startup volume\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 GS/OS\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x01\tab badSystemCall}{\f4 \tab Bad GS/OS call number\par }{\f6\fs20 0x04\tab invalidPcount}{\f4 \tab The parameter count is out of range\par }{\f6\fs20 0x07\tab gsosActive}{\f4 \tab GS/OS is busy\par }{\f6\fs20 0x10\tab devNotFound}{\f4 \tab Device not found\par }{\f6\fs20 0x11\tab invalidDevNum}{\f4 \tab Invalid device number\par }{\f6\fs20 0x20\tab drvrBadReq}{\f4 \tab Invalid request\par }{\f6\fs20 0x21\tab drvrBadCode}{\f4 \tab Invalid control or status code\par }{\f6\fs20 0x22\tab drvrBadParm}{\f4 \tab Bad call parameter\par }{\f6\fs20 0x23\tab drvrNotOpen}{\f4 \tab Character device not open\par }{\f6\fs20 0x24\tab drvrPriorOpen}{\f4 \tab Character device is already open\par }{\f6\fs20 0x25\tab irqTableFull}{\f4 \tab Interrupt table full\par }{\f6\fs20 0x26\tab drvrNoResrc}{\f4 \tab Resources are not available\par }{\f6\fs20 0x27\tab drvrIOError}{\f4 \tab I/O error\par }{\f6\fs20 0x28\tab drvrNoDevice}{\f4 \tab No device connected\par }{\f6\fs20 0x29\tab drvrBusy}{\f4 \tab Driver is busy\par }{\f6\fs20 0x2B\tab drvrWrtProt}{\f4 \tab Device is write protected\par }{\f6\fs20 0x2C\tab drvrBadCount}{\f4 \tab Invalid byte count\par }{\f6\fs20 0x2D\tab drvrBadBlock}{\f4 \tab Invalid block address\par }{\f6\fs20 0x2E\tab drvrDiskSwitch}{\f4 \tab The disk has been switched\par }{\f6\fs20 0x2F\tab drvrOffLine}{\f4 \tab Device offline or no media present\par }{\f6\fs20 0x40\tab badPathSyntax}{\f4 \tab Invalid path name syntax\par }{\f6\fs20 0x43\tab invalidRefNum}{\f4 \tab Invalid reference number\par }{\f6\fs20 0x44\tab pathNotFound}{\f4 \tab Subdirectory does not exist\par }{\f6\fs20 0x45\tab volNotFound}{\f4 \tab Volume not found\par }{\f6\fs20 0x46\tab fileNotFound}{\f4 \tab File not found\par }{\f6\fs20 0x47\tab dupPathname}{\f4 \tab Create or rename attempted with a name that already exists\par }{\f6\fs20 0x48\tab volumeFull}{\f4 \tab The volume is full\par }{\f6\fs20 0x49\tab volDirFull}{\f4 \tab The volume directory is full\par }{\f6\fs20 0x4A\tab badFileFormat}{\f4 \tab Version error (incompatible file type)\par }{\f6\fs20 0x4B\tab badStoreType}{\f4 \tab Unsupported or incorrect storage type\par }{\f6\fs20 0x4C\tab eofEncountered}{\f4 \tab End of file encountered\par }{\f6\fs20 0x4D\tab outOfRange}{\f4 \tab Position out of range\par }{\f6\fs20 0x4E\tab invalidAccess}{\f4 \tab Access not allowed\par }{\f6\fs20 0x4F\tab buffTooSmall}{\f4 \tab Buffer too small\par }{\f6\fs20 0x50\tab fileBusy}{\f4 \tab File is already open\par }{\f6\fs20 0x51\tab dirError}{\f4 \tab Directory error\par }{\f6\fs20 0x52\tab unknownVol}{\f4 \tab Unknown volume type\par }{\f6\fs20 0x53\tab paramRangeError}{\f4 \tab Parameter out of range\par }{\f6\fs20 0x54\tab outOfMem}{\f4 \tab Out of memory\par }{\f6\fs20 0x57\tab dupVolume}{\f4 \tab Duplicate volume name\par }{\f6\fs20 0x58\tab notBlockDev}{\f4 \tab Not a block device\par }{\f6\fs20 0x59\tab invalidLevel}{\f4 \tab Invalid file level\par }{\f6\fs20 0x5A\tab damagedBitMap}{\f4 \tab Block number too large\par }{\f6\fs20 0x5B\tab badPathNames}{\f4 \tab Invalid path names for }{\f6\fs20 ChangePath}{\f4 \par }{\f6\fs20 0x5C\tab notSystemFile}{\f4 \tab Not an executable file\par }{\f6\fs20 0x5D\tab osUnsupported}{\f4 \tab Operating system not supported\par }{\f6\fs20 0x5F\tab stackOverflow}{\f4 \tab Too many applications on stack\par }{\f6\fs20 0x60\tab dataUnavail}{\f4 \tab Data unavailable\par }{\f6\fs20 0x61\tab endOfDir}{\f4 \tab End of directory has been reached\par }{\f6\fs20 0x62\tab invalidClass\tab }{\f4 Invalid FST call class\par }{\f6\fs20 0x63\tab resForkNotFound}{\f4 \tab The file does not contain a required resource\par }{\f6\fs20 0x64\tab invalidFSTID}{\f4 \tab Invalid FST number\par }{\f6\fs20 0x65\tab invalidFSTop}{\f4 \tab Invalid FST operation\par }{\f6\fs20 0x67\tab devNameErr}{\f4 \tab A device exists with the same name as the replacement name\par }{\f6\fs20 0x70\tab resExistsErr}{\f4 \tab Cannot expand file; resource already exists\par }{\f6\fs20 0x71\tab resAddErr}{\f4 \tab Cannot add a resource fork to this kind of file\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Tool Locator\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0001\tab toolNotFoundErr}{\f4 \tab The tool was not found\par }{\f6\fs20 0x0002\tab funcNotFoundErr}{\f4 \tab The tool function was not found\par }{\f6\fs20 0x0103\tab TLBadRecFlag}{\f4 \tab The StartStop record is invalid\par }{\f6\fs20 0x0104\tab TLCantLoad}{\f4 \tab A tool cannot be loaded\par }{\f6\fs20 0x0110\tab toolVersionErr}{\f4 \tab The requested minimum tool version was not available\par }{\f6\fs20 0x0111\tab messNotFoundErr}{\f4 \tab The specified message was not found\par }{\f6\fs20 0x0112\tab messageOvfl}{\f4 \tab No message numbers are available\par }{\f6\fs20 0x0113\tab nameTooLong}{\f4 \tab The message name is too long\par }{\f6\fs20 0x0120\tab reqNotAccepted}{\f4 \tab Nobody accepted the request\par }{\f6\fs20 0x0121\tab srqDuplicateName}{\f4 \tab Duplicate name\par }{\f6\fs20 0x0122\tab invalidSendRequest}{\f4 \tab Bad combination of }{\f6\fs20 reqCode}{\f4  and }{\f6\fs20 target}{\f4 \par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Memory Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0201\tab memErr}{\f4 \tab Unable to allocate memory\par }{\f6\fs20 0x0202\tab emptyErr}{\f4 \tab Illegal operation on an empty handle\par }{\f6\fs20 0x0203\tab notEmptyErr}{\f4 \tab Illegal operation on a handle that is not empty\par }{\f6\fs20 0x0204\tab lockErr}{\f4 \tab Illegal operation on a locked or immovable block\par }{\f6\fs20 0x0205\tab purgeErr}{\f4 \tab Attempt to purge an unpurgeable block\par }{\f6\fs20 0x0206\tab handleErr}{\f4 \tab Invalid handle\par }{\f6\fs20 0x0207\tab idErr}{\f4 \tab Invalid user ID\par }{\f6\fs20 0x0208\tab attrErr}{\f4 \tab Illegal operation for the specified attributes\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Miscellaneous Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0301\tab badInputErr}{\f4 \tab Bad input parameter\par }{\f6\fs20 0x0302\tab noDevParamErr}{\f4 \tab No device for the input parameter\par }{\f6\fs20 0x0303\tab taskInstlErr}{\f4 \tab Specified task is already in the heartbeat queue\par }{\f6\fs20 0x0304\tab noSigTaskErr}{\f4 \tab No signature detected in the task header\par }{\f6\fs20 0x0305\tab queueDmgdErr}{\f4 \tab Damaged heartbeat queue\par }{\f6\fs20 0x0306\tab taskNtFdErr}{\f4 \tab Specified task is not in the queue\par }{\f6\fs20 0x0307\tab firmTaskErr}{\f4 \tab Unsuccessful firmware task\par }{\f6\fs20 0x0308\tab hbQueueBadErr}{\f4 \tab Damaged heartbeat queue\par }{\f6\fs20 0x0309\tab unCnctDevErr}{\f4 \tab Dispatch attempted to an unconnected device\par }{\f6\fs20 0x030B\tab idTagNtAvlErr}{\f4 \tab No ID tag is available\par }{\f6\fs20 0x0380\tab notInList}{\f4 \tab The specified routine was not found in the queue\par }{\f6\fs20 0x0381\tab invalidTag}{\f4 \tab The correct signature value was not found in the header\par }{\f6\fs20 0x0382\tab alreadyInQueue}{\f4 \tab Specified element already in queue\par }{\f6\fs20 0x0390\tab badTimeVerb}{\f4 \tab Invalid }{\f6\fs20 convVerb}{\f4  value\par }{\f6\fs20 0x0391\tab badTimeData}{\f4 \tab Invalid date or time to be converted\par }{\f6\fs20 0x034F\tab mtBufferTooSmall}{\f4 \tab The buffer is too small\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 QuickDraw II\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0401\tab alreadyInitiallized}{\f4 \tab QuickDraw II is already initialized\par }{\f6\fs20 0x0402\tab cannotReset}{\f4 \tab Never used\par }{\f6\fs20 0x0403\tab notInitialized}{\f4 \tab QuickDraw II is not initialized\par }{\f6\fs20 0x0410\tab screenReserved}{\f4 \tab The screen memory is reserved\par }{\f6\fs20 0x0411\tab badRect}{\f4 \tab Invalid rectangle\par }{\f6\fs20 0x0420\tab notEqualChunkiness}{\f4 \tab Chunkiness is not equal\par }{\f6\fs20 0x0430\tab rgnAlreadyOpen}{\f4 \tab Region is already open\par }{\f6\fs20 0x0431\tab rgnNotOpen}{\f4 \tab No region is open\par }{\f6\fs20 0x0432\tab rgnScanOverflow}{\f4 \tab Region scan overflow\par }{\f6\fs20 0x0433\tab rgnFull}{\f4 \tab Region is full\par }{\f6\fs20 0x0440\tab polyAlreadyOpen}{\f4 \tab Polygon is already open\par }{\f6\fs20 0x0441\tab polyNotOpen}{\f4 \tab No polygon is open\par }{\f6\fs20 0x0442\tab polyTooBig}{\f4 \tab The polygon is too big\par }{\f6\fs20 0x0450\tab badTableNum}{\f4 \tab Invalid color table number\par }{\f6\fs20 0x0451\tab badColorNum}{\f4 \tab Invalid color number\par }{\f6\fs20 0x0452\tab badScanLine}{\f4 \tab Invalid scan line number\par }{\f6\fs20 0x04FF\tab }{\f4 \tab Not implemented\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Desk Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0510\tab daNotFound}{\f4 \tab Specified desk accessory is not available\par }{\f6\fs20 0x0511\tab notSysWindow}{\f4 \tab The window parameter is not a pointer to a system window owned by an NDA\par }{\f6\fs20 0x0520\tab deskBadSelector}{\f4 \tab Selector out of range\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Event Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0601\tab emDupStrtUpErr}{\f4 \tab The Event Manager has already been started\par }{\f6\fs20 0x0602\tab emResetErr}{\f4 \tab Can\rquote t reset the Event Manager\par }{\f6\fs20 0x0603\tab emNotActErr}{\f4 \tab The Event Manager is not active\par }{\f6\fs20 0x0604\tab emBadEvtCodeErr}{\f4 \tab The event code is greater than 15\par }{\f6\fs20 0x0605\tab emBadBttnNoErr}{\f4 \tab The button number given was not 0 or 1\par }{\f6\fs20 0x0606\tab emQSiz2LrgErr}{\f4 \tab The size of the event queue is larger than 3639\par }{\f6\fs20 0x0607\tab emNoMemQueueErr}{\f4 \tab Insufficient memory for the event queue\par }{\f6\fs20 0x0681\tab emBadEvtQErr}{\f4 \tab The event queue is damaged\par }{\f6\fs20 0x0682\tab emBadQHndlErr}{\f4 \tab Queue handle damaged\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Sound Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0810\tab noDOCFndErr}{\f4 \tab The DOC or RAM was not found\par }{\f6\fs20 0x0811\tab docAddrRngErr}{\f4 \tab DOC address range error\par }{\f6\fs20 0x0812\tab noSAddrInitErr}{\f4 \tab The Sound Tool Set is not active\par }{\f6\fs20 0x0813\tab invalGenNumErr}{\f4 \tab Invalid generator number\par }{\f6\fs20 0x0814\tab synthModeErr}{\f4 \tab Synthesizer mode error\par }{\f6\fs20 0x0815\tab genBusyErr}{\f4 \tab The generator is already in use\par }{\f6\fs20 0x0817\tab mstrIRQNotAssgnErr}{\f4 \tab Master IRQ not assigned\par }{\f6\fs20 0x0818\tab sndAlreadyStrtErr}{\f4 \tab The Sound Tool Set is already started\par }{\f6\fs20 0x08FF\tab unclaimedSndIntErr}{\f4 \tab Unclaimed sound interrupt error\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Apple Desktop Bus Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0910\tab cmndIncomplete}{\f4 \tab Command not completed\par }{\f6\fs20 0x0911\tab cantSync}{\f4 \tab Can\rquote t synchronize with the system\par }{\f6\fs20 0x0982\tab adbBusy}{\f4 \tab ADB busy (command pending)\par }{\f6\fs20 0x0983\tab devNotAtAddr}{\f4 \tab Device not at present address\par }{\f6\fs20 0x0984\tab sqrListFull}{\f4 \tab SQR list is full\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Integer Math Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0B01\tab imBadInptParam}{\f4 \tab Bad input parameter\par }{\f6\fs20 0x0B02\tab imIllegalChar}{\f4 \tab Illegal character in the string\par }{\f6\fs20 0x0B03\tab imOverflow}{\f4 \tab Integer or long integer overflow\par }{\f6\fs20 0x0B04\tab imStrOverflow}{\f4 \tab String overflow\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Text Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0C01\tab badDevType}{\f4 \tab Illegal device type\par }{\f6\fs20 0x0C02\tab badDevNum}{\f4 \tab Illegal device number\par }{\f6\fs20 0x0C03\tab badMode}{\f4 \tab Illegal operation\par }{\f6\fs20 0x0C04\tab unDefHW}{\f4 \tab Undefined hardware error\par }{\f6\fs20 0x0C05\tab lostDev}{\f4 \tab Lost device; device is no longer online\par }{\f6\fs20 0x0C06\tab lostFile}{\f4 \tab File is not longer available\par }{\f6\fs20 0x0C07\tab badTitle}{\f4 \tab Illegal file name\par }{\f6\fs20 0x0C08\tab noRoom}{\f4 \tab Insufficient space on the specified diskette\par }{\f6\fs20 0x0C09\tab noDevice}{\f4 \tab Specified volume is not online\par }{\f6\fs20 0x0C0A\tab noFile}{\f4 \tab Specified file is not in the directory given\par }{\f6\fs20 0x0C0B\tab dupFile}{\f4 \tab Duplicate file\par }{\f6\fs20 0x0C0C\tab notClosed}{\f4 \tab Attempt to open a file that is already open\par }{\f6\fs20 0x0C0D\tab notOpen}{\f4 \tab Attempt to access a closed file\par }{\f6\fs20 0x0C0E\tab badFormat}{\f4 \tab Error reading real or integer number\par }{\f6\fs20 0x0C0F\tab ringBuffOFlo}{\f4 \tab Ring buffer overflow\par }{\f6\fs20 0x0C10\tab writeProtected}{\f4 \tab The specified disk is write protected\par }{\f6\fs20 0x0C40\tab devErr}{\f4 \tab The device did not complete a read or write\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Window Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0E01\tab paramLenErr}{\f4 \tab The first word of the parameter list is the wrong size\par }{\f6\fs20 0x0E02\tab allocateErr}{\f4 \tab Unable to allocate the window record\par }{\f6\fs20 0x0E03\tab taskMaskErr}{\f4 \tab Some reserved bits were not clear in the }{\f6\fs20 wmTaskMask}{\f4  field of the }{\f6\fs20 WmTaskRec}{\f4  record\par }{\f6\fs20 0x0E04\tab compileTooLarge}{\f4 \tab Compiled text is larger than 64K\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Menu Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x0F03\tab menuNoStruct}{\f4 \tab Returned if bit 10 of }{\f6\fs20 itemFlag}{\f4  is not set\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Control Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1001\tab wmNotStartedUp}{\f4 \tab The Window Manager is not initialized\par }{\f6\fs20 0x1002\tab cmNotInitialized}{\f4 \tab The Control Manager has not been started\par }{\f6\fs20 0x1003\tab noCtlInList}{\f4 \tab The control is not in the window list\par }{\f6\fs20 0x1004\tab noCtlError}{\f4 \tab No controls in the window\par }{\f6\fs20 0x1005\tab noExtendedCtlError}{\f4 \tab No extended controls in the window\par }{\f6\fs20 0x1006\tab noCtlTargetError}{\f4 \tab No extended control is currently the target control\par }{\f6\fs20 0x1007\tab notExtendedCtlError}{\f4 \tab The action is valid only for extended controls\par }{\f6\fs20 0x1008\tab canNotBeTargetError}{\f4 \tab The specified control cannot be made the target control\par }{\f6\fs20 0x1009\tab noSuchIDError}{\f4 \tab The specified control ID cannot be found\par }{\f6\fs20 0x100A\tab tooFewParmsError}{\f4 \tab Too few parameters were specified\par }{\f6\fs20 0x100B\tab noCtlToBeTargetError}{\f4 \tab No control could be made the target control\par }{\f6\fs20 0x100C\tab noFrontWindowError}{\f4 \tab There is no front window\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Loader\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1101\tab }{\f4 \tab Entry not found\par }{\f6\fs20 0x1102\tab }{\f4 \tab OMF version error\par }{\f6\fs20 0x1103\tab }{\f4 \tab Path name error\par }{\f6\fs20 0x1104\tab }{\f4 \tab The file is not a load file\par }{\f6\fs20 0x1107\tab }{\f4 \tab File version error\par }{\f6\fs20 0x1108\tab }{\f4 \tab User ID error\par }{\f6\fs20 0x1109\tab }{\f4 \tab Segment number out of sequence\par }{\f6\fs20 0x110A\tab }{\f4 \tab Illegal load record found\par }{\f6\fs20 0x110B\tab }{\f4 \tab Load segment is foreign\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 QuickDraw II Auxiliary\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1211\tab badRectSize}{\f4 \tab The height or width is negative, the destination Rect is not the same size as the source Rect, or the source or destination Rect is not within its boundary\par }{\f6\fs20 0x1212\tab destModeError}{\f4 \tab The }{\f6\fs20 destMode}{\f4  portion of }{\f6\fs20 resMode}{\f4  is invalid\par }{\f6\fs20 0x1230\tab badGetSysIconInput}{\f4 \tab No icon is available for the given input\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Print Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1301\tab missingDriver}{\f4 \tab Specified driver is not in the drivers folder of the system folder\par }{\f6\fs20 0x1302\tab portNotOn}{\f4 \tab The specified port is not selected in the control panel\par }{\f6\fs20 0x1303\tab noPrintRecord}{\f4 \tab No print record was specified\par }{\f6\fs20 0x1304\tab badLaserPrep}{\f4 \tab The version of LaserPrep in the drivers folder is not compatible with this version of the Print Manager\par }{\f6\fs20 0x1305\tab badLPFile}{\f4 \tab The version of LaserPrep in the drivers folder is not compatible with this version of the Print Manager\par }{\f6\fs20 0x1306\tab papConnNotOpen}{\f4 \tab Connection can\rquote t be established with the LaserWriter\par }{\f6\fs20 0x1307\tab papReadWriteErr}{\f4 \tab Read-write error on the LaserWriter\par }{\f6\fs20 0x1308\tab ptrConnFailed}{\f4 \tab Connection can\rquote t be established with the ImageWriter\par }{\f6\fs20 0x1309\tab badLoadParam}{\f4 \tab The specified parameter is invalid\par }{\f6\fs20 0x130A\tab callNotSupported}{\f4 \tab Tool call is not supported by the current version of the driver\par }{\f6\fs20 0x1321\tab startUpAlreadyMode}{\f4 \tab LLDStartUp call already made\par }{\f6\fs20 0x1322\tab invalidCtlVal}{\f4 \tab Invalid control value specified\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 LineEdit Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1401\tab leDupStrtUpErr}{\f4 \tab The LineEdit Tool Set has already been started\par }{\f6\fs20 0x1402\tab leResetError}{\f4 \tab Can\rquote t reset LineEdit\par }{\f6\fs20 0x1403\tab leNotActiveErr}{\f4 \tab The LineEdit Tool Set has not been started\par }{\f6\fs20 0x1404\tab leScrapErr}{\f4 \tab The desk scrap is too big to copy\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Dialog Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x150A\tab badItemType}{\f4 \tab Inappropriate item type\par }{\f6\fs20 0x150B\tab newItemFailed}{\f4 \tab Item creation failed\par }{\f6\fs20 0x150C\tab itemNotFound}{\f4 \tab No such item\par }{\f6\fs20 0x150D\tab notModalDialog}{\f4 \tab The front-most window is not a modal dialog\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Scrap Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1610\tab basCrapType}{\f4 \tab No scrap of this type\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Standard File\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1701\tab badPromptDesc}{\f4 \tab Invalid }{\f6\fs20 promptRefDesc}{\f4  value\par }{\f6\fs20 0x1702\tab badOrigNameDesc}{\f4 \tab Invalid }{\f6\fs20 origNameRefDesc}{\f4  value\par }{\f6\fs20 0x1704\tab badReplyNameDesc}{\f4 \tab Invalid }{\f6\fs20 nameRefDesc}{\f4  value in the reply record\par }{\f6\fs20 0x1705\tab badReplyPathDesc}{\f4 \tab Invalid }{\f6\fs20 pathRefDesc}{\f4  value in the reply record\par }{\f6\fs20 0x1706\tab badCall}{\f4 \tab }{\f6\fs20 SFPGetFile}{\f4 , }{\f6\fs20 SFPGetFile2}{\f4  and }{\f6\fs20 SFPMultiGet2}{\f4  are not active\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Note Synthesizer\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1901\tab nsAlreadyInit}{\f4 \tab The Note Synthesizer has already been started\par }{\f6\fs20 0x1902\tab nsSndNotInit}{\f4 \tab The Sound Tool Set has not been started\par }{\f6\fs20 0x1921\tab nsNotAvail}{\f4 \tab No generators are available\par }{\f6\fs20 0x1922\tab nsBadGenNum}{\f4 \tab Invalid generator number\par }{\f6\fs20 0x1923\tab nsNotInit}{\f4 \tab The Note Synthesizer has not been started\par }{\f6\fs20 0x1924\tab nsGenAlreadyOn}{\f4 \tab The specified note is already being played\par }{\f6\fs20 0x1925\tab soundWrongVer}{\f4 \tab The version of the Sound Tool Set is not compatible with this version of the Note Synthesizer\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Note Sequencer\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1A00\tab noRoomMidiErr}{\f4 \tab The Note Sequencer is already tracking 32 notes; there is no room for a MIDI }{\f6\fs20 NoteOn}{\f4 \par }{\f6\fs20 0x1A01\tab noCommandErr}{\f4 \tab The current }{\f6\fs20 seqItem}{\f4  is not valid in this context\par }{\f6\fs20 0x1A02\tab noRoomErr}{\f4 \tab The sequence is nested more than 12 levels deep\par }{\f6\fs20 0x1A03\tab startedErr}{\f4 \tab The Note Sequencer is already started\par }{\f6\fs20 0x1A04\tab noNoteErr}{\f4 \tab Can\rquote t find the note for a }{\f6\fs20 NoteOff}{\f4  command\par }{\f6\fs20 0x1A05\tab noStartErr}{\f4 \tab The Note Sequencer was not started\par }{\f6\fs20 0x1A06\tab instBndsErr}{\f4 \tab The specified instrument is outside of the bounds of the current instrument table\par }{\f6\fs20 0x1A07\tab nsWrongVer}{\f4 \tab The version of the Note Synthesizer is incompatible with the Note Sequencer\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Font Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1B01\tab fmDupStartUpErr}{\f4 \tab The Font Manager has already been started\par }{\f6\fs20 0x1B02\tab fmResetErr}{\f4 \tab Can\rquote t reset the Font Manager\par }{\f6\fs20 0x1B03\tab fmNotActiveErr}{\f4 \tab The Font Manager has not been started\par }{\f6\fs20 0x1B04\tab fmFamNotFndErr}{\f4 \tab Family not found\par }{\f6\fs20 0x1B05\tab fmFontNtFndErr}{\f4 \tab Font not found\par }{\f6\fs20 0x1B06\tab fmFontMemErr}{\f4 \tab Font not in memory\par }{\f6\fs20 0x1B07\tab fmSysFontErr}{\f4 \tab System font cannot be purged\par }{\f6\fs20 0x1B08\tab fmBadFamNumErr}{\f4 \tab Illegal family number\par }{\f6\fs20 0x1B09\tab fmBadSizeErr}{\f4 \tab Illegal font size\par }{\f6\fs20 0x1B0A\tab fmBadNameErr}{\f4 \tab Illegal name length\par }{\f6\fs20 0x1B0B\tab fmMenuErr}{\f4 \tab FixFontMenu never called\par }{\f6\fs20 0x1B0C\tab fmScaleSizeErr}{\f4 \tab Scaled size font exceeds limits\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 List Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1C02\tab listRejectEvent}{\f4 \tab The list control did not handle the event\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 ACE Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1D01\tab aceIsActive}{\f4 \tab The ACE Tool Set has already been started\par }{\f6\fs20 0x1D02\tab aceBadDP}{\f4 \tab Requested direct page location is not valid\par }{\f6\fs20 0x1D03\tab aceNotActive}{\f4 \tab The ACE Tool Set has not been started\par }{\f6\fs20 0x1D04\tab aceNoSuchParam}{\f4 \tab Requested information type not supported\par }{\f6\fs20 0x1D05\tab aceBadMethod}{\f4 \tab Specified compression method is not supported\par }{\f6\fs20 0x1D06\tab aceBadSrc}{\f4 \tab Specified source is invalid\par }{\f6\fs20 0x1D07\tab aceBadDest}{\f4 \tab Specified destination is invalid\par }{\f6\fs20 0x1D08\tab aceDataOverlap}{\f4 \tab Specified source and destination areas overlap\par }{\f6\fs20 0x1DFF\tab aceNotImplemented}{\f4 \tab The requested function has not been implemented\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Resource Manager\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x1E01\tab resForkUsed}{\f4 \tab The resource fork is not empty\par }{\f6\fs20 0x1E02\tab resBadFormat}{\f4 \tab The resource fork is not correctly formatted\par }{\f6\fs20 0x1E03\tab resNoConverter}{\f4 \tab No converter routine for the resource type\par }{\f6\fs20 0x1E04\tab resNoCurFile}{\f4 \tab No current resource file\par }{\f6\fs20 0x1E05\tab resDupID}{\f4 \tab The specified resource ID is already in use\par }{\f6\fs20 0x1E06\tab resNotFound}{\f4 \tab The specified resource was not found\par }{\f6\fs20 0x1E07\tab resFileNotFound}{\f4 \tab The specified ID does not match an open file\par }{\f6\fs20 0x1E08\tab resBadAppID}{\f4 \tab The user ID was not found; the calling program has not issued a }{\f6\fs20 ResourceStartUp}{\f4  call\par }{\f6\fs20 0x1E09\tab resNoUniqueID}{\f4 \tab No more resource IDs are available\par }{\f6\fs20 0x1E0A\tab resIndexRange}{\f4 \tab Index is out of range; no resource was found\par }{\f6\fs20 0x1E0B\tab resSysIsOpen}{\f4 \tab The system resource file is already open\par }{\f6\fs20 0x1E0C\tab resHasChanged}{\f4 \tab The resource has been changed and has not been updated\par }{\f6\fs20 0x1E0D\tab resDiffConverter}{\f4 \tab Another converter is already logged in for this resource type\par }{\f6\fs20 0x1E0E\tab resDiskFull}{\f4 \tab Volume full\par }{\f6\fs20 0x1E10\tab resNameNotFound}{\f4 \tab The named resource was not found\par }{\f6\fs20 0x1E11\tab resBadNameVers}{\f4 \tab Bad resource name\par }{\f6\fs20 0x1E13\tab resInvalidTypeOrID}{\f4 \tab The resource type or ID was not valid\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 MIDI Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x2000\tab miStartUpErr}{\f4 \tab The MIDI Tool Set has not been started\par }{\f6\fs20 0x2001\tab miPacketErr}{\f4 \tab Incorrect packet length received\par }{\f6\fs20 0x2002\tab miArrayErr}{\f4 \tab Array was an invalid size\par }{\f6\fs20 0x2003\tab miFullBufErr}{\f4 \tab MIDI data discarded because of buffer overflow\par }{\f6\fs20 0x2004\tab miToolsErr}{\f4 \tab Required tools inactive or incorrect version\par }{\f6\fs20 0x2005\tab miOutOffErr}{\f4 \tab MIDI output disabled\par }{\f6\fs20 0x2007\tab miNoBufErr}{\f4 \tab No buffer allocated\par }{\f6\fs20 0x2008\tab miDriverErr}{\f4 \tab Specified device driver invalid\par }{\f6\fs20 0x2009\tab miBadFreqErr}{\f4 \tab Unable to set MIDI clock to the specified frequency\par }{\f6\fs20 0x200A\tab miClockErr}{\f4 \tab MIDI clock wrapped to zero\par }{\f6\fs20 0x200B\tab miConflictErr}{\f4 \tab Two processes are competing for the MIDI interrupt\par }{\f6\fs20 0x200C\tab miNoDevErr}{\f4 \tab No device driver loaded\par }{\f6\fs20 0x2080\tab miDevNotAvail}{\f4 \tab MIDI interface not available\par }{\f6\fs20 0x2081\tab miDevSlotBusy}{\f4 \tab Specified slot not available in Control Panel\par }{\f6\fs20 0x2082\tab miDevBusy}{\f4 \tab MIDI interface already in use\par }{\f6\fs20 0x2083\tab miDevOverrun}{\f4 \tab MIDI interface overrun by input data; the interface is not being served quickly enough\par }{\f6\fs20 0x2084\tab miDevNoConnect}{\f4 \tab No connection to MIDI interface\par }{\f6\fs20 0x2085\tab miDevReadErr}{\f4 \tab Error reading MIDI data\par }{\f6\fs20 0x2086\tab miDevVersion}{\f4 \tab ROM version or machine type incompatible with device driver\par }{\f6\fs20 0x2087\tab miDevIntHndlr}{\f4 \tab Conflicting interrupt handler installed\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 TextEdit Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x2201\tab teAlreadyStarted}{\f4 \tab The TextEdit Tool Set has already been started\par }{\f6\fs20 0x2202\tab teNotStarted}{\f4 \tab The TextEdit Tool Set has not been started\par }{\f6\fs20 0x2203\tab teInvalidHandle}{\f4 \tab The handle does not refer to a valid }{\f6\fs20 TERecord}{\f4 \par }{\f6\fs20 0x2204\tab teInvalidDescriptor}{\f4 \tab Invalid descriptor value specified\par }{\f6\fs20 0x2205\tab teInvalidFlag}{\f4 \tab The specified flag word is invalid\par }{\f6\fs20 0x2206\tab teInvalidPCount}{\f4 \tab The specified parameter count is not valid\par }{\f6\fs20 0x2208\tab teBufferOverflow}{\f4 \tab The output buffer was too small to accept all data\par }{\f6\fs20 0x2209\tab teInvalidLine}{\f4 \tab The starting line value is greater than the number of lines in the text (can be interpreted as an end of file indication in some cases)\par }{\f6\fs20 0x220B\tab teInvalidParameter}{\f4 \tab A passed parameter was not valid\par }{\f6\fs20 0x220C\tab teInvalidTextBox2}{\f4 \tab The }{\f6\fs20 LETextBox2}{\f4  format codes were inconsistent\par }{\f6\fs20 0x220D\tab teNeedsTools}{\f4 \tab The Font Manager was not started\par }\pard \widctlpar\adjustright {\f4 \par }\pard \keepn\widctlpar\adjustright {\b\f4 Media Control Tool Set\par }{\f4 \par }\pard \qj\fi-3420\li3420\widctlpar\tx900\tx3420\adjustright {\f6\fs20 0x2601\tab UnImp}{\f4 \tab Unimplemented for this device\par }{\f6\fs20 0x2602\tab BadSpeed}{\f4 \tab Invalid speed specified\par }{\f6\fs20 0x2603\tab BadUnitType}{\f4 \tab Invalid unit type specified\par }{\f6\fs20 0x2604\tab TimeOutErr}{\f4 \tab Timed out during device read\par }{\f6\fs20 0x2605\tab notLoaded}{\f4 \tab No driver is currently loaded\par }{\f6\fs20 0x2606\tab BadAudio}{\f4 \tab Invalid audio value\par }{\f6\fs20 0x2607\tab devRtnError}{\f4 \tab Device returned error (cannot perform the command)\par }{\f6\fs20 0x2608\tab unRecStatus}{\f4 \tab Unrecognized status from the device\par }{\f6\fs20 0x2609\tab badSelector}{\f4 \tab Invalid selector value specified\par }{\f6\fs20 0x260A\tab funnyData}{\f4 \tab Funny data received (try again)\par }{\f6\fs20 0x260B\tab invalidPort}{\f4 \tab Invalid port specified\par }{\f6\fs20 0x260C\tab OnlyOnce}{\f4 \tab Scans only once\par }{\f6\fs20 0x260D\tab NoResMgr}{\f4 \tab Resource Manager not active (must be loaded and started)\par }{\f6\fs20 0x260E\tab invalidPort}{\f4 \tab Invalid port specified\par }{\f6\fs20 0x260F\tab wasShutDown}{\f4 \tab The tool set was already shut down\par }{\f6\fs20 0x2610\tab wasStarted}{\f4 \tab The tool was already started\par }{\f6\fs20 0x2611\tab badChannel}{\f4 \tab An invalid media channel was specified\par }{\f6\fs20 0x2612\tab InvalidParam}{\f4 \tab An invalid parameter was specified\par }{\f6\fs20 0x2613\tab CallNotSupported}{\f4  \tab An invalid media control tool call was attempted\par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Appendix B \endash  Resources Used in This Course}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Appendix B \endash  Resources Used in This Course}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Appendix B \endash  Resources Used in This Course\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 Resource Attributes}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Resource Attributes\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource attributes}}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 In the sections that follow this one, you will find model statements showing you how to create a resource in the resource description file that Rez compiles.  In all cases, the resource model starts with a line like this one:\par \par }\pard \li180\widctlpar\adjustright {\f6\fs20 resource rMenu (id) \{\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par You can also add one or more resource attributes right after the resource ID.  If there is more than one attribute, separate them with commas.\par Table B-1 shows the various attributes you can use, what the default is, and what the attribute will do for you.\par \par }\pard \fi-3780\li4140\ri360\keepn\widctlpar\brdrt\brdrs\brdrw15 \brdrb\brdrs\brdrw15 \tx2160\adjustright {\f4 Default\tab Alternative\tab Meaning\par }\pard \fi-3780\li4140\ri360\keepn\widctlpar\tx2160\adjustright {\f6\fs20 unlocked}{\f4 \tab }{\f6\fs20 locked}{\f4 \tab Locked resources cannot be moved by the Memory Manager.\par }{\f6\fs20 moveable}{\f4 \tab }{\f6\fs20 fixed}{\f4 \tab Specifies whether the Memory Manager can move the block when it is unlocked.\par }{\f6\fs20 nonconvert}{\f4 \tab }{\f6\fs20 convert}{\f4 \tab Convert resources require a resource converter.\par }{\f6\fs20 handleload}{\f4 \tab }{\f6\fs20 absoluteload}{\f4 \tab Absolute forces the resource to be loaded at an absolute address.\par }{\f6\fs20 nonpurgeable}{\f4 \tab }{\f6\fs20 purgeable1}{\f4 \tab Purgeable resources can be automatically purged\par \tab }{\f6\fs20 purgeable2}{\f4 \tab by the Memory Manager.  }{\f6\fs20 purgeable3}{\f4  resources\par \tab }{\f6\fs20 purgeable3}{\f4 \tab are purged before }{\f6\fs20 purgeable2}{\f4  resources, which are purged before }{\f6\fs20 purgeable1}{\f4  resources.\par }{\f6\fs20 unprotected}{\f4 \tab }{\f6\fs20 protected}{\f4 \tab Protected resources cannot be modified by the Resource Manager.\par }{\f6\fs20 nonpreload}{\f4 \tab }{\f6\fs20 preload}{\f4 \tab Preloaded resources are placed in memory as soon as the Resource Manager opens the resource file.\par }{\pard\plain \fi-3780\li4140\ri360\keepn\widctlpar\tx2160\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 nocrossbank\bxe }}}{\v\f6\fs20 \par }{\f6\fs20 crossbank}{\f4 \tab }{\f6\fs20 nocrossbank}{\f4 \tab A crossbank resource can cross memory bank boundaries.\par }{\f6\fs20 specialmemory}{\f4 \tab }{\f6\fs20 nospecialmemory}{\f4 \tab A special memory resource can be loaded in banks 0x00, 0x01, 0xE0 and 0xE1.\par }{\f6\fs20 notpagealigned}{\f4 \tab }{\f6\fs20 pagealigned}{\f4 \tab A page-aligned resource must be loaded with a starting address that is an even multiple of 256.\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qc\fi360\widctlpar\adjustright {\f4 Table B-1:  Resource Attribute Key Words\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rAlertString}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rAlertString\tcl2}}}{\b\f4\fs28 \tab $8015\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 AlertWindow}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rAlertString resource\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 alert strings}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 rAlertString}{\f4  resources are used to form alerts using }{\f6\fs20 AlertWindow}{\f4 .  See the description of }{\f6\fs20 AlertWindow}{\f4  for details about what can appear in the string itself.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rAlertString (id) \{\par    "string"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the alert string.\par \par }{\f6\fs20 string}{\f4 \tab This is the actual alert string.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rBundle}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rBundle\tcl2}}}{\b\f4\fs28 \tab $802B\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Finder}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rBundle resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 rBundle}{\f4  resources are used by the Finder.  You can define icons for the application and its data files, as well as tell the Finder what sort of data files your program can use.\par The }{\f6\fs20 rBundle}{\f4  resource is used in conjunction with the }{\f6\fs20 rVersion}{\f4  resource.  If your application has either one of these resources, it should have both.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rBundle (id, preload, nospecialmemory) \{\par    appIcon,\par    id,\par    oneDoc,\par    oneDoc\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the resource.  The Finder only looks for an }{\f6\fs20 rBundle}{\f4  resource with a resource ID of 1, so this field should always be 1.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 preload}{\f4 \tab You must always code the }{\f6\fs20 preload}{\f4  attribute for }{\f6\fs20 rBundle}{\f4  resources.  See \ldblquote Resource Attributes\rdblquote  at the start of this appendix for a description of the various attributes.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\tx2340\adjustright {\f6\fs20 nospecialmemory}{\f4 \par \tab You must always code the }{\f6\fs20 nospecialmemory}{\f4  attribute for }{\f6\fs20 rBundle}{\f4  resources.  See \ldblquote Resource Attributes\rdblquote  at the start of this appendix for a description of the various attributes.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 appIcon}{\f4 \tab This is the resource ID for an }{\f6\fs20 rIcon}{\f4  resource.  This icon will be used by the Finder when the application is displayed in a folder or on the desktop.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab The resource ID for the }{\f6\fs20 rBundle}{\f4  resource is repeated here.  The Finder makes use of this field when it builds the DeskTop file.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 oneDoc}{\f4 \tab The last entry is any number of }{\f6\fs20 oneDoc}{\f4  structures.  Each of these structures defines one kind of file the application can deal with in some way.  You can define icons or identify your application as a program that can use the data file.  You can also select the kind of file this structure applies to using some very specific methods \endash  it\rquote s possible to identify a single file if you are specific enough.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 Here\rquote s the layout for a }{\f6\fs20 oneDoc}{\f4  structure:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20    \{\par       \{\par          launch,\par          \{path\},\par          \{largeIcon\},\par          \{smallIcon\},\par          "fileDesc",\par          \},\par       match,\par       MatchFileType \{\{fileType\}\},\par       MatchAuxType \{\{auxMask,auxType\}\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\},\par       empty \{\}\par }\pard \li180\widctlpar\adjustright {\f6\fs20       \}\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 launch}{\f4 \tab This flags word tells the Finder if your application should be executed if the user double clicks on a file that matches all of the file qualifiers for this }{\f6\fs20 oneDoc}{\f4  structure.\par \par \tab Bit 0 is a boolean flag telling the Finder whether you should be launched at all.  Set this bit if your application should be launched, and clear it if the application should not be launched.\par \par \tab Assuming the application can be launched, bits 4 to 7 establish the application\rquote s \ldblquote voting clout.\rdblquote   The Finder uses this information to pick the application that can best handle a particular file.  The Finder does this by picking the application that sets the highest voting clout bit.  Only one of these bits should be set.\par \par }\pard \qj\fi-720\li2880\widctlpar\adjustright {\f4 bit 7\tab This is the highest priority of all.  If you set bit 7, you are telling the Finder that you are the owner of the file type.  Normally you would only set this bit if you reserve a specific file type for the files for your program.\par bit 6\tab This bit says your program knows exactly what to do with the file, and can read and write the file.\par bit 5\tab This bit says you can read the file, and may be able to write it \endash  but not necessarily using the same format.\par bit 4\tab Setting this bit says you can read the file, but that\rquote s about it.\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par }{\f6\fs20 path}{\f4 \tab The path identifier.  This field is filled in by the Finder.  It should be set to 0 in your application.\par \par }{\f6\fs20 largeIcon}{\f4 \tab The Finder will use this icon when it displays a document matching this }{\f6\fs20 oneDoc}{\f4  record on the desktop, or in a window when large icons are used.\par \par }{\f6\fs20 smallIcon}{\f4 \tab The Finder will use this icon when it displays a document matching this }{\f6\fs20 oneDoc}{\f4  record in a window when either small icons or display by name is selected.\par \par }{\f6\fs20 fileDesc}{\f4 \tab The Finder displays a short text description of the file when the user asks for icon information.  If you can provide a better text description that the one the Finder normally uses, put that description here.  If not, use a null string or omit the field.\par \par }{\f6\fs20 match}{\f4 \tab This flags field tells the Finder which of the various file selectors are actually being used.  There is one bit per file selector; the bit is on if the file selector is in use, and 0 if it should be ignored.\par \par \tab In this course, we use bit 0 for selecting files by file type, and bit 1 for selecting files by auxiliary file type.  For a description of the other bits, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par \par }{\f6\fs20 fileType}{\f4 \tab This is the file type for the files to match.  If bit 0 of }{\f6\fs20 match}{\f4  is set, only files with this file type will match this }{\f6\fs20 oneDoc}{\f4  structure.\par \par \tab The }{\f6\fs20 MatchFileType}{\f4  that appears to the left of the file type is a Rez label; it should be typed exactly like you see it.\par \par }{\f6\fs20 auxMask, auxType\par }{\f4 \tab Assuming bit 1 of }{\f6\fs20 match}{\f4  is set, when the Finder is checking to see if a file matches this }{\f6\fs20 oneDoc}{\f4  structure, it ands the auxiliary file type for the file with }{\f6\fs20 auxMask}{\f4 , then compares the result to }{\f6\fs20 auxType}{\f4 .  If the values match, the file passes this test; if not, this }{\f6\fs20 oneDoc}{\f4  structure will not be applied to the file.\par \par \tab The }{\f6\fs20 MatchAuxType}{\f4  that appears to the left of the file type is a Rez label; it should be typed exactly like you see it.\par \par }{\f6\fs20 empty}{\f4 \tab There are ten other ways to check a file.  These other comparisons are not used in this course, and won\rquote t be covered here.  You can skip all of these tests by making sure bits 31 to 2 are 0 in match, and by coding the }{\f6\fs20 empty}{\f4  entry exactly as you see it in the model structure.  Like }{\f6\fs20 MatchFileType}{\f4  and }{\f6\fs20 MatchAuxType}{\f4 , }{\f6\fs20 empty}{\f4  is a Rez label, and must appear exactly as you see it.\par \par \tab For complete description of these fields, see }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4 .\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rComment}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rComment\tcl2}}}{\b\f4\fs28 \tab $802A\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Finder}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rComment resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f6\fs20 rComment}{\f4  resources are used to place comments in a resource file.  The data is a sequence of ASCII characters.  The Finder uses }{\f6\fs20 rComment(1)}{\f4  resources (i.e. }{\f6\fs20 rComment}{\f4  resources with a resource ID of 1) for user comments about a file, and }{\f6\fs20 rComment(2)}{\f4  resources for copyright information.  These comments are displayed when the user asks for information about the icon.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rComment (id) \{\par    "string"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the resource.\par \par }{\f6\fs20 string}{\f4 \tab The comment string.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rControlList}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rControlList\tcl2}}}{\b\f4\fs28 \tab $8003\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rControlList resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This resource is used to define a list of controls for an }{\f6\fs20 rWindParam1}{\f4  resource.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rControlList (id) \{\par    \{\par       id_1,\par       id_2,\par       id_3\par       \}\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the control list.\par \par }{\f6\fs20 id_1}{\f4 \tab This value, and the values that follow it, is a resource ID for an }{\f6\fs20 rControlTemplate}{\f4  resource.  The various controls are attached to the window that refers to this resource.  When the controls are drawn, they are drawn in reverse order of their appearance in this list.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rControlTemplate}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rControlTemplate\tcl2}}}{\b\f4\fs28 \tab $8004\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rControlTemplate resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This resource is used to create controls, generally for a window control list.  It is a complex resource with many options.  For a detailed, control by control explanation of how to use this resource, see lessons 11, 13 and 14.  For more information, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual: Volume 3}{\f4 , page E-7.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rCString}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rCString\tcl2}}}{\b\f4\fs28 \tab $801D\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 c-strings}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rCString resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Defines a null terminated string (c-string).  }{\f6\fs20 rCString}{\f4  resources are used for string constants in this course.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rCString (id) \{\par    "string"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the string.\par \par }{\f6\fs20 string}{\f4 \tab The c-string.  The terminating null character is added automatically by the Rez compiler.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par In many cases, this resource must be allocated with the attribute }{\f6\fs20 nocrossbank}{\f4  so the Resource Manager doesn\rquote t put the characters in two different banks in memory.  See \ldblquote Resource Attributes\rdblquote  at the beginning of this appendix for details.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rIcon}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rIcon\tcl2}}}{\b\f4\fs28 \tab $8001\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rIcon resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 rIcon}{\f4  resource is used to define icons.  They are used for icon controls and Finder icons in this course, but have many other applications throughout desktop programs.\par For details on the declaration and use of icons, see the text of Lesson 14.  For more information, see }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 2}{\f4 , page 17-3.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rIcon (id) \{\par    color,\par    height,\par    width,\par    image,\par    mask,\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the icon.\par \par }{\f6\fs20 color}{\f4 \tab Use $8000 for color icons, or $0000 for black and white icons.\par \par }{\f6\fs20 height}{\f4 \tab Height of the icon in pixels.\par \par }{\f6\fs20 width}{\f4 \tab Width of the icon in pixels.  This value must be a multiple of 8.\par \par }{\f6\fs20 image}{\f4 \tab This is the icon image, generally entered as hexadecimal data strings.\par \par }{\f6\fs20 mask}{\f4 \tab This is the icon mask, generally entered as hexadecimal data strings.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rMenu}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rMenu\tcl2}}}{\b\f4\fs28 \tab $8009\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menus}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenu resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 rMenu}{\f4  resource is used to define menus.  This resource is used in two ways in this course: to create menus for an }{\f6\fs20 rMenuBar}{\f4  resource, and to create pop-up menu controls.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenu (id) \{\par    menuID,\par    flags,\par    title,\par    \{\par       rMenuItem1,\par       rMenuItem2,\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the menu.\par \par }{\f6\fs20 menuID}{\f4 \tab This is the menu ID, used in various calls to the Menu Manager and returned by }{\f6\fs20 TaskMaster}{\f4  when a menu item from this menu is selected.\par \par }{\f6\fs20 flags}{\f4 \tab One word of flag bits, defined as follows:\par \par }\pard \qj\fi-1440\li3600\widctlpar\adjustright {\f4 bits 15-14\tab Defines the type of reference in }{\f6\fs20 title}{\f4 .  In this course, the menu title reference is always a resource ID, so these bits should always be set to 10.\par \par bits 13-12\tab Defines the type of reference for each of the entries in the menu item array.  In this course, the menu items are always given as an }{\f6\fs20 rMenuItem}{\f4  resource, so these bits are always set to 10.\par \par bits 11-9\tab Reserved; set to 0.\par \par bit 8\tab This bit is used to support tear-off menus.  The bit should be set to 0 for all programs in this course.\par \par bit 7\tab If this bit is clear, the menu will be enabled.  If this bit is set, the menu will be disabled.\par \par bit 6\tab Reserved; set to 0.\par \par }\pard \qj\fi-1440\li3600\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li3600\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 green apple bug}}}{\pard\plain \qj\fi-1440\li3600\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 XOR highlighting}}}{\pard\plain \qj\fi-1440\li3600\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Apple menu}}}{\v\f4 \par }\pard \qj\fi-1440\li3600\widctlpar\adjustright {\f4 bit 5\tab If this bit is set, XOR highlighting will be used.  If the bit is clear, color replace highlighting is used, eliminating green apple sickness.\par \par bit 4\tab This bit should be set for custom menus.  All of the menus in this course are standard menus, so the bit will always be clear.\par \par }\pard \qj\fi-1440\li3600\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li3600\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu caching}}}{\v\f4 \par }\pard \qj\fi-1440\li3600\widctlpar\adjustright {\f4 bit 3\tab If this bit is set, menu caching is used.  Menu caching is a technique that makes drawing the menu faster.  When the menu is pulled down, the Menu Manager saves a picture of the menu.  As long as no changes are made to the visual appearance of the menu, the Menu Manager will use the picture to redraw the menu in the future, which is faster than recreating the menu.\par \par bits 2-0\tab Reserved; set to 0.\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par }{\f6\fs20 title}{\f4 \tab This is the resource ID for an }{\f6\fs20 rPString}{\f4  resource containing the menu title.  The }{\f6\fs20 rPString}{\f4  resource must have an attribute of }{\f6\fs20 nocrossbank}{\f4 .\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 rMenuItem resource}}}{\v\f6\fs20 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 rMenuItem1}{\f4 \tab This is the first of the resource IDs for the }{\f6\fs20 rMenuItem}{\f4  resources that make up the menu.  The menu items specified by these resources are placed in the menu in the order listed in this array of resource IDs.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are several constants defined in the Types.rez file that can be used with this resource.  All of them are used to set the }{\f6\fs20 flags}{\f4  word.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /* --------------------------------------------------*/\par /* flag word for menu item\par /* --------------------------------------------------*/\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #Define fXOR                $0020\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /* --------------------------------------------------*/\par /* flag word for Menu\par /* --------------------------------------------------*/\par #Define fAllowCache         $0008\par #Define fCustom             $0010\par #Define ItemRefShift        $1000\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #Define MenuTitleRefShift   $4000\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The last two entries are used to form the position of two reference bits, and should be multiplied by one of these values:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 #Define RefIsPtr            $0000\par #Define RefIsHandle         $0001\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #Define RefIsResource       $0002\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Using these constants, a typical }{\f6\fs20 flags}{\f4  entry is\par \par }{\f6\fs20 RefIsResource*ItemRefShift + RefIsResource*MenuTitleRefShift + fAllowCache\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 This sets the }{\f6\fs20 flags}{\f4  word to $5008.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rMenuBar}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rMenuBar\tcl2}}}{\b\f4\fs28 \tab $8008\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu bar}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenuBar resource\bxe }}}{\v\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 rMenuBar}{\f4  resource is generally used to set up a system menu bar by calling }{\f6\fs20 NewMenuBar2}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuBar (id) \{\par    \{\par       rMenu1,\par       rMenu2,\par       \};\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the menu bar.  It is passed as a parameter to }{\f6\fs20 NewMenuBar2}{\f4 .\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 rMenu resource}}}{\v\f6\fs20 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 rMenu1}{\f4 , ...\tab These are resource IDs for }{\f6\fs20 rMenu}{\f4  resources that define the various menus that will appear in the menu bar.  The menus will be placed in the menu bar in the order listed, proceeding from left to right across the menu bar.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rMenuItem}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rMenuItem\tcl2}}}{\b\f4\fs28 \tab $800A\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 menu items}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rMenuItem resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 rMenuItem}{\f4  resource is used to define menu items.  In this course, this resource is always used to define menu items for }{\f6\fs20 rMenu}{\f4  resources.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rMenuItem (id) \{\par    itemID,\par    "keyEquiv","keyEquiv",\par    check,\par    flags,\par    title\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the menu item.\par \par }{\f6\fs20 itemID}{\f4 \tab This is the menu item ID, used in various calls to the Menu Manager and returned by }{\f6\fs20 TaskMaster}{\f4  when this menu item is selected.\par \par }\pard \qj\fi-1440\li1800\keepn\widctlpar\adjustright {\pard\plain \qj\fi-1440\li1800\keepn\widctlpar\adjustright \v\f6\fs20\cgrid {\xe {\v\f6\fs20 }{\v\f6\fs20 key equivalents}}}{\v\f6\fs20 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 keyEquiv}{\f4 \tab These two parameters are the key equivalents for the menu item.  The first is the key shown when the menu is pulled down.  If the menu item does not have key equivalents, omit the characters, coding }{\f6\fs20 ""}{\f4  for each.\par \par }{\f6\fs20 check}{\f4 \tab This is the character to use as a check mark to the left of the menu item.  Use 0 if there is no check mark, or 18 for a check mark.  It is also possible to use any other character, although 0 and 18 are the most common values.  The check character can be specified either as the ASCII character number or as a character constant, as in }{\f6\fs20 'R'}{\f4 .\par \par }{\f6\fs20 flags}{\f4 \tab One word of flag bits, defined as follows:\par \par }\pard \qj\fi-1440\li3600\widctlpar\adjustright {\f4 bits 15-14\tab Defines the type of reference in }{\f6\fs20 title}{\f4 .  In this course, the menu item title reference is always a resource ID, so these bits should always be set to 10.\par \par bit 13\tab Reserved; set to 0.\par \par bit 12\tab If this bit is set, the characters in the title will be drawn with shadowing.\par \par bit 11\tab If this bit is set, the characters in the title will be drawn with outlining.\par \par bits 10-8\tab Reserved; set to 0.\par \par bit 7\tab If this bit is clear, the menu item will be enabled.  If this bit is set, the menu item will be disabled.\par \par bit 6\tab If this bit is set, there will be a divider bar under the menu item.\par \par bit 5\tab If this bit is set, XOR highlighting will be used.  If the bit is clear, color replace highlighting is used.\par \par bits 4-3\tab Reserved; set to 0.\par \par bit 2\tab If this bit is set, the characters in the title will be underlined.\par \par bit 1\tab If this bit is set, the characters in the title will be italicized.\par \par bit 0\tab If this bit is set, the characters in the title will be bolded.\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par }{\f6\fs20 title}{\f4 \tab This is the resource ID for an }{\f6\fs20 rPString}{\f4  resource containing the menu item title.  The }{\f6\fs20 rPString}{\f4  resource must have an attribute of }{\f6\fs20 nocrossbank}{\f4 .\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par There are several constants defined in the Types.rez file that can be used with this resource.  All of them are used to set the }{\f6\fs20 flags}{\f4  word.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 /* --------------------------------------------------*/\par /* flag word for menu item\par /* --------------------------------------------------*/\par #Define fBold               $0001\par #Define fItalic             $0002\par #Define fUnderline          $0004\par #Define fXOR                $0020\par #Define fDivider            $0040\par #Define fDisabled           $0080\par #Define fItemStruct         $0400\par #Define fOutline            $0800\par #Define fShadow             $1000\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #Define ItemTitleRefShift   $4000\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }{\f6\fs20 ItemTitleRefShift}{\f4  is used to form the position for a reference, and should be multiplied by one of these values:\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 #Define RefIsPtr            $0000\par #Define RefIsHandle         $0001\par }\pard \li180\widctlpar\adjustright {\f6\fs20 #Define RefIsResource       $0002\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Using these constants, a typical }{\f6\fs20 flags}{\f4  entry is\par \par }{\f6\fs20 RefIsResource*ItemTitleRefShift + fDivider\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 This sets the }{\f6\fs20 flags}{\f4  word to $4040.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rPicture}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rPicture\tcl2}}}{\b\f4\fs28 \tab $8002\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 picture controls}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rPicture resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The }{\f6\fs20 rPicture}{\f4  resource is a recording of QuickDraw II drawing commands, generally used as pictures for picture controls.  There is no resource template for pictures in types.rez, so pictures are generally created with raw data statements.\par It is extremely difficult to create pictures by hand.  If you want to try, refer to }{\f4\ul Apple II Technical Notes #46: DrawPicture Data Format}{\f4 .\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 data rPicture (id) \{\par    $"data"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the picture.\par \par }{\f6\fs20 data}{\f4 \tab Hexadecimal data.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rPString}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rPString\tcl2}}}{\b\f4\fs28 \tab $8006\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 p-strings}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rPString resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Defines a p-string.  }{\f6\fs20 rPString}{\f4  resources are used for a variety of purposes in this course.  In most cases, these resources are referenced by other resources, as when they are used to define the names of menus.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rPString (id) \{\par    "string"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the string.\par \par }{\f6\fs20 string}{\f4 \tab The p-string.  The length of the string is calculated automatically by the Rez compiler.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par In many cases, this resource must be allocated with the attribute }{\f6\fs20 nocrossbank}{\f4  so the Resource Manager doesn\rquote t put the characters in two different banks in memory.  See \ldblquote Resource Attributes\rdblquote  at the beginning of this appendix for details.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rTextForLETextBox2}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rTextForLETextBox2\tcl2}}}{\b\f4\fs28 \tab $800B\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 string}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rTextForLETextBox2 resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Defines a string consisting of a simple sequence of ASCII characters.  Resource Manager calls can be used to compute the length of the string.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rTextForLETextBox2 (id) \{\par    "string"\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the string.\par \par }{\f6\fs20 string}{\f4 \tab The string.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par In many cases, this resource must be allocated with the attribute }{\f6\fs20 nocrossbank}{\f4  so the Resource Manager doesn\rquote t put the characters in two different banks in memory.  See \ldblquote Resource Attributes\rdblquote  at the beginning of this appendix for details.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rToolStartup}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rToolStartup\tcl2}}}{\b\f4\fs28 \tab $8013\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rToolStartup resource\bxe }}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 StartUpTools}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This resource tells }{\f6\fs20 StartUpTools}{\f4  what tools to start and, to some extent, how to start them.\par See Table 7-1 for a list of the tools used in this course, along with their dependencies as of System Disk 6.0.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rToolStartup (id) \{\par    mode,\par    \{\par       tool, version,\par       tool, version\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the resource.\par \par }{\f6\fs20 mode}{\f4 \tab This parameter is the master SCB to pass to QuickDraw II.  Among other things, this value determines whether the tools will be started in 640 mode or 320 mode.  To start the tools in 640 mode, use }{\f6\fs20 mode320}{\f4 ; to start the tools in 640 mode, use }{\f6\fs20 mode640}{\f4 .  For other possibilities, see the }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference Manual}{\f4 .\par \par tool\tab This is the tool number for a tool to start.  You can specify as many tools as you like, but each must be followed by a tool version number entry.\par \par }{\f6\fs20 version}{\f4 \tab This is the minimum allowed tool version number for the tool.  Version numbers as of System 6.0 are listed in Table 7-1.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Here is a sample call that shows all of the tools that are normally started in any desktop application.  Other tools used in this course are commented out \endash  to start them, remove the }{\f6\fs20 /*}{\f4  to the left of the tool number.  You can also find this resource on the solution disk in most of the sample programs from Lesson 7 on.\par \par }\pard \keepn\widctlpar\adjustright {\f6\fs20 resource rToolStartup(1) \{\par    mode640,\par    \{\par        3, $0302,                        /* Misc Tool */\par        4, $0307,                        /* QuickDraw II */\par        5, $0304,                        /* Desk Manager */\par        6, $0301,                        /* Event Manager */\par /*     8, $0303,                        /* Sound Tools */\par       11, $0300,                        /* Integer Math Tool Set */\par       14, $0303,                        /* Window Manager */\par       15, $0303,                        /* Menu Manager */\par       16, $0303,                        /* Control Manager */\par       18, $0304,                        /* QuickDraw II Auxiliary */\par /*    19, $0301,                        /* Print Manager */\par       20, $0303,                        /* LineEdit Tool Set */\par       21, $0304,                        /* Dialog Manager */\par       22, $0301,                        /* Scrap Manager */\par       23, $0303,                        /* SFO */\par /*    25, $0104,                        /* Note Synthesizer */\par       27, $0303,                        /* Font Manager */\par       28, $0303,                        /* List Manager */\par /*    34, $0103                         /* TextEdit Tool Set */\par       \}\par }\pard \widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rVersion}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rVersion\tcl2}}}{\b\f4\fs28 \tab $8029\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Finder}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rVersion resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The Finder uses an }{\f6\fs20 rVersion}{\f4  resource with a resource of 1 to establish version information for an application.  If the application has an }{\f6\fs20 rVersion}{\f4  resource, it should also have an }{\f6\fs20 rBundle}{\f4  resource.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rVersion (id) \{\par    \{\par       major,                                    /* Major revision */\par       minor,                                    /* Minor revision */\par       bug,                                      /* Bug version */\par       stage,                                    /* Release stage */\par       release,                                  /* Non-final release # */\par       \},\par    region,                                      /* Region code */\par    "string1",                                   /* Short version number */\par    "string2",                                   /* Long version number */\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the }{\f6\fs20 rVersion}{\f4  resource.\par \par }{\f6\fs20 major}{\f4 \tab Major revision level.\par \par }{\f6\fs20 minor}{\f4 \tab Minor revision level.\par \par }{\f6\fs20 bug}{\f4 \tab Bug fix level.\par \par }{\f6\fs20 stage}{\f4 \tab Release stage.  This can be any one of }{\f6\fs20 development}{\f4 , }{\f6\fs20 alpha}{\f4 , }{\f6\fs20 beta}{\f4 , }{\f6\fs20 final}{\f4  or }{\f6\fs20 release}{\f4 .\par \par }{\f6\fs20 release}{\f4 \tab This is the non-final release number, generally used during the testing cycle.\par \par }{\f6\fs20 region}{\f4 \tab This is the region code, indicating what country or population group the program is intended for.  The current regions are:\par \par }\pard \fi1440\li720\widctlpar\tx2160\tx4500\tx6840\adjustright {\f6\fs20 verUS\tab verFrance\tab verBritain\tab verGermany\tab verItaly\tab verNetherlands\tab verBelgiumLux\tab verFrBelgiumLux\tab verSweden\tab verSpain\tab verDenmark\tab verPortugal\tab verFrCanada\tab verNorway\tab verIsrael\tab verJapan\tab verAustralia\tab verArabia\tab verArabic\tab verFinland\tab verFrSwiss\tab verGrSwiss\tab verGreece\tab verIceland\tab verMalta\tab verCyprus\tab verTurkey\tab verYugoslavia\tab verYugoCroatian\tab verIndia\tab verIndiaHindi\tab verPakistan\tab verLithuania\tab verPoland\tab verHungary\tab verEstonia\tab verLatvia\tab verLapland\tab verFaeroeIsl\tab verIran\tab verRussia\tab verIreland\tab verKorea\tab verChina\tab verTaiwan\tab verThailand\par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f4 \par }{\f6\fs20 string1}{\f4 \tab Name of the product.  This string may be empty.  It is displayed by the Finder when the user asks for information about the icon.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 string2}{\f4 \tab Additional information about the product, generally copyright information.  This string may be empty.  It is displayed by the Finder when the user asks for information about the icon.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rWindColor}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rWindColor\tcl2}}}{\b\f4\fs28 \tab $8010\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 windows\:color}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindColor resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This resource defines a color table for a window.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindColor (id) \{\par    frameColor,\par    titleColor,\par    tBarColor,\par    growColor,\par    infoColor,\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1440\li1800\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the color table.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par See \ldblquote Window Color Tables\rdblquote  in Appendix A for details about the color table entries.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright {\b\f4\fs28 rWindParam1}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \tqr\tx9360\adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 rWindParam1\tcl2}}}{\b\f4\fs28 \tab $800E\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 rWindParam1 resource\bxe }}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 This resource is used to create a window.\par \par }\pard \li180\keepn\widctlpar\adjustright {\f6\fs20 resource rWindParam1 (id) \{\par    wFrameBits,\par    wTitle,\par    wRefCon,\par    wZoom,\par    wColor,\par    \{wXOrigin,wYOrigin\},\par    \{wDataH,wDataW\},\par    \{wMaxH,wMaxW\},\par    \{wScrollHor,wScrollVer\},\par    \{wPageHor,wPageVer\},\par    wInfoRefCon,\par    wInfoHeight,\par    wPosition,\par    wPlane,\par    wControlList,\par    wInDesc\par }\pard \li180\widctlpar\adjustright {\f6\fs20    \};\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-1620\li1980\widctlpar\adjustright {\f6\fs20 id}{\f4 \tab This is the resource ID for the resource.\par \par }{\f6\fs20 wControlList}{\f4 \tab This is a reference to the control or list of controls defined for this window, as determined by bits 7-0 of }{\f6\fs20 wInDesc}{\f4 .\par \par }{\f6\fs20 wInDesc}{\f4 \tab This is a flags word, defined as follows:\par \par }\pard \qj\fi-1080\li3420\widctlpar\adjustright {\f4 bits 15-12\tab Reserved; set to 0.\par bits 11-10\tab Defines the kind of reference in the }{\f6\fs20 wColor}{\f4  field:\par }\pard \qj\fi-360\li4140\widctlpar\adjustright {\f4 00\tab The reference is a pointer.\par 01\tab The reference is a handle.\par 10\tab The reference is a resource ID for an }{\f6\fs20 rWindColor}{\f4  resource.\par }\pard \qj\fi-1080\li3420\widctlpar\adjustright {\f4 bits 9-8\tab Defines the kind of reference in the }{\f6\fs20 wTitle}{\f4  field:\par }\pard \qj\fi-360\li4140\widctlpar\adjustright {\f4 00\tab The reference is a pointer.\par 01\tab The reference is a handle.\par 10\tab The reference is a resource ID for an }{\f6\fs20 rPString}{\f4  resource.\par }\pard \qj\fi-1080\li3420\widctlpar\adjustright {\f4 bits 7-0\tab Defines the kind of reference in the }{\f6\fs20 wControlList}{\f4  field.  There are several possibilities; the ones that are used most commonly, and that apply to this course, are:\par }\pard \qj\fi-360\li4140\widctlpar\adjustright {\f4 0\tab The reference is a pointer to a single control template.  (This is set to }{\f6\fs20 NULL}{\f4  in a resource, indicating that there are no controls in the window.)\par 2\tab The reference is a resource ID for an }{\f6\fs20 rControlTemplate}{\f4  resource.\par 9\tab The reference is a resource ID for an }{\f6\fs20 rControlList}{\f4  resource.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par See \ldblquote Window Parameters\rdblquote  in Appendix A for details about the remaining fields in this resource.\par \par }\pard \qj\widctlpar\adjustright {\b\f4\fs36 \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Appendix C \endash  Where to Go for More Information}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Appendix C \endash  Where to Go for More Information}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Appendix C \endash  Where to Go for More Information\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you think anyone sits down with a book or two and learns all there is to know about programming, or that experienced programmers never get stuck, think again.  You never learn it all.  You never get to the point where you can write anything without talking to someone else.\par This appendix gives you a few idea about where to get more information and where to go to find kindred spirits to talk about programming or get help with tough programming problems.\par All of this information is subject to change.  If I\rquote d written this appendix a year ago, a lot of the information you see here would be incorrect by now.  If you are reading this appendix a year after I write it, some of the information will no doubt have changed, especially things like where to get technical notes and what online services are good.  Use this appendix as a starting place and an idea center, not as the final word on where to go for information.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Apple II}{\b\f4 GS}{\b\f4\fs28  Toolbox Reference Manuals}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Apple II}{\b\v\f4 GS}{\b\v\f4\fs28  Toolbox Reference Manuals\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 1\par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1988, $26.95\par }\pard \qj\widctlpar\adjustright {\f4 741 pages, table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 2\par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1988, $26.95\par }\pard \qj\widctlpar\adjustright {\f4 686 pages, index (includes Volume 1), table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3\par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1990, $39.95\par }\pard \qj\widctlpar\adjustright {\f4 1032 pages, index, table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Volumes 1 and 2 of the toolbox reference manuals are the original, official technical description of the Apple II}{\f4\fs20 GS}{\f4  toolbox for programmers.  Volume 3 is an update to the first two volumes, adding information about new tools, new tool calls in old tools, and clarifying and correcting the first two volumes.\par These books were written by Apple\rquote s staff, drawing on technical notes written by the programmers who designed and implemented the toolbox.  These books contain a tool by tool, call by call breakdown of the toolbox, along with supplementary information that gives you overviews, background, and programming tips for the toolbox.  These three volumes are three of the five books you absolutely must buy if you intend to go beyond this course.\par A lot of folks have complained bitterly about the toolbox reference manuals because they don\rquote t teach you to use the toolbox.  Their criticism is correct, but beside the point.  Complaining because these books don\rquote t teach you to write toolbox programs is like a prospective novelist complaining because the Oxford English Dictionary doesn\rquote t teach you to write good prose.  So?  The Oxford English Dictionary is a reference for the words in the English language, not a how-to book about writing.  The Apple II}{\f4\fs20 GS}{\f4  toolbox reference manuals are a complete reference to the toolbox.  Just as a writer needs a dictionary, a toolbox programmer needs these three books.  They don\rquote t teach you how to write toolbox programs (hopefully this book did!), but they are an essential reference for anyone trying to write their own toolbox programs.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Programmer\rquote s Reference for System 6.0}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Programmer\rquote s Reference for System 6.0\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Programmer\rquote s Reference for System 6.0\par }{\f4 Byte Works, Inc.\par 1992; $45.00\par }\pard \qj\widctlpar\adjustright {\f4 468 pages, index, table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The three volumes of the Apple II}{\f4\fs20 GS}{\f4  toolbox reference manual suite covers the Apple II}{\f4\fs20 GS}{\f4  operating system as of System Disk 5.0.  }{\i\f4 Programmer\rquote s Reference for System 6.0}{\f4  picks up where }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference: Volume 3}{\f4  and }{\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  GS/OS Reference}{\f4  leave off.  It documents the new tools and new tool calls added to the toolbox between the release of System Disk 5.0 and System Disk 6.0, as well as the changes to GS/OS.  You can also find details about Finder 6.0, especially how you write applications that work smoothly with the Finder.\par Like the toolbox reference manuals, this book was developed from the technical documentation written by Apple\rquote s programmers.  It was also reviewed by Apple\rquote s programming and technical support staff.\par This is the fourth of the five essential books for anyone writing desktop programs for the Apple II}{\f4\fs20 GS}{\f4 .\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 GS/OS Technical Reference Manual}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 GS/OS Technical Reference Manual\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Toolbox Reference\par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1990; $28.95\par }\pard \qj\widctlpar\adjustright {\f4 487 pages, index, table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This book is the technical description of the Apple II}{\f4\fs20 GS}{\f4  disk operating system.  It includes all of the GS/OS calls that let you manipulate disk files, as well as information about the System Loader and several major drivers and FSTs.\par This is the fifth of the five essential books for Apple II}{\f4\fs20 GS}{\f4  desktop programming.\par There is a second volume to this book.  The second volume was never released in a bound form, since it is intended for a very small set of programmers who want to add new drivers to the GS/OS operating system.  Volume 2 is available through Resource Central. Resource Central and their relationship to the Apple II Programming Community is discussed a little later in this appendix.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Programmer\rquote s Introduction to the Apple II}{\b\f4 GS}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Programmer\rquote s Introduction to the Apple II}{\b\v\f4 GS}{\b\v\f4\fs28 \tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Programmer\rquote s Introduction to the Apple II}{\i\f4\fs20 GS}{\i\f4 \par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1988; $32.95\par }\pard \qj\widctlpar\adjustright {\f4 477 pages, index, table of contents, disk\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This book is a little dated, but still has some good information.  It\rquote s an introduction to toolbox programming written by Apple\rquote s engineers very shortly after the Apple II}{\f4\fs20 GS}{\f4  was released.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Firmware Reference Manual}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Firmware Reference Manual\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Firmware Reference\par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1987; $24.95\par }\pard \qj\widctlpar\adjustright {\f4 320 pages, index, table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This is the technical reference for the low-level software and soft switches.  It includes information about the monitor firmware, video firmware, serial port firmware, smartport firmware, interrupt handling, the keyboard microcontroller, the mouse, firmware entry points, a memory map, and softswitch locations.\par You may never need this book.  It\rquote s intended for people who are writing very low-level software or those creating new hardware for the Apple II}{\f4\fs20 GS}{\f4 .  You also need assembly language to make effective use of most of the information you\rquote ll find in this book.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Hardware Reference Manual}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Hardware Reference Manual\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Apple II}{\i\f4\fs20 GS}{\i\f4  Hardware Reference, Second Edition\par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1989; $26.95\par }\pard \qj\widctlpar\adjustright {\f4 296 pages, index, table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par This is the hardware reference for the Apple II}{\f4\fs20 GS}{\f4  computer.  The main audience is folks who are making cards for the computer, although there is some information about the hardware that is useful for some kinds of low-level assembly language programming.  You\rquote ll find detailed information about the video displays, memory, the Ensoniq sound chip and supporting firmware, and the various input and output mechanisms.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Apple Human Interface Guidelines}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Apple Human Interface Guidelines\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\i\f4 Human Interface Guidelines: The Apple Desktop Interface\par }{\f4 Addison-Wesley Publishing Company, Inc.\par 1987; $14.95\par }\pard \qj\widctlpar\adjustright {\f4 136 pages, index, table of contents\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par I almost put this book on the list of books you absolutely must have to write desktop programs, but technically you don\rquote t have to have it.  Still, I highly, highly recommend it.\par Knowing how to write a desktop program is a little like knowing how to use a hammer and saw \endash  useful, but far from adequate.  Besides knowing how to write desktop programs, you should also know how people use them.  This book deals with that sort of issue.  It talks about things like where to put buttons in dialogs, what should appear in a file menu, how to use color effectively to add to a program rather than distract the user, and so forth.  You\rquote ll learn a lot about the computer, not just as a programmer, but also as a user and designer.\par I recommend that you read this book cover to cover at least twice: once before you start to design your first desktop program, and once more about a year later.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Technical Notes}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Technical Notes\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Apple publishes a group of information under the combined title of technical notes.  Technical notes contain a lot of stuff; here\rquote s a sampling of the major kinds of information you\rquote ll find:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \bullet \tab Detailed information about tricky software and hardware issues, telling you how to get things done when it isn\rquote t obvious.\par \par \bullet \tab Lists of the various things Apple keeps track of and assigns, like message center numbers, file types, and language numbers.\par \par \bullet \tab Corrections to the Apple books listed in this appendix.\par \par \bullet \tab Information about known bugs and changes in the operating system.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par The technical notes are available in two forms, and are updated as needed \endash  sometimes after just a few months.  You can get the updates on disk, in either ASCII files for the Apple II}{\f4\fs20 GS}{\f4  or as formatted files (generally using some Macintosh word processor).  You can find the disks on major online services, in most user group libraries, or on Apple\rquote s developer CD ROM disks.  Printed versions are also available.  The printed technical notes are available from Resource Central.\par If you are programming professionally, or you consider yourself an advanced programmer, you should get the full set of technical notes and keep them up to date.  Since the technical notes are readily available on disk, I\rquote d suggest that everyone should pick up at least the disk based version.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Resource Central}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Resource Central\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 Resource Central\par P.O. Box 11250\par Overland Park, KS  66207\par Phone:  (913) 469-6502\par Fax:  (913) 469-6507\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 The only way I can think of to describe Resource Central in a nutshell is as a worldwide Apple II advocate.  Resource Central is certainly a business, but they\rquote re more than that, too.  Resource Central publishes a number of newsletters concerning the Apple II, some on paper and some on disk.  They manage at least one of the Apple II areas for an online service (GEnie).  They have taken over as the sole source for a great deal of the technical information Apple creates for programmers and hardware engineers for the Apple II \endash  information that isn\rquote t needed by enough people to go into a commercial book, like the toolbox reference manuals, but is still needed by some.  Resource Central also holds the biggest and best conference for Apple II programmers.  It\rquote s held in Kansas in July, but hey, it\rquote s held.  Finally, they are an active and reputable discount mail-order distributor with the largest selection of products for the programmer I know of.  (They don\rquote t limit themselves to programming products, but that\rquote s what we\rquote re discussing here.)  If you\rquote re serious about the Apple II, I\rquote d highly recommend investing in a phone call to get their latest list of products and services.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Apple Sponsored Developer Programs and Licensing}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Apple Sponsored Developer Programs and Licensing\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 Apple Computer, Inc.\par Apple Developer Programs\par 20525 Marriani Ave., M/S 75-2C\par Cupertino, CA  95014-9968\par Phone:  (408) 996-1010\par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Apple has several programs for people who develop for Apple computers.  Currently there are two categories, known as the Associates Program and the Partners Program.  The Associates program is open to just about anyone, and costs $350 per year for the Macintosh and $150 for the Apple II.  The Partners Program is open by application only, and you get to pay more if you\rquote re accepted.  The difference is that you get a direct line to Apple\rquote s technical support staff via AppleLink, where you can ask all sorts of questions and get real responses from someone who knows what they are talking about.\par You can also license a lot of software from Apple \endash  anything from the System Disk, so people can boot your program; through the Rez compiler, which we licensed for this course.\par If you are developing commercial software for the Apple II, get in touch with Apple for the latest information about their developer programs and licensing.  Maybe it\rquote s something you need, and maybe not, but it\rquote s worth getting the details.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Online Services}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Online Services\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Sometimes you just need to talk to another programmer, either to get help or just to chat with a person who shares your interest.  You may also want to swap programs, source code, rumors, or wild stories about midnight entomology.  On the other hand, there aren\rquote t likely to be too many Apple II}{\f4\fs20 GS}{\f4  toolbox programmers living next door.  That\rquote s where the online services come in.  You can join chat sessions with other programmers, post source code for someone to help with a bug, ask questions, or search online libraries for sample code and utilities.  Frankly, I think access to at least one major online service is essential for any programmer.\par You will need a modem to get on any of these services, but that\rquote s about it.  AppleLink and America Online will even send you the software you need, although AppleLink only runs on a Macintosh.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 AppleLink}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 AppleLink\tcl3}}}{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par Apple Computer, Inc.\par AppleLink MS 41-H\par 20300 Stevens Creek Blvd. Ste 245\par Cupertino, CA  95014\par \par }\pard \qj\widctlpar\adjustright {\f4 $7 start up fee.  $12 per month minimum charge.  AppleLink charges by the amount of information you transfer, not by the time you spend online.  The charge is $0.055 per kilo-character during prime time (6AM to 6PM Pacific Standard Time) and $0.045 per kilo-character during non-prime time.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 America Online}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 America Online\tcl3}}}{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par America Online\par 8619 Westwood Center Dr.\par Vienna, VA  22182\par (703) 448-8700\par \par }\pard \qj\widctlpar\adjustright {\f4 $5.95 month minimum charge, which can be applied toward 1 free non-prime time hour.  $10 per hour prime time (6AM to 6PM, Monday to Friday), $5 per hour during non-prime time.  Call for a free startup kit, which includes all the software you need.  You can contact the Byte Works on America Online by using keyword ByteWorks, or use keyword ADV to get to the Apple Developer group, which is an active group of Apple II programmers.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 CompuServe}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 CompuServe\tcl3}}}{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par CompuServe\par 5000 Arlington Center Blvd.\par Columbus, OH  43220\par \par }\pard \qj\widctlpar\adjustright {\f4 $7.95 month minimum charge, which gives unlimited access to a selection of services.  For the paid areas, the charge is $6.30 at 300 baud, and $12.84 at 1200 baud or 2400 baud.  Faster connections are available; call for prices.  CompuServe has an active Apple II area.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright {\b\f4 GEnie}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw15 \adjustright \b\v\f4\cgrid {\tc {\b\v\f4 GEnie\tcl3}}}{\f4 \par }\pard \qj\keepn\widctlpar\adjustright {\f4 \par GTE Information Services\par 401 N. Washington Street\par Rockville, MD  20850\par (800) 638-9636\par \par }\pard \qj\widctlpar\adjustright {\f4 $4.95 month minimum charge, which gives unlimited access to a selection of services.  The Apple II programming area is not in the free area.  For the paid areas, the charge is $18 per hour prime time (8AM to 6PM, your local time, Monday to Friday), $6 per hour during non-prime time.  The Byte Works monitors the A2Pro area, where you will find an active group of Apple II programmers.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 User\rquote s Groups}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 User\rquote s Groups\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you live in a city large enough to have a stoplight, you probably live close to a user\rquote s group of some sort.  If your city is large enough, you may even meet some other Apple II}{\f4\fs20 GS}{\f4  toolbox programmers.\par User\rquote s groups are a great place to meet other programmers.  Many also have software libraries which include source code, Apple\rquote s system software, and the disk form of the technical notes.\par Apple Computer keeps a list of all of the Apple user\rquote s groups.  Call (800) 538-9696, extension 500 for information about your closest Apple user\rquote s group.  Call (408) 996-1010 (Apple\rquote s main number) and ask for \ldblquote Apple User\rquote s Group Connection Hotline\rdblquote  for more detailed information about user\rquote s groups.  You might also check with local computer stores or universities for non-Apple groups of programmers.\par \sect }\sectd \sbkodd\linex0\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Appendix D \endash  Tips for ORCA/C}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\keepn\widctlpar\adjustright \f12\cgrid {\b\f4\fs36 Appendix D \endash  Tips for ORCA/C}{\pard\plain \qj\keepn\widctlpar\adjustright \b\v\f4\fs36\cgrid {\tc {\b\v\f4\fs36 }{\b\v\f4\fs36 Appendix D \endash  Tips for ORCA/C\tcl1}}}{\b\f4\fs36 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 MoreRecent}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 MoreRecent\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 MoreRecent utility}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once you start using resources, your programs will consist of at least two source files: the C program and the resource description file.  The easiest way to deal with programs that use more than one separately compiled file is to create a script.  The course discuses this at the proper time, showing you how to write a simple script that will compile only those parts of your program that need to be compiled.  To do that with shells prior to the 2.0 version of the ORCA shell, you need the }{\f6\fs20 MoreRecent}{\f4  utility.\par }{\f6\fs20 MoreRecent}{\f4  is on the solution disk, stuffed inside the folder for Lesson 3.  To install }{\f6\fs20 MoreRecent}{\f4 , copy the files from the utilities folder in the Lesson.3 folder into the utilities folder for your ORCA/C system.  If you aren\rquote t sure where the ORCA/C utilities folder is, use the }{\f6\fs20 SHOW PREFIX}{\f4  command from the shell or shell window \endash  prefix 6 is the utility prefix.  Next, edit your SYSCMND file, which you will find in your ORCA/C system folder (that\rquote s prefix 2), and add the line\par \par }{\f6\fs20 MORERECENT    U\par }{\f4 \par }\pard \qj\widctlpar\adjustright {\f4 You can actually find this line in a file in the System folder in the Lesson.3 folder.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 Once you save the modified SYSCMND file, reboot.  If you\rquote ve done everything correctly, when you type }{\f6\fs20 HELP}{\f4  from the shell or shell window, }{\f6\fs20 MORERECENT}{\f4  will be listed as a command.  Typing }{\f6\fs20 HELP MORERECENT}{\f4  will print a help file showing how the command is used.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Installing Rez}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Installing Rez\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 Rez}}}{\pard\plain \qj\fi360\keepn\widctlpar\adjustright \v\f4\cgrid {\xe {\v\f4 }{\v\f4 resource compiler}}}{\v\f4 \par }{\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 If you don\rquote t already have Rez installed in your ORCA/C system, you will need to install it from the solution disks before you can work most of the problems in this course.  If you are using floppy disks, be sure and read the next section before you try this installation.\par The resource compiler is located on your solution disks in a folder called Rez.  In that folder, you\rquote ll find the following files:\par \par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f4 Languages/Rez\tab This is the resource compiler itself.  It should be copied to your ORCA/C languages folder.  That\rquote s the folder where the C compiler is located.  Unless you\rquote ve changed the name, the languages folder is called LANGUAGES.\par \par Libraries/RInclude\tab This is a folder containing interface files for the resource compiler.  Copy the folder and all of the files inside of the folder into the ORCA/C libraries folder.  That\rquote s the same folder that has the ORCALIB and SYSLIB libraries, as well as the ORCACDefs folder.  Unless you\rquote ve changed the name, the libraries folder is called LIBRARIES.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par }\pard \qj\fi-2160\li2520\widctlpar\adjustright {\f4 SysCMND\tab This is a text file containing a line that needs to be copied into the SYSCMND file in your ORCA/C system folder.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par Once you copy all of these files into the proper spot and reboot, you should see REZ listed as a language when you use the }{\f6\fs20 SHOW LANGUAGES}{\f4  command from either the shell or PRIZM\rquote s shell window.\par \par \par }\pard \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright {\b\f4\fs28 Using Small Systems}{\pard\plain \qj\keepn\widctlpar\brdrt\brdrs\brdrw30 \adjustright \b\v\f4\fs28\cgrid {\tc {\b\v\f4\fs28 }{\b\v\f4\fs28 Using Small Systems\tcl2}}}{\b\f4\fs28 \par }\pard \qj\fi360\keepn\widctlpar\adjustright {\f4 \par }\pard \qj\fi360\widctlpar\adjustright {\f4 Back when we released our first development system for the Apple II}{\f4\fs20 GS}{\f4 , you had to have at least 512K.  It didn\rquote t even take a 3.5" floppy, since we made the system available on 5.25" disks.  Somehow this seems sort of quaint, now.  Using the latest version of Apple\rquote s system disk, you have to have 1.25M just to run the Finder.\par The smallest possible system you can use to work through this course is a 1.25M Apple II}{\f4\fs20 GS}{\f4  (1.125M for ROM 03) with two 3.5" disk drives or one 3.5" disk drive and a hard drive.  Frankly, you\rquote re going to have a lot of trouble if you don\rquote t have at least 1.75M of memory and a hard disk.  And, unless you have 2M of memory, you must stick with the text-based development environment \endash  the PRIZM desktop development system can\rquote t be used with C and Rez on a smaller system.  To top it all off, even a 1.75M system will be too small to compile a few of the larger samples, like the ones that use TextEdit, unless you split the solution into more than one source file.\par If you have a hard disk, your only real concern is how much memory you have available.  With less than 2M, you can\rquote t use Rez, C and PRIZM together, so you need to set up a text system.  If you aren\rquote t sure how to do that, the ORCA/C disks come with an installer script that will set up a text system for you.\par If you are using two 800K 3.5" floppy disk drives, you will need to set the system up a little differently than the way it is shipped.  Start by making a copy of the ORCA.C disk (the program disk), and then initialize a second disk, calling it ORCA.LANGUAGES.  With these two disks, follow these steps:\par \par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 1.\tab Move the LANGUAGES folder and all of the files inside the languages folder from the ORCA.C disk to the ORCA.LANGUAGES disk.\par \par 2.\tab Install the resource compiler following the steps in the previous section, but keep in mind that the ORCA languages folder is now on the ORCA.LANGUAGES floppy disk.\par \par 3.\tab Edit the file /ORCA.C/SYSTEM/LOGIN.  You can use the ORCA editor to edit the file.  Delete all of the lines that you see in this file.  If you will be using the text development system, type this line:\par \par }\pard \qj\li900\widctlpar\adjustright {\f6\fs20 PREFIX 5 /ORCA.LANGUAGES/LANGUAGES\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par \tab If you will be using PRIZM, type these lines:\par \par }\pard \qj\li900\widctlpar\adjustright {\f6\fs20 PREFIX 5 /ORCA.LANGUAGES/LANGUAGES\par PRIZM\par QUIT\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par 4.\tab If you have decided to use the text development system, copy the following files from the /CC.EXTRAS/SYSTEM folder to the /ORCA.C/SYSTEM folder:\par \par }\pard \qj\li1080\widctlpar\tx2520\tx3960\adjustright {\f4 EDITOR\tab SYSHELP\tab SYSEMAC\par }\pard \qj\fi-360\li720\widctlpar\adjustright {\f4 \par \tab You can delete /ORCA.C/UTILITIES/PRIZM, but there is room enough to leave this file on the disk if you want the option of using the PRIZM editor, too.\par }\pard \qj\fi360\widctlpar\adjustright {\f4 \par If you are using two 800K floppy disk drives, you probably don\rquote t have another disk to use for your programs, and both of the disks you just created must remain in a drive while you program.  I\rquote d suggest putting your programs on the /ORCA.LANGUAGES disk.  Of course, they won\rquote t all fit, but you can create multiple copies of the /ORCA.LANGUAGES disk.\par \sect }\sectd \sbkodd\linex0\cols2\colsx360\endnhere\titlepg\sectdefaultcl {\headerr \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Index}{\par }}{\footerl \pard\plain \s20\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\footerr \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}{\headerf \pard\plain \s21\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 Index}{\par }}{\footerf \pard\plain \s20\qr\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \f12\cgrid {\f5 \chpgn \par }}\pard\plain \qj\widctlpar\tx1080\adjustright \f12\cgrid {\pard\plain \qj\widctlpar\tx1080\adjustright \v\f4\cgrid {\tc {\v\f4 }{\v\f4 Index\tcl1}}}{\v\f4 \par }\pard\plain \s19\keepn\widctlpar\adjustright \f12\cgrid {\field{\*\fldinst {\b\f4  INDEX  }}{\fldrslt {\b\f4 numbers\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 320 mode 165, 166, 168\par 320 mode colors 167\par 640 mode 165, 168, 169, 171\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 A\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 about box 72\par About command 72\par ACE Tool Set 302\par }{\f6\fs20 AddResource}{\f4  308, }{\b\f4 391}{\f4 \par alert frame 105\par alert icons 414\par alert strings 73, 79-85, }{\b\f4 413}{\f4 , 435\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 buttons 82\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 alerts 71-86\par }{\f6\fs20 AlertWindow}{\f4  72, }{\b\f4 412}{\f4 , 435\par }{\f6\fs20 AllNotesOff}{\f4  300, }{\b\f4 366}{\f4 \par }{\f6\fs20 AllocGen}{\f4  300, }{\b\f4 366}{\f4 \par apple key 9\par apple menu }{\b\f4 36}{\f4 , 336, 362, 441\par arcs 178, 376, 377, 378, 380, 382\par ascent line 188, 189\par ASIF files 293\par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f4 auxiliary file type 120, 121-122, 135, 343, 346, 349\par }\pard \s19\widctlpar\adjustright {\f6\fs20 awCString}{\f4  424\par }{\f6\fs20 awPointer}{\f4  424\par }{\f6\fs20 awResource}{\f4  424\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 B\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 backup copies 2\par bad blocks 2\par base fonts 197\par base line 188, 189\par }{\f6\fs20 BeginUpdate}{\f4  99, }{\b\f4 415}{\f4 \par bit 155\par bold 40, 195\par bounds rectangle 374\par }{\f6\fs20 BringToFront}{\f4  280, }{\b\f4 415}{\f4 \par button 339\par button control 229-232\par byte 155\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 C\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 C 2\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 compiler 3\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 c-strings 439\par cache 350\par CAD 3\par caution alert 80\par character origin 188\par character width 189\par }{\f6\fs20 CharBounds}{\f4  192, }{\b\f4 374}{\f4 \par }{\f6\fs20 CharWidth}{\f4  192, }{\b\f4 374}{\f4 \par check box control 238-240, 334, 335\par }\pard\plain \s18\widctlpar\adjustright \f12\cgrid {\f4 check mark: see menus\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 CheckMenu}{\f4  211\par }{\f6\fs20 CheckMItem}{\f4  43, }{\b\f4 359}{\f4 \par }{\f6\fs20 ChooseFont}{\f4  197, }{\b\f4 340}{\f4 \par choosing fonts 197\par Clear command 260\par clip region 184\par }{\f6\fs20 ClipRect}{\f4  184, }{\b\f4 374}{\f4 \par clock 329\par close box 87, 105, 408\par Close command 90\par }{\f6\fs20 CloseGS}{\f4  130, 132, 134, }{\b\f4 344}{\f4 \par }{\f6\fs20 ClosePoly}{\f4  179, }{\b\f4 374}{\f4 , 382\par }{\f6\fs20 CloseResourceFile}{\f4  308, }{\b\f4 391}{\f4 \par }{\f6\fs20 CloseResourceFork}{\f4  325\par }{\f6\fs20 CloseWindow}{\f4  90, }{\b\f4 415}{\f4 \par color replace highlighting 37\par color tables 166, 168, 169, 379, 385\par colored controls 232\par colors 166, 167\par }{\f6\fs20 ColorTable}{\f4  390\par }{\f6\fs20 ColorTablePtr}{\f4  390\par content region 88\par control ID 230\par control key 9\par Control Manager 333\par controls 201, 225-273\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 colors 232\par default 230\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 coordinates 100-102\par Copy command 260\par copyright 72\par }{\f6\fs20 CountFonts}{\f4  198, }{\b\f4 341}{\f4 \par }{\f6\fs20 CreateGS}{\f4  134, 135, }{\b\f4 345}{\f4 \par creation time 349\par }{\f6\fs20 CStringBounds}{\f4  192, }{\b\f4 374}{\f4 \par }{\f6\fs20 CStringWidth}{\f4  192, }{\b\f4 375}{\f4 \par cursor 15\par Cut command 260\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 D\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 data fork 135, 346, 349\par databank pragma 99, 420\par debugger 11, 28\par decibels 299, 367\par default control 230\par DeRez 67\par descent line 188, 189\par Design Master 3, 67\par desk accessories 321-331\par Desk Manager 22, 336\par }{\f6\fs20 DeskShutDown}{\f4  322\par }{\f6\fs20 DeskStartup}{\f4  322\par desktop file 315\par }{\f6\fs20 DestroyGS}{\f4  134, 135, }{\b\f4 347}{\f4 \par dialogs 71, 275-281\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 modal 275, 276, 280\par modeless 275, 276, 280-281\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 digitized sound 286-291\par dimmed menus 146\par directories 135\par }{\f6\fs20 DisableMItem}{\f4  42, }{\b\f4 359}{\f4 \par disk space 349\par }{\f6\fs20 DisposeHandle}{\f4  122, }{\b\f4 355}{\f4 \par dithering 169-171\par documents 91\par }{\f6\fs20 DoModalWindow}{\f4  277-280, }{\b\f4 416}{\f4 \par }{\f6\fs20 DrawChar}{\f4  190, }{\b\f4 375}{\f4 \par }{\f6\fs20 DrawControls}{\f4  104, 208, }{\b\f4 333}{\f4 \par }{\f6\fs20 DrawCString}{\f4  190, }{\b\f4 375}{\f4 \par }{\f6\fs20 DrawMember2}{\f4  }{\b\f4 354}{\f4 \par }{\f6\fs20 DrawMenuBar}{\f4  24, }{\b\f4 359}{\f4 \par }{\f6\fs20 DrawPicture}{\f4  223, }{\b\f4 390}{\f4 \par }{\f6\fs20 DrawString}{\f4  190, }{\b\f4 375}{\f4 \par }{\f6\fs20 DrawText}{\f4  190, }{\b\f4 376}{\f4 \par dynamic memory 22\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 E\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 ellipsis 128\par }{\f6\fs20 EnableMItem}{\f4  42, }{\b\f4 359}{\f4 \par enddesk 6, 7\par }{\f6\fs20 EndUpdate}{\f4  99, }{\b\f4 417}{\f4 \par Ensoniq chip 286\par }{\f6\fs20 Envelope}{\f4  368\par EOF 349\par }{\f6\fs20 EraseArc}{\f4  178, }{\b\f4 376}{\f4 \par }{\f6\fs20 EraseOval}{\f4  177, }{\b\f4 376}{\f4 \par }{\f6\fs20 ErasePoly}{\f4  179, }{\b\f4 376}{\f4 \par }{\f6\fs20 EraseRect}{\f4  176, }{\b\f4 376}{\f4 \par }{\f6\fs20 EraseRRect}{\f4  179, }{\b\f4 377}{\f4 \par errors 425\par event loop 5, 6-7, 33-36\par Event Manager 7, 336\par event record 7, 25, 34, 337\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 message 8, 13\par modifiers 9, 13\par what 8\par when 8\par where 9\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 EventRecord}{\f4  340\par events\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 activate 8\par application 8\par desk accessory 8\par keyboard 5, 8, 10, 13-15, 29\par mouse 5, 8, 15-17\par null 8\par switch 8\par update 8\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 everyEvent}{\f4  9\par extended file 346\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 F\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 FamNum2ItemID}{\f4  199, }{\b\f4 341}{\f4 \par }{\f6\fs20 FFSoundDoneStatus}{\f4  288, }{\b\f4 395}{\f4 \par }{\f6\fs20 FFStartSound}{\f4  286, }{\b\f4 395}{\f4 \par }{\f6\fs20 FFStopSound}{\f4  288, }{\b\f4 396}{\f4 \par file type 120, 121-122, 135, 343, 346, 349\par file type lists 121-122\par File Type Notes 343\par files 2, 214\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 locked 135\par reading 130-134\par writing 134-137\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 FillArc}{\f4  178, }{\b\f4 377}{\f4 \par }{\f6\fs20 FillOval}{\f4  177, }{\b\f4 377}{\f4 \par }{\f6\fs20 FillPoly}{\f4  179, }{\b\f4 377}{\f4 \par }{\f6\fs20 FillRect}{\f4  176, }{\b\f4 377}{\f4 \par }{\f6\fs20 FillRRect}{\f4  179, }{\b\f4 377}{\f4 \par Finder 307-320, 436, 438, 446\par Finder icons 311\par }{\f6\fs20 FindHandle}{\f4  325, }{\b\f4 356}{\f4 \par }{\f6\fs20 FindTargetCtl}{\f4  261, }{\b\f4 333}{\f4 \par }{\f6\fs20 FindWindow}{\f4  25, }{\b\f4 417}{\f4 \par }{\f6\fs20 FixAppleMenu}{\f4  38, }{\b\f4 336}{\f4 \par }{\f6\fs20 FixFontMenu}{\f4  198, 341, }{\b\f4 342}{\f4 \par }{\f6\fs20 FixMenuBar}{\f4  24, 341, }{\b\f4 360}{\f4 \par }{\f6\fs20 FMGetCurFID}{\f4  196, }{\b\f4 341}{\f4 \par font families 193-194\par Font Manager 340\par font menus 197-199\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 family 198-199\par size 197-198\par style 197\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 font rectangle 189\par font sizes 194-195\par font, standard 193\par font styles 195\par }{\f6\fs20 FontID}{\f4  343\par }{\f6\fs20 FontInfoRecord}{\f4  389\par }{\f6\fs20 FontInfoRecPtr}{\f4  389\par fonts 187-199, 212\par formatting disks 318\par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f4 Frame 58, 71, 72, }{\b\f4 73}{\f4 , 115, 125, 128, 142, 144\par }\pard \s19\widctlpar\adjustright {\f6\fs20 FrameArc}{\f4  178, }{\b\f4 378}{\f4 \par }{\f6\fs20 FrameOval}{\f4  177, }{\b\f4 378}{\f4 \par }{\f6\fs20 FramePoly}{\f4  179, }{\b\f4 378}{\f4 \par }{\f6\fs20 FrameRect}{\f4  176, }{\b\f4 378}{\f4 \par }{\f6\fs20 FrameRRect}{\f4  179, }{\b\f4 378}{\f4 \par }{\f6\fs20 FreeMem}{\f4  163, }{\b\f4 356}{\f4 \par }{\f6\fs20 FrontWindow}{\f4  90, }{\b\f4 418}{\f4 \par FST 346, 349\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 G\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 GetColorEntry}{\f4  }{\b\f4 379}{\f4 \par }{\f6\fs20 GetColorTable}{\f4  167, }{\b\f4 379}{\f4 \par }{\f6\fs20 GetContentOrigin}{\f4  104, }{\b\f4 418}{\f4 \par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f6\fs20 GetCtlHandleFromID}{\f4  216, 242, 250, 266, }{\b\f4 333}{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 GetCtlID}{\f4  243, }{\b\f4 334}{\f4 \par }{\f6\fs20 GetCtlParams}{\f4  243, }{\b\f4 334}{\f4 \par }{\f6\fs20 GetCtlValue}{\f4  272, }{\b\f4 334}{\f4 \par }{\f6\fs20 GetFontInfo}{\f4  189, }{\b\f4 379}{\f4 \par }{\f6\fs20 GetIndScrap}{\f4  222, 223, }{\b\f4 393}{\f4 \par }{\f6\fs20 GetLETextByID}{\f4  259, }{\b\f4 334}{\f4 \par }{\f6\fs20 GetMouse}{\f4  174, }{\b\f4 336}{\f4 \par }{\f6\fs20 GetNextEvent}{\f4  7, 9, 15, 18, 19, 33, }{\b\f4 337}{\f4 \par }{\f6\fs20 GetNextWindow}{\f4  281, }{\b\f4 418}{\f4 \par }{\f6\fs20 GetPort}{\f4  97, }{\b\f4 379}{\f4 \par }{\f6\fs20 GetPortRect}{\f4  97, }{\b\f4 379}{\f4 \par }{\f6\fs20 GetScrapHandle}{\f4  220, }{\b\f4 394}{\f4 \par }{\f6\fs20 GetScrapSize}{\f4  219, 221, }{\b\f4 394}{\f4 \par }{\f6\fs20 GetVisHandle}{\f4  183, }{\b\f4 380}{\f4 \par global coordinates 100-102\par }{\f6\fs20 GlobalToLocal}{\f4  102, 104, }{\b\f4 380}{\f4 \par }{\f6\fs20 GrafPort}{\f4  147, 185, 390\par }{\f6\fs20 GrafPortPtr}{\f4  390\par graphics 137\par green apple bug 37, 441\par grow box 106, 409\par grow box control 245-246\par }{\f6\fs20 GrowWindow}{\f4  106, 409\par GS/OS 130-139, 343\par GS/OS aware bits 318\par GS/OS errors 130, 425\par }{\f6\fs20 GSString255}{\f4  351\par }{\f6\fs20 GSString255Hndl}{\f4  351\par }{\f6\fs20 GSString255Ptr}{\f4  351\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 H\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 HandleDiskInsert}{\f4  318, }{\b\f4 419}{\f4 \par handles 156-160\par hard disk 3\par hardware requirements 2\par }\pard\plain \s18\widctlpar\adjustright \f12\cgrid {\f4 heartbeat: see tick count\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 HideWindow}{\f4  106, 409, }{\b\f4 419}{\f4 \par highlighting menus 26\par }{\f6\fs20 HiliteMenu}{\f4  26, }{\b\f4 360}{\f4 \par }{\f6\fs20 HLock}{\f4  122, 161, }{\b\f4 356}{\f4 \par human interface 146\par }{\f6\fs20 HUnlock}{\f4  122, }{\b\f4 356}{\f4 \par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 I\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 icon button control 250-256\par icon mask 253\par icons 80, 311, 315\par info bar 88, 107, 108, 409, 411\par }{\f6\fs20 InitCursor}{\f4  15, }{\b\f4 380}{\f4 \par initializing disks 318\par }{\f6\fs20 InsertMenu}{\f4  22, 24, }{\b\f4 360}{\f4 \par }{\f6\fs20 InstallFont}{\f4  196, }{\b\f4 342}{\f4 \par installing fonts 195\par }{\f6\fs20 Instrument}{\f4  368\par instruments 291-298\par interrupts 297\par }{\f6\fs20 InvalRect}{\f4  102, }{\b\f4 419}{\f4 \par }{\f6\fs20 InvertArc}{\f4  178, }{\b\f4 380}{\f4 \par }{\f6\fs20 InvertOval}{\f4  177, }{\b\f4 380}{\f4 \par }{\f6\fs20 InvertPoly}{\f4  179, }{\b\f4 381}{\f4 \par }{\f6\fs20 InvertRect}{\f4  176, }{\b\f4 381}{\f4 \par }{\f6\fs20 InvertRRect}{\f4  179, }{\b\f4 381}{\f4 \par italics 40, 195\par }{\f6\fs20 ItemID2FamNum}{\f4  198, }{\b\f4 342}{\f4 \par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 K\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 kerning 188\par key equivalents 53, 231, 443\par keyboard 9\par keyboard equivalent }{\b\f4 29}{\f4 -}{\b\f4 33}{\f4 , 360\par }{\f6\fs20 KillPoly}{\f4  180, }{\b\f4 381}{\f4 , 382\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 L\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 leading 189\par }{\f6\fs20 LECopy}{\f4  260, }{\b\f4 352}{\f4 \par }{\f6\fs20 LECut}{\f4  260, }{\b\f4 352}{\f4 \par }{\f6\fs20 LEDelete}{\f4  260, }{\b\f4 352}{\f4 \par }{\f6\fs20 LEFromScrap}{\f4  260, }{\b\f4 352}{\f4 \par }{\f6\fs20 LEPaste}{\f4  260, }{\b\f4 353}{\f4 \par }{\f6\fs20 LERecHndl}{\f4  353\par }{\f6\fs20 LEToScrap}{\f4  260, }{\b\f4 353}{\f4 \par }{\f6\fs20 LGetPathname2}{\f4  325, }{\b\f4 355}{\f4 \par line edit control 258-262, 334, 335, 352, 353\par LineEdit Tool Set 260, 351\par }{\f6\fs20 LineTo}{\f4  15, }{\b\f4 381}{\f4 , 382\par list controls 263-268, 353-355\par List Manager 353\par Loader 355\par loading fonts 195\par }{\f6\fs20 LoadResource}{\f4  84, 85, }{\b\f4 392}{\f4 , 393\par }{\f6\fs20 LoadScrap}{\f4  221, }{\b\f4 394}{\f4 \par local coordinates 100-102\par }{\f6\fs20 LocalToGlobal}{\f4  102, 104, }{\b\f4 381}{\f4 \par }{\f6\fs20 LocInfo}{\f4  138, 373, 389\par }{\f6\fs20 LocInfoPtr}{\f4  373, 389\par locked files 135\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 M\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 make 61\par }{\f6\fs20 Mask}{\f4  390\par master color value 166\par }{\f6\fs20 MaxBlock}{\f4  163, }{\b\f4 356}{\f4 \par memory 155\par Memory Manager 155-164, 355\par memory requirements 2\par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f4 menu bar 2, 21, 24, 48, 49, 58, 362, 363, 364, 442\par }\pard \s19\widctlpar\adjustright {\f4 menu caching 441\par menu control characters 23, 39, 362\par menu events 25-26\par menu ID 52\par menu item ID 53\par menu items 21, 23, 442\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 changing text 43, 364\par order 23\par separators 41, 362\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 Menu Manager }{\b\f4 21}{\f4 -}{\b\f4 46}{\f4 , 359\par menu options 39\par menu string 22, 23, 29, 39, 361, 362\par menu title 22, 23\par }{\f6\fs20 MenuBarRecHndl}{\f4  365\par }{\f6\fs20 MenuKey}{\f4  30, }{\b\f4 360}{\f4 \par }{\f6\fs20 MenuRecHndl}{\f4  365\par menus 21, 440\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 check mark 40\par checked 43, 359\par checking 53\par dimmed 42\par disabled 40, 42, 359\par events 361\par highlighting 26\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 MenuSelect}{\f4  25, }{\b\f4 361}{\f4 \par message 29\par message center 318, 320\par }{\f6\fs20 MessageCenter}{\f4  }{\b\f4 406}{\f4 \par }{\f6\fs20 MessageRec}{\f4  407\par MIDI 303\par modal dialogs 275, 276-280\par modeless dialogs 275, 276, 280-281\par }{\f6\fs20 modeXOR}{\f4  173\par modification time 349\par modifiers 29\par MoreRecent utility 455\par mouse 336, 339\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 button 9\par position 9\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 mouse down event 25\par }{\f6\fs20 MoveTo}{\f4  15, }{\b\f4 382}{\f4 \par multi-media 304\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 N\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 NDA 22, 33, 36, 38, 321-331, 336, 423\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 supporting 37-39\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 nda pragma 321\par networks 131\par New Desk Accessories 321-331\par }{\f6\fs20 NewHandle}{\f4  130, 160, }{\b\f4 357}{\f4 \par }{\f6\fs20 NewList2}{\f4  266, }{\b\f4 354}{\f4 \par }{\f6\fs20 NewMenu}{\f4  22, 23, 24, }{\b\f4 361}{\f4 \par }{\f6\fs20 NewMenuBar2}{\f4  58, }{\b\f4 362}{\f4 \par }{\f6\fs20 NewWindow}{\f4  113, 408, }{\b\f4 419}{\f4 \par }{\f6\fs20 NewWindow2}{\f4  99, 408, }{\b\f4 420}{\f4 \par nocrossbank 51, 54, }{\b\f4 435}{\f4 \par note alert 71, 80\par Note Sequencer 303\par Note Synthesizer 291-302, 366\par }{\f6\fs20 NoteOff}{\f4  }{\b\f4 367}{\f4 \par }{\f6\fs20 NoteOn}{\f4  301, }{\b\f4 367}{\f4 \par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 O\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 OffsetPoly}{\f4  180, }{\b\f4 382}{\f4 \par Open command 119-125\par open dialog 119-125\par }{\f6\fs20 OpenGS}{\f4  130, 134, 135, }{\b\f4 348}{\f4 \par }{\f6\fs20 OpenPoly}{\f4  179, }{\b\f4 382}{\f4 \par }{\f6\fs20 OpenResourceFile}{\f4  308, }{\b\f4 392}{\f4 \par }{\f6\fs20 OpenResourceFork}{\f4  325\par origin 105, 188\par outline 195\par ovals 177, 376, 377, 378, 380, 382\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 P\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 p-strings 444\par page gaps 152\par page setup 145\par page setup dialog 141\par }{\f6\fs20 PaintArc}{\f4  178, }{\b\f4 382}{\f4 \par }{\f6\fs20 PaintOval}{\f4  177, }{\b\f4 382}{\f4 \par }{\f6\fs20 PaintPoly}{\f4  179, }{\b\f4 383}{\f4 \par }{\f6\fs20 PaintRect}{\f4  15, 176, }{\b\f4 383}{\f4 \par }{\f6\fs20 PaintRRect}{\f4  179, }{\b\f4 383}{\f4 \par }{\f6\fs20 paramList}{\f4  record 408\par passwords 262\par Paste command 260\par path names 120, 122-125, 343\par }{\f6\fs20 Pattern}{\f4  390\par }{\f6\fs20 PatternPtr}{\f4  390\par pen color 15\par pen masks 175, 385\par pen modes 172, 385\par pen patterns 172, 386\par pen size 171, 386\par }{\f6\fs20 PenNormal}{\f4  15, 97, }{\b\f4 383}{\f4 \par picture controls 256-258, 444\par picture scraps 220\par pictures 137\par }{\f6\fs20 PointPtr}{\f4  389\par points 15, 389, 194\par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f4 polygons 179, 374, 376, 377, 378, 381, 382, 383\par }\pard \s19\widctlpar\adjustright {\f4 pop-up menu control 268-273\par }{\f6\fs20 PPToPort}{\f4  138, }{\b\f4 383}{\f4 \par }{\f6\fs20 PrCloseDoc}{\f4  147, 151, }{\b\f4 369}{\f4 \par }{\f6\fs20 PrClosePage}{\f4  147, 149, 150, }{\b\f4 369}{\f4 \par }{\f6\fs20 PrDefault}{\f4  144, }{\b\f4 369}{\f4 \par }{\f6\fs20 PrError}{\f4  147, }{\b\f4 369}{\f4 \par primary colors 166\par }{\f6\fs20 PrInfoRec}{\f4  372\par print dialog 145\par print job dialog 141\par print loop 147-151\par Print Manager 369\par print record 141, 144\par }\pard\plain \s18\widctlpar\adjustright \f12\cgrid {\f4 printer, choosing 141\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 printer page size 148\par }{\f6\fs20 printf}{\f4  13, 192\par printing 2, 141-153, 216, 318-320\par private scraps 220\par }{\f6\fs20 PrJobDialog}{\f4  146, }{\b\f4 370}{\f4 \par }{\f6\fs20 PrJobRec}{\f4  372\par ProDOS 346\par }{\f6\fs20 PrOpenDoc}{\f4  147, }{\b\f4 370}{\f4 \par }{\f6\fs20 PrOpenPage}{\f4  147, 149, }{\b\f4 370}{\f4 \par }{\f6\fs20 PrPicFile}{\f4  147, }{\b\f4 371}{\f4 \par }{\f6\fs20 PrRec}{\f4  372\par }{\f6\fs20 PrStatusRec}{\f4  373\par }{\f6\fs20 PrStlDialog}{\f4  145, }{\b\f4 371}{\f4 \par }{\f6\fs20 PrStyleRec}{\f4  372\par }{\f6\fs20 PrValidate}{\f4  145, }{\b\f4 371}{\f4 \par }{\f6\fs20 PtInRect}{\f4  19, }{\b\f4 384}{\f4 \par public scraps 220\par purgeable memory 162\par }{\f6\fs20 PutScrap}{\f4  219, 221, }{\b\f4 394}{\f4 \par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 Q\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 QuickDraw II 14, 373\par QuickDraw II Auxiliary 390\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 R\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 radio button control 236-238, 334, 335\par }{\f6\fs20 rAlertString}{\f4  resource 73, 413, }{\b\f4 435}{\f4 \par }{\f6\fs20 rBundle}{\f4  resource 311-315, }{\b\f4 436}{\f4 \par }{\f6\fs20 rComment}{\f4  resource 307-308, }{\b\f4 438}{\f4 \par }{\f6\fs20 rControlList}{\f4  resource 229, }{\b\f4 439}{\f4 \par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f6\fs20 rControlTemplate}{\f4  resource 202-208, 225-273, }{\b\f4 439}{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 rCString}{\f4  resource 83, 85, }{\b\f4 439}{\f4 \par }{\f6\fs20 ReadAsciiTime}{\f4  329, }{\b\f4 365}{\f4 \par }{\f6\fs20 ReadGS}{\f4  130, 132, }{\b\f4 350}{\f4 \par }{\f6\fs20 RealFreeMem}{\f4  163, }{\b\f4 358}{\f4 \par }{\f6\fs20 Rect}{\f4  389\par rectangle control 247-248\par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f4 rectangles 15, 176, 374, 376- 378, 381, 383\par }\pard \s19\widctlpar\adjustright {\f6\fs20 RectInRgn}{\f4  }{\b\f4 384}{\f4 \par }{\f6\fs20 RectPtr}{\f4  389\par }{\f6\fs20 refNum}{\f4  131\par }{\f6\fs20 Region}{\f4  389\par }{\f6\fs20 RegionHndl}{\f4  389\par }{\f6\fs20 RegionPtr}{\f4  389\par regions 181-185\par }{\f6\fs20 ReleaseResource}{\f4  84, 85, 392, }{\b\f4 393}{\f4 \par reply record 120, 122-125, 397\par requirements\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 disk drives 3\par hardware 2\par memory 2\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 resource attributes 435\par resource compiler 455\par resource description files 51, 64-66\par resource editors 67\par resource fork 135, 346, 349\par resource ID 52\par Resource Manager 391\par resources 47-69, 142\par }{\f6\fs20 ResultBuf255}{\f4  351\par }{\f6\fs20 ResultBuf255Hndl}{\f4  351\par }{\f6\fs20 ResultBuf255Ptr}{\f4  351\par Rez 455\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 compiler 51\par constants 54\par strings 81\par using 57, 61, 64\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 rIcon}{\f4  resource 251, 254, 255, }{\b\f4 440}{\f4 \par }{\f6\fs20 rMenu}{\f4  resource 49, 52, }{\b\f4 440}{\f4 , 442\par }{\f6\fs20 rMenuBar}{\f4  resource 49, 52, }{\b\f4 442}{\f4 \par }{\f6\fs20 rMenuItem}{\f4  resource 50, 53, 441, }{\b\f4 442}{\f4 \par rounded rectangles 179, 377, 378, 381, 383\par }{\f6\fs20 rPicture}{\f4  resource }{\b\f4 444}{\f4 \par }{\f6\fs20 rPString}{\f4  resource 51, 54, }{\b\f4 444}{\f4 \par }{\f6\fs20 rTextForLETextBox2}{\f4  resource 234, 235, }{\b\f4 445}{\f4 \par }{\f6\fs20 rToolStartup}{\f4  resource 143, }{\b\f4 445}{\f4 \par rubber-banding 173\par ruler 210\par }{\f6\fs20 rVersion}{\f4  resource 309-311, }{\b\f4 446}{\f4 \par }{\f6\fs20 rWindColor}{\f4  resource 112, 113, 411, }{\b\f4 447}{\f4 \par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f6\fs20 rWindParam1}{\f4  resource 89, 111, 112, 408, }{\b\f4 448}{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 S\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 Save As command 125, 129\par Save command 125\par saving files 125-129\par scan line control byte 167, 373\par scan lines 165, 387\par SCB 166, 167-168, 373, 387\par scrap file 221\par Scrap Manager 260, 393\par scrap types 220-221\par scrapbook 221\par }{\f6\fs20 scrapInfo}{\f4  393\par }{\f6\fs20 scrapInfoPtr}{\f4  393\par scraps 219-224, 260\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 picture 220\par private 220\par public 220\par text 220\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 screen dumps 137, 171\par scripts 61\par scroll bar 88, 89, 106, 108, 408, 410\par scroll bar control 240-245, 334, 335\par scrolling 89\par }{\f6\fs20 SetAllSCBs}{\f4  }{\b\f4 384}{\f4 \par }{\f6\fs20 SetBackColor}{\f4  15, 191, }{\b\f4 384}{\f4 \par }{\f6\fs20 SetColorEntry}{\f4  }{\b\f4 385}{\f4 \par }{\f6\fs20 SetColorTable}{\f4  167, }{\b\f4 385}{\f4 \par }{\f6\fs20 SetContentOrigin}{\f4  104, }{\b\f4 421}{\f4 \par }{\f6\fs20 SetCtlAction}{\f4  242, }{\b\f4 335}{\f4 \par }{\f6\fs20 SetCtlParams}{\f4  243, }{\b\f4 335}{\f4 \par }{\f6\fs20 SetCtlValue}{\f4  243, 244, 249, }{\b\f4 335}{\f4 \par }{\f6\fs20 SetDataSize}{\f4  104, }{\b\f4 421}{\f4 \par }{\f6\fs20 SetForeColor}{\f4  15, 190, }{\b\f4 385}{\f4 \par }{\f6\fs20 SetHandleID}{\f4  325, }{\b\f4 358}{\f4 \par }{\f6\fs20 SetLETextByID}{\f4  260, }{\b\f4 335}{\f4 \par }{\f6\fs20 SetMenuBar}{\f4  58, 362, }{\b\f4 363}{\f4 \par }{\f6\fs20 SetMenuFlag}{\f4  42, }{\b\f4 363}{\f4 \par }{\f6\fs20 SetMItem}{\f4  43, }{\b\f4 364}{\f4 \par }{\f6\fs20 SetMItemStyle}{\f4  }{\b\f4 364}{\f4 \par }{\f6\fs20 SetPage}{\f4  104, }{\b\f4 421}{\f4 \par }{\f6\fs20 SetPenMask}{\f4  175, }{\b\f4 385}{\f4 \par }{\f6\fs20 SetPenMode}{\f4  172, }{\b\f4 385}{\f4 \par }{\f6\fs20 SetPenPat}{\f4  }{\b\f4 386}{\f4 \par }{\f6\fs20 SetPenSize}{\f4  172, }{\b\f4 386}{\f4 \par }{\f6\fs20 SetPort}{\f4  97, 99, }{\b\f4 387}{\f4 \par }{\f6\fs20 SetPurge}{\f4  }{\b\f4 358}{\f4 \par }{\f6\fs20 SetSCB}{\f4  }{\b\f4 387}{\f4 \par }{\f6\fs20 SetScroll}{\f4  104, }{\b\f4 421}{\f4 \par }{\f6\fs20 SetSolidPenPat}{\f4  15, 172, }{\b\f4 387}{\f4 \par }{\f6\fs20 SetSysBar}{\f4  58, 362, }{\b\f4 364}{\f4 \par }{\f6\fs20 SetSysWindow}{\f4  }{\b\f4 421}{\f4 \par }{\f6\fs20 SetTextMode}{\f4  191, }{\b\f4 387}{\f4 \par }{\f6\fs20 SetWTitle}{\f4  126, }{\b\f4 422}{\f4 \par }{\f6\fs20 SFGetFile2}{\f4  119-125, }{\b\f4 398}{\f4 \par SFO 119, 129, 397\par }{\f6\fs20 SFPutFile2}{\f4  125, 129, }{\b\f4 399}{\f4 \par }{\f6\fs20 SFReplyRec2}{\f4  397, 400\par }{\f6\fs20 SFReplyRec2Ptr}{\f4  400\par }{\f6\fs20 SFTypeList2}{\f4  399, 400\par }{\f6\fs20 SFTypeList2Ptr}{\f4  399, 400\par shadow 195\par shift key 9\par }{\f6\fs20 ShowWindow}{\f4  106, 409, }{\b\f4 422}{\f4 \par SHR screen 165\par }{\f6\fs20 ShutDownTools}{\f4  142, 143, }{\b\f4 406}{\f4 \par simple button control 229-232\par size box 88\par }{\f6\fs20 SortList2}{\f4  }{\b\f4 355}{\f4 \par sound 283-305\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 compression 302\par digitized 286-291\par synthesized 303\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 sound input 304\par Sound Tool Set 395\par }{\f6\fs20 SoundParamBlock}{\f4  397\par speaker 285\par speech 304\par spooling 147\par Standard File Operations Tool Set 397\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 See also SFO\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 startdesk}{\f4  5-6, 7, 142, 322\par starting tools 142\par }{\f6\fs20 StartUpTools}{\f4  142, 143, 201, 322, }{\b\f4 407}{\f4 , 445\par static text control 234-236\par }{\f6\fs20 StillDown}{\f4  174, }{\b\f4 339}{\f4 \par stop alert 80\par string 445\par }{\f6\fs20 StringBounds}{\f4  192, }{\b\f4 388}{\f4 \par }{\f6\fs20 StringWidth}{\f4  192, }{\b\f4 388}{\f4 \par }{\f6\fs20 StyleItem}{\f4  405\par substitution strings 82-85, }{\b\f4 414}{\f4 \par super high resolution graphics 165\par synthesized sound 303\par }{\f6\fs20 SysBeep}{\f4  19, }{\b\f4 366}{\f4 \par }{\f6\fs20 SysFailMgr}{\f4  143, }{\b\f4 366}{\f4 \par system font 40, 193, 194\par system menu bar 21, 25\par system window 33\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 T\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 tabs 192, 209\par talking head 71\par target control 261, 263, 333\par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f6\fs20 TaskMaster}{\f4  }{\b\f4 33}{\f4 -}{\b\f4 36}{\f4 , 89, 91, 99, 103, 231, }{\b\f4 422}{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 TaskMasterDA}{\f4  328, }{\b\f4 423}{\f4 \par }{\f6\fs20 TEFormat}{\f4  406\par }{\f6\fs20 TEGetRuler}{\f4  210, }{\b\f4 401}{\f4 \par }{\f6\fs20 TEGetSelection}{\f4  281, }{\b\f4 401}{\f4 \par }{\f6\fs20 TEGetSelectionStyle}{\f4  213, }{\b\f4 401}{\f4 \par }{\f6\fs20 TEGetText}{\f4  214, }{\b\f4 402}{\f4 \par }{\f6\fs20 TEPaintText}{\f4  216, }{\b\f4 403}{\f4 \par }{\f6\fs20 TERuler}{\f4  405\par }{\f6\fs20 TESetRuler}{\f4  211, }{\b\f4 403}{\f4 \par }{\f6\fs20 TESetSelection}{\f4  281, }{\b\f4 403}{\f4 \par }{\f6\fs20 TESetText}{\f4  214, 215, }{\b\f4 404}{\f4 \par }{\f6\fs20 TEStyle}{\f4  212, 405\par }{\f6\fs20 TEStyleChange}{\f4  212, }{\b\f4 404}{\f4 \par }{\f6\fs20 TEStyleGroup}{\f4  405\par text 13\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 bold 195\par colored 190\par italic 195\par outlined 195\par shadowed 195\par underline 195\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 text colors 212\par text edit 201-218\par text justification 210-211\par text mode 387\par text scraps 220\par text styles 212\par }{\f6\fs20 TextBounds}{\f4  192, }{\b\f4 388}{\f4 \par TextEdit Tool Set 401\par }{\f6\fs20 TextStyle}{\f4  365\par }{\f6\fs20 TextWidth}{\f4  192, }{\b\f4 388}{\f4 \par thermometer control 248-250\par thumb 103\par tick count 8\par time 329\par title bar 87\par tool errors 425\par Tool Locator 406\par tool numbers 144\par tool versions 144\par toolbox 3, 5\par }\pard \s19\fi-180\li180\widctlpar\adjustright {\f4 toolbox reference manuals 3, 5, 17, 18, 449-450\par }\pard \s19\widctlpar\adjustright {\f6\fs20 toolerror}{\f4  130\par tools\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 see also: individual tool names\par shutting down 5, 6\par starting 5, 6, 142\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 topMost}{\f4  423\par types.rez 51\par }{\f6\fs20 TypeSelector2}{\f4  399, 400\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 U\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 underline 40, 195\par }{\f6\fs20 UnloadScrap}{\f4  221, }{\b\f4 395}{\f4 \par update events 99\par update procedure 333\par update region 182\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 V\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 vibrato 299\par volume 299, 367\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 W\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 WaveForm}{\f4  368\par }{\f6\fs20 wColor}{\f4  107, 410\par }{\f6\fs20 wContDefProc}{\f4  109, 411\par }{\f6\fs20 wDataH}{\f4  108, 410\par }{\f6\fs20 wDataW}{\f4  108, 410\par }{\f6\fs20 wFrameBits}{\f4  105, 408\par }{\f6\fs20 wFrameDefProc}{\f4  109, 411\par }{\f6\fs20 where}{\f4  101\par }{\f6\fs20 wInControl}{\f4  424\par }{\f6\fs20 WindColor}{\f4  424\par }{\f6\fs20 WindColorPtr}{\f4  424\par Window Manager 408\par windows 87-117\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 closing 90-91\par colors 110, }{\b\f4 411}{\f4 , 447\par customizing 105-116\par documents 91\par drawing in 97-98\par }\pard\plain \s19\li360\widctlpar\adjustright \f12\cgrid {\f4 frame 88\par }\pard\plain \s18\li360\widctlpar\adjustright \f12\cgrid {\f4 lined 110\par multiple 91-95\par name 95-97\par opening 88-90\par scrolling 103-105\par title 105, 107, 408, 410\par title bar 110\par updating 98-100, 102\par }\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f6\fs20 wInfoDefProc}{\f4  109, 411\par }{\f6\fs20 wInfoHeight}{\f4  108, 411\par }{\f6\fs20 wInfoRefCon}{\f4  108, 411\par }{\f6\fs20 wInGoAway}{\f4  91\par }{\f6\fs20 wInMenuBar}{\f4  25\par }{\f6\fs20 wInSpecial}{\f4  25\par }{\f6\fs20 wMaxH}{\f4  108, 410\par }{\f6\fs20 wMaxW}{\f4  108, 410\par }{\f6\fs20 wmTaskData}{\f4  26, 91\par }{\f6\fs20 wmTaskMask}{\f4  34, 35-36\par }{\f6\fs20 wPageHor}{\f4  108, 410\par }{\f6\fs20 wPageVer}{\f4  108, 410\par }{\f6\fs20 wPlane}{\f4  109, 411\par }{\f6\fs20 wPosition}{\f4  109, 411\par }{\f6\fs20 wRefCon}{\f4  107, 410\par }{\f6\fs20 WriteGS}{\f4  134, 136, }{\b\f4 351}{\f4 \par }{\f6\fs20 WriteRamBlock}{\f4  297, }{\b\f4 396}{\f4 \par }{\f6\fs20 wScrollHor}{\f4  108, 410\par }{\f6\fs20 wScrollVer}{\f4  108, 410\par }{\f6\fs20 wStorage}{\f4  109\par }{\f6\fs20 wTitle}{\f4  107, 410\par }{\f6\fs20 wXOrigin}{\f4  108, 410\par }{\f6\fs20 wYOrigin}{\f4  108, 410\par }{\f6\fs20 wZoom}{\f4  107, 410\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 X\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f4 XOR highlighting 441\par \par }\pard \s19\keepn\widctlpar\adjustright {\b\f4 Z\par }{\f4 \par }\pard \s19\widctlpar\adjustright {\f6\fs20 ZeroScrap}{\f4  221, }{\b\f4 395}{\f4 \par zoom box 87, 106, 409\par }{\f6\fs20 ZoomWindow}{\f4  106, 409}}}\pard\plain \s19\widctlpar\adjustright \f12\cgrid {\f4 \par }}